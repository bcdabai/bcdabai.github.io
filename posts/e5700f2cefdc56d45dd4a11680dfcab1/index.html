<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PQ(product quantization) 算法---(一) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PQ(product quantization) 算法---(一)" />
<meta property="og:description" content="转自：http://vividfree.github.io/ 1. 引言 Product quantization，国内有人直译为乘积量化，这里的乘积是指笛卡尔积（Cartesian product），意思是指把原来的向量空间分解为若干个低维向量空间的笛卡尔积，并对分解得到的低维向量空间分别做量化（quantization）。这样每个向量就能由多个低维空间的量化code组合表示。为简洁描述起见，下文用PQ作为product quantization的简称。
The idea is to decomposes the space into a Cartesian product of low dimensional subspaces and to quantize each subspace separately. A vector is represented by a short code composed of its subspace quantization indices.
2011年，Herve Jegou等学者在PAMI上发表了PQ方法的第一篇正式paper[1]，用于解决相似搜索问题（similarity search）或者也可以说是近邻搜索（nearest neighbor search）问题。其实这几位作者在2009年的INRIA（即法国国家信息与自动化研究所）的技术报告上已经发表PQ方法。这里插一段题外话，[1]的一作Herve Jegou和二作Matthijs Douze均在2015年跳槽去了Facebook AI research，并在今年3月份合作开源了Faiss相似搜索工具[4]。
近几年，深度学习技术被广泛用于图像识别、语音识别、自然语言处理等领域，能够把每个实体（图像、语音、文本）转换为对应的embedding向量。一般来说，相似的实体转换得到的embedding向量也是相似的。对于相似搜索问题，最简单的想法是暴力穷举法，如果全部实体的个数是n，n是千万量级甚至是上亿的规模，每个实体对应的向量是D，那么当要从这个实体集合中寻找某个实体的相似实体，暴力穷举的计算复杂度是O(n×D)，这是一个非常大的计算量，该方法显然不可取。所以对大数据量下高维度数据的相似搜索场景，我们就需要一些高效的相似搜索技术，而PQ就是其中一类方法。
PQ是一种量化（quantization）方法，本质上是数据的一种压缩表达方法（其实通信学科的一个主要研究工作就是研究信号的压缩表达），所以该方法除了可以用在相似搜索外，还可以用于模型压缩，特别是深度神经网络的模型压缩上。由于相似搜索不仅要考虑如何量化的问题，还要考虑如何检索（search）的问题，而模型压缩可能更主要的是考虑如何量化的问题，不用太关注如何检索这个问题，所以这篇文章会主要站在相似搜索上的应用来介绍PQ方法。至于模型压缩，可以找找近几年研究神经网络模型压缩的paper或者一些互联网公司（比如百度, Snap等）发出的一些资料[3]。
2. 相似搜索的若干种方法 参考文献[5][6]很好的总结了相似搜索的几类方法，这里简要总结几个核心点。可以将方法分为三大类：
基于树的方法 KD树是其下的经典算法。一般而言，在空间维度比较低时，KD树的查找性能还是比较高效的；但当空间维度较高时，该方法会退化为暴力枚举，性能较差，这时一般会采用下面的哈希方法或者矢量量化方法。哈希方法 LSH(Locality-Sensitive Hashing)是其下的代表算法。文献[7]是一篇非常好的LSH入门资料。对于小数据集和中规模的数据集(几个million-几十个million)，基于LSH的方法的效果和性能都还不错。这方面有2个开源工具FALCONN和NMSLIB。矢量量化方法 矢量量化方法，即vector quantization。在矢量量化编码中，关键是码本的建立和码字搜索算法。比如常见的聚类算法，就是一种矢量量化方法。而在相似搜索中，向量量化方法又以PQ方法最为典型。对于大规模数据集(几百个million以上)，基于矢量量化的方法是一个明智的选择，可以用用Faiss开源工具。 3. Product Quantization算法的核心 文献[1]详细介绍了PQ算法的过程和时间复杂度分析，这篇博客的第3节和第4节简要总结下其中的若干要点。
在介绍PQ算法前，先简要介绍vector quantization。在信息论里，quantization是一个被充分研究的概念。Vector quantization定义了一个量化器quantizer，即一个映射函数q，它将一个D维向量x转换码本cookbook中的一个向量，这个码本的大小用k表示。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e5700f2cefdc56d45dd4a11680dfcab1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-08T16:47:33+08:00" />
<meta property="article:modified_time" content="2018-07-08T16:47:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PQ(product quantization) 算法---(一)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="1-引言" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:500;line-height:1.1;background-color:rgb(255,255,255);"><span style="font-size:18px;color:#000000;">转自：<a href="http://vividfree.github.io/" rel="nofollow">http://vividfree.github.io/ </a>  </span></h3> 
<h3 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:500;line-height:1.1;color:rgb(242,36,48);background-color:rgb(255,255,255);"><span style="font-size:18px;">1. 引言</span></h3> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">Product quantization，国内有人直译为乘积量化，这里的乘积是指笛卡尔积（Cartesian product），意思是指把原来的向量空间分解为若干个低维向量空间的笛卡尔积，并对分解得到的低维向量空间分别做量化（quantization）。这样每个向量就能由多个低维空间的量化code组合表示。为简洁描述起见，下文用PQ作为product quantization的简称。</p> 
<blockquote style="border-left:5px solid rgb(238,238,238);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <p style="font-size:17.5px;line-height:1.25;">The idea is to decomposes the space into a Cartesian product of low dimensional subspaces and to quantize each subspace separately. A vector is represented by a short code composed of its subspace quantization indices.</p> 
</blockquote> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">2011年，Herve Jegou等学者在PAMI上发表了PQ方法的第一篇正式paper[1]，用于解决相似搜索问题（similarity search）或者也可以说是近邻搜索（nearest neighbor search）问题。其实这几位作者在2009年的INRIA（即法国国家信息与自动化研究所）的技术报告上已经发表PQ方法。这里插一段题外话，[1]的一作Herve Jegou和二作Matthijs Douze均在2015年跳槽去了Facebook AI research，并在今年3月份合作开源了Faiss相似搜索工具[4]。</p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">近几年，深度学习技术被广泛用于图像识别、语音识别、自然语言处理等领域，能够把每个实体（图像、语音、文本）转换为对应的embedding向量。一般来说，相似的实体转换得到的embedding向量也是相似的。对于相似搜索问题，最简单的想法是暴力穷举法，如果全部实体的个数是<span class="MathJax" id="MathJax-Element-1-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-1" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-2" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-3" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>，<span class="MathJax" id="MathJax-Element-2-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-4" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-5" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-6" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>是千万量级甚至是上亿的规模，每个实体对应的向量是<span class="MathJax" id="MathJax-Element-3-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-7" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-8" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-9" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>，那么当要从这个实体集合中寻找某个实体的相似实体，暴力穷举的计算复杂度是<span class="MathJax" id="MathJax-Element-4-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-10" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-11" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-12" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">O</span><span class="mo" id="MathJax-Span-13" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-14" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-15" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="mi" id="MathJax-Span-16" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span class="mo" id="MathJax-Span-17" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>，这是一个非常大的计算量，该方法显然不可取。所以对大数据量下高维度数据的相似搜索场景，我们就需要一些高效的相似搜索技术，而PQ就是其中一类方法。</p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">PQ是一种量化（quantization）方法，本质上是数据的一种压缩表达方法（其实通信学科的一个主要研究工作就是研究信号的压缩表达），所以该方法除了可以用在相似搜索外，还可以用于模型压缩，特别是深度神经网络的模型压缩上。由于相似搜索不仅要考虑如何量化的问题，还要考虑如何检索（search）的问题，而模型压缩可能更主要的是考虑如何量化的问题，不用太关注如何检索这个问题，所以这篇文章会主要站在相似搜索上的应用来介绍PQ方法。至于模型压缩，可以找找近几年研究神经网络模型压缩的paper或者一些互联网公司（比如百度, Snap等）发出的一些资料[3]。</p> 
<h3 id="2-相似搜索的若干种方法" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:500;line-height:1.1;color:rgb(242,36,48);background-color:rgb(255,255,255);"><span style="font-size:18px;">2. 相似搜索的若干种方法</span></h3> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">参考文献[5][6]很好的总结了相似搜索的几类方法，这里简要总结几个核心点。可以将方法分为三大类：</p> 
<ul style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><li>基于树的方法 
  <ul><li>KD树是其下的经典算法。一般而言，在空间维度比较低时，KD树的查找性能还是比较高效的；但当空间维度较高时，该方法会退化为暴力枚举，性能较差，这时一般会采用下面的哈希方法或者矢量量化方法。</li></ul></li><li>哈希方法 
  <ul><li>LSH(Locality-Sensitive Hashing)是其下的代表算法。文献[7]是一篇非常好的LSH入门资料。</li><li>对于小数据集和中规模的数据集(几个million-几十个million)，基于LSH的方法的效果和性能都还不错。这方面有2个开源工具FALCONN和NMSLIB。</li></ul></li><li>矢量量化方法 
  <ul><li>矢量量化方法，即vector quantization。在矢量量化编码中，关键是码本的建立和码字搜索算法。比如常见的聚类算法，就是一种矢量量化方法。而在相似搜索中，向量量化方法又以PQ方法最为典型。</li><li>对于大规模数据集(几百个million以上)，基于矢量量化的方法是一个明智的选择，可以用用Faiss开源工具。</li></ul></li></ul> 
<h3 id="3-product-quantization算法的核心" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:500;line-height:1.1;color:rgb(242,36,48);background-color:rgb(255,255,255);"><span style="font-size:18px;">3. Product Quantization算法的核心</span></h3> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">文献[1]详细介绍了PQ算法的过程和时间复杂度分析，这篇博客的第3节和第4节简要总结下其中的若干要点。</p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">在介绍PQ算法前，先简要介绍vector quantization。在信息论里，quantization是一个被充分研究的概念。Vector quantization定义了一个量化器quantizer，即一个映射函数<span class="MathJax" id="MathJax-Element-5-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-18" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-19" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-20" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>，它将一个<span class="MathJax" id="MathJax-Element-6-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-21" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-22" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-23" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>维向量<span class="MathJax" id="MathJax-Element-7-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-24" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-25" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-26" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>转换码本cookbook中的一个向量，这个码本的大小用<span class="MathJax" id="MathJax-Element-8-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-27" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-28" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-29" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>表示。</p> 
<blockquote style="border-left:5px solid rgb(238,238,238);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <p style="font-size:17.5px;line-height:1.25;">Quantization is a destructive process which has been extensively studied in information theory. Its purpose is to reduce the cardinality of the representation space, in particular when the input data is real-valued. Formally, a quantizer is a function <span class="MathJax" id="MathJax-Element-9-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-30" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-31" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-32" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.283em;line-height:normal;width:0px;"></span></span></span> mapping a <span class="MathJax" id="MathJax-Element-10-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-33" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-34" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-35" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span>-dimensional vector <span class="MathJax" id="MathJax-Element-11-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-36" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-37" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-38" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-39" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">∈</span><span class="texatom" id="MathJax-Span-40" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-41" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-42" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-43" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">R</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-44" style="border:0px;vertical-align:0px;line-height:normal;font-size:14.847px;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.111em;line-height:normal;width:0px;"></span></span></span> to a vector <span class="MathJax" id="MathJax-Element-12-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-45" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-46" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-47" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-48" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-49" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-50" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-51" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">∈</span><span class="texatom" id="MathJax-Span-52" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-53" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-54" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span></span><span class="mo" id="MathJax-Span-55" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="texatom" id="MathJax-Span-56" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-57" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-58" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-59" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-60" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-61" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-62" style="border:0px;vertical-align:0px;line-height:normal;font-size:14.847px;font-family:'MathJax_Math-italic';">i</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-63" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">;</span><span class="mi" id="MathJax-Span-64" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span class="mo" id="MathJax-Span-65" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">∈</span><span class="texatom" id="MathJax-Span-66" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-67" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-68" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">I<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.34em;line-height:normal;width:0px;"></span></span></span>, where the index set <span class="MathJax" id="MathJax-Element-13-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-69" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-70" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-71" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">I<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span> is from now on assumed to be finite: <span class="MathJax" id="MathJax-Element-14-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-72" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-73" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-74" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">I<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-75" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-76" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">0</span><span class="mo" id="MathJax-Span-77" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mo" id="MathJax-Span-78" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">⋯</span><span class="mo" id="MathJax-Span-79" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-80" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span class="mo" id="MathJax-Span-81" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−</span><span class="mn" id="MathJax-Span-82" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.283em;line-height:normal;width:0px;"></span></span></span>. The reproduction values <span class="MathJax" id="MathJax-Element-15-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-83" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-84" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-85" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-86" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-87" style="border:0px;vertical-align:0px;line-height:normal;font-size:14.847px;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.226em;line-height:normal;width:0px;"></span></span></span> are called <span class="MathJax" id="MathJax-Element-16-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-88" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-89" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mstyle" id="MathJax-Span-90" style="border:0px;vertical-align:0px;line-height:normal;color:#FF0000;"><span class="mrow" id="MathJax-Span-91" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-92" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span class="mi" id="MathJax-Span-93" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">e</span><span class="mi" id="MathJax-Span-94" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mi" id="MathJax-Span-95" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">t</span><span class="mi" id="MathJax-Span-96" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">r</span><span class="mi" id="MathJax-Span-97" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">o</span><span class="mi" id="MathJax-Span-98" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span class="mi" id="MathJax-Span-99" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mi" id="MathJax-Span-100" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span>. The set of reproduction values <span class="MathJax" id="MathJax-Element-17-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-101" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-102" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-103" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span> is the <span class="MathJax" id="MathJax-Element-18-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-104" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-105" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mstyle" id="MathJax-Span-106" style="border:0px;vertical-align:0px;line-height:normal;color:#FF0000;"><span class="mrow" id="MathJax-Span-107" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-108" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span class="mi" id="MathJax-Span-109" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">o</span><span class="mi" id="MathJax-Span-110" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mi" id="MathJax-Span-111" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">e</span><span class="mi" id="MathJax-Span-112" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">b</span><span class="mi" id="MathJax-Span-113" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">o</span><span class="mi" id="MathJax-Span-114" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">o</span><span class="mi" id="MathJax-Span-115" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span> of size <span class="MathJax" id="MathJax-Element-19-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-116" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-117" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-118" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span>.</p> 
</blockquote> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">如果希望量化器达到最优，那么需要量化器满足Lloyd最优化条件。而这个最优量化器，恰巧就能对应到机器学习领域最常用的kmeans聚类算法。需要注意的是kmeans算法的损失函数不是凸函数，受初始点设置的影响，算法可能会收敛到不同的聚类中心点（局部最优解），当然有kmeans++等方法来解决这个问题，对这个问题，这篇文章就不多做描述。一般来说，码本的大小<span class="MathJax" id="MathJax-Element-20-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-119" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-120" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-121" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>一般会是2的幂次方，那么就可以用<span class="MathJax" id="MathJax-Element-21-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-122" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-123" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-124" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-125" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">log</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-126" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-127" style="border:0px;vertical-align:0px;line-height:normal;"></span><span class="mi" id="MathJax-Span-128" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span> bit对应的向量来表示码本的每个值。</p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">有了vector quantization算法的铺垫，就好理解PQ算法。其实PQ算法可以理解为是对vector quantization做了一次分治，首先把原始的向量空间分解为m个低维向量空间的笛卡尔积，并对分解得到的低维向量空间分别做量化，那如何对低维向量空间做量化呢？恰巧又正是用kmeans算法。所以换句话描述就是，把原始<span class="MathJax" id="MathJax-Element-22-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-129" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-130" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-131" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>维向量（比如<span class="MathJax" id="MathJax-Element-23-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-132" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-133" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-134" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span class="mo" id="MathJax-Span-135" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-136" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">128</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>）分成<span class="MathJax" id="MathJax-Element-24-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-137" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-138" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-139" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>组（比如<span class="MathJax" id="MathJax-Element-25-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-140" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-141" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-142" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-143" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-144" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">4</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>），每组就是<span class="MathJax" id="MathJax-Element-26-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-145" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-146" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-147" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-148" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-149" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-150" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mi" id="MathJax-Span-151" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span class="texatom" id="MathJax-Span-152" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-153" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-154" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">/</span></span></span><span class="mi" id="MathJax-Span-155" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>维的子向量（比如<span class="MathJax" id="MathJax-Element-27-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-156" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-157" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-158" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-159" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-160" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-161" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mi" id="MathJax-Span-162" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span class="texatom" id="MathJax-Span-163" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-164" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-165" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">/</span></span></span><span class="mi" id="MathJax-Span-166" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-167" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-168" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">128</span><span class="texatom" id="MathJax-Span-169" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-170" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-171" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">/</span></span></span><span class="mn" id="MathJax-Span-172" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">4</span><span class="mo" id="MathJax-Span-173" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-174" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">32</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>)，各自用kmeans算法学习到一个码本，然后这些码本的笛卡尔积就是原始<span class="MathJax" id="MathJax-Element-28-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-175" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-176" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-177" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>维向量对应的码本。用<span class="MathJax" id="MathJax-Element-29-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-178" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-179" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-180" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-181" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-182" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.425em;line-height:normal;width:0px;"></span></span></span>表示第<span class="MathJax" id="MathJax-Element-30-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-183" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-184" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-185" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">j</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>组子向量，用<span class="MathJax" id="MathJax-Element-31-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-186" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-187" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-188" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-189" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-190" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.425em;line-height:normal;width:0px;"></span></span></span>表示其对应学习到的码本，那么原始<span class="MathJax" id="MathJax-Element-32-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-191" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-192" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-193" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>维向量对应的码本就是<span class="MathJax" id="MathJax-Element-33-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-194" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-195" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-196" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-197" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="msubsup" id="MathJax-Span-198" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-199" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-200" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-201" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="texatom" id="MathJax-Span-202" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-203" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-204" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-205" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-206" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-207" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="texatom" id="MathJax-Span-208" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-209" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-210" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">…</span></span></span><span class="mo" id="MathJax-Span-211" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="texatom" id="MathJax-Span-212" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-213" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-214" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-215" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">C<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-216" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">m</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>。用<span class="MathJax" id="MathJax-Element-34-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-217" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-218" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-219" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-220" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-221" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>表示子向量的聚类中心点数或者说码本大小，那么原始D维向量对应的聚类中心点数或者说码本大小就是<span class="MathJax" id="MathJax-Element-35-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-222" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-223" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-224" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span class="mo" id="MathJax-Span-225" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mo" id="MathJax-Span-226" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="msubsup" id="MathJax-Span-227" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-228" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-229" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="msubsup" id="MathJax-Span-230" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-231" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-232" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">m</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>。可以看到<span class="MathJax" id="MathJax-Element-36-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-233" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-234" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-235" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-236" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-237" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>或者<span class="MathJax" id="MathJax-Element-37-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-238" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-239" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-240" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-241" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mi" id="MathJax-Span-242" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>是PQ算法的2种极端情况，对<span class="MathJax" id="MathJax-Element-38-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-243" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-244" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-245" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-246" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-247" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>，PQ算法就回退到vector quantization，对<span class="MathJax" id="MathJax-Element-39-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-248" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-249" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-250" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-251" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mi" id="MathJax-Span-252" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>，PQ算法相当于对原始向量的每一维都用kmeans算出码本。</p> 
<blockquote style="border-left:5px solid rgb(238,238,238);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <p style="font-size:17.5px;line-height:1.25;">The strength of a product quantizer is to produce a large set of centroids from several small sets of centroids: those associated with the subquantizers. When learning the subquantizers using Lloyd’s algorithm, a limited number of vectors is used, but the codebook is, to some extent, still adapted to the data distribution to represent. The complexity of learning the quantizer is m times the complexity of performing k-means clustering with <span class="MathJax" id="MathJax-Element-40-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-253" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-254" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-255" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-256" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-257" style="border:0px;vertical-align:0px;line-height:normal;font-size:14.847px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span> centroids of dimension <span class="MathJax" id="MathJax-Element-41-Frame" style="line-height:normal;text-align:left;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-258" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:21px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-259" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-260" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-261" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-262" style="border:0px;vertical-align:0px;line-height:normal;font-size:14.847px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.054em;line-height:normal;width:0px;"></span></span></span>.</p> 
</blockquote> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">如图1所示，论文作者在一些数据集上调试<span class="MathJax" id="MathJax-Element-42-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-263" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-264" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-265" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-266" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-267" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>和<span class="MathJax" id="MathJax-Element-43-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-268" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-269" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-270" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>，综合考虑向量的编码长度和平方误差，最后得到一个结论或者说默认配置，<span class="MathJax" id="MathJax-Element-44-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-271" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-272" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-273" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-274" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-275" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-276" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-277" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">256</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>和<span class="MathJax" id="MathJax-Element-45-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-278" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-279" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-280" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-281" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-282" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">8</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>。像这样一种默认配置，相当于用 <span class="MathJax" id="MathJax-Element-46-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-283" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-284" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-285" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-286" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="texatom" id="MathJax-Span-287" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-288" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-289" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-290" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">log</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-291" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-292" style="border:0px;vertical-align:0px;line-height:normal;"></span><span class="texatom" id="MathJax-Span-293" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-294" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-295" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-296" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-297" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span></span></span><span class="mo" id="MathJax-Span-298" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-299" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">8</span><span class="mo" id="MathJax-Span-300" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="texatom" id="MathJax-Span-301" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-302" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-303" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-304" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">log</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-305" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-306" style="border:0px;vertical-align:0px;line-height:normal;"></span><span class="texatom" id="MathJax-Span-307" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-308" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-309" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">256</span></span></span></span></span><span class="mo" id="MathJax-Span-310" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-311" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">64</span><span class="mtext" id="MathJax-Span-312" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';"> </span><span class="mi" id="MathJax-Span-313" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">b</span><span class="mi" id="MathJax-Span-314" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span class="mi" id="MathJax-Span-315" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">t</span><span class="mi" id="MathJax-Span-316" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span class="mo" id="MathJax-Span-317" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-318" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">8</span><span class="mtext" id="MathJax-Span-319" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';"> </span><span class="mi" id="MathJax-Span-320" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">b</span><span class="mi" id="MathJax-Span-321" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mi" id="MathJax-Span-322" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">t</span><span class="mi" id="MathJax-Span-323" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">e</span><span class="mi" id="MathJax-Span-324" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>来表示一个原始向量。图2是在这个默认配置下对128维的原始数据用PQ算法的示意图。</p> 
<div align="center" style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <img src="https://images2.imgbox.com/ab/ec/VgqtAJBT_o.jpg" alt="" style="border:0px;vertical-align:middle;">  
 <br> 
 <span style="color:#FF0000;">图1 量化误差与m和k*之间的关系</span>  
 <br> 
</div> 
<div align="center" style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <img src="https://images2.imgbox.com/9e/7c/0N4K119C_o.jpg" alt="" style="border:0px;vertical-align:middle;">  
 <br> 
 <span style="color:#FF0000;">图2 PQ算法的示意图</span>  
 <br> 
</div> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">上面介绍了如何建立PQ的量化器，下面将介绍如何基于这些量化器做相似搜索。有2种方法做相似搜索，一种是SDC(symmetric distance computation)，另一种是ADC(asymmetric distance computation)。SDC算法和ADC算法的区别在于是否要对查询向量<span class="MathJax" id="MathJax-Element-47-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-325" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-326" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-327" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>做量化，参见公式1和公式2。如图3所示，<span class="MathJax" id="MathJax-Element-48-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-328" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-329" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-330" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>是查询向量(query vector)，<span class="MathJax" id="MathJax-Element-49-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-331" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-332" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-333" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>是数据集中的某个向量，目标是要在数据集中找到<span class="MathJax" id="MathJax-Element-50-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-334" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-335" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-336" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>的相似向量。</p> 
<div align="center" style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <img src="https://images2.imgbox.com/08/81/rR02hzpI_o.jpg" alt="" style="border:0px;vertical-align:middle;">  
 <br> 
 <span style="color:#FF0000;">图3 SDC和ADC的示意图</span>  
 <br> 
</div> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">SDC算法：先用PQ量化器对<span class="MathJax" id="MathJax-Element-51-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-337" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-338" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-339" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>和<span class="MathJax" id="MathJax-Element-52-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-340" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-341" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-342" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>表示为对应的中心点<span class="MathJax" id="MathJax-Element-53-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-343" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-344" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-345" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-346" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-347" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-348" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>和<span class="MathJax" id="MathJax-Element-54-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-349" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-350" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-351" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-352" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-353" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-354" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>，然后用公式1来近似<span class="MathJax" id="MathJax-Element-55-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-355" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-356" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-357" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-358" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-359" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-360" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-361" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-362" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>。</p> 
<div class="MathJax_Display" style="text-align:center;min-width:0px;min-height:0px;"> 
 <span class="MathJax MathJax_FullWidth" id="MathJax-Element-56-Frame" style="line-height:normal;font-size:14px;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-363" style="border:0px;vertical-align:0px;line-height:normal;min-width:24.348em;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;min-width:24.348em;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-364" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtable" id="MathJax-Span-365" style="border:0px;vertical-align:0px;line-height:normal;min-width:24.348em;"><span style="border:0px;vertical-align:0px;line-height:normal;min-width:24.348em;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtd" id="MathJax-Span-369" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-370" style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-371" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-372" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-373" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-374" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-375" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">^</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-376" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-377" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-378" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-379" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-380" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-381" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mi" id="MathJax-Span-382" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-383" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-384" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-385" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-386" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-387" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-388" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-389" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-390" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-391" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-392" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-393" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-394" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="msqrt" id="MathJax-Span-395" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-396" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-397" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-398" style="border:0px;vertical-align:0em;line-height:normal;font-family:'MathJax_Size2';">∑</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-399" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-400" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-401" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mi" id="MathJax-Span-402" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-403" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="msubsup" id="MathJax-Span-404" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-405" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-406" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-407" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-408" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-409" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-410" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-411" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-412" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-413" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-414" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-415" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-416" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="msubsup" id="MathJax-Span-417" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-418" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-419" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Size4';">√</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtd" id="mjx-eqn-1" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-367" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtext" id="MathJax-Span-368" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(1)</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-1.568em;line-height:normal;width:0px;"><br></span></span></span> 
</div> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">对SDC的2点补充说明：</p> 
<ol style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><li>为提高计算速度，一般会提前算好<span class="MathJax" id="MathJax-Element-57-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-420" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-421" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-422" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-423" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="msubsup" id="MathJax-Span-424" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-425" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-426" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-427" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-428" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span class="mo" id="MathJax-Span-429" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-430" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-431" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-432" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-433" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-434" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-435" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-436" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span class="mo" id="MathJax-Span-437" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">,</span><span class="msup" id="MathJax-Span-438" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-439" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-440" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">′</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="msubsup" id="MathJax-Span-441" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-442" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-443" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.496em;line-height:normal;width:0px;"></span></span></span>，然后在检索时就是查表，以O(1)的复杂度查出结果。</li><li><span class="MathJax" id="MathJax-Element-58-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-444" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-445" style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-446" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-447" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-448" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-449" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-450" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">^</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-451" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-452" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-453" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-454" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-455" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>是<span class="MathJax" id="MathJax-Element-59-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-456" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-457" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-458" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-459" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-460" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-461" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-462" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-463" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>的近似计算，一般会先用相似计算方法选出top N近邻，然后再做rerank以拿到最终的近邻排序结果。</li></ol> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">ADC算法：只对<span class="MathJax" id="MathJax-Element-60-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-464" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-465" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-466" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>表示为对应的中心点<span class="MathJax" id="MathJax-Element-61-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-467" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-468" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-469" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-470" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-471" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-472" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>，然后用公式2来近似<span class="MathJax" id="MathJax-Element-62-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-473" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-474" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-475" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-476" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-477" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-478" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-479" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-480" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>。</p> 
<div class="MathJax_Display" style="text-align:center;min-width:0px;min-height:0px;"> 
 <span class="MathJax MathJax_FullWidth" id="MathJax-Element-63-Frame" style="line-height:normal;font-size:14px;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-481" style="border:0px;vertical-align:0px;line-height:normal;min-width:24.943em;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;min-width:24.943em;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-482" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtable" id="MathJax-Span-483" style="border:0px;vertical-align:0px;line-height:normal;min-width:24.943em;"><span style="border:0px;vertical-align:0px;line-height:normal;min-width:24.943em;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtd" id="MathJax-Span-487" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-488" style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-489" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-490" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-491" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-492" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-493" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">˜</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-494" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-495" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-496" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-497" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-498" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-499" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mi" id="MathJax-Span-500" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-501" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-502" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-503" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-504" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-505" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-506" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-507" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-508" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-509" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="msqrt" id="MathJax-Span-510" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-511" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-512" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-513" style="border:0px;vertical-align:0em;line-height:normal;font-family:'MathJax_Size2';">∑</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-514" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-515" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-516" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mi" id="MathJax-Span-517" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-518" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="msubsup" id="MathJax-Span-519" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-520" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">u</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-521" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-522" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-523" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-524" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-525" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-526" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-527" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">q<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-528" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-529" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="msubsup" id="MathJax-Span-530" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-531" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">u</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-532" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-533" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-534" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-535" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-536" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="msubsup" id="MathJax-Span-537" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-538" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-539" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Size4';">√</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtd" id="mjx-eqn-2" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-485" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mtext" id="MathJax-Span-486" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(2)</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-1.568em;line-height:normal;width:0px;"><br></span></span></span> 
</div> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">对ADC的2点补充说明：</p> 
<ol style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><li>为提高计算速度，一般会在检索前提前算好<span class="MathJax" id="MathJax-Element-64-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-540" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-541" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-542" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-543" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="msubsup" id="MathJax-Span-544" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-545" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">u</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-546" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-547" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-548" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-549" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-550" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-551" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-552" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">c</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-553" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-554" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-555" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">j</span><span class="mo" id="MathJax-Span-556" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-557" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="msubsup" id="MathJax-Span-558" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-559" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-560" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-561" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">:</span><span class="mi" id="MathJax-Span-562" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">j</span><span class="mo" id="MathJax-Span-563" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-564" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span><span class="mo" id="MathJax-Span-565" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mo" id="MathJax-Span-566" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">⋯</span><span class="mo" id="MathJax-Span-567" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-568" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-569" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-570" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span class="mo" id="MathJax-Span-571" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-572" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span><span class="mo" id="MathJax-Span-573" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mo" id="MathJax-Span-574" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">⋯</span><span class="mo" id="MathJax-Span-575" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-576" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-577" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-578" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.425em;line-height:normal;width:0px;"></span></span></span>，然后在检索时就是查表，以O(1)的复杂度查出结果。</li><li><span class="MathJax" id="MathJax-Element-65-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-579" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-580" style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-581" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-582" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-583" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-584" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-585" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">˜</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-586" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-587" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-588" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-589" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-590" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>也是<span class="MathJax" id="MathJax-Element-66-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-591" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-592" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-593" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">d<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-594" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-595" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-596" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mi" id="MathJax-Span-597" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">y<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-598" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>的近似计算，与SDC类似，一般会先用相似计算方法选出top N近邻，然后再做rerank以拿到最终的近邻排序结果。</li></ol> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">图4对比了SDC算法和ADC算法的各阶段复杂度，当<span class="MathJax" id="MathJax-Element-67-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-599" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-600" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-601" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-602" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&gt;</span><span class="msubsup" id="MathJax-Span-603" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-604" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-605" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="msubsup" id="MathJax-Span-606" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-607" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-608" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.139em;line-height:normal;width:0px;"></span></span></span>时，计算瓶颈存在于公式1和公式2的计算上，它们的复杂度都是<span class="MathJax" id="MathJax-Element-68-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-609" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-610" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-611" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">O</span><span class="mo" id="MathJax-Span-612" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-613" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-614" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="mi" id="MathJax-Span-615" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-616" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>。</p> 
<div align="center" style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <img src="https://images2.imgbox.com/4f/69/V7l59G5q_o.jpg" alt="" style="border:0px;vertical-align:middle;">  
 <br> 
 <span style="color:#FF0000;">图4 对比SDC和ADC的各阶段计算复杂度</span>  
 <br> 
</div> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">文献[1]还对SDC和ADC算法做了两点更深入的分析，第一点是对距离的期望误差的上界进行分析。对ADC算法而言，距离的期望误差的上界只与量化误差有关，与输入的<span class="MathJax" id="MathJax-Element-69-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-617" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-618" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-619" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>无关，而对SDC算法而言，距离的期望误差的上界是ADC距离的期望误差的上界的两倍，所以作者建议在应用时倾向于用ADC算法。作者做的第二点分析是计算距离的平方的期望，并希望通过矫正拿到距离的无偏估计。作者虽然推导出校准项，但在实验中却发现加上校准项反倒使得距离的残差的方差加大了，所以作者建议在应用时倾向于不加校准项，也就是说还是用公式1或者公式2做计算。</p> 
<h3 id="4-product-quantization算法的改进" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:500;line-height:1.1;color:rgb(242,36,48);background-color:rgb(255,255,255);"><span style="font-size:18px;">4. Product Quantization算法的改进</span></h3> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">第3节介绍了SDC和ADC算法，当<span class="MathJax" id="MathJax-Element-70-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-620" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-621" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-622" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-623" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&gt;</span><span class="msubsup" id="MathJax-Span-624" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-625" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-626" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="msubsup" id="MathJax-Span-627" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-628" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-629" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.139em;line-height:normal;width:0px;"></span></span></span>时，计算瓶颈存在于公式1和公式2的计算上，它们的复杂度都是<span class="MathJax" id="MathJax-Element-71-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-630" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-631" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-632" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">O</span><span class="mo" id="MathJax-Span-633" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-634" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-635" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="mi" id="MathJax-Span-636" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-637" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>。实际中<span class="MathJax" id="MathJax-Element-72-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-638" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-639" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-640" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>可能是千万量级甚至更大，虽然相比暴力搜索算法，PQ算法已经减少了计算量，但计算量依旧很大，并不实用。所以作者提出了IVFADC算法，一种基于倒排索引的ADC算法。简而言之，该算法包含2层量化，第1层被称为coarse quantizer，粗粒度量化器，在原始的向量空间中，基于kmeans聚类出<span class="MathJax" id="MathJax-Element-73-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-641" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-642" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msup" id="MathJax-Span-643" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-644" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-645" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">′</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>个簇（文献[8]建议<span class="MathJax" id="MathJax-Element-74-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-646" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-647" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msup" id="MathJax-Span-648" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-649" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-650" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">′</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-651" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">=</span><span class="msqrt" id="MathJax-Span-652" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-653" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-654" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">−<span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">√</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.425em;line-height:normal;width:0px;"></span></span></span>）。第2层是上文讲的PQ量化器，不过这个PQ量化器不是直接在原始数据上做，而是经过第1层量化后，计算出每个数据与其量化中心的残差后，对这个残差数据集进行PQ量化。用PQ处理残差，而不是原始数据的原因是残差的方差或者能量比原始数据的方差或者能量要小。图5是该方法的索引和查询的流程图。</p> 
<blockquote style="border-left:5px solid rgb(238,238,238);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <p style="font-size:17.5px;line-height:1.25;">The energy of the residual vector is small compared to that of the vector itself.</p> 
</blockquote> 
<div align="center" style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"> 
 <img src="https://images2.imgbox.com/83/be/nhcYbWMB_o.jpg" alt="" style="border:0px;vertical-align:middle;">  
 <br> 
 <span style="color:#FF0000;">图5 IVFADC算法的索引和查询的流程图</span>  
 <br> 
</div> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">对IVFADC的3点补充说明：</p> 
<ol style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><li>考虑到在coarse quantization中，<span class="MathJax" id="MathJax-Element-75-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-655" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-656" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-657" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>和它的近邻不一定落在同一个簇中，所以在查询coarse quantization时，会同时取出<span class="MathJax" id="MathJax-Element-76-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-658" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-659" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-660" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">w</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>个倒排链。</li><li>对取出的每个倒排链，还是用第3节介绍的PQ算法把近邻给找出。</li><li>考虑当<span class="MathJax" id="MathJax-Element-77-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-661" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-662" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-663" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-664" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&gt;</span><span class="msubsup" id="MathJax-Span-665" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-666" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-667" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="msubsup" id="MathJax-Span-668" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-669" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">D</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-670" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">∗</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.139em;line-height:normal;width:0px;"></span></span></span>时，朴素的ADC算法的复杂度是<span class="MathJax" id="MathJax-Element-78-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-671" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-672" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-673" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">O</span><span class="mo" id="MathJax-Span-674" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-675" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-676" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="mi" id="MathJax-Span-677" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-678" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>，而IVFADC算法的复杂度会降低为<span class="MathJax" id="MathJax-Element-79-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-679" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.8px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-680" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-681" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">O</span><span class="mo" id="MathJax-Span-682" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mo" id="MathJax-Span-683" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-684" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-685" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="mi" id="MathJax-Span-686" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">w</span><span class="texatom" id="MathJax-Span-687" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-688" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-689" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">/</span></span></span><span class="msup" id="MathJax-Span-690" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-691" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-692" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">′</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-693" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span><span class="mo" id="MathJax-Span-694" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">×</span><span class="mi" id="MathJax-Span-695" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span><span class="mo" id="MathJax-Span-696" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>。</li></ol> 
<h3 id="参考文献" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-weight:500;line-height:1.1;color:rgb(242,36,48);background-color:rgb(255,255,255);"><span style="font-size:18px;">参考文献</span></h3> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[1] <a href="https://lear.inrialpes.fr/pubs/2011/JDS11/jegou_searching_with_quantization.pdf" rel="nofollow" style="background:transparent;color:rgb(66,139,202);">Product quantization for nearest neighbor search</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[2] <a href="https://docs.google.com/viewer?a=v&amp;pid=sites&amp;srcid=ZGVmYXVsdGRvbWFpbnxsc3ZydHV0b3JpYWxjdnByMTR8Z3g6NThhMjhhNzBkMGI5NTJkOA" rel="nofollow" style="background:transparent;color:rgb(66,139,202);">Efficient matching and indexing</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[3] <a href="https://www.jiqizhixin.com/articles/e70180f5-4274-4855-b749-23be41c800d7" rel="nofollow" style="background:transparent;color:rgb(66,139,202);">百度NLP | 神经网络模型压缩技术</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[4] <a href="https://github.com/facebookresearch/faiss" style="background:transparent;color:rgb(66,139,202);">Faiss</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[5] <a href="http://yongyuan.name/blog/ann-search.html" rel="nofollow" style="background:transparent;color:rgb(66,139,202);">图像检索：再叙ANN Search</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[6] <a href="https://www.quora.com/What-are-some-fast-similarity-search-algorithms-and-data-structures-for-high-dimensional-vectors" rel="nofollow" style="background:transparent;color:rgb(66,139,202);">What are some fast similarity search algorithms and data structures for high-dimensional vectors?</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[7] <a href="https://github.com/FALCONN-LIB/FALCONN/wiki/LSH-Primer" style="background:transparent;color:rgb(66,139,202);">Locality-Sensitive Hashing: a Primer</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[8] <a href="https://arxiv.org/abs/1702.08734" rel="nofollow" style="background:transparent;color:rgb(66,139,202);">Billion-scale similarity search with GPUs</a></p> 
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;background-color:rgb(255,255,255);">[9] <a href="http://hsinfu-blog.logdown.com/posts/184083-summarization-product-quantization-for-nearest-neighbor-search" rel="nofollow" style="background:transparent;color:rgb(42,100,150);">解读Product quantization for nearest neighbor search</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/20a66e235d4b79bf67f400d204d5d6cb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">牛客网刷题(纯java题型 1~30题)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9dae5833c1a0d1e746e1928fc851777a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">A星算法的c语言及源代码学习，室内环境求最短路径</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>