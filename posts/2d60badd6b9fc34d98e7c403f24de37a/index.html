<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>教你nginx同端口配置不同前端服务 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="教你nginx同端口配置不同前端服务" />
<meta property="og:description" content="手上只有一台服务器，用一个端口却想启动俩个服务？别急，下面就来教你怎么做 知识点： nginx反向代理只需在nginx.conf配置文件里面的 http 模块 写俩 server 模块，如下指定不同的 server_name (即域名)，重启服务 就可以愉快的访问啦nginx 基本命令 # 一般都是切换到 /usr/local/nginx/sbin 目录，执行以下操作 ./nginx # 启动 ./nginx -t # 测试 nginx.conf 配置文件是否出现语法错误 ./nginx -s reload # 重启nginx服务 ./nginx -s stop # 停止nginx服务 ./nginx -s quit # 安全退出 ps aux|grep nginx # 查看nginx进程 nginx.conf 主要配置
server { listen 80; server_name www.yourdomain.com; location ^~ / { alias /html/; # alias (目录别名)，值必须以/ 结尾 # root (上层目录), 值可加可不加/, 并且值后面会拼接 location 后的路径 index index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2d60badd6b9fc34d98e7c403f24de37a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-04T17:37:09+08:00" />
<meta property="article:modified_time" content="2023-12-04T17:37:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">教你nginx同端口配置不同前端服务</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_1"></a>手上只有一台服务器，用一个端口却想启动俩个服务？别急，下面就来教你怎么做</h2> 
<ul><li>知识点： <code>nginx反向代理</code></li><li>只需在<code>nginx.conf</code>配置文件里面的 <code>http</code> 模块 写俩 <code>server</code> 模块，如下</li><li>指定不同的 <code>server_name</code> (即域名)，</li><li>重启服务 就可以愉快的访问啦</li><li>nginx 基本命令</li></ul> 
<pre><code class="prism language-bash">	<span class="token comment">#  一般都是切换到 /usr/local/nginx/sbin 目录，执行以下操作</span>
	./nginx    <span class="token comment"># 启动</span>
	./nginx <span class="token parameter variable">-t</span>  <span class="token comment"># 测试 nginx.conf 配置文件是否出现语法错误</span>
	./nginx <span class="token parameter variable">-s</span> reload  <span class="token comment"># 重启nginx服务</span>
	./nginx <span class="token parameter variable">-s</span> stop   <span class="token comment"># 停止nginx服务 </span>
	./nginx <span class="token parameter variable">-s</span> quit  <span class="token comment"># 安全退出</span>

	<span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> nginx   <span class="token comment"># 查看nginx进程 </span>
</code></pre> 
<p>nginx.conf 主要配置</p> 
<pre><code class="prism language-bash"> 
 server <span class="token punctuation">{<!-- --></span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  www.yourdomain.com<span class="token punctuation">;</span>

        location ^~ / <span class="token punctuation">{<!-- --></span>
            <span class="token builtin class-name">alias</span>    /html/<span class="token punctuation">;</span>
            <span class="token comment"># alias (目录别名)，值必须以/ 结尾</span>
            <span class="token comment"># root (上层目录), 值可加可不加/, 并且值后面会拼接 location 后的路径</span>
            index index.html
            try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location /v1 <span class="token punctuation">{<!-- --></span>
			proxy_pass http://后端服务地址<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 server <span class="token punctuation">{<!-- --></span>
       listen       <span class="token number">80</span><span class="token punctuation">;</span>
       server_name  www.yourdomain2.com<span class="token punctuation">;</span>

       location ^~ / <span class="token punctuation">{<!-- --></span>
           <span class="token builtin class-name">alias</span>    /pc/xiaoyi/<span class="token punctuation">;</span>  <span class="token comment"># 前端项目所在位置</span>
           try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       location /v2 <span class="token punctuation">{<!-- --></span>
			proxy_pass http://后端服务地址2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
   <span class="token punctuation">}</span>



</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c7cb543c77ff65a476985ad818b619ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">TS类型报错解决：元素隐式具有 “any“ 类型，因为类型为 “string“ 的表达式不能用于索引类型 “{}“。 在类型 “{}“ 上找不到具有类型为 “string“ 的参数的索引签名。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/85eab6c2e84eb9fadac2f16529fcf09d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用nvm管理node多版本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>