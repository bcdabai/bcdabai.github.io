<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python基础教程——用做一个童年经典flybird游戏！【完整教程】 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python基础教程——用做一个童年经典flybird游戏！【完整教程】" />
<meta property="og:description" content="今天我们用Python写一个十年前风靡一时的flybird小游戏。主要用到是pygame模块。这个拿来做游戏还是很方便。
游戏界面
1.设置好编码模式和导入所需的库。假如模块缺失的自行用pip命令安装一下缺失的模块。
#!/usr/bin/env python3 # -*- coding: utf-8 -*- import sys import random import pygame 2.定义好全局变量，屏幕宽高、管道宽高、小鸟的宽高、地面的高度。这里我们使用长方体代替管道和小鸟。
# FPS FPS = 30 # 屏幕宽高 SCREEN_WIDTH = 288 SCREEN_HEIGHT = 512 # 管道宽高 PIPE_WIDTH = 50 PIPE_HEIGHT = 300 # 管道之间空隙 PIPE_GAP_SIZE = 100 # 小鸟 BIRD_WIDTH = 20 BIRD_HEIGHT = 20 # 地面高度 FLOOR_HEIGHT = 80 # 游戏有效高度 BASE_HEIGHT = SCREEN_HEIGHT - FLOOR_HEIGHT 3.定义好小鸟类，设置好初始的状态、更新小鸟的位置方法、上升、下落状态方法和绘制小鸟方法。
class Bird(pygame.sprite.Sprite): def __init__(self, position): pygame." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c0d8082385e13cfb8ef11df13099fb85/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-12T17:24:36+08:00" />
<meta property="article:modified_time" content="2024-01-12T17:24:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python基础教程——用做一个童年经典flybird游戏！【完整教程】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>今天我们用Python写一个十年前风靡一时的flybird小游戏。主要用到是pygame模块。这个拿来做游戏还是很方便。</p> 
<p><img src="https://images2.imgbox.com/27/d9/XCl0yPNu_o.png" alt="在这里插入图片描述"><br> 游戏界面</p> 
<p>1.设置好编码模式和导入所需的库。假如模块缺失的自行用pip命令安装一下缺失的模块。</p> 
<pre><code class="prism language-python">
<span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> random
<span class="token keyword">import</span> pygame
</code></pre> 
<p>2.定义好全局变量，屏幕宽高、管道宽高、小鸟的宽高、地面的高度。这里我们使用长方体代替管道和小鸟。</p> 
<pre><code class="prism language-python">
<span class="token comment"># FPS</span>
FPS <span class="token operator">=</span> <span class="token number">30</span>
<span class="token comment"># 屏幕宽高</span>
SCREEN_WIDTH <span class="token operator">=</span> <span class="token number">288</span>
SCREEN_HEIGHT <span class="token operator">=</span> <span class="token number">512</span>
<span class="token comment"># 管道宽高</span>
PIPE_WIDTH <span class="token operator">=</span> <span class="token number">50</span>
PIPE_HEIGHT <span class="token operator">=</span> <span class="token number">300</span>
<span class="token comment"># 管道之间空隙</span>
PIPE_GAP_SIZE <span class="token operator">=</span> <span class="token number">100</span>
<span class="token comment"># 小鸟</span>
BIRD_WIDTH <span class="token operator">=</span> <span class="token number">20</span>
BIRD_HEIGHT <span class="token operator">=</span> <span class="token number">20</span>
<span class="token comment"># 地面高度</span>
FLOOR_HEIGHT <span class="token operator">=</span> <span class="token number">80</span>
<span class="token comment"># 游戏有效高度</span>
BASE_HEIGHT <span class="token operator">=</span> SCREEN_HEIGHT <span class="token operator">-</span> FLOOR_HEIGHT
</code></pre> 
<p>3.定义好小鸟类，设置好初始的状态、更新小鸟的位置方法、上升、下落状态方法和绘制小鸟方法。</p> 
<pre><code class="prism language-python">
<span class="token keyword">class</span> <span class="token class-name">Bird</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span><span class="token operator">*</span>position<span class="token punctuation">,</span> BIRD_WIDTH<span class="token punctuation">,</span> BIRD_HEIGHT<span class="token punctuation">)</span>
        <span class="token comment"># 定义飞行变量</span>
        self<span class="token punctuation">.</span>is_flapped <span class="token operator">=</span> <span class="token boolean">False</span>
        self<span class="token punctuation">.</span>up_speed <span class="token operator">=</span> <span class="token number">10</span>
        self<span class="token punctuation">.</span>down_speed <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>time_pass <span class="token operator">=</span> FPS <span class="token operator">/</span> <span class="token number">1000</span>

    <span class="token comment"># 更新小鸟的位置</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 判断小鸟是上升还是下降</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_flapped<span class="token punctuation">:</span>
            <span class="token comment"># 上升速度越来越小</span>
            self<span class="token punctuation">.</span>up_speed <span class="token operator">-=</span> <span class="token number">60</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>time_pass
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">-=</span> self<span class="token punctuation">.</span>up_speed
            <span class="token comment"># 上升速度小于等于0, 改为下降状态</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>up_speed <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>down<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>up_speed <span class="token operator">=</span> <span class="token number">10</span>
                self<span class="token punctuation">.</span>down_speed <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token comment"># 下降速度越来越大</span>
            self<span class="token punctuation">.</span>down_speed <span class="token operator">+=</span> <span class="token number">20</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>time_pass
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">+=</span> self<span class="token punctuation">.</span>down_speed

        <span class="token comment"># 判断小鸟是否撞到了边界死亡</span>
        is_dead <span class="token operator">=</span> <span class="token boolean">False</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>  <span class="token comment"># 上边界</span>
            self<span class="token punctuation">.</span>up_speed <span class="token operator">=</span> <span class="token number">0</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">0</span>
            is_dead <span class="token operator">=</span> <span class="token boolean">True</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">&gt;=</span> BASE_HEIGHT<span class="token punctuation">:</span>  <span class="token comment"># 下边界</span>
            self<span class="token punctuation">.</span>up_speed <span class="token operator">=</span> <span class="token number">0</span>
            self<span class="token punctuation">.</span>down_speed <span class="token operator">=</span> <span class="token number">0</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">=</span> BASE_HEIGHT
            is_dead <span class="token operator">=</span> <span class="token boolean">True</span>

        <span class="token keyword">return</span> is_dead

    <span class="token comment"># 下落状态</span>
    <span class="token keyword">def</span> <span class="token function">down</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>is_flapped <span class="token operator">=</span> <span class="token boolean">False</span>

    <span class="token comment"># 上升状态</span>
    <span class="token keyword">def</span> <span class="token function">up</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_flapped<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>up_speed <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>up_speed <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>is_flapped <span class="token operator">=</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> screen<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">#设置小鸟的颜色,0代表填充，1代表无填充</span>
</code></pre> 
<p>4.定义好管道类，做好初始化和绘制方法。</p> 
<pre><code class="prism language-python">
<span class="token keyword">class</span> <span class="token class-name">Pipe</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        left<span class="token punctuation">,</span> top <span class="token operator">=</span> position
        <span class="token comment"># 如果是下边的管道, 通过定义管道高度, 删除地面以下的管道</span>
        pipe_height <span class="token operator">=</span> PIPE_HEIGHT
        <span class="token keyword">if</span> top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            pipe_height <span class="token operator">=</span> BASE_HEIGHT <span class="token operator">-</span> top <span class="token operator">+</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> PIPE_WIDTH<span class="token punctuation">,</span> pipe_height<span class="token punctuation">)</span>
        <span class="token comment"># 用于计算分数</span>
        self<span class="token punctuation">.</span>used_for_score <span class="token operator">=</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> screen<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">#设置管的颜色为绿色，0代表填充，1代表无填充</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">generate_pipe_position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 生成上下两个管道的坐标</span>
        top <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>BASE_HEIGHT <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span>
            <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>BASE_HEIGHT <span class="token operator">*</span> <span class="token number">0.6</span> <span class="token operator">-</span> PIPE_GAP_SIZE<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'top'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>SCREEN_WIDTH <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">,</span> top <span class="token operator">-</span> PIPE_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">'bottom'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>SCREEN_WIDTH <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">,</span> top <span class="token operator">+</span> PIPE_GAP_SIZE<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>5.定义初始化游戏函数</p> 
<pre><code class="prism language-python">
<span class="token comment"># 初始化游戏</span>
<span class="token keyword">def</span> <span class="token function">init_game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
    screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span>SCREEN_WIDTH<span class="token punctuation">,</span> SCREEN_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">'Fly Bird游戏'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> screen
</code></pre> 
<p>6.定义初始化精灵函数</p> 
<pre><code class="prism language-python">
<span class="token comment"># 初始化精灵</span>
<span class="token keyword">def</span> <span class="token function">init_sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 小鸟类</span>
    bird_position <span class="token operator">=</span> <span class="token punctuation">[</span>SCREEN_WIDTH <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>SCREEN_HEIGHT <span class="token operator">-</span> BIRD_HEIGHT<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">]</span>
    bird <span class="token operator">=</span> Bird<span class="token punctuation">(</span>bird_position<span class="token punctuation">)</span>
    <span class="token comment"># 管道类</span>
    pipe_sprites <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        pipe_pos <span class="token operator">=</span> Pipe<span class="token punctuation">.</span>generate_pipe_position<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 添加上方的管道</span>
        pipe_sprites<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
            Pipe<span class="token punctuation">(</span><span class="token punctuation">(</span>SCREEN_WIDTH <span class="token operator">+</span> i <span class="token operator">*</span> SCREEN_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
                  pipe_pos<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 添加下方的管道</span>
        pipe_sprites<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
            Pipe<span class="token punctuation">(</span><span class="token punctuation">(</span>SCREEN_WIDTH <span class="token operator">+</span> i <span class="token operator">*</span> SCREEN_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
                  pipe_pos<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'bottom'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> bird<span class="token punctuation">,</span> pipe_sprites
</code></pre> 
<p>7.定义小鸟和管道碰撞检测函数</p> 
<pre><code class="prism language-python">
<span class="token comment"># 精灵类碰撞检测和小鸟更新位置</span>
<span class="token keyword">def</span> <span class="token function">collision</span><span class="token punctuation">(</span>bird<span class="token punctuation">,</span> pipe_sprites<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 检测碰撞</span>
    is_collision <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token keyword">for</span> pipe <span class="token keyword">in</span> pipe_sprites<span class="token punctuation">:</span>
        <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>collide_rect<span class="token punctuation">(</span>bird<span class="token punctuation">,</span> pipe<span class="token punctuation">)</span><span class="token punctuation">:</span>
            is_collision <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token comment"># 更新小鸟</span>
    is_dead <span class="token operator">=</span> bird<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> is_dead<span class="token punctuation">:</span>
        is_collision <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token keyword">return</span> is_collision
</code></pre> 
<p>8.定义小鸟飞越管道函数，管道不断左移，实现小鸟往前飞效果。</p> 
<pre><code class="prism language-python">
<span class="token comment"># 移动pipe实现小鸟往前飞的效果</span>
<span class="token keyword">def</span> <span class="token function">move_pipe</span><span class="token punctuation">(</span>bird<span class="token punctuation">,</span> pipe_sprites<span class="token punctuation">,</span> is_add_pipe<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
    flag <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># 下一次是否要增加新的pipe的标志位</span>
    <span class="token keyword">for</span> pipe <span class="token keyword">in</span> pipe_sprites<span class="token punctuation">:</span>
        pipe<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left <span class="token operator">-=</span> <span class="token number">4</span>
        <span class="token comment"># 小鸟飞过pipe 加分</span>
        <span class="token keyword">if</span> pipe<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">&lt;</span> bird<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token keyword">and</span> <span class="token keyword">not</span> pipe<span class="token punctuation">.</span>used_for_score<span class="token punctuation">:</span>
            pipe<span class="token punctuation">.</span>used_for_score <span class="token operator">=</span> <span class="token boolean">True</span>
            score <span class="token operator">+=</span> <span class="token number">0.5</span>
        <span class="token comment"># 增加新的pipe</span>
        <span class="token keyword">if</span> pipe<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token keyword">and</span> pipe<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>left <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">and</span> is_add_pipe<span class="token punctuation">:</span>
            pipe_pos <span class="token operator">=</span> Pipe<span class="token punctuation">.</span>generate_pipe_position<span class="token punctuation">(</span><span class="token punctuation">)</span>
            pipe_sprites<span class="token punctuation">.</span>add<span class="token punctuation">(</span>Pipe<span class="token punctuation">(</span>position<span class="token operator">=</span>pipe_pos<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            pipe_sprites<span class="token punctuation">.</span>add<span class="token punctuation">(</span>Pipe<span class="token punctuation">(</span>position<span class="token operator">=</span>pipe_pos<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'bottom'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            is_add_pipe <span class="token operator">=</span> <span class="token boolean">False</span>
        <span class="token comment"># 删除已不在屏幕的pipe, 更新标志位</span>
        <span class="token keyword">elif</span> pipe<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            pipe_sprites<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>pipe<span class="token punctuation">)</span>
            flag <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token keyword">if</span> flag<span class="token punctuation">:</span>
        is_add_pipe <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token keyword">return</span> is_add_pipe<span class="token punctuation">,</span> score
</code></pre> 
<p>9.定义绘制分数函数</p> 
<pre><code class="prism language-python"><span class="token comment"># 画分数</span>
<span class="token keyword">def</span> <span class="token function">draw_score</span><span class="token punctuation">(</span>screen<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
    font_size <span class="token operator">=</span> <span class="token number">32</span>
    digits <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    offset <span class="token operator">=</span> <span class="token punctuation">(</span>SCREEN_WIDTH <span class="token operator">-</span> digits <span class="token operator">*</span> font_size<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    font <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>SysFont<span class="token punctuation">(</span><span class="token string">'Blod'</span><span class="token punctuation">,</span> font_size<span class="token punctuation">)</span>
    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>font<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>offset<span class="token punctuation">,</span> SCREEN_HEIGHT <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>10.定义绘制游戏结束函数</p> 
<pre><code class="prism language-python"><span class="token comment"># 画游戏结束</span>
<span class="token keyword">def</span> <span class="token function">draw_game_over</span><span class="token punctuation">(</span>screen<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    font_size <span class="token operator">=</span> <span class="token number">24</span>
    font <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>SysFont<span class="token punctuation">(</span><span class="token string">"simhei"</span><span class="token punctuation">,</span> font_size<span class="token punctuation">)</span><span class="token comment">#设置字体和字号</span>
    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>font<span class="token punctuation">.</span>render<span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> SCREEN_HEIGHT <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>11.定义监听键盘空格按下函数。按下空格键或者up键小鸟网上飞。</p> 
<pre><code class="prism language-python">
<span class="token comment"># 按键</span>
<span class="token keyword">def</span> <span class="token function">press</span><span class="token punctuation">(</span>is_game_running<span class="token punctuation">,</span> bird<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>  <span class="token comment"># 点击关闭按钮退出</span>
            pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>KEYDOWN<span class="token punctuation">:</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_SPACE <span class="token keyword">or</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_UP<span class="token punctuation">:</span>  <span class="token comment"># 空格键或者up键小鸟上升</span>
                <span class="token keyword">if</span> is_game_running<span class="token punctuation">:</span>
                    bird<span class="token punctuation">.</span>up<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token number">13</span> <span class="token keyword">and</span> <span class="token keyword">not</span> is_game_running<span class="token punctuation">:</span>  <span class="token comment"># 游戏结束时回车键继续</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre> 
<p>12.定义游戏的主控函数，设置游戏图标，实例化精灵对象，组织游戏流程。</p> 
<pre><code class="prism language-python">
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    img <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'./moneyge_icon.png'</span><span class="token punctuation">)</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_icon<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    screen <span class="token operator">=</span> init_game<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 初始化游戏</span>
    bird<span class="token punctuation">,</span> pipe_sprites <span class="token operator">=</span> init_sprite<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 初始化精灵</span>
    clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
    is_add_pipe <span class="token operator">=</span> <span class="token boolean">True</span>  <span class="token comment"># 是否需要增加管道</span>
    is_game_running <span class="token operator">=</span> <span class="token boolean">True</span>  <span class="token comment"># 是否在游戏中</span>
    score <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 初始分数</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        restart <span class="token operator">=</span> press<span class="token punctuation">(</span>is_game_running<span class="token punctuation">,</span> bird<span class="token punctuation">)</span>  <span class="token comment"># 按键</span>
        <span class="token keyword">if</span> restart<span class="token punctuation">:</span>
            <span class="token keyword">return</span>
        screen<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 填充背景</span>
        is_collision <span class="token operator">=</span> collision<span class="token punctuation">(</span>bird<span class="token punctuation">,</span> pipe_sprites<span class="token punctuation">)</span>  <span class="token comment"># 碰撞检测</span>
        <span class="token keyword">if</span> is_collision<span class="token punctuation">:</span>
            is_game_running <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># 如果碰撞 游戏结束</span>
        <span class="token keyword">if</span> is_game_running<span class="token punctuation">:</span>
            is_add_pipe<span class="token punctuation">,</span> score <span class="token operator">=</span> move_pipe<span class="token punctuation">(</span>bird<span class="token punctuation">,</span> pipe_sprites<span class="token punctuation">,</span> is_add_pipe<span class="token punctuation">,</span>
                                           score<span class="token punctuation">)</span>  <span class="token comment"># 不碰撞 移动管道</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            draw_game_over<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> <span class="token string">'请按回车继续游戏!'</span><span class="token punctuation">)</span>  <span class="token comment"># 游戏结束</span>
        bird<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>  <span class="token comment"># 画鸟</span>
        draw_score<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> score<span class="token punctuation">)</span>  <span class="token comment"># 画分数</span>
        <span class="token comment"># 画地面</span>
        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>screen<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> BASE_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">,</span>
                         <span class="token punctuation">(</span>SCREEN_WIDTH<span class="token punctuation">,</span> BASE_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 画管道</span>
        <span class="token keyword">for</span> pipe <span class="token keyword">in</span> pipe_sprites<span class="token punctuation">:</span>
            pipe<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>screen<span class="token punctuation">)</span>

        <span class="token comment"># 更新画布</span>
        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
        clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span>FPS<span class="token punctuation">)</span>
</code></pre> 
<p>13.主函数入口调用游戏的主控函数，启动游戏。</p> 
<pre><code class="prism language-python">
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>这样我们flybird小游戏就写好啦，大家可以自己研究一下试试看哦！</p> 
<p><strong>最后这里</strong>免费<strong>分享给大家一份Python学习资料，包含视频、源码。课件，希望能帮到那些不满现状，想提升自己却又没有方向的朋友，也可以和我一起来学习交流呀。<br> 编程资料、学习路线图、源代码、软件安装包等！</strong></p> 
<h3><a id="_307"></a>看下方图片哦（掉落）<strong>↓↓↓</strong></h3> 
<p>① <strong><code>Python所有方向的学习路线图</code></strong>，清楚各个方向要学什么东西<br> ② <strong><code>100多节Python课程视频</code></strong>，涵盖必备基础、爬虫和数据分析<br> ③ <strong><code>100多个Python实战案例</code></strong>，学习不再是只会理论<br> ④ <strong><code>华为出品独家Python漫画教程</code></strong>，手机也能学习<br> ⑤ <strong><code>历年互联网企业Python面试真题</code></strong>,复习时非常方便****</p> 
<p><img src="https://images2.imgbox.com/ad/4c/AYSjECxd_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c789b175f1514a3a807fd00bb53a8f32/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【osgEarth】在osgEarth中实现的一些模型效果：雷达波、通信链路、爆炸、尾焰、轨迹、文字标牌等</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ef184b14a2538f9d1fd562be84686ea3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Fast.ai</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>