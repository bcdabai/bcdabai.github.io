<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在win10和Linux上配置SSH免密登录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在win10和Linux上配置SSH免密登录" />
<meta property="og:description" content="服务器SSH免密登录 一、产生SSH公钥私钥对 NOTE: 1. 密钥对在一个机器上的一个用户中只需生成一次，以后不必再生成，可直接跳过此步骤执行公钥上传。
2. 公私钥删除或被覆盖会导致之前配置在远程服务器上的公钥失效，需要重新上传新的公钥。
1、在Linux (或macOS) 上产生SSH公私钥的方法 在本地终端执行命令 ssh-keygen
出现Enter file in which to save the key ，输入Enter保持默认路径若出现id_rsa already exists. Overwrite (y/n)? ，则说明已经生成过Key，可以输入no，直接跳过此步骤，也可以选择yes覆盖之前的Key，但这样做会使得公钥改变，之前配置过的公钥需要重新上传。出现Enter passphrase (empty for no passphrase) ，设置一个使用Key时的口令，若设置则每次使用Key登录依然要输入这个口令，可以不设置，直接输入Enter。出现Enter same passphrase again，依然直接输入Enter。Key生成结束，如下图：
到 /home/xx/.ssh/ 下查看密钥对是否生成。
2、在win10上产生SSH公私钥的方法 1)、检查windows 本地是否安装有ssh
检查方式：键入win&#43;r输入cmd，打开windows powershell，输入ssh命令。已安装则会显示ssh命令提示。
否则先在本地安装openssh 2)、在本地生成SSH密钥对（公钥和私钥），用于和远程服务器取得联系。
输入命令ssh-keygen (过程与Linux生成过程一样)
​ 在提供的默认文件路径下保存密钥文件即可（点回车即可），默认路径：C:\Users\用户名\ .ssh文件夹。 ​3)、进入该文件路径，可以看到该目录下已生成id-rsa（私钥）和id-rsa.pub（公钥）两个文件。
二、上传公钥到远程服务器 NOTE:上述方法产生公钥和私钥后，可以在任意一台服务器中使用该公私钥对，只需要将这里的公钥上传到不同的服务器即可。
ssh-copy-id 命令可以把本地主机的公钥复制到远程主机用户下的.ssh目录中的authorized_keys文件上，ssh-copy-id命令也会给远程主机的用户主目录（home）和~/.ssh, 和~/.ssh/authorized_keys设置合适的权限，无需其他配置。
1、在本地Linux (或macOS) 上使用 ssh-copy-id 的方式上传公钥 1)、确保远程服务器可连接。2)、输入命令：ssh-copy-id 用户名@IP -p 22，输入密码后即可将公钥上传到指定服务器的指定用户下。3)、再次使用ssh登录命令即可使用Key的方式免密登录到服务器中。4)、使用scp命令时要在scp后面加 -P 22(注意大写)。 2、在windows上使用 ssh-copy-id 的方式 1)、win10上无法直接使用ssh-copy-id命令，需要安装Linux子系统，安装方法见windows10安装linux子系统（WSL）。2)、安装成功并创建一个用户后输入命令：cd /mnt/c/Users/xx/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cef7b9ef391c99870b83667ac10add80/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-17T09:57:57+08:00" />
<meta property="article:modified_time" content="2021-09-17T09:57:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在win10和Linux上配置SSH免密登录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="SSH_0"></a>服务器SSH免密登录</h3> 
<h5><a id="SSH_1"></a>一、产生SSH公钥私钥对</h5> 
<p><strong>NOTE: 1. 密钥对在一个机器上的一个用户中只需生成一次，以后不必再生成，可直接跳过此步骤执行公钥上传。<br> 2. 公私钥删除或被覆盖会导致之前配置在远程服务器上的公钥失效，需要重新上传新的公钥。</strong></p> 
<h6><a id="1Linux_macOS_SSH_4"></a>1、在Linux (或macOS) 上产生SSH公私钥的方法</h6> 
<ul><li> <p>在<strong>本地终端</strong>执行命令 <strong>ssh-keygen</strong></p> 
  <ul><li>出现<em>Enter file in which to save the key</em> ，输入<strong>Enter</strong>保持默认路径</li><li>若出现<em>id_rsa already exists. Overwrite (y/n)?</em> ，则说明已经生成过Key，可以输入no，直接跳过此步骤，也可以选择yes覆盖之前的Key，但这样做会使得公钥改变，之前配置过的公钥需要重新上传。</li><li>出现<em>Enter passphrase (empty for no passphrase)</em> ，设置一个使用Key时的口令，若设置则每次使用Key登录依然要输入这个口令，可以不设置，直接输入<strong>Enter</strong>。</li><li>出现<em>Enter same passphrase again</em>，依然直接输入<strong>Enter</strong>。</li><li>Key生成结束，如下图：<br> <img src="https://images2.imgbox.com/90/67/t2DGHG6i_o.png" alt="请添加图片描述"></li></ul> </li><li> <p>到 <strong>/home/xx/.ssh/</strong> 下查看密钥对是否生成。</p> </li></ul> 
<h5><a id="2win10SSH_15"></a>2、在win10上产生SSH公私钥的方法</h5> 
<ul><li> <p>1)、检查windows <strong>本地是否安装有ssh</strong></p> 
  <ul><li>检查方式：键入<strong>win+r</strong>输入<strong>cmd</strong>，打开windows powershell，输入<strong>ssh</strong>命令。已安装则会显示ssh命令提示。<img src="https://images2.imgbox.com/2d/46/pghsPUxJ_o.png" alt="请添加图片描述"><br> 否则先在本地安装openssh</li></ul> </li><li> <p>2)、在本地生成SSH密钥对（公钥和私钥），用于和远程服务器取得联系。</p> 
  <ul><li>输入命令<strong>ssh-keygen</strong> (过程与Linux生成过程一样)<br> ​ 在提供的默认文件路径下保存密钥文件即可（点回车即可），默认路径：<strong>C:\Users\用户名\ .ssh</strong>文件夹。<img src="https://images2.imgbox.com/39/3d/9dZb5wzK_o.png" alt="请添加图片描述"></li></ul> </li><li> <p>​3)、进入该文件路径，可以看到该目录下已生成<strong>id-rsa</strong>（私钥）和<strong>id-rsa.pub</strong>（公钥）两个文件。<img src="https://images2.imgbox.com/db/f3/uGm2bkvS_o.png" alt="请添加图片描述"></p> </li></ul> 
<h5><a id="_27"></a>二、上传公钥到远程服务器</h5> 
<p><strong>NOTE:上述方法产生公钥和私钥后，可以在任意一台服务器中使用该公私钥对，只需要将这里的公钥上传到不同的服务器即可。</strong><br> <strong>ssh-copy-id</strong> 命令可以把本地主机的公钥复制到远程主机用户下的.ssh目录中的authorized_keys文件上，ssh-copy-id命令也会给远程主机的用户主目录（home）和~/.ssh, 和~/.ssh/authorized_keys设置合适的权限，无需其他配置。</p> 
<h6><a id="1Linux_macOS__sshcopyid__30"></a><strong>1、在本地Linux (或macOS) 上使用 ssh-copy-id 的方式上传公钥</strong></h6> 
<ul><li>1)、确保远程服务器可连接。</li><li>2)、输入命令：<strong>ssh-copy-id 用户名@IP -p 22</strong>，输入密码后即可将公钥上传到指定服务器的指定用户下。</li><li>3)、再次使用ssh登录命令即可使用Key的方式免密登录到服务器中。</li><li>4)、使用scp命令时要在scp后面加 <strong>-P 22</strong>(注意大写)。</li></ul> 
<h6><a id="2windows_sshcopyid__36"></a><strong>2、在windows上使用 ssh-copy-id 的方式</strong></h6> 
<ul><li>1)、win10上无法直接使用ssh-copy-id命令，需要安装Linux子系统，安装方法见<a href="https://blog.csdn.net/fangye945a/article/details/92801294">windows10安装linux子系统（WSL）</a>。</li><li>2)、安装成功并创建一个用户后输入命令：<strong>cd /mnt/c/Users/xx/.ssh</strong>，即生成公私钥对的目录下。</li><li>3)、确保远程服务器可连接后，在该终端下输入 <strong>ssh-copy-id -i id_rsa.pub 用户名@IP -p 22</strong>。</li><li>4)、再次使用ssh登录命令即可使用Key的方式免密登录到服务器中。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/620707edf826067004ae752674ca92f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">简要说明对称加密和非对称加密的原理以及区别是什么</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/761b10bbc2e41602fc8a6e3c016d60ce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Minio工具类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>