<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>时间旅行：Java 中的 Date 和 DateFormat，以及现代日期时间处理最佳实践 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="时间旅行：Java 中的 Date 和 DateFormat，以及现代日期时间处理最佳实践" />
<meta property="og:description" content="文章目录 引言一、Date 类1. Date 类概述1.1 日期和时间的表示1.2 Java 中的 Date 类1.3 Date 对象的创建1.4 日期和时间的时区问题 2. Date 对象操作2.1 获取当前日期和时间2.2 获取毫秒数2.3 比较日期2.4 日期的格式化和解析2.5 Date 的可变性和不可变性 3. Date 类的问题3.1 Date 类存在的问题3.2 时区问题的处理3.3 Date 类和多线程问题 4. 替代方案 - java.time 包4.1 为什么要使用 java.time4.2 LocalDateTime、LocalDate 和其他类4.3 与 Date 类的比较4.4 处理时区的新方法 二、DateFormat 类1. DateFormat 类概述1.1 日期和时间的格式化和解析1.2 Java 中的 DateFormat 类1.3 不同国家和地区的日期格式1.4 使用不同日期样式 2. SimpleDateFormat 类2.1 格式化日期和时间2.2 自定义日期格式2.3 解析日期和时间字符串2.4 SimpleDateFormat 的线程安全问题和解决方案 3. DateFormat 类的线程安全问题3.1 DateFormat 对象的线程安全性3.2 SimpleDateFormat 的线程安全问题3.3 使用 ThreadLocal 解决线程安全问题 4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2717dbe271c74c2ad1b80f29f212f80b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-04T22:44:54+08:00" />
<meta property="article:modified_time" content="2023-11-04T22:44:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">时间旅行：Java 中的 Date 和 DateFormat，以及现代日期时间处理最佳实践</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_2" rel="nofollow">引言</a></li><li><a href="#Date__13" rel="nofollow">一、Date 类</a></li><li><ul><li><a href="#1_Date__15" rel="nofollow">1. Date 类概述</a></li><li><ul><li><a href="#11__19" rel="nofollow">1.1 日期和时间的表示</a></li><li><a href="#12_Java__Date__28" rel="nofollow">1.2 Java 中的 Date 类</a></li><li><a href="#13_Date__32" rel="nofollow">1.3 Date 对象的创建</a></li><li><a href="#14__56" rel="nofollow">1.4 日期和时间的时区问题</a></li></ul> 
    </li><li><a href="#2_Date__102" rel="nofollow">2. Date 对象操作</a></li><li><ul><li><a href="#21__104" rel="nofollow">2.1 获取当前日期和时间</a></li><li><a href="#22__114" rel="nofollow">2.2 获取毫秒数</a></li><li><a href="#23__131" rel="nofollow">2.3 比较日期</a></li><li><a href="#24__162" rel="nofollow">2.4 日期的格式化和解析</a></li><li><a href="#25_Date__203" rel="nofollow">2.5 Date 的可变性和不可变性</a></li></ul> 
    </li><li><a href="#3_Date__225" rel="nofollow">3. Date 类的问题</a></li><li><ul><li><a href="#31_Date__227" rel="nofollow">3.1 Date 类存在的问题</a></li><li><a href="#32__239" rel="nofollow">3.2 时区问题的处理</a></li><li><a href="#33_Date__266" rel="nofollow">3.3 Date 类和多线程问题</a></li></ul> 
    </li><li><a href="#4___javatime__280" rel="nofollow">4. 替代方案 - java.time 包</a></li><li><ul><li><a href="#41__javatime_282" rel="nofollow">4.1 为什么要使用 java.time</a></li><li><a href="#42_LocalDateTimeLocalDate__294" rel="nofollow">4.2 LocalDateTime、LocalDate 和其他类</a></li><li><a href="#43__Date__317" rel="nofollow">4.3 与 Date 类的比较</a></li><li><a href="#44__330" rel="nofollow">4.4 处理时区的新方法</a></li></ul> 
   </li></ul> 
   </li><li><a href="#DateFormat__360" rel="nofollow">二、DateFormat 类</a></li><li><ul><li><a href="#1_DateFormat__362" rel="nofollow">1. DateFormat 类概述</a></li><li><ul><li><a href="#11__366" rel="nofollow">1.1 日期和时间的格式化和解析</a></li><li><a href="#12_Java__DateFormat__374" rel="nofollow">1.2 Java 中的 DateFormat 类</a></li><li><a href="#13__378" rel="nofollow">1.3 不同国家和地区的日期格式</a></li><li><a href="#14__401" rel="nofollow">1.4 使用不同日期样式</a></li></ul> 
    </li><li><a href="#2_SimpleDateFormat__427" rel="nofollow">2. SimpleDateFormat 类</a></li><li><ul><li><a href="#21__431" rel="nofollow">2.1 格式化日期和时间</a></li><li><a href="#22__449" rel="nofollow">2.2 自定义日期格式</a></li><li><a href="#23__473" rel="nofollow">2.3 解析日期和时间字符串</a></li><li><a href="#24_SimpleDateFormat__495" rel="nofollow">2.4 SimpleDateFormat 的线程安全问题和解决方案</a></li></ul> 
    </li><li><a href="#3_DateFormat__516" rel="nofollow">3. DateFormat 类的线程安全问题</a></li><li><ul><li><a href="#31_DateFormat__518" rel="nofollow">3.1 DateFormat 对象的线程安全性</a></li><li><a href="#32_SimpleDateFormat__522" rel="nofollow">3.2 SimpleDateFormat 的线程安全问题</a></li><li><a href="#33__ThreadLocal__642" rel="nofollow">3.3 使用 ThreadLocal 解决线程安全问题</a></li></ul> 
    </li><li><a href="#4__678" rel="nofollow">4. 本地化和国际化</a></li><li><ul><li><a href="#41__680" rel="nofollow">4.1 日期格式的本地化</a></li><li><a href="#42_DateFormat__684" rel="nofollow">4.2 DateFormat 对不同语言的支持</a></li><li><a href="#43__ResourceBundle__719" rel="nofollow">4.3 使用 ResourceBundle 进行国际化</a></li><li><a href="#44__794" rel="nofollow">4.4 示例：日期格式的本地化</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_832" rel="nofollow">三、最佳实践</a></li><li><ul><li><ul><li><a href="#1__834" rel="nofollow">1. 处理日期范围和区间</a></li><li><a href="#2__855" rel="nofollow">2. 理解时区的重要性</a></li></ul> 
    </li><li><a href="#2__877" rel="nofollow">2. 时间戳和时区信息</a></li><li><ul><li><a href="#21__879" rel="nofollow">2.1 使用时间戳表示日期和时间</a></li><li><a href="#22__923" rel="nofollow">2.2 存储和检索时区信息</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_974" rel="nofollow">四、实际应用</a></li><li><ul><li><a href="#___976" rel="nofollow">示例应用 - 日程管理系统（概念版）</a></li><li><a href="#_1452" rel="nofollow">演示</a></li></ul> 
   </li><li><a href="#_1477" rel="nofollow">最后的小牢骚</a></li><li><a href="#_1493" rel="nofollow">求点赞👍求关注❤️求转发💕</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_2"></a>引言</h3> 
<blockquote> 
 <p>时间，无疑是宇宙最神秘的艺术之一。在软件开发的世界中，时间是一种珍贵的资源，它如同沙漏中的细沙，不停地从我们手中溜走。当我们构建应用程序时，时间扮演着重要的角色，它贯穿于事件的发生、数据的记录， 甚至用户界面的呈现。</p> 
</blockquote> 
<blockquote> 
 <p>为了与时间打交道，Java 提供了 <code>Date</code> 和 <code>DateFormat</code> 这两个关键工具。<code>Date</code> 类是我们的时间捕手，它能够获取当前日期和时间，甚至允许我们进行日期比较和格式化。而 <code>DateFormat</code> 则是时间的翻译官，它负责将日期时间转换为人类可读的字符串，并允许我们解析用户输入的日期。</p> 
</blockquote> 
<blockquote> 
 <p>然而，尽管它们是强大的工具，但它们也带来了许多陷阱和挑战。如何处理时区问题？如何在多线程环境中安全使用它们？如何实现国际化的日期时间格式？这就是我们将要探索的内容。</p> 
</blockquote> 
<blockquote> 
 <p>在这个时间之旅中，我们将不仅仅了解这两个类的使用方法，还将深入探讨它们的局限性，以及如何使用 Java 8 引入的 <code>java.time</code> 包来优雅地处理日期和时间。同时，我们还会揭示时间背后的一些最佳实践，包括如何处理日期范围和区间，以及时区的重要性。</p> 
</blockquote> 
<blockquote> 
 <p>让我们一起踏上这段有趣而富有挑战的时间之旅，探索时间的奥秘，解锁时间的力量，为我们的应用程序注入更多时间的价值。</p> 
</blockquote> 
<h3><a id="Date__13"></a>一、Date 类</h3> 
<h4><a id="1_Date__15"></a>1. Date 类概述</h4> 
<p><strong>Date</strong> 类用于在Java中表示日期和时间。它是Java标准库中用于处理日期和时间的基本类之一。</p> 
<h5><a id="11__19"></a>1.1 日期和时间的表示</h5> 
<p>日期和时间的表示通常涉及以下几个方面：</p> 
<ul><li><strong>日期</strong>：表示年、月、日，如 “2023-10-29” 表示2023年10月29日。</li><li><strong>时间</strong>：表示时、分、秒，如 “15:30:00” 表示下午3点30分。</li><li><strong>日期时间</strong>：同时包括日期和时间信息，如 “2023-10-29 15:30:00” 表示2023年10月29日下午3点30分。</li><li><strong>时区</strong>：由于不同地区使用不同的时区，同一时刻在不同时区可能对应不同的实际时间。</li></ul> 
<h5><a id="12_Java__Date__28"></a>1.2 Java 中的 Date 类</h5> 
<p><strong>Date</strong> 类是Java标准库中用于表示日期和时间的类，它包含了一个长整型数，表示自1970年1月07:30:00(以SGT即新加坡标准时区为准)以来的毫秒数。这个长整型数被称为"Unix时间"或"时间戳"。</p> 
<h5><a id="13_Date__32"></a>1.3 Date 对象的创建</h5> 
<p>可以通过以下方式创建 <strong>Date</strong> 对象：</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 获取当前时间的时间戳</span>
<span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出当前日期和时间</span>

<span class="token comment">// 创建特定日期时间的 Date 对象</span>
<span class="token keyword">long</span> timestamp <span class="token operator">=</span> <span class="token number">1603960800000L</span><span class="token punctuation">;</span> <span class="token comment">// 2020-10-29 16:40:00的时间戳</span>
<span class="token class-name">Date</span> specificDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>specificDate<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出指定日期和时间</span>
</code></pre> 
<p>运行结果如下</p> 
<pre><code class="prism language-bash">Sat Nov 04 09:57:48 SGT <span class="token number">2023</span>
Thu Jan 01 07:30:00 SGT <span class="token number">1970</span>
</code></pre> 
<p><code>Sat Nov 04 09:57:48 SGT 2023</code>即"星期六 11月 4号 9点57分48秒 新加坡标准时间 2023年"<br> 中国话叫：2023年11月4号上午9点57分48秒，星期六。</p> 
<h5><a id="14__56"></a>1.4 日期和时间的时区问题</h5> 
<p>日期和时间的时区问题在全球化的背景下变得尤为重要。不同国家和地区使用不同的时区，而且一些地区还可能会在夏季采用夏令时。这使得处理日期和时间变得相当复杂。</p> 
<p>在 Java 中，<code>Date</code> 类包含日期和时间信息以及默认的时区信息。这意味着 <code>Date</code> 对象会随着默认时区的更改而调整其内部时间表示，<code>Date</code> 类只会输出默认时区的时间。但也可以结合<code>TimeZone</code>类进行更精确的时区控制。</p> 
<p>下面我们来看一个示例，展示了如何在不同的时区中处理日期和时间：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TimeZone</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeZoneExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建一个日期对象，表示特定的日期和时间</span>
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 保存当前系统的默认时区</span>
        <span class="token class-name">TimeZone</span> defaultTimeZone <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 指定目标时区</span>
        <span class="token class-name">TimeZone</span> timeZone <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"GMT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">setDefault</span><span class="token punctuation">(</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 输出 GMT 时间</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"GMT 时间: "</span> <span class="token operator">+</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 指定目标时区</span>
        timeZone<span class="token operator">=</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"America/New_York"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">setDefault</span><span class="token punctuation">(</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 输出 纽约 时间</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在纽约的时间: "</span> <span class="token operator">+</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 恢复原来的默认时区</span>
        <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">setDefault</span><span class="token punctuation">(</span>defaultTimeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">GMT 时间: Sat Nov 04 02:15:59 GMT <span class="token number">2023</span>
在纽约的时间: Fri Nov 03 <span class="token number">22</span>:15:59 EDT <span class="token number">2023</span>
</code></pre> 
<h4><a id="2_Date__102"></a>2. Date 对象操作</h4> 
<h5><a id="21__104"></a>2.1 获取当前日期和时间</h5> 
<p>要获取当前日期和时间，可以使用 <strong>Date</strong> 类的无参构造函数，它会创建一个表示当前日期和时间的 <strong>Date</strong> 对象。示例如下：</p> 
<pre><code class="prism language-java"><span class="token comment">// 获取当前日期和时间</span>
<span class="token class-name">Date</span> currentDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>currentDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="22__114"></a>2.2 获取毫秒数</h5> 
<p><strong>Date</strong> 对象内部保存了自1970年1月07:30:00 (以SGT即新加坡标准时区为准) 以来的毫秒数。</p> 
<p>我们可以使用 <strong>getTime()</strong> 方法来获取这个毫秒数。</p> 
<pre><code class="prism language-java"><span class="token comment">// 获取 Date 对象的毫秒数</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> timestamp <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Unix时间戳: "</span> <span class="token operator">+</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行时间及结果：<br> 2023/11/04 10:40<br> <code>Unix时间戳 : 1699065624934</code></p> 
<h5><a id="23__131"></a>2.3 比较日期</h5> 
<p>可以使用 <strong>Date</strong> 对象的方法来比较日期，如比较两个日期是否相等、日期的先后顺序等。</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 创建两个 Date 对象</span>
<span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 即当前时间: 2023-11-04 10:45:00</span>
<span class="token class-name">Date</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1603960800000L</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2020-10-29 16:40:00</span>

<span class="token comment">// 比较两个日期是否相等</span>
<span class="token keyword">boolean</span> isEqual <span class="token operator">=</span> date1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期1和日期2是否相等: "</span> <span class="token operator">+</span> isEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 比较两个日期的先后顺序</span>
<span class="token keyword">int</span> comparison <span class="token operator">=</span> date1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>comparison <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期1在日期2之前"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>comparison <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期1在日期2之后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期1和日期2相等"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code>日期1和日期2是否相等: false
日期1在日期2之后
</code></pre> 
<h5><a id="24__162"></a>2.4 日期的格式化和解析</h5> 
<p>为了将 <strong>Date</strong> 对象以人类可读的方式显示，或者将人类输入的日期字符串解析为 <strong>Date</strong> 对象，通常需要进行日期的格式化和解析。</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">ParseException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 SimpleDateFormat 对象用于日期格式化和解析</span>
<span class="token class-name">SimpleDateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 日期格式化为字符串</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> formattedDate <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"格式化后的日期: "</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 字符串解析为日期</span>
<span class="token class-name">String</span> dateString <span class="token operator">=</span> <span class="token string">"2023-10-29 15:30:00"</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Date</span> parsedDate <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"解析后的日期: "</span> <span class="token operator">+</span> parsedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期解析失败："</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下：</p> 
<pre><code class="prism language-bash">格式化后的日期: <span class="token number">2023</span>-11-04 <span class="token number">10</span>:48:31
解析后的日期: Sun Oct <span class="token number">29</span> <span class="token number">15</span>:30:00 SGT <span class="token number">2023</span>
</code></pre> 
 
<h5><a id="25_Date__203"></a>2.5 Date 的可变性和不可变性</h5> 
<p><strong>Date</strong> 类是可变的，这意味着可以通过 <strong>set</strong> 方法修改 <strong>Date</strong> 对象的值。这可能会导致线程安全性问题，因此在多线程环境中使用时需要格外小心。</p> 
<pre><code class="prism language-java"><span class="token comment">// Date 对象的可变性示例</span>
<span class="token class-name">Date</span> mutableDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"可变日期："</span> <span class="token operator">+</span> mutableDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改 Date 对象的值</span>
mutableDate<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token number">1603960800000L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"修改后的日期："</span> <span class="token operator">+</span> mutableDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">可变日期：Sat Nov 04 <span class="token number">11</span>:07:58 SGT <span class="token number">2023</span>
修改后的日期：Thu Oct <span class="token number">29</span> <span class="token number">16</span>:40:00 SGT <span class="token number">2020</span>
</code></pre> 
<p>在实际应用中，为了避免线程安全问题，推荐使用不可变的日期和时间处理类，如 Java 8 中的 <strong>LocalDate</strong>、<strong>LocalTime</strong> 和 <strong>LocalDateTime</strong> 等。</p> 
<h4><a id="3_Date__225"></a>3. Date 类的问题</h4> 
<h5><a id="31_Date__227"></a>3.1 Date 类存在的问题</h5> 
<p>传统的 <strong>Date</strong> 类存在一些问题，这些问题主要包括：</p> 
<ul><li> <p><strong>可变性</strong>: <strong>Date</strong> 类是可变的，这意味着一旦创建，其值可以随时修改。这会导致潜在的线程安全问题和不可预测的行为。</p> </li><li> <p><strong>精度问题</strong>: <strong>Date</strong> 类只能精确到毫秒级，不能表示更小的时间单位，例如纳秒。</p> </li><li> <p><strong>时区问题</strong>: <strong>Date</strong> 类在处理时区时不够灵活，通常需要通过手动设置时区来进行处理，容易出错。</p> </li><li> <p><strong>命名问题</strong>: <strong>Date</strong> 类中的一些方法的命名不够清晰，容易引起歧义。</p> </li></ul> 
<h5><a id="32__239"></a>3.2 时区问题的处理</h5> 
<p><strong>Date</strong> 类在处理时区问题时存在困难。为了解决这个问题，可以使用 <strong>java.time</strong> 包中的新类，如 <strong>ZonedDateTime</strong> 和 <strong>ZoneId</strong>。这些类提供了更灵活的时区支持，能够轻松处理不同时区的日期和时间。</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 使用 ZonedDateTime 处理时区问题</span>
<span class="token class-name">ZonedDateTime</span> dateTimeInNewYork <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"America/New_York"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> dateTimeInTokyo <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Tokyo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 比较两个不同时区的日期和时间</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>dateTimeInNewYork<span class="token punctuation">.</span><span class="token function">isEqual</span><span class="token punctuation">(</span>dateTimeInTokyo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"纽约和东京的时间相同。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"纽约和东京的时间不同。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateTimeInNewYork<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateTimeInTokyo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">纽约和东京的时间不同。
<span class="token number">2023</span>-11-03T23:08:53.777344300-04:00<span class="token punctuation">[</span>America/New_York<span class="token punctuation">]</span>
<span class="token number">2023</span>-11-04T12:08:53.783692300+09:00<span class="token punctuation">[</span>Asia/Tokyo<span class="token punctuation">]</span>
</code></pre> 
<h5><a id="33_Date__266"></a>3.3 Date 类和多线程问题</h5> 
<p>由于 <strong>Date</strong> 类的可变性，它在多线程环境下容易引发线程安全问题。多个线程同时访问和修改同一个 <strong>Date</strong> 对象可能导致不一致的结果。为了解决这个问题，可以使用 <strong>java.time</strong> 包中的不可变类，如 <strong>LocalDateTime</strong>、<strong>LocalDate</strong> 和 <strong>LocalTime</strong>，它们在多线程环境下更安全。</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 使用 LocalDateTime 类，它是不可变的</span>
    
<span class="token class-name">LocalDateTime</span> currentDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在多线程环境下更安全</span>
</code></pre> 
<h4><a id="4___javatime__280"></a>4. 替代方案 - java.time 包</h4> 
<h5><a id="41__javatime_282"></a>4.1 为什么要使用 java.time</h5> 
<p>在 Java 8 中引入了 <strong>java.time</strong> 包，它提供了更加强大和灵活的日期和时间处理功能，相比于传统的 <strong>Date</strong> 类，它具有以下优势：</p> 
<ul><li> <p><strong>不可变性</strong>: <strong>java.time</strong> 包中的大多数类都是不可变的，这意味着一旦创建，它们的值不能被修改，这有助于避免意外的修改和副作用。</p> </li><li> <p><strong>丰富的方法</strong>: <strong>java.time</strong> 包提供了丰富的方法来处理日期和时间，包括日期的创建、计算、格式化、解析等。这些方法使得日期和时间操作更加方便。</p> </li><li> <p><strong>清晰的命名</strong>: <strong>java.time</strong> 包中的类和方法都有清晰的命名，使得代码更易理解和维护。</p> </li><li> <p><strong>处理时区</strong>: <strong>java.time</strong> 包提供了更好的时区支持，可以轻松处理不同时区的日期和时间。</p> </li></ul> 
<h5><a id="42_LocalDateTimeLocalDate__294"></a>4.2 LocalDateTime、LocalDate 和其他类</h5> 
<p><strong>java.time</strong> 包中引入了一系列新的日期和时间类，包括：</p> 
<ul><li><strong>LocalDateTime</strong>: 表示日期和时间，不包含时区信息。</li><li><strong>LocalDate</strong>: 表示日期，不包含时分秒。</li><li><strong>LocalTime</strong>: 表示时间，不包含日期。</li><li><strong>ZonedDateTime</strong>: 表示带时区的日期和时间。</li><li><strong>ZoneId</strong>: 表示时区。</li></ul> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 创建 LocalDateTime 对象表示当前日期和时间</span>
<span class="token class-name">LocalDateTime</span> currentDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建 LocalDate 对象表示当前日期</span>
<span class="token class-name">LocalDate</span> currentDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建 LocalTime 对象表示当前时间</span>
<span class="token class-name">LocalTime</span> currentTime <span class="token operator">=</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="43__Date__317"></a>4.3 与 Date 类的比较</h5> 
<p>与 <strong>Date</strong> 类相比，<strong>java.time</strong> 包中的类更容易使用和理解。例如，要比较两个日期是否相等，使用 <strong>LocalDate</strong> 类的 <strong>isEqual</strong> 方法更加清晰和安全：</p> 
<pre><code class="prism language-java"><span class="token class-name">LocalDate</span> date1 <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">LocalDate</span> date2 <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">isEqual</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期相等"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="44__330"></a>4.4 处理时区的新方法</h5> 
<p><strong>java.time</strong> 包中的 <strong>ZonedDateTime</strong> 类允许处理带时区的日期和时间。它可以表示不同时区的日期和时间，并提供了时区的支持。通过 <strong>ZoneId</strong> 类，可以获取系统支持的时区列表。</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 创建一个带有时区信息的 ZonedDateTime 对象，表示当前美国纽约的时间</span>
<span class="token class-name">ZonedDateTime</span> zonedDateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"America/New_York"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前纽约时间: "</span> <span class="token operator">+</span> zonedDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取系统支持的所有时区标识符</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> availableZoneIds <span class="token operator">=</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">getAvailableZoneIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 遍历所有时区标识符并打印出来</span>
availableZoneIds<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">当前纽约时间: <span class="token number">2023</span>-11-03T23:24:25.782088800-04:00<span class="token punctuation">[</span>America/New_York<span class="token punctuation">]</span>
Asia/Aden
America/Cuiaba
Etc/GMT+9
Etc/GMT+8
<span class="token punctuation">..</span>.（略）
</code></pre> 
<p><strong>java.time</strong> 包提供了更多的功能和方法，用于日期和时间的操作和计算。它是处理日期和时间的首选替代方案，特别适用于需要处理多时区、复杂日期计算和格式化的应用。</p> 
<h3><a id="DateFormat__360"></a>二、DateFormat 类</h3> 
<h4><a id="1_DateFormat__362"></a>1. DateFormat 类概述</h4> 
<p><strong>DateFormat</strong> 类是 Java 中用于日期和时间的格式化和解析的类。它允许将日期和时间格式化为字符串，也可以将字符串解析为日期和时间。以下是关于 <strong>DateFormat</strong> 类的一些概述：</p> 
<h5><a id="11__366"></a>1.1 日期和时间的格式化和解析</h5> 
<p><strong>DateFormat</strong> 类主要用于以下两个任务：</p> 
<ul><li> <p><strong>格式化</strong>：将日期和时间对象格式化为字符串，以便进行显示或存储。这将日期和时间表示为可读高的字符串。</p> </li><li> <p><strong>解析</strong>：即<strong>格式化</strong>的逆过程。将日期和时间的字符串表示解析为日期和时间对象。这用于从用户输入或外部数据源中还原日期和时间。</p> </li></ul> 
<h5><a id="12_Java__DateFormat__374"></a>1.2 Java 中的 DateFormat 类</h5> 
<p>在 Java 中，<strong>DateFormat</strong> 类是一个抽象类，它有多个实现类，如 <strong>SimpleDateFormat</strong>。这些实现类提供了不同的日期和时间格式化和解析功能，以满足各种需求。</p> 
<h5><a id="13__378"></a>1.3 不同国家和地区的日期格式</h5> 
<p><strong>DateFormat</strong> 类支持不同国家和地区的日期和时间格式。它可以根据特定的 <strong>Locale</strong>（语言和地区）来格式化和解析日期。这意味着相同的日期和时间可以以不同的格式显示，根据不同的地区和语言习惯。</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 创建一个 DateFormat 对象，使用美国地区的日期格式</span>
<span class="token class-name">DateFormat</span> dfUS <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">SHORT</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">US</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> formattedDate <span class="token operator">=</span> dfUS<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"美国日期格式："</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 DateFormat 对象，使用法国地区的日期格式</span>
<span class="token class-name">DateFormat</span> dfFR <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">SHORT</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">FRANCE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> formattedDateFR <span class="token operator">=</span> dfFR<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"法国日期格式："</span> <span class="token operator">+</span> formattedDateFR<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">美国日期格式：11/4/23
法国日期格式：04/11/2023
</code></pre> 
<h5><a id="14__401"></a>1.4 使用不同日期样式</h5> 
<p><strong>DateFormat</strong> 类提供了不同的日期和时间样式，包括 <strong>SHORT</strong>、<strong>MEDIUM</strong>、<strong>LONG</strong> 和 <strong>FULL</strong>。每种样式代表了不同的日期和时间格式。通过选择不同的样式，可以获得不同粒度的日期和时间信息。</p> 
<p><strong>示例</strong>：</p> 
<pre><code class="prism language-java"><span class="token comment">// 使用 MEDIUM 样式格式化日期和时间</span>
<span class="token class-name">DateFormat</span> dfMedium <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateTimeInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">MEDIUM</span><span class="token punctuation">,</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">MEDIUM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MEDIUM 样式："</span> <span class="token operator">+</span> dfMedium<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 FULL 样式格式化日期和时间</span>
<span class="token class-name">DateFormat</span> dfFull <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateTimeInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">FULL</span><span class="token punctuation">,</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">FULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"FULL 样式："</span> <span class="token operator">+</span> dfFull<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 Long 样式格式化日期和时间</span>
<span class="token class-name">DateFormat</span> dfLong <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateTimeInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">LONG</span><span class="token punctuation">,</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">LONG</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Long 样式："</span> <span class="token operator">+</span> dfLong<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下：</p> 
<pre><code class="prism language-bash">MEDIUM 样式：2023年11月4日 下午2:42:43
FULL 样式：2023年11月4日星期六 新加坡标准时间 下午2:42:43
Long 样式：2023年11月4日 SGT 下午2:51:30
</code></pre> 
<h4><a id="2_SimpleDateFormat__427"></a>2. SimpleDateFormat 类</h4> 
<p><strong>SimpleDateFormat</strong> 类是 Java 中用于日期和时间的格式化和解析的主要类。它是 <strong>DateFormat</strong> 类的一个具体实现，提供了更灵活的日期和时间格式化和解析功能。以下是关于 <strong>SimpleDateFormat</strong> 类的一些重要内容：</p> 
<h5><a id="21__431"></a>2.1 格式化日期和时间</h5> 
<p><strong>SimpleDateFormat</strong> 主要用于将日期和时间对象格式化为字符串。它允许我们根据模式字符串定义日期和时间的显示格式。以下是一个简单的示例：</p> 
<pre><code class="prism language-java"><span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> formattedDate <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"格式化后的日期："</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下：</p> 
<pre><code class="prism language-bash">格式化后的日期：2023-11-04 <span class="token number">14</span>:54:18
</code></pre> 
<p>上述代码中，我们创建了一个 <strong>SimpleDateFormat</strong> 对象，使用模式字符串 “yyyy-MM-dd HH:mm:ss” 来指定日期和时间的格式。然后，我们将当前日期和时间对象格式化为指定格式的字符串。</p> 
<h5><a id="22__449"></a>2.2 自定义日期格式</h5> 
<p><strong>SimpleDateFormat</strong> 允许我们根据需要自定义日期格式。模式字符串中包含不同的字符，它们代表日期和时间的不同部分。以下是一些常用的模式字符：</p> 
<ul><li>“yyyy”：四位年份</li><li>“MM”：月份</li><li>“dd”：日期</li><li>“HH”：小时（24 小时制）</li><li>“mm”：分钟</li><li>“ss”：秒</li></ul> 
<p>通过组合这些模式字符，可以创建自定义日期格式。例如：</p> 
<pre><code class="prism language-java"><span class="token class-name">SimpleDateFormat</span> customSdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"dd/MM/yyyy HH:mm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> customFormattedDate <span class="token operator">=</span> customSdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义格式的日期："</span> <span class="token operator">+</span> customFormattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">自定义格式的日期：04/11/2023 <span class="token number">14</span>:57
</code></pre> 
<h5><a id="23__473"></a>2.3 解析日期和时间字符串</h5> 
<p><strong>SimpleDateFormat</strong> 也可以用于将日期和时间的字符串表示解析为日期和时间对象。我们需要使用相同格式的模式字符串来告诉 <strong>SimpleDateFormat</strong> 如何解析字符串。以下是一个解析的示例：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateString <span class="token operator">=</span> <span class="token string">"2023-10-30 15:30:00"</span><span class="token punctuation">;</span>
<span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Date</span> parsedDate <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"解析后的日期："</span> <span class="token operator">+</span> parsedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">解析后的日期：Mon Oct <span class="token number">30</span> <span class="token number">15</span>:30:00 SGT <span class="token number">2023</span>
</code></pre> 
<p>上述代码中，我们创建了一个 <strong>SimpleDateFormat</strong> 对象，使用相同的模式字符串 “yyyy-MM-dd HH:mm:ss” 来指导解析。然后，我们尝试将日期和时间的字符串表示解析为日期对象。</p> 
<h5><a id="24_SimpleDateFormat__495"></a>2.4 SimpleDateFormat 的线程安全问题和解决方案</h5> 
<p><strong>SimpleDateFormat</strong> 不是线程安全的类。如果多个线程同时访问同一个 <strong>SimpleDateFormat</strong> 实例，可能会导致解析和格式化错误。为了解决这个问题，可以采取以下两种方法之一：</p> 
<ol><li> <p>使用线程局部变量（<strong>ThreadLocal</strong>）：每个线程都有自己的 <strong>SimpleDateFormat</strong> 实例，避免多线程竞争。</p> </li><li> <p>使用 <strong>java.time.format.DateTimeFormatter</strong>：<strong>java.time</strong> 包提供的日期时间 API 是线程安全的，可以考虑迁移到新的 API。</p> </li></ol> 
<pre><code class="prism language-java"><span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">&gt;</span></span> threadLocalSdf <span class="token operator">=</span> <span class="token class-name">ThreadLocal</span><span class="token punctuation">.</span><span class="token function">withInitial</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> threadLocalSdf<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>或者，使用 <strong>java.time.format.DateTimeFormatter</strong>：</p> 
<pre><code class="prism language-java"><span class="token class-name">DateTimeFormatter</span> dtf <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> formattedDate <span class="token operator">=</span> dtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="3_DateFormat__516"></a>3. DateFormat 类的线程安全问题</h4> 
<h5><a id="31_DateFormat__518"></a>3.1 DateFormat 对象的线程安全性</h5> 
<p><strong>DateFormat</strong> 类的对象在多线程环境中不是线程安全的。这是因为 <strong>DateFormat</strong> 类的实例包含了内部状态，用于格式化和解析日期和时间。多个线程同时访问同一个 <strong>DateFormat</strong> 对象可能导致竞争条件和不确定的结果。</p> 
<h5><a id="32_SimpleDateFormat__522"></a>3.2 SimpleDateFormat 的线程安全问题</h5> 
<p><strong>SimpleDateFormat</strong> 是 <strong>DateFormat</strong> 类的一个具体实现，它继承了 <strong>DateFormat</strong> 的线程不安全性。具体来说，多个线程同时访问同一个 <strong>SimpleDateFormat</strong> 实例进行格式化或解析操作可能导致混乱或错误的结果。</p> 
<p>以下是一个简单的示例，展示了 <strong>SimpleDateFormat</strong> 的线程安全问题：</p> 
<pre><code class="prism language-java"><span class="token comment">// 3.2 </span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>atomic<span class="token punctuation">.</span></span><span class="token class-name">AtomicBoolean</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DateFormatThreadSafetyExample</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">AtomicBoolean</span> <span class="token constant">STOP</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个原子布尔值，用于控制线程停止</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">SimpleDateFormat</span> <span class="token constant">FORMATTER</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-M-d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个日期格式化对象，格式为"yyyy-M-d"</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Runnable</span> runnable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 创建一个Runnable对象，用于执行线程任务</span>
            <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 初始化计数器</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">STOP</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 当STOP值为false时，循环执行以下操作</span>
                <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token constant">FORMATTER</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2023-11-3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 尝试解析日期字符串"2023-11-3"</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 如果解析失败，捕获异常</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印异常堆栈信息</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>count <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 如果计数器大于3，将STOP值设为true，停止线程</span>
                        <span class="token constant">STOP</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建并启动一个新线程，执行runnable任务</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建并启动另一个新线程，执行runnable任务</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">java.lang.NumberFormatException: multiple points
        at java.base/jdk.internal.math.FloatingDecimal.readJavaFormatString<span class="token punctuation">(</span>FloatingDecimal.java:1890<span class="token punctuation">)</span>
        at java.base/jdk.internal.math.FloatingDecimal.parseDouble<span class="token punctuation">(</span>FloatingDecimal.java:110<span class="token punctuation">)</span>
        at java.base/java.lang.Double.parseDouble<span class="token punctuation">(</span>Double.java:651<span class="token punctuation">)</span>
        at java.base/java.text.DigitList.getDouble<span class="token punctuation">(</span>DigitList.java:169<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2202<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:2244<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
java.lang.NumberFormatException: multiple points
        at java.base/jdk.internal.math.FloatingDecimal.readJavaFormatString<span class="token punctuation">(</span>FloatingDecimal.java:1890<span class="token punctuation">)</span>
        at java.base/jdk.internal.math.FloatingDecimal.parseDouble<span class="token punctuation">(</span>FloatingDecimal.java:110<span class="token punctuation">)</span>
        at java.base/java.lang.Double.parseDouble<span class="token punctuation">(</span>Double.java:651<span class="token punctuation">)</span>
        at java.base/java.text.DigitList.getDouble<span class="token punctuation">(</span>DigitList.java:169<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2202<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:1937<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
java.lang.NumberFormatException: For input string: <span class="token string">""</span>
        at java.base/java.lang.NumberFormatException.forInputString<span class="token punctuation">(</span>NumberFormatException.java:67<span class="token punctuation">)</span>
        at java.base/java.lang.Long.parseLong<span class="token punctuation">(</span>Long.java:721<span class="token punctuation">)</span>
        at java.base/java.lang.Long.parseLong<span class="token punctuation">(</span>Long.java:836<span class="token punctuation">)</span>
        at java.base/java.text.DigitList.getLong<span class="token punctuation">(</span>DigitList.java:195<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2197<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:1937<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
java.lang.NumberFormatException: For input string: <span class="token string">"E71"</span>
        at java.base/jdk.internal.math.FloatingDecimal.readJavaFormatString<span class="token punctuation">(</span>FloatingDecimal.java:2054<span class="token punctuation">)</span>
        at java.base/jdk.internal.math.FloatingDecimal.parseDouble<span class="token punctuation">(</span>FloatingDecimal.java:110<span class="token punctuation">)</span>
        at java.base/java.lang.Double.parseDouble<span class="token punctuation">(</span>Double.java:651<span class="token punctuation">)</span>
        at java.base/java.text.DigitList.getDouble<span class="token punctuation">(</span>DigitList.java:169<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2202<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:1937<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
java.lang.NumberFormatException: For input string: <span class="token string">"E7"</span>
        at java.base/java.lang.NumberFormatException.forInputString<span class="token punctuation">(</span>NumberFormatException.java:67<span class="token punctuation">)</span>
        at java.base/java.lang.Long.parseLong<span class="token punctuation">(</span>Long.java:711<span class="token punctuation">)</span>
        at java.base/java.lang.Long.parseLong<span class="token punctuation">(</span>Long.java:836<span class="token punctuation">)</span>
        at java.base/java.text.DigitList.getLong<span class="token punctuation">(</span>DigitList.java:195<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2197<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:1937<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
java.lang.ArrayIndexOutOfBoundsException: Index <span class="token parameter variable">-1</span> out of bounds <span class="token keyword">for</span> length <span class="token number">19</span>
        at java.base/java.text.DigitList.fitsIntoLong<span class="token punctuation">(</span>DigitList.java:230<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2195<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:1937<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
java.lang.NumberFormatException: For input string: <span class="token string">""</span>
        at java.base/java.lang.NumberFormatException.forInputString<span class="token punctuation">(</span>NumberFormatException.java:67<span class="token punctuation">)</span>
        at java.base/java.lang.Long.parseLong<span class="token punctuation">(</span>Long.java:721<span class="token punctuation">)</span>
        at java.base/java.lang.Long.parseLong<span class="token punctuation">(</span>Long.java:836<span class="token punctuation">)</span>
        at java.base/java.text.DigitList.getLong<span class="token punctuation">(</span>DigitList.java:195<span class="token punctuation">)</span>
        at java.base/java.text.DecimalFormat.parse<span class="token punctuation">(</span>DecimalFormat.java:2197<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.subParse<span class="token punctuation">(</span>SimpleDateFormat.java:1937<span class="token punctuation">)</span>
        at java.base/java.text.SimpleDateFormat.parse<span class="token punctuation">(</span>SimpleDateFormat.java:1545<span class="token punctuation">)</span>
        at java.base/java.text.DateFormat.parse<span class="token punctuation">(</span>DateFormat.java:397<span class="token punctuation">)</span>
        at Test.DateFormatThreadSafetyExample.lambda<span class="token variable">$0</span><span class="token punctuation">(</span>DateFormatThreadSafetyExample.java:16<span class="token punctuation">)</span>
        at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:833<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d8/2d/ZsrTdIHf_o.jpg" alt="报错啦.jpg"></p> 
<p>报错啦！！！</p> 
<p>代码证明 <strong>SimpleDateFormat</strong> 类：线——程——不——安——全！</p> 
<h5><a id="33__ThreadLocal__642"></a>3.3 使用 ThreadLocal 解决线程安全问题</h5> 
<p>一种常见的解决 <strong>SimpleDateFormat</strong> 线程安全问题的方法是使用 <strong>ThreadLocal</strong>。每个线程都拥有自己的 <strong>SimpleDateFormat</strong> 实例，避免了多线程竞争。以下是如何使用 <strong>ThreadLocal</strong> 来确保线程安全：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadLocalDateFormatExample</span> <span class="token punctuation">{<!-- --></span>   
    <span class="token comment">// 创建一个静态的ThreadLocal变量threadLocalSdf，用于存储SimpleDateFormat对象。使用withInitial方法初始化为当前时间的格式化字符串"yyyy-MM-dd HH:mm:ss"</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">&gt;</span></span> threadLocalSdf <span class="token operator">=</span> <span class="token class-name">ThreadLocal</span><span class="token punctuation">.</span><span class="token function">withInitial</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    

        <span class="token class-name">Runnable</span> task <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>            <span class="token comment">// 定义一个Runnable任务</span>
            <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> threadLocalSdf<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 从threadLocalSdf中获取SimpleDateFormat对象</span>
            <span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 创建一个新的Date对象，表示当前时间</span>
            <span class="token class-name">String</span> formattedDate <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 使用SimpleDateFormat对象将当前时间格式化为字符串</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"格式化的日期： "</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 输出格式化后的日期字符串</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment">// 结束Runnable任务的定义</span>
        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 创建一个新的线程，传入Runnable任务</span>
        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 创建另一个新的线程，传入Runnable任务</span>
        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 启动第一个线程</span>
        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 启动第二个线程</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>  
</code></pre> 
<p>运行结果如下：</p> 
<pre><code class="prism language-bash">格式化的日期: <span class="token number">2023</span>-11-04 <span class="token number">15</span>:10:41
格式化的日期: <span class="token number">2023</span>-11-04 <span class="token number">15</span>:10:41
</code></pre> 
<p>在这个示例中，每个线程通过 <strong>ThreadLocal</strong> 获得自己的 <strong>SimpleDateFormat</strong> 实例，确保了线程之间的隔离，从而解决了线程安全问题。</p> 
<p>使用 <strong>ThreadLocal</strong> 是一种常用的解决方案，但需要小心，以免导致内存泄漏。确保在不再需要时清理 <strong>ThreadLocal</strong> 变量。</p> 
<h4><a id="4__678"></a>4. 本地化和国际化</h4> 
<h5><a id="41__680"></a>4.1 日期格式的本地化</h5> 
<p>本地化是根据特定地区或文化习惯来适应不同的语言和格式。在日期格式化中，本地化通常涉及到日期的显示方式、月份和星期的命名等。</p> 
<h5><a id="42_DateFormat__684"></a>4.2 DateFormat 对不同语言的支持</h5> 
<p><strong>DateFormat</strong> 类和其子类提供了对不同语言的支持。它们可以根据不同的 <strong>Locale</strong> 对象来格式化和解析日期和时间，以适应不同的语言和文化。</p> 
<p>例如，下面是如何在不同语言环境下使用 <strong>SimpleDateFormat</strong>：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DateFormatLocalizationExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 适应美国英语环境 格式化日期和时间</span>
        <span class="token class-name">SimpleDateFormat</span> sdfUS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"MMMM dd, yyyy"</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">US</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 适应法国环境 格式化日期和时间</span>
        <span class="token class-name">SimpleDateFormat</span> sdfFR <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"dd MMMM yyyy"</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">FRENCH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Date in US format: "</span> <span class="token operator">+</span> sdfUS<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Date in French format: "</span> <span class="token operator">+</span> sdfFR<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">Date <span class="token keyword">in</span> US format: November 04, <span class="token number">2023</span>
Date <span class="token keyword">in</span> French format: 04 novembre <span class="token number">2023</span>
</code></pre> 
<p>在上面的示例中，我们创建了两个 <strong>SimpleDateFormat</strong> 实例，一个使用美国英语环境，另一个使用法国环境。这导致了不同的日期格式，分别使用不同的日期和月份名称。</p> 
<h5><a id="43__ResourceBundle__719"></a>4.3 使用 ResourceBundle 进行国际化</h5> 
<p>除了 <strong>DateFormat</strong>，在实现国际化时，还可以使用 <strong>ResourceBundle</strong> 类来管理应用程序的本地化资源。这包括日期和时间格式、消息文本、标签和其他文本内容。</p> 
<p><strong>ResourceBundle</strong> 允许将不同的本地化资源存储在属性文件中，根据当前 <strong>Locale</strong> 动态加载适当的资源。</p> 
<p>以下是一个简单的示例，演示如何使用 <strong>ResourceBundle</strong> 进行国际化：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ResourceBundle</span></span><span class="token punctuation">;</span> 

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceBundleExample</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

         <span class="token comment">// 获取当前日期</span>
        <span class="token class-name">Date</span> currentDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用DateFormat格式化日期</span>
        <span class="token class-name">DateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> formattedDate <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>currentDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将格式化后的日期字符串按"-"分割成数组</span>
        <span class="token class-name">String</span> date<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span>formattedDate<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        
    
        <span class="token comment">// 使用ResourceBundle加载资源文件,设置为中文资料</span>
        <span class="token class-name">ResourceBundle</span> bundle <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">"messages_CH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 从资源文件中获取翻译</span>
        <span class="token class-name">String</span> translatedDate <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"date"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"%year"</span><span class="token punctuation">,</span> date<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"%month"</span><span class="token punctuation">,</span> date<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"%date"</span><span class="token punctuation">,</span> date<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"咱们中国人这么说：\n"</span> <span class="token operator">+</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span> <span class="token operator">+</span>translatedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 切换到美国英语资源文件</span>
        bundle <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">"messages_US"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment">// 从资源文件中获取翻译</span>
        translatedDate <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"date"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"%year"</span><span class="token punctuation">,</span> date<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"%month"</span><span class="token punctuation">,</span> date<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"%date"</span><span class="token punctuation">,</span> date<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"人家老美得这么说：\n"</span> <span class="token operator">+</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span> <span class="token operator">+</span>translatedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> 
<p>需要注意的是我们需要创建两个资源包文件，即<code>messages_CH.properties</code>和<code>messages_US.properties</code>,它们和<code>ResourceBundleExample.java</code>的相对位置如下:</p> 
<pre><code class="prism language-bash">my_project：
│  messages_CH.properties
│  messages_US.properties
└─src
    ResourceBundleExample.java
</code></pre> 
<p><code>messages_CH.properties</code>和<code>messages_US.properties</code>的文件内容分别如下:</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">hello</span><span class="token operator">=</span>你好呀！
<span class="token assign-left variable">date</span><span class="token operator">=</span>今天是%year年%month月%date日.
</code></pre> 
<pre><code class="prism language-bash"><span class="token assign-left variable">hello</span><span class="token operator">=</span>Hello<span class="token operator">!</span>
<span class="token assign-left variable">date</span><span class="token operator">=</span>Today is %month,%date,%year.
</code></pre> 
<p>最后，程序的运行结果如下:</p> 
<pre><code class="prism language-bash">咱们中国人这么说：
你好呀！
今天是2023年11月04日.
人家老美得这么说：
Hello<span class="token operator">!</span>
Today is <span class="token number">11,04</span>,2023.
</code></pre> 
<h5><a id="44__794"></a>4.4 示例：日期格式的本地化</h5> 
<p>下面是一个示例，演示了如何在不同本地化环境下格式化日期。在这个示例中，我们将使用 <strong>Locale</strong> 设置不同的语言环境并对日期进行本地化：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DateLocalizationExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建一个Date对象，表示当前日期和时间</span>
    <span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建一个Locale对象，表示美国英语、法国法语</span>
    <span class="token class-name">Locale</span> usLocale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">"en"</span><span class="token punctuation">,</span> <span class="token string">"US"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Locale</span> frLocale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">"fr"</span><span class="token punctuation">,</span> <span class="token string">"FR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 分别使用美国英语、法国法语的Locale对象创建一个DateFormat对象，用于格式化日期和时间</span>
    <span class="token class-name">DateFormat</span> usDateFormat <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateTimeInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">LONG</span><span class="token punctuation">,</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">LONG</span><span class="token punctuation">,</span> usLocale<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DateFormat</span> frDateFormat <span class="token operator">=</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token function">getDateTimeInstance</span><span class="token punctuation">(</span><span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">LONG</span><span class="token punctuation">,</span> <span class="token class-name">DateFormat</span><span class="token punctuation">.</span><span class="token constant">LONG</span><span class="token punctuation">,</span> frLocale<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Date and time in US English: "</span> <span class="token operator">+</span> usDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Date and time in French: "</span> <span class="token operator">+</span> frDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下：</p> 
<pre><code class="prism language-bash">Date and <span class="token function">time</span> <span class="token keyword">in</span> US English: November <span class="token number">4</span>, <span class="token number">2023</span> at <span class="token number">3</span>:24:03 PM SGT
Date and <span class="token function">time</span> <span class="token keyword">in</span> French: <span class="token number">4</span> novembre <span class="token number">2023</span> à <span class="token number">15</span>:24:03 SGT
</code></pre> 
<p>在这个示例中，我们使用 <strong>DateFormat</strong> 类的不同本地化设置，根据美国英语和法国法语环境分别格式化日期和时间。这会导致不同的日期和时间显示格式，以适应不同的语言和文化要求。</p> 
<h3><a id="_832"></a>三、最佳实践</h3> 
<h5><a id="1__834"></a>1. 处理日期范围和区间</h5> 
<p>在处理日期和时间时，处理日期范围和区间是一个常见但重要的任务。以下是一些最佳实践来处理日期范围和区间：</p> 
<p><strong>使用合适的数据结构：</strong> 为了表示日期范围和区间，可以使用 Java 中的 <code>Date</code> 对象或更现代的 <code>LocalDate</code> 对象。 <code>LocalDate</code> 对象是 Java 8 引入的 <code>java.time</code> 包的一部分，它提供了更好的支持。例如，你可以使用 <code>LocalDate</code> 来表示一个日期范围的开始和结束。</p> 
<pre><code class="prism language-java"><span class="token class-name">LocalDate</span> startDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">LocalDate</span> endDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>处理时区差异：</strong> 当涉及到跨越不同时区的日期和时间时，要特别小心。最好使用 <code>ZonedDateTime</code> 来表示具有时区信息的日期和时间。这将确保你的日期范围考虑了时区的变化。</p> 
<pre><code class="prism language-java"><span class="token class-name">ZoneId</span> newYorkZone <span class="token operator">=</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"America/New_York"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> startDateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> newYorkZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> endDateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">,</span> newYorkZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>避免使用字符串表示：</strong> 避免在应用程序中使用字符串来表示日期范围，因为这可能导致格式化和解析错误。优选使用日期对象来处理日期范围。</p> 
<h5><a id="2__855"></a>2. 理解时区的重要性</h5> 
<p>时区在处理日期和时间时至关重要。以下是一些理解时区重要性的最佳实践：</p> 
<p><strong>存储时间戳而非字符串：</strong> 存储日期和时间时，最好使用时间戳（例如 <code>Instant</code> 或 <code>ZonedDateTime</code>）而不是字符串。时间戳是相对于时区的不变值，可以轻松地转换为不同的时区。</p> 
<p><strong>显示本地时间：</strong> 当向用户显示日期和时间时，通常应将其转换为用户所在地区的本地时间。这可以通过 <code>ZoneId</code> 和 <code>ZonedDateTime</code> 来实现。</p> 
<pre><code class="prism language-java"><span class="token class-name">ZoneId</span> userZone <span class="token operator">=</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Tokyo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> userDateTime <span class="token operator">=</span> startDateTime<span class="token punctuation">.</span><span class="token function">withZoneSameInstant</span><span class="token punctuation">(</span>userZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>考虑夏令时：</strong> 夏令时是时区的一部分，它会导致时间的变化。在处理涉及夏令时的日期和时间时要特别小心。</p> 
<p><strong>使用现代日期时间库：</strong> 如果可能的话，尽量使用 Java 8 引入的 <code>java.time</code> 包，它提供了更强大和准确的日期和时间处理功能，尤其在处理时区和夏令时方面。</p> 
<p>总之，日期和时间的处理需要小心考虑时区和夏令时的问题。使用合适的数据结构和现代日期时间库，可以更容易地处理日期范围和区间，同时避免出现常见的日期和时间错误。</p> 
<h4><a id="2__877"></a>2. 时间戳和时区信息</h4> 
<h5><a id="21__879"></a>2.1 使用时间戳表示日期和时间</h5> 
<p>在Java中，你可以使用时间戳来表示日期和时间，同时使用<code>Date</code>和<code>DateFormat</code>类来进行操作和格式化。下面是一个完整的示例，演示如何使用时间戳表示日期和时间，以及如何使用<code>Date</code>和<code>DateFormat</code>类进行相关操作：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimestampExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取当前时间的时间戳</span>
        <span class="token keyword">long</span> currentTimestamp <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用时间戳创建Date对象</span>
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>currentTimestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用SimpleDateFormat格式化日期</span>
        <span class="token class-name">DateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> formattedDate <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前时间的时间戳: "</span> <span class="token operator">+</span> currentTimestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"时间戳转换为日期时间: "</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建一个特定的日期时间的时间戳</span>
        <span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2023-10-15 14:30:00"</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">DateFormat</span> parseFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Date</span> parsedDate <span class="token operator">=</span> parseFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> customTimestamp <span class="token operator">=</span> parsedDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义日期时间的时间戳: "</span> <span class="token operator">+</span> customTimestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日期解析出错: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下:</p> 
<pre><code class="prism language-bash">当前时间的时间戳: <span class="token number">1699088456494</span>
时间戳转换为日期时间: <span class="token number">2023</span>-11-04 <span class="token number">17</span>:00:56
自定义日期时间的时间戳: <span class="token number">1697351400000</span>
</code></pre> 
<h5><a id="22__923"></a>2.2 存储和检索时区信息</h5> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeZoneInfoExample</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建一个自定义日期格式</span>
        <span class="token class-name">SimpleDateFormat</span> customDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置时区信息</span>
        customDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"America/New_York"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取当前时间</span>
        <span class="token class-name">Date</span> currentTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 格式化并输出带时区信息的日期时间</span>
        <span class="token class-name">String</span> formattedDate <span class="token operator">=</span> customDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前时间（纽约时区）: "</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 更改时区到柏林</span>
        customDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"Europe/Berlin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 格式化并输出带时区信息的日期时间</span>
        formattedDate <span class="token operator">=</span> customDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前时间（柏林时区）: "</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 更改时区到东京</span>
        customDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"Asia/Tokyo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 格式化并输出带时区信息的日期时间</span>
        formattedDate <span class="token operator">=</span> customDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前时间（东京时区）: "</span> <span class="token operator">+</span> formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下：</p> 
<pre><code class="prism language-bash">当前时间（纽约时区）: <span class="token number">2023</span>-11-04 03:30:38 EDT
当前时间（柏林时区）: <span class="token number">2023</span>-11-04 08:30:38 CET
当前时间（东京时区）: <span class="token number">2023</span>-11-04 <span class="token number">16</span>:30:38 JST
</code></pre> 
<p>在这个示例中，我们首先创建一个<code>SimpleDateFormat</code>对象，用于自定义日期时间格式，包括时区信息。然后，我们使用<code>setTimeZone</code>方法来设置所需的时区，例如"America/New_York"、“Europe/Berlin"和"Asia/Tokyo”。</p> 
<p>接下来，我们获取当前时间（默认时区），然后使用<code>SimpleDateFormat</code>对象将其格式化为包含所选时区信息的日期时间字符串。这样，你可以存储和检索不同时区的日期时间信息。</p> 
<h3><a id="_974"></a>四、实际应用</h3> 
<h4><a id="___976"></a>示例应用 - 日程管理系统（概念版）</h4> 
<pre><code class="prism language-Java">
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import java.util.Locale;
import java.util.Random;
import java.util.Scanner;

public class ScheduleApp {
    private static ScheduleManager scheduleManager = new ScheduleManager(); // 创建日程管理器
    private static final DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.CHINA); // 日期格式

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in); // 创建一个输入扫描器
        int choice;

        do {
            // 显示菜单选项
            System.out.println("日程管理应用菜单：");
            System.out.println("1. 添加事件");
            System.out.println("2. 查看事件");
            System.out.println("3. 删除事件");
            System.out.println("4. 编辑事件");
            System.out.println("5. 查找和过滤");
            System.out.println("6. 按日历查找");
            System.out.println("7. 清空事件");
            System.out.println("8. 随机测试");
            System.out.println("9. 退出");
            System.out.print("请输入您的选择：");
            choice = scanner.nextInt(); // 获取用户选择

            switch (choice) {
                case 1:
                    addEvent(scanner); // 调用添加事件的方法
                    break;
                case 2:
                    viewEvents(); // 调用查看事件的方法
                    break;
                case 3:
                    deleteEvent(scanner); // 调用删除事件的方法
                    break;
                case 4:
                    editEvent(scanner); // 调用编辑事件的方法
                    break;
                case 5:
                    findAndFilter(scanner); // 调用查找和过滤的方法
                    break;
                case 6:
                    calendarQuery(scanner); // 调用按日历查询的方法
                    break;
                case 7:
                    scheduleManager.clearEvents(); // 清空所有事件
                    System.out.println("已清空所有事件。");
                    break;
                case 8:
                    randomTest(5); // 进行随机测试，生成5个随机事件
                    break;
                case 9:
                    System.out.println("正在退出...");
                    break;
                default:
                    System.out.println("无效选项。请重试。");
            }
        } while (choice != 9);

        scanner.close();
    }

    // 添加事件
    private static void addEvent(Scanner scanner) {
        System.out.print("请输入事件标题: ");
        scanner.nextLine();
        String title = scanner.nextLine();
        System.out.print("请输入事件描述（以 /end 结束输入）:\n");

        StringBuilder descriptionBuilder = new StringBuilder();
        String line;
        while (true) {
            line = scanner.nextLine();
            if ("/end".equals(line)) {
                break;
            }
            descriptionBuilder.append(line).append("\n");
        }
        String description = descriptionBuilder.toString();

        System.out.print("请输入事件的开始时间 (yyyy-MM-dd HH:mm): ");
        Date startTime = null;
        try {
            startTime = dateFormat.parse(scanner.nextLine());
        } catch (ParseException e) {
            System.out.println("无效的日期格式。");
            return;
        }

        System.out.print("请输入事件的结束时间 (yyyy-MM-dd HH:mm): ");
        Date endTime = null;
        try {
            endTime = dateFormat.parse(scanner.nextLine());
        } catch (ParseException e) {
            System.out.println("无效的日期格式。");
            return;
        }

        Event event = new Event(title, description, startTime, endTime);
        System.out.print("是否设置提醒时间 (Y/N)？: ");
        String setReminder = scanner.nextLine();

        if (setReminder.equalsIgnoreCase("Y")) {
            System.out.print("请输入提前提醒的时间段（30分钟/1小时/1天）: ");
            String reminderPeriod = scanner.nextLine();

            Date reminderTime = calculateReminderTime(startTime, reminderPeriod);
            event.setReminderTime(reminderTime);
        }

        scheduleManager.addEvent(event);
        System.out.println("事件添加成功.");
    }

    // 计算提醒时间
    private static Date calculateReminderTime(Date startTime, String reminderPeriod) {
        long timeDifferenceMillis = 0;
        if (reminderPeriod.equals("30分钟")) {
            timeDifferenceMillis = 30 * 60 * 1000;
        } else if (reminderPeriod.equals("1小时")) {
            timeDifferenceMillis = 60 * 60 * 1000;
        } else if (reminderPeriod.equals("1天")) {
            timeDifferenceMillis = 24 * 60 * 60 * 1000;
        }
        return new Date(startTime.getTime() - timeDifferenceMillis);
    }

    // 查看事件
    private static void viewEvents() {
        List&lt;Event&gt; events = scheduleManager.getEvents();

        if (events.isEmpty()) {
            System.out.println("没有安排的事件.");
        } else {
            System.out.println("已安排的事件:");
            int i = 0;
            for (Event event : events) {
                System.out.println("索引值: " + i++);
                System.out.println(event.toString());
            }
        }
    }

    // 日历查询事件
    private static void calendarQuery(Scanner scanner) {
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd", Locale.CHINA); // 日期格式
        System.out.println("按日历查询事件:");
        System.out.print("请输入起始日期 (yyyy-MM-dd): ");
        String startDateStr = scanner.next();

        System.out.print("请输入结束日期 (yyyy-MM-dd): ");
        String endDateStr = scanner.next();

        try {
            Date startDate = dateFormat.parse(startDateStr);
            Date endDate = dateFormat.parse(endDateStr);

            List&lt;Event&gt; eventsInRange = scheduleManager.getEventsInRange(startDate, endDate);

            if (eventsInRange.isEmpty()) {
                System.out.println("在该日期范围内没有事件.");
            } else {
                System.out.println("在该日期范围内的事件:");
                for (Event event : eventsInRange) {
                    System.out.println(event.toString());
                }
            }
        } catch (ParseException e) {
            System.out.println("无效的日期格式.");
        }
    }

    // 删除事件
    private static void deleteEvent(Scanner scanner) {
        System.out.print("请输入要删除的事件索引: ");
        int index = scanner.nextInt();
        if (index &gt;= 0 &amp;&amp; index &lt; scheduleManager.getEvents().size()) {
            scheduleManager.deleteEvent(index);
            System.out.println("事件删除成功.");
        } else {
            System.out.println("无效的索引. 未删除任何事件.");
        }
    }

    // 编辑事件
    private static void editEvent(Scanner scanner) {
        System.out.print("请输入要编辑的事件索引: ");
        int index = scanner.nextInt();
        if (index &gt;= 0 &amp;&amp; index &lt; scheduleManager.getEvents().size()) {
            Event event = scheduleManager.getEvents().get(index);
            System.out.println("当前事件信息:");
            System.out.println(event.toString());
            System.out.print("请输入新的事件标题 (或按 Enter 保留不变): ");
            scanner.nextLine(); // 消耗换行字符
            String newTitle = scanner.nextLine();
            if (!newTitle.isEmpty()) {
                event.setTitle(newTitle);
            }
            System.out.print("请输入新的事件描述 (或按 Enter 保留不变): ");
            String newDescription = scanner.nextLine();
            if (!newDescription.isEmpty()) {
                event.setDescription(newDescription);
            }
            System.out.print("请输入新的事件开始时间 (yyyy-MM-dd HH:mm) (或按 Enter 保留不变): ");
            String newStartTime = scanner.nextLine();
            if (!newStartTime.isEmpty()) {
                try {
                    Date startTime = dateFormat.parse(newStartTime);
                    event.setStartTime(startTime);
                } catch (ParseException e) {
                    System.out.println("无效的日期格式. 事件开始时间未修改.");
                }
            }

            System.out.print("请输入新的事件结束时间 (yyyy-MM-dd HH:mm) (或按 Enter 保留不变): ");
            String newEndTime = scanner.nextLine();
            if (!newEndTime.isEmpty()) {
                try {
                    Date endTime = dateFormat.parse(newEndTime);
                    event.setEndTime(endTime);
                } catch (ParseException e) {
                    System.out.println("无效的日期格式. 事件结束时间未修改.");
                }
            }

            System.out.print("请输入新的提醒时间 (30分钟/1小时/1天) (或按 Enter 保留不变): ");
            String newReminder = scanner.nextLine();
            if (!newReminder.isEmpty()) {
                Date reminderTime = calculateReminderTime(event.getStartTime(), newReminder);
                event.setReminderTime(reminderTime);
            }

            System.out.println("事件编辑成功.");
        } else {
            System.out.println("无效的索引. 事件未修改.");
        }
    }

    // 查找和过滤事件
    private static void findAndFilter(Scanner scanner) {
        System.out.print("请输入要查找的关键字: ");
        scanner.nextLine();
        String keyword = scanner.nextLine();

        List&lt;Event&gt; filteredEvents = scheduleManager.findEventsByKeyword(keyword);

        if (filteredEvents.isEmpty()) {
            System.out.println("未找到包含关键字的事件.");
        } else {
            System.out.println("包含关键字的事件:");
            for (Event event : filteredEvents) {
                System.out.println(event.toString());
            }
        }
    }

    // 随机测试
    private static void randomTest(int nums) {
        Random random = new Random();
        int numRandomEvents = nums; // 生成 nums 个随机事件

        for (int i = 0; i &lt; numRandomEvents; i++) {
            String title = "随机事件 " + (i + 1);
            String description = "这是一个随机生成的事件";

            // 生成随机的开始时间和结束时间
            Calendar calendar = Calendar.getInstance();
            long currentTimeMillis = System.currentTimeMillis();
            calendar.setTimeInMillis(currentTimeMillis + random.nextInt(30) * 60 * 1000); // 开始时间在未来30分钟内
            Date startTime = calendar.getTime();
            calendar.setTimeInMillis(currentTimeMillis + random.nextInt(60) * 60 * 1000); // 结束时间在未来60分钟内
            Date endTime = calendar.getTime();

            Event event = new Event(title, description, startTime, endTime);

            // 随机设置提醒时间
            if (random.nextBoolean()) {
                calendar.setTime(startTime);
                calendar.add(Calendar.MINUTE, -random.nextInt(60)); // 提前0-60分钟提醒
                Date reminderTime = calendar.getTime();
                event.setReminderTime(reminderTime);
            }

            // 将生成的事件添加到日程管理器
            scheduleManager.addEvent(event);
        }

        System.out.println("生成了 " + numRandomEvents + " 个随机事件。");
    }
}
</code></pre> 
<pre><code class="prism language-java"><span class="token comment">// Event.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Event</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> startTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> endTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> reminderTime<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm"</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">CHINA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">,</span> <span class="token class-name">Date</span> startTime<span class="token punctuation">,</span> <span class="token class-name">Date</span> endTime<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> startTime<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> endTime<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reminderTime <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 默认提醒时间为空</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStartTime</span><span class="token punctuation">(</span><span class="token class-name">Date</span> startTime<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> startTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEndTime</span><span class="token punctuation">(</span><span class="token class-name">Date</span> endTime<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> endTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setReminderTime</span><span class="token punctuation">(</span><span class="token class-name">Date</span> reminderTime<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reminderTime <span class="token operator">=</span> reminderTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> startTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> endTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getReminderTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> reminderTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"标题: "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"描述: "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"开始时间: "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>startTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"结束时间: "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>endTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token comment">// 计算距离事件开始时间的时间差</span>
        <span class="token keyword">long</span> startTimeMillis <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> currentTimeMillis <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> timeDifferenceMillis <span class="token operator">=</span> startTimeMillis <span class="token operator">-</span> currentTimeMillis<span class="token punctuation">;</span>
    
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timeDifferenceMillis <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 事件已经开始，计算已开始多长时间</span>
            timeDifferenceMillis <span class="token operator">=</span> currentTimeMillis <span class="token operator">-</span> startTimeMillis<span class="token punctuation">;</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"已开始: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"距离开始时间还有: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">long</span> days <span class="token operator">=</span> timeDifferenceMillis <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> hours <span class="token operator">=</span> <span class="token punctuation">(</span>timeDifferenceMillis <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> minutes <span class="token operator">=</span> <span class="token punctuation">(</span>timeDifferenceMillis <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">if</span> <span class="token punctuation">(</span>days <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>days<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" 天 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>hours<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" 小时 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>minutes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" 分钟\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-Java">// ScheduleManager.java

// 导入 ArrayList 和 List 类，以支持事件列表的管理
import java.util.Date;
import java.util.ArrayList;
import java.util.List;

// ScheduleManager 类用于管理事件列表
public class ScheduleManager {
    // 存储事件的列表
    private List&lt;Event&gt; events = new ArrayList&lt;&gt;();

    // 添加事件到事件列表
    public void addEvent(Event event) {
        events.add(event);
    }

    // 获取事件列表
    public List&lt;Event&gt; getEvents() {
        return events;
    }

    // 删除指定索引位置的事件
    public boolean deleteEvent(int index) {
        if (index &gt;= 0 &amp;&amp; index &lt; events.size()) {
            events.remove(index);
            return true; // 删除成功
        }
        return false; // 删除失败，索引无效
    }

    // 获取指定索引位置的事件
    public Event getEvent(int index) {
        if (index &gt;= 0 &amp;&amp; index &lt; events.size()) {
            return events.get(index);
        }
        return null; // 返回空值，索引无效
    }
    
    // 根据关键字查找事件
    public List&lt;Event&gt; findEventsByKeyword(String keyword) {
        List&lt;Event&gt; filteredEvents = new ArrayList&lt;&gt;();
        for (Event event : events) {
            // 如果事件的标题或描述包含关键字，则将其添加到过滤事件列表中
            if (event.getTitle().contains(keyword) || event.getDescription().contains(keyword)) {
                filteredEvents.add(event);
            }
        }
        return filteredEvents; // 返回包含关键字的事件列表
    }

    // 清空方法
    public void clearEvents() {
        events.clear();
    }


    // 获取日期范围内的事件
    public List&lt;Event&gt; getEventsInRange(Date startDate, Date endDate) {
        List&lt;Event&gt; eventsInRange = new ArrayList&lt;&gt;();
        for (Event event : events) {
            if (event.getStartTime().after(startDate) &amp;&amp; event.getEndTime().before(endDate)) {
                eventsInRange.add(event);
            }
        }
        return eventsInRange;
    }
}
</code></pre> 
<h4><a id="_1452"></a>演示</h4> 
<p><img src="https://images2.imgbox.com/d9/d3/080kNlbc_o.png" alt="1.png"></p> 
<p><img src="https://images2.imgbox.com/1c/53/z1Ts8qL4_o.png" alt="2.png"></p> 
<p><img src="https://images2.imgbox.com/54/0a/JYRQUGZq_o.png" alt="3.png"></p> 
<p><img src="https://images2.imgbox.com/78/bd/X5b2Q7KK_o.png" alt="4.png"></p> 
<p><img src="https://images2.imgbox.com/7d/69/E1HtHQqN_o.png" alt="5.png"></p> 
<p><img src="https://images2.imgbox.com/c5/ef/QtU8URdi_o.png" alt="6.png"></p> 
<p><img src="https://images2.imgbox.com/99/ac/Yuba5aDU_o.png" alt="7.png"></p> 
<p><img src="https://images2.imgbox.com/b1/cb/sQ7sK0VU_o.png" alt="9.png"></p> 
<p><img src="https://images2.imgbox.com/be/ba/YuaSVd5U_o.png" alt="10.png"></p> 
<p><img src="https://images2.imgbox.com/1b/b2/P9EgNcna_o.png" alt="11.png"></p> 
<p><img src="https://images2.imgbox.com/4f/75/QNxJ0C2z_o.png" alt="12.png"></p> 
<h3><a id="_1477"></a>最后的小牢骚</h3> 
<blockquote> 
 <p>在 Java 编程中，处理日期和时间就像是在穿越时间迷宫。我们的首站是 <code>Date</code> 类，它曾是日期时间的王者，但后来被证明有点靠不住。Date 类让我们能够获取当前日期和时间，但它是可变的，这就像在双刃剑上跳舞，很容易割伤自己。而且，不同国家和地区的日期格式也不能被满足。试图在多线程中使用 Date 类？那简直是自找麻烦。</p> 
</blockquote> 
<blockquote> 
 <p>然后，Java 8 出现了救世主 - <code>java.time</code> 包。它引入了一堆新朋友，比如 <code>LocalDate</code>、<code>LocalDateTime</code>，它们都是不可变的。这些新朋友让我们处理日期和时间变得更加简单和安全。所以，从现在开始，不要再用老掉牙的 <code>Date</code> 类了，转而拥抱 <code>java.time</code> 包的时代。</p> 
</blockquote> 
<blockquote> 
 <p>如果你想了解更多关于<code>java.time</code> 包的知识，关注我！不仅是关于<code>java.time</code> 包，<code>C++</code>、<code>Android</code>、<code>Java</code>、数据结构等知识我都将持续输出！🫡🫡🫡</p> 
</blockquote> 
<blockquote> 
 <p>但别急，如果你还需要和老代码打交道，有 <code>DateFormat</code> 类来帮忙。DateFormat 能够格式化和解析日期时间字符串，它非常聪明，可以适应不同国家和地区的日期格式，而且可以让日期时间在不同语言之间自由切换。</p> 
</blockquote> 
<blockquote> 
 <p>然而，要小心，<code>DateFormat</code> 也有它的问题，尤其是在多线程环境中，你可能会发现它有点暴躁。不过，聪明的 Java 程序员总会找到解决方法，比如使用 <code>ThreadLocal</code> 来确保每个线程都有自己的 <code>DateFormat</code> 实例。</p> 
</blockquote> 
<blockquote> 
 <p>最后，如果你还需要应对国际化的挑战，<code>ResourceBundle</code> 是你的好朋友。它可以让你的日期格式适应不同语言和文化，让你的应用程序更受欢迎。</p> 
</blockquote> 
<blockquote> 
 <p>在穿越 Java 的时间迷宫中，不仅要了解这些工具，还要牢记最佳实践，特别是在处理日期范围和区间时要懂得时区的重要性。所以，朋友们，准备好了吗？一起在时间的大舞台上留下自己的足迹吧！</p> 
</blockquote> 
<h3><a id="_1493"></a>求点赞👍求关注❤️求转发💕</h3>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40ec3bcba2c77ddf7896f942bc70c04b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springboot/java/php/node/python家具网站【计算机毕设】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e9e50b4f006b9cf89c37dac88935ed6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构-排序-示例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>