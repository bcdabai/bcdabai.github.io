<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>applicationContext.xml文件配置小结（1） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="applicationContext.xml文件配置小结（1）" />
<meta property="og:description" content="Spring配置文件是用于指导Spring工厂进行Bean生产、依赖关系注入（装配）及Bean实例分发的&#34;图纸&#34;。Java EE程序员必须学会并灵活应用这份&#34;图纸&#34;准确地表达自己的&#34;生产意图&#34;。Spring配置文件是一个或多个标准的XML文档，applicationContext.xml是Spring的默认配置文件，当容器启动时找不到指定的配置文档时，将会尝试加载这个默认的配置文件。
在学会动手&#34;绘制图纸&#34;之前，先要学会&#34;阅读图纸&#34;，熟能生巧讲的就是这个道理，&#34;熟读唐诗三百首，不会作诗也会吟&#34;。
下面列举的是一份比较完整的配置文件模板，文档中各XML标签节点的基本用途也给出了详细的解释，这些XML标签节点在后续的知识点中均会用到，熟练掌握了这些XML节点及属性的用途后，为我们动手编写配置文件打下坚实的基础。
一）applicationContext.xml文件标配模板
1、一个OA系统的applicationContext.xml配置文件
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xmlns:context=&#34;http://www.springframework.org/schema/context&#34; xmlns:tx=&#34;http://www.springframework.org/schema/tx&#34; xsi:schemaLocation=&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&#34;&gt; &lt;!-- 自动扫描与装配bean，扫描web包，将带有注解的类纳入spring容器管理 --&gt; &lt;!-- &lt;context:component-scan base-package=&#34;cn.itcast.oa&#34;&gt;作用 Spring容器初始化时，会扫描cn.itcast.oa目录下标有@Component；@Service；@Controller；@Repository 注解的类纳入Spring容器管理 在类上，使用以下注解，实现bean的声明： @Component：泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。 @Service 用于标注业务层组件 @Controller 用于标注控制层组件（如springMvc的controller，struts中的action） @Repository用于标注数据访问组件，即DAO组件 在类的成员变量上，使用以下注解，实现属性的自动装配 @Autowired ：按类的类型进行装配 @Resource： 1.如果同时指定了name和type，那么从Spring上下文中找到唯一匹配的bean进行装配 2. 如果指定了name，则从上下文中查找名称（id）匹配的bean进行装配，找不到则抛出异常 3.如果指定了type，则从上下文中找到类型匹配的唯一bean进行装配，找不到或者找到多个，都会抛出异常 4.如果既没有指定name，又没有指定type，则自动按照byName方式进行装配；如果没有匹配，则回退为一个原始类型进行匹配，如果匹配则自动装配； --&gt; &lt;context:component-scan base-package=&#34;cn.itcast.oa&#34;&gt;&lt;/context:component-scan&gt; &lt;!-- 加载外部的properties配置文件（引入jdbc的配置文件） --&gt; &lt;context:property-placeholder location=&#34;classpath:jdbc.properties&#34;/&gt; &lt;!-- 配置数据库连接池（c3p0）这个可以在hibernate.cfg.xml中配置 --&gt; &lt;bean id=&#34;dataSource&#34; class=&#34;com.mchange.v2.c3p0.ComboPooledDataSource&#34;&gt; &lt;!-- 基本信息 ：jdbc的url、驱动名、数据库名字、密码--&gt; &lt;property name=&#34;jdbcUrl&#34; value=&#34;${jdbcUrl}&#34;&gt;&lt;/property&gt; &lt;property name=&#34;driverClass&#34; value=&#34;${driverClass}&#34;&gt;&lt;/property&gt; &lt;property name=&#34;user&#34; value=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ae6fb27903f8f0592e077b1c4ed24330/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-10-13T16:07:33+08:00" />
<meta property="article:modified_time" content="2016-10-13T16:07:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">applicationContext.xml文件配置小结（1）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="white-space:pre"></span> 
<p><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Spring</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">配置文件是用于指导</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Spring</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">工厂进行</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Bean</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">生产、依赖关系注入（装配）及</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Bean</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">实例分发的</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">"</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">图纸</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">"</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">。</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Java EE</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">程序员必须学会并灵活应用这份</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">"</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">图纸</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">"</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">准确地表达自己的</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">"</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">生产意图</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">"</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">。</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Spring</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">配置文件是一个或多个标准的</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">XML</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">文档，</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">applicationContext.xml</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">是</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">Spring</span><span style="line-height:16.3pt; text-indent:17.55pt; white-space:pre">的默认配置文件，当容器启动时找不到指定的配置文档时，将会尝试加载这个默认的配置文件。</span></p> 
<p><span style="line-height:16.3pt; text-indent:17.55pt"><span style="white-space:pre">  </span>  在学会动手</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">"</span><span style="line-height:16.3pt; text-indent:17.55pt">绘制图纸</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">"</span><span style="line-height:16.3pt; text-indent:17.55pt">之前，先要学会</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">"</span><span style="line-height:16.3pt; text-indent:17.55pt">阅读图纸</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">"</span><span style="line-height:16.3pt; text-indent:17.55pt">，熟能生巧讲的就是这个道理，</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">"</span><span style="line-height:16.3pt; text-indent:17.55pt">熟读唐诗三百首，不会作诗也会吟</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">"</span><span style="line-height:16.3pt; text-indent:17.55pt">。</span></p> 
<p><span style="line-height:16.3pt; text-indent:17.55pt">           下面列举的是一份比较完整的配置文件模板，文档中各</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">XML</span><span style="line-height:16.3pt; text-indent:17.55pt">标签节点的基本用途也给出了详细的解释，这些</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">XML</span><span style="line-height:16.3pt; text-indent:17.55pt">标签节点在后续的知识点中均会用到，熟练掌握了这些</span><span lang="EN-US" style="line-height:16.3pt; text-indent:17.55pt">XML</span><span style="line-height:16.3pt; text-indent:17.55pt">节点及属性的用途后，为我们动手编写配置文件打下坚实的基础。</span></p> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> <span lang="EN-US"></span></p> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> <strong><span style="font-size:24px">一）applicationContext.xml文件标配模板</span></strong></p> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> <strong><span style="font-size:18px">1、一个OA系统的applicationContext.xml配置文件</span></strong></p> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> <strong><span style="font-size:24px"></span></strong></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd"&gt;


	&lt;!-- 自动扫描与装配bean，扫描web包，将带有注解的类纳入spring容器管理 --&gt;
	&lt;!-- &lt;context:component-scan base-package="cn.itcast.oa"&gt;作用
	Spring容器初始化时，会扫描cn.itcast.oa目录下标有@Component；@Service；@Controller；@Repository
	注解的类纳入Spring容器管理
    在类上，使用以下注解，实现bean的声明：
	  @Component：泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。
	  @Service 用于标注业务层组件
	  @Controller 用于标注控制层组件（如springMvc的controller，struts中的action）
	  @Repository用于标注数据访问组件，即DAO组件
			
    在类的成员变量上，使用以下注解，实现属性的自动装配
	  @Autowired ：按类的类型进行装配
	  @Resource：
  1.如果同时指定了name和type，那么从Spring上下文中找到唯一匹配的bean进行装配
  2. 如果指定了name，则从上下文中查找名称（id）匹配的bean进行装配，找不到则抛出异常 
  3.如果指定了type，则从上下文中找到类型匹配的唯一bean进行装配，找不到或者找到多个，都会抛出异常 
  4.如果既没有指定name，又没有指定type，则自动按照byName方式进行装配；如果没有匹配，则回退为一个原始类型进行匹配，如果匹配则自动装配；
	 --&gt;
   &lt;context:component-scan base-package="cn.itcast.oa"&gt;&lt;/context:component-scan&gt;


	&lt;!-- 加载外部的properties配置文件（引入jdbc的配置文件） --&gt;
	&lt;context:property-placeholder location="classpath:jdbc.properties"/&gt;


	&lt;!-- 配置数据库连接池（c3p0）这个可以在hibernate.cfg.xml中配置 --&gt;
	&lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;
	
		&lt;!-- 基本信息 ：jdbc的url、驱动名、数据库名字、密码--&gt;
		&lt;property name="jdbcUrl" value="${jdbcUrl}"&gt;&lt;/property&gt;
		&lt;property name="driverClass" value="${driverClass}"&gt;&lt;/property&gt;
		&lt;property name="user" value="${username}"&gt;&lt;/property&gt;
		&lt;property name="password" value="${password}"&gt;&lt;/property&gt;
		
		&lt;!-- 其他配置 --&gt;
    &lt;!--初始化时获取三个连接，取值应在minPoolSize与maxPoolSize之间。Default: 3 --&gt;
		&lt;property name="initialPoolSize" value="3"&gt;&lt;/property&gt;
		&lt;!--连接池中保留的最小连接数。Default: 3 --&gt;
		&lt;property name="minPoolSize" value="3"&gt;&lt;/property&gt;
		&lt;!--连接池中保留的最大连接数。Default: 15 --&gt;
		&lt;property name="maxPoolSize" value="5"&gt;&lt;/property&gt;
		&lt;!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 --&gt;
		&lt;property name="acquireIncrement" value="3"&gt;&lt;/property&gt;
&lt;!-- 控制数据源内加载的PreparedStatements数量。如果maxStatements与maxStatementsPerConnection均为0，则缓存被关闭。Default: 0 --&gt;
		&lt;property name="maxStatements" value="8"&gt;&lt;/property&gt;
&lt;!-- maxStatementsPerConnection定义了连接池内单个连接所拥有的最大缓存statements数。Default: 0 --&gt;
		&lt;property name="maxStatementsPerConnection" value="5"&gt;&lt;/property&gt;
		&lt;!--最大空闲时间,1800秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 --&gt;
		&lt;property name="maxIdleTime" value="1800"&gt;&lt;/property&gt;
	&lt;/bean&gt;
	
	&lt;!-- 配置SessionFactory 
	（把数据源注入给session工厂）、配置映射文件将Spring与hibernate初步整合起来
	--&gt;
	&lt;bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
		&lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;
		&lt;property name="configLocation" value="classpath:hibernate.cfg.xml"&gt;&lt;/property&gt;
	&lt;/bean&gt;

	&lt;!-- 配置声明式的事务管理（采用基于注解的方式） 
	session工厂注入到事务管理器transactionManager使Spring与Hinbernate整合实现业务逻辑
	--&gt;
	
	&lt;bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;
		&lt;property name="sessionFactory" ref="sessionFactory"&gt;&lt;/property&gt;
	&lt;/bean&gt;
	&lt;tx:annotation-driven transaction-manager="transactionManager"/&gt;
	
&lt;/beans&gt;

</code></pre> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> <strong><span style="font-size:18px">2、一个网上摘录下来的applicationContext.xml文件</span></strong></p> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> </p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;   
&lt;beans   
xmlns="http://www.springframework.org/schema/beans"  
xmlns  si="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:context="http://www.springframework.org/schema/context"  
xsi:schemaLocation="http://www.springframework.org/schema/beans   
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd   
http://www.springframework.org/schema/context   
http://www.springframework.org/schema/context/spring-context-2.5.xsd   "&gt;   
&lt;context:component-scan base-package="com.persia"&gt;   
&lt;!-- 开启组件扫描 --&gt;   
&lt;/context:component-scan&gt;   
  
&lt;context:annotation-config&gt;   
&lt;!--开启注解处理器--&gt;   
&lt;/context:annotation-config&gt;   
  
&lt;!-- 使用注解,省去了propertity的xml配置，减少xml文件大小 --&gt;   
&lt;bean id="personServiceAnno"&gt;&lt;/bean&gt;   
&lt;bean id="personDaoBeanAnno"&gt;&lt;/bean&gt;   
&lt;bean id="personDaoBeanAnno2"&gt;&lt;/bean&gt;   
  
&lt;!-- 自动注解 --&gt;   
&lt;bean id="personServiceAutoInject" autowire="byName"&gt;&lt;/bean&gt;   
&lt;bean id="personService"&gt;   
&lt;!-- 由spring容器去创建和维护，我们只要获取就可以了 --&gt;   
&lt;/bean&gt;   
  
&lt;bean id="personService2" factory-method="createInstance" lazy-init="true"  
init-method="init"  destroy-method="destory"&gt;   
&lt;!-- 静态工厂获取bean --&gt;   
&lt;/bean&gt;   
  
&lt;bean id="fac"&gt;&lt;/bean&gt;   
&lt;bean id="personService3" factory-bean="fac" factory-method="createInstance" scope="prototype"&gt;   
&lt;!-- 实例工厂获取bean，先实例化工厂再实例化bean--&gt;   
&lt;/bean&gt;   
&lt;!-- ref方式注入属性 --&gt;   
&lt;bean id="personDao"&gt;&lt;/bean&gt;   
&lt;bean id="personService4"&gt;   
&lt;property name="personDao" ref="personDao"&gt;&lt;/property&gt;   
&lt;/bean&gt;   
  
&lt;!-- 内部bean方式注入 --&gt;   
&lt;bean id="personService5"&gt;   
&lt;property name="personDao"&gt;   
&lt;bean&gt;&lt;/bean&gt;   
&lt;/property&gt;   
&lt;property name="name" value="persia"&gt;&lt;/property&gt;   
&lt;property name="age" value="21"&gt;&lt;/property&gt;   
  
&lt;property name="sets"&gt;   
&lt;!-- 集合的注入 --&gt;   
&lt;set&gt;   
&lt;value&gt;第一个&lt;/value&gt;   
&lt;value&gt;第二个&lt;/value&gt;   
&lt;value&gt;第三个&lt;/value&gt;   
&lt;/set&gt;   
&lt;/property&gt;   
  
&lt;property name="lists"&gt;   
&lt;!-- 集合的注入 --&gt;   
&lt;list&gt;   
&lt;value&gt;第一个l&lt;/value&gt;   
&lt;value&gt;第二个l&lt;/value&gt;   
&lt;value&gt;第三个l&lt;/value&gt;   
&lt;/list&gt;   
  
&lt;/property&gt;   
  
&lt;property name="properties"&gt;   
&lt;props&gt;   
&lt;prop key="key1"&gt;value1&lt;/prop&gt;   
&lt;prop key="key2"&gt;value2&lt;/prop&gt;   
&lt;prop key="key3"&gt;value3&lt;/prop&gt;   
&lt;/props&gt;   
&lt;/property&gt;   
  
&lt;property name="map"&gt;   
&lt;map&gt;   
&lt;entry key="key1" value="value-1"&gt;&lt;/entry&gt;   
&lt;entry key="key2" value="value-2"&gt;&lt;/entry&gt;   
&lt;entry key="key3" value="value-3"&gt;&lt;/entry&gt;   
&lt;/map&gt;   
&lt;/property&gt;   
&lt;/bean&gt;   
  
&lt;bean id="personService6"&gt;   
&lt;constructor-arg index="0" value="构造注入的name" &gt;&lt;/constructor-arg&gt;   
&lt;!-- 基本类型可以不写type --&gt;   
&lt;constructor-arg index="1" type="com.persia.IDaoBean" ref="personDao"&gt;   
&lt;/constructor-arg&gt;   
&lt;/bean&gt;   
  
&lt;/beans&gt;</code></pre> 
<br> 
<p><strong><span style="font-size:24px"> </span><span style="font-size:18px">    3、一个新闻管理系统的配置文件</span></strong></p> 
<p></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans  
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;
	&lt;!-- 定义使用C3P0连接池的数据源 --&gt;
	&lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;
		&lt;!-- 指定连接数据库的JDBC驱动 --&gt;
		&lt;property name="driverClass"&gt;
			&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 连接数据库所用的URL --&gt;
		&lt;property name="jdbcUrl"&gt;
			&lt;value&gt;jdbc:mysql://localhost:3306/eportal?useUnicode=
				true&amp;characterEncoding=gbk&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 连接数据库的用户名 --&gt;
		&lt;property name="user"&gt;
			&lt;value&gt;root&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 连接数据库的密码 --&gt;
		&lt;property name="password"&gt;
			&lt;value&gt;root&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 设置数据库连接池的最大连接数 --&gt;
		&lt;property name="maxPoolSize"&gt;
			&lt;value&gt;20&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 设置数据库连接池的最小连接数 --&gt;
		&lt;property name="minPoolSize"&gt;
			&lt;value&gt;2&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 设置数据库连接池的初始化连接数 --&gt;
		&lt;property name="initialPoolSize"&gt;
			&lt;value&gt;2&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 设置数据库连接池的连接的最大空闲时间，单位为秒 --&gt;
		&lt;property name="maxIdleTime"&gt;
			&lt;value&gt;20&lt;/value&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
	&lt;!-- 定义Hibernate的SessionFactory --&gt;
	&lt;bean id="sessionFactory"
		class="org.springframework.orm.
hibernate3.LocalSessionFactoryBean"&gt;
		&lt;!-- 依赖注入上面定义的数据源dataSource --&gt;
		&lt;property name="dataSource" ref="dataSource" /&gt;
		&lt;!-- 注册Hibernate的ORM映射文件 --&gt;
		&lt;property name="mappingResources"&gt;
			&lt;list&gt;
				&lt;value&gt;com/eportal/ORM/News.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Category.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Memberlevel.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Cart.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Traffic.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Newsrule.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Merchandise.hbm.xml&lt;/value&gt;
				&lt;value&gt;com/eportal/ORM/Admin.hbm.xml&lt;/value&gt;
			&lt;/list&gt;
		&lt;/property&gt;
		&lt;!-- 设置Hibernate的相关属性 --&gt;
		&lt;property name="hibernateProperties"&gt;
			&lt;props&gt;
				&lt;!-- 设置Hibernate的数据库方言 --&gt;
				&lt;prop key="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;
				&lt;!-- 设置Hibernate是否在控制台输出SQL语句，开发调试阶段通常设为true --&gt;
				&lt;prop key="show_sql"&gt;true&lt;/prop&gt;
				&lt;!-- 设置Hibernate一个提交批次中的最大SQL语句数 --&gt;
				&lt;prop key="hibernate.jdbc.batch_size"&gt;50&lt;/prop&gt;
				&lt;prop key="show_sql"&gt;50&lt;/prop&gt;
			&lt;/props&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
	&lt;!--定义Hibernate的事务管理器HibernateTransactionManager --&gt;
	&lt;bean id="transactionManager"
		class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;
		&lt;!-- 依赖注入上面定义的sessionFactory --&gt;
		&lt;property name="sessionFactory" ref="sessionFactory" /&gt;
	&lt;/bean&gt;
	&lt;!--定义Spring的事务拦截器TransactionInterceptor --&gt;
	&lt;bean id="transactionInterceptor"
		class="org.springframework.transaction.interceptor.TransactionInterceptor"&gt;
		&lt;!-- 依赖注入上面定义的事务管理器transactionManager --&gt;
		&lt;property name="transactionManager" ref="transactionManager" /&gt;
		&lt;!-- 定义需要进行事务拦截的方法及所采用的事务控制类型 --&gt;
		&lt;property name="transactionAttributes"&gt;
			&lt;props&gt;
				&lt;!-- 以browse、list、load、get及is开头的所有方法采用只读型事务控制类型 --&gt;
				&lt;prop key="browse*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
				&lt;prop key="list*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
				&lt;prop key="load*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
				&lt;prop key="get*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
				&lt;prop key="is*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
				&lt;!-- 所有方法均进行事务控制，如果当前没有事务，则新建一个事务 --&gt;
				&lt;prop key="*"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
			&lt;/props&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
	&lt;!-- 定义BeanNameAutoProxyCreatorf进行Spring的事务处理 --&gt;
	&lt;bean
		class="org.springframework.aop.framework.autoproxy.  
BeanNameAutoProxyCreator"&gt;
		&lt;!-- 针对指定的bean自动生成业务代理 --&gt;
		&lt;property name="beanNames"&gt;
			&lt;list&gt;
				&lt;value&gt;adminService&lt;/value&gt;
				&lt;value&gt;columnsService&lt;/value&gt;
				&lt;value&gt;newsService&lt;/value&gt;
				&lt;value&gt;crawlService&lt;/value&gt;
				&lt;value&gt;memberLevelService&lt;/value&gt;
			&lt;/list&gt;
		&lt;/property&gt;
		&lt;!-- 这个属性为true时，表示被代理的是目标类本身而不是目标类的接口 --&gt;
		&lt;property name="proxyTargetClass"&gt;
			&lt;value&gt;true&lt;/value&gt;
		&lt;/property&gt;
		&lt;!-- 依赖注入上面定义的事务拦截器transactionInterceptor --&gt;
		&lt;property name="interceptorNames"&gt;
			&lt;list&gt;
				&lt;value&gt;transactionInterceptor&lt;/value&gt;
			&lt;/list&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
	&lt;!-- 装配通用数据库访问类BaseDAOImpl --&gt;
	&lt;bean id="dao" class="com.eportal.DAO.BaseDAOImpl"&gt;
		&lt;property name="sessionFactory" ref="sessionFactory" /&gt;
	&lt;/bean&gt;
	&lt;!-- 部署系统用户管理业务逻辑组件AdminServiceImpl --&gt;
	&lt;bean id="adminService" class="com.eportal.service.AdminServiceImpl"&gt;
		&lt;property name="dao" ref="dao" /&gt;
	&lt;/bean&gt;
	&lt;!-- 部署新闻栏目管理业务逻辑组件ColumnsServiceImpl --&gt;
	&lt;bean id="columnsService" class="com.eportal.service.ColumnsServiceImpl"&gt;
		&lt;property name="dao" ref="dao" /&gt;
	&lt;/bean&gt;
	
	
		
&lt;/beans&gt; </code></pre> 
<p style="margin-top:6.25pt; margin-right:0cm; margin-bottom:6.25pt; margin-left:0cm; text-indent:17.55pt; line-height:16.3pt"> <span style="font-size:24px"><strong>二）ApplicationContext.xml配置文件的基础知识</strong></span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; line-height:26px"> <span style="font-size:18px"><strong>1、存放位置：</strong></span><span style="font-size:14px"><br> </span><span style="font-size:14px; white-space:pre"></span><span style="font-size:14px">1）src下面<br> </span><span style="font-size:14px; white-space:pre"></span><span style="font-size:14px">         需要在web.xml中定义如下：<br> &lt;context-param&gt;<br>   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br>   &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;<br> &lt;/context-param&gt;</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2）WEB-INF下面<br> <span style="white-space:pre"></span>         需要在web.xml中定义如下：<br> &lt;context-param&gt;<br>  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br>  &lt;param-value&gt;WEB-INF/applicationContext*.xml&lt;/param-value&gt;<br> &lt;/context-param&gt;</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">  </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; line-height:26px"> <span style="font-size:18px"><strong>2、web.xml 通过contextConfigLocation配置<a target="_blank" href="http://lib.csdn.net/base/javaee" rel="nofollow noopener noreferrer" class="replace_word" title="Java EE知识库" style="color:rgb(223,52,52); text-decoration:none">spring</a> 的方式 </strong></span><span style="font-size:14px"><br>         SSI框架配置文件路径问题：</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> struts2的 1个+N个   路径：src+src(可配置)      名称： struts.xml  + N <br> <span style="white-space:pre"></span>spring 的 1个           路径： src                          名称： applicationContext.xml <br> <span style="white-space:pre"></span>ibatis 的 1个+N个  路径： src+src(可配置)     名称： SqlMapConfig.xml + N</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <br> <span style="white-space:pre"></span>          部署到tomcat后，src目录下的配置文件会和class文件一样，自动copy到应用的 classes目录下</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">           spring的 配置文件在启动时，加载的是web-inf目录下的applicationContext.xml, <br> <span style="white-space:pre"></span>          运行时使用的是web-inf/classes目录下的applicationContext.xml。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">           配置web.xml使这2个路径一致：</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> &lt;context-param&gt; <br>   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; <br>   &lt;param-value&gt;/WEB-INF/classes/applicationContext.xml&lt;/param-value&gt; <br> &lt;/context-param&gt;</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; line-height:26px"> <strong><span style="font-size:18px">3、多个配置文件的加载 </span></strong></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> </p> 
<pre><code class="language-html">&lt;context-param&gt; 
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; 
        &lt;param-value&gt; 
            classpath*:conf/spring/applicationContext_core.xml, 
            classpath*:conf/spring/applicationContext_dict.xml, 
            classpath*:conf/spring/applicationContext_hibernate.xml, 
            classpath*:conf/spring/applicationContext_staff*.xml, 
            classpath*:conf/spring/applicationContext_security*.xml 
        &lt;/param-value&gt; 
    &lt;/context-param&gt;
</code></pre> 
<p></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 1）contextConfigLocation 参数定义了要装入的 Spring 配置文件</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">            首先与Spring相关的配置文件必须要以"applicationContext-"开头，要符合约定优于配置的思想，这样在效率上和出错率上都要好很多。 <br>            还有最好把所有Spring配置文件都放在一个统一的目录下，如果项目大了还可以在该目录下分模块建目录，正如struts.xml文件中的namespace，hibernate.cfg.xml中也有这样的配置。这样程序看起来不会很乱。 <br> <span style="white-space:pre"></span>           在web.xml中的配置如下： </p> 
<pre><code class="language-html">&lt;context-param&gt; 
           &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; 
           &lt;param-value&gt;classpath*:**/applicationContext-*.xml&lt;/param-value&gt;  
    &lt;/context-param&gt;</code></pre> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 2）配置文件路径中的“**”什么意思？</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">          "**/"表示的是任意目录； <br> <span style="white-space:pre"></span>         "**/applicationContext-*.xml"表示任意目录下的以"applicationContext-"开头的XML文件。 <br>          你自己可以根据需要修改。最好把所有Spring配置文件都放在一个统一的目录下，如：</p> 
<div> 
 <pre><code class="language-html">&lt;!-- Spring 的配置 --&gt; 
&lt;context-param&gt; 
 &lt;span style="white-space:pre"&gt;	&lt;/span&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; 
 &lt;span style="white-space:pre"&gt;	&lt;/span&gt; &lt;param-value&gt;classpath:/spring/applicationContext-*.xml&lt;/param-value&gt; 
&lt;/context-param&gt;</code></pre> 
 <br> 
 <p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> 3）web.xml中classpath:和classpath*:, 有什么区别?<span style="text-indent:17.55pt"> </span></p> 
 <p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">        classpath：只会到你的class路径中查找找文件; <br> <span style="white-space:pre"></span>       classpath*：不仅包含class路径，还包括jar文件中(class路径)进行查找.</p> 
 <br> 
</div> 
<p><strong><span style="font-size:18px">4、外挂xxx.properties文件</span></strong></p> 
<p><br> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"> <br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3411bacc2eb300f73641de72c276ede4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#使用Protocol Buffer(ProtoBuf)进行对象的序列化与反序列化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b3ed32c9c7acb712a810023de9e3dbeb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Ubuntu安装MySQL及遇到的问题解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>