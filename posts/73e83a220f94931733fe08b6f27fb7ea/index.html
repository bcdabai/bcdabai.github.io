<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React Native性能优化指南 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React Native性能优化指南" />
<meta property="og:description" content="摘要 本文将介绍在React Native开发中常见的性能优化问题和解决方案，包括ScrollView内无法滑动、热更新导致的文件引用问题、高度获取、强制横屏UI适配、低版本RN适配iOS14、缓存清理、navigation参数取值等。通过代码案例演示和详细说明，帮助开发者更好地理解和解决React Native中的性能问题。
引言 React Native作为一种跨平台的移动应用开发框架，受到了广泛的关注和应用。然而，在实际开发中，我们常常会遇到一些性能优化的挑战，如何解决这些问题成为了开发者们需要思考的重要问题。本篇博客旨在帮助开发者更好地理解React Native中的性能优化问题，并提供相应的解决方案。
正文 ScrollView无法在TouchableOpacity组件内滑动 当ScrollView内的内容使用TouchableOpacity进行包裹时，可能会出现无法滑动的情况。解决方法是将onPress={() =&gt; {}}属性添加到TouchableOpacity组件上。
&lt;TouchableOpacity onPress={() =&gt; {}}&gt; {/* Your content here */} &lt;/TouchableOpacity&gt; RN热更新问题 使用codepush进行热更后，src目录下的音频文件在安卓系统中无法引用。解决方法是将文件放到原生系统中，热更的bundle文件无法打包音频文件。
RN中获取高度的解决方法 // 屏幕高度（状态栏&#43;安全区&#43;下方虚拟按键操作区） Dimensions.get(&#39;screen&#39;).height // 窗口高度（状态栏&#43;安全区） Dimensions.get(&#39;window&#39;).height RN强制横屏UI适配问题 通过Dimensions.get()获取到的宽、高并不是横屏后的宽高。解决方法是使用横屏下宽&gt;高的普遍规则进行页面适配。
低版本RN（0.63以下）适配iOS14图片无法显示问题 修改node_modules中react-native/Libraries/Image/RCTUIImageViewAnimates.m文件，添加以下内容：
if (_currentFrame) { //275行 layer.contentsScale = self.animatedImageScale; layer.contents = (__bridge id)_currentFrame.CGImage; } else { //加上这个 不然ios14以上的系统看不见图片 [super displayLayer:layer]; } RN清理缓存 watchman watch-del-allrm -rf node_modules &amp;&amp; npm installrm -rf /tmp/metro-bundler-cache-* (npm start --reset-cache/react-native start --reset-cache)rm -rf /tmp/haste-map-react-native-packager-* RN navigation参数取值 console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/73e83a220f94931733fe08b6f27fb7ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-22T15:44:32+08:00" />
<meta property="article:modified_time" content="2024-01-22T15:44:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React Native性能优化指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_2"></a>摘要</h3> 
<p>本文将介绍在React Native开发中常见的性能优化问题和解决方案，包括ScrollView内无法滑动、热更新导致的文件引用问题、高度获取、强制横屏UI适配、低版本RN适配iOS14、缓存清理、navigation参数取值等。通过代码案例演示和详细说明，帮助开发者更好地理解和解决React Native中的性能问题。</p> 
<h3><a id="_5"></a>引言</h3> 
<p>React Native作为一种跨平台的移动应用开发框架，受到了广泛的关注和应用。然而，在实际开发中，我们常常会遇到一些性能优化的挑战，如何解决这些问题成为了开发者们需要思考的重要问题。本篇博客旨在帮助开发者更好地理解React Native中的性能优化问题，并提供相应的解决方案。</p> 
<h3><a id="_8"></a>正文</h3> 
<h4><a id="ScrollViewTouchableOpacity_10"></a>ScrollView无法在TouchableOpacity组件内滑动</h4> 
<p>当ScrollView内的内容使用TouchableOpacity进行包裹时，可能会出现无法滑动的情况。解决方法是将onPress={() =&gt; {}}属性添加到TouchableOpacity组件上。</p> 
<pre><code class="prism language-jsx">&lt;TouchableOpacity onPress={() =&gt; {}}&gt;
  {/* Your content here */}
&lt;/TouchableOpacity&gt;
</code></pre> 
<h4><a id="RN_19"></a>RN热更新问题</h4> 
<p>使用codepush进行热更后，src目录下的音频文件在安卓系统中无法引用。解决方法是将文件放到原生系统中，热更的bundle文件无法打包音频文件。</p> 
<h4><a id="RN_22"></a>RN中获取高度的解决方法</h4> 
<pre><code class="prism language-javascript"><span class="token comment">// 屏幕高度（状态栏+安全区+下方虚拟按键操作区）</span>
Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height

<span class="token comment">// 窗口高度（状态栏+安全区）</span>
Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height
</code></pre> 
<h4><a id="RNUI_31"></a>RN强制横屏UI适配问题</h4> 
<p>通过Dimensions.get()获取到的宽、高并不是横屏后的宽高。解决方法是使用横屏下宽&gt;高的普遍规则进行页面适配。</p> 
<h4><a id="RN063iOS14_34"></a>低版本RN（0.63以下）适配iOS14图片无法显示问题</h4> 
<p>修改node_modules中react-native/Libraries/Image/RCTUIImageViewAnimates.m文件，添加以下内容：</p> 
<pre><code class="prism language-objective-c">if (_currentFrame) { //275行
  layer.contentsScale = self.animatedImageScale;
  layer.contents = (__bridge id)_currentFrame.CGImage;
} else { //加上这个 不然ios14以上的系统看不见图片
  [super displayLayer:layer];
}
</code></pre> 
<h4><a id="RN_46"></a>RN清理缓存</h4> 
<ol><li><code>watchman watch-del-all</code></li><li><code>rm -rf node_modules &amp;&amp; npm install</code></li><li><code>rm -rf /tmp/metro-bundler-cache-*</code> (npm start --reset-cache/react-native start --reset-cache)</li><li><code>rm -rf /tmp/haste-map-react-native-packager-*</code></li></ol> 
<h4><a id="RN_navigation_52"></a>RN navigation参数取值</h4> 
<pre><code class="prism language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span>state<span class="token punctuation">.</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="pod_install_npm_install_443_57"></a>pod install 或者npm install 443问题处理</h4> 
<ol><li> <p>添加行：</p> <pre><code>sudo vim /etc/hosts
</code></pre> <p>添加行：</p> <pre><code>199.232.68.133 raw.githubusercontent.com
140.82.113.3 github.com
</code></pre> </li><li> <p>清空git代理</p> <pre><code>git config --global --unset http.proxy
git config --global --unset https.proxy
git config --global --list
</code></pre> </li><li> <p>设置环境变量</p> <pre><code>env GIT_SSL_NO_VERIFY=true
</code></pre> </li></ol> 
<h3><a id="_85"></a>加固混淆</h3> 
<p>为了保护React Native应用程序不被攻击者攻击，我们需要进行代码混淆和加固操作。以下是一些常见的加固混淆方法：</p> 
<ul><li> <p>使用iPAGuard等工具进行IPA重签名<br> <img src="https://images2.imgbox.com/08/74/RZDvB3KS_o.png" alt="在这里插入图片描述"></p> </li><li> <p>使用iPAGuardr对JavaScript代码进行混淆，只要是ipa都可以，不限制OC，Swift，Flutter，React Native，H5类app。可对IOS ipa 文件的代码，代码库，资源文件等进行混淆保护。 可以根据设置对函数名、变量名、类名等关键代码进行重命名和混淆处理，降低代码的可读性，增加ipa破解反编译难度。可以对图片，资源，配置等进行修改名称，修改md5。<br> <img src="https://images2.imgbox.com/6d/09/s6SPh7Z2_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<p>以上是一些常见的加固混淆方法，我们可以根据实际情况选择合适的方法来加固我们的React Native应用程序。</p> 
<h3><a id="_98"></a>总结</h3> 
<p>本篇博客详细介绍了React Native的代码规范和加固方法。通过遵守代码规范，可以让我们编写的代码更加规范化、易于维护。而加固混淆可以保护我们的React Native应用程序不被攻击者攻击，提高应用的安全性。希望这篇博客能够对大家有所帮助。</p> 
<h3><a id="_102"></a>参考资料</h3> 
<ul><li><a href="https://reactnative.dev/docs/getting-started" rel="nofollow">React Native官方文档</a></li><li><a href="https://ipaguard.com/" rel="nofollow">ipaguard官方文档</a></li><li><a href="https://ipaguard.com/doc/hot/sign.html" rel="nofollow">ipaguard重签名与加固混淆文档</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5e24347c69f786a22e3e23f8fd2688c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络安全进阶试题——附答案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21e3aeb7a597ee1f7319b61abff205a5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">短视频解析单页源码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>