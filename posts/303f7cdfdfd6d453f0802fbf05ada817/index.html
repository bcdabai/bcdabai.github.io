<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu 20.04安装Docker及相关设置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu 20.04安装Docker及相关设置" />
<meta property="og:description" content="在配置和部署深度学习训练环境时，往往会遇到conda创建的虚拟环境不好用的情况，这时使用Docker就可以解决很多麻烦。
本篇遵循Docker官网的安装指导进行操作。
首先说明，Docker Engine和Docker Desktop是不同的，这里使用常用的Engine。
1、安装前的准备工作
（1）确保系统满足安装条件
（2）如果之前安装了旧版本，需要卸载。
（3）支持的存储驱动
2、安装方法
多数情况下，推荐使用创建Docker仓库，从仓库进行安装，这样安装以及升级都方便。还可以通过下载deb文件包，然后手动安装，以后也需要手动升级，没有网络的情况下可以使用该方法。使用便捷脚本进行安装。使用Ubuntu自身仓库安装，可能并不总是最新版本。 （1）第一次安装需要创建Docker仓库，然后从仓库安装和更新Docker。
更新apt 包索引，安装各种依赖包，从而允许apt通过HTTPS来使用仓库 sudo apt-get update sudo apt-get install ca-certificates curl gnupg lsb-release 添加Docker 官方GPG密钥 sudo mkdir -p /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg 使用以下命令来创建稳定仓库， echo &#34;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&#34; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null （2）安装Docker Engine
更新apt包索引，安装最新版本的Docker Engine，containerd，Docker Compose。安装指定版本，请见官网（此处省略）。 sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin 验证Docker已经正确安装完成，运行hello-world镜像。输出以下信息即说明安装OK。 sudo docker run hello-world Docker安装后自动运行，同时docker group也创建完成，但还没有用户被添加进去，现在需要用sudo运行docker命令。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/303f7cdfdfd6d453f0802fbf05ada817/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-22T14:55:46+08:00" />
<meta property="article:modified_time" content="2022-08-22T14:55:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu 20.04安装Docker及相关设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在配置和部署深度学习训练环境时，往往会遇到conda创建的虚拟环境不好用的情况，这时使用Docker就可以解决很多麻烦。</p> 
<p>本篇遵循Docker官网的安装指导进行操作。</p> 
<p>首先说明，Docker Engine和Docker Desktop是不同的，这里使用常用的Engine。</p> 
<p><strong>1、安装前的准备工作</strong></p> 
<p>（1）确保系统满足安装条件</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e0/44/g7drdeaR_o.png"></p> 
<p>（2）如果之前安装了旧版本，需要卸载。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e9/72/uBUMBOmu_o.png"></p> 
<p>（3）支持的存储驱动</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7a/80/n5lYphFr_o.png"></p> 
<p><strong>2、安装方法</strong></p> 
<ul><li>多数情况下，推荐使用创建Docker仓库，从仓库进行安装，这样安装以及升级都方便。</li><li>还可以通过下载deb文件包，然后手动安装，以后也需要手动升级，没有网络的情况下可以使用该方法。</li><li>使用便捷脚本进行安装。</li><li>使用Ubuntu自身仓库安装，可能并不总是最新版本。</li></ul> 
<p><strong> （1）第一次安装需要创建Docker仓库，然后从仓库安装和更新Docker。</strong></p> 
<ul><li>   更新apt 包索引，安装各种依赖包，从而允许apt通过HTTPS来使用仓库</li></ul> 
<pre><code class="language-bash">   sudo apt-get update
   sudo apt-get install ca-certificates curl gnupg lsb-release</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1e/50/HAchR10V_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/da/ee/6QytlgI2_o.png"></p> 
<ul><li> 添加Docker 官方GPG密钥</li></ul> 
<pre><code class="language-cpp">  sudo mkdir -p /etc/apt/keyrings
  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/95/51/IVaSDFP7_o.png"></p> 
<ul><li> 使用以下命令来创建稳定仓库，</li></ul> 
<pre><code class="language-bash">  echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1d/90/S6dGCFgO_o.png"></p> 
<p> <strong>（2）安装Docker Engine</strong></p> 
<ul><li>更新apt包索引，安装最新版本的Docker Engine，containerd，Docker Compose。安装指定版本，请见官网（此处省略）。</li></ul> 
<pre><code class="language-bash">  sudo apt-get update
  sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/8e/51/5AqVauDE_o.png"></p> 
<ul><li> 验证Docker已经正确安装完成，运行hello-world镜像。输出以下信息即说明安装OK。</li></ul> 
<pre><code class="language-bash">  sudo docker run hello-world </code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/5d/bd/MvNaGIDU_o.png"></p> 
<p>Docker安装后自动运行，同时docker group也创建完成，但还没有用户被添加进去，现在需要用sudo运行docker命令。</p> 
<p>查看已有镜像，</p> 
<pre><code class="language-bash">sudo docker images</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/18/39/xw0ICCeO_o.png"></p> 
<p>查看运行及停止的所有容器，</p> 
<pre><code class="language-bash">sudo docker ps -a</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/09/86/4SMrro6F_o.png"></p> 
<p>查看docker版本，</p> 
<pre><code class="language-bash">docker -v</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ce/c7/8IKEGlcX_o.png"></p> 
<p><strong>3、安装完成后的相关设置</strong></p> 
<p>（1）作为非root用户管理Docker</p> 
<p>Docker守护进程绑定在Unix socket上而不是TCP端口，默认情况下Unix socket由root所有，其他用户只能使用sudo来访问。如果不想每次都用sudo来运行docker命令，创建docker组，然后添加用户到组。</p> 
<ul><li>创建docker组</li></ul> 
<p>       sudo groupadd docker  </p> 
<ul><li> 添加用户到docker组</li></ul> 
<p>       sudo usermod -aG docker $USER </p> 
<ul><li>退出并再登陆以使组成员被刷新。在Linux上，也可以运行以下命令来使改变生效。</li></ul> 
<p>       newgrp docker  </p> 
<ul><li> 验证不带sudo来运行docker命令</li></ul> 
<p>        docker run hello-world   </p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7a/11/l9RZsqQE_o.png"></p> 
<p> 如果最初在添加用户到docker组之前运行了Docker的命令行命令，可能会报错，这说明你的  ～/.docker/  路径未用正确许可来创建。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/be/5e/JERFGeMF_o.png"></p> 
<p>要修复该问题，可以移除  ～/.docker/  路径（该路径会自动地重新创建，但任何自定义设定都会丢失），或者使用以下命令改变该路径的所有权和许可。</p> 
<pre>sudo chown "$USER":"$USER" /home/"$USER"/.docker -R
sudo chmod g+rwx "$HOME/.docker" -R</pre> 
<p></p> 
<p><em id="__mceDel">Enjoy it! </em></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a6316b416187bc5e7a79cab4340fa55/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Postman接口测试-rsa加密</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/595cecb48046a30547c07876b276248a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Target class [CommandMakeCommand] does not exist。问题解决。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>