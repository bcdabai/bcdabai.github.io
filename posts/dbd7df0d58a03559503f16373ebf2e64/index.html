<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python用django连接mysql_三分钟了解Django如何连接Mysql数据库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python用django连接mysql_三分钟了解Django如何连接Mysql数据库" />
<meta property="og:description" content="处理用户注册请求、Django连接MysqL数据库相关配置、数据库迁移命令：
my_Dproject/app01/views.py 在views函数文件中添加register函数，来处理用户注册的请求。
Tips:获取get请求数据的方式跟POST请求完全一样。
获取到用户注册信息，接下来需要连接数据库，拿到数据库的用户数据进行验证，注册的成功与否。
Django连接MySQL数据库的方法：
my_Dproject/my_Dproject/settings.py 继续回到settings配置文件中，来配置Django连接MySQL。
DATABASES = {
&#39;default&#39;: {
&#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,
&#39;NAME&#39;: &#39;my_Dproject&#39;,
&#39;HOST&#39;: &#39;127.0.0.1&#39;,
&#39;PORT&#39;: 3306,
&#39;USER&#39;: &#39;root&#39;,
&#39;PASSWORD&#39;: &#39;123&#39;,
}
}
还没完，接着需要去项目的init文件中添加相关信息，告诉Django用MySQL数据库连接数据库就行。
my_Dproject/my_Dproject/__Init__.py中添加下面信息：import pymysql
pymysql.install_as_MySQLdb()
(这里需要注意：__init__.py文件还在app01文件中有，也可以在app01中的init文件中添加，效果一样。)
配置添加Django中orm的models文件
重点：Django的orm不能自动帮我们创建数据库，但是可以自动帮我们创建表，同时一个Django项目就使用一个数据库。
my_Dproject/app01/models.py 中添加映射表的相关类。
这里我们需要用到用户数据表，所以创建一张User类来映射MySQL数据库中的user用户表。class User(models.Model):
id = models.AutoField(primary_key=True)
name = models.CharField(max_length=32)
password = models.CharField(max_length=16)
映射表的类创建完毕后，需要进行关键的2步【数据库迁移命令】操作，才能创建出user表：
第一步：将数据库变动记录记录到一个文件中：
在pycharm自带的Terminal命令行中输入：python3 manage.py makemigrations
第二步：将数据库变动同步到数据库中：python3 manage.py migrate
重点：
以后只要涉及到数据库的一丝变动(这里主要说的是表结构)，要想让变动生效一定要执行这2步数据库迁移(同步)命令！！！
这里提一个小点：我们在测试时候如果遇到下面这种情况：
解决办法是：在settings.py文件中注释掉一行代码：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dbd7df0d58a03559503f16373ebf2e64/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-19T07:37:42+08:00" />
<meta property="article:modified_time" content="2021-01-19T07:37:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python用django连接mysql_三分钟了解Django如何连接Mysql数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p align="center"><img src="https://images2.imgbox.com/04/06/nysUAiCP_o.png" alt="9ab40e9392e20b627a126f23391d8557.png"></p> 
 <p>处理用户注册请求、Django连接MysqL数据库相关配置、数据库迁移命令：</p> 
 <p>my_Dproject/app01/views.py    在views函数文件中添加register函数，来处理用户注册的请求。</p> 
 <p align="center"><img src="https://images2.imgbox.com/42/63/ztkv22Of_o.png" alt="3b137d7582908a2050c8f0df28927896.png"></p> 
 <p>Tips:获取get请求数据的方式跟POST请求完全一样。</p> 
 <p>获取到用户注册信息，接下来需要连接数据库，拿到数据库的用户数据进行验证，注册的成功与否。</p> 
 <p>Django连接MySQL数据库的方法：</p> 
 <p>my_Dproject/my_Dproject/settings.py    继续回到settings配置文件中，来配置Django连接MySQL。</p> 
 <p align="center"><img src="https://images2.imgbox.com/b4/f3/wIQT2h7q_o.png" alt="67e81725e6b7faf517654ced4cb3efbb.png">DATABASES = {<!-- --></p> 
 <p>'default': {<!-- --></p> 
 <p>'ENGINE': 'django.db.backends.mysql',</p> 
 <p>'NAME': 'my_Dproject',</p> 
 <p>'HOST': '127.0.0.1',</p> 
 <p>'PORT': 3306,</p> 
 <p>'USER': 'root',</p> 
 <p>'PASSWORD': '123',</p> 
 <p>}</p> 
 <p>}</p> 
 <p align="center"><img src="https://images2.imgbox.com/aa/78/VBveTOfY_o.png" alt="2e37743325237efbe252c29ecd6efb8a.png"></p> 
 <p>还没完，接着需要去项目的init文件中添加相关信息，告诉Django用MySQL数据库连接数据库就行。</p> 
 <p>my_Dproject/my_Dproject/__Init__.py中添加下面信息：import pymysql</p> 
 <p>pymysql.install_as_MySQLdb()</p> 
 <p>(这里需要注意：__init__.py文件还在app01文件中有，也可以在app01中的init文件中添加，效果一样。)</p> 
 <p>配置添加Django中orm的models文件</p> 
 <p>重点：Django的orm不能自动帮我们创建数据库，但是可以自动帮我们创建表，同时一个Django项目就使用一个数据库。</p> 
 <p>my_Dproject/app01/models.py  中添加映射表的相关类。</p> 
 <p>这里我们需要用到用户数据表，所以创建一张User类来映射MySQL数据库中的user用户表。class User(models.Model):</p> 
 <p>id = models.AutoField(primary_key=True)</p> 
 <p>name = models.CharField(max_length=32)</p> 
 <p>password = models.CharField(max_length=16)</p> 
 <p align="center"><img src="https://images2.imgbox.com/9f/ec/V3YekTc9_o.png" alt="2baa1f1c0f25e27e3d1b05019e27fd83.png"></p> 
 <p>映射表的类创建完毕后，需要进行关键的2步【数据库迁移命令】操作，才能创建出user表：</p> 
 <p>第一步：将数据库变动记录记录到一个文件中：</p> 
 <p>在pycharm自带的Terminal命令行中输入：python3 manage.py makemigrations</p> 
 <p>第二步：将数据库变动同步到数据库中：python3 manage.py migrate</p> 
 <p align="center"><img src="https://images2.imgbox.com/83/81/YEhppJTQ_o.png" alt="9a53b5e5f620ba250235d47951191cc0.png"></p> 
 <p align="center"><img src="https://images2.imgbox.com/9e/d4/iICb7WAd_o.png" alt="3641cae43b3b61081e984323bde961f2.png"></p> 
 <p>重点：</p> 
 <p>以后只要涉及到数据库的一丝变动(这里主要说的是表结构)，要想让变动生效一定要执行这2步数据库迁移(同步)命令！！！</p> 
 <p>这里提一个小点：我们在测试时候如果遇到下面这种情况：</p> 
 <p align="center"><img src="https://images2.imgbox.com/0a/3c/08JSrwaG_o.png" alt="2b3b6eb81c1cdac4124bbe4a486833d5.png"></p> 
 <p>解决办法是：在settings.py文件中注释掉一行代码：</p> 
 <p align="center"><img src="https://images2.imgbox.com/e8/e3/88bYrzMM_o.png" alt="f62b5d109a43a8a5ae17095da8686646.png"></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1882a2944b6dc7bbf1fbdeb6d52c78e3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql 无法启动 查看原因_mysql5.7无法启动原因排查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d2a27c9b01eb98fb2f464385f1a4fb44/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux mysql主从搭建_Linux搭建MySQL主从</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>