<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Window10安装Linux子系统（Ubuntu20.04） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Window10安装Linux子系统（Ubuntu20.04）" />
<meta property="og:description" content="在工作中需要用到Ubuntu系统作为支撑系统来编译QT程序和ARM开发板上用的程序，一直以来都是用VMware Workstation虚拟机运行Ubuntu。VMware Workstation这玩意儿耗内存相当厉害，一般的机器正常情况没事，一旦打开VMware Workstation这个软件，那是卡得会让人抓狂。后来微软终于拥抱了Linux，得以摆脱VMware Workstation直接在Windows下面运行Ubuntu，更重要的是，不再需要以启动双系统的方式即可在Windows系统里面直接运行Ubuntu系统，省时省力省开销。这不得不让我们这些需要和Linux接触的人有些小惊喜。
Windows Subsystem for Linux（简称WSL）是一个在Windows 10和Windows 11上能够运行原生Linux二进制可执行文件（ELF格式）的兼容层。它是由微软与Canonical公司合作开发，其目标是使纯正的Ubuntu、Debian等映像能下载和解压到用户的本地计算机，映像内的实用工具能在此子系统上原生运行。适用于 Linux 的 Windows 子系统可让开发人员按原样运行 GNU/Linux 环境 - 包括大多数命令行工具、实用工具和应用程序 - 且不会产生传统虚拟机或双启动设置开销。
子系统这个功能已经在最新版的Windows 10中自带，如果你的Windows10比较老旧，需要先升级至最新版Windows 10，确保Windows10系统版本高于1606。Win &#43; i 组合键打开系统设置，然后打开Windos系统更新，可以检查更新、升级和查看自己的系统版本号，如图：
在Windows10系统里安装Linux Ubuntu的步骤如下：
一、通过“Windows功能”开启子系统 依次打开控制面板 &gt; 程序和功能 &gt; 启用或关闭Windows功能
勾选“适应于 Linux 的 Windows 子系统”，确定
在确定之后，Windows系统会自动安装一些所需的文件，完成后会提示你重启后才会生效，选择“立即重新启动”。 二、安装Linux Ubuntu20作为Windows10子系统 完成上一步的操作并且重新启动之后，通过左下角的放大镜搜索应用商店。
打开Microsoft Store，搜索Ubuntu，会出来一些结果，点击需要的版本（根据自己需要选择要安装的Ubuntu版本），出现安装按钮，最后点击安装按钮，应用商店会自动下载，安装。安装完成会出现打开按钮。
点击“打开”按钮，Windows终端会弹出，首次安装需要等待几分钟。
安装完成后，需要输入用户名和密码，用户名和密码自行设置即可。
至此，Windows子系统的安装就已经完成了。默认的Linux子系统不具备图形桌面，全命令行运行模式。
三、关于WSL1和WSL2 需要注意的是，如果你需要用到串口通讯，WSL1的串口是与Windows共用的，只是叫法与写法不一样，比如Windows下面的串口是COM1，对应的Linux Ubuntu系统则是/dev/ttyS0。如果因为某些原因您需要升级到WSL2，你会发现Ubuntu的串口通讯与Windows串口不能共用了。所以升级需谨慎。
关于WSL1和WSL2的比较，可参考微软官方文档
查看本机安装的Windows子系统，可以在Windows终端（Windows PowerShell）使用命令：
wsl --status或者：wsl -l -v 都可以
我使用了一段时间，发现WSL1和WSL2两个版本都有一些不尽如人意的地方，有时候不得不需要在WSL版本之间切换的才能达到自己的目的，在Windows终端（Windows PowerShell）使用命令：
wsl --set-version Ubuntu-20.04 2 或者
wsl --set-version Ubuntu-20." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/45d8013b0e615bffdeb62c4bc21302d2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-30T20:15:04+08:00" />
<meta property="article:modified_time" content="2022-10-30T20:15:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Window10安装Linux子系统（Ubuntu20.04）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在工作中需要用到Ubuntu系统作为支撑系统来编译QT程序和ARM开发板上用的程序，一直以来都是用VMware Workstation虚拟机运行Ubuntu。VMware Workstation这玩意儿耗内存相当厉害，一般的机器正常情况没事，一旦打开VMware Workstation这个软件，那是卡得会让人抓狂。后来微软终于拥抱了Linux，得以摆脱VMware Workstation直接在Windows下面运行Ubuntu，更重要的是，不再需要以启动双系统的方式即可在Windows系统里面直接运行Ubuntu系统，省时省力省开销。这不得不让我们这些需要和Linux接触的人有些小惊喜。</p> 
<p>Windows Subsystem for Linux（简称WSL）是一个在Windows 10和Windows 11上能够运行原生Linux二进制可执行文件（ELF格式）的兼容层。它是由微软与Canonical公司合作开发，其目标是使纯正的Ubuntu、Debian等映像能下载和解压到用户的本地计算机，映像内的实用工具能在此子系统上原生运行。适用于 Linux 的 Windows 子系统可让开发人员按原样运行 GNU/Linux 环境 - 包括大多数命令行工具、实用工具和应用程序 - 且不会产生传统虚拟机或双启动设置开销。</p> 
<p>子系统这个功能已经在最新版的Windows 10中自带，如果你的Windows10比较老旧，需要先升级至最新版Windows 10，确保Windows10系统版本高于1606。Win + i 组合键打开<strong>系统设置</strong>，然后打开<strong>Windos系统更新</strong>，可以检查更新、升级和查看自己的系统版本号，如图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1b/56/eZcruynA_o.jpg"></p> 
<p> 在Windows10系统里安装Linux Ubuntu的步骤如下：</p> 
<h3>一、通过“Windows功能”开启子系统</h3> 
<p>依次打开控制面板 &gt; 程序和功能 &gt; 启用或关闭Windows功能</p> 
<p>勾选“适应于 Linux 的 Windows 子系统”，确定</p> 
<p><img alt="" height="399" src="https://images2.imgbox.com/cd/03/rEzkRGDf_o.png" width="872"> </p> 
<p>在确定之后，Windows系统会自动安装一些所需的文件，完成后会提示你重启后才会生效，选择“立即重新启动”。 </p> 
<h3>二、安装Linux Ubuntu20作为Windows10子系统 </h3> 
<p> 完成上一步的操作并且重新启动之后，通过左下角的放大镜搜索应用商店。</p> 
<p><img alt="" height="802" src="https://images2.imgbox.com/5f/c0/hsIcerZL_o.png" width="258"></p> 
<p> 打开Microsoft Store，搜索Ubuntu，会出来一些结果，点击需要的版本（根据自己需要选择要安装的Ubuntu版本），出现安装按钮，最后点击安装按钮，应用商店会自动下载，安装。安装完成会出现打开按钮。</p> 
<p><img alt="" height="653" src="https://images2.imgbox.com/16/cb/6fWX18kw_o.png" width="1170"></p> 
<p>点击“打开”按钮，Windows终端会弹出，首次安装需要等待几分钟。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4f/73/kJg5j7Mc_o.jpg"> </p> 
<p>安装完成后，需要输入用户名和密码，用户名和密码自行设置即可。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/62/50/htNv2HkP_o.jpg"></p> 
<p> </p> 
<p>至此，Windows子系统的安装就已经完成了。默认的Linux子系统不具备图形桌面，全命令行运行模式。</p> 
<h3>三、关于WSL1和WSL2</h3> 
<p> </p> 
<p>需要注意的是，如果你需要用到串口通讯，WSL1的串口是与Windows共用的，只是叫法与写法不一样，比如Windows下面的串口是COM1，对应的Linux Ubuntu系统则是/dev/ttyS0。如果因为某些原因您需要升级到WSL2，你会发现Ubuntu的串口通讯与Windows串口不能共用了。所以升级需谨慎。</p> 
<p>关于WSL1和WSL2的比较，可参考<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/wsl/compare-versions" rel="nofollow" title="微软官方文档">微软官方文档</a></p> 
<p>查看本机安装的Windows子系统，可以在Windows终端（Windows PowerShell）使用命令：</p> 
<p><strong>wsl --status</strong>或者：<strong>wsl -l -v </strong>都可以</p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/96/e1/qWqSOLcB_o.png" width="496"></p> 
<p>我使用了一段时间，发现WSL1和WSL2两个版本都有一些不尽如人意的地方，有时候不得不需要在WSL版本之间切换的才能达到自己的目的，在Windows终端（Windows PowerShell）使用命令：</p> 
<pre><code class="language-cpp">wsl --set-version Ubuntu-20.04 2</code></pre> 
<p>或者</p> 
<pre><code class="language-cpp">wsl --set-version Ubuntu-20.04 1</code></pre> 
<p>在WSL2和WSL1之间切换。比较痛苦的是，这种切换是需要一段时间的，我等过最久的是30分钟左右。所以后来想了一办法，我在Windows中安装了两个Linux子系统，一个Ubuntu20，使用WSL2；一个是Ubuntu18，使用WSL1。根据自己不同的需要决定使用哪个子系统，必要的时候两个同时打开，同时打开两个子系统，比一个子系统在两个WSL版本之间切换可省事太多了。</p> 
<h3> 四、安装和配置SSH</h3> 
<p> 默认情况下，Windows子系统已经安装SSH，但不好用。先卸载再安装，打开Ubuntu子系统，输入命令：</p> 
<pre><code class="language-cpp">sudo apt-get remove openssh-server

sudo apt-get install openssh-server</code></pre> 
<p>配置ssh：（注意同级目录下可能有ssh_config，不要搞错）</p> 
<pre><code class="language-cpp">sudo vim /etc/ssh/sshd_config</code></pre> 
<p> </p> 
<p>我修改了3处：</p> 
<p>● Port 22</p> 
<p>● PasswordAuthentication yes</p> 
<p>● PermitRootLogin yes</p> 
<p><img alt="" height="579" src="https://images2.imgbox.com/25/ff/m7XV5gnz_o.png" width="630"></p> 
<p> <img alt="" height="211" src="https://images2.imgbox.com/c9/a5/1Z0JWU1S_o.png" width="765"></p> 
<p>ssh配置完成之后，使用ssh客户端可成功连接到ubuntu子系统：</p> 
<p><img alt="" height="495" src="https://images2.imgbox.com/03/94/1FwBwvJF_o.png" width="757"></p> 
<p></p> 
<p>全文完</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3de1d00ec18b3969c9c0bad948c53d02/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python系列tkinter之pack布局、place布局和grid布局</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/26a14634315d3b710a7205b178b31d76/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">typescript number 转 string（转）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>