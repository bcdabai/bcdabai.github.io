<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Go的学习日记 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Go的学习日记" />
<meta property="og:description" content="1. 下载安装go 下载地址
2. 正常的打印 主函数的包名必须是main。。。
package main import &#34;fmt&#34; fuc main(){//go中{不可以单独一行，c&#43;&#43;的同学注意了 fmt.print(&#34;hello world&#34;)//伟大的开始 } 3. 声明定义一个变量 go不存在声明却未使用的变量
也就是说，单独写这么一句，你会发现他报错了
var a int = 1 你必须使用这个变量，哪怕只是打印一下，来解决报错。（令我非常吃惊）
差点忘了说了，全局变量无视此规则…
定义变量的几种方法，这里还需要特殊说明一下，Go没有char类型！！！
var a int = 1 var b,c int =2,3 d,e := 4,5//自动推断数据类型贼赞 //这里还需要补充一下，:是初始化声明，也就是说在下面 e:=4//报错 e=4//没问题 4. 常量Const，iota const不想多说，主要是iota这个特殊常量，会在const关键字出现时被重置为0（内部），每新增一行计数器加一
有趣的写法
const( a = iota//0 b = iota//1 c = iota//2 ) const( a = 1&lt;&lt;iota//1 b = 3&lt;&lt;iota//6 ) 这里还要说明一下&lt;&lt;左移指令，1左移0位，依旧是1。3的二进制11左移一位变为110，即6。
注：&lt;&lt;n==*(2^N)
5. 条件 写法需要注意的是条件判断没有括号" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/51e3df7d01e75dd28c0316eb7a50079a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-19T17:24:26+08:00" />
<meta property="article:modified_time" content="2020-02-19T17:24:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Go的学习日记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="1_go_2"></a>1. 下载安装go</h4> 
<p><a href="https://golang.org/dl/%E3%80%82" rel="nofollow">下载地址</a></p> 
<h4><a id="2__6"></a>2. 正常的打印</h4> 
<p>主函数的包名必须是main。。。</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">"fmt"</span>

fuc <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//go中{不可以单独一行，c++的同学注意了</span>
   fmt<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token comment">//伟大的开始</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="3__19"></a>3. 声明定义一个变量</h4> 
<p>go不存在声明却未使用的变量</p> 
<p>也就是说，单独写这么一句，你会发现他报错了</p> 
<pre><code class="prism language-go"><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> 
<p>你必须使用这个变量，哪怕只是打印一下，来解决报错。（令我非常吃惊）</p> 
<p>差点忘了说了，全局变量无视此规则…</p> 
<p>定义变量的几种方法，这里还需要特殊说明一下，Go没有char类型！！！</p> 
<pre><code class="prism language-go"><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">var</span> b<span class="token punctuation">,</span>c <span class="token builtin">int</span> <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span>
d<span class="token punctuation">,</span>e <span class="token operator">:=</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token comment">//自动推断数据类型贼赞</span>
<span class="token comment">//这里还需要补充一下，:是初始化声明，也就是说在下面</span>
e<span class="token operator">:=</span><span class="token number">4</span><span class="token comment">//报错</span>
e<span class="token operator">=</span><span class="token number">4</span><span class="token comment">//没问题</span>
</code></pre> 
<h4><a id="4_Constiota_44"></a>4. 常量Const，iota</h4> 
<p>const不想多说，主要是iota这个特殊常量，会在const关键字出现时被重置为0（内部），每新增一行计数器加一</p> 
<p>有趣的写法</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span><span class="token punctuation">(</span>
	a <span class="token operator">=</span> <span class="token boolean">iota</span><span class="token comment">//0</span>
    b <span class="token operator">=</span> <span class="token boolean">iota</span><span class="token comment">//1</span>
    c <span class="token operator">=</span> <span class="token boolean">iota</span><span class="token comment">//2</span>
<span class="token punctuation">)</span>
<span class="token keyword">const</span><span class="token punctuation">(</span>
	a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token boolean">iota</span><span class="token comment">//1</span>
    b <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token boolean">iota</span><span class="token comment">//6</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>这里还要说明一下&lt;&lt;左移指令，1左移0位，依旧是1。3的二进制11左移一位变为110，即6。</p> 
<p>注：&lt;&lt;n==*(2^N)</p> 
<h4><a id="5__66"></a>5. 条件</h4> 
<p>写法需要注意的是条件判断没有括号</p> 
<pre><code class="prism language-go"><span class="token keyword">if</span> a <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="6__78"></a>6. 分支</h4> 
<p>写法</p> 
<pre><code class="prism language-go"><span class="token keyword">switch</span> a<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> v1<span class="token punctuation">:</span>
    <span class="token operator">...</span>
    <span class="token keyword">case</span> v2<span class="token punctuation">:</span>
    <span class="token operator">...</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="7__93"></a>7. 循环</h4> 
<p>只有for一种写法真心挺好的，它涵盖了所有的用法</p> 
<pre><code class="prism language-go"><span class="token comment">//类c</span>
<span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token comment">//类while</span>
<span class="token keyword">for</span> condition<span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token comment">//无脑死循环</span>
<span class="token keyword">for</span><span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="8__112"></a>8. 函数</h4> 
<p>写法</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">name</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2 类型<span class="token punctuation">)</span> 返回类型<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> 
<span class="token punctuation">}</span> 
<span class="token comment">//Go可以返回多个值</span>
fuc <span class="token function">name</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> v1<span class="token punctuation">,</span>v2
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="9__126"></a>9. 数组</h4> 
<p>声明与初始化</p> 
<pre><code class="prism language-go"><span class="token comment">//定义</span>
<span class="token keyword">var</span> a <span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token keyword">type</span>
<span class="token comment">//初始化，这里可以不用规定数组大小</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span>
</code></pre> 
<h4><a id="10__137"></a>10. 指针</h4> 
<p>这个没什么好说的，但是记录一下</p> 
<pre><code class="prism language-go"><span class="token keyword">var</span> p <span class="token operator">*</span><span class="token builtin">int</span>
a <span class="token operator">:=</span> <span class="token number">1</span>
p <span class="token operator">=</span> <span class="token operator">&amp;</span>a
fmt<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">,</span>p<span class="token punctuation">,</span><span class="token operator">&amp;</span>p<span class="token punctuation">)</span>
<span class="token comment">//输出</span>
<span class="token number">1</span><span class="token punctuation">,</span>a地址，p地址
</code></pre> 
<h4><a id="11__150"></a>11. 结构体</h4> 
<p>与c相似没什么好说的，就是不太明白为啥Go不面向对象</p> 
<pre><code class="prism language-go"><span class="token keyword">type</span> Books <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
   title <span class="token builtin">string</span>
   author <span class="token builtin">string</span>
   subject <span class="token builtin">string</span>
   book_id <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">var</span> Book1 Books        <span class="token comment">/* 声明 Book1 为 Books 类型 */</span>
   <span class="token keyword">var</span> Book2 Books        <span class="token comment">/* 声明 Book2 为 Books 类型 */</span>

   <span class="token comment">/* book 1 描述 */</span>
   Book1<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"Go 语言"</span>
   Book1<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token string">"asd"</span>
   Book1<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token string">"Go 语言教程"</span>
   Book1<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495407</span>

   <span class="token comment">/* book 2 描述 */</span>
   Book2<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"Python 教程"</span>
   Book2<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token string">"asd"</span>
   Book2<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token string">"Python 语言教程"</span>
   Book2<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495700</span>

   <span class="token comment">/* 打印 Book1 信息 */</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 1 title : %s\n"</span><span class="token punctuation">,</span> Book1<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 1 author : %s\n"</span><span class="token punctuation">,</span> Book1<span class="token punctuation">.</span>author<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 1 subject : %s\n"</span><span class="token punctuation">,</span> Book1<span class="token punctuation">.</span>subject<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 1 book_id : %d\n"</span><span class="token punctuation">,</span> Book1<span class="token punctuation">.</span>book_id<span class="token punctuation">)</span>

   <span class="token comment">/* 打印 Book2 信息 */</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 2 title : %s\n"</span><span class="token punctuation">,</span> Book2<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 2 author : %s\n"</span><span class="token punctuation">,</span> Book2<span class="token punctuation">.</span>author<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 2 subject : %s\n"</span><span class="token punctuation">,</span> Book2<span class="token punctuation">.</span>subject<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span> <span class="token string">"Book 2 book_id : %d\n"</span><span class="token punctuation">,</span> Book2<span class="token punctuation">.</span>book_id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="12__192"></a>12. 迭代</h4> 
<p>通过range</p> 
<pre><code class="prism language-go">nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
	sum <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token comment">//迭代数组</span>
	<span class="token keyword">for</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{<!-- --></span>
		sum <span class="token operator">+=</span> num
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"sum:"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>
	<span class="token comment">//迭代map</span>
	kvs <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{<!-- --></span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">:</span> <span class="token string">"banana"</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> kvs <span class="token punctuation">{<!-- --></span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s -&gt; %s\n"</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="13_make_211"></a>13. make</h4> 
<p>这个方法需要单独拿出来说</p> 
<pre><code class="prism language-go"><span class="token builtin">make</span>（类型，size，长度）
<span class="token comment">//规定目前长度是1,最大长度是1，后面的参数可以不写</span>
a <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">//定义map的主要方式，不通过make定义的map为一个空map，经测试，无法插入元素</span>
b <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token comment">//可以直接这么插入，可扩容</span>
b<span class="token punctuation">[</span><span class="token string">"abc"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"bca"</span>
<span class="token comment">//定义长度是1，所以只能操作一个元素，后面的元素可以通过append增加，无视规定的最大长度</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="14__228"></a>14. 类型转换</h4> 
<pre><code class="prism language-go"><span class="token keyword">var</span> sum <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">17</span>
<span class="token keyword">var</span> count <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">var</span> mean <span class="token builtin">float32</span>   
mean <span class="token operator">=</span> <span class="token function">float32</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">float32</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"mean 的值为: %f\n"</span><span class="token punctuation">,</span>mean<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="15__238"></a>15. 接口</h4> 
<p>不得不说，从Java过来看这块真的是有够痛苦，不过多看几遍吧</p> 
<pre><code class="prism language-go"><span class="token keyword">type</span> Phone <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> NokiaPhone <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>nokiaPhone NokiaPhone<span class="token punctuation">)</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"I am Nokia, I can call you!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> IPhone <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>iPhone IPhone<span class="token punctuation">)</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"I am iPhone, I can call you!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> phone Phone

    phone <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>NokiaPhone<span class="token punctuation">)</span>
    phone<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    phone <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>IPhone<span class="token punctuation">)</span>
    phone<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="16__273"></a>16. 并发</h4> 
<p>go开启一个线程真的好简单</p> 
<pre><code class="prism language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>
        <span class="token string">"fmt"</span>
        <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">say</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
                time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>
                fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">go</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span>
        <span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>channel这个东西过分强大</p> 
<pre><code class="prism language-go">ch <span class="token operator">&lt;-</span> v    <span class="token comment">// 把 v 发送到通道 ch</span>
v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch  <span class="token comment">// 从 ch 接收数据</span>
           <span class="token comment">// 并把值赋给 v</span>
<span class="token comment">//通道的声明方式</span>
ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre> 
<p>实例</p> 
<pre><code class="prism language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> c <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        sum <span class="token operator">:=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{<!-- --></span>
                sum <span class="token operator">+=</span> v
        <span class="token punctuation">}</span>
        c <span class="token operator">&lt;-</span> sum <span class="token comment">// 把 sum 发送到通道 c</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{<!-- --></span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>

        c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
        <span class="token keyword">go</span> <span class="token function">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span>
        <span class="token keyword">go</span> <span class="token function">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span>
        x<span class="token punctuation">,</span> y <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c<span class="token punctuation">,</span> <span class="token operator">&lt;-</span>c <span class="token comment">// 从通道 c 中接收</span>

        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x<span class="token operator">+</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>go为channel设置了缓冲区</p> 
<p>通过make的第二个参数可以设置缓冲区的大小</p> 
<pre><code class="prism language-go">ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> 
<p>带缓冲区的通道允许发送端的数据发送和接收端的数据获取处于异步状态，就是说发送端发送的数据可以放在缓冲区里面，可以等待接收端去获取数据，而不是立刻需要接收端去获取数据。</p> 
<p>不过由于缓冲区的大小是有限的，所以还是必须有接收端来接收数据的，否则缓冲区一满，数据发送端就无法再发送数据了。</p> 
<p><strong>注意</strong>：如果通道不带缓冲，发送方会阻塞直到接收方从通道中接收了值。如果通道带缓冲，发送方则会阻塞直到发送的值被拷贝到缓冲区内；如果缓冲区已满，则意味着需要等待直到某个接收方获取到一个值。接收方在有值可以接收之前会一直阻塞。</p> 
<p>没有缓冲的缺点</p> 
<p>如果只有读端，没有写端，那么 “读端”阻塞。<br> 如果只有写端，没有读端，那么 “写端”阻塞。</p> 
<p>实例</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 这里我们定义了一个可以存储整数类型的带缓冲通道</span>
        <span class="token comment">// 缓冲区大小为2</span>
        ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

        <span class="token comment">// 因为 ch 是带缓冲的通道，我们可以同时发送两个数据</span>
        <span class="token comment">// 而不用立刻需要去同步读取数据</span>
        ch <span class="token operator">&lt;-</span> <span class="token number">1</span>
        ch <span class="token operator">&lt;-</span> <span class="token number">2</span>

        <span class="token comment">// 获取这两个数据</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>遍历和关闭channel</p> 
<pre><code class="prism language-go"><span class="token function">close</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token comment">//关闭通道</span>
<span class="token comment">//遍历通道</span>
<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> c<span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/90ef10a9a2670cbf51b67a9d453a5ca2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Modbus TCP的研究学习(一)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2c504dffc49edc5f87b4ff8ce893db17/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序网络请求出现的错误（持续更新）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>