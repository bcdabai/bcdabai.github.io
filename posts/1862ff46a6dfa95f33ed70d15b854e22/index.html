<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VLAN 实验 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VLAN 实验" />
<meta property="og:description" content="设置子接口与物理接口 [R1]interface g0/0/0.1 [R1-GigabitEthernet0/0/0.1]ip add 192.168.1.1 24 [R1-GigabitEthernet0/0/0.1]dot1q termination vid 2 #配置封装标准，从此接口进出时要封装vlan id [R1-GigabitEthernet0/0/0.1]arp broadcast enable #开启子接口的arp广播功能 [R1]inter g0/0/0 [R1-GigabitEthernet0/0/0]ip add 192.168.2.1 24 配置DHCP服务 [R1]dhcp enable [R1]ip pool a [R1-ip-pool-a]network 192.168.1.0 mask 24 [R1-ip-pool-a]gateway-list 192.168.1.1 [R1]ip pool b [R1-ip-pool-a]network 192.168.2.0 mask 24 [R1-ip-pool-a]gateway-list 192.168.2.1 [R1-GigabitEthernet0/0/0.1]dhcp select global [R1-GigabitEthernet0/0/0]dhcp select global 创建所需的vlan [SW1]vlan batch 2 to 6 [SW2]vlan batch 2 to 6 设置access接口 [SW1]inter g0/0/3 [SW1-GigabitEthernet0/0/3]port link-type access [SW1-GigabitEthernet0/0/3]port default vlan 2 [SW1]inter g0/0/2 [SW1-GigabitEthernet0/0/2]port link-type access [SW1-GigabitEthernet0/0/2]port default vlan 2 设置trunk干道 [SW1-GigabitEthernet0/0/6]port link-type trunk [SW1-GigabitEthernet0/0/6]port trunk allow-pass vlan 3 5 to 6 [SW2-GigabitEthernet0/0/1]port link-type trunk [SW2-GigabitEthernet0/0/1]port trunk allow-pass vlan 3 5 to 6 设置PC2\4\5\6的接入口 [SW1-GigabitEthernet0/0/4]port hybrid pvid vlan 3 [SW1-GigabitEthernet0/0/4]port hybrid untagged vlan 1 to 6 [SW1-GigabitEthernet0/0/5]port hybrid pvid vlan 4 [SW1-GigabitEthernet0/0/5]port hybrid untagged vlan 1 to 6 PC5除了不能被vlan4的PC4访问 [SW2-GigabitEthernet0/0/2]port hybrid untagged vlan 1 to 3 5 to 6 PC6不能被vlan4的PC4和vlan5的PC5访问 [SW2-GigabitEthernet0/0/3]port hybrid untagged vlan 1 to 3 6 设置SW1到R1的出接口 [SW1-GigabitEthernet0/0/1]port hybrid untagged vlan 1 3 to 6 [SW1-GigabitEthernet0/0/1]port hybrid tagged vlan 2 验证 PC2能ping通PC4\5\6 PC&gt;ping 192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1862ff46a6dfa95f33ed70d15b854e22/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-19T17:57:25+08:00" />
<meta property="article:modified_time" content="2023-08-19T17:57:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VLAN 实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/81/9d/FH2LlV5D_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_1"></a>设置子接口与物理接口</h2> 
<pre><code>[R1]interface g0/0/0.1
[R1-GigabitEthernet0/0/0.1]ip add 192.168.1.1 24
[R1-GigabitEthernet0/0/0.1]dot1q termination vid 2 #配置封装标准，从此接口进出时要封装vlan id
[R1-GigabitEthernet0/0/0.1]arp broadcast enable #开启子接口的arp广播功能
 
[R1]inter g0/0/0
[R1-GigabitEthernet0/0/0]ip add 192.168.2.1 24
</code></pre> 
<h2><a id="DHCP_12"></a>配置DHCP服务</h2> 
<pre><code>[R1]dhcp enable 
[R1]ip pool a
[R1-ip-pool-a]network 192.168.1.0 mask 24
[R1-ip-pool-a]gateway-list 192.168.1.1
[R1]ip pool b
[R1-ip-pool-a]network 192.168.2.0 mask 24
[R1-ip-pool-a]gateway-list 192.168.2.1
 
 [R1-GigabitEthernet0/0/0.1]dhcp select global
[R1-GigabitEthernet0/0/0]dhcp select global
</code></pre> 
<h2><a id="vlan_25"></a>创建所需的vlan</h2> 
<pre><code>[SW1]vlan batch 2 to 6
[SW2]vlan batch 2 to 6
</code></pre> 
<h2><a id="access_30"></a>设置access接口</h2> 
<pre><code>[SW1]inter g0/0/3
[SW1-GigabitEthernet0/0/3]port link-type access
[SW1-GigabitEthernet0/0/3]port default vlan 2
[SW1]inter g0/0/2
[SW1-GigabitEthernet0/0/2]port link-type access
[SW1-GigabitEthernet0/0/2]port default vlan 2
</code></pre> 
<h2><a id="trunk_39"></a>设置trunk干道</h2> 
<pre><code>[SW1-GigabitEthernet0/0/6]port link-type trunk
[SW1-GigabitEthernet0/0/6]port trunk allow-pass vlan 3 5 to 6
 
[SW2-GigabitEthernet0/0/1]port link-type trunk 
[SW2-GigabitEthernet0/0/1]port trunk allow-pass vlan 3 5 to 6
</code></pre> 
<h2><a id="PC2456_47"></a>设置PC2\4\5\6的接入口</h2> 
<pre><code>[SW1-GigabitEthernet0/0/4]port hybrid pvid vlan 3
[SW1-GigabitEthernet0/0/4]port hybrid untagged vlan 1 to 6
 
[SW1-GigabitEthernet0/0/5]port hybrid pvid vlan 4
[SW1-GigabitEthernet0/0/5]port hybrid untagged vlan 1 to 6

PC5除了不能被vlan4的PC4访问
[SW2-GigabitEthernet0/0/2]port hybrid untagged vlan 1 to 3 5 to 6

PC6不能被vlan4的PC4和vlan5的PC5访问
[SW2-GigabitEthernet0/0/3]port hybrid untagged vlan 1 to 3 6


</code></pre> 
<h2><a id="SW1R1_63"></a>设置SW1到R1的出接口</h2> 
<pre><code>[SW1-GigabitEthernet0/0/1]port hybrid untagged vlan 1 3 to 6
[SW1-GigabitEthernet0/0/1]port hybrid tagged vlan 2
</code></pre> 
<h2><a id="_68"></a>验证</h2> 
<h3><a id="PC2pingPC456_69"></a>PC2能ping通PC4\5\6</h3> 
<pre><code>PC&gt;ping 192.168.2.253
 
Ping 192.168.2.253: 32 data bytes, Press Ctrl_C to break
From 192.168.2.253: bytes=32 seq=1 ttl=128 time=47 ms
From 192.168.2.253: bytes=32 seq=2 ttl=128 time=31 ms
From 192.168.2.253: bytes=32 seq=3 ttl=128 time=32 ms
From 192.168.2.253: bytes=32 seq=4 ttl=128 time=31 ms
From 192.168.2.253: bytes=32 seq=5 ttl=128 time=31 ms
 
--- 192.168.2.253 ping statistics ---
  5 packet(s) transmitted
  5 packet(s) received
  0.00% packet loss
  round-trip min/avg/max = 31/34/47 ms
 
PC&gt;ping 192.168.2.252
 
Ping 192.168.2.252: 32 data bytes, Press Ctrl_C to break
From 192.168.2.252: bytes=32 seq=1 ttl=128 time=47 ms
From 192.168.2.252: bytes=32 seq=2 ttl=128 time=47 ms
From 192.168.2.252: bytes=32 seq=3 ttl=128 time=62 ms
From 192.168.2.252: bytes=32 seq=4 ttl=128 time=47 ms
From 192.168.2.252: bytes=32 seq=5 ttl=128 time=78 ms
 
--- 192.168.2.252 ping statistics ---
  5 packet(s) transmitted
  5 packet(s) received
  0.00% packet loss
  round-trip min/avg/max = 47/56/78 ms
 
PC&gt;ping 192.168.2.254
 
Ping 192.168.2.254: 32 data bytes, Press Ctrl_C to break
From 192.168.2.254: bytes=32 seq=1 ttl=128 time=62 ms
From 192.168.2.254: bytes=32 seq=2 ttl=128 time=63 ms
From 192.168.2.254: bytes=32 seq=3 ttl=128 time=62 ms
From 192.168.2.254: bytes=32 seq=4 ttl=128 time=47 ms
From 192.168.2.254: bytes=32 seq=5 ttl=128 time=63 ms
 
--- 192.168.2.254 ping statistics ---
  5 packet(s) transmitted
  5 packet(s) received
  0.00% packet loss
  round-trip min/avg/max = 47/59/63 ms
</code></pre> 
<h3><a id="PC4pingPC5_116"></a>PC4不能ping通PC5</h3> 
<pre><code>PC&gt;ping 192.168.2.252
 
Ping 192.168.2.252: 32 data bytes, Press Ctrl_C to break
Request timeout!
Request timeout!
Request timeout!
Request timeout!
Request timeout!
 
--- 192.168.2.252 ping statistics ---
  5 packet(s) transmitted
  0 packet(s) received
  100.00% packet loss
</code></pre> 
<h3><a id="PC5pingPC6_132"></a>PC5不能ping通PC6</h3> 
<pre><code>PC&gt;ping 192.168.2.254
 
Ping 192.168.2.254: 32 data bytes, Press Ctrl_C to break
From 192.168.2.252: Destination host unreachable
From 192.168.2.252: Destination host unreachable
From 192.168.2.252: Destination host unreachable
From 192.168.2.252: Destination host unreachable
From 192.168.2.252: Destination host unreachable
 
--- 192.168.2.254 ping statistics ---
  5 packet(s) transmitted
  0 packet(s) received
  100.00% packet loss
</code></pre> 
<h2><a id="PC1PC2456_148"></a>PC1访问PC2/4/5/6</h2> 
<pre><code>PC&gt;ping 192.168.2.251
 
Ping 192.168.2.251: 32 data bytes, Press Ctrl_C to break
Request timeout!
From 192.168.2.251: bytes=32 seq=2 ttl=127 time=94 ms
From 192.168.2.251: bytes=32 seq=3 ttl=127 time=46 ms
From 192.168.2.251: bytes=32 seq=4 ttl=127 time=79 ms
From 192.168.2.251: bytes=32 seq=5 ttl=127 time=78 ms
 
--- 192.168.2.251 ping statistics ---
  5 packet(s) transmitted
  4 packet(s) received
  20.00% packet loss
  round-trip min/avg/max = 0/74/94 ms
  PC&gt;ping 192.168.2.253
 
Ping 192.168.2.253: 32 data bytes, Press Ctrl_C to break
Request timeout!
From 192.168.2.253: bytes=32 seq=2 ttl=127 time=78 ms
From 192.168.2.253: bytes=32 seq=3 ttl=127 time=78 ms
From 192.168.2.253: bytes=32 seq=4 ttl=127 time=78 ms
From 192.168.2.253: bytes=32 seq=5 ttl=127 time=78 ms
 
--- 192.168.2.253 ping statistics ---
  5 packet(s) transmitted
  4 packet(s) received
  20.00% packet loss
  round-trip min/avg/max = 0/78/78 ms
  PC&gt;ping 192.168.2.252
 
Ping 192.168.2.252: 32 data bytes, Press Ctrl_C to break
Request timeout!
From 192.168.2.252: bytes=32 seq=2 ttl=127 time=125 ms
From 192.168.2.252: bytes=32 seq=3 ttl=127 time=94 ms
From 192.168.2.252: bytes=32 seq=4 ttl=127 time=94 ms
From 192.168.2.252: bytes=32 seq=5 ttl=127 time=94 ms
 
--- 192.168.2.252 ping statistics ---
  5 packet(s) transmitted
  4 packet(s) received
  20.00% packet loss
  round-trip min/avg/max = 0/101/125 ms
  PC&gt;ping 192.168.2.254
 
Ping 192.168.2.254: 32 data bytes, Press Ctrl_C to break
Request timeout!
From 192.168.2.254: bytes=32 seq=2 ttl=127 time=78 ms
From 192.168.2.254: bytes=32 seq=3 ttl=127 time=94 ms
From 192.168.2.254: bytes=32 seq=4 ttl=127 time=78 ms
From 192.168.2.254: bytes=32 seq=5 ttl=127 time=109 ms
 
--- 192.168.2.254 ping statistics ---
  5 packet(s) transmitted
  4 packet(s) received
  20.00% packet loss
  round-trip min/avg/max = 0/89/109 ms
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b27638690ccda7e20bc22677429168f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c语言每日一练(9)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e01b2fe33a5b17e0eea364046e4f9ae4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言编译报错：initialization from incompatible pointer type [-Wincompatible-pointer-types]（传参类型不匹配）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>