<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>git submodule 使用教程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="git submodule 使用教程" />
<meta property="og:description" content="1 submoude 介绍 （1）项目很大参与开发人员多的时候，需要将各个模块文件进行抽离单独管理。
（2）使用git submodule来对项目文件做成模块抽离，抽离出来的文件可单独成为一个git仓库。整个主项目对抽离出来的子项目（子模块）有依赖关系，却又并不关心子项目（子模块）的内部开发流程细节；
（3）代码如果全员可见，可以做成分支进行管理；如果代码不可见，可以创建为子仓库（独立一个git 仓库）；子仓库管理模块代码，主仓库定时更新
（4）简单理解：项目工程为一个仓库；模块为一个仓库；主仓库操作git module命令来使用这个模块子仓库；主项目，子模块可由不同的开发人员维护。
2 带Submodule 模块的主项目仓库环境搭建 （1）克隆一个主项目仓库git_test
命令：git clone git@gitee.com:monkeyqiyu/git_test.git
（2）添加模块子仓库的路径到主项目中
执行添加子仓库的命令:
git submodule add git@gitee.com:monkeyqiyu/git_submodule.git //其中模块即子仓库的路径为：git@gitee.com:monkeyqiyu/git_submodule.git
子模块仓库：
注：git submodule 还支持嵌套开发
（3）提交代码到远程仓库
git add .
git commit - m “添加子仓库到主仓库” git push origin master
3 带Submodule 模块的主项目开发操作流程 3.1主仓库开发人员A克隆代码进行开发
（1）克隆主仓库代码，子仓库代码为空
git clone git@gitee.com:monkeyqiyu/git_test.git （2）执行以下命令，获取子仓库代码：
git submodule init //初始化子仓库
git submodule update //获取子仓库最新代码
或者直接执行：git submodule update --init --recursive
3.2子仓库和主仓库修改后操作
（1） 非子仓库代码修改跟普通git操作一样提交代码
（2）主仓库由开发人员A开发，子仓库由开发人员B进行开发:
【1】发人员B开发完后提交代码到远程仓库;
【2】开发人员A要对submodule 模块进行更新" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3c502b6d3d6629cd97b078c830992242/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-10T06:19:43+08:00" />
<meta property="article:modified_time" content="2023-06-10T06:19:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">git submodule 使用教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>1 submoude 介绍</h4> 
<p>（1）项目很大参与开发人员多的时候，需要将各个模块文件进行抽离单独管理。</p> 
<p>（2）使用git submodule来对项目文件做成模块抽离，抽离出来的文件可单独成为一个git仓库。整个主项目对抽离出来的子项目（子模块）有依赖关系，却又并不关心子项目（子模块）的内部开发流程细节；</p> 
<p>（3）代码如果全员可见，可以做成分支进行管理；如果代码不可见，可以创建为子仓库（独立一个git 仓库）；子仓库管理模块代码，主仓库定时更新</p> 
<p>（4）简单理解：项目工程为一个仓库；模块为一个仓库；主仓库操作git module命令来使用这个模块子仓库；主项目，子模块可由不同的开发人员维护。</p> 
<h4>2 带Submodule 模块的主项目仓库环境搭建</h4> 
<p>（1）克隆一个主项目仓库git_test</p> 
<p>命令：git clone git@gitee.com:monkeyqiyu/git_test.git</p> 
<p><img alt="" src="https://images2.imgbox.com/00/1b/F3Ql8F2m_o.png"></p> 
<p> （2）添加模块子仓库的路径到主项目中</p> 
<p>执行添加子仓库的命令:</p> 
<p> git submodule add git@gitee.com:monkeyqiyu/git_submodule.git </p> 
<p> //其中模块即子仓库的路径为：git@gitee.com:monkeyqiyu/git_submodule.git</p> 
<p><img alt="" src="https://images2.imgbox.com/01/e3/p5QxxfEu_o.png"></p> 
<p>子模块仓库：</p> 
<p><img alt="" src="https://images2.imgbox.com/a4/b5/DA9uLvvM_o.png"></p> 
<p>注：git submodule 还支持嵌套开发</p> 
<p>（3）提交代码到远程仓库</p> 
<p>git add .</p> 
<p>git commit - m  “添加子仓库到主仓库” </p> 
<p>git push origin master</p> 
<p><img alt="" src="https://images2.imgbox.com/ff/ee/b7DLKBrH_o.png"></p> 
<h4>3 带Submodule 模块的主项目开发操作流程</h4> 
<p><strong>3.1主仓库开发人员A克隆代码进行开发</strong><br> （1）克隆主仓库代码，子仓库代码为空</p> 
<p> git clone git@gitee.com:monkeyqiyu/git_test.git   </p> 
<p><img alt="" src="https://images2.imgbox.com/d3/8f/HCZ8nOPU_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/80/71/xlHUrmRt_o.png"></p> 
<p>（2）执行以下命令，获取子仓库代码：</p> 
<p>git submodule init  //初始化子仓库</p> 
<p>git submodule update   //获取子仓库最新代码</p> 
<p>或者直接执行：git submodule update --init --recursive</p> 
<p><img alt="" src="https://images2.imgbox.com/59/fc/hernuuBQ_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/0e/f7/T2SGFMN5_o.png"></p> 
<p><strong>3.2子仓库和主仓库修改后操作</strong><br> （1） 非子仓库代码修改跟普通git操作一样提交代码</p> 
<p>（2）主仓库由开发人员A开发，子仓库由开发人员B进行开发:</p> 
<p>【1】发人员B开发完后提交代码到远程仓库;</p> 
<p>【2】开发人员A要对submodule 模块进行更新</p> 
<p>要执行下限命令对submodule进行更新,会更新最新的内容和commit id：</p> 
<p>git submodule update --remote   </p> 
<p><img alt="" src="https://images2.imgbox.com/59/a4/42RL9Bzi_o.png"></p> 
<p>再回到主项目仓库，对主项目进行一次提交，推送；把关联子仓库新的commit id提交推送到远程，下次克隆使用才不会出错！</p> 
<p><img alt="" src="https://images2.imgbox.com/0b/4c/BX9kiFd1_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/b6/7f/xH2PpNtk_o.png"></p> 
<p>远仓库主仓库中的子模块commit id有更新，点击会跳到子仓库</p> 
<p><img alt="" src="https://images2.imgbox.com/b5/2c/EST4wS2c_o.png"></p> 
<p><strong>3. 3 开发人员A同时管理主仓库和子仓库：</strong><br> 【1】子仓库代码有修改，要进入子仓库目录进行一次代码提交，推送远程</p> 
<pre><code class="language-bash">git add .
git commit -m "修改index = 100"
git push origin HEAD:master</code></pre> 
<p>【2】再回到主项目仓库，对主项目进行一次提交，推送</p> 
<pre><code class="language-bash">git add .
git commit -m "更新子仓库index = 100"
git push origin master</code></pre> 
<p>注意：     </p> 
<blockquote> 
 <ul><li>如果直接在主仓库目录执行git add .是不起作用的（可以使用git status查看 生效情况，只要子项目有修改，当我们进入主项目使用 git status查看状态 都会有子项目修改的记录）;</li><li>必须先提交推送子仓库代码，然后到主仓库路径提交一次子仓库的更新；</li></ul> 
</blockquote> 
<p><img alt="" src="https://images2.imgbox.com/a5/2e/YwQVXTdh_o.png"></p> 
<h4> 4 主仓库中删除子仓库</h4> 
<p>(1)执行要删除的部分</p> 
<pre><code class="language-bash">rm -rf 子模块目录 //删除子模块目录及源码

vi .gitmodules  //删除项目目录下.gitmodules文件中子模块相关条目

vi .git/config   //删除配置项中子模块相关条目

rm .git/module/* //删除模块下的子模块目录，每个子模块对应一个目录，注意只删除对应的子模块目录即可

git rm --cached 子模块名称</code></pre> 
<p>（2）重新提交推送到远程仓库</p> 
<p><img alt="" src="https://images2.imgbox.com/c8/2d/RANz0ahy_o.png"></p> 
<h4>5 submodule 注意事项</h4> 
<p>（1）当远程仓库的 submodule 进行了新的提交，父代码仓库的 submodule 不会自动更新 （执行git pull 或gitsubmodule update也无用）</p> 
<p>（2）主工程并不直接跟踪子模块的代码，而仅仅只跟踪子模块的 commit id 的改动。在执行 git submodule update 更新子模块代码时，Git 就是根据主工程所维护的 commit id 来更新子模块到指定状态的。</p> 
<p>（3）在子模块中修改并提交了代码，必须到主工程把子模块的 commit id 提交一下提交一次；否则其它开发人员还是停留在老的commit id所致的状态</p> 
<p></p> 
<p>原文链接：https://blog.csdn.net/weixin_42107504/article/details/129696242</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b6d6c71df0a5e689532e30bef1feed7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSS中的Flex布局常用的属性介绍和使用说明</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64b587d302409c67516aff51062177b4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Android】使用AnimationDrawable实现闪烁红光动画效果</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>