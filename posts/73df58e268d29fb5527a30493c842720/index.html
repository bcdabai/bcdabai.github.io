<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>算法--接雨水问题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="算法--接雨水问题" />
<meta property="og:description" content="一想又好久没更新文章了。唉，初次体验到一种像是被人赶稿的感觉。。。不过既然决定要写博客就一定要坚持下去。。。。。所以今天写点啥呢。。。要不就写一个简单点的算法吧。。。于是就找到了这道题。。。（为啥要打这么多’。&#39;呢。。。欸好像又下意识的打出来了）
所以不说废话了进入正题👇
Leetcode-42接雨水问题 题干：给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。
上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 感谢 Marcos 贡献此图。
来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/trapping-rain-water
那一看到题干，脑子里必然本源的想到一种暴力方法，从左往右扫描，记录位差。
从左面第一个非零的开始记录，第一个是1，然后往右扫描。遇到比这个记录点大的点位更新记录点计算两点之间的差说的比较含糊，且表述可能还有点不正确，不过问题不大，这里面涉及到很多情况，简单来讲暴力方案一般不采取。。。 所以呢思考一下正确解法
实力有限所以采用官方题解的图
从左扫描一次（左上图），再从右扫描一次（右上图）计算出整个左加右的大小（下图）称为总大小我们把原来的大小称为原大小，即题干图里面的黑色部分（数组累加）我们用总大小-原大小-重合部分（下图虚线部分）即为所求这样的时间复杂度为O（n） 附上java代码
public class Solution { public int Max(int a,int b){ return a&gt;b?a:b; } public int trap(int[] height) { //注意这个空数组是个坑 if (height.length&lt;=0) return 0; int[] left = new int[height.length]; int[] right = new int[height.length]; int height_sum = height[0]; //重合部分 int sum = 0; //总大小 int max_sum; //一个标记用于计算总大小 //总大小等于数组长度*数组中最大的元素 int max_flag; left[0] = height[0]; right[height." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/73df58e268d29fb5527a30493c842720/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-10T16:45:39+08:00" />
<meta property="article:modified_time" content="2019-11-10T16:45:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">算法--接雨水问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><em>一想又好久没更新文章了。唉，初次体验到一种像是被人赶稿的感觉。。。不过既然决定要写博客就一定要坚持下去。。。。。所以今天写点啥呢。。。要不就写一个简单点的算法吧。。。于是就找到了这道题。。。（为啥要打这么多’。'呢。。。欸好像又下意识的打出来了）</em><br> <strong>所以不说废话了进入正题👇</strong></p> 
<h3><a id="Leetcode42_2"></a>Leetcode-42接雨水问题</h3> 
<p>题干：给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。</p> 
<p><img src="https://images2.imgbox.com/ec/19/6G7MtqYn_o.png" alt="在这里插入图片描述"><br> 上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 感谢 Marcos 贡献此图。</p> 
<p>来源：力扣（LeetCode）<br> 链接：https://leetcode-cn.com/problems/trapping-rain-water</p> 
<p><strong>那一看到题干，脑子里必然本源的想到一种暴力方法，从左往右扫描，记录位差。</strong></p> 
<ul><li>从左面第一个非零的开始记录，第一个是1，然后往右扫描。</li><li>遇到比这个记录点大的点位更新记录点</li><li>计算两点之间的差</li><li>说的比较含糊，且表述可能还有点不正确，不过问题不大，这里面涉及到很多情况，简单来讲暴力方案一般不采取。。。</li></ul> 
<p><strong>所以呢思考一下正确解法</strong><br> 实力有限所以采用官方题解的图<br> <img src="https://images2.imgbox.com/ee/65/h2xRCVwW_o.png" alt="在这里插入图片描述"></p> 
<ul><li>从左扫描一次（左上图），再从右扫描一次（右上图）</li><li>计算出整个左加右的大小（下图）称为总大小</li><li>我们把原来的大小称为原大小，即题干图里面的黑色部分（数组累加）</li><li>我们用总大小-原大小-重合部分（下图虚线部分）即为所求</li><li>这样的时间复杂度为O（n）</li></ul> 
<p>附上java代码</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">Max</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a<span class="token operator">&gt;</span>b<span class="token operator">?</span>a<span class="token operator">:</span>b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">trap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> height<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//注意这个空数组是个坑</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>height<span class="token punctuation">.</span>length<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>height<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>height<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> height_sum <span class="token operator">=</span> height<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//重合部分</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//总大小</span>
        <span class="token keyword">int</span> max_sum<span class="token punctuation">;</span>
        <span class="token comment">//一个标记用于计算总大小</span>
        <span class="token comment">//总大小等于数组长度*数组中最大的元素</span>
        <span class="token keyword">int</span> max_flag<span class="token punctuation">;</span>
        left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        right<span class="token punctuation">[</span>height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span>height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        max_flag <span class="token operator">=</span> height<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//左扫描的同时计算总大小，同时计算数组的累加</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            height_sum<span class="token operator">+=</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>max_flag<span class="token operator">&lt;</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                max_flag <span class="token operator">=</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Max</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>left<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//计算总大小</span>
        max_sum <span class="token operator">=</span> max_flag<span class="token operator">*</span>height<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">//右扫描</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            right<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Max</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>right<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//计算重合部分</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            sum<span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> max_sum <span class="token operator">-</span> sum <span class="token operator">-</span> height_sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>以上</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/831be7c01001207ced29a4d2d4c5b518/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">无限循环输入任意10个整数，然后将这10个整数数列按照奇数在前、偶数在后的顺序重新排放。并要求奇偶两部分都是升序排列</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/91a2ca9639e99e990ce66ec73e94607c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Destoon7访问后台出现“请检查网站根目录下 license.txt”</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>