<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>小型文件系统FatFS和LittleFS对比和区别 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="小型文件系统FatFS和LittleFS对比和区别" />
<meta property="og:description" content="关注、星标公众号，不错过精彩内容
素材来源：网络
编辑整理：strongerHuang
对于许多物联网设备而言，拥有一个小型且具有弹性的文件系统至关重要。
在MCU上运行的文件系统不多，绝大部分人应该知道FatFS这个文件系统，今天就给大家讲讲FatFS和LittleFS的内容，以及他们之间的一些差异。
一、文件系统FatFS
FatFs是一个通用的文件系统(FAT/exFAT)模块，用于在小型嵌入式系统中实现FAT文件系统。
网址：
http://elm-chan.org/fsw/ff/00index_e.html
FatFs组件的编写遵循ANSI C(C89)，完全分离于磁盘 I/O 层,因此不依赖于硬件平台。它可以嵌入到资源有限的微控制器中，如 8051, PIC, AVR, ARM, Z80, RX等等，不需要做任何修改。
---来自百度百科
特征
a.DOS/ Windows兼容的FAT/exFAT文件系统。
b.平台无关，容易移植。
c.程序代码和工作区的占用空间非常小。
d.支持以下各种配置选项：
ANSI / OEM或Unicode中的长文件名。
exFAT文件系统，64位LBA和GPT可存储大量数据。
RTOS的线程安全。
多个卷（物理驱动器和分区）。
可变扇区大小。
多个代码页，包括DBCS。
只读，可选API，I / O缓冲区等...
如果你会使用STM32CubeMX，想要使用FatFS非常容易，轻松几步就能将STM32“变成”一个U盘。
二、文件系统Littlefs
知道Littlefs文件系统的人相对比较少，但是如果使用过Mbed OS系统的人绝大部分都应该知道。
Mbed OS是Arm公司针对Cortex-M系列处理器，面向IoT开发的一套免费、开源开源嵌入式操作系统，专门为物联网中的“things”而设计。
而Littlefs只是Mbed其中的一部分内容，如下框图：
源码地址：
https://github.com/armmbed/mbed-littlefs
Littlefs特点：
占用资源小：物联网设备受到ROM和RAM的限制。
断电恢复能力：要求文件系统保持一致，并将数据刷新到底层存储。
平均磨损：通常情况下，存储支持每块数量有限的擦除，因此使用整个存储设备对于可靠性非常重要。
用法也挺简单，参看官方例程：
#include &#34;LittleFileSystem2.h&#34; #include &#34;SPIFBlockDevice.h&#34; // Physical block device, can be any device that supports the BlockDevice API SPIFBlockDevice bd(PTE2, PTE4, PTE1, PTE5); // Storage for the littlefs LittleFileSystem2 fs(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bb07869526d495ad608d2591816a94df/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-26T22:50:06+08:00" />
<meta property="article:modified_time" content="2020-04-26T22:50:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">小型文件系统FatFS和LittleFS对比和区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align: center"><strong>关注、</strong><strong>星标公众</strong><strong>号</strong>，不错过精彩内容</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/31/78/2jZHHImK_o.png"></p> 
 <p style="text-align: right">素材来源：网络</p> 
 <p style="text-align: right">编辑整理：strongerHuang</p> 
 <p style="text-align: left">对于许多物联网设备而言，拥有一个小型且具有弹性的文件系统至关重要。</p> 
 <p style="text-align: left">在MCU上运行的文件系统不多，绝大部分人应该知道FatFS这个文件系统，今天就给大家讲讲FatFS和LittleFS的内容，以及他们之间的一些差异。</p> 
 <p style="text-align: left"><strong>一、文件系统FatFS</strong></p> 
 <p style="text-align: left">FatFs是一个通用的文件系统(FAT/exFAT)模块，用于在小型嵌入式系统中实现FAT文件系统。</p> 
 <p style="text-align: left">网址：</p> 
 <p style="text-align: left">http://elm-chan.org/fsw/ff/00index_e.html</p> 
 <p style="text-align: left"> </p> 
 <p style="text-align: left">FatFs组件的编写遵循ANSI C(C89)，完全分离于磁盘 I/O 层,因此不依赖于硬件平台。它可以嵌入到资源有限的微控制器中，如 8051, PIC, AVR, ARM, Z80, RX等等，不需要做任何修改。</p> 
 <p style="text-align: right">---来自百度百科</p> 
 <p style="text-align: left"><strong>特征</strong></p> 
 <p style="text-align: left">a.DOS/ Windows兼容的FAT/exFAT文件系统。</p> 
 <p style="text-align: left">b.平台无关，容易移植。</p> 
 <p style="text-align: left">c.程序代码和工作区的占用空间非常小。</p> 
 <p style="text-align: left">d.支持以下各种配置选项：</p> 
 <ul><li><p style="text-align: left">ANSI / OEM或Unicode中的长文件名。</p></li><li><p style="text-align: left">exFAT文件系统，64位LBA和GPT可存储大量数据。</p></li><li><p style="text-align: left">RTOS的线程安全。</p></li><li><p style="text-align: left">多个卷（物理驱动器和分区）。</p></li><li><p style="text-align: left">可变扇区大小。</p></li><li><p style="text-align: left">多个代码页，包括DBCS。</p></li><li><p style="text-align: left">只读，可选API，I / O缓冲区等...</p></li></ul> 
 <p style="text-align: left"><img src="https://images2.imgbox.com/d3/66/TBy86hIK_o.png"><img src="https://images2.imgbox.com/9f/40/ngOFhr6A_o.png"></p> 
 <p style="text-align: left">如果你会使用STM32CubeMX，想要使用FatFS非常容易，轻松几步就能将STM32“变成”一个U盘。</p> 
 <p style="text-align: left"><strong>二、文件系统Littlefs</strong></p> 
 <p style="text-align: left">知道Littlefs文件系统的人相对比较少，但是如果使用过Mbed OS系统的人绝大部分都应该知道。</p> 
 <p style="text-align: left">Mbed OS是Arm公司针对Cortex-M系列处理器，面向IoT开发的一套免费、开源开源嵌入式操作系统，专门为物联网中的“things”而设计。</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/9f/50/tkcW1Jbp_o.png"></p> 
 <p style="text-align: left">而Littlefs只是Mbed其中的一部分内容，如下框图：</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/cf/63/WUDdI1yZ_o.png"></p> 
 <p style="text-align: left">源码地址：</p> 
 <p style="text-align: left">https://github.com/armmbed/mbed-littlefs</p> 
 <p style="text-align: left"><strong>Littlefs特点：</strong></p> 
 <ul><li><p style="text-align: left">占用资源小：物联网设备受到ROM和RAM的限制。</p></li><li><p style="text-align: left">断电恢复能力：要求文件系统保持一致，并将数据刷新到底层存储。</p></li><li><p style="text-align: left">平均磨损：通常情况下，存储支持每块数量有限的擦除，因此使用整个存储设备对于可靠性非常重要。</p></li></ul> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/b4/4f/APxeC2hk_o.png"></p> 
 <p style="text-align: left">用法也挺简单，参看官方例程：</p> 
 <pre class="has"><code class="language-cpp">#include "LittleFileSystem2.h"
#include "SPIFBlockDevice.h"


// Physical block device, can be any device that supports the BlockDevice API
SPIFBlockDevice bd(PTE2, PTE4, PTE1, PTE5);


// Storage for the littlefs
LittleFileSystem2 fs("fs");


// Entry point
int main() {
    // Mount the filesystem
    int err = fs.mount(&amp;bd);
    if (err) {
        // Reformat if we can't mount the filesystem,
        // this should only happen on the first boot
        LittleFileSystem2::format(&amp;bd);
        fs.mount(&amp;bd);
    }


    // Read the boot count
    uint32_t boot_count = 0;
    FILE *f = fopen("/fs/boot_count", "r+");
    if (!f) {
        // Create the file if it doesn't exist
        f = fopen("/fs/boot_count", "w+");
    }
    fread(&amp;boot_count, sizeof(boot_count), 1, f);


    // Update the boot count
    boot_count += 1;
    rewind(f);
    fwrite(&amp;boot_count, sizeof(boot_count), 1, f);


    // Remember that storage may not be updated until the file
    // is closed successfully
    fclose(f);


    // Release any resources we were using
    fs.unmount();


    // Print the boot count
    printf("boot_count: %ld\n", boot_count);
}
</code></pre> 
 <p style="text-align: left"><strong>三、文件系统对比</strong></p> 
 <p style="text-align: left">每一种产物都有它存在的价值，文件系统也同样如此，各有各的优缺点，下面简单罗列几点它们的区别。</p> 
 <p style="text-align: left"><strong>1.资源RAM / ROM大小</strong></p> 
 <p style="text-align: left">Littlefs是Mbed OS中的高完整性嵌入式文件系统，经过优化可与RAM和ROM有限的MCU一起使用。</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/9e/da/WaXvgKV0_o.png"></p> 
 <p style="text-align: left">Littlefs高度集成的嵌入式文件系统使用比FAT少的13K ROM和少于4K的RAM。</p> 
 <p style="text-align: left"><strong>2.失电恢复能力</strong></p> 
 <p style="text-align: left">littlefs具有强大的copy-on-write保证，并且磁盘上的存储总是保持有效状态，可能有随机电源故障的系统适合该文件系统。</p> 
 <p style="text-align: left"><strong>3.磨损均衡</strong></p> 
 <p style="text-align: left">嵌入式设备使用的大多数存储芯片都支持每个扇区有限的擦除集，如果没有均衡，则嵌入式设备的寿命可能会受到影响。</p> 
 <p style="text-align: left">参考来源：</p> 
 <p style="text-align: left">https://os.mbed.com/blog/entry/littlefs-high-integrity-embedded-fs/</p> 
 <pre class="has"><code class="language-php">免责声明：本文来源网络，版权归原作者所有。如涉及作品版权问题，请与我联系删除。
‧‧‧‧‧‧‧‧‧‧‧‧‧‧‧‧  END  ‧‧‧‧‧‧‧‧‧‧‧‧‧‧‧‧
推荐阅读：

精选汇总 | 目录 | 搜索
为什么CPU流水线会提高代码执行效率？
假冒芯片的套路，如何鉴别仿冒料件？


关注微信公众号『strongerHuang』，后台回复“1024”查看更多内容，回复“加群”按规则加入技术交流群。

长按前往图中包含的公众号关注
</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/45f9e577b382d80144192b1d2436c40e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32——IIC基础知识及例程使用（后续拓展）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c695b1ab46c8ea88bdb976c22f192d4f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决编码问题：AttributeError: &#39;str&#39; object has no attribute &#39;decode&#39;</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>