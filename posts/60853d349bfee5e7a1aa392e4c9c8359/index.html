<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS 7上进行gitlab的搭建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS 7上进行gitlab的搭建" />
<meta property="og:description" content="在CentOS系统上安装所需的依赖：
ssh，
防火墙，
postfix(用于邮件通知) ，
wget，
以下命令也会打开系统防火墙中的HTTP和SSH端口访问
使用命令
yum install -y curl policycoreutils-python openssh-server
安装完成之后，需要启用和启动sshd服务，执行命令：
systemctl enable sshd
systemctl start sshd
打开 /etc/sysctl.conf 文件，在文件最后添加新的一行
输入如下文本：
net.ipv4.ip_forward = 1
这样，就配置好了防火墙。
作用为，当linux主机有多个网卡时，一个网卡收到的信息时可以传递给其他网卡，即数据可以进行转发
systemctl enable firewalld
systemctl start firewalld
systemctl enable firewalld
由于gitlab是需要使用postfix来作为邮件发送服务的，还需安装下以下服务。
直接命令安装，确认安装环节，输入【y】即可：
yum install postfix
安装完成之后，打开/etc/postfix/main.cf 文件，找到inet_protocols = all，将 all 改为 ipv4。
然后，启动postfix，输入命令：
systemctl enable postfix
systemctl start postfix
安装gitlab
到了开始安装gitlab的时刻了
首先，先更改下镜像源地址（该镜像源的地址设置成了清华大学的，下载提速）
在/etc/yum.repos.d 目录下新建 gitlab-ce.repo 文件，并在里面输入如下内容：
[gitlab-ce] name=Gitlab CE Repository baseurl=https://mirrors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/60853d349bfee5e7a1aa392e4c9c8359/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-02T01:16:33+08:00" />
<meta property="article:modified_time" content="2023-02-02T01:16:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS 7上进行gitlab的搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在CentOS系统上安装所需的依赖：<br> ssh，<br> 防火墙，<br> postfix(用于邮件通知) ，<br> wget，<br> 以下命令也会打开系统防火墙中的HTTP和SSH端口访问<br> 使用命令<br> yum install -y curl policycoreutils-python openssh-server</p> 
<p><img src="https://images2.imgbox.com/d5/9a/LN0SalGh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b3/93/gWH32mMN_o.png" alt="在这里插入图片描述"><br> 安装完成之后，需要启用和启动sshd服务，执行命令：<br> systemctl enable sshd<br> systemctl start sshd<br> <img src="https://images2.imgbox.com/35/2b/ylbzMoc7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cc/e5/XCNBs7kK_o.png" alt="在这里插入图片描述"><br> 打开 /etc/sysctl.conf 文件，在文件最后添加新的一行<br> 输入如下文本：<br> net.ipv4.ip_forward = 1<br> 这样，就配置好了防火墙。<br> 作用为，当linux主机有多个网卡时，一个网卡收到的信息时可以传递给其他网卡，即数据可以进行转发<br> <img src="https://images2.imgbox.com/fc/c9/rp6vRMBz_o.png" alt="在这里插入图片描述"></p> 
<p>systemctl enable firewalld<br> systemctl start firewalld<br> systemctl enable firewalld<br> <img src="https://images2.imgbox.com/20/1d/a8Fjt923_o.png" alt="在这里插入图片描述"></p> 
<p>由于gitlab是需要使用postfix来作为邮件发送服务的，还需安装下以下服务。<br> 直接命令安装，确认安装环节，输入【y】即可：<br> yum install postfix<br> <img src="https://images2.imgbox.com/d5/0b/5Z3XbUYB_o.png" alt="在这里插入图片描述"><br> 安装完成之后，打开/etc/postfix/main.cf 文件，找到inet_protocols = all，将 all 改为 ipv4。<br> <img src="https://images2.imgbox.com/75/75/X5c7Ec9K_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/3b/78/XEswWp5M_o.png" alt="在这里插入图片描述"><br> 然后，启动postfix，输入命令：<br> systemctl enable postfix<br> systemctl start postfix<br> <img src="https://images2.imgbox.com/12/27/4014Hjhb_o.png" alt="在这里插入图片描述"></p> 
<p>安装gitlab<br> 到了开始安装gitlab的时刻了<br> 首先，先更改下镜像源地址（该镜像源的地址设置成了清华大学的，下载提速）<br> 在/etc/yum.repos.d 目录下新建 gitlab-ce.repo 文件，并在里面输入如下内容：</p> 
<pre><code>[gitlab-ce]
name=Gitlab CE Repository
baseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/
gpgcheck=0
enabled=1
</code></pre> 
<p>然后保存文件<br> <img src="https://images2.imgbox.com/97/d0/X9A0bE88_o.png" alt="在这里插入图片描述"><br> 保存好之后，需要重新生成环境，执行如下命令：<br> yum makecache<br> ![](https://img-blog.csdnimg.cn/473eb49926754c5a99c739acc8b8b03c.png<img src="https://images2.imgbox.com/64/4d/aEvzFbFe_o.png" alt="在这里插入图片描述"><br> 然后，我们就可以正式安装gitlab了，执行如下命令：<br> yum install -y gitlab-ce</p> 
<p><img src="https://images2.imgbox.com/eb/7a/3wjdYdkg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1f/88/kGD1EZMN_o.png" alt="在这里插入图片描述"><br> 运行gitlab</p> 
<p>首先，我们需要配置一下GitLab的域名，非必须的，但建议配置一下，便于访问gitlab的时，方面记忆。<br> 打开/etc/gitlab/gitlab.rb文件，找到external_url 这个选项，改成机器ip或者域名，如图：<br> <img src="https://images2.imgbox.com/1f/59/nRB5YUvA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7c/29/NzfhEq8b_o.png" alt="在这里插入图片描述"></p> 
<p>接下来，初始化gitlab，<br> 输入命令：<br> gitlab-ctl reconfigure<br> 当出现如图的画面时，即为初始化配置完成<br> <img src="https://images2.imgbox.com/f8/1e/BJtQFJA4_o.png" alt="在这里插入图片描述"><br> 用root账号登录，密码在这里查看，只保留24小时<br> <img src="https://images2.imgbox.com/be/f5/5eYVm6Oh_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/d7/28/5Yg1ZxNx_o.png" alt="在这里插入图片描述"><br> 启动gitlab<br> sudo gitlab-ctl start<br> <img src="https://images2.imgbox.com/f8/8e/27gkW4q6_o.png" alt="在这里插入图片描述"><br> 启动后，发现页面无法访问<br> 输入命令systemctl status firewalld发现防火墙在运行着<br> <img src="https://images2.imgbox.com/56/cc/LxSyYzOH_o.png" alt="在这里插入图片描述"></p> 
<p>输入命令service firewalld stop关闭防火墙即可成功访问，访问名称就是http://你设置的ip（不需要加端口）<br> <img src="https://images2.imgbox.com/be/6a/RLcL2T4A_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a0/6c/C2kzXwSG_o.png" alt="在这里插入图片描述"></p> 
<p>先修改完密码（要不设置语言不生效）<br> <img src="https://images2.imgbox.com/f8/cb/Lznh5jGa_o.png" alt="在这里插入图片描述"><br> 然后设置语言为中文<br> <img src="https://images2.imgbox.com/75/00/bXB6AzwH_o.png" alt="在这里插入图片描述"><br> 退出登录后，重新登录语言即为中文<br> <img src="https://images2.imgbox.com/46/7f/ltoo2ufY_o.png" alt="在这里插入图片描述"></p> 
<pre><code>常用命令总结：
初始化gitlab：sudo gitlab-ctl reconfigure
关闭gitlab：sudo gitlab-ctl stop
启动gitlab：
sudo gitlab-ctl start

#systemctl stop firewalld //关闭防火墙
#systemctl disable firewalld //禁用防火墙开机启动

//启动邮件服务,并开机加载
#systemctl start postfix
#systemctl enable postfix
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/08ff3fa7a3d57dc56eb52458a1cffe67/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">skynet设计原理和使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9c1f6d81d8f30dffa119b8b20a676e94/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python-oracledb——利用python连接Oracle数据库的利器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>