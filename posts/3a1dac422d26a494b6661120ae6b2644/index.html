<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS7 离线安装mysql8数据库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS7 离线安装mysql8数据库" />
<meta property="og:description" content="第一步：下载离线安装包 下载地址：https://dev.mysql.com/downloads/
第二步：上传下载包到服务器 上传文件mysql-8.0.23-1.el7.x86_64.rpm-bundle.tar到服务器上。
第三步：解压文件包 切换到上传文件目录下运行如下命令：
tar -vxf mysql-8.0.23-1.el7.x86_64.rpm-bundle.tar
[root@gelong-vm1 rpms]# tar xvf mysql-8.0.23-1.el7.x86_64.rpm-bundle.tar mysql-community-client-8.0.23-1.el7.x86_64.rpm mysql-community-client-plugins-8.0.23-1.el7.x86_64.rpm mysql-community-common-8.0.23-1.el7.x86_64.rpm mysql-community-devel-8.0.23-1.el7.x86_64.rpm mysql-community-embedded-compat-8.0.23-1.el7.x86_64.rpm mysql-community-libs-8.0.23-1.el7.x86_64.rpm mysql-community-libs-compat-8.0.23-1.el7.x86_64.rpm mysql-community-server-8.0.23-1.el7.x86_64.rpm mysql-community-test-8.0.23-1.el7.x86_64.rpm 第四步：卸载系统自带的数据库 1.检查系统自带的 MariaDB 检查系统是否自带MariaDB,命令如下：
rpm -qa | grep mariadb
如果系统自带MariaDB,删除掉，删除命令如下：
rpm -e --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64
2.检查系统自带的mysql数据库安装包 检查系统是否自带Mysql数据库，名利如下：
rpm -qa | grep mysql
如果系统自带mysql数据库，删除掉，删除命令如下：
rpm -e --nodeps mysql-libs-5.1.73-8.el6_8.x86_64
第五步：按照顺序安装mysql数据库 按照如下顺序安装：
1. rpm -ivh mysql-community-common-8.0.25-1.el7.x86_64.rpm 2. rpm -ivh mysql-community-client-plugins-8.0.25-1.el7.x86_64.rpm 3. rpm -ivh mysql-community-libs-8.0.25-1.el7.x86_64.rpm 4. rpm -ivh mysql-community-client-8.0.25-1.el7.x86_64.rpm 5. rpm -ivh mysql-community-server-8." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3a1dac422d26a494b6661120ae6b2644/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-05T15:10:57+08:00" />
<meta property="article:modified_time" content="2023-09-05T15:10:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS7 离线安装mysql8数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="background-color:transparent;text-align:left;"><strong><strong><strong>第一步：下载离线安装包</strong></strong></strong></h3> 
<p> 下载地址：<a href="https://dev.mysql.com/downloads/" rel="nofollow" title="https://dev.mysql.com/downloads/">https://dev.mysql.com/downloads/</a></p> 
<p> <img alt="" height="292" src="https://images2.imgbox.com/e9/cf/xMgWaIiD_o.png" width="554"><img alt="" height="376" src="https://images2.imgbox.com/a4/4b/nSd0MFcF_o.png" width="554"><img alt="" height="250" src="https://images2.imgbox.com/ac/fa/U0cSkLtc_o.png" width="554"><img alt="" height="267" src="https://images2.imgbox.com/6a/04/1T7CDp0a_o.png" width="554"><img alt="" height="298" src="https://images2.imgbox.com/dc/60/bJjfpq0m_o.png" width="553"></p> 
<h3>第二步：上传下载包到服务器</h3> 
<p> 上传文件mysql-8.0.23-1.el7.x86_64.rpm-bundle.tar到服务器上。</p> 
<h3>第三步：解压文件包</h3> 
<p style="margin-left:.0001pt;text-align:justify;">切换到上传文件目录下运行如下命令：</p> 
<p style="margin-left:.0001pt;text-align:justify;">tar -vxf mysql-8.0.23-1.el7.x86_64.rpm-bundle.tar</p> 
<pre><code class="language-bash">[root@gelong-vm1 rpms]# tar xvf mysql-8.0.23-1.el7.x86_64.rpm-bundle.tar
mysql-community-client-8.0.23-1.el7.x86_64.rpm
mysql-community-client-plugins-8.0.23-1.el7.x86_64.rpm
mysql-community-common-8.0.23-1.el7.x86_64.rpm
mysql-community-devel-8.0.23-1.el7.x86_64.rpm
mysql-community-embedded-compat-8.0.23-1.el7.x86_64.rpm
mysql-community-libs-8.0.23-1.el7.x86_64.rpm
mysql-community-libs-compat-8.0.23-1.el7.x86_64.rpm
mysql-community-server-8.0.23-1.el7.x86_64.rpm
mysql-community-test-8.0.23-1.el7.x86_64.rpm</code></pre> 
<h3>第四步：卸载系统自带的数据库</h3> 
<h4 style="text-align:left;"><strong><strong><strong>1.</strong></strong><strong><strong>检查</strong></strong><a href="https://so.csdn.net/so/search?q=%E5%8D%B8%E8%BD%BD%E7%B3%BB%E7%BB%9F&amp;spm=1001.2101.3001.7020" title="系统">系统</a><strong><strong>自带的 MariaDB</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">检查系统是否自带MariaDB,命令如下：</p> 
<p style="margin-left:.0001pt;text-align:justify;"> rpm -qa | grep mariadb</p> 
<p style="margin-left:.0001pt;text-align:justify;">如果系统自带MariaDB,删除掉，删除命令如下：</p> 
<p style="margin-left:.0001pt;text-align:justify;"> rpm -e --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64</p> 
<h4 style="margin-left:0pt;text-align:left;"><strong><strong><strong>2.</strong></strong><strong><strong>检查系统自带的</strong></strong><strong><strong>mysql数据库安装包</strong></strong></strong></h4> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;">检查系统是否自带Mysql数据库，名利如下：</p> 
<p style="margin-left:.0001pt;text-align:justify;"> rpm -qa | grep mysql</p> 
<p style="margin-left:.0001pt;text-align:justify;">如果系统自带mysql数据库，删除掉，删除命令如下：</p> 
<p style="margin-left:.0001pt;text-align:justify;"> rpm -e --nodeps mysql-libs-5.1.73-8.el6_8.x86_64</p> 
<h3 style="background-color:transparent;margin-left:.0001pt;text-align:justify;">第五步：<strong><strong><strong>按照顺序安装mysql数据库</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">按照如下顺序安装：</p> 
<pre><code class="language-bash">1. rpm -ivh mysql-community-common-8.0.25-1.el7.x86_64.rpm
2. rpm -ivh mysql-community-client-plugins-8.0.25-1.el7.x86_64.rpm
3. rpm -ivh mysql-community-libs-8.0.25-1.el7.x86_64.rpm
4. rpm -ivh mysql-community-client-8.0.25-1.el7.x86_64.rpm
5. rpm -ivh mysql-community-server-8.0.25-1.el7.x86_64.rpm
6. rpm -ivh mysql-community-devel-8.0.25-1.el7.x86_64.rpm</code></pre> 
<h4><strong><strong><strong>1.安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm 报错解决方案</strong></strong></strong> </h4> 
<p style="margin-left:.0001pt;text-align:justify;">安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm 的时候需要依赖 net-tools，如果没有 net-tools 会安装失败，此时先安装 net-tools，然后再安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm 即可，安装命令如下：</p> 
<pre><code class="language-bash"># 安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm 依赖报错
[root@sangni mysql-installation]# rpm -ivh mysql-community-server-8.0.25-1.el7.x86_64.rpm
警告：mysql-community-server-8.0.25-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY
错误：依赖检测失败：
	net-tools 被 mysql-community-server-8.0.25-1.el7.x86_64 需要
 
# 安装 net-tools
[root@sangni mysql-installation]# yum install net-tools
已加载插件：fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.njupt.edu.cn
 * extras: mirrors.njupt.edu.cn
 * updates: mirrors.njupt.edu.cn
正在解决依赖关系
--&gt; 正在检查事务
---&gt; 软件包 net-tools.x86_64.0.2.0-0.25.20131004git.el7 将被 安装
--&gt; 解决依赖关系完成
 
依赖关系解决
 
==================================================================================================================================
 Package                      架构                      版本                                        源                       大小
==================================================================================================================================
正在安装:
 net-tools                    x86_64                    2.0-0.25.20131004git.el7                    base                    306 k
 
事务概要
==================================================================================================================================
安装  1 软件包
 
总下载量：306 k
安装大小：917 k
Is this ok [y/d/N]: y
Downloading packages:
net-tools-2.0-0.25.20131004git.el7.x86_64.rpm                                                              | 306 kB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
警告：RPM 数据库已被非 yum 程序修改。
** 发现 2 个已存在的 RPM 数据库问题， 'yum check' 输出如下：
2:postfix-2.10.1-9.el7.x86_64 有缺少的需求 libmysqlclient.so.18()(64bit)
2:postfix-2.10.1-9.el7.x86_64 有缺少的需求 libmysqlclient.so.18(libmysqlclient_18)(64bit)
  正在安装    : net-tools-2.0-0.25.20131004git.el7.x86_64                                                                     1/1 
  验证中      : net-tools-2.0-0.25.20131004git.el7.x86_64                                                                     1/1 
 
已安装:
  net-tools.x86_64 0:2.0-0.25.20131004git.el7                                                                                     
 
完毕！
 
# net-tools 安装完成后再次安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm
[root@sangni mysql-installation]# rpm -ivh mysql-community-server-8.0.25-1.el7.x86_64.rpm 
警告：mysql-community-server-8.0.25-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY
准备中...                          ################################# [100%]
正在升级/安装...
   1:mysql-community-server-8.0.25-1.e################################# [100%]</code></pre> 
<h4> 2.安装 mysql-community-devel-8.0.25-1.el7.x86_64.rpm 报错解决方案</h4> 
<p style="margin-left:.0001pt;text-align:justify;">安装 mysql-community-devel-8.0.25-1.el7.x86_64.rpm 的时候需要依赖 pkgconfig(openssl)，如果报错则同样先安装 openssl-devel 即可，安装命令如下：</p> 
<pre><code class="language-bash"># 安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm 依赖报错
[root@sangni mysql-installation]# rpm -ivh mysql-community-server-8.0.25-1.el7.x86_64.rpm
警告：mysql-community-server-8.0.25-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY
错误：依赖检测失败：
	net-tools 被 mysql-community-server-8.0.25-1.el7.x86_64 需要
 
# 安装 net-tools
[root@sangni mysql-installation]# yum install net-tools
已加载插件：fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.njupt.edu.cn
 * extras: mirrors.njupt.edu.cn
 * updates: mirrors.njupt.edu.cn
正在解决依赖关系
--&gt; 正在检查事务
---&gt; 软件包 net-tools.x86_64.0.2.0-0.25.20131004git.el7 将被 安装
--&gt; 解决依赖关系完成
 
依赖关系解决
 
==================================================================================================================================
 Package                      架构                      版本                                        源                       大小
==================================================================================================================================
正在安装:
 net-tools                    x86_64                    2.0-0.25.20131004git.el7                    base                    306 k
 
事务概要
==================================================================================================================================
安装  1 软件包
 
总下载量：306 k
安装大小：917 k
Is this ok [y/d/N]: y
Downloading packages:
net-tools-2.0-0.25.20131004git.el7.x86_64.rpm                                                              | 306 kB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
警告：RPM 数据库已被非 yum 程序修改。
** 发现 2 个已存在的 RPM 数据库问题， 'yum check' 输出如下：
2:postfix-2.10.1-9.el7.x86_64 有缺少的需求 libmysqlclient.so.18()(64bit)
2:postfix-2.10.1-9.el7.x86_64 有缺少的需求 libmysqlclient.so.18(libmysqlclient_18)(64bit)
  正在安装    : net-tools-2.0-0.25.20131004git.el7.x86_64                                                                     1/1 
  验证中      : net-tools-2.0-0.25.20131004git.el7.x86_64                                                                     1/1 
 
已安装:
  net-tools.x86_64 0:2.0-0.25.20131004git.el7                                                                                     
 
完毕！
 
# net-tools 安装完成后再次安装 mysql-community-server-8.0.25-1.el7.x86_64.rpm
[root@sangni mysql-installation]# rpm -ivh mysql-community-server-8.0.25-1.el7.x86_64.rpm 
警告：mysql-community-server-8.0.25-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY
准备中...                          ################################# [100%]
正在升级/安装...
   1:mysql-community-server-8.0.25-1.e################################# [100%]</code></pre> 
<h3><strong><strong><strong>第六步：启动mysql服务</strong></strong></strong> </h3> 
<h4 style="margin-left:.0001pt;text-align:justify;">1.启动MYSQL服务：</h4> 
<pre><code class="language-bash">[root@gelong-vm1 rpms]# service mysqld start
Redirecting to /bin/systemctl start mysqld.service
</code></pre> 
<h4><strong><strong>2</strong></strong><strong><strong>.</strong></strong>查看启动状态： </h4> 
<pre><code class="language-bash">[root@gelong-vm1 rpms]# systemctl status mysqld.service
● mysqld.service - MySQL Server
   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)
   Active: active (running) since 二 2023-09-05 14:19:46 CST; 38s ago
     Docs: man:mysqld(8)
           http://dev.mysql.com/doc/refman/en/using-systemd.html
  Process: 15236 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)
 Main PID: 15315 (mysqld)
   Status: "Server is operational"
   CGroup: /system.slice/mysqld.service
           └─15315 /usr/sbin/mysqld

9月 05 14:19:34 gelong-vm1 systemd[1]: Starting MySQL Server...
9月 05 14:19:46 gelong-vm1 systemd[1]: Started MySQL Server.
</code></pre> 
<h3>第七步：修改默认密码开启远程连接 </h3> 
<h4 style="text-align:left;"><strong><strong><strong>1.查看默认密码：</strong></strong></strong></h4> 
<p><strong><strong><strong>查看默认密码命令如下：</strong></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#fafafa;"><span style="color:#383a42;">grep </span></span><span style="background-color:#fafafa;"><span style="color:#50a14f;">'temporary password'</span></span> <span style="background-color:#fafafa;"><span style="color:#383a42;">/</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">var</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">/</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">log</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">/</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">mysqld.log</span></span></p> 
<pre><code class="language-bash">[root@gelong-vm1 rpms]# grep 'temporary password' /var/log/mysqld.log
2023-09-05T06:19:39.121134Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: iU/%Q(3w&lt;AO*
</code></pre> 
<h4>2.使用默认密码登录mysql： </h4> 
<p> <span style="background-color:#fafafa;"><span style="color:#383a42;">mysql -u root -p</span></span>  </p> 
<pre><code class="language-bash">[root@gelong-vm1 rpms]# mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.23

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
</code></pre> 
<h4>3.修改 root 用户密码： </h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#fafafa;"><span style="color:#383a42;">alter user </span></span><span style="background-color:#fafafa;"><span style="color:#50a14f;">'root'</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">@</span></span><span style="background-color:#fafafa;"><span style="color:#50a14f;">'localhost'</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;"> identified </span></span><span style="background-color:#fafafa;"><span style="color:#a626a4;">by</span></span> <span style="background-color:#fafafa;"><span style="color:#50a14f;">'xxxx'</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#fafafa;"><span style="color:#383a42;">注意：这里修改的密码要足够复杂，包含大小和特殊符号；</span></span></p> 
<pre><code class="language-bash">mysql&gt; alter user 'root'@'localhost' identified by 'Houpu123!@#';
Query OK, 0 rows affected (0.62 sec)

mysql&gt; select version();
+-----------+
| version() |
+-----------+
| 8.0.23    |
+-----------+
1 row in set (0.00 sec)
</code></pre> 
<h4>4.修改 root 用户的 host 列值，开启远程连接： </h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#fafafa;"><span style="color:#383a42;">修改运行远程连接命令如下：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#fafafa;"><span style="color:#383a42;">update user </span></span><span style="background-color:#fafafa;"><span style="color:#a626a4;">set</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;"> host</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">=</span></span><span style="background-color:#fafafa;"><span style="color:#50a14f;">'%'</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;"> where user </span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">=</span></span><span style="background-color:#fafafa;"><span style="color:#50a14f;">'root'</span></span><span style="background-color:#fafafa;"><span style="color:#383a42;">;</span></span></p> 
<pre><code class="language-bash">mysql&gt; update user set host='%' where user ='root';
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

</code></pre> 
<h4>5.刷新缓存:</h4> 
<p style="margin-left:.0001pt;text-align:justify;">重新刷新mysql的缓存内容命令：</p> 
<p style="margin-left:.0001pt;text-align:justify;">flush privileges;</p> 
<pre><code class="language-bash">mysql&gt; flush privileges;
Query OK, 0 rows affected (0.47 sec)

</code></pre> 
<h4><strong><strong><strong>6.给 root 用户授予所有权限</strong></strong><strong><strong>：</strong></strong></strong></h4> 
<pre><code class="language-bash">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'WITH GRANT OPTION;
Query OK, 0 rows affected (0.02 sec)

</code></pre> 
<h4>7.退出mysql控制台：</h4> 
<p>        exit;</p> 
<p> </p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/815f70d3ba49c3a778a7900c032b01c1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">神仙级python入门教程(非常详细)，从0到精通，从看这篇开始！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21499e211f412d18d5ca1b88ce0bd10f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Github】git本地仓库建立与远程连接</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>