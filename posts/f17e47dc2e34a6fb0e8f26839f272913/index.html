<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Docker篇】从0到1搭建自己的镜像仓库并且推送镜像到自己的仓库中 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Docker篇】从0到1搭建自己的镜像仓库并且推送镜像到自己的仓库中" />
<meta property="og:description" content="文章目录 🔎docker私有仓库🍔具体步骤 🔎docker私有仓库 Docker私有仓库的存在为用户提供了更高的灵活性、控制和安全性。与使用公共镜像仓库相比，私有仓库使用户能够完全掌握自己的镜像生命周期。
首先，私有仓库允许用户在本地或云服务器上部署和管理自己的镜像存储库。这意味着用户可以根据自己的需求和规模进行扩展和配置。无论是将私有仓库部署在本地网络中还是将其放置在云服务器上，用户都可以根据自己的环境和需求进行选择。
其次，私有仓库提供了安全性方面的优势。用户可以对私有仓库进行访问控制和权限设置，确保只有授权的人员能够推送和拉取镜像。这对于需要保护敏感数据或限制访问的企业环境尤为重要。
此外，私有仓库还可以提高应用程序部署的可靠性和稳定性。通过使用私有仓库，用户可以确保所使用的镜像的版本和稳定性，避免因为公共仓库的变化导致应用程序出现问题。
总而言之，Docker私有仓库为用户提供了更高的灵活性、控制和安全性。它允许用户存储、共享和管理自己的镜像，并提供了更多的定制化选项，以适应各种不同的应用场景和需求。
🍔具体步骤 配置docker信任地址
vi /etc/docker/daemon.json 加入下面的内容
&#34;insecure-registries&#34;:[&#34;http://192.168.125.131:8080&#34;] 这里面的ip地址改为自己虚拟机的地址
（注意这后面有一个 逗号 ）
然后重启一下docker
# 重加载 systemctl daemon-reload # 重启docker systemctl restart docker 然后我们进入tmp文件夹，新建一个文件夹来作为我们存放图像化仓库的地方，并且创建yml文件
把下面的代码写入yml文件中
version: &#39;3.0&#39; services: registry: image: registry volumes: - ./registry-data:/var/lib/registry ui: image: joxit/docker-registry-ui:static ports: - 8080:80 environment: - REGISTRY_TITLE=小吉私有仓库 - REGISTRY_URL=http://registry:5000 depends_on: - registry 然后进行执行
docker-compose up -d 然后我们去浏览器访问一下
访问成功，但是目前还没有镜像
我们来给这个仓库推送几个镜像
推送到私有仓库，一定要给镜像重命名
先查看有什么镜像
我们先打包（tag）一个镜像
再次查看镜像
打包成功
（其实就是重命名成功）
下面我们来上传我们刚刚打包的镜像到自己的私有仓库里面
（注意是push，不是pull）
打开仓库" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f17e47dc2e34a6fb0e8f26839f272913/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-14T21:57:35+08:00" />
<meta property="article:modified_time" content="2024-01-14T21:57:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Docker篇】从0到1搭建自己的镜像仓库并且推送镜像到自己的仓库中</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#docker_5" rel="nofollow">🔎docker私有仓库</a></li><li><a href="#_16" rel="nofollow">🍔具体步骤</a></li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/ee/cc/9PAFwp3P_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="docker_5"></a>🔎docker私有仓库</h2> 
<p>Docker私有仓库的存在为用户提供了更高的灵活性、控制和安全性。与使用公共镜像仓库相比，私有仓库使用户能够完全掌握自己的镜像生命周期。</p> 
<p>首先，私有仓库允许用户在本地或云服务器上部署和管理自己的镜像存储库。这意味着用户可以根据自己的需求和规模进行扩展和配置。无论是将私有仓库部署在本地网络中还是将其放置在云服务器上，用户都可以根据自己的环境和需求进行选择。</p> 
<p>其次，私有仓库提供了安全性方面的优势。用户可以对私有仓库进行访问控制和权限设置，确保只有授权的人员能够推送和拉取镜像。这对于需要保护敏感数据或限制访问的企业环境尤为重要。</p> 
<p>此外，私有仓库还可以提高应用程序部署的可靠性和稳定性。通过使用私有仓库，用户可以确保所使用的镜像的版本和稳定性，避免因为公共仓库的变化导致应用程序出现问题。</p> 
<p>总而言之，Docker私有仓库为用户提供了更高的灵活性、控制和安全性。它允许用户存储、共享和管理自己的镜像，并提供了更多的定制化选项，以适应各种不同的应用场景和需求。</p> 
<h2><a id="_16"></a>🍔具体步骤</h2> 
<p>配置docker信任地址</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/docker/daemon.json
</code></pre> 
<p><img src="https://images2.imgbox.com/21/e9/6waB6pEZ_o.png" alt="在这里插入图片描述"><br> 加入下面的内容</p> 
<pre><code class="prism language-bash"><span class="token string">"insecure-registries"</span>:<span class="token punctuation">[</span><span class="token string">"http://192.168.125.131:8080"</span><span class="token punctuation">]</span>
</code></pre> 
<p>这里面的ip地址改为自己虚拟机的地址</p> 
<p><img src="https://images2.imgbox.com/f3/40/uqFY0cwt_o.png" alt="在这里插入图片描述"></p> 
<p>（注意这后面有一个 逗号 ）</p> 
<p>然后重启一下docker</p> 
<pre><code class="prism language-bash"><span class="token comment"># 重加载</span>
systemctl daemon-reload
<span class="token comment"># 重启docker</span>
systemctl restart <span class="token function">docker</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/55/dLKVc7pC_o.png" alt="在这里插入图片描述"></p> 
<p>然后我们进入tmp文件夹，新建一个文件夹来作为我们存放图像化仓库的地方，并且创建yml文件<br> <img src="https://images2.imgbox.com/c3/b5/gMamUtUn_o.png" alt="在这里插入图片描述"></p> 
<p>把下面的代码写入yml文件中</p> 
<pre><code class="prism language-bash">version: <span class="token string">'3.0'</span>
services:
  registry:
    image: registry
    volumes:
      - ./registry-data:/var/lib/registry
  ui:
    image: joxit/docker-registry-ui:static
    ports:
      - <span class="token number">8080</span>:80
    environment:
      - <span class="token assign-left variable">REGISTRY_TITLE</span><span class="token operator">=</span>小吉私有仓库
      - <span class="token assign-left variable">REGISTRY_URL</span><span class="token operator">=</span>http://registry:5000
    depends_on:
      - registry
</code></pre> 
<p><img src="https://images2.imgbox.com/29/6c/G7hhfzSZ_o.png" alt="在这里插入图片描述"></p> 
<p>然后进行执行</p> 
<pre><code class="prism language-bash"><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3c/72/BsEzEslz_o.png" alt="在这里插入图片描述"></p> 
<p>然后我们去浏览器访问一下<br> <img src="https://images2.imgbox.com/91/97/can8XiER_o.png" alt="在这里插入图片描述"><br> 访问成功，但是目前还没有镜像</p> 
<p>我们来给这个仓库推送几个镜像</p> 
<blockquote> 
 <p>推送到私有仓库，一定要给镜像重命名</p> 
</blockquote> 
<p>先查看有什么镜像</p> 
<p><img src="https://images2.imgbox.com/97/85/jyWFcxsg_o.png" alt="在这里插入图片描述"><br> 我们先打包（tag）一个镜像<br> <img src="https://images2.imgbox.com/da/f5/fIZUJLks_o.png" alt="在这里插入图片描述"><br> 再次查看镜像<br> <img src="https://images2.imgbox.com/45/9c/TpKm1Iea_o.png" alt="在这里插入图片描述"><br> 打包成功<br> （其实就是重命名成功）</p> 
<p>下面我们来上传我们刚刚打包的镜像到自己的私有仓库里面</p> 
<p><img src="https://images2.imgbox.com/c9/d4/L5nOhuDr_o.png" alt="在这里插入图片描述"><br> （注意是push，不是pull）</p> 
<p>打开仓库</p> 
<p><img src="https://images2.imgbox.com/87/b3/nVZoOCOv_o.png" alt="加粗样式"><br> 发现已经存在镜像了，推送成功</p> 
<blockquote> 
 <p>在技术的道路上，我们不断探索、不断前行，不断面对挑战、不断突破自我。科技的发展改变着世界，而我们作为技术人员，也在这个过程中书写着自己的篇章。让我们携手并进，共同努力，开创美好的未来！愿我们在科技的征途上不断奋进，创造出更加美好、更加智能的明天！</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/cf/94/mxl0gC2E_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/576634ebf3518e603ab43418cea46ddb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Web - Angular 的 AJAX 与 REST</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2ee5ec1ca53e75a115c4b022f943fa57/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python和Julia TensorFlow科学计算常微分方程求解器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>