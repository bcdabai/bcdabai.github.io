<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数字图像处理入门（c&#43;&#43;实现，参考北交视频） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数字图像处理入门（c&#43;&#43;实现，参考北交视频）" />
<meta property="og:description" content="目录 1.项目代码2.第一章 基本概念2.1.直方图（code） 3.第二章 图像增强3.1.直方图均衡（code）3.2.卷积运算3.3.低通滤波3.3.1.均值滤波（code）3.3.2.高斯滤波（code） 3.4.中值滤波（code）3.5.高通滤波 4.第三章 数学形态学处理4.1.腐蚀（code）4.2.膨胀（code）4.3.开运算4.4.闭运算 5.第四章 图像分割5.1.基于阈值的方法5.2.基于边缘的方法5.3.基于区域的方法5.4.基于学习的方法 6.总结 我是看着这个学习的，在此推荐一下: 北交图像处理与机器学习
在此记录一下自己的学习过程
1.项目代码 图像处理与机器学习课件和代码地址：传送门
含完整代码的项目可在github下载：
https://github.com/chenshunpeng/Impro_MLearning
ps.
项目第一次运行可能会卡，第二次就好了如果项目需要加载.dll的符号，直接取消即可（即禁用后序符号加载） 2.第一章 基本概念 2.1.直方图（code） 数字图像：以空间位置 ( x , y ) (x,y) (x,y) 为自变量的二维函数 f ( x , y ) f(x,y) f(x,y)
直方图定义：
不同灰度级分布构成不同图像统计灰度级出现的次数（概率）直方图表征了图像中灰度级分布特性 灰度直方图反映了图像灰度的分布（统计）特征
灰度级的函数具有该灰度级的像素个数 计算公式：
h ( r k ) = n k h(r_{k})=n_{k} h(rk​)=nk​
r k 为灰度级 , n 为该灰度级的像素个数 r_{k}为灰度级,n为该灰度级的像素个数 rk​为灰度级,n为该灰度级的像素个数
且有灰度直方图累加： ∑ k = 0 L − 1 h ( r k ) = ∑ k = 0 L − 1 n k = N ( 图像中像素的总个数 ) \sum ^{L-1}_{k=0}h\left( r_{k}\right) =\sum ^{L-1}_{k=0}n_{k}=N\left( 图像中像素的总个数\right) k=0∑L−1​h(rk​)=k=0∑L−1​nk​=N(图像中像素的总个数)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6b46aa0c0102afcc1e35864c9a2a3a6a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-13T18:41:49+08:00" />
<meta property="article:modified_time" content="2022-08-13T18:41:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数字图像处理入门（c&#43;&#43;实现，参考北交视频）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#1_7" rel="nofollow">1.项目代码</a></li><li><a href="#2__20" rel="nofollow">2.第一章 基本概念</a></li><li><ul><li><a href="#21code_21" rel="nofollow">2.1.直方图（code）</a></li></ul> 
  </li><li><a href="#3__102" rel="nofollow">3.第二章 图像增强</a></li><li><ul><li><a href="#31code_114" rel="nofollow">3.1.直方图均衡（code）</a></li><li><a href="#32_175" rel="nofollow">3.2.卷积运算</a></li><li><a href="#33_210" rel="nofollow">3.3.低通滤波</a></li><li><ul><li><a href="#331code_236" rel="nofollow">3.3.1.均值滤波（code）</a></li><li><a href="#332code_272" rel="nofollow">3.3.2.高斯滤波（code）</a></li></ul> 
   </li><li><a href="#34code_318" rel="nofollow">3.4.中值滤波（code）</a></li><li><a href="#35_379" rel="nofollow">3.5.高通滤波</a></li></ul> 
  </li><li><a href="#4__387" rel="nofollow">4.第三章 数学形态学处理</a></li><li><ul><li><a href="#41code_388" rel="nofollow">4.1.腐蚀（code）</a></li><li><a href="#42code_434" rel="nofollow">4.2.膨胀（code）</a></li><li><a href="#43_476" rel="nofollow">4.3.开运算</a></li><li><a href="#44_482" rel="nofollow">4.4.闭运算</a></li></ul> 
  </li><li><a href="#5__488" rel="nofollow">5.第四章 图像分割</a></li><li><ul><li><a href="#51_489" rel="nofollow">5.1.基于阈值的方法</a></li><li><a href="#52_492" rel="nofollow">5.2.基于边缘的方法</a></li><li><a href="#53_495" rel="nofollow">5.3.基于区域的方法</a></li><li><a href="#54_499" rel="nofollow">5.4.基于学习的方法</a></li></ul> 
  </li><li><a href="#6_502" rel="nofollow">6.总结</a></li></ul> 
</div> 
<br> 我是看着这个学习的，在此推荐一下: 
<p></p> 
<blockquote> 
 <p><a href="https://www.bilibili.com/video/BV1Kh411X7Qv?p=20" rel="nofollow">北交图像处理与机器学习</a></p> 
</blockquote> 
<p>在此记录一下自己的学习过程<br> <img src="https://images2.imgbox.com/9a/3a/7sswFLYN_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="1_7"></a>1.项目代码</h2> 
<p>图像处理与机器学习课件和代码地址：<a href="https://gitee.com/zzhzwh/Image-processing-and-machine-learning/tree/master" rel="nofollow">传送门</a></p> 
<p>含完整代码的项目可在github下载：</p> 
<p><a href="https://github.com/chenshunpeng/Impro_MLearning">https://github.com/chenshunpeng/Impro_MLearning</a></p> 
<p><strong>ps.</strong></p> 
<ul><li>项目第一次运行可能会卡，第二次就好了</li><li>如果项目需要加载.dll的符号，直接取消即可（即禁用后序符号加载）</li></ul> 
<h2><a id="2__20"></a>2.第一章 基本概念</h2> 
<h3><a id="21code_21"></a>2.1.直方图（code）</h3> 
<p><img src="https://images2.imgbox.com/a0/72/5fdyZTwK_o.png" alt="在这里插入图片描述"></p> 
<p>数字图像：以空间位置 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
       
         x 
        
       
         , 
        
       
         y 
        
       
         ) 
        
       
      
        (x,y) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mclose">)</span></span></span></span></span> 为自变量的二维函数 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         f 
        
       
         ( 
        
       
         x 
        
       
         , 
        
       
         y 
        
       
         ) 
        
       
      
        f(x,y) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mclose">)</span></span></span></span></span></p> 
<p>直方图定义：</p> 
<ul><li>不同灰度级<strong>分布</strong>构成不同图像</li><li>统计<strong>灰度级</strong>出现的次数（概率）</li><li>直方图表征了图像中灰度级分布特性</li></ul> 
<p>灰度直方图反映了图像灰度的分布（统计）特征</p> 
<ul><li><strong>灰度</strong>级的函数</li><li>具有该灰度级的<strong>像素个数</strong></li></ul> 
<p>计算公式：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          h 
         
        
          ( 
         
         
         
           r 
          
         
           k 
          
         
        
          ) 
         
        
          = 
         
         
         
           n 
          
         
           k 
          
         
        
       
         h(r_{k})=n_{k} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           r 
          
         
           k 
          
         
        
          为灰度级 
         
        
          , 
         
        
          n 
         
        
          为该灰度级的像素个数 
         
        
       
         r_{k}为灰度级,n为该灰度级的像素个数 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord cjk_fallback">为灰度级</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">为该灰度级的像素个数</span></span></span></span></span></span><br> <img src="https://images2.imgbox.com/ec/40/4JAisD1p_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/56/3c/A0DvEodw_o.png" alt="在这里插入图片描述"></p> 
<p>且有灰度直方图累加：<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           ∑ 
          
          
          
            k 
           
          
            = 
           
          
            0 
           
          
          
          
            L 
           
          
            − 
           
          
            1 
           
          
         
        
          h 
         
         
         
           ( 
          
          
          
            r 
           
          
            k 
           
          
         
           ) 
          
         
        
          = 
         
         
         
           ∑ 
          
          
          
            k 
           
          
            = 
           
          
            0 
           
          
          
          
            L 
           
          
            − 
           
          
            1 
           
          
         
         
         
           n 
          
         
           k 
          
         
        
          = 
         
        
          N 
         
         
         
           ( 
          
         
           图像中像素的总个数 
          
         
           ) 
          
         
        
       
         \sum ^{L-1}_{k=0}h\left( r_{k}\right) =\sum ^{L-1}_{k=0}n_{k}=N\left( 图像中像素的总个数\right) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 3.1304em; vertical-align: -1.3021em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8283em;"><span class="" style="top: -1.8479em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.3021em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 3.1304em; vertical-align: -1.3021em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8283em;"><span class="" style="top: -1.8479em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.3021em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord cjk_fallback">图像中像素的总个数</span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span></p> 
<p>之后我们来写这部分的代码：</p> 
<p>首先有初始化：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 计算图像直方图</span>
<span class="token keyword">int</span> histFlag<span class="token punctuation">;</span>
<span class="token keyword">int</span> hist<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//存储图像直方图，256灰度级</span>
<span class="token keyword">void</span> <span class="token function">histCompute</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算图像直方图函数</span>
</code></pre> 
<p>添加好事件处理函数，调用求取直方图函数，更新窗口，显示直方图</p> 
<pre><code class="prism language-cpp"><span class="token comment">//计算图像直方图</span>
<span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">HistCompute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">// TODO: 完成histCompute函数设计</span>

	<span class="token comment">//求取直方图的函数</span>
	<span class="token function">histCompute</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
	histFlag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token comment">//更新窗口，显示直方图的部分</span>
	<span class="token function">OnInitialUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	CRect ClientRect<span class="token punctuation">;</span>
	<span class="token function">GetClientRect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ClientRect<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">InvalidateRect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ClientRect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>计算直方图部分：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">histCompute</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span>image<span class="token punctuation">,</span> <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//计算直方图</span>
	<span class="token keyword">int</span> n<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		hist<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
	BYTE gray<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			gray <span class="token operator">=</span> image<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//根据定义来求就好</span>
			hist<span class="token punctuation">[</span>gray<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果想方便切换图片，可以修改路径，之后用键盘右上角的<code>page down</code>和<code>page up</code>键即可实现切换图片（当然也可以不改，用鼠标切换也很方便）：</p> 
<p><img src="https://images2.imgbox.com/42/03/iXfy8WpX_o.png" alt="在这里插入图片描述"></p> 
<p>最后成功显示出结果：</p> 
<p><img src="https://images2.imgbox.com/2d/bc/f87PXgjF_o.png" alt="在这里插入图片描述"><br> 核心代码位置：<br> <img src="https://images2.imgbox.com/d8/8e/c26H4e3F_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__102"></a>3.第二章 图像增强</h2> 
<p><img src="https://images2.imgbox.com/6e/5a/x67aelfs_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8f/70/QP9zGHHQ_o.png" alt="在这里插入图片描述"><br> 首先进行灰度变换：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          D 
         
        
          B 
         
        
       
         = 
        
       
         f 
        
       
         ( 
        
        
        
          D 
         
        
          A 
         
        
       
         ) 
        
       
      
        D_{B}=f(D_{A}) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          H 
         
        
          A 
         
        
        
        
          ( 
         
         
         
           D 
          
         
           A 
          
         
        
          ) 
         
        
       
      
        H_{A}\left( D_{A}\right) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span>：变换之前图像的直方图<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          H 
         
        
          B 
         
        
        
        
          ( 
         
         
         
           D 
          
         
           B 
          
         
        
          ) 
         
        
       
      
        H_{B}\left( D_{B}\right) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span>：变换之后图像的直方图</p> 
<p>有如下结论：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           H 
          
         
           B 
          
         
         
         
           ( 
          
          
          
            D 
           
          
            B 
           
          
         
           ) 
          
         
        
          = 
         
         
          
           
           
             H 
            
           
             A 
            
           
           
           
             ( 
            
            
            
              D 
             
            
              A 
             
            
           
             ) 
            
           
          
          
           
           
             f 
            
           
             ′ 
            
           
           
           
             ( 
            
            
            
              D 
             
            
              A 
             
            
           
             ) 
            
           
          
         
        
       
         H_{B}\left( D_{B}\right)=\dfrac{H_{A}\left( D_{A}\right)}{f'\left( D_{A}\right) } 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.363em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6779em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<p>即灰度变换后图像直方图是变换前直方图与变换函数导数之比</p> 
<h3><a id="31code_114"></a>3.1.直方图均衡（code）</h3> 
<ul><li>直方图均衡化处理之后，原来比较少像素的灰度会被分配到别的灰度去，像素相对集中， 处理后灰度范围变大，对比度变大，清晰度变大，所以能有效增强图像</li><li>这种方法通常用来增加许多图像的局部对比度，尤其是当图像的有用数据的对比度相当接近的时候，通过这种方法，亮度可以更好地在直方图上分布</li><li>可以用于增强局部的对比度而不影响整体的对比度，直方图均衡化通过有效地扩展常用的亮度来实现这种功能</li></ul> 
<p>改变后使每个灰度级拥有<strong>相同</strong>的像素个数，即出现<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           H 
          
         
           B 
          
         
         
         
           ( 
          
          
          
            D 
           
          
            B 
           
          
         
           ) 
          
         
        
          = 
         
         
          
           
           
             H 
            
           
             A 
            
           
           
           
             ( 
            
            
            
              D 
             
            
              A 
             
            
           
             ) 
            
           
          
          
           
           
             f 
            
           
             ′ 
            
           
           
           
             ( 
            
            
            
              D 
             
            
              A 
             
            
           
             ) 
            
           
          
         
        
          = 
         
        
          常数 
         
        
          = 
         
         
          
          
            A 
           
          
            0 
           
          
          
          
            D 
           
          
            m 
           
          
         
        
       
         H_{B}\left( D_{B}\right)=\dfrac{H_{A}\left( D_{A}\right)}{f'\left( D_{A}\right) }=常数=\dfrac{A_{0}}{D_{m}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.363em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6779em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback">常数</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.1963em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3603em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<p>其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          D 
         
        
          m 
         
        
       
      
        D_{m} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>代表灰度级，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          A 
         
        
          0 
         
        
       
      
        A_{0} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 代表 <strong><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           D 
          
         
           m 
          
         
        
       
         D_{m} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>这个灰度级上的</strong> 图像像素总数</p> 
<p>通过积分最终得到：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           D 
          
         
           B 
          
         
        
          = 
         
         
          
          
            D 
           
          
            m 
           
          
          
          
            A 
           
          
            0 
           
          
         
        
          ⋅ 
         
         
         
           ∑ 
          
         
           0 
          
          
          
            D 
           
          
            A 
           
          
         
         
         
           H 
          
         
           A 
          
         
         
         
           ( 
          
          
          
            D 
           
          
            A 
           
          
         
           ) 
          
         
        
       
         D_{B}=\dfrac{D_{m}}{A_{0}}\cdot \sum ^{D_{A}}_{0}H_{A}\left( D_{A}\right) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0502em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.1963em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3603em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 3.1068em; vertical-align: -1.2671em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8396em;"><span class="" style="top: -1.8829em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3113em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3567em; margin-left: -0.0278em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.1433em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.2671em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span></p> 
<p>这种技术可应用于<strong>人脸识别</strong>中</p> 
<p>我们来研究一下代码，共有3步：</p> 
<ol><li>计算输入图像直方图</li><li>计算像素新的灰度级</li><li>新灰度级替换原灰度级</li></ol> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">hisEqualiz</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> outImg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//直方图均衡</span>
	<span class="token comment">//计算输入图像直方图</span>
	<span class="token keyword">int</span> his<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> n<span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		his<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
			his<span class="token punctuation">[</span>image<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token comment">//利用公式，计算像素新的灰度级</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>
		his<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">+=</span> his<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	BYTE gray<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> cons<span class="token punctuation">;</span>
	cons <span class="token operator">=</span> <span class="token number">255.0</span> <span class="token operator">/</span> his<span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>
		gray<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>BYTE<span class="token punctuation">)</span><span class="token punctuation">(</span>cons <span class="token operator">*</span> his<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//新灰度级替换原灰度级</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
			outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token operator">=</span>gray<span class="token punctuation">[</span>image<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>其中注意一下<code>BYTE* image</code>的数据结构定义（在<code>minwindef.h</code>中）：<br> <img src="https://images2.imgbox.com/9c/b7/ClwfhvW3_o.png" alt="在这里插入图片描述"></p> 
<p>成功显示出结果：</p> 
<p><img src="https://images2.imgbox.com/dd/32/KFAwspns_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/50/llLkO5og_o.png" alt="在这里插入图片描述"></p> 
<p>核心代码位置：</p> 
<p><img src="https://images2.imgbox.com/48/df/neb38yr1_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_175"></a>3.2.卷积运算</h3> 
<p>这部分是看着这个学习的，在此推荐一下:</p> 
<blockquote> 
 <p><a href="https://www.icourse163.org/learn/BUPT-1003556005?tid=1467043445#/learn/announce" rel="nofollow">信号与系统（MOOK，北邮）</a></p> 
</blockquote> 
<p>首先了解最基本的名词：</p> 
<p><img src="https://images2.imgbox.com/a6/a9/gCfCrbQf_o.png" alt="在这里插入图片描述"></p> 
<p>之后需要了解单位冲激函数和单位阶跃函数（一些奇异信号）：</p> 
<p><img src="https://images2.imgbox.com/23/54/7syYH0lU_o.png" alt="在这里插入图片描述"><br> 关系如下：<br> <img src="https://images2.imgbox.com/75/00/2xtooYJM_o.png" alt="在这里插入图片描述"><br> 之后引入<strong>卷积</strong>：</p> 
<p>从<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         τ 
        
       
         = 
        
       
         − 
        
       
         ∞ 
        
       
      
        \tau =-\infty 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.1132em;">τ</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">∞</span></span></span></span></span>到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ∞ 
        
       
      
        \infty 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord">∞</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         e 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
      
        e(t) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>可表示为许多窄脉冲的叠加</p> 
<p><img src="https://images2.imgbox.com/4c/1c/MIZdgqhb_o.png" alt="在这里插入图片描述"></p> 
<p>将任意信号表示为时移单位冲激信号的加权叠加：</p> 
<p><img src="https://images2.imgbox.com/fe/07/1Zz4WUwP_o.png" alt="在这里插入图片描述"></p> 
<p>利用卷积求系统的零状态响应：</p> 
<p><img src="https://images2.imgbox.com/87/fd/9AnvRE8a_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/74/cd/WRG9MWl8_o.png" alt="在这里插入图片描述"></p> 
<p>卷积的物理意义：</p> 
<p><img src="https://images2.imgbox.com/ae/44/fQy7LKcJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ac/2d/OrGNx9Te_o.png" alt="在这里插入图片描述"><br> 总结一下，公式即：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          f 
         
         
         
           ( 
          
         
           t 
          
         
           ) 
          
         
        
          = 
         
         
         
           f 
          
         
           1 
          
         
         
         
           ( 
          
         
           t 
          
         
           ) 
          
         
        
          ∗ 
         
         
         
           f 
          
         
           2 
          
         
         
         
           ( 
          
         
           t 
          
         
           ) 
          
         
        
          = 
         
         
         
           ∫ 
          
          
          
            − 
           
          
            ∞ 
           
          
         
           ∞ 
          
         
         
         
           f 
          
         
           1 
          
         
         
         
           ( 
          
         
           τ 
          
         
           ) 
          
         
         
         
           f 
          
         
           2 
          
         
         
         
           ( 
          
         
           t 
          
         
           − 
          
         
           τ 
          
         
           ) 
          
         
        
          d 
         
        
          τ 
         
        
       
         f\left( t\right) =f_{1}\left( t\right) \ast f_{2}\left( t\right) =\int _{-\infty }^{\infty }f_{1}\left( \tau\right) f_{2}\left( t-\tau \right) d\tau 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathnormal">t</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathnormal">t</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathnormal">t</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.3846em; vertical-align: -0.9703em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right: 0.4445em; position: relative; top: -0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.4143em;"><span class="" style="top: -1.7881em; margin-left: -0.4445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span class="" style="top: -3.8129em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.9703em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathnormal" style="margin-right: 0.1132em;">τ</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal" style="margin-right: 0.1132em;">τ</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.1132em;">τ</span></span></span></span></span></span></p> 
<h3><a id="33_210"></a>3.3.低通滤波</h3> 
<p>低通滤波的显著作用：<strong>实现图像平滑</strong></p> 
<p><img src="https://images2.imgbox.com/71/5d/H8PElgGA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/37/35/5ti6VEi2_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e6/54/GGZ0anP3_o.png" alt="在这里插入图片描述"></p> 
<p>代码部分：</p> 
<p>我们用到的卷积公式：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          y 
         
        
          ( 
         
        
          j 
         
        
          , 
         
        
          i 
         
        
          ) 
         
        
          = 
         
        
          h 
         
        
          ( 
         
        
          j 
         
        
          , 
         
        
          i 
         
        
          ) 
         
        
          ∗ 
         
        
          j 
         
        
          ( 
         
        
          j 
         
        
          , 
         
        
          i 
         
        
          ) 
         
        
          = 
         
         
         
           ∑ 
          
         
           m 
          
         
         
         
           ∑ 
          
         
           n 
          
         
        
          h 
         
        
          ( 
         
        
          m 
         
        
          , 
         
        
          n 
         
        
          ) 
         
        
          x 
         
        
          ( 
         
        
          j 
         
        
          + 
         
        
          m 
         
        
          , 
         
        
          i 
         
        
          + 
         
        
          n 
         
        
          ) 
         
        
       
         y(j,i)=h(j,i)\ast j(j,i)=\sum _{m}\sum _{n}h(m,n)x(j+m,i+n) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.3em; vertical-align: -1.25em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05em;"><span class="" style="top: -1.9em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05em;"><span class="" style="top: -1.9em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.854em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></span></p> 
<p>点对点相乘的代码：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">convolution</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> operatr<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> block<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> value<span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
	value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//卷积运算</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
			value <span class="token operator">+=</span> operatr<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">*</span> block<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="331code_236"></a>3.3.1.均值滤波（code）</h4> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
           
            
            
              y 
             
            
              ( 
             
            
              j 
             
            
              , 
             
            
              i 
             
            
              ) 
             
            
              = 
             
             
             
               ∑ 
              
             
               m 
              
             
             
             
               ∑ 
              
             
               n 
              
             
            
              h 
             
            
              ( 
             
            
              m 
             
            
              , 
             
            
              n 
             
            
              ) 
             
            
              x 
             
            
              ( 
             
            
              j 
             
            
              + 
             
            
              m 
             
            
              , 
             
            
              i 
             
            
              + 
             
            
              n 
             
            
              ) 
             
            
           
          
         
         
          
           
            
            
              = 
             
             
             
               1 
              
             
               9 
              
             
             
             
               ∑ 
              
              
              
                m 
               
              
                = 
               
              
                − 
               
              
                1 
               
              
             
               1 
              
             
             
             
               ∑ 
              
              
              
                n 
               
              
                = 
               
              
                − 
               
              
                1 
               
              
             
               1 
              
             
            
              x 
             
            
              ( 
             
            
              j 
             
            
              + 
             
            
              m 
             
            
              , 
             
            
              i 
             
            
              + 
             
            
              n 
             
            
              ) 
             
            
           
          
         
        
       
         \begin{aligned}y(j,i)=\sum _{m}\sum _{n}h(m,n)x(j+m,i+n)\\ =\dfrac{1}{9}\sum ^{1}_{m=-1}\sum ^{1}_{n=-1}x(j+m,i+n)\end{aligned} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 6.0266em; vertical-align: -2.7633em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.2633em;"><span class="" style="top: -6.0144em;"><span class="pstrut" style="height: 3.8011em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05em;"><span class="" style="top: -1.9em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05em;"><span class="" style="top: -1.9em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span><span class="" style="top: -2.6633em;"><span class="pstrut" style="height: 3.8011em;"></span><span class="mord"><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3214em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">9</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8011em;"><span class="" style="top: -1.8829em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.3254em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8011em;"><span class="" style="top: -1.8829em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.3254em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.7633em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<p>注意 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
         l 
        
       
         o 
        
       
         c 
        
       
         k 
        
       
      
        block 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">oc</span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span> 的大小设为9就可以了，省空间</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">meanFilter</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> heigth<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> outImg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//均值滤波</span>
	<span class="token keyword">int</span> smth<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span>
	BYTE block<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> value<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		smth<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//最外面这一圈不做卷积运算了，即外圈灰度级直接置0</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">==</span> height <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">||</span> j <span class="token operator">==</span> width <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
				outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>m <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>
						block<span class="token punctuation">[</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">+</span> j <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>
				value <span class="token operator">=</span> <span class="token function">convolution</span><span class="token punctuation">(</span>smth<span class="token punctuation">,</span> block<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				<span class="token comment">//归一化的步骤</span>
				outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">BYTE</span><span class="token punctuation">(</span>value <span class="token operator">/</span> <span class="token number">9.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>Additive_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/80/af/ZVda31Kb_o.png" alt="在这里插入图片描述"><br> <code>Pulse_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/e2/7b/bFJPE2tI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="332code_272"></a>3.3.2.高斯滤波（code）</h4> 
<p><img src="https://images2.imgbox.com/18/cf/WhG9DTyK_o.png" alt="在这里插入图片描述"></p> 
<p>高斯滤波的归一化因子是16，因此除以16就行</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">gaussian</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> heigth<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> outImg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//高斯滤波</span>
	<span class="token keyword">int</span> smth<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span>
	BYTE block<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> value<span class="token punctuation">;</span>

	smth<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> smth<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
	smth<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> smth<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	smth<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> smth<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	smth<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> smth<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
				 smth<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">==</span> height <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">||</span> j <span class="token operator">==</span> width <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
				outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>m <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>
						block<span class="token punctuation">[</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">+</span> j <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>
				value <span class="token operator">=</span> <span class="token function">convolution</span><span class="token punctuation">(</span>smth<span class="token punctuation">,</span> block<span class="token punctuation">)</span><span class="token punctuation">;</span>
				outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">BYTE</span><span class="token punctuation">(</span>value <span class="token operator">/</span> <span class="token number">16.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>Additive_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/60/49/fKApyPZM_o.png" alt="在这里插入图片描述"><br> <code>Pulse_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/e8/15/ChUmpID4_o.png" alt="在这里插入图片描述"></p> 
<p>附上直方图均衡：</p> 
<p><code>Additive_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/c1/aa/j0i7eORv_o.png" alt="在这里插入图片描述"><br> <code>Pulse_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/0c/92/HjPkQfnC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="34code_318"></a>3.4.中值滤波（code）</h3> 
<p>为了在去除噪声的过程中、不模糊边缘，可以采用中值滤波：</p> 
<p><img src="https://images2.imgbox.com/ee/b1/GzQlDS4Z_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cf/9e/hNUDAuGD_o.png" alt="在这里插入图片描述"><br> 代码部分：</p> 
<p>中值滤波函数：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">midFindFiltering</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> heigth<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> outImg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//中值滤波</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span>
	BYTE block<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> value<span class="token punctuation">;</span>
	<span class="token keyword">int</span> blockNum <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> width<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">==</span> height <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">||</span> j <span class="token operator">==</span> width <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
				outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>m <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>
						block<span class="token punctuation">[</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">+</span> j <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>
				value <span class="token operator">=</span> <span class="token function">MidValueFind</span><span class="token punctuation">(</span>blockNum<span class="token punctuation">,</span> block<span class="token punctuation">)</span><span class="token punctuation">;</span>
				outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> width <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
        
        
          n 
         
        
          2 
         
        
       
         ) 
        
       
      
        O(n^2) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>的排序函数，有兴趣推荐改成<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         n 
        
       
         l 
        
       
         o 
        
       
         g 
        
       
         n 
        
       
         ) 
        
       
      
        O(nlogn) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">MidValueFind</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> d<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> value<span class="token punctuation">;</span>

	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
	<span class="token keyword">int</span> temp<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> d<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				temp <span class="token operator">=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
				d<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">return</span> d<span class="token punctuation">[</span>num <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>中值滤波：</p> 
<p><code>Additive_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/be/9c/wXymahOy_o.png" alt="在这里插入图片描述"></p> 
<p><code>Pulse_Noised_Image.raw</code><br> <img src="https://images2.imgbox.com/9f/c4/LrVmLsTH_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="35_379"></a>3.5.高通滤波</h3> 
<p>高通滤波的显著作用：<strong>实现图像锐化</strong><br> <img src="https://images2.imgbox.com/d2/f2/7frxgPJj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/31/9b/ApKygXFf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/db/55/rVIvHD3D_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ee/d8/Eis6i90O_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f4/a5/lIZNmz92_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4__387"></a>4.第三章 数学形态学处理</h2> 
<h3><a id="41code_388"></a>4.1.腐蚀（code）</h3> 
<ul><li>一种消除边界点，使边界向内部收缩的过程，用来消除小且无意义的物体</li><li>图形点(gray=255)在其3x3邻域，只要有若干个背景点，则该点设为背景点(0)。</li></ul> 
<p><img src="https://images2.imgbox.com/42/82/7Q0U6xFD_o.png" alt="在这里插入图片描述"></p> 
<ul><li>我们选择的是2值图像，即像素大小只有0（背景点）和255（图形点）</li><li>图像最外圈像素点不予处理</li></ul> 
<p>代码实现：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">erosion</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> outImg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> rept<span class="token punctuation">;</span>
	<span class="token comment">//多次腐蚀，把结果图像image拷贝至outImg</span>
	<span class="token function">memcpy</span><span class="token punctuation">(</span>outImg<span class="token punctuation">,</span> image<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>BYTE<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
	<span class="token keyword">int</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span>
	BYTE flag<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>rept <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rept <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> rept<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//多次腐蚀</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//找到一个图形点</span>
					flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>m <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> w <span class="token operator">+</span> j <span class="token operator">+</span> n<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
								flag<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//3x3邻域包含多少个背景点</span>
								<span class="token keyword">break</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
						outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//该图形点设为背景点</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">memcpy</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> outImg<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>BYTE<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>腐蚀结果：</p> 
<p><img src="https://images2.imgbox.com/ea/2d/9428nMZ0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="42code_434"></a>4.2.膨胀（code）</h3> 
<p>将与物体接触所有背景点合并到该物体中，使边界向外部扩张的过程，可以用来填补物体中的空洞</p> 
<p><img src="https://images2.imgbox.com/f6/d2/oObgNioc_o.png" alt="在这里插入图片描述"><br> 与腐蚀不同的是，我们关注的是图像的背景点，如果背景点周围有一定个数的图形点，我们就将这个背景点设为图形点</p> 
<p>代码实现：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">CMFCApplication1View</span><span class="token double-colon punctuation">::</span><span class="token function">dilation</span><span class="token punctuation">(</span>BYTE<span class="token operator">*</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> BYTE<span class="token operator">*</span> outImg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> rept<span class="token punctuation">;</span>
	<span class="token comment">//膨胀</span>
	<span class="token function">memcpy</span><span class="token punctuation">(</span>outImg<span class="token punctuation">,</span> image<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>BYTE<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
	<span class="token keyword">int</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span>
	BYTE flag<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>rept <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rept <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> rept<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//多次膨胀</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//找到一个背景点(gray=0)</span>
					flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>m <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> w <span class="token operator">+</span> j <span class="token operator">+</span> n<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
								flag<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//3x3邻域包含多少个图形点</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
						outImg<span class="token punctuation">[</span>i <span class="token operator">*</span> w <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span><span class="token comment">//该图形点设为图形点</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">memcpy</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> outImg<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>BYTE<span class="token punctuation">)</span> <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>膨胀：</p> 
<p><img src="https://images2.imgbox.com/c4/2a/3KdlCj4a_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="43_476"></a>4.3.开运算</h3> 
<p>先腐蚀后膨胀，能够消除图像区域 <strong>外</strong> 的 <strong>小白点</strong>（噪声）</p> 
<p><img src="https://images2.imgbox.com/29/63/OqlMpg9r_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="44_482"></a>4.4.闭运算</h3> 
<p>先膨胀后腐蚀，能够消除图像区域 <strong>内</strong> 的 <strong>小黑点</strong>（噪声）</p> 
<p><img src="https://images2.imgbox.com/bc/10/c0gfm0LS_o.png" alt="在这里插入图片描述"><br> 开闭运算可以保持物体原有大小，一个是消除物体外部噪声（开运算）的，另一个是增强物体之间连接点（闭运算）的</p> 
<h2><a id="5__488"></a>5.第四章 图像分割</h2> 
<h3><a id="51_489"></a>5.1.基于阈值的方法</h3> 
<p><img src="https://images2.imgbox.com/1e/a1/8zgLm8yc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/73/af/RmYoa8RE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="52_492"></a>5.2.基于边缘的方法</h3> 
<p><img src="https://images2.imgbox.com/79/41/ZcVLvLO8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f6/cb/csT0ZGKL_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="53_495"></a>5.3.基于区域的方法</h3> 
<p><img src="https://images2.imgbox.com/bb/ed/Iq7b1k2N_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/96/2d/mijGDtcR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="54_499"></a>5.4.基于学习的方法</h3> 
<p><img src="https://images2.imgbox.com/49/20/v4Aj9zQt_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6_502"></a>6.总结</h2> 
<p><img src="https://images2.imgbox.com/6e/46/rrvZdAAw_o.png" alt="在这里插入图片描述"><br> 数字图像处理需要认真的分析，本文涉及的算法都很简单，而且自己动手调参就可以看到变化，也易于解释（比如在腐蚀运算中，把邻域背景点判断范围从大于2放大为大于1）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d1a80956d8881d1690063ec43440f1fe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">lombok插件的bug-(对象的属性以一个小写字母一个大写字母开头的赋值不上)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ec6b1efd669dea1490d7238326203d2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人事管理系统 —— 数据库&#43;可视化</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>