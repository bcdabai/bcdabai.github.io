<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Swagger2入门 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Swagger2入门" />
<meta property="og:description" content="目录
1.背景介绍
2.什么是Swagger2
3.常用注解
4.SpringBoot整合Swagger2
4.1.导入依赖
4.2.创建Swagger配置类
4.3.综合案例​编辑
@Api
@ApiOperation
@ApiImplicitParam
@ApiImplicitParams
@ApiModel和@ApiModelProperty
@ApiParam
5.生产环境下屏蔽Swagger2
5.1.修改Swagger2配置类
5.2.修改application.yml
5.3.使用maven package打包测试​编辑
5.4.运行测试
1.背景介绍 在团队开发中，一个好的 API 文档不但可以减少大量的沟通成本，还可以帮助一位新人快速上手业务。传统的做法是由开发人员创建一份 RESTful API 文档来记录所有的接口细节，并在程序员之间代代相传。这种做法存在以下几个问题：
1）API 接口众多，细节复杂，需要考虑不同的HTTP请求类型、HTTP头部信息、HTTP请求内容等，想要高质量的完成这份文档需要耗费大量的精力；
2）难以维护。随着需求的变更和项目的优化、推进，接口的细节在不断地演变，接口描述文档也需要同步修订，可是文档和代码处于两个不同的媒介，除非有严格的管理机制，否则很容易出现文档、接口不一致的情况；
Swagger2 的出现就是为了从根本上解决上述问题。它作为一个规范和完整的框架，可以用于生成、描述、调用和可视化 RESTful 风格的 Web 服务：
接口文档在线自动生成，文档随接口变动实时更新，节省维护成本；
支持在线接口测试，不依赖第三方工具；
2.什么是Swagger2 Swagger2 是一个规范和完整的框架，用于生成、描述、调用和可视化Restful风格的web服务，现在我们使用spring boot 整合它。作用：
接口的文档在线自动生成；
功能测试；
3.常用注解 注解描述@Api将类标记为 Swagger 资源。@ApiImplicitParam表示 API 操作中的单个参数。@ApiImplicitParams允许多个 ApiImplicitParam 对象列表的包装器。@ApiModel提供有关 Swagger 模型的其他信息。@ApiModelProperty添加和操作模型属性的数据。@ApiOperation描述针对特定路径的操作或通常是 HTTP 方法。@ApiParam为操作参数添加额外的元数据。@ApiResponse描述操作的可能响应。@ApiResponses允许多个 ApiResponse 对象列表的包装器。@Authorization声明要在资源或操作上使用的授权方案。@AuthorizationScope描述 OAuth2 授权范围。 4.SpringBoot整合Swagger2 4.1.导入依赖 &lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;swagger-models&lt;/artifactId&gt; &lt;groupId&gt;io." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f85898a0129b64eb935660407a47207f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T22:29:05+08:00" />
<meta property="article:modified_time" content="2024-01-03T22:29:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Swagger2入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1.%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#1.%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D" rel="nofollow">1.背景介绍</a></p> 
<p id="2.%E4%BB%80%E4%B9%88%E6%98%AFSwagger2-toc" style="margin-left:0px;"><a href="#2.%E4%BB%80%E4%B9%88%E6%98%AFSwagger2" rel="nofollow">2.什么是Swagger2</a></p> 
<p id="3.%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3-toc" style="margin-left:0px;"><a href="#3.%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3" rel="nofollow">3.常用注解</a></p> 
<p id="4.SpringBoot%E6%95%B4%E5%90%88Swagger2-toc" style="margin-left:0px;"><a href="#4.SpringBoot%E6%95%B4%E5%90%88Swagger2" rel="nofollow">4.SpringBoot整合Swagger2</a></p> 
<p id="4.1.%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96-toc" style="margin-left:40px;"><a href="#4.1.%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96" rel="nofollow">4.1.导入依赖</a></p> 
<p id="4.2.%E5%88%9B%E5%BB%BASwagger%E9%85%8D%E7%BD%AE%E7%B1%BB-toc" style="margin-left:40px;"><a href="#4.2.%E5%88%9B%E5%BB%BASwagger%E9%85%8D%E7%BD%AE%E7%B1%BB" rel="nofollow">4.2.创建Swagger配置类</a></p> 
<p id="4.3.%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#4.3.%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">4.3.综合案例​编辑</a></p> 
<p id="%40Api-toc" style="margin-left:80px;"><a href="#%40Api" rel="nofollow">@Api</a></p> 
<p id="%40ApiOperation-toc" style="margin-left:80px;"><a href="#%40ApiOperation" rel="nofollow">@ApiOperation</a></p> 
<p id="%40ApiImplicitParam-toc" style="margin-left:80px;"><a href="#%40ApiImplicitParam" rel="nofollow">@ApiImplicitParam</a></p> 
<p id="%40ApiImplicitParams-toc" style="margin-left:80px;"><a href="#%40ApiImplicitParams" rel="nofollow">@ApiImplicitParams</a></p> 
<p id="%40ApiModel%E5%92%8C%40ApiModelProperty-toc" style="margin-left:80px;"><a href="#%40ApiModel%E5%92%8C%40ApiModelProperty" rel="nofollow">@ApiModel和@ApiModelProperty</a></p> 
<p id="%40ApiParam-toc" style="margin-left:80px;"><a href="#%40ApiParam" rel="nofollow">@ApiParam</a></p> 
<p id="5.%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%B1%8F%E8%94%BDSwagger2-toc" style="margin-left:0px;"><a href="#5.%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%B1%8F%E8%94%BDSwagger2" rel="nofollow">5.生产环境下屏蔽Swagger2</a></p> 
<p id="5.1.%E4%BF%AE%E6%94%B9Swagger2%E9%85%8D%E7%BD%AE%E7%B1%BB-toc" style="margin-left:40px;"><a href="#5.1.%E4%BF%AE%E6%94%B9Swagger2%E9%85%8D%E7%BD%AE%E7%B1%BB" rel="nofollow">5.1.修改Swagger2配置类</a></p> 
<p id="5.2.%E4%BF%AE%E6%94%B9application.yml-toc" style="margin-left:40px;"><a href="#5.2.%E4%BF%AE%E6%94%B9application.yml" rel="nofollow">5.2.修改application.yml</a></p> 
<p id="5.3.%E4%BD%BF%E7%94%A8maven%20package%E6%89%93%E5%8C%85%E6%B5%8B%E8%AF%95%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#5.3.%E4%BD%BF%E7%94%A8maven%20package%E6%89%93%E5%8C%85%E6%B5%8B%E8%AF%95%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">5.3.使用maven package打包测试​编辑</a></p> 
<p id="5.4.%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95-toc" style="margin-left:40px;"><a href="#5.4.%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95" rel="nofollow">5.4.运行测试</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E8%83%8C%E6%99%AF%E4%BB%8B%E7%BB%8D">1.背景介绍</h2> 
<p>在团队开发中，一个好的 API 文档不但可以减少大量的沟通成本，还可以帮助一位新人快速上手业务。传统的做法是由开发人员创建一份 RESTful API 文档来记录所有的接口细节，并在程序员之间代代相传。这种做法存在以下几个问题：</p> 
<p>1）API 接口众多，细节复杂，需要考虑不同的HTTP请求类型、HTTP头部信息、HTTP请求内容等，想要高质量的完成这份文档需要耗费大量的精力；</p> 
<p>2）难以维护。随着需求的变更和项目的优化、推进，接口的细节在不断地演变，接口描述文档也需要同步修订，可是文档和代码处于两个不同的媒介，除非有严格的管理机制，否则很容易出现文档、接口不一致的情况；</p> 
<p><strong>Swagger2</strong> 的出现就是为了从根本上解决上述问题。它作为一个规范和完整的框架，可以用于生成、描述、调用和可视化 RESTful 风格的 Web 服务：</p> 
<ul><li> <p>接口文档在线自动生成，文档随接口变动实时更新，节省维护成本；</p> </li><li> <p>支持在线接口测试，不依赖第三方工具；</p> </li></ul> 
<p></p> 
<h2 id="2.%E4%BB%80%E4%B9%88%E6%98%AFSwagger2">2.什么是Swagger2</h2> 
<p><strong>Swagger2</strong> 是一个规范和完整的框架，用于生成、描述、调用和可视化Restful风格的web服务，现在我们使用spring boot 整合它。作用：</p> 
<ul><li> <p>接口的文档在线自动生成；</p> </li><li> <p>功能测试；</p> </li></ul> 
<p></p> 
<h2 id="3.%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3">3.常用注解</h2> 
<table><thead><tr><th>注解</th><th>描述</th></tr></thead><tbody><tr><td>@Api</td><td>将类标记为 Swagger 资源。</td></tr><tr><td>@ApiImplicitParam</td><td>表示 API 操作中的单个参数。</td></tr><tr><td>@ApiImplicitParams</td><td>允许多个 ApiImplicitParam 对象列表的包装器。</td></tr><tr><td>@ApiModel</td><td>提供有关 Swagger 模型的其他信息。</td></tr><tr><td>@ApiModelProperty</td><td>添加和操作模型属性的数据。</td></tr><tr><td>@ApiOperation</td><td>描述针对特定路径的操作或通常是 HTTP 方法。</td></tr><tr><td>@ApiParam</td><td>为操作参数添加额外的元数据。</td></tr><tr><td>@ApiResponse</td><td>描述操作的可能响应。</td></tr><tr><td>@ApiResponses</td><td>允许多个 ApiResponse 对象列表的包装器。</td></tr><tr><td>@Authorization</td><td>声明要在资源或操作上使用的授权方案。</td></tr><tr><td>@AuthorizationScope</td><td>描述 OAuth2 授权范围。</td></tr></tbody></table> 
<p></p> 
<h2 id="4.SpringBoot%E6%95%B4%E5%90%88Swagger2">4.SpringBoot整合Swagger2</h2> 
<h3 id="4.1.%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96">4.1.导入依赖</h3> 
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
    &lt;version&gt;2.9.2&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;artifactId&gt;swagger-models&lt;/artifactId&gt;
            &lt;groupId&gt;io.swagger&lt;/groupId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
​
&lt;dependency&gt;
    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;
    &lt;artifactId&gt;swagger-bootstrap-ui&lt;/artifactId&gt;
    &lt;version&gt;1.8.5&lt;/version&gt;
&lt;/dependency&gt;
​
&lt;!-- 使用1.5.22--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.swagger&lt;/groupId&gt;
    &lt;artifactId&gt;swagger-models&lt;/artifactId&gt;
    &lt;version&gt;1.5.22&lt;/version&gt;
&lt;/dependency&gt;</code></pre> 
<p></p> 
<h3 id="4.2.%E5%88%9B%E5%BB%BASwagger%E9%85%8D%E7%BD%AE%E7%B1%BB">4.2.创建Swagger配置类</h3> 
<pre><code>@Configuration
//开启Swagger2
@EnableSwagger2
//配置生产环境下不可用  dev(开发)、test(测试)、prod(生产)
@Profile({"dev","test"})
public class Swagger2Configuration extends WebMvcConfigurationSupport {
    //api接口包扫描路径
    public static final String
            SWAGGER_SCAN_BASE_PACKAGE = "com.lky.swagger2pro.controller";
    //指定当前Swagger API文档版本
    public static final String VERSION = "1.0.0";
​
    /**
     * 创建API应用
     * apiInfo() 增加API相关信息
     * 通过select()函数返回一个ApiSelectorBuilder实例,用来控制哪些接口暴露给Swagger来展现，
     * 本例采用指定扫描的包路径来定义指定要建立API的目录。
     * @return
     */
    @Bean
    public Docket createRestApi() {
        return new Docket(DocumentationType.SWAGGER_2)
                // 接口文档的基本信息
                .apiInfo(apiInfo())
                .select()
                // 方法需要有ApiOperation注解才能生存接口文档
                //.apis(RequestHandlerSelectors.basePackage(SWAGGER_SCAN_BASE_PACKAGE))
                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))
                // 路径使用any风格
                .paths(PathSelectors.any())
                .build();
    }
​
    /**
     * 创建该API的基本信息（这些基本信息会展现在文档页面中）
     * 访问地址：http://项目实际地址/doc.html
     * @return
     */
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                .title("SpringBoot中使用Swagger2构建RestFul APIs")
                .description("测试系统")
                //.termsOfServiceUrl("http://www.**.com")
                .version(VERSION)
                .build();
    }
​
    @Override
    protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("doc.html").addResourceLocations("classpath:/META-INF/resources/");
        registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");
    }
}</code></pre> 
<blockquote> 
 <p>1) 完成以上配置之后，通过mybatis-generator生成model和mapper； 2) 创建IBookService及BookServiceImpl实现类； 3) 创建BookController</p> 
</blockquote> 
<h3 id="4.3.%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B%E2%80%8B%E7%BC%96%E8%BE%91">4.3.综合案例<img alt="" src="https://images2.imgbox.com/76/23/srYrChX3_o.png"></h3> 
<p></p> 
<h4 id="%40Api">@Api</h4> 
<p><strong>@Api</strong>注解用在类上，说明该类的作用。可以标记一个Controller类做为swagger文档资源。</p> 
<table><thead><tr><th><strong>属性</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>value</td><td>url的路径值</td></tr><tr><td>tags</td><td>如果设置这个值、value的值会被覆盖</td></tr><tr><td>produces</td><td>返回的格式类型例如："application/json, application/xml"</td></tr><tr><td>consumes</td><td>接收请求参数的类型例如："application/json, application/xml"</td></tr><tr><td>protocols</td><td>Possible values: http, https, ws, wss.</td></tr><tr><td>authorizations</td><td>高级特性认证时配置</td></tr></tbody></table> 
<p></p> 
<p><strong>案例演示</strong></p> 
<pre><code>@RestController
@Api(value = "书本管理",tags = {"书本管理"}) //tags可以代替value属性
@RequestMapping("/book")
public class BookController {
    ...
}</code></pre> 
<p></p> 
<h4 id="%40ApiOperation">@ApiOperation</h4> 
<p><strong>@ApiOperation</strong>注解用在方法上，说明方法的作用，每一个url资源的定义。</p> 
<table><thead><tr><th><strong>属性</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>value</td><td>url的路径值</td></tr><tr><td>tags</td><td>如果设置这个值、value的值会被覆盖</td></tr><tr><td>produces</td><td>返回的格式类型例如："application/json, application/xml"</td></tr><tr><td>consumes</td><td>接收请求参数的类型例如："application/json, application/xml"</td></tr><tr><td>hidden</td><td>是否在文档中显示</td></tr><tr><td>notes</td><td>注释说明</td></tr><tr><td>response</td><td>返回的对象</td></tr><tr><td>responseContainer</td><td>这些对象是有效的 "List", "Set" or "Map".，其他无效</td></tr><tr><td>responseReference</td><td>指定对响应类型的引用。指定的引用可以是本地的，也可以是远程的*将按原样使用，并覆盖任何指定的response()类</td></tr><tr><td>responseHeaders</td><td>响应旁边提供的可能标题列表</td></tr><tr><td>httpMethod</td><td>"GET", "HEAD", "POST", "PUT", "DELETE", "OPTIONS" and "PATCH"</td></tr><tr><td>code</td><td>http的状态码 默认 200</td></tr></tbody></table> 
<p></p> 
<p><strong>案例演示</strong></p> 
<pre><code>@ApiOperation(value = "查询所有书本信息", notes = "查询返回所有书本信息集合",
            produces = "application/json")
@GetMapping(value="/queryAll")
public JsonResponseBody&lt;List&lt;Book&gt;&gt; queryAll(){
    try {
        return bookService.queryAll();
    } catch (Exception e) {
        e.printStackTrace();
        return new JsonResponseBody&lt;&gt;(500,e.getMessage());
    }
}</code></pre> 
<p></p> 
<h4 id="%40ApiImplicitParam">@ApiImplicitParam</h4> 
<p><strong>@ApilmplicitParam</strong> 注解用来描述一个参数，可以配置参数的中文含义，也可以给参数设置默认值，这样在接口测试的时候可以避免手动输入；</p> 
<table><thead><tr><th><strong>属性</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>paramType</td><td>参数放在哪个地方</td></tr><tr><td>name</td><td>参数名称</td></tr><tr><td>value</td><td>参数代表的含义</td></tr><tr><td>dataType</td><td>参数类型</td></tr><tr><td>dataTypeClass</td><td>参数类型</td></tr><tr><td>required</td><td>是否必要</td></tr><tr><td>defaultValue</td><td>参数的默认值</td></tr></tbody></table> 
<p><strong>paramType</strong></p> 
<table><thead><tr><th>类型</th><th>作用</th></tr></thead><tbody><tr><td>path</td><td>以地址的形式提交数据，用于restful接口。请求参数采用@PathVariable获取</td></tr><tr><td>query</td><td>直接跟参数完成自动映射赋值。请求参数可采用@RequestParam获取</td></tr><tr><td>body</td><td>以流的形式提交，仅支持POST。请求参数采用@RequestBody获取</td></tr><tr><td>header</td><td>参数在request headers里边提交。请求参数采用@RequestHeader获取</td></tr><tr><td>form</td><td>以form表单的形式提交，仅支持POST。</td></tr></tbody></table> 
<p><strong>案例演示</strong></p> 
<pre><code>@ApiOperation(value="查询单个书本信息",notes = "查询单个书本信息")
@ApiImplicitParam(value="书本ID",name="bookid",required = true,dataType = "String",defaultValue = "8f46b5018a6811e9a9c528d24413c293" )
@GetMapping("/querySingleBook")
public Book querySingleBook(String bookid){
    JsonResponseBody&lt;Book&gt; json = bookService.selectByPrimaryKey(bookid);
    return json.getData();
}</code></pre> 
<p></p> 
<h4 id="%40ApiImplicitParams">@ApiImplicitParams</h4> 
<p><strong>@ApilmplicitParams</strong> 如果有多个参数，则需要使用多个 @ApilmplicitParam 注解来描述， 多个 @ApilmplicitParam 注解需要放在一个 @ApilmplicitParams 注解中；</p> 
<p><strong>案例演示</strong></p> 
<pre><code>@ApiOperation(value = "新增书本信息", notes = "新增书本信息"
            ,produces = "application/json",consumes = "application/json")
@ApiImplicitParams({
            @ApiImplicitParam(name="bookname",value="书本名称",required = true,dataType = "String"),
            @ApiImplicitParam(name="price",value="书本价格",required = true,dataType = "Double"),
            @ApiImplicitParam(name="booktype",value="书本类型",required = true,dataType = "String")
})
@PostMapping("/addBook")
public JsonResponseBody&lt;?&gt; addBook(@RequestParam String bookname,
                                   @RequestParam Double price,
                                   @RequestParam String booktype){
    return bookService.insert(Book.builder()
        .bookid(UUID.randomUUID().toString().replace("-",""))
        .bookname(bookname)
        .booktype(booktype)
        .price(price)
        .build());
}</code></pre> 
<p></p> 
<h4 id="%40ApiModel%E5%92%8C%40ApiModelProperty">@ApiModel和@ApiModelProperty</h4> 
<p><strong>@ApiModel</strong>注解描述一个Model的信息（这种一般用在post创建的时候，使用@RequestBody这样的场景，请求参数无法使用 @ApiImplicitParam注解进行描述的时候；</p> 
<p><strong>@ApiModelProperty</strong>注解描述一个model的属性。</p> 
<table><thead><tr><th><strong>属性</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>value</td><td>字段说明</td></tr><tr><td>name</td><td>参数名称</td></tr><tr><td>dataType</td><td>参数类型</td></tr><tr><td>hidden</td><td>在文档中隐藏</td></tr><tr><td>required</td><td>是否必要</td></tr><tr><td>example</td><td>举例说明</td></tr><tr><td>notes</td><td>注释说明</td></tr></tbody></table> 
<p></p> 
<p><strong>案例演示</strong></p> 
<p>Controller</p> 
<pre><code>@ApiOperation(value="修改书本信息",notes = "修改书本信息")
@PostMapping("/editBook")
public JsonResponseBody&lt;?&gt; editBook(@RequestBody Book book){
    return bookService.updateByPrimaryKey(book);
}</code></pre> 
<blockquote> 
 <p>注意：在这里可以不使用@ApiImplicitParam标注Swagger中的参数信息，因为在这里的输入参数是实体对象，而在实体对象中已经使用@ApiModel和@ApiModelProperty注解进行了标识。</p> 
</blockquote> 
<p></p> 
<p>Book实体类</p> 
<pre><code>@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
@ApiModel(value="书本对象")
public class Book implements Serializable {
​
    /**
     * 书本编号
     */
    @ApiModelProperty(value="书本编号")
    private String bookid;
​
    /**
     * 书本名称
     */
    @ApiModelProperty(value="书本名称")
    private String bookname;
​
    /**
     * 书本价格
     */
    @ApiModelProperty(value="书本价格")
    private Double price;
​
    /**
     * 书本类型
     */
    @ApiModelProperty(value="书本类型")
    private String booktype;
​
    private static final long serialVersionUID = 1L;
}</code></pre> 
<p></p> 
<h4 id="%40ApiParam">@ApiParam</h4> 
<p>作用在方法的参数上，用来描述接口的参数信息(一个参设置一个)</p> 
<blockquote> 
 <p><code>@ApiParam</code>必须与<code>@RequestParam</code>、<code>@PathVariable</code>和<code>@RequestHeader</code>一起使用。</p> 
</blockquote> 
<table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>参数名称</td></tr><tr><td>value</td><td>参数简单描述</td></tr><tr><td>defaultValue</td><td>描述参数默认值</td></tr><tr><td>required</td><td>是否为必传参数, false:非必传; true:必传</td></tr><tr><td>allowMultiple</td><td>指定参数是否可以通过多次出现来接收多个值</td></tr><tr><td>hidden</td><td>隐藏参数列表中的参数</td></tr><tr><td>example</td><td>非请求体(body)类型的单个参数示例</td></tr><tr><td>examples</td><td>@Example(value = @ExampleProperty(mediaType = “”, value = “”)) 参数示例，仅适用于请求体类型的请求</td></tr></tbody></table> 
<p><strong>案例演示</strong></p> 
<pre><code>@ApiOperation(value="新增书本信息1",notes="新增书本信息1")
@PostMapping("/addBooks")
public JsonResponseBody&lt;?&gt; addBooks(
            @ApiParam(name="bookName",value="bookName",required = true) @RequestParam("bookName") String bookName,
            @ApiParam(name="price",value="price",required = true) @RequestParam("price") float price,
            @ApiParam(name="bookType",value="bookType",required = true) @RequestParam("bookType") String bookType){
      System.out.println("bookName="+bookName+",price="+price+",bookType="+bookType);
    return new JsonResponseBody&lt;&gt;();
}</code></pre> 
<p></p> 
<h2 id="5.%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%B1%8F%E8%94%BDSwagger2">5.生产环境下屏蔽Swagger2</h2> 
<p>为了保证接口文档的安全，禁用了生产环境的加载，具体说明请看：</p> 
<p>参考地址：<a href="https://www.jianshu.com/p/fa3230ffb27c" rel="nofollow" title="生产环境中禁用swagger - 简书">生产环境中禁用swagger - 简书</a></p> 
<p><strong>一般生产环境是不能放开swagger的，这样接口暴露在外网很不安全!!!</strong></p> 
<p><strong>一般生产环境是不能放开swagger的，这样接口暴露在外网很不安全!!!</strong></p> 
<p><strong>一般生产环境是不能放开swagger的，这样接口暴露在外网很不安全!!!</strong></p> 
<p></p> 
<h3 id="5.1.%E4%BF%AE%E6%94%B9Swagger2%E9%85%8D%E7%BD%AE%E7%B1%BB">5.1.修改Swagger2配置类</h3> 
<p>添加@Profile注解，指明在何种环境下可以使用Swagger2，一般情况下只有在开发(dev)和测试(test)环境下才可以使用Swagger2；而在生产(dev)环境下不能使用Swagger2。</p> 
<pre><code>@Configuration
//开启Swagger2
@EnableSwagger2
//配置生产环境下不可用  dev(开发)、test(测试)、prod(生产)
@Profile({"dev","test"})
public class Swagger2Configuration extends WebMvcConfigurationSupport {
    
    ...
​
    @Override
    protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("doc.html")
.addResourceLocations("classpath:/META-INF/resources/");
        registry.addResourceHandler("/webjars/**")
.addResourceLocations("classpath:/META-INF/resources/webjars/");
    }
}</code></pre> 
<p></p> 
<h3 id="5.2.%E4%BF%AE%E6%94%B9application.yml">5.2.修改application.yml</h3> 
<p>修改application.yml文件，配置项目系统的运行环境（dev/test/prod）</p> 
<pre><code>spring:
  #配置swagger2生产和测试环境不可用
  profiles:
    active: prod</code></pre> 
<p></p> 
<h3 id="5.3.%E4%BD%BF%E7%94%A8maven%20package%E6%89%93%E5%8C%85%E6%B5%8B%E8%AF%95%E2%80%8B%E7%BC%96%E8%BE%91" style="text-align:center;">5.3.使用maven package打包测试<img alt="" src="https://images2.imgbox.com/31/38/2WetK4qA_o.png"></h3> 
<p></p> 
<h3 id="5.4.%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95">5.4.运行测试</h3> 
<p>打开CMD，跳转到target目录，输入命令：java -jar .\xxx.jar --spring.profiles.active=prod。可以直接打开jar包修改application.yml配置文件中spring.profiles.active属性切换运行环境，具体请参考以下配置：</p> 
<blockquote> 
 <p style="text-align:center;">开发环境：dev； 生产环境：prod； 测试环境：test；<img alt="" src="https://images2.imgbox.com/d3/77/GsOMBjqc_o.png"></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/127499ca60537a046a195e2344de5dae/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PLSQL存储过程中异常的传递</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1a9c33b27cd1000aa6d8be874decb425/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">zookeeper 常见客户端介绍和使用 zkCli、自带API、 zkClient、Curator</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>