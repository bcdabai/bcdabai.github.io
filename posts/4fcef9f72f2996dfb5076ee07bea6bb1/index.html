<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【新星计划·2023】网络技术——VTP技术/协议讲解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【新星计划·2023】网络技术——VTP技术/协议讲解" />
<meta property="og:description" content="前言 在工作中，我们可能会遇到这样一个这样的问题，在公司内部有很多的交换机，而基本上每个交换机上面都需要配置相同的VLAN进行互通，在VLAN很多的情况下，这样的工作量是非常大的，那么就要用到今天所说的VTP技术，只需要在一台交换机上配置可以同步到其他交换机上面去，大大减少了交换机的配置量！
注：VTP协议是思科的私有协议
一、什么是VTP？ VTP(VLAN Trunking Protocol：虚拟局域网干道协议)，它是思科私有协议。在大型网络中，会有多台交换机，同时也会有多个VLAN，如果在每个交换机上分别把VLAN创建一遍，这会是一个工作量很大的任务。VTP协议可以帮助管理员减少这些枯燥繁重的工作。管理员在网络中设置一个或者多个VTP Server，然后在Server上创建和修改VLAN，VTP协议会将这些修改通告其它交换机上，这些交换机自动更新VLAN信息(VLAN ID和VLAN Name)。
二、VTP的作用 通常情况下，我们需要在整个企业网中的一组的交换机中保持VLAN数据库的同步，以保证所有交换机都能从数据帧中读取相关的VLAN信息进行正确的数据转发，然而对于大型网络来说，可能有成百上千台交换机，而一台交换机上都可能存在几十乃至数百个VLAN，如果仅凭网络工程师手工配置的话是一个非常大的工作量，并且也不利于日后维护——每一次添加修改或删除VLAN都需要在所有的交换机上部署。在这种情况下就可以使用VTP技术来解决。
要使用VTP，首先必须建立一个VTP管理域，在同一管理域中的交换机共享vlan信息，并且一个交换机只能参加一个管理域。不同域中的交换机不能共享vlan信息。
三、VTP的工作原理 VTP是一种消息协议，它使用第二层帧，在交换机之间传递VLAN信息，被称为VTP通告。有了VTP，就可以在一台交换机上集中修改VLAN配置，所做的修改会被自动传播到网络中的其他交换机上，从而实现VLAN配置的一致性。实现此功能的前提是这些交换机属于同一个VTP域。
1. VTP域 VTP域也称为VLAN管理域，由一个以上共享VTP域名的相互连接的交换机组成。也就是说，VTP域是一组VTP域名相同并通过中继链路相互连接的交换机。
使用VTP的条件：首先必须建立一个VTP域，在同一管理域中的交换机共享它们的VLAN信息，并且一个交换机只能参加一个VTP域。
不同域中的交换机不能共享VTP信息。
VTP域的要求：域内的每台交换机都必须使用相同的VTP域名，无论是通过配置实现，还是由交换机自动学到，Catalyst交换机必须是相邻的，即相邻的交换机需要具有相同的域名。在所有的Catalyst交换机之间，必须配置为中继链路。
如果上述条件中的任何一项不满足，则VTP域不能连通，信息也就无法跨越分离部分进行传送。
2、VTP模式 VTP模式决定了交换机处理和通告VTP信息的方式。
VTP模式有三种：服务器模式、客户机模式和透明模式。
①服务器模式( Server )充当VTP服务器的交换机负责它所在域中VLAN信息的管理工作，VTP服务器可以创建、删除或修改VLAN，并向外发送VTP通告，同时，VTP服务器也会学习域名相同的VTP通告信息。默认情况下，交换机处于VTP服务器模式。每个VTP域至少有一个服务器，以便创建，删除或修改VLAN及提供VLAN信息。
②客户机模式( Client )处于此模式的交换机不允许管理员创建，删除或修改VLAN，它们监听本域中其他交换机的VTP通告，并相应修改自己的VTP配置。
③透明模式(Transparent) VTP透明模式中的交换机不参与VTP，当交换机处于透明模式时，它可以创建，删除或修改本地的VLAN，但它不向外通告自己的VLAN配置信息，对收到的VTP通告只转发而不会学习与更改自己的VLAN信息。
四、VTP管理的优点 1、简化管理 使用VTP可以简化VLAN的管理，因为它可以自动将VLAN信息传递到整个网络中，使得管理员可以更加高效地管理和配置VLAN。
2、减少误操作 通过VTP，管理员可以避免在不同交换机上手动配置VLAN信息时出现的误操作，从而提高了网络的可靠性和稳定性。
3、提高扩展性 VTP可以帮助管理员快速扩展网络规模，当新增交换机加入网络时，它们会自动获取到VLAN信息，而无需手动进行配置。
4、减少网络流量 通过使用VTP，管理员可以避免不必要的广播流量，因为只有VLAN信息发生变化时才会发送VTP报文，这可以有效地减少网络流量。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4fcef9f72f2996dfb5076ee07bea6bb1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-22T22:55:19+08:00" />
<meta property="article:modified_time" content="2023-05-22T22:55:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【新星计划·2023】网络技术——VTP技术/协议讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言</h2> 
<p>在工作中，我们可能会遇到这样一个这样的问题，在公司内部有<strong>很多的交换机</strong>，而基本上每个交换机上面都<strong>需要配置相同的VLAN</strong>进行互通，在VLAN很多的情况下，这样的工作量是非常大的，那么就要用到今天所说的VTP技术，只需要在一台交换机上配置可以同步到其他交换机上面去，大大减少了交换机的配置量！</p> 
<p><u><em><strong>注：VTP协议是思科的私有协议</strong></em></u></p> 
<h2><strong>一、什么是VTP？</strong></h2> 
<p>VTP(VLAN Trunking Protocol：虚拟局域网干道协议)，它是<strong>思科私有协议</strong>。在大型网络中，会有多台交换机，同时也会有多个VLAN，如果在每个交换机上分别把VLAN创建一遍，这会是一个工作量很大的任务。<strong>VTP协议可以帮助管理员减少这些枯燥繁重的工作</strong>。管理员在网络中设置一个或者多个VTP Server，然后在Server上创建和修改VLAN，VTP协议会将这些修改通告其它交换机上，这些交换机自动更新VLAN信息(VLAN ID和VLAN Name)。</p> 
<h2>二、VTP的作用</h2> 
<p>通常情况下，我们需要在整个企业网中的一组的交换机中保持<strong>VLAN数据库的同步</strong>，以保证所有交换机都能从数据帧中读取相关的VLAN信息进行正确的数据转发，然而对于大型网络来说，可能有成百上千台交换机，而一台交换机上都可能存在几十乃至数百个VLAN，如果仅凭网络工程师手工配置的话是一个非常大的工作量，并且也不利于日后维护——每一次添加修改或删除VLAN都需要在所有的交换机上部署。在这种情况下就可以使用VTP技术来解决。</p> 
<p>要使用VTP，首先必须<strong>建立一个VTP管理域</strong>，在同一管理域中的交换机共享vlan信息，并且一个交换机只能参加一个管理域。不同域中的交换机不能共享vlan信息。</p> 
<h2>三、VTP的工作原理</h2> 
<p>VTP是一种消息协议，它使用<strong>第二层帧</strong>，在<strong>交换机</strong>之间传递VLAN信息，被称为<strong>VTP通告</strong>。有了VTP，就可以在一台交换机上集中修改VLAN配置，所做的修改会被自动传播到网络中的其他交换机上，从而实现VLAN配置的一致性。<u><em><strong>实现此功能的前提是这些交换机属于同一个VTP域。</strong></em></u></p> 
<h3>1. VTP域</h3> 
<p>VTP域也称为<strong>VLAN管理域</strong>，由一个以上共享VTP域名的相互连接的交换机组成。也就是说，VTP域是一组VTP域名相同并通过中继链路相互连接的交换机。</p> 
<p><u><em><strong>使用VTP的条件：</strong></em></u>首先必须建立一个VTP域，在同一管理域中的交换机共享它们的VLAN信息，并且一个交换机只能参加一个VTP域。</p> 
<p><strong>不同域</strong>中的交换机<strong>不能</strong>共享VTP信息。</p> 
<p><u><em><strong>VTP域的要求：</strong></em></u>域内的每台交换机都必须使用相同的VTP域名，无论是通过配置实现，还是由交换机自动学到，Catalyst交换机<strong>必须是相邻的</strong>，即相邻的交换机需要<strong>具有相同的域名。</strong>在所有的Catalyst交换机之间，<strong>必须配置为中继链路。</strong></p> 
<p>如果上述条件中的任何一项不满足，则VTP域不能连通，信息也就无法跨越分离部分进行传送。</p> 
<h3>2、VTP模式</h3> 
<p>VTP模式决定了交换机处理和通告VTP信息的方式。</p> 
<p><u><em><strong>VTP模式有三种：服务器模式、客户机模式和透明模式。</strong></em></u></p> 
<p><strong>①服务器模式( Server )</strong>充当VTP服务器的交换机负责它所在域中VLAN信息的管理工作，VTP服务器可以<strong>创建、删除或修改VLAN</strong>，并向外<strong>发送VTP通告</strong>，同时，VTP服务器也会学习域名<strong>相同的</strong>VTP通告信息。默认情况下，交换机处于VTP服务器模式。<strong>每个VTP域至少有一个服务器</strong>，以便创建，删除或修改VLAN及提供VLAN信息。</p> 
<p><strong>②客户机模式( Client )</strong>处于此模式的交换机<strong>不允许</strong>管理员<strong>创建，删除或修改VLAN</strong>，它们监听<strong>本域中其他交换机的VTP通告</strong>，并相应修改<strong>自己的</strong>VTP配置。</p> 
<p><strong>③透明模式(Transparent) </strong>VTP透明模式中的交换机不参与VTP，当交换机处于透明模式时，<strong>它可以创建，删除或修改本地的VLAN，但它不向外通告自己的VLAN配置信息，</strong>对收到的VTP通告<strong>只转发</strong>而<strong>不会学习与更改自己的VLAN信息。</strong></p> 
<h2>四、VTP管理的优点</h2> 
<h3>1、简化管理</h3> 
<p>使用VTP可以简化VLAN的管理，因为它可以<strong>自动将VLAN信息传递到整个网络中</strong>，使得管理员可以更加高效地管理和配置VLAN。</p> 
<h3>2、减少误操作</h3> 
<p>通过VTP，管理员可以<strong>避免在不同交换机上手动配置VLAN信息时出现的误操作</strong>，从而提高了网络的可靠性和稳定性。</p> 
<h3>3、提高扩展性</h3> 
<p>VTP可以帮助管理员<strong>快速扩展网络规模</strong>，当新增交换机加入网络时，它们会<strong>自动获取</strong>到VLAN信息，而无需手动进行配置。</p> 
<h3>4、减少网络流量</h3> 
<p>通过使用VTP，管理员<strong>可以避免不必要的广播流量</strong>，因为只有VLAN信息发生变化时才会发送VTP报文，这可以有效地减少网络流量。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4546b31e376f12abc0183a2603850871/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java基础(七)：面向对象编程-类和对象</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/229131b34382d977f3c3fdffcba908a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python爬虫实战——获取指定博主所有专栏链接及博文链接</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>