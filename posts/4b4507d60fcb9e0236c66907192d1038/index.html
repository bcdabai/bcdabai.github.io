<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VMware 虚拟机中 Linux 系统Centos7磁盘空间扩容（亲测） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VMware 虚拟机中 Linux 系统Centos7磁盘空间扩容（亲测）" />
<meta property="og:description" content="1.修改虚拟机磁盘容量 例如之前虚拟机磁盘空间为30G，现要将磁盘容量设置为50G
打开虚拟机（必须处于关机状态），点击【编辑虚拟机设置】，然后点击【磁盘】，接着点击【扩展】，输入修改后的最大磁盘容量50G，具体操作时最大容量根据自己的需求设置即可。
输入完成最大磁盘容量后，点击扩展，出现设置成功字样后说明设置成功，接下来进入第二阶段的操作。
2.启动系统、查看分区 使用xshell工具连接并登录、查看磁盘分区表
可以看到本机有三分磁盘sda1、sda2、sda3.
3.开始添加分区 使用linux分区工具fdisk 开始给磁盘分区
[root@localhost ~]# fdisk /dev/sda 输入m查看帮助信息
输入n表示增加分区
输入p标识创建主分区
回车后，分区号输入4，因为之前已经有三个分区（sda1、sda2、sda3）
起始扇区设置，直接回车默认即可
终止扇区设置，回车设置默认即可
输入w进行保存
到此分区划分完毕。
4.修改新分区id类型为8e 通过上面的操纵，再次使用fdisk -l查看，可以看到新增加的分区sda4已经出现
上图的红色方框区域，可以看到 /dev/sda3 的 Id号为 83，需要要将其改成 8e（LVM卷文件系统的 Id），具体方法，如下图所示：
fdisk /dev/sda 输入m获取帮助信息，然后分别输入：
t---------回车
4--------回车（新增的分区号）
l---------回车
输入8e并回车
输入w保存
修改后的信息如下，可以看到已经将sda3修改为系统卷id：
重启系统reboot，这一步非常关键切记
5.开始扩充分区 使用lvs显示逻辑卷分区信息
显示卷组信息
将物理硬盘分区初始化为物理卷，以便被 LVM 使用
pvcreate /dev/sda4 扩展卷组：
centos： 是执行vgdisplay后的VG name对应的值，根据个人情况修改
vgextend centos /dev/sda4 再次显示卷组信息：可以看到Free PE从0变为10.00Gib，说明我们最多可以有 10GB 的扩充空间
扩充逻辑卷分区：
centos/root： 是根据第七部分一开头的lvs中显示的VG 和 LV内容进行的替换，根据个人情况修改。
lvextend -L&#43;9.9G /dev/centos/root /dev/sda4 重设逻辑卷大小" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4b4507d60fcb9e0236c66907192d1038/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-03T18:43:31+08:00" />
<meta property="article:modified_time" content="2023-05-03T18:43:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VMware 虚拟机中 Linux 系统Centos7磁盘空间扩容（亲测）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1.修改虚拟机磁盘容量</h3> 
<p><strong>例如之前虚拟机磁盘空间为30G，现要将磁盘容量设置为50G</strong><br> 打开虚拟机（必须处于关机状态），点击【编辑虚拟机设置】，然后点击【磁盘】，接着点击【扩展】，输入修改后的最大磁盘容量50G，具体操作时最大容量根据自己的需求设置即可。<br> <img src="https://images2.imgbox.com/ca/46/jdpXpo28_o.png" alt="磁盘空间设置步骤一"><br> <img src="https://images2.imgbox.com/6e/df/jGa206fd_o.png" alt="磁盘空间步骤二、三"><br> <img src="https://images2.imgbox.com/f1/a1/Sox8rULq_o.png" alt="磁盘空间设置步骤四"><br> 输入完成最大磁盘容量后，点击扩展，出现设置成功字样后说明设置成功，接下来进入第二阶段的操作。</p> 
<h3><a id="2_7"></a>2.启动系统、查看分区</h3> 
<p>使用xshell工具连接并登录、查看磁盘分区表<br> <img src="https://images2.imgbox.com/fd/22/5GqstaNx_o.png" alt="查看磁盘分区"><br> 可以看到本机有三分磁盘sda1、sda2、sda3.</p> 
<h3><a id="3_11"></a>3.开始添加分区</h3> 
<p>使用linux分区工具fdisk 开始给磁盘分区</p> 
<pre><code class="prism language-powershell"><span class="token namespace">[root@localhost ~]</span><span class="token comment"># fdisk /dev/sda</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/51/d1/Aym9BHPM_o.png" alt="在这里插入图片描述"><br> 输入m查看帮助信息<br> <img src="https://images2.imgbox.com/2e/24/Vz9Ondrb_o.png" alt="在这里插入图片描述"><br> 输入n表示增加分区<br> <img src="https://images2.imgbox.com/29/9b/xQr6ueFy_o.png" alt="在这里插入图片描述"><br> 输入p标识创建主分区<br> <img src="https://images2.imgbox.com/3f/be/SW8osqhy_o.png" alt="在这里插入图片描述"><br> 回车后，分区号输入4，因为之前已经有三个分区（sda1、sda2、sda3）<br> 起始扇区设置，直接回车默认即可<br> <img src="https://images2.imgbox.com/4b/e7/b3huXBcY_o.png" alt="在这里插入图片描述"><br> 终止扇区设置，回车设置默认即可<br> <img src="https://images2.imgbox.com/06/fb/UFqz2lLQ_o.png" alt="在这里插入图片描述"><br> 输入w进行保存<br> <img src="https://images2.imgbox.com/73/2a/TkHdthFK_o.png" alt="在这里插入图片描述"><br> 到此分区划分完毕。</p> 
<h3><a id="4id8e_32"></a>4.修改新分区id类型为8e</h3> 
<p>通过上面的操纵，再次使用fdisk -l查看，可以看到新增加的分区sda4已经出现<br> <img src="https://images2.imgbox.com/86/d4/0ph79ta2_o.png" alt="在这里插入图片描述"><br> 上图的红色方框区域，可以看到 /dev/sda3 的 Id号为 83，需要要将其改成 8e（LVM卷文件系统的 Id），具体方法，如下图所示：</p> 
<pre><code class="prism language-powershell">fdisk <span class="token operator">/</span>dev/sda
</code></pre> 
<p>输入m获取帮助信息，然后分别输入：<br> t---------回车<br> 4--------回车（新增的分区号）<br> l---------回车<br> 输入8e并回车<br> <img src="https://images2.imgbox.com/df/35/CxUKXyN4_o.png" alt="在这里插入图片描述"><br> 输入w保存<br> 修改后的信息如下，可以看到已经将sda3修改为系统卷id：<br> <img src="https://images2.imgbox.com/de/08/KrvtJbzl_o.png" alt="在这里插入图片描述"><br> <strong>重启系统reboot，这一步非常关键切记</strong></p> 
<h3><a id="5_51"></a>5.开始扩充分区</h3> 
<p>使用lvs显示逻辑卷分区信息<br> <img src="https://images2.imgbox.com/81/b4/fSep3BAO_o.png" alt="在这里插入图片描述"><br> 显示卷组信息<br> <img src="https://images2.imgbox.com/46/d4/19SK3JJw_o.png" alt="在这里插入图片描述"><br> 将物理硬盘分区初始化为物理卷，以便被 LVM 使用</p> 
<pre><code class="prism language-powershell">pvcreate <span class="token operator">/</span>dev/sda4
</code></pre> 
<p><img src="https://images2.imgbox.com/65/c8/Ni00dqNF_o.png" alt="在这里插入图片描述"></p> 
<p>扩展卷组：<br> centos： 是执行vgdisplay后的VG name对应的值，根据个人情况修改</p> 
<pre><code class="prism language-powershell">vgextend  centos <span class="token operator">/</span>dev/sda4
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/c1/MaNkBDXd_o.png" alt="在这里插入图片描述"><br> 再次显示卷组信息：可以看到Free PE从0变为10.00Gib，说明我们最多可以有 10GB 的扩充空间<br> <img src="https://images2.imgbox.com/e3/13/wjl9RXbq_o.png" alt="在这里插入图片描述"><br> 扩充逻辑卷分区：<br> centos/root： 是根据第七部分一开头的lvs中显示的VG 和 LV内容进行的替换，根据个人情况修改。</p> 
<pre><code class="prism language-powershell"> lvextend <span class="token operator">-</span>L+9<span class="token punctuation">.</span>9G <span class="token operator">/</span>dev/centos/root <span class="token operator">/</span>dev/sda4
</code></pre> 
<p><img src="https://images2.imgbox.com/fc/a6/vIoqVkHE_o.png" alt="在这里插入图片描述"><br> 重设逻辑卷大小</p> 
<pre><code class="prism language-powershell"> xfs_growfs  <span class="token operator">/</span>dev/centos/root
</code></pre> 
<p><img src="https://images2.imgbox.com/60/11/ZUsH9jY8_o.png" alt="在这里插入图片描述"><br> 再次查看磁盘空间 df -h<br> <img src="https://images2.imgbox.com/c5/64/D6LpvnEo_o.png" alt="在这里插入图片描述"><br> 发现磁盘容量已经从之前的30G变成40G。</p> 
<p>参考链接：http://t.csdn.cn/B8ufw</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/653c9fbef0259f8d62fae63b07928959/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot 全局异常处理——解决404/500</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/217355c3534de27db5368f2dfd230d4a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Apollo配置中心搭建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>