<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux双机配置文件,linux双机GFS的配置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux双机配置文件,linux双机GFS的配置" />
<meta property="og:description" content="1、两台服务器安装如下包：
apr-1.2.7-11.el5_3.1.x86_64.rpm
apr-util-1.2.7-11.el5.x86_64.rpm
cman-2.0.115-34.el5.x86_64.rpm
cman-devel-2.0.115-34.el5.i386.rpm
cman-devel-2.0.115-34.el5.x86_64.rpm
gfs2-utils-0.1.62-20.el5.x86_64.rpm
gfs-utils-0.1.20-7.el5.x86_64.rpm
gmp-4.1.4-10.el5.x86_64.rpm
httpd-2.2.3-43.el5.x86_64.rpm
ipvsadm-1.24-10.x86_64.rpm
kernel-xen-2.6.18-194.el5.x86_64.rpm
kmod-gfs-0.1.34-12.el5.x86_64.rpm
kmod-gfs-xen-0.1.34-12.el5.x86_64.rpm
lvm2-cluster-2.02.56-7.el5.x86_64.rpm
openais-0.80.6-16.el5.x86_64.rpm
perl-Net-Telnet-3.03-5.noarch.rpm
perl-XML-LibXML-1.58-6.x86_64.rpm
perl-XML-LibXML-Common-0.13-8.2.2.x86_64.rpm
perl-XML-NamespaceSupport-1.09-1.2.1.noarch.rpm
perl-XML-SAX-0.14-8.noarch.rpm
pexpect-2.3-3.el5.noarch.rpm
php-5.1.6-27.el5.x86_64.rpm
php-cli-5.1.6-27.el5.x86_64.rpm
php-common-5.1.6-27.el5.x86_64.rpm
piranha-0.8.4-16.el5.x86_64.rpm
postgresql-libs-8.1.18-2.el5_4.1.x86_64.rpm
ql-dynamic-tgt-lun-disc-2.3.tgz
rgmanager-2.0.52-6.el5.x86_64.rpm
system-config-cluster-1.0.57-3.noarch.rpm
rpm -ivh * --force
2、两台服务器修改主机名
/etc/sysconfig/network
/etc/init.d/network restart
3、修改/etc/lvm/lvm.conf中的locking_type值为3：locking_type = 3
4、在两个节点上配置集群
service cman start
service clvmd start
service gfs start
service rgmanager start
5、一个节点
pvcreate /dev/mapper/mpath1
vgcreate /dev/vggfs /dev/mapper/mpath1
lvcreate -L 95G -n lvgfs vggfs
在另一节点
vgscan
lvscan" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/989732ea71016d74585af7485182dd8d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-12T19:49:25+08:00" />
<meta property="article:modified_time" content="2021-05-12T19:49:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux双机配置文件,linux双机GFS的配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>1、两台服务器安装如下包：</p> 
 <p>apr-1.2.7-11.el5_3.1.x86_64.rpm</p> 
 <p>apr-util-1.2.7-11.el5.x86_64.rpm</p> 
 <p>cman-2.0.115-34.el5.x86_64.rpm</p> 
 <p>cman-devel-2.0.115-34.el5.i386.rpm</p> 
 <p>cman-devel-2.0.115-34.el5.x86_64.rpm</p> 
 <p>gfs2-utils-0.1.62-20.el5.x86_64.rpm</p> 
 <p>gfs-utils-0.1.20-7.el5.x86_64.rpm</p> 
 <p>gmp-4.1.4-10.el5.x86_64.rpm</p> 
 <p>httpd-2.2.3-43.el5.x86_64.rpm</p> 
 <p>ipvsadm-1.24-10.x86_64.rpm</p> 
 <p>kernel-xen-2.6.18-194.el5.x86_64.rpm</p> 
 <p>kmod-gfs-0.1.34-12.el5.x86_64.rpm</p> 
 <p>kmod-gfs-xen-0.1.34-12.el5.x86_64.rpm</p> 
 <p>lvm2-cluster-2.02.56-7.el5.x86_64.rpm</p> 
 <p>openais-0.80.6-16.el5.x86_64.rpm</p> 
 <p>perl-Net-Telnet-3.03-5.noarch.rpm</p> 
 <p>perl-XML-LibXML-1.58-6.x86_64.rpm</p> 
 <p>perl-XML-LibXML-Common-0.13-8.2.2.x86_64.rpm</p> 
 <p>perl-XML-NamespaceSupport-1.09-1.2.1.noarch.rpm</p> 
 <p>perl-XML-SAX-0.14-8.noarch.rpm</p> 
 <p>pexpect-2.3-3.el5.noarch.rpm</p> 
 <p>php-5.1.6-27.el5.x86_64.rpm</p> 
 <p>php-cli-5.1.6-27.el5.x86_64.rpm</p> 
 <p>php-common-5.1.6-27.el5.x86_64.rpm</p> 
 <p>piranha-0.8.4-16.el5.x86_64.rpm</p> 
 <p>postgresql-libs-8.1.18-2.el5_4.1.x86_64.rpm</p> 
 <p>ql-dynamic-tgt-lun-disc-2.3.tgz</p> 
 <p>rgmanager-2.0.52-6.el5.x86_64.rpm</p> 
 <p>system-config-cluster-1.0.57-3.noarch.rpm</p> 
 <p>rpm -ivh * --force</p> 
 <p>2、两台服务器修改主机名</p> 
 <p>/etc/sysconfig/network</p> 
 <p>/etc/init.d/network restart</p> 
 <p>3、修改/etc/lvm/lvm.conf中的locking_type值为3：locking_type = 3</p> 
 <p>4、在两个节点上配置集群</p> 
 <p>service cman start</p> 
 <p>service clvmd start</p> 
 <p>service gfs start</p> 
 <p>service rgmanager start</p> 
 <p>5、一个节点</p> 
 <p>pvcreate /dev/mapper/mpath1</p> 
 <p>vgcreate /dev/vggfs /dev/mapper/mpath1</p> 
 <p>lvcreate -L 95G -n lvgfs vggfs</p> 
 <p>在另一节点</p> 
 <p>vgscan</p> 
 <p>lvscan</p> 
 <p>gfs_mkfs -p lock_dlm -t gfs_cluster:datagfs -j 10 /dev/vggfs/lvgfs</p> 
 <p>其中：gfs_cluster是cluster name</p> 
 <p>datagfs是gfs类型的文件系统的名字，是唯一的。</p> 
 <p>[root@localhost dev]# gfs_mkfs -p lock_dlm -t gfs_cluster:datagfs -j 10 /dev/vggfs/lvgfs</p> 
 <p>This will destroy any data on /dev/vggfs/lvgfs.</p> 
 <p>Are you sure you want to proceed? [y/n] y</p> 
 <p>Device: /dev/vggfs/lvgfs</p> 
 <p>Blocksize: 4096</p> 
 <p>Filesystem Size: xxxxxx</p> 
 <p>Journals: 10</p> 
 <p>Resource Groups: 1996</p> 
 <p>Locking Protocol: lock_dlm</p> 
 <p>Lock Table: gfs_cluster:datagfs</p> 
 <p>Syncing...</p> 
 <p>All Done</p> 
 <p>创建文件系统和挂载：</p> 
 <p>6、mkdir /data</p> 
 <p>mount -t gfs /dev/vggfs/lvgfs /data</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f4d4b39e43ab6aaddb5a51ee7d6f4020/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux的学习路径,Linux学习路线图『从入门到精通』</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fecd48bdc3d6691df083ada858276e9d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MVC【AJAX技术】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>