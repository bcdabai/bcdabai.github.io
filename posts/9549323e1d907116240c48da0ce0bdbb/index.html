<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux下rm命令详解及C/C&#43;&#43;代码实现 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux下rm命令详解及C/C&#43;&#43;代码实现" />
<meta property="og:description" content="rm 命令是 Unix/Linux 操作系统中的基本命令之一。rm（即删除）命令用于删除 Linux 和其他类 Unix 操作系统上的文件和目录。此命令通常以静默方式运行，运行 rm 命令时应非常小心，因为一旦删除文件，就无法恢复文件和目录的内容。
Linux rm 命令
rm 删除命令行中指定的每个文件。 默认情况下，它不会删除目录。当使用 -r 或 -R 选项执行 rm 时，它会递归地删除任何匹配的目录、它们的子目录以及它们包含的所有文件。
rm命令的语法：
rm [选项] [-r 目录] 文件名
方括号中的项目是可选的。当仅与一个或多个文件的名称一起使用时，rm 删除所有这些文件而不需要用户确认。
以下示例将使你更好地了解该工具的工作原理。
如何使用 rm 命令删除文件
你所要做的就是将文件的名称（如果它们不在当前工作目录中，则连同路径一起）作为输入传递给 rm 命令。
以下示例中，rm 将立即删除名为 test1.txt、test2.txt
如果文件不存在或用户没有删除它的适当权限，则会返回错误消息。写保护的文件会在删除前提示用户确认（y 表示是，n 表示否）。文件位于即使这些文件没有写保护，写保护目录中的文件也永远无法删除。
如何强制 rm 忽略不存在的文件
-f（即强制）选项告诉 rm 删除所有指定的文件，无论是否写保护，而不提示用户。如果指定的文件不存在，它不会显示错误消息或返回错误状态。但是，如果尝试删除写保护目录中的文件，此选项将不会显示错误消息。
如何在每次删除之前使 rm 提示
-i（即交互式）选项告诉 rm 在删除每个文件和目录之前提示用户确认。如果同时指定了 -f 和 -i 选项，则指定的最后一个生效。
如何使用 rm 命令删除目录
作为安全措施，rm默认不删除目录，为了删除目录，需要使用-r选项，与-R选项相同，该选项递归删除参数中的目录及其内容列表；
rm -r [dir name]
也就是说，指定目录将首先清空所有子目录（包括其子目录和文件等）和文件，然后删除。通常会提示用户删除目录中的任何写保护文件，除非-使用 f 选项。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9549323e1d907116240c48da0ce0bdbb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-10T16:58:20+08:00" />
<meta property="article:modified_time" content="2022-04-10T16:58:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux下rm命令详解及C/C&#43;&#43;代码实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>rm 命令是 Unix/Linux 操作系统中的基本命令之一。rm（即删除）命令用于删除 Linux 和其他类 Unix 操作系统上的文件和目录。此命令通常以静默方式运行，运行 rm 命令时应非常小心，因为一旦删除文件，就无法恢复文件和目录的内容。</p> 
<p><strong>Linux rm 命令</strong></p> 
<p>rm 删除命令行中指定的每个文件。 默认情况下，它不会删除目录。当使用 -r 或 -R 选项执行 rm 时，它会递归地删除任何匹配的目录、它们的子目录以及它们包含的所有文件。</p> 
<p>rm命令的语法：</p> 
<blockquote> 
 <p>rm [选项] [-r 目录] 文件名</p> 
</blockquote> 
<p>方括号中的项目是可选的。当仅与一个或多个文件的名称一起使用时，rm 删除所有这些文件而不需要用户确认。</p> 
<p><img src="https://images2.imgbox.com/06/6c/C7h1rPT8_o.png" alt="在这里插入图片描述"><br> 以下示例将使你更好地了解该工具的工作原理。</p> 
<p><strong>如何使用 rm 命令删除文件</strong></p> 
<p>你所要做的就是将文件的名称（如果它们不在当前工作目录中，则连同路径一起）作为输入传递给 rm 命令。</p> 
<p>以下示例中，rm 将立即删除名为 test1.txt、test2.txt</p> 
<p><img src="https://images2.imgbox.com/8d/ec/5t8Pqfxc_o.png" alt="在这里插入图片描述"></p> 
<p>如果文件不存在或用户没有删除它的适当权限，则会返回错误消息。写保护的文件会在删除前提示用户确认（y 表示是，n 表示否）。文件位于即使这些文件没有写保护，写保护目录中的文件也永远无法删除。</p> 
<p><strong>如何强制 rm 忽略不存在的文件</strong></p> 
<p>-f（即强制）选项告诉 rm 删除所有指定的文件，无论是否写保护，而不提示用户。如果指定的文件不存在，它不会显示错误消息或返回错误状态。但是，如果尝试删除写保护目录中的文件，此选项将不会显示错误消息。</p> 
<p><img src="https://images2.imgbox.com/17/1a/jR7zNWBw_o.png" alt="在这里插入图片描述"><br> <strong>如何在每次删除之前使 rm 提示</strong></p> 
<p>-i（即交互式）选项告诉 rm 在删除每个文件和目录之前提示用户确认。如果同时指定了 -f 和 -i 选项，则指定的最后一个生效。</p> 
<p><img src="https://images2.imgbox.com/b4/63/C9aIcs5R_o.png" alt="在这里插入图片描述"><br> <strong>如何使用 rm 命令删除目录</strong></p> 
<p>作为安全措施，rm默认不删除目录，为了删除目录，需要使用-r选项，与-R选项相同，该选项递归删除参数中的目录及其内容列表；</p> 
<blockquote> 
 <p>rm -r [dir name]</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/81/7f/9wJGXVUz_o.png" alt="在这里插入图片描述"></p> 
<p>也就是说，指定目录将首先清空所有子目录（包括其子目录和文件等）和文件，然后删除。通常会提示用户删除目录中的任何写保护文件，除非-使用 f 选项。</p> 
<blockquote> 
 <p>rm -rf [dir name]</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/91/f4/b1KWPN1w_o.png" alt="在这里插入图片描述"><br> <strong>如何让 rm 只删除空目录</strong></p> 
<p>尽管可以使用 rmdir 命令来删除目录，但可以（并且可能更容易）使用 rm -d 命令来代替。</p> 
<p><img src="https://images2.imgbox.com/5e/c1/TaiL90mC_o.png" alt="在这里插入图片描述"><strong>如何强制 rm 发出操作的详细信息</strong></p> 
<p>如果你想在删除文件、目录时，提供详细的输出。可以使用 -v 命令行选项来完成。</p> 
<p><img src="https://images2.imgbox.com/c1/98/sd3l4TEI_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Linux下rm命令代码实现</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getopt</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"dfiRrv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>ch<span class="token punctuation">)</span> 
		<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token char">'d'</span><span class="token operator">:</span>
			dflag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token char">'f'</span><span class="token operator">:</span>
			fflag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			iflag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token char">'i'</span><span class="token operator">:</span>
			fflag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			iflag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token char">'R'</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token char">'r'</span><span class="token operator">:</span>			
			rflag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token char">'v'</span><span class="token operator">:</span>
			vflag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token char">'?'</span><span class="token operator">:</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token function">usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	argc <span class="token operator">-=</span> optind<span class="token punctuation">;</span>
	argv <span class="token operator">+=</span> optind<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>fflag<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token function">usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">signal</span><span class="token punctuation">(</span>SIGINT<span class="token punctuation">,</span> progress<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">checkdot</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>
		stdin_ok <span class="token operator">=</span> <span class="token function">isatty</span><span class="token punctuation">(</span>STDIN_FILENO<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>rflag<span class="token punctuation">)</span>
			<span class="token function">rm_tree</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			<span class="token function">rm_file</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">exit</span><span class="token punctuation">(</span>eval<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>编译运行：</p> 
<p><img src="https://images2.imgbox.com/56/11/p3iCTV2k_o.png" alt="在这里插入图片描述"></p> 
<p><strong>总结</strong></p> 
<p>rm 在这里代表删除。 rm 命令用于从 UNIX 等文件系统中删除文件、目录、符号链接等对象。 更准确地说， rm 从文件系统中删除对对象的引用，这些对象可能有多个引用（例如，具有两个不同名称的文件）。 默认情况下，它不会删除目录。</p> 
<p>欢迎关注微信公众号【<strong>程序猿编码</strong>】，需要<strong>rm 命令完整源码</strong>的添加本人微信号(<strong>c17865354792</strong>)</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c364cc344590f23e9d91c13a402efec5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">StampedLock（印戳锁）详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94a0bbd49177923eb86ed9193720e75f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">latex subsubsubsection(四层深度)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>