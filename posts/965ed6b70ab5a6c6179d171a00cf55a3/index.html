<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shell编程-4 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shell编程-4" />
<meta property="og:description" content="正则表达式 正则表达式1.什么是正则表达式2.明确一个知识点: shell的解析流程3.通配符4.grep5.正则表达式的普通内容6.一些问题怎么找出特殊字符怎么知道字符串的长度判断用户的密码里是否有特殊字符判断用户密码是否符合复杂性要求 7.作业1.查找 var/log/messages 这个文件里单词的长度在16-18之间的单词显示出来2.进入/lianxi目录，复制/etc/passwd到当前目录下，然后对passwd进行操作3、查找出当前passwd文件中以ftp或者mail开头的行，在屏幕上输出。4、查找出当前passwd文件中首行不是以r、m、f开头的行，在屏幕上输出。5、查找出当前passwd文件中以bash结尾的行。6、查找出/etc/login.defs文件中的有效行（不显示空行和注释行）。7、查找出/var/log/messages文档中有16个字母的单词？8、查找出来/etc/passwd文件里用户名包含liu同时使用bash的用户9、查找/etc/ssh/sshd_config 里的有效行10、查找出/etc/ssh/sshd_config 文件里的包含连续2个数字的行11、查找出包含特殊字符的行12、查找出不包含数字的行13、查找出/var/log/secure里的ip地址出来14、写一个表示下面网址的正则表达式出来。15、写一个表示下面网址的正则表达式出来。16、写一个表示邮箱的正则17、C类ip地址的正则表达式 section1:范围在192-223之间 section2和section3和section4范围：0-255之间18.用简单的正则匹配 netstat -antplu 的ip地址，去重19.用shell生成 16位的密码20.使用ps命令查看进程(pid=2345)的启动时间 正则表达式 一个重要的命令: grep----&gt;过滤文本
1.什么是正则表达式 正则表达式: regular expression 本质上是:一种思想，方法。
理解为一套方法或者工艺
别的命令采用这套方法，去查找内容
按照某种正确的规则，将字母，数字，特殊符号组合成一个公式，用来表达某个意思
作用: 一些查找类的命令，喜欢使用正则表达式去搜索符合条件的内容
写正则表达式 就是根据某个特点，使用规则表示出来，然后grep可以根据这个规律去查找
2.明确一个知识点: shell的解析流程 **在输入一条命令的时候 会将命令分割成 tokens 比方说 mkdir -p gao{1…20} **
先查看mkdir检查是不是关键字
检查第一个token是不是别名
然后看看有没有波浪符号
再看有没有变量替换
再看有没有命令替换(优先级高)
看有没有算数表达式
再看展开的文本进行单词的分割
展开通配符
命令查找
执行命令
eval会再执行一下
**eval命令将会首先扫描命令行进行所有的替换，然后再执行命令。该命令使用于那些一次扫描无法实现其功能的变量。该命令对变量进行两次扫描。这些需要进行两次扫描的变量有时候被称为复杂变量 **
两次扫描 test.txt内容：hello shell world! myfile=&#34;cat test.txt&#34; (1)echo $myfile　#result:cat test.txt (2)eval $myfile　#result:hello shell world! 从（2）可以知道第一次扫描进行了变量替换，第二次扫描执行了该字符串中所包含的命令 3.通配符 [0-9] 取0到9之间的任意一个字符[^0-9] 不是0到9的字符[abc] 取a或者b或者c[a-z] 取字母a-z之间的字符[A-Z] 取字母A-Z之间的字符 ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/965ed6b70ab5a6c6179d171a00cf55a3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-18T18:10:49+08:00" />
<meta property="article:modified_time" content="2024-01-18T18:10:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shell编程-4</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>正则表达式</h4> 
 <ul><li><a href="#_1" rel="nofollow">正则表达式</a></li><li><ul><li><a href="#1_5" rel="nofollow">1.什么是正则表达式</a></li><li><a href="#2_shell_21" rel="nofollow">2.明确一个知识点: shell的解析流程</a></li><li><a href="#3_62" rel="nofollow">3.通配符</a></li><li><a href="#4grep_126" rel="nofollow">4.grep</a></li><li><a href="#5_286" rel="nofollow">5.正则表达式的普通内容</a></li><li><a href="#6_361" rel="nofollow">6.一些问题</a></li><li><ul><li><a href="#_363" rel="nofollow">怎么找出特殊字符</a></li><li><a href="#_387" rel="nofollow">怎么知道字符串的长度</a></li><li><a href="#_401" rel="nofollow">判断用户的密码里是否有特殊字符</a></li><li><a href="#_411" rel="nofollow">判断用户密码是否符合复杂性要求</a></li></ul> 
   </li><li><a href="#7_440" rel="nofollow">7.作业</a></li><li><ul><li><a href="#1_varlogmessages_1618_442" rel="nofollow">1.查找 var/log/messages 这个文件里单词的长度在16-18之间的单词显示出来</a></li><li><a href="#2lianxietcpasswdpasswd_448" rel="nofollow">2.进入/lianxi目录，复制/etc/passwd到当前目录下，然后对passwd进行操作</a></li><li><a href="#3passwdftpmail_456" rel="nofollow">3、查找出当前passwd文件中以ftp或者mail开头的行，在屏幕上输出。</a></li><li><a href="#4passwdrmf_465" rel="nofollow">4、查找出当前passwd文件中首行不是以r、m、f开头的行，在屏幕上输出。</a></li><li><a href="#5passwdbash_509" rel="nofollow">5、查找出当前passwd文件中以bash结尾的行。</a></li><li><a href="#6etclogindefs_538" rel="nofollow">6、查找出/etc/login.defs文件中的有效行（不显示空行和注释行）。</a></li><li><a href="#7varlogmessages16_563" rel="nofollow">7、查找出/var/log/messages文档中有16个字母的单词？</a></li><li><a href="#8etcpasswdliubash_569" rel="nofollow">8、查找出来/etc/passwd文件里用户名包含liu同时使用bash的用户</a></li><li><a href="#9etcsshsshd_config__580" rel="nofollow">9、查找/etc/ssh/sshd_config 里的有效行</a></li><li><a href="#10etcsshsshd_config_2_606" rel="nofollow">10、查找出/etc/ssh/sshd_config 文件里的包含连续2个数字的行</a></li><li><a href="#11_618" rel="nofollow">11、查找出包含特殊字符的行</a></li><li><a href="#12_741" rel="nofollow">12、查找出不包含数字的行</a></li><li><a href="#13varlogsecureip_873" rel="nofollow">13、查找出/var/log/secure里的ip地址出来</a></li><li><a href="#14_906" rel="nofollow">14、写一个表示下面网址的正则表达式出来。</a></li><li><a href="#15_929" rel="nofollow">15、写一个表示下面网址的正则表达式出来。</a></li><li><a href="#16_960" rel="nofollow">16、写一个表示邮箱的正则</a></li><li><a href="#17Cip_section1192223_section2section3section40255_993" rel="nofollow">17、C类ip地址的正则表达式 section1:范围在192-223之间 section2和section3和section4范围：0-255之间</a></li><li><a href="#18_netstat_antplu_ip_1059" rel="nofollow">18.用简单的正则匹配 netstat -antplu 的ip地址，去重</a></li><li><a href="#19shell_16_1070" rel="nofollow">19.用shell生成 16位的密码</a></li><li><a href="#20pspid2345_1080" rel="nofollow">20.使用ps命令查看进程(pid=2345)的启动时间</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>正则表达式</h2> 
<blockquote> 
 <p><strong>一个重要的命令: grep----&gt;过滤文本</strong></p> 
</blockquote> 
<h3><a id="1_5"></a>1.什么是正则表达式</h3> 
<blockquote> 
 <p><strong>正则表达式: regular expression</strong> <code>本质上是:一种思想，方法。</code></p> 
 <p><mark>理解为一套方法或者工艺</mark></p> 
 <p><mark>别的命令采用这套方法，去查找内容</mark></p> 
 <p><strong>按照某种正确的规则，将字母，数字，特殊符号组合成一个公式，用来表达某个意思</strong></p> 
 <p><strong>作用: 一些查找类的命令，喜欢使用正则表达式去搜索符合条件的内容</strong></p> 
</blockquote> 
<p><code>写正则表达式 就是根据某个特点，使用规则表示出来，然后grep可以根据这个规律去查找</code></p> 
<p><img src="https://images2.imgbox.com/ae/ea/jbrAveWO_o.png" alt="image-20240118114431000"></p> 
<h3><a id="2_shell_21"></a>2.明确一个知识点: shell的解析流程</h3> 
<p><img src="https://images2.imgbox.com/cf/3b/5fLZdahT_o.png" alt="9a74535dc04d056b118a41899b1887e"></p> 
<ol><li> <p>**在输入一条命令的时候 会将命令分割成 tokens 比方说 mkdir -p gao{1…20} **</p> </li><li> <p><strong>先查看mkdir检查是不是关键字</strong></p> </li><li> <p><strong>检查第一个token是不是别名</strong></p> </li><li> <p><strong>然后看看有没有波浪符号</strong></p> </li><li> <p><strong>再看有没有变量替换</strong></p> </li><li> <p><strong>再看有没有命令替换(优先级高)</strong></p> </li><li> <p><strong>看有没有算数表达式</strong></p> </li><li> <p><strong>再看展开的文本进行单词的分割</strong></p> </li><li> <p><strong>展开通配符</strong></p> </li><li> <p><strong>命令查找</strong></p> </li><li> <p><strong>执行命令</strong></p> </li><li> <p><strong>eval会再执行一下</strong></p> 
  <blockquote> 
   <p>**eval命令将会首先扫描命令行进行所有的替换，然后再执行命令。该命令使用于那些一次扫描无法实现其功能的变量。该命令对变量进行两次扫描。这些需要进行两次扫描的变量有时候被称为复杂变量 **</p> 
  </blockquote> <pre><code class="prism language-shell">两次扫描
    test.txt内容：hello shell world<span class="token operator">!</span>
    <span class="token assign-left variable">myfile</span><span class="token operator">=</span><span class="token string">"cat test.txt"</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>echo <span class="token variable">$myfile</span>　　<span class="token comment">#result:cat test.txt</span>
    <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>eval <span class="token variable">$myfile</span>　　<span class="token comment">#result:hello shell world!</span>
    从（2）可以知道第一次扫描进行了变量替换，第二次扫描执行了该字符串中所包含的命令
</code></pre> </li></ol> 
<h3><a id="3_62"></a>3.通配符</h3> 
<p><img src="https://images2.imgbox.com/dc/f9/P5F6zF0L_o.png" alt="image-20240118110015380"></p> 
<ul><li>[0-9] <strong>取0到9之间的任意一个字符</strong></li><li>[^0-9] <strong>不是0到9的字符</strong></li><li>[abc] <strong>取a或者b或者c</strong></li><li>[a-z] <strong>取字母a-z之间的字符</strong></li><li>[A-Z] <strong>取字母A-Z之间的字符</strong></li></ul> 
<blockquote> 
 <p>? 表示匹配1个字符或者0个</p> 
 <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"abc abbc ac"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">"ab?c"</span>
abc
ac
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
</blockquote> 
<blockquote> 
 <p>加号表示，至少要有一个</p> 
 <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"abc abbc abbbbc ac"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">"ab+c"</span>
abc
abbc
abbbbc
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
</blockquote> 
<blockquote> 
 <p>{4} 表示前面的字符出现4次</p> 
 <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"abc abbc abbbbc ac"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">"ab{4}c"</span>
abbbbc
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
</blockquote> 
<blockquote> 
 <p>{4,}代表 4次及以上</p> 
 <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"abc abbc abbbbbbbbc abbbbc ac"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">"ab{4,}c"</span>
abbbbbbbbc
abbbbc
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
</blockquote> 
<blockquote> 
 <p>{4,8}表示4-8之内都可以</p> 
 <p>{,8}表示0-8都可以 很像切片</p> 
</blockquote> 
<blockquote> 
 <p>(ab){,8} 表示 ab 出现0到8次 ，ab是整体</p> 
 <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"abc abbc abbbbbbbbc abbbbc ac"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">"(ab){,8}c"</span>
abc
c
c
c
c
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
</blockquote> 
<h3><a id="4grep_126"></a>4.grep</h3> 
<p><img src="https://images2.imgbox.com/3d/37/j8t3t4Jq_o.png" alt="image-20240118115326672"></p> 
<p><img src="https://images2.imgbox.com/c4/7f/JVrIK8EA_o.png" alt="image-20240118115541781"></p> 
<p><mark>grep和egrep的区别:</mark></p> 
<blockquote> 
 <p>grep是基本正则：^ $ . *</p> 
 <p>egrep是扩展正则: | + ? {} —&gt;支持更多的元字符</p> 
</blockquote> 
<p><code>-i</code>: 不区分大小写</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt 
xiaomi HUAWEI
oppo VIVO vivo
huawei apple
sanxin <span class="token operator">&gt;</span> <span class="token number">123</span>
XIAOMI DAMI
LG lenovo nokia NOKIA
<span class="token number">12345</span> sanchaung
oneplus <span class="token number">2345</span> <span class="token comment">#$</span>


<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"xiaomi"</span>
xiaomi HUAWEI

<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span>  <span class="token parameter variable">-i</span> <span class="token string">"xiaomi"</span>
xiaomi HUAWEI
XIAOMI DAMI

<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span>  <span class="token parameter variable">-i</span> <span class="token string">"xiaomi|huawei"</span>
xiaomi HUAWEI
huawei apple
XIAOMI DAMI
</code></pre> 
<ul><li> <p><code>^</code> 表示以什么开头</p> </li><li> <p><code>$</code>表示以什么结尾</p> </li></ul> 
<p><code>-E</code> 就是扩展正则，相当于egrep</p> 
<p><code>-n</code> 是编号，出现在文本的第几行</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-i</span> <span class="token string">"xiaomi|huawei"</span>
<span class="token number">1</span>:xiaomi HUAWEI
<span class="token number">3</span>:huawei apple
<span class="token number">5</span>:XIAOMI DAMI
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<p><code>-o</code> only-match 仅仅匹配符合要求的行</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-o</span> <span class="token parameter variable">-i</span> <span class="token string">"xiaomi|huawei"</span>
<span class="token number">1</span>:xiaomi
<span class="token number">1</span>:HUAWEI
<span class="token number">3</span>:huawei
<span class="token number">5</span>:XIAOMI
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-o</span> root <span class="token comment">#查找所有包含root的行</span>
root
root
root
root
root
root
root
root
root
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-o</span> root<span class="token operator">|</span><span class="token function">wc</span> <span class="token parameter variable">-l</span>
<span class="token number">9</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<p><code>-v</code>取反的意思(整行取反)</p> 
<p><mark>区别[^] 这个是单字符取反</mark></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-v</span> root
</code></pre> 
<p><code>-c</code> 满足要求的行的次数</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-i</span> <span class="token string">"xiaomi"</span>
<span class="token number">2</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<p><code>-A</code> 找出符合要求的后面的行数</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-A</span> <span class="token number">3</span> vivo
oppo VIVO vivo
huawei apple
sanxin <span class="token operator">&gt;</span> <span class="token number">123</span>
XIAOMI DAMI
</code></pre> 
<p><code>-C</code> 找出符合要求的上下n行</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-C</span> <span class="token number">2</span> apple
xiaomi HUAWEI
oppo VIVO vivo
huawei apple
sanxin <span class="token operator">&gt;</span> <span class="token number">123</span>
XIAOMI DAMI
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<p><code>-r</code>递归查找 后边接的是文件夹</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">egrep</span> <span class="token string">"xiaomi"</span> <span class="token parameter variable">-r</span> /shell
/shell/1-18/mobile_phone.txt:xiaomi HUAWEI
/shell/1-18/gao.txt:xiaomi dami
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<p><code>\&lt;:表示词首部 表示以这个单词开头</code></p> 
<p><code>\&lt;abc\&gt;: 表示abc这个单词</code></p> 
<blockquote> 
 <p>\&lt; 或者 \&gt;符合 可以用 \b来表示 <mark>单词的边界</mark></p> 
 <pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"chenjinhuai chenjinjin chenjingui"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"jin<span class="token entity" title="\b">\b</span>"</span>
chenjinhuai chenjinjin chenjingui
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token string">'表示单词以chen开头'</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"chenjinhuai chenjinjin chenjingui"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"\&lt;chen"</span>
chenjinhuai chenjinjin chenjingui
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token string">'只找chenjinhuai这个单词'</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"chenjinhuai chenjinjin chenjingui"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"\&lt;chenjinhuai\&gt;"</span>
chenjinhuai chenjinjin chenjingui
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token string">'找单词以gui结尾的'</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"chenjinhuai chenjinjin chenjingui"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"gui\&gt;"</span>
chenjinhuai chenjinjin chenjingui
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h3><a id="5_286"></a>5.正则表达式的普通内容</h3> 
<p><img src="https://images2.imgbox.com/c1/27/6sCGkTkX_o.png" alt="image-20240118154635294"></p> 
<p><img src="https://images2.imgbox.com/80/37/Tf7X39fI_o.png" alt="image-20240118154812430"></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> aaabbbcc<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"b*"</span>
aaabbbcc
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span>  <span class="token parameter variable">-n</span> <span class="token string">"^huawei$"</span>
<span class="token number">9</span>:huawei
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span>  <span class="token parameter variable">-n</span> <span class="token string">"^$"</span>
<span class="token number">11</span>:
<span class="token number">12</span>:
<span class="token number">13</span>:
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<p><strong>取反，显示行号，匹配空行，以#开头</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/ssh/sshd_config<span class="token operator">|</span><span class="token function">egrep</span>  <span class="token parameter variable">-n</span> <span class="token parameter variable">-v</span> <span class="token string">"^$|^#"</span>
</code></pre> 
<p><strong>.代表单个任意字符</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"^sc....:"</span>
sc10:x:1009:1009::/home/sc10:/bin/bash
sc11:x:1010:1010::/home/sc11:/bin/bash
sc12:x:1011:1011::/home/sc12:/bin/bash
sc13:x:1012:1012::/home/sc13:/bin/bash
sc14:x:1013:1013::/home/sc14:/bin/bash
sc15:x:1014:1014::/home/sc15:/bin/bash
sc16:x:1015:1015::/home/sc16:/bin/bash
sc17:x:1016:1016::/home/sc17:/bin/bash
sc18:x:1017:1017::/home/sc18:/bin/bash
sc19:x:1018:1018::/home/sc19:/bin/bash
sc20:x:1019:1019::/home/sc20:/bin/bash
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<p><strong>任意内容:</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"^sc.*:"</span>
sc1:x:1000:1000::/home/sc1:/bin/bash
sc2:x:1001:1001::/home/sc2:/bin/bash
sc3:x:1002:1002::/home/sc3:/bin/bash
sc4:x:1003:1003::/home/sc4:/bin/bash
sc5:x:1004:1004::/home/sc5:/bin/bash
sc6:x:1005:1005::/home/sc6:/bin/bash
sc7:x:1006:1006::/home/sc7:/bin/bash
sc8:x:1007:1007::/home/sc8:/bin/bash
sc9:x:1008:1008::/home/sc9:/bin/bash
sc10:x:1009:1009::/home/sc10:/bin/bash
sc11:x:1010:1010::/home/sc11:/bin/bash
sc12:x:1011:1011::/home/sc12:/bin/bash
sc13:x:1012:1012::/home/sc13:/bin/bash
sc14:x:1013:1013::/home/sc14:/bin/bash
sc15:x:1014:1014::/home/sc15:/bin/bash
sc16:x:1015:1015::/home/sc16:/bin/bash
sc17:x:1016:1016::/home/sc17:/bin/bash
sc18:x:1017:1017::/home/sc18:/bin/bash
sc19:x:1018:1018::/home/sc19:/bin/bash
sc20:x:1019:1019::/home/sc20:/bin/bash
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h3><a id="6_361"></a>6.一些问题</h3> 
<h4><a id="_363"></a>怎么找出特殊字符</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[^0-Z]"</span>
xiaomi HUAWEI
oppo VIVO vivo
huawei apple
sanxin <span class="token operator">&gt;</span> <span class="token number">123</span>
XIAOMI DAMI
LG lenovo nokia NOKIA
<span class="token number">12345</span> sanchaung
oneplus <span class="token number">2345</span> <span class="token comment">#$</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> mobile_phone.txt <span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[^0-9a-zA-Z]"</span>
xiaomi HUAWEI
oppo VIVO vivo
huawei apple
sanxin <span class="token operator">&gt;</span> <span class="token number">123</span>
XIAOMI DAMI
LG lenovo nokia NOKIA
<span class="token number">12345</span> sanchaung
oneplus <span class="token number">2345</span> <span class="token comment">#$</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="_387"></a>怎么知道字符串的长度</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token assign-left variable">u_pwd</span><span class="token operator">=</span><span class="token string">"asfasfafasdfgefdgae"</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token variable">${<!-- --><span class="token operator">#</span>u_pwd}</span>
<span class="token number">19</span>

<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token variable">$u_pwd</span><span class="token operator">|</span><span class="token function">wc</span> <span class="token parameter variable">-L</span>
<span class="token number">19</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="_401"></a>判断用户的密码里是否有特殊字符</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token variable">${u_pwd}</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[0-9]"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[A-Z]"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[^0-Z]"</span>
asfasfafasdfgefdgae1$<span class="token operator">&amp;</span>FGTT
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="_411"></a>判断用户密码是否符合复杂性要求</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> user_passwd.sh 
<span class="token comment">#!/bin/bash</span>

<span class="token comment">#将第一个位置变量的内容复制给 u_pwd</span>
<span class="token assign-left variable">u_pwd</span><span class="token operator">=</span><span class="token variable">$1</span>

<span class="token comment">#判断密码的长度</span>
<span class="token assign-left variable">pwd_l</span><span class="token operator">=</span><span class="token variable">${<!-- --><span class="token operator">#</span>u_pwd}</span>

<span class="token comment">#判断长度是否大于8</span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> $pwd_l <span class="token operator">&gt;=</span><span class="token number">8</span> <span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">then</span>
	<span class="token comment">#判断是否包含数字，大写，特殊符合</span>
	<span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$u_pwd</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[0-9]"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[A-Z]"</span><span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[^0-Z]"</span> <span class="token operator">&amp;&gt;</span>/dev/null<span class="token punctuation">;</span><span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">"密码满足复杂性要求"</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">echo</span> <span class="token string">"密码不满足复杂性要求"</span>
	<span class="token keyword">fi</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token string">"密码长度小于8，请重新输入"</span>
<span class="token keyword">fi</span>
<span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h3><a id="7_440"></a>7.作业</h3> 
<h4><a id="1_varlogmessages_1618_442"></a>1.查找 var/log/messages 这个文件里单词的长度在16-18之间的单词显示出来</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token function">cat</span> /var/log/messages<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"\&lt;[a-Z]{16,18}\&gt;"</span>
</code></pre> 
<h4><a id="2lianxietcpasswdpasswd_448"></a>2.进入/lianxi目录，复制/etc/passwd到当前目录下，然后对passwd进行操作</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell <span class="token number">1</span>-18<span class="token punctuation">]</span> <span class="token builtin class-name">cd</span> /lianxi/
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cp</span> /etc/passwd <span class="token builtin class-name">.</span>
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="3passwdftpmail_456"></a>3、查找出当前passwd文件中以ftp或者mail开头的行，在屏幕上输出。</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> <span class="token function">passwd</span> <span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"^ftp|^mail"</span>
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="4passwdrmf_465"></a>4、查找出当前passwd文件中首行不是以r、m、f开头的行，在屏幕上输出。</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> <span class="token function">passwd</span> <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-v</span> <span class="token string">"^r|^m|^f"</span>
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
operator:x:11:0:operator:/root:/sbin/nologin
games:x:12:100:games:/usr/games:/sbin/nologin
nobody:x:99:99:Nobody:/:/sbin/nologin
systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin
dbus:x:81:81:System message bus:/:/sbin/nologin
polkitd:x:999:998:User <span class="token keyword">for</span> polkitd:/:/sbin/nologin
tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin
sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
postfix:x:89:89::/var/spool/postfix:/sbin/nologin
chrony:x:998:996::/var/lib/chrony:/sbin/nologin
sc1:x:1000:1000::/home/sc1:/bin/bash
sc2:x:1001:1001::/home/sc2:/bin/bash
sc3:x:1002:1002::/home/sc3:/bin/bash
sc4:x:1003:1003::/home/sc4:/bin/bash
sc5:x:1004:1004::/home/sc5:/bin/bash
sc6:x:1005:1005::/home/sc6:/bin/bash
sc7:x:1006:1006::/home/sc7:/bin/bash
sc8:x:1007:1007::/home/sc8:/bin/bash
sc9:x:1008:1008::/home/sc9:/bin/bash
sc10:x:1009:1009::/home/sc10:/bin/bash
sc11:x:1010:1010::/home/sc11:/bin/bash
sc12:x:1011:1011::/home/sc12:/bin/bash
sc13:x:1012:1012::/home/sc13:/bin/bash
sc14:x:1013:1013::/home/sc14:/bin/bash
sc15:x:1014:1014::/home/sc15:/bin/bash
sc16:x:1015:1015::/home/sc16:/bin/bash
sc17:x:1016:1016::/home/sc17:/bin/bash
sc18:x:1017:1017::/home/sc18:/bin/bash
sc19:x:1018:1018::/home/sc19:/bin/bash
sc20:x:1019:1019::/home/sc20:/bin/bash
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="5passwdbash_509"></a>5、查找出当前passwd文件中以bash结尾的行。</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> <span class="token function">passwd</span> <span class="token operator">|</span><span class="token function">egrep</span>  <span class="token string">"bash$"</span>
root:x:0:0:root:/root:/bin/bash
sc1:x:1000:1000::/home/sc1:/bin/bash
sc2:x:1001:1001::/home/sc2:/bin/bash
sc3:x:1002:1002::/home/sc3:/bin/bash
sc4:x:1003:1003::/home/sc4:/bin/bash
sc5:x:1004:1004::/home/sc5:/bin/bash
sc6:x:1005:1005::/home/sc6:/bin/bash
sc7:x:1006:1006::/home/sc7:/bin/bash
sc8:x:1007:1007::/home/sc8:/bin/bash
sc9:x:1008:1008::/home/sc9:/bin/bash
sc10:x:1009:1009::/home/sc10:/bin/bash
sc11:x:1010:1010::/home/sc11:/bin/bash
sc12:x:1011:1011::/home/sc12:/bin/bash
sc13:x:1012:1012::/home/sc13:/bin/bash
sc14:x:1013:1013::/home/sc14:/bin/bash
sc15:x:1014:1014::/home/sc15:/bin/bash
sc16:x:1015:1015::/home/sc16:/bin/bash
sc17:x:1016:1016::/home/sc17:/bin/bash
sc18:x:1017:1017::/home/sc18:/bin/bash
sc19:x:1018:1018::/home/sc19:/bin/bash
sc20:x:1019:1019::/home/sc20:/bin/bash
root1:x:1020:1020::/home/root1:/bin/bash
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="6etclogindefs_538"></a>6、查找出/etc/login.defs文件中的有效行（不显示空行和注释行）。</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/login.defs <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-v</span> <span class="token string">"^$|^#"</span>
MAIL_DIR	/var/spool/mail
PASS_MAX_DAYS	<span class="token number">99999</span>
PASS_MIN_DAYS	<span class="token number">0</span>
PASS_MIN_LEN	<span class="token number">5</span>
PASS_WARN_AGE	<span class="token number">7</span>
UID_MIN                  <span class="token number">1000</span>
UID_MAX                 <span class="token number">60000</span>
SYS_UID_MIN               <span class="token number">201</span>
SYS_UID_MAX               <span class="token number">999</span>
GID_MIN                  <span class="token number">1000</span>
GID_MAX                 <span class="token number">60000</span>
SYS_GID_MIN               <span class="token number">201</span>
SYS_GID_MAX               <span class="token number">999</span>
CREATE_HOME	<span class="token function">yes</span>
UMASK           077
USERGROUPS_ENAB <span class="token function">yes</span>
ENCRYPT_METHOD SHA512
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h4><a id="7varlogmessages16_563"></a>7、查找出/var/log/messages文档中有16个字母的单词？</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /var/log/messages<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"<span class="token entity" title="\b">\b</span>[a-Z]{16}<span class="token entity" title="\b">\b</span>"</span>
</code></pre> 
<h4><a id="8etcpasswdliubash_569"></a>8、查找出来/etc/passwd文件里用户名包含liu同时使用bash的用户</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span>  <span class="token function">cat</span> /etc/passwd<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">".*liu.*:x.*/bin/bash"</span>
liu:x:1022:1022::/home/liu:/bin/bash
liu1:x:1023:1023::/home/liu1:/bin/bash
liu2:x:1024:1024::/home/liu2:/bin/bash
liu3:x:1025:1025::/home/liu3:/bin/bash
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="9etcsshsshd_config__580"></a>9、查找/etc/ssh/sshd_config 里的有效行</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/ssh/sshd_config <span class="token operator">|</span><span class="token function">egrep</span>  <span class="token parameter variable">-v</span> <span class="token string">"^$|^#"</span>
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
SyslogFacility AUTHPRIV
AuthorizedKeysFile	.ssh/authorized_keys
PasswordAuthentication <span class="token function">yes</span>
ChallengeResponseAuthentication no
GSSAPIAuthentication <span class="token function">yes</span>
GSSAPICleanupCredentials no
UsePAM <span class="token function">yes</span>
X11Forwarding <span class="token function">yes</span>
AcceptEnv <span class="token environment constant">LANG</span> LC_CTYPE <span class="token environment constant">LC_NUMERIC</span> <span class="token environment constant">LC_TIME</span> LC_COLLATE <span class="token environment constant">LC_MONETARY</span> LC_MESSAGES
AcceptEnv <span class="token environment constant">LC_PAPER</span> <span class="token environment constant">LC_NAME</span> <span class="token environment constant">LC_ADDRESS</span> <span class="token environment constant">LC_TELEPHONE</span> <span class="token environment constant">LC_MEASUREMENT</span>
AcceptEnv <span class="token environment constant">LC_IDENTIFICATION</span> <span class="token environment constant">LC_ALL</span> <span class="token environment constant">LANGUAGE</span>
AcceptEnv <span class="token environment constant">XMODIFIERS</span>
Subsystem	<span class="token function">sftp</span>	/usr/libexec/openssh/sftp-server
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h4><a id="10etcsshsshd_config_2_606"></a>10、查找出/etc/ssh/sshd_config 文件里的包含连续2个数字的行</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/ssh/sshd_config <span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"<span class="token entity" title="\b">\b</span>[0-9]{2}<span class="token entity" title="\b">\b</span>"</span>
<span class="token comment">#	$OpenBSD: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $</span>
<span class="token comment">#Port 22</span>
<span class="token comment">#MaxSessions 10</span>
<span class="token comment">#X11DisplayOffset 10</span>
<span class="token comment">#MaxStartups 10:30:100</span>
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="11_618"></a>11、查找出包含特殊字符的行</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/ssh/sshd_config <span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[^0-Z]"</span>
<span class="token comment">#	$OpenBSD: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $</span>
<span class="token comment"># This is the sshd server system-wide configuration file.  See</span>
<span class="token comment"># sshd_config(5) for more information.</span>
<span class="token comment"># This sshd was compiled with PATH=/usr/local/bin:/usr/bin</span>
<span class="token comment"># The strategy used for options in the default sshd_config shipped with</span>
<span class="token comment"># OpenSSH is to specify options with their default value where</span>
<span class="token comment"># possible, but leave them commented.  Uncommented options override the</span>
<span class="token comment"># default value.</span>
<span class="token comment"># If you want to change the port on a SELinux system, you have to tell</span>
<span class="token comment"># SELinux about this change.</span>
<span class="token comment"># semanage port -a -t ssh_port_t -p tcp #PORTNUMBER</span>
<span class="token comment">#</span>
<span class="token comment">#Port 22</span>
<span class="token comment">#AddressFamily any</span>
<span class="token comment">#ListenAddress 0.0.0.0</span>
<span class="token comment">#ListenAddress ::</span>
HostKey /etc/ssh/ssh_host_rsa_key
<span class="token comment">#HostKey /etc/ssh/ssh_host_dsa_key</span>
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
<span class="token comment"># Ciphers and keying</span>
<span class="token comment">#RekeyLimit default none</span>
<span class="token comment"># Logging</span>
<span class="token comment">#SyslogFacility AUTH</span>
SyslogFacility AUTHPRIV
<span class="token comment">#LogLevel INFO</span>
<span class="token comment"># Authentication:</span>
<span class="token comment">#LoginGraceTime 2m</span>
<span class="token comment">#PermitRootLogin yes</span>
<span class="token comment">#StrictModes yes</span>
<span class="token comment">#MaxAuthTries 6</span>
<span class="token comment">#MaxSessions 10</span>
<span class="token comment">#PubkeyAuthentication yes</span>
<span class="token comment"># The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2</span>
<span class="token comment"># but this is overridden so installations will only check .ssh/authorized_keys</span>
AuthorizedKeysFile	.ssh/authorized_keys
<span class="token comment">#AuthorizedPrincipalsFile none</span>
<span class="token comment">#AuthorizedKeysCommand none</span>
<span class="token comment">#AuthorizedKeysCommandUser nobody</span>
<span class="token comment"># For this to work you will also need host keys in /etc/ssh/ssh_known_hosts</span>
<span class="token comment">#HostbasedAuthentication no</span>
<span class="token comment"># Change to yes if you don't trust ~/.ssh/known_hosts for</span>
<span class="token comment"># HostbasedAuthentication</span>
<span class="token comment">#IgnoreUserKnownHosts no</span>
<span class="token comment"># Don't read the user's ~/.rhosts and ~/.shosts files</span>
<span class="token comment">#IgnoreRhosts yes</span>
<span class="token comment"># To disable tunneled clear text passwords, change to no here!</span>
<span class="token comment">#PasswordAuthentication yes</span>
<span class="token comment">#PermitEmptyPasswords no</span>
PasswordAuthentication <span class="token function">yes</span>
<span class="token comment"># Change to no to disable s/key passwords</span>
<span class="token comment">#ChallengeResponseAuthentication yes</span>
ChallengeResponseAuthentication no
<span class="token comment"># Kerberos options</span>
<span class="token comment">#KerberosAuthentication no</span>
<span class="token comment">#KerberosOrLocalPasswd yes</span>
<span class="token comment">#KerberosTicketCleanup yes</span>
<span class="token comment">#KerberosGetAFSToken no</span>
<span class="token comment">#KerberosUseKuserok yes</span>
<span class="token comment"># GSSAPI options</span>
GSSAPIAuthentication <span class="token function">yes</span>
GSSAPICleanupCredentials no
<span class="token comment">#GSSAPIStrictAcceptorCheck yes</span>
<span class="token comment">#GSSAPIKeyExchange no</span>
<span class="token comment">#GSSAPIEnablek5users no</span>
<span class="token comment"># Set this to 'yes' to enable PAM authentication, account processing,</span>
<span class="token comment"># and session processing. If this is enabled, PAM authentication will</span>
<span class="token comment"># be allowed through the ChallengeResponseAuthentication and</span>
<span class="token comment"># PasswordAuthentication.  Depending on your PAM configuration,</span>
<span class="token comment"># PAM authentication via ChallengeResponseAuthentication may bypass</span>
<span class="token comment"># the setting of "PermitRootLogin without-password".</span>
<span class="token comment"># If you just want the PAM account and session checks to run without</span>
<span class="token comment"># PAM authentication, then enable this but set PasswordAuthentication</span>
<span class="token comment"># and ChallengeResponseAuthentication to 'no'.</span>
<span class="token comment"># WARNING: 'UsePAM no' is not supported in Red Hat Enterprise Linux and may cause several</span>
<span class="token comment"># problems.</span>
UsePAM <span class="token function">yes</span>
<span class="token comment">#AllowAgentForwarding yes</span>
<span class="token comment">#AllowTcpForwarding yes</span>
<span class="token comment">#GatewayPorts no</span>
X11Forwarding <span class="token function">yes</span>
<span class="token comment">#X11DisplayOffset 10</span>
<span class="token comment">#X11UseLocalhost yes</span>
<span class="token comment">#PermitTTY yes</span>
<span class="token comment">#PrintMotd yes</span>
<span class="token comment">#PrintLastLog yes</span>
<span class="token comment">#TCPKeepAlive yes</span>
<span class="token comment">#UseLogin no</span>
<span class="token comment">#UsePrivilegeSeparation sandbox</span>
<span class="token comment">#PermitUserEnvironment no</span>
<span class="token comment">#Compression delayed</span>
<span class="token comment">#ClientAliveInterval 0</span>
<span class="token comment">#ClientAliveCountMax 3</span>
<span class="token comment">#ShowPatchLevel no</span>
<span class="token comment">#UseDNS yes</span>
<span class="token comment">#PidFile /var/run/sshd.pid</span>
<span class="token comment">#MaxStartups 10:30:100</span>
<span class="token comment">#PermitTunnel no</span>
<span class="token comment">#ChrootDirectory none</span>
<span class="token comment">#VersionAddendum none</span>
<span class="token comment"># no default banner path</span>
<span class="token comment">#Banner none</span>
<span class="token comment"># Accept locale-related environment variables</span>
AcceptEnv <span class="token environment constant">LANG</span> LC_CTYPE <span class="token environment constant">LC_NUMERIC</span> <span class="token environment constant">LC_TIME</span> LC_COLLATE <span class="token environment constant">LC_MONETARY</span> LC_MESSAGES
AcceptEnv <span class="token environment constant">LC_PAPER</span> <span class="token environment constant">LC_NAME</span> <span class="token environment constant">LC_ADDRESS</span> <span class="token environment constant">LC_TELEPHONE</span> <span class="token environment constant">LC_MEASUREMENT</span>
AcceptEnv <span class="token environment constant">LC_IDENTIFICATION</span> <span class="token environment constant">LC_ALL</span> <span class="token environment constant">LANGUAGE</span>
AcceptEnv <span class="token environment constant">XMODIFIERS</span>
<span class="token comment"># override default of no subsystems</span>
Subsystem	<span class="token function">sftp</span>	/usr/libexec/openssh/sftp-server
<span class="token comment"># Example of overriding settings on a per-user basis</span>
<span class="token comment">#Match User anoncvs</span>
<span class="token comment">#	X11Forwarding no</span>
<span class="token comment">#	AllowTcpForwarding no</span>
<span class="token comment">#	PermitTTY no</span>
<span class="token comment">#	ForceCommand cvs server</span>
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h4><a id="12_741"></a>12、查找出不包含数字的行</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /etc/ssh/sshd_config <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-v</span> <span class="token string">"[0-9]"</span>

<span class="token comment"># This is the sshd server system-wide configuration file.  See</span>

<span class="token comment"># This sshd was compiled with PATH=/usr/local/bin:/usr/bin</span>

<span class="token comment"># The strategy used for options in the default sshd_config shipped with</span>
<span class="token comment"># OpenSSH is to specify options with their default value where</span>
<span class="token comment"># possible, but leave them commented.  Uncommented options override the</span>
<span class="token comment"># default value.</span>

<span class="token comment"># If you want to change the port on a SELinux system, you have to tell</span>
<span class="token comment"># SELinux about this change.</span>
<span class="token comment"># semanage port -a -t ssh_port_t -p tcp #PORTNUMBER</span>
<span class="token comment">#</span>
<span class="token comment">#AddressFamily any</span>
<span class="token comment">#ListenAddress ::</span>

HostKey /etc/ssh/ssh_host_rsa_key
<span class="token comment">#HostKey /etc/ssh/ssh_host_dsa_key</span>
HostKey /etc/ssh/ssh_host_ecdsa_key

<span class="token comment"># Ciphers and keying</span>
<span class="token comment">#RekeyLimit default none</span>

<span class="token comment"># Logging</span>
<span class="token comment">#SyslogFacility AUTH</span>
SyslogFacility AUTHPRIV
<span class="token comment">#LogLevel INFO</span>

<span class="token comment"># Authentication:</span>

<span class="token comment">#PermitRootLogin yes</span>
<span class="token comment">#StrictModes yes</span>

<span class="token comment">#PubkeyAuthentication yes</span>

<span class="token comment"># but this is overridden so installations will only check .ssh/authorized_keys</span>
AuthorizedKeysFile	.ssh/authorized_keys

<span class="token comment">#AuthorizedPrincipalsFile none</span>

<span class="token comment">#AuthorizedKeysCommand none</span>
<span class="token comment">#AuthorizedKeysCommandUser nobody</span>

<span class="token comment"># For this to work you will also need host keys in /etc/ssh/ssh_known_hosts</span>
<span class="token comment">#HostbasedAuthentication no</span>
<span class="token comment"># Change to yes if you don't trust ~/.ssh/known_hosts for</span>
<span class="token comment"># HostbasedAuthentication</span>
<span class="token comment">#IgnoreUserKnownHosts no</span>
<span class="token comment"># Don't read the user's ~/.rhosts and ~/.shosts files</span>
<span class="token comment">#IgnoreRhosts yes</span>

<span class="token comment"># To disable tunneled clear text passwords, change to no here!</span>
<span class="token comment">#PasswordAuthentication yes</span>
<span class="token comment">#PermitEmptyPasswords no</span>
PasswordAuthentication <span class="token function">yes</span>

<span class="token comment"># Change to no to disable s/key passwords</span>
<span class="token comment">#ChallengeResponseAuthentication yes</span>
ChallengeResponseAuthentication no

<span class="token comment"># Kerberos options</span>
<span class="token comment">#KerberosAuthentication no</span>
<span class="token comment">#KerberosOrLocalPasswd yes</span>
<span class="token comment">#KerberosTicketCleanup yes</span>
<span class="token comment">#KerberosGetAFSToken no</span>
<span class="token comment">#KerberosUseKuserok yes</span>

<span class="token comment"># GSSAPI options</span>
GSSAPIAuthentication <span class="token function">yes</span>
GSSAPICleanupCredentials no
<span class="token comment">#GSSAPIStrictAcceptorCheck yes</span>
<span class="token comment">#GSSAPIKeyExchange no</span>

<span class="token comment"># Set this to 'yes' to enable PAM authentication, account processing,</span>
<span class="token comment"># and session processing. If this is enabled, PAM authentication will</span>
<span class="token comment"># be allowed through the ChallengeResponseAuthentication and</span>
<span class="token comment"># PasswordAuthentication.  Depending on your PAM configuration,</span>
<span class="token comment"># PAM authentication via ChallengeResponseAuthentication may bypass</span>
<span class="token comment"># the setting of "PermitRootLogin without-password".</span>
<span class="token comment"># If you just want the PAM account and session checks to run without</span>
<span class="token comment"># PAM authentication, then enable this but set PasswordAuthentication</span>
<span class="token comment"># and ChallengeResponseAuthentication to 'no'.</span>
<span class="token comment"># WARNING: 'UsePAM no' is not supported in Red Hat Enterprise Linux and may cause several</span>
<span class="token comment"># problems.</span>
UsePAM <span class="token function">yes</span>

<span class="token comment">#AllowAgentForwarding yes</span>
<span class="token comment">#AllowTcpForwarding yes</span>
<span class="token comment">#GatewayPorts no</span>
<span class="token comment">#PermitTTY yes</span>
<span class="token comment">#PrintMotd yes</span>
<span class="token comment">#PrintLastLog yes</span>
<span class="token comment">#TCPKeepAlive yes</span>
<span class="token comment">#UseLogin no</span>
<span class="token comment">#UsePrivilegeSeparation sandbox</span>
<span class="token comment">#PermitUserEnvironment no</span>
<span class="token comment">#Compression delayed</span>
<span class="token comment">#ShowPatchLevel no</span>
<span class="token comment">#UseDNS yes</span>
<span class="token comment">#PidFile /var/run/sshd.pid</span>
<span class="token comment">#PermitTunnel no</span>
<span class="token comment">#ChrootDirectory none</span>
<span class="token comment">#VersionAddendum none</span>

<span class="token comment"># no default banner path</span>
<span class="token comment">#Banner none</span>

<span class="token comment"># Accept locale-related environment variables</span>
AcceptEnv <span class="token environment constant">LANG</span> LC_CTYPE <span class="token environment constant">LC_NUMERIC</span> <span class="token environment constant">LC_TIME</span> LC_COLLATE <span class="token environment constant">LC_MONETARY</span> LC_MESSAGES
AcceptEnv <span class="token environment constant">LC_PAPER</span> <span class="token environment constant">LC_NAME</span> <span class="token environment constant">LC_ADDRESS</span> <span class="token environment constant">LC_TELEPHONE</span> <span class="token environment constant">LC_MEASUREMENT</span>
AcceptEnv <span class="token environment constant">LC_IDENTIFICATION</span> <span class="token environment constant">LC_ALL</span> <span class="token environment constant">LANGUAGE</span>
AcceptEnv <span class="token environment constant">XMODIFIERS</span>

<span class="token comment"># override default of no subsystems</span>
Subsystem	<span class="token function">sftp</span>	/usr/libexec/openssh/sftp-server

<span class="token comment"># Example of overriding settings on a per-user basis</span>
<span class="token comment">#Match User anoncvs</span>
<span class="token comment">#	AllowTcpForwarding no</span>
<span class="token comment">#	PermitTTY no</span>
<span class="token comment">#	ForceCommand cvs server</span>
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h4><a id="13varlogsecureip_873"></a>13、查找出/var/log/secure里的ip地址出来</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /var/log/secure<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}"</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59386</span> ssh2
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59387</span> ssh2
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64503</span> ssh2
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64504</span> ssh2
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># cat /var/log/secure|egrep "([0-9]{1,3}\.){3}[0-9]{1,3}"</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59386</span> ssh2
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59387</span> ssh2
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64503</span> ssh2
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64504</span> ssh2
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># cat /var/log/secure|egrep "([0-9]{1,3}\.){3}[0-9]{1,3}"</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59386</span> ssh2
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59387</span> ssh2
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64503</span> ssh2
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64504</span> ssh2
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="14_906"></a>14、写一个表示下面网址的正则表达式出来。</h4> 
<p>例如： http://www.baidu.com</p> 
<p>http://www.sina.com</p> 
<p>http://www.163.com</p> 
<p>http://www.12306.cn</p> 
<p>http://www.qillu.edu</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> web.txt<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[a-Z]+://([0-Z]+\.){2}[0-Z]+"</span> 
http://www.baidu.com
http://www.sina.com
http://www.163.com
http://www.12306.cn 
http://www.qillu.edu 
</code></pre> 
<h4><a id="15_929"></a>15、写一个表示下面网址的正则表达式出来。</h4> 
<p>例如： http://www.baidu.com</p> 
<p>http://www.sina.com</p> 
<p>http://www.163.com</p> 
<p>http://www.12306.cn</p> 
<p>http://www.qillu.edu</p> 
<p>rsync://www.github.com/abc</p> 
<p>ftp://192.168.0.1</p> 
<p>ftp://www.baidu.com</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> web2.txt<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[a-Z]+://([0-Z]+\.){2}[0-Z]+"</span> 
http://www.baidu.com
http://www.sina.com
http://www.163.com 
http://www.12306.cn 
http://www.qillu.edu 
rsync://www.github.com/abc 
ftp://192.168.0.1 
ftp://www.baidu.com 
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="16_960"></a>16、写一个表示邮箱的正则</h4> 
<p>feng@qq.com</p> 
<p>1234feng@163.com</p> 
<p>meng.xianhui@yahoo.cn</p> 
<p>liudehua@sina.com</p> 
<p>10001@qq.com</p> 
<p>123_ui@12306.cn</p> 
<p>qilu@qilu.edu</p> 
<p>qilu@qilu.edu/fjdkfjk/fjdk</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> mail.txt<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"[0-Z_]+@[0-Z]+\.[a-z]+"</span>
feng@qq.com 
1234feng@163.com
meng.xianhui@yahoo.cn
liudehua@sina.com 
<span class="token number">10001</span>@qq.com 
123_ui@12306.cn 
qilu@qilu.edu 
qilu@qilu.edu/fjdkfjk/fjdk
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="17Cip_section1192223_section2section3section40255_993"></a>17、C类ip地址的正则表达式 section1:范围在192-223之间 section2和section3和section4范围：0-255之间</h4> 
<p>例如：193.168.23.1</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /var/log/secure<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"<span class="token entity" title="\b">\b</span>(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9])<span class="token entity" title="\b">\b</span>"</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:23 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5760</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59386</span> ssh2
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">17</span> <span class="token number">15</span>:46:25 gh-shell sshd<span class="token punctuation">[</span><span class="token number">5781</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">59387</span> ssh2
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:36 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6481</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64503</span> ssh2
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Address <span class="token number">192.168</span>.153.1 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT<span class="token operator">!</span>
Jan <span class="token number">18</span> 08:28:39 gh-shell sshd<span class="token punctuation">[</span><span class="token number">6502</span><span class="token punctuation">]</span>: Accepted password <span class="token keyword">for</span> root from <span class="token number">192.168</span>.153.1 port <span class="token number">64504</span> ssh2
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>


</code></pre> 
<p>A: 1~127</p> 
<p>B:128~191</p> 
<p>C:192~223</p> 
<blockquote> 
 <p>1位数字</p> 
 <p>0-9</p> 
</blockquote> 
<blockquote> 
 <p>2位数</p> 
 <p>10~99</p> 
</blockquote> 
<blockquote> 
 <p>3位数</p> 
 <p>100~199</p> 
 <p>200~249</p> 
 <p>250~255</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token string">'4个255的正则'</span>
<span class="token punctuation">\</span>b<span class="token punctuation">((</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span>-4<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span>-5<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">\</span>.<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span>-4<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">\</span>b
</code></pre> 
<pre><code class="prism language-shell"><span class="token string">'B类:128~191'</span>
<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">[</span><span class="token number">89</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">3</span>-8<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">19</span><span class="token punctuation">[</span>01<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">\</span>.<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span>-4<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span>-5<span class="token punctuation">]</span><span class="token punctuation">))</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token string">'A类:1~127'</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">11</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">12</span><span class="token punctuation">[</span><span class="token number">0</span>-7<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">\</span>.<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span>-4<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span>-5<span class="token punctuation">]</span><span class="token punctuation">))</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">cat</span> /var/log/secure<span class="token operator">|</span><span class="token function">egrep</span> <span class="token string">"<span class="token entity" title="\b">\b</span>([1-9]|[1-9][0-9]|11[0-9]|12[0-7])(\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])){3}<span class="token entity" title="\b">\b</span>"</span>
<span class="token number">1.12</span>.34.5
<span class="token number">2.12</span>.34.5
<span class="token number">88.12</span>.34.5
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h4><a id="18_netstat_antplu_ip_1059"></a>18.用简单的正则匹配 netstat -antplu 的ip地址，去重</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">netstat</span> -antplu<span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-o</span> <span class="token string">"<span class="token entity" title="\b">\b</span>(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9])<span class="token entity" title="\b">\b</span>"</span><span class="token operator">|</span><span class="token function">sort</span><span class="token operator">|</span><span class="token function">uniq</span>
<span class="token number">0.0</span>.0.0
<span class="token number">127.0</span>.0.1
<span class="token number">192.168</span>.153.1
<span class="token number">192.168</span>.153.161
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="19shell_16_1070"></a>19.用shell生成 16位的密码</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token environment constant">$RANDOM</span>"</span><span class="token operator">|</span>md5sum<span class="token operator">|</span><span class="token function">cut</span> <span class="token parameter variable">-c</span> <span class="token number">1</span>-16
97e41756d502e1e6
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<h4><a id="20pspid2345_1080"></a>20.使用ps命令查看进程(pid=2345)的启动时间</h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'$2 == 23 {print $0}'</span>
root         <span class="token number">23</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> ?        S    <span class="token number">1</span>月17   <span class="token number">0</span>:00 <span class="token punctuation">[</span>migration/3<span class="token punctuation">]</span>
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span> <span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'$2 == 23 {print $9}'</span>
<span class="token number">1</span>月17
<span class="token punctuation">[</span>root@gh-shell lianxi<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e10acb0770cf7bcdbffb9fbfea72400/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">人大金仓数据库KingbaseES 中的自治事务、子事务和长事务</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb32b44f1772f8ab7710cb4aed755915/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Apache-iotdb物联网数据库的安装及使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>