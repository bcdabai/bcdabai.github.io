<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt学习c&#43;&#43; - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt学习c&#43;&#43;" />
<meta property="og:description" content="Qt学习C&#43;&#43; 平台及版本Day01 HelloWorld程序生成Day02 分析第一个Qt程序1) main.cpp2) mainwindow.h和mainwindow.cpp Day03 Qt控件和事件Day04 信号和槽基本理解connect()函数实现信号和槽实例演示信号和槽机制 Day05 Qt QLabel文本框的使用QLabel文本框的信号和槽QLabel的常用方法QLabel 控件的槽函数 实例演示QLabel文本框的用法 Day06 QPushButton按钮的创建QPushButton常用方法：QPushButton按钮的信号和槽实例演示QPushButton按钮用法 Day07 Qt QLineEdit单行输入框用法详解QLineEdit单行输入框的创建QLineEdit单行输入框的使用QLineEdit常用方法QLineEdit信号函数QLineEdit槽函数 QLineEdit单行输入框的用法示例Qt QListWidget列表框用法详解QListWidget列表框的创建QListWidgetItem列表项 QListWidget列表框的使用QListWidget信号和槽函数 实例演示QListWidget列表框的用法 Day08 Qt QTableWidget表格控件的用法（非常详细）QTableWidget表格的创建QTableWidgetItem单元格QTableWidgetItem成员方法QTableWidget类常用成员方法 QTableWidget信号和槽QTableWidget信号函数QTableWidget 槽函数 QTableWidget表格实例 Day09 QTreeWidget树形控件用法详解QTreeWidget控件的创建QTreeWidgetItem类QTreeWidgetItem常用成员方法QTreeWidget常用成员方法 QTreeWidget 控件的用法1) 添加结点2) 给结点添加图标3) 给结点添加复选框4) 多列树形控件5) QTreeWidget中添加其它控件 QTreeWidget信号和槽QTreeWidget信号函数：QTreeWidget 的槽函数 示例 Day10 QMessageBox用法详解通用的QMessageBox消息框1) information消息对话框2) critical消息对话框3) question消息对话框4) warning消息对话框5) about和aboutQt对话框自定义QMessageBox对话框QMessageBox 常用成员方法![在这里插入图片描述](https://img-blog.csdnimg.cn/4f377a8a07fe4433b8bbb2bb8587df64.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ2xheVRveQ==,size_20,color_FFFFFF,t_70,g_se,x_16)QMessageBox的信号和槽 Day11 Qt布局管理详解（5种布局控件）QVBoxLayout常用方法QHBoxLayout水平布局QGridLayout网格布局QGridLayout常用方法 QFormLayout表单布局QFormLayout常用方法 QStackedLayout分组布局QStackedLayout常用方法 Day12 Qt pro文件详解Qt pro文件常用配置项 QT配置项 Day13 Qt自定义信号和槽函数自定义信号和槽的完整实例 Day14 QFile文件操作QFile文件打开方式QFile常用方法![在这里插入图片描述](https://img-blog.csdnimg.cn/ee573a577b91431a897378b1fa68435a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ2xheVRveQ==,size_20,color_FFFFFF,t_70,g_se,x_16)【实例一】演示了 QFile 类读写文本文件的过程【实例二】演示 QFile 读写二进制文件的过程。QFile&#43;QTextStreamQTextStream常用方法QTextStream常用格式描述符![在这里插入图片描述](https://img-blog.csdnimg.cn/7df56bda63cd497081077deda3c9f31a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ2xheVRveQ==,size_20,color_FFFFFF,t_70,g_se,x_16)QFile&#43;QDataStreamQDataStream常用方法 Day15 Qt实现学生信息管理系统Qt打包程序详解问题总结1）中文乱码 平台及版本 【qt】版本：4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6d6fd57c92450973e21f820d5df978e7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-05T09:26:20+08:00" />
<meta property="article:modified_time" content="2022-02-05T09:26:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt学习c&#43;&#43;</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Qt学习C++</h4> 
 <ul><li><a href="#_2" rel="nofollow">平台及版本</a></li><li><ul><li><a href="#Day01_HelloWorld_7" rel="nofollow">Day01 HelloWorld程序生成</a></li><li><a href="#Day02_Qt_38" rel="nofollow">Day02 分析第一个Qt程序</a></li><li><ul><li><a href="#1_maincpp_46" rel="nofollow">1) main.cpp</a></li><li><a href="#2_mainwindowhmainwindowcpp_56" rel="nofollow">2) mainwindow.h和mainwindow.cpp</a></li></ul> 
   </li><li><a href="#Day03_Qt_122" rel="nofollow">Day03 Qt控件和事件</a></li><li><a href="#Day04__180" rel="nofollow">Day04 信号和槽</a></li><li><ul><li><a href="#_182" rel="nofollow">基本理解</a></li><li><a href="#connect_207" rel="nofollow">connect()函数实现信号和槽</a></li><li><a href="#_247" rel="nofollow">实例演示信号和槽机制</a></li></ul> 
   </li><li><a href="#Day05_Qt_QLabel_277" rel="nofollow">Day05 Qt QLabel文本框的使用</a></li><li><ul><li><a href="#QLabel_299" rel="nofollow">QLabel文本框的信号和槽</a></li><li><ul><li><a href="#QLabel_302" rel="nofollow">QLabel的常用方法</a></li><li><a href="#QLabel__305" rel="nofollow">QLabel 控件的槽函数</a></li></ul> 
    </li><li><a href="#QLabel_308" rel="nofollow">实例演示QLabel文本框的用法</a></li></ul> 
   </li><li><a href="#Day06_QPushButton_347" rel="nofollow">Day06 QPushButton按钮的创建</a></li><li><ul><li><a href="#QPushButton_368" rel="nofollow">QPushButton常用方法：</a></li><li><a href="#QPushButton_370" rel="nofollow">QPushButton按钮的信号和槽</a></li><li><a href="#QPushButton_373" rel="nofollow">实例演示QPushButton按钮用法</a></li></ul> 
   </li><li><a href="#Day07_Qt_QLineEdit_403" rel="nofollow">Day07 Qt QLineEdit单行输入框用法详解</a></li><li><ul><li><a href="#QLineEdit_407" rel="nofollow">QLineEdit单行输入框的创建</a></li><li><a href="#QLineEdit_424" rel="nofollow">QLineEdit单行输入框的使用</a></li><li><ul><li><a href="#QLineEdit_425" rel="nofollow">QLineEdit常用方法</a></li><li><a href="#QLineEdit_427" rel="nofollow">QLineEdit信号函数</a></li><li><a href="#QLineEdit_429" rel="nofollow">QLineEdit槽函数</a></li></ul> 
    </li><li><a href="#QLineEdit_432" rel="nofollow">QLineEdit单行输入框的用法示例</a></li><li><a href="#Qt_QListWidget_476" rel="nofollow">Qt QListWidget列表框用法详解</a></li><li><ul><li><a href="#QListWidget_477" rel="nofollow">QListWidget列表框的创建</a></li><li><a href="#QListWidgetItem_493" rel="nofollow">QListWidgetItem列表项</a></li></ul> 
    </li><li><a href="#QListWidget_505" rel="nofollow">QListWidget列表框的使用</a></li><li><ul><li><a href="#QListWidget_522" rel="nofollow">QListWidget信号和槽函数</a></li></ul> 
    </li><li><a href="#QListWidget_524" rel="nofollow">实例演示QListWidget列表框的用法</a></li></ul> 
   </li><li><a href="#Day08_Qt_QTableWidget_581" rel="nofollow">Day08 Qt QTableWidget表格控件的用法（非常详细）</a></li><li><ul><li><a href="#QTableWidget_599" rel="nofollow">QTableWidget表格的创建</a></li><li><a href="#QTableWidgetItem_610" rel="nofollow">QTableWidgetItem单元格</a></li><li><ul><li><a href="#QTableWidgetItem_628" rel="nofollow">QTableWidgetItem成员方法</a></li><li><a href="#QTableWidget_630" rel="nofollow">QTableWidget类常用成员方法</a></li></ul> 
    </li><li><a href="#QTableWidget_632" rel="nofollow">QTableWidget信号和槽</a></li><li><ul><li><a href="#QTableWidget_635" rel="nofollow">QTableWidget信号函数</a></li><li><a href="#QTableWidget__638" rel="nofollow">QTableWidget 槽函数</a></li></ul> 
    </li><li><a href="#QTableWidget_640" rel="nofollow">QTableWidget表格实例</a></li></ul> 
   </li><li><a href="#Day09_QTreeWidget_715" rel="nofollow">Day09 QTreeWidget树形控件用法详解</a></li><li><ul><li><a href="#QTreeWidget_717" rel="nofollow">QTreeWidget控件的创建</a></li><li><ul><li><a href="#QTreeWidgetItem_727" rel="nofollow">QTreeWidgetItem类</a></li><li><a href="#QTreeWidgetItem_746" rel="nofollow">QTreeWidgetItem常用成员方法</a></li><li><a href="#QTreeWidget_749" rel="nofollow">QTreeWidget常用成员方法</a></li></ul> 
    </li><li><a href="#QTreeWidget__751" rel="nofollow">QTreeWidget 控件的用法</a></li><li><ul><li><a href="#1__752" rel="nofollow">1) 添加结点</a></li><li><a href="#2__783" rel="nofollow">2) 给结点添加图标</a></li><li><a href="#3__803" rel="nofollow">3) 给结点添加复选框</a></li><li><a href="#4__814" rel="nofollow">4) 多列树形控件</a></li><li><a href="#5_QTreeWidget_872" rel="nofollow">5) QTreeWidget中添加其它控件</a></li></ul> 
    </li><li><a href="#QTreeWidget_923" rel="nofollow">QTreeWidget信号和槽</a></li><li><ul><li><a href="#QTreeWidget_925" rel="nofollow">QTreeWidget信号函数：</a></li><li><a href="#QTreeWidget__935" rel="nofollow">QTreeWidget 的槽函数</a></li></ul> 
    </li><li><a href="#_943" rel="nofollow">示例</a></li></ul> 
   </li><li><a href="#Day10_QMessageBox_1015" rel="nofollow">Day10 QMessageBox用法详解</a></li><li><ul><li><a href="#QMessageBox_1019" rel="nofollow">通用的QMessageBox消息框</a></li><li><ul><li><a href="#1_information_1020" rel="nofollow">1) information消息对话框</a></li><li><a href="#2_critical_1046" rel="nofollow">2) critical消息对话框</a></li><li><a href="#3_question_1064" rel="nofollow">3) question消息对话框</a></li><li><a href="#4_warning_1079" rel="nofollow">4) warning消息对话框</a></li><li><a href="#5_aboutaboutQt_1094" rel="nofollow">5) about和aboutQt对话框</a></li><li><a href="#QMessageBox_1102" rel="nofollow">自定义QMessageBox对话框</a></li><li><a href="#QMessageBox_httpsimgblogcsdnimgcn4f377a8a07fe4433b8bbb2bb8587df64pngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBAQ2xheVRveQsize_20color_FFFFFFt_70g_sex_16_1145" rel="nofollow">QMessageBox 常用成员方法![在这里插入图片描述](https://img-blog.csdnimg.cn/4f377a8a07fe4433b8bbb2bb8587df64.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ2xheVRveQ==,size_20,color_FFFFFF,t_70,g_se,x_16)</a></li><li><a href="#QMessageBox_1170" rel="nofollow">QMessageBox的信号和槽</a></li></ul> 
   </li></ul> 
   </li><li><a href="#Day11_Qt5_1229" rel="nofollow">Day11 Qt布局管理详解（5种布局控件）</a></li><li><ul><li><ul><li><a href="#QVBoxLayout_1245" rel="nofollow">QVBoxLayout常用方法</a></li><li><a href="#QHBoxLayout_1298" rel="nofollow">QHBoxLayout水平布局</a></li><li><a href="#QGridLayout_1352" rel="nofollow">QGridLayout网格布局</a></li><li><a href="#QGridLayout_1362" rel="nofollow">QGridLayout常用方法</a></li></ul> 
    </li><li><a href="#QFormLayout_1416" rel="nofollow">QFormLayout表单布局</a></li><li><ul><li><a href="#QFormLayout_1422" rel="nofollow">QFormLayout常用方法</a></li></ul> 
    </li><li><a href="#QStackedLayout_1454" rel="nofollow">QStackedLayout分组布局</a></li><li><ul><li><a href="#QStackedLayout_1466" rel="nofollow">QStackedLayout常用方法</a></li></ul> 
   </li></ul> 
   </li><li><a href="#Day12_Qt_pro_1528" rel="nofollow">Day12 Qt pro文件详解</a></li><li><ul><li><ul><li><a href="#Qt_pro_1556" rel="nofollow">Qt pro文件常用配置项</a></li></ul> 
    </li><li><a href="#QT_1563" rel="nofollow">QT配置项</a></li></ul> 
   </li><li><a href="#Day13_Qt_1587" rel="nofollow">Day13 Qt自定义信号和槽函数</a></li><li><ul><li><a href="#_1706" rel="nofollow">自定义信号和槽的完整实例</a></li></ul> 
   </li><li><a href="#Day14_QFile_1771" rel="nofollow">Day14 QFile文件操作</a></li><li><ul><li><a href="#QFile_1788" rel="nofollow">QFile文件打开方式</a></li><li><a href="#QFilehttpsimgblogcsdnimgcnee573a577b91431a897378b1fa68435apngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBAQ2xheVRveQsize_20color_FFFFFFt_70g_sex_16_1801" rel="nofollow">QFile常用方法![在这里插入图片描述](https://img-blog.csdnimg.cn/ee573a577b91431a897378b1fa68435a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ2xheVRveQ==,size_20,color_FFFFFF,t_70,g_se,x_16)</a></li><li><a href="#_QFile__1802" rel="nofollow">【实例一】演示了 QFile 类读写文本文件的过程</a></li><li><a href="#_QFile__1839" rel="nofollow">【实例二】演示 QFile 读写二进制文件的过程。</a></li><li><a href="#QFileQTextStream_1885" rel="nofollow">QFile+QTextStream</a></li><li><a href="#QTextStream_1895" rel="nofollow">QTextStream常用方法</a></li><li><a href="#QTextStreamhttpsimgblogcsdnimgcn7df56bda63cd497081077deda3c9f31apngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBAQ2xheVRveQsize_20color_FFFFFFt_70g_sex_16_1938" rel="nofollow">QTextStream常用格式描述符![在这里插入图片描述](https://img-blog.csdnimg.cn/7df56bda63cd497081077deda3c9f31a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ2xheVRveQ==,size_20,color_FFFFFF,t_70,g_se,x_16)</a></li><li><a href="#QFileQDataStream_1970" rel="nofollow">QFile+QDataStream</a></li><li><a href="#QDataStream_1978" rel="nofollow">QDataStream常用方法</a></li></ul> 
   </li><li><a href="#Day15_Qt_2021" rel="nofollow">Day15 Qt实现学生信息管理系统</a></li><li><a href="#Qt_2075" rel="nofollow">Qt打包程序详解</a></li><li><a href="#_2106" rel="nofollow">问题总结</a></li><li><ul><li><a href="#1_2109" rel="nofollow">1）中文乱码</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>平台及版本</h2> 
<p>【qt】版本：4.5x<br> 【vs】版本：vs2015<br> 【语言】：c++</p> 
<h3><a id="Day01_HelloWorld_7"></a>Day01 HelloWorld程序生成</h3> 
<p>单击 Qt Creator 的菜单项文件-&gt;新建文件或项目，出现如图 1 所示的对话框。在这个对话框里选择需要创建的项目或文件的模板</p> 
<p><img src="https://images2.imgbox.com/e4/1d/j9ho8u72_o.png" alt="在这里插入图片描述"><br> 对话框中选择项目类型为 Qt Widgets Application 后，单击“Choose…”按钮后更改文件名字及存储位置，设置好项目名称和保存路径后，单击“Next”按钮<br> <img src="https://images2.imgbox.com/3d/98/3CGO8dbY_o.png" alt="在这里插入图片描述"><br> 选择自己常用的开发平台，我这里选用的是Vs2015，next<br> <img src="https://images2.imgbox.com/35/4e/f92YMVKx_o.png" alt="在这里插入图片描述"><br> 下一步<br> <img src="https://images2.imgbox.com/4a/d1/e949Xs5o_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>窗口左侧有上下两个子窗口，上方的目录树显示了项目内文件的组织结构，显示当 前项目为 Demo。项目的名称构成目录树的一个根节点，Qt Creator 可以打开多个项目，但是只有一个活动项目，活动项目的项目名称节点用粗体字体表示。<br> 在项目名称节点下面，分组管理着项目内的各种源文件，几个文件及分组分别为以下几项：<br> Demo.pro 是项目管理文件，包括一些对项目的设置项。<br> Headers 分组，该节点下是项目内的所有头文件（.h），图 中所示项目有一个头文件 mainwindow.h，是主窗口类的头文件。<br> Sources 分组：该节点下是项目内的所有 C++源文件（.cpp），图 5中所示项目有两个 C++ 源文件，mainwindow.cpp 是主窗口类的实现文件，与 mainwindow.h 文件对应。main.cpp 是主函数文件，也是应用程序的入口。<br> Forms 分组：该节点下是项目内的所有界面文件（.ui）。图中所示项目有一个界面文件mainwindow.ui，是主窗口的界面文件。界面文件是文本文件，使用 XML 语言描述界面的组成。<br> 左侧上下两个子窗口的显示内容可以通过其上方的一个下拉列表框进行选择，可以选择的显示内容包括项目、打开文档、书签、文件系统、类视图、大纲等。上方的子窗口显示了项目的文件目录树，下方显示打开的文件列表。可以在下方选择显示类视图，这样下方则显示项目内所有的类的结构，便于程序浏览和快速切换到需要的代码位置。</p> 
</blockquote> 
<p>双击文件目录树中的文件mainwindow.ui，出现下图<br> <img src="https://images2.imgbox.com/fc/46/i8gX2Bux_o.png" alt="在这里插入图片描述"><br> 将一个Label组件拖放到设计的窗体上面。双击刚刚放置的 Label 组件，可以编辑其文字内容，将文字内容更改为“Hello, World!”。右下角属性自行测试</p> 
<p>单击主窗口左侧工具栏上的“项目”按钮<br> <img src="https://images2.imgbox.com/4e/7d/c9BTUiqD_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>每个编译器又有 Build 和 Run 两个设置界面。在 Build 设置界面上，有一个“Shadow build” 复选框。如果勾选此项，编译后将在项目的同级目录下建立一个编译后的文件目录，目录名称包含编译器信息，这种方式一般用于使用不同编译器创建不同版本的可执行文件。如果不勾选此项，编译后将在项目的目录下建立“Debug”和“Release”子目录用于存放编译后的文件。</p> 
</blockquote> 
<p>首先对项目进行编译，没有错误后，再运行程序。<br> <img src="https://images2.imgbox.com/08/40/0wi9UX1a_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Day02_Qt_38"></a>Day02 分析第一个Qt程序</h3> 
<p>day01中通过在 xxx.ui 文件中拖拽 Label 组件，设计出了一个显示 “Hello,World!” 的窗口<br> 今天我们完全舍弃 xxx.ui 文件，亲手编写代码实现day01效果</p> 
<p>首先新建一个项目，前面和正常生成一致直到这里不创建界面<br> <img src="https://images2.imgbox.com/c4/ad/EpAE5sqd_o.png" alt="在这里插入图片描述"><br> 生成完成后对比Demo和Demo02不难发现缺少了ui文件<br> <img src="https://images2.imgbox.com/ee/93/oytuPxbL_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1_maincpp_46"></a>1) main.cpp</h4> 
<p>main.cpp 文件，可以看到该文件包含的所有代码：</p> 
<p><img src="https://images2.imgbox.com/50/3b/AuQjnpNV_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>除了第 6、8 行代码外，其它代码的含义分别是：<br> 1~2 行：由于 main() 函数中分别定义了 QApplication 和 MainWindow 类的对象，因此需要引入 mainwindows.h 和 QApplication 头文件。mainwindow.h 文件是我们自己创建的，引入时用" "双引号括起来；QApplication 是 Qt 提供给我们的，引入时用&lt;&gt;括起来。<br> 第 7 行：MainWindow 是自定义的类，继承自 QMainWindow 主窗口类，因此 MainWindow 也是一个主窗口类。w 是 MainWindow 类实例化出的对象，表示一个主窗口。<br> 第 8 行：默认情况下，Qt 提供的所有组件（控件、部件）都是隐藏的，不会自动显示。通过调用 MainWindow 类提供的 show() 方法，w 窗口就可以在程序运行后显示出来。</p> 
</blockquote> 
<h4><a id="2_mainwindowhmainwindowcpp_56"></a>2) mainwindow.h和mainwindow.cpp</h4> 
<p>创建项目时，对话框中定义了一个继承自 QMainWindow 的主窗口类，并起名为 MianWindow，该类的定义部分位于 mainwindow.h 头文件中，实现部分位于 mainwindow.cpp 源文件中。</p> 
<p>查看 mainwindow.h 和 mainwindow.cpp 文件中的代码并分析</p> 
<blockquote> 
 <p>初始状态下，MainWindow 类由 Q_OBJECT、构造函数和析构函数组成，这里重点介绍一下 Q_OBJECT 和构造函数：<br> Q_OBJECT：本质是一个已定义好的宏，所有需要“信号和槽”功能的组件都必须将 Q_OBJECT 作为 private 属性成员引入到类中。本节设计的界面程序不会用到“信号和槽”，因此可以删除 Q_OBJECT。有关信号和槽，我们会在《Qt信号和槽机制详解》一节详细介绍。<br> 带参的构造函数：QWidget 是所有组件的基类，借助 parent 指针，可以为当前窗口指定父窗口。例如图 1 中，QLabel 文本框位于主窗口中，主窗口就是它的父窗口。当父窗口被删除时，所有子窗口也会随之一起删除。当然也可以不指定父窗口，那么当前窗口就会作为一个独立的窗口，不会受到其它窗口的影响。</p> 
</blockquote> 
<p>直接运行程序，会输出下图所示的界面：<br> <img src="https://images2.imgbox.com/30/66/fRF99UfB_o.png" alt="在这里插入图片描述"><br> 看到的就是 main() 函数中创建的 w 主窗口。由于没有往 w 窗口中放置任何组件，所以 w 是一个空白窗口。<br> 接下来想要实现类似Day01的文本框需要对文件进行修改</p> 
<p><strong>mainwindow.h</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">MAINWINDOW_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAINWINDOW_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMainWindow&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span>      <span class="token comment">// 引入 QLable 文件框组件的头文件</span></span>
<span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QMainWindow</span></span>
<span class="token punctuation">{<!-- --></span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QLabel <span class="token operator">*</span>lab<span class="token punctuation">;</span>        <span class="token comment">// 定义一个私有的 QLabel 指针对象</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// MAINWINDOW_H</span></span>

</code></pre> 
<p><strong>mainwindow.cpp</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>

<span class="token class-name">MainWindow</span><span class="token operator">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建一个 QLable 对象</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>lab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Hello,World!"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">MainWindow</span><span class="token operator">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下<br> <img src="https://images2.imgbox.com/ee/12/EA2GFA9s_o.png" alt="在这里插入图片描述"><br> 至此我们用代码实现了控件的添加</p> 
<blockquote> 
 <p>和先前空的 MainWindow 类相比，做了如下修改： 添加了一个 QLabel 类的指针对象，相应地要引入头文件；<br> 在构造函数中定义了一个 QLabel 类的文本框对象，通过调用它的带参构造函数，设置它的父对象为当前类的对象，同时设置<br> “Hello,World!” 为要显示的文本信息。</p> 
</blockquote> 
<p>其中我们要注意<br> “Hello,World!” 文本框的父窗口是主窗口，所以文本框位于主窗口中（位置默认在窗口的左上角），主窗口关闭时文本框也会随之关闭。</p> 
<h3><a id="Day03_Qt_122"></a>Day03 Qt控件和事件</h3> 
<p>Qt 是一个著名的 GUI 框架，用来开发和用户交互的图形界面。作为 GUI 框架，丰富的控件和灵活的事件机制是不可或缺的，Qt 在这一方面做得非常优秀。</p> 
<p>t 提供了很多现成的控件。打开某个带 ui 文件的 Qt Widgets Application 项目，ui 文件的 Widget Box 一栏展示了 Qt 提供的几乎所有控件：<br> <img src="https://images2.imgbox.com/67/39/pc656o0r_o.png" alt="在这里插入图片描述"><br> Qt 中的每个控件都由特定的类表示，每个控件类都包含一些常用的属性和方法，所有的控件类都直接或者间接继承自 QWidget 类。实际开发中，我们可以使用 Qt 提供的这些控件，也可以通过继承某个控件类的方式自定义一个新的控件。</p> 
<p>Qt 中所有可视化的元素都称为控件，我们习惯将带有标题栏、关闭按钮的控件称为窗口。例如，下图展示了两种常用的窗口，实现它们的类分别是 QMainWindow 和 QDialog。</p> 
<blockquote> 
 <p>QMainWindow 类生成的窗口自带菜单栏、工具栏和状态栏，中央区域还可以添加多个控件，常用来作为应用程序的主窗口； QDialog<br> 类生成的窗口非常简单，没有菜单栏、工具栏和状态栏，但可以添加多个控件，常用来制作对话框。</p> 
</blockquote> 
<p>除了 QMainWindow 和 QDialog 之外，还可以使用 QWidget 类，它的用法非常灵活，既可以用来制作窗口，也可以作为某个窗口上的控件。<br> 实际开发中，制作应用程序的主窗口可以用 QMainWindow 或者 QWdiget；制作一个提示信息的对话框就用 QDialog 或 QWidget；如果暂时无法决定，后续可能作为窗口，也可能作为控件，就选择 QWidget。</p> 
<p>什么是事件<br> 事件指的是应用程序和用户之间的交互过程，例如用户按下某个按钮，点击某个输入框等等。实际上除了用户会与应用程序进行交互外，操作系统也会与应用程序进行交互，例如当某个定时任务触发时，操作系统会关闭应用程序，这也是一个事件。<br> Day02 分析第一个Qt程序中提到，Qt 界面程序的 main() 主函数中首先要创建一个 QApplication 类的对象，函数执行结束前还要调用 QApplication 对象的 exec() 函数。一个 Qt 界面程序要想接收事件，main() 函数中就必须调用 exec() 函数，它的功能就是使程序能够持续不断地接收各种事件。</p> 
<blockquote> 
 <p>Qt 程序可以接收的事件种类有很多，例如<strong>鼠标点击事件、鼠标滚轮事件、键盘输入事件、定时事件等</strong>。每接收一个事件，Qt 会分派给相应的事件处理函数来处理。所谓事件处理函数，本质就是一个普通的类成员函数，以用户按下某个 QPushButton 按钮为例，Qt会分派给 QPushButton 类中的mousePressEvent() 函数处理。</p> 
</blockquote> 
<blockquote> 
 <p><strong>事件处理函数通常会完成两项任务</strong>，分别是：<br> 修改控件的某些属性，比如当用户按下按钮时，按钮的背景颜色会发生改变，从而提示用户已经成功地按下了按钮； 运用信号和槽机制处理事件。</p> 
</blockquote> 
<p>这次我们创建一个不带 ui 文件的 Qt Widgets Application 项目，项目中只保留一个 main.cpp 源文件，删除其它文件（mainwindows.h 和 mainwindow.cpp）。将下述代码直接拷贝到 main.cpp 文件：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//添加窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    <span class="token comment">//定义一个按钮，它位于 widget 窗口中</span>
    QPushButton <span class="token function">But</span><span class="token punctuation">(</span><span class="token string">"按钮控件"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置按钮的位置和尺寸</span>
    But<span class="token punctuation">.</span><span class="token function">setGeometry</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//信号与槽，实现当用户点击按钮时，widget 窗口关闭</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>But<span class="token punctuation">,</span><span class="token operator">&amp;</span>QPushButton<span class="token operator">::</span>clicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QWidget<span class="token operator">::</span>close<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//让 widget 窗口显示</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/4d/75/73vUFd0t_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>整个程序的运行过程如下： 先创建了一个 QWidget 窗口，在窗口上添加一个 QPushButton 按钮； 当用户点击按钮时，Qt<br> 会将此事件分派给 QPushButton 类的 mousePressEvent() 事件处理函数；<br> mousePressEvent(）函数内部会改变按钮的属性，提示用户成功按下了按钮，还会调用 clicked()<br> 函数发出“用户点击按钮”的信号。对于发出的信号，程序中调用 connect() 函数指定 QWidget 类的 close() 函数接收<br> clicked() 信号，close() 函数会关闭 widget 窗口。</p> 
</blockquote> 
<h3><a id="Day04__180"></a>Day04 信号和槽</h3> 
<h4><a id="_182"></a>基本理解</h4> 
<p><strong>信号</strong>为输入行为包括并不局限于（点击，拖动等）<br> <strong>槽</strong>为信号所对应的事件</p> 
<p>在 Qt 中，用户和控件的每次交互过程称为一个事件，比如“用户点击按钮”是一个事件，“用户关闭窗口”也是一个事件。每个事件都会发出一个信号，例如用户点击按钮会发出“按钮被点击”的信号，用户关闭窗口会发出“窗口被关闭”的信号。</p> 
<blockquote> 
 <p>Qt 中的所有控件都具有接收信号的能力，一个控件还可以接收多个不同的信号。对于接收到的每个信号，控件都会做出相应的响应动作。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/26/52/Of3PjSA5_o.gif" alt="请添加图片描述"><br> 信号和槽机制底层是通过函数间的相互调用实现的。每个信号都可以用函数来表示，称为信号函数；每个槽也可以用函数表示，称为槽函数。例如，“按钮被按下”这个信号可以用 clicked() 函数表示，“窗口关闭”这个槽可以用 close() 函数表示，信号和槽机制实现“点击按钮会关闭窗口”的功能，其实就是 clicked() 函数调用 close() 函数的效果。</p> 
<blockquote> 
 <p>信号函数和槽函数通常位于某个类中，和普通的成员函数相比，它们的特别之处在于：<br> 信号函数用 signals 关键字修饰，槽函数用 public slots、protected slots 或者 private slots 修饰。signals 和 slots 是 Qt 在 C++ 的基础上扩展的关键字，专门用来指明信号函数和槽函数；<br> 信号函数只需要声明，不需要定义（实现），而槽函数需要定义（实现）。</p> 
</blockquote> 
<ol><li>在程序中引入头文件，双击选中“QPushButton”并按 “Fn+F1” 快捷键，就会弹出 QPushButton 类的使用手册，如下图所示。<img src="https://images2.imgbox.com/f6/01/eWzZJTzA_o.gif" alt="请添加图片描述"></li><li>在 Contents 部分可以看到，QPushButton 类只提供了一些Public Slots属性的槽函数，没有提供信号函数。对于 QPushButton 类按钮，除了可以使用自己类提供的槽函数，还可以使用从父类继承过来的信号函数和槽函数。由上图可知，QPushButton 的父类是 QAbstractButton，点击 QAbstractButton 就可以直接跳转到此类的使用手册，如下图所示：<br> <img src="https://images2.imgbox.com/d1/6b/pQJLh6Tb_o.gif" alt="请添加图片描述"></li></ol> 
<blockquote> 
 <p>注意，并非所有的控件之间都能通过信号和槽关联起来，信号和槽机制只适用于满足以下条件的控件：<br> 控件类必须直接或者间接继承自 QObject 类。Qt 提供的控件类都满足这一条件，这里提供一张 Qt常用类的继承关系的高清图片，感兴趣的读者可以简单了解一下。<br> 控件类中必须包含 private 属性的 Q_OBJECT 宏。</p> 
 <p>将某个信号函数和某个槽函数关联起来，需要借助 QObject 类提供的 connect() 函数。</p> 
</blockquote> 
<h4><a id="connect_207"></a>connect()函数实现信号和槽</h4> 
<p>connect() 是 QObject 类中的一个静态成员函数，专门用来关联指定的信号函数和槽函数。</p> 
<p>关联某个信号函数和槽函数，需要搞清楚以下 4 个问题：</p> 
<ol><li>信号发送者是谁？</li><li>哪个是信号函数？</li><li>信号的接收者是谁？</li><li>哪个是接收信号的槽函数？</li></ol> 
<p>实现“按下按钮后窗口关闭”为例，先创建一个窗口和一个按钮，如下所示：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//添加窗口</span>
QWidget widget<span class="token punctuation">;</span>
<span class="token comment">//定义一个按钮，它位于 widget 窗口中</span>
QPushButton <span class="token function">But</span><span class="token punctuation">(</span><span class="token string">"按钮控件"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>信号发送者是 But 按钮对象，要发送的信号是“按钮被点击”，可以用 QPushButton 类提供的 clicked() 信号函数表示；信号的接收者是 widget 主窗口对象，“窗口关闭”作为信号对应的槽，可以用 QWidget 类提供的 close() 函数表示。</p> 
<p>在 Qt5 版本之前，connect() 函数最常用的语法格式是：</p> 
<blockquote> 
 <p>QObject::connect(const QObject *sender, const char *signal, const QObject *receiver, const char *method, Qt::ConnectionType type = Qt::AutoConnection)</p> 
</blockquote> 
<p>各个参数的含义分别是：</p> 
<ul><li>sender：指定信号的发送者；</li><li>signal：指定信号函数，信号函数必须用 SIGNAL() 宏括起来；</li><li>reveiver：指定信号的接收者；</li><li>method：指定接收信号的槽函数，槽函数必须用 SLOT() 宏括起来；</li><li>type 用于指定关联方式，默认的关联方式为 Qt::AutoConnection，通常不需要手动设定。</li></ul> 
<p>用 connect() 函数将 But 按钮的 clicked() 信号函数和 widget 窗口的 close() 槽函数关联起来，实现代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>But<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>widget<span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>如此就实现了“按下按钮会关闭窗口”的功能。</p> 
<p>qt5补充<br> <img src="https://images2.imgbox.com/24/27/4h3LiWPl_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_247"></a>实例演示信号和槽机制</h4> 
<p>创建一个不含 ui 文件的 Qt Widgets Application 项目，只保留 main.cpp 源文件，删除 mainwindow.h 和 mainwindow.cpp 文件。在 main.cpp 文件中编写如下代码：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//添加窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    <span class="token comment">//定义一个按钮，它位于 widget 窗口中</span>
    QPushButton <span class="token function">But</span><span class="token punctuation">(</span><span class="token string">"按钮控件"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置按钮的位置和尺寸</span>
    But<span class="token punctuation">.</span><span class="token function">setGeometry</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//信号与槽，实现当用户点击按钮时，widget 窗口关闭</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>But<span class="token punctuation">,</span><span class="token operator">&amp;</span>QPushButton<span class="token operator">::</span>clicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QWidget<span class="token operator">::</span>close<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//让 widget 窗口显示</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/32/ed/4aM9DX3J_o.png" alt="在这里插入图片描述"><br> 此外两种语法均可实现信号及槽的链接</p> 
<p>如上图所示，由于使用了 conect() 函数将 But 的 clicked() 信号函数和 widget 的 close() 槽函数关联起来，所以生成了“点击按钮后主窗口关闭”的效果。</p> 
<h3><a id="Day05_Qt_QLabel_277"></a>Day05 Qt QLabel文本框的使用</h3> 
<p>QLabel基础功能是显示一串文本<br> QLabel 是 Qt 帮我们写好的一个控件类，间接继承自 QWidget 类，它的继承关系如下：</p> 
<blockquote> 
 <p>QLabel -&gt; QFrame -&gt; QWidget</p> 
</blockquote> 
<p>除了显示一串文本外，QLabel 控件上还可以放置图片、超链接、动画等内容</p> 
<p>本质上，每个文本框都是 QLabel 类的一个实例对象。QLabel 类提供了两个构造函数，分别是：</p> 
<blockquote> 
 <p>QLabel(QWidget *parent = Q_NULLPTR, Qt::WindowFlags f = Qt::WindowFlags())<br> QLabel(const QString &amp;text, QWidget *parent = Q_NULLPTR, Qt::WindowFlags f = Qt::WindowFlags())</p> 
</blockquote> 
<p>各个参数的含义分别是：</p> 
<ul><li>text 参数用于指定文本框中显示的文字；</li><li>parent 参数用于指定文本框的父窗口；</li><li>WindowFlags 是一种枚举类型，f 参数用来设置文本框的一些系统属性和外观属性，默认值为 Qt::Widget，表示当不指定父窗口时，文本框将作为一个独立窗口（如图 1、2 所示），反之则作为父窗口中的一个控件。f 参数的可选值有很多，比如 Qt::Window 表示文本框将作为一个独立的窗口，它自带边框和标题栏，Qt::ToolTip 表示文本框将作为一个提示窗口，不带边框和标题栏等等，这里不再一一列举。</li></ul> 
<p>需要注意的是，第一个构造函数中的 parent 和 f 参数都有默认值，因此 QLabel 类还隐含了一个默认构造函数。也就是说，创建 QLable 对象时可以不传递任何参数，或者只给 txt 参数传递一个字符串，就可以成功创建一个文本框。通常情况下，我们会给 text 和 parent 参数传递相应的值，即在创建文本框的同时指定文本内容和父窗口。</p> 
<h4><a id="QLabel_299"></a>QLabel文本框的信号和槽</h4> 
<p>QLabel 控件只用来显示文本、图像等内容，很好与用户交互。但是，当 QLabel 控件内包含超链接内容时，可以使用 QLabel 类提供的两个信号函数：<br> <img src="https://images2.imgbox.com/83/64/SLyFIn3e_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QLabel_302"></a>QLabel的常用方法</h5> 
<p><img src="https://images2.imgbox.com/7e/18/dHces8Ke_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QLabel__305"></a>QLabel 控件的槽函数</h5> 
<p><img src="https://images2.imgbox.com/4e/2c/pZsre4ts_o.png" alt="在这里插入图片描述"><br> 除此外这些信号和槽函数外，QLabel 类还从父类处继承了一些信号和槽函数，这里不再一一罗列。</p> 
<h4><a id="QLabel_308"></a>实例演示QLabel文本框的用法</h4> 
<p>仍然是无ui，仅保留main.cpp<br> 根据试验发现移除显示1秒的模式更符合操作逻辑<br> 示例如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//main.cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建一个文本框</span>
    QLabel lab<span class="token punctuation">;</span>
    <span class="token comment">//设置文本框内容居中显示</span>
    lab<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置文本框的坐标和尺寸</span>
    lab<span class="token punctuation">.</span><span class="token function">setGeometry</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置文本框的外观，包括字体的大小和颜色、按钮的背景色</span>
    lab<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{font:30px;color:red;background-color:rgb(f9,f9,f9);}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置文本框要显示超链接内容</span>
    lab<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"&lt;a href=\"https://blog.csdn.net/qq_22855077?spm=1000.2115.3001.5343\"&gt;qtday05"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//当用户鼠标位于文本框上时，显示提示内容</span>
    lab<span class="token punctuation">.</span><span class="token function">setToolTip</span><span class="token punctuation">(</span><span class="token string">"点击超链接显示URL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提示内容显示 1 秒</span>
    <span class="token comment">//lab.setToolTipDuration(1000);</span>
    <span class="token comment">//为文本框设置信号和槽，当用户点击超链接时，将文本框内容改为超链接的 URL</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab<span class="token punctuation">,</span><span class="token operator">&amp;</span>QLabel<span class="token operator">::</span>linkActivated<span class="token punctuation">,</span><span class="token operator">&amp;</span>lab<span class="token punctuation">,</span><span class="token operator">&amp;</span>QLabel<span class="token operator">::</span>setText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//程序运行后，文本框显示</span>
    lab<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下</p> 
<p><img src="https://images2.imgbox.com/cf/a7/Zc1VadUU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cf/e0/2qfVIKbK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Day06_QPushButton_347"></a>Day06 QPushButton按钮的创建</h3> 
<p>QPushButton 类间接继承自 QWidget 类，它的继承关系如下：</p> 
<blockquote> 
 <p>QPushButton -&gt; QAbstractButton -&gt; QWidget</p> 
</blockquote> 
<p>QAbstractButton 类是所有按钮控件类的基类，包含很多通用的按钮功能<br> QPushButton 类专门用来创建可按压的按钮，也就是我们平时最常见的按钮形式</p> 
<p>QPushButton 类提供了 3 个构造函数，分别是：</p> 
<blockquote> 
 <p>QPushButton(QWidget *parent = Q_NULLPTR)<br> QPushButton(const QString &amp;text, QWidget *parent = Q_NULLPTR)<br> QPushButton(const QIcon &amp;icon, const QString &amp;text, QWidget *parent = Q_NULLPTR)</p> 
</blockquote> 
<p>参数解释如下：</p> 
<ul><li>parent 参数用于指定父窗口</li><li>text 参数用于设置按钮上要显示的文字</li><li>icon 参数用于设置按钮上要显示的图标</li></ul> 
<p>注意，第一个构造函数的 parent 参数附有默认值，所以 QPushButton 类还隐含着一个默认构造函数。也就是说，实例化 QPushButton 类对象时可以不传递任何参数。</p> 
<h4><a id="QPushButton_368"></a>QPushButton常用方法：</h4> 
<p><img src="https://images2.imgbox.com/c7/29/1fzD1Yhv_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QPushButton_370"></a>QPushButton按钮的信号和槽</h4> 
<p>GUI 程序中，按钮的主要任务是完成和用户之间的交互，下表罗列了 QPushButton 类常用的信号函数和槽函数：<br> <img src="https://images2.imgbox.com/51/80/sLCxPhiS_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QPushButton_373"></a>实例演示QPushButton按钮用法</h4> 
<p>仍然是无ui，仅main.cpp</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QWidget widget<span class="token punctuation">;</span>
    <span class="token comment">//设置 widget 窗口的标题</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QWidget窗口"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建一个按钮，并内嵌到 widget 窗口中</span>
    QPushButton <span class="token function">but</span><span class="token punctuation">(</span><span class="token string">"QPushButton按钮"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//按钮的位置位于距 widget 窗口左上角 (100,100) 的位置</span>
    but<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置按钮上文字的大小。</span>
    but<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QPushButton{font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//调整按钮的尺寸</span>
    but<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//建立信息和槽，当用户点击并释放按钮后，该按钮隐藏。</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>but<span class="token punctuation">,</span><span class="token operator">&amp;</span>QPushButton<span class="token operator">::</span>clicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>but<span class="token punctuation">,</span><span class="token operator">&amp;</span>QPushButton<span class="token operator">::</span>hide<span class="token punctuation">)</span><span class="token punctuation">;</span>

    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Day07_Qt_QLineEdit_403"></a>Day07 Qt QLineEdit单行输入框用法详解</h3> 
<p>实际开发中，我们经常用到 QLineEdit 输入框，比如接收用户输入的个人信息、账户信息、角色名称等，就可以用 QLineEdit 实现<br> QLineEdit 是 Qt 提供的一个控件类，它直接继承自 QWdiget 类，专门用来创建单行输入框</p> 
<h4><a id="QLineEdit_407"></a>QLineEdit单行输入框的创建</h4> 
<p>每个单行输入框都是 QLineEdit 类的一个实例对象，QLineEdit 类提供有两个构造函数，分别是：</p> 
<blockquote> 
 <p>QLineEdit(QWidget *parent = Q_NULLPTR)<br> QLineEdit(const QString &amp;contents, QWidget *parent = Q_NULLPTR)</p> 
</blockquote> 
<p>参数解释如下：</p> 
<ul><li>contents 参数用于指定输入框中的文本内容</li><li>parent 参数用于指定新建输入框控件的父窗口，新建输入框将会内嵌到父窗口上，作为父窗口的一个子控件。当然，我们也可以不指定父窗口，那么新建的输入框就会作为独立的窗口。</li></ul> 
<p>QLineEdit 输入框还可以对用户输入的内容加以限定：</p> 
<ul><li>限定文本的长度，例如用户最多可以输入 20 个字符；</li><li>输入文本的格式，例如用户输入出生日期时，必须按照“yy-mm-dd”的格式输入；</li><li>输入的文本内容，例如当前输入框仅允许用户输入数字，或者只允许用户输入英文字符。</li></ul> 
<h4><a id="QLineEdit_424"></a>QLineEdit单行输入框的使用</h4> 
<h5><a id="QLineEdit_425"></a>QLineEdit常用方法</h5> 
<p><img src="https://images2.imgbox.com/65/3d/JNFVE7r3_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QLineEdit_427"></a>QLineEdit信号函数</h5> 
<p><img src="https://images2.imgbox.com/5b/dc/E0H8tLH4_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QLineEdit_429"></a>QLineEdit槽函数</h5> 
<p><img src="https://images2.imgbox.com/51/49/ZfZMskQp_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QLineEdit_432"></a>QLineEdit单行输入框的用法示例</h4> 
<p>仍然无ui，仅main.cpp</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLineEdit&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建一个窗口，作为输入框的父窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    <span class="token comment">//设置窗口的标题</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QWidget窗口"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//接下来，分别创建两个输入框，用于让用户分别输入账号和密码</span>
    <span class="token comment">//创建账号输入框</span>
    QLineEdit <span class="token function">lineEdit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//指定输入框位于父窗口中的位置</span>
    lineEdit<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置提示信息</span>
    lineEdit<span class="token punctuation">.</span><span class="token function">setPlaceholderText</span><span class="token punctuation">(</span><span class="token string">"请输入账号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//让输入框显示“一键清除”按钮</span>
    lineEdit<span class="token punctuation">.</span><span class="token function">setClearButtonEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//创建密码输入框</span>
    QLineEdit <span class="token function">lineEditPass</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lineEditPass<span class="token punctuation">.</span><span class="token function">setPlaceholderText</span><span class="token punctuation">(</span><span class="token string">"请输入密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lineEditPass<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//指定文本显示方式，保护用户账号安全</span>
    lineEditPass<span class="token punctuation">.</span><span class="token function">setEchoMode</span><span class="token punctuation">(</span>QLineEdit<span class="token operator">::</span>Password<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//指定窗口的尺寸和显示文字的大小</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token function">QFont</span><span class="token punctuation">(</span><span class="token string">"宋体"</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如图：<br> <img src="https://images2.imgbox.com/90/e4/KYJFL5Zd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Qt_QListWidget_476"></a>Qt QListWidget列表框用法详解</h4> 
<h5><a id="QListWidget_477"></a>QListWidget列表框的创建</h5> 
<p>QListWidget 是 Qt 提供的控件类，专门用来创建列表。QListWidget 类的继承关系如下：</p> 
<blockquote> 
 <p>QListWidget -&gt; QListView -&gt; QAbstractItemView -&gt; QAbstractScrollArea -&gt; QFrame -&gt; QWidget</p> 
</blockquote> 
<p>QListView功能强大，门槛较高<br> QListWidget简单列表，门槛低</p> 
<p>通过实例化 QListWidget 类，可以很轻松地创建一个列表。QListWidget 类只提供了 1 个构造函数：</p> 
<blockquote> 
 <p>QListWidget(QWidget *parent = Q_NULLPTR)</p> 
</blockquote> 
<p>parent 参数用来指定新建列表的父窗口，该参数的默认值是 Q_NULLPTR，表示新建控件没有父窗口。<br> 语法层面上分析，可以不为 QListWidget 列表指定父窗口，那么它将作为一个独立的窗口。但实际开发中，通常会为 QListWidget 列表指定一个父窗口（例如 QWidget 窗口），它将作为父窗口中的一个子控件，和窗口中的其它控件一起搭配使用。</p> 
<h5><a id="QListWidgetItem_493"></a>QListWidgetItem列表项</h5> 
<p>QListWidget 列表控件可以显示多份数据，每份数据习惯称为列表项（简称项），每个列表项都是 QListWidgetItem 类的实例对象。也就是说，QListWidget 中有多少个列表项，就有多少个 QListWidgetItem 类对象。</p> 
<p>默认情况下，QListWidget 中每个列表项独自占用一行，每个列表项中可以包含文字、图标等内容。实际开发中，我们还可以将指定的窗口或者控件放置到列表项中显示，例如 QWidget 窗口、QLabel 文本框、QPushButton 按钮、QLineEdit 输入框等。</p> 
<p>借助 QListWidgetItem 类，可以轻松管理 QListWidget 中的每个列表项，包括：</p> 
<ul><li>借助 QListWidgetItemo 类提供的 setIcon()、setText() 等方法，可以轻松地指定每个列表项要包含的内容；</li><li>借助 QListWidgetItemo 类提供的 setFont()、setBackground() 等方法，可以轻松地设置每个列表项的外观（文字大小、列表项背景等）。</li></ul> 
<p>当然，QListWidgetItem 类还提供有很多其它的成员方法，这里不再一一罗列。</p> 
<h4><a id="QListWidget_505"></a>QListWidget列表框的使用</h4> 
<p>对于刚刚创建好的 QListWidget 类对象，不包含任何 QListWidgetItem 类对象，就是一个空列表。借助 QListWidget 类以及父类提供的属性和方法，我们可以对新建列表执行多种操作。</p> 
<table><thead><tr><th>属性名或方法名</th><th>功 能（含 义）</th></tr></thead><tbody><tr><td>count 属性</td><td>保存当前列表中含有的列表项的总数。该属性的值可以通过 count() 方法获取。</td></tr><tr><td>currentRow 属性</td><td>-保存当前选择的列表项所在的行数。该属性的值可以通过 currentRow() 方法获取，也可以通过 setCurrentRow(int row) 方法修改当前选择的列表项。</td></tr><tr><td>sortingEnabled 属性</td><td>决定当前 QlistWidget 列表是否开发排序功能，默认值为 false，即不开启排序功能。该属性的是可以通过 isSortingEnabled() 方法获取，可以通过 setSortingEnabled(bool enable) 方法进行修改。</td></tr><tr><td>SelectionMode 属性</td><td>指明当前列表中是否可以同时选择多个列表项，或者是否只能连续选择多个列表项。该属性是枚举类型，可选值有 5 个： - QAbstractItemView::SingleSelection：用户最多只能选择一个列表项 QAbstractItemView::ContiguousSelection：用户按住 Shift 键，可以连续选择多个列表项。 QAbstractItemView::ExtendedSelection：用户按住 Ctrl 键，可以选中多个列表项。当用户按住Shift 键，也可以连续选择多个列表项。 QAbstractItemView::MultiSelection：用户可以选择多个列表项。 QAbstractItemView::NoSelection：用户无法选择任何列表项。该属性的值可以通过 selectionMode() 方法获取，也可以通过 setSelectionMode(QAbstractItemView::SelectionMode mode) 方法进行修改。</td></tr><tr><td>ViewMode 属性</td><td>指定 QListWidget 是按行显示数据是分列显示数据该属性是枚举类型，可选值有 2 个：QListView::ListMode：一行一行地显示列表项，默认情况下，各个列表项不能拖动。QListView::IconMode：分列显示列表项，默认情况下，各个列表项可以拖动。----------------------------------该属性的值可以通过 viewMode() 方法获取，也可以通过 setViewMode(ViewMode mode) 方法进行修改。</td></tr><tr><td>void addItem ( const QString &amp; label )void addItem ( QListWidgetItem * item )void addItems ( const QStringList &amp; labels )</td><td>向 QListWidget 列表的尾部添加指定项，可以是一个文本（label）、一个列表项（item），还可以一次性添加多个文本（labels）。</td></tr><tr><td>void QListWidget::setItemWidget(QListWidgetItem *item, QWidget *widget)</td><td>将指定的 widget 窗口添加到 item 列表项中。</td></tr><tr><td>currentItem()</td><td>返回当前选中的列表项。</td></tr><tr><td>removeItemWidget(QListWidgetItem *item)</td><td>删除指定的 item 列表项。</td></tr><tr><td>sortItems(Qt::SortOrder order = Qt::AscendingOrder)</td><td>默认将所有列表项按照升序排序，通过指定参数为 Qt::DescendingOrder，可以进行降序排序。</td></tr><tr><td>takeItem(int row)</td><td>返回位于 row 行的列表项。</td></tr><tr><td>selectedItems()</td><td>返回当前被选择的所有列表项。</td></tr></tbody></table> 
<h5><a id="QListWidget_522"></a>QListWidget信号和槽函数</h5> 
<p><img src="https://images2.imgbox.com/f8/7e/6X4HIDLe_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QListWidget_524"></a>实例演示QListWidget列表框的用法</h4> 
<p>仍然是无ui，仅main.cpp</p> 
<pre><code class="prism language-cpp"><span class="token comment">//main.cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QListWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QListWidgetItem&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">QMyLabel</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QLabel</span></span><span class="token punctuation">{<!-- --></span>
    Q_OBJECT
<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">rsetText</span><span class="token punctuation">(</span>QListWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token class-name">QMyLabel</span><span class="token operator">::</span><span class="token function">rsetText</span><span class="token punctuation">(</span>QListWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>item<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建一个窗口，作为输入框的父窗口</span>
    QWidget widget<span class="token punctuation">;</span>

    <span class="token comment">//设置窗口的标题</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QWidget窗口"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QListWidget <span class="token function">listWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token function">QFont</span><span class="token punctuation">(</span><span class="token string">"宋体"</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"C语言中文网"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">QListWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Qt教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QMyLabel print<span class="token punctuation">;</span>
    print<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"选中内容"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    print<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    print<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    print<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    print<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>listWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QListWidget<span class="token operator">::</span>itemClicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>print<span class="token punctuation">,</span><span class="token operator">&amp;</span>QMyLabel<span class="token operator">::</span>rsetText<span class="token punctuation">)</span><span class="token punctuation">;</span>

    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//QMyLabel类的定义应该放到 .h 文件中，本例中将其写到 main.cpp 中，程序最后需要添加 #include "当前源文件名.moc" 语句，否则无法通过编译。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"main.moc"</span></span>
</code></pre> 
<p>出现无法打开moc问题先清理–qmake–构建–运行<br> 还不行重启再如上操作，我是这样过编译的<br> 运行结果如下：<br> <img src="https://images2.imgbox.com/15/59/mUwrxHzk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Day08_Qt_QTableWidget_581"></a>Day08 Qt QTableWidget表格控件的用法（非常详细）</h3> 
<p>QTableWidget 是 Qt 提供的一种表格控件,，类似于我们经常使用的 Excel 表格，可以将数据以表格的方式展示给用户。</p> 
<p>整个 QTableWidget 表格可以分为 3 个区域：</p> 
<ul><li>区域 ① 和 ② 都是表头，区域 ① 设置每一行的表头，区域 ② 设置每一列的表头。我们可以自定义两个区域内的表头，比如第一列是各个教程的名称，所以第一列的表头可以修改为“教程名称”；</li><li>区域 ③ 为数据区，表格中所有的数据都位于此区域，该区域内可以存放单元格，也可以存放按钮、文本框等控件。</li></ul> 
<blockquote> 
 <p>默认情况下，表格会显示表头，表头的内容为行号或列号。根据实际需要，我们可以将表头隐藏起来。</p> 
</blockquote> 
<p>QTableWidget 继承自 QTableView 类，QTableView 类也可以用来显示表格控件。QTableWidget 可以看做是 QTableView 的“简易版”或者“升级版”，它们的区别在于：</p> 
<ul><li>QTableWidget 使用起来更简单，而 QTableView 的用法相对比较复杂。</li><li>QTableView 可以存储大量的数据（例如几十万甚至几百万），用户浏览表格中的数据时不会出现卡顿等现象；尽管 QTableWidget 也能用来存储大量的数据，但用户使用时可能出现卡顿等现象，且显示的数据越多，类似的现象越明显。</li></ul> 
<p>总之，QTableWidget 只适合显示少量的数据（几百或几千个），如果想要显示更多的数据，应该用 QTableView。此外，QTableView 还有一些更高级的用法，我们会在讲解 QTableView 时做重点介绍。</p> 
<h4><a id="QTableWidget_599"></a>QTableWidget表格的创建</h4> 
<p>使用 QTableWidget 控件，必须先引入QTableWidget头文件。<br> QTableWidget 类提供了 2 个构造函数，分别是：</p> 
<blockquote> 
 <p>QTableWidget(QWidget *parent = Q_NULLPTR)<br> QTableWidget(int rows, int columns, QWidget *parent = Q_NULLPTR)</p> 
</blockquote> 
<p>第一个构造函数可以在指定的 parent 父窗口中创建一个空的表格，表格中不显示任何单元格。第二个构造函数可以在指定的 parent 父窗口中创建一个表格，表格中整齐地排列着 rows 行 columus 列的单元格，每个单元格都是空的</p> 
<p>实用 QTableWidget 表格之前，必须指定表格的行和列。我们可以直接调用第 2 个构造函数，这样既创建了表格又指定了行和列。当然，也可以调用第 1 个构造函数先创建表格，然后借助 QTableWidget 类提供的成员方法指定行和列，两种方式都可以。<br> 与数组下标类似，QTableWidget 表格<strong>单元格的行标和列标都是从 0 开始</strong>。</p> 
<h4><a id="QTableWidgetItem_610"></a>QTableWidgetItem单元格</h4> 
<p>QTableWidget 表格中，每个单元格都是 QTableWidgetItem 类的实例对象。<br> 定义 QTableWidgetItem 类的实例对象之前，程序中要引入QTableWidgetItem头文件。<br> QTableWidgetItem 类提供了 4 个构造函数：</p> 
<blockquote> 
 <p>QTableWidgetItem(int type = Type)<br> QTableWidgetItem(const QString &amp;text, int type = Type)<br> QTableWidgetItem(const QIcon &amp;icon, const QString &amp;text, int type = Type)<br> QTableWidgetItem(const QTableWidgetItem &amp;other) //复制（拷贝）构造函数</p> 
</blockquote> 
<p>参数解释如下：</p> 
<ol><li>text 参数用于指定单元格要显示的文本（字符串）</li><li>icon 参数用于指定单元格要显示的图标</li><li>type 参数配有默认值，很少用到。<br> QTableWidgetItem 单元格通常用来存放 text 文本和 icon 图标，借助该类提供的 setBackground()、setTextAlignment() 等成员方法，我们可以轻松设置每个单元格的字体、颜色、背景等。</li></ol> 
<p>QTableWidgetItem 类还对&lt;小于运算符进行了重载，根据各个单元格存储的文本内容（字符串），多个单元格之间可以直接比较大小。借助这一特性，我们可以很轻易地实现“单元格排序”功能</p> 
<h5><a id="QTableWidgetItem_628"></a>QTableWidgetItem成员方法</h5> 
<p><img src="https://images2.imgbox.com/50/6c/S3nLzIpM_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QTableWidget_630"></a>QTableWidget类常用成员方法</h5> 
<p><img src="https://images2.imgbox.com/5d/11/ezrHtwZJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QTableWidget_632"></a>QTableWidget信号和槽</h4> 
<p>QTableWidget 类提供的信号函数，可以监听用户对表格中的哪个单元格进行了何种操作，常见的操作包括点击、双击、按下、编辑等。</p> 
<h5><a id="QTableWidget_635"></a>QTableWidget信号函数</h5> 
<p><img src="https://images2.imgbox.com/ad/61/80UBE9R6_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QTableWidget__638"></a>QTableWidget 槽函数</h5> 
<p><img src="https://images2.imgbox.com/5a/49/XcvliFol_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QTableWidget_640"></a>QTableWidget表格实例</h4> 
<p>仍然是无ui，仅main.cpp</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTableWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTableWidgetItem&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStringList&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">QMyLabel</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QLabel</span></span><span class="token punctuation">{<!-- --></span>
    Q_OBJECT
<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">rsetText</span><span class="token punctuation">(</span>QTableWidgetItem <span class="token operator">*</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token class-name">QMyLabel</span><span class="token operator">::</span><span class="token function">rsetText</span><span class="token punctuation">(</span>QTableWidgetItem <span class="token operator">*</span> item<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>item<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建一个窗口，作为输入框和列表框的父窗口</span>
    QWidget widget<span class="token punctuation">;</span>

    <span class="token comment">//设置窗口的标题</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QTableWidget控件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//自定义窗口的大小</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">900</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//在 widget 窗口中添加一个 4 行 3 列的表格</span>
    QTableWidget <span class="token function">TableWidget</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//自定义表格的尺寸和字体大小</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">900</span><span class="token punctuation">,</span><span class="token number">350</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token function">QFont</span><span class="token punctuation">(</span><span class="token string">"宋体"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置表格中每一行的表头</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setHorizontalHeaderLabels</span><span class="token punctuation">(</span><span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"网址"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"状态"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置表格数据区内的所有单元格都不允许编辑</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setEditTriggers</span><span class="token punctuation">(</span>QAbstractItemView<span class="token operator">::</span>NoEditTriggers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置表格中每一行的内容</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"C语言教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net/c/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"已更新完毕"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Qt教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net/qt/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"正在更新"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"C++教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net/cplus/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"已更新完毕"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//向 widget 窗口中添加一个文本框</span>
    QMyLabel lab<span class="token punctuation">;</span>
    lab<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"选中单元格"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//自定义文本框的尺寸和位置</span>
    lab<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">900</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">350</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token function">QFont</span><span class="token punctuation">(</span><span class="token string">"宋体"</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//为表格和文本框之间建立关联，当用户点击表格中某个单元格时，文本框显示单元格内的文本内容。</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>TableWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QTableWidget<span class="token operator">::</span>itemClicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>lab<span class="token punctuation">,</span><span class="token operator">&amp;</span>QMyLabel<span class="token operator">::</span>rsetText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//QMyLabel类的定义应该放到 .h 文件中，本例中将其写到 main.cpp 中，程序最后需要添加 #include "当前源文件名.moc" 语句，否则无法通过编译。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"main.moc"</span></span>
</code></pre> 
<p>运行结果如下：<br> <img src="https://images2.imgbox.com/2d/20/MWWvU7kE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Day09_QTreeWidget_715"></a>Day09 QTreeWidget树形控件用法详解</h3> 
<p>QTreeWidget 是 Qt 框架提供的一种树形控件，它能以树形结构展示数据（或者文件）之间的包含关系</p> 
<h4><a id="QTreeWidget_717"></a>QTreeWidget控件的创建</h4> 
<p>QTreeWidget 类专门用来创建树形控件，使用此类前需在项目中引入QTreeWidget头文件。<br> QTreeWidget 类只提供了 1 个构造函数：</p> 
<blockquote> 
 <p>QTreeWidget(QWidget *parent = Q_NULLPTR)</p> 
</blockquote> 
<p>parent 参数用于为新建树形控件指定父窗口。当为新建 QTreeWidget 对象指定父窗口后，它将作为该窗口中的一个控件；parent 参数用于为新建树形控件指定父窗口。当为新建 QTreeWidget 对象指定父窗口后，它将作为该窗口中的一个控件</p> 
<p>QTreeWidget\QTreeView的关系和区别：<br> QTreeWidget 可以看作“简易版”或“升级版”的 QTreeView，前者的使用方式更加简单，入门门槛低</p> 
<h5><a id="QTreeWidgetItem_727"></a>QTreeWidgetItem类</h5> 
<p>通常情况下，我们习惯将树形结构中的每份数据称为一个结点。QTreeWidget 控件中，每个结点都是 QTreeWidgetItem 类的实例对象。也就是说，QTreeWidget 类对象代表整个树形控件，而 QTreeWidgetItem 类对象代表树形控件中的结点。</p> 
<p>使用 QTreeWidgetItem 类创建结点之前，项目中需引入QTreeWidgetItem头文件。<br> QTreeWidgetItem 类提供的构造函数有很多，常用的有如下几个：</p> 
<blockquote> 
 <p>//创建一个新结点，设置结点中包含的数据（strings），将该结点添加到指定的 parent 树形结构中<br> QTreeWidgetItem(QTreeWidget *parent, const QStringList &amp;strings, int type = Type)<br> //创建一个新结点，将其插入到 parent 树形结构中 preceding 结点之后的位置<br> QTreeWidgetItem(QTreeWidget *parent, QTreeWidgetItem *preceding, int type = Type)<br> //创建一个新结点，将其添加到指定 parent 结点中，作为 parent 结点的子结点<br> QTreeWidgetItem(QTreeWidgetItem *parent, int type = Type)<br> //创建一个新结点，指定结点中包含的文本内容（strings），将其添加到指定 parent 结点中，作为 parent 的子结点<br> QTreeWidgetItem(QTreeWidgetItem *parent, const QStringList &amp;strings, int type = Type)<br> //创建要给新结点，将其插入到 parent 结点中 preceding 结点之后的位置。<br> QTreeWidgetItem(QTreeWidgetItem *parent, QTreeWidgetItem *preceding, int type = Type)<br> type 参数通常不需要手动指定，保持默认即可。</p> 
</blockquote> 
<p>QTreeWidgetItem 还提供了很多实用的成员方法，下表罗列了一些常用的方法。借助它们，我们可以轻松地管理 QTreeWidget 控件中的各个结点。</p> 
<h5><a id="QTreeWidgetItem_746"></a>QTreeWidgetItem常用成员方法</h5> 
<p><img src="https://images2.imgbox.com/b1/5c/RwFDrh7Q_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QTreeWidget_749"></a>QTreeWidget常用成员方法</h5> 
<p><img src="https://images2.imgbox.com/70/9b/jWN8ZH58_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="QTreeWidget__751"></a>QTreeWidget 控件的用法</h4> 
<h5><a id="1__752"></a>1) 添加结点</h5> 
<p>向 QTreeWidget 控件中添加结点，具体可分为两种情况，一种是添加最顶层的结点，另一种是为某个结点添加子结点。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//1、调用相应的构造函数，直接将结点作为树形控件的顶层结点</span>
QTreeWidgetItem <span class="token function">topItem</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>treeWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2、调用 QTreeWidget 类的 addTopLevelItem() 方法</span>
QTreeWidgetItem topItem2<span class="token punctuation">;</span>
treeWidget<span class="token punctuation">.</span><span class="token function">addTopLevelItem</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>第一种方法，我们向 treeWidget 树形控件中成功添加了 topItem 顶层结点；第二种方法，我们先创建了 topItem2 结点，然后借助 addTopLevelItem() 方法将其添加到 treeWidget 树形控件中，作为该控件的第二个顶层结点。</p> 
<p>同样，为某个结点添加子结点的方法也有两种，分别是：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//1、调用相应的构造函数，直接指定新结点的父结点</span>
QTreeWidgetItem <span class="token function">childItem</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2、先创建一个新结点，调用 QTreeWidgetItem 类提供的 addChild() 方法，可以为某个结点添加子结点。</span>
QTreeWidgetItem childItem2<span class="token punctuation">;</span>
item2<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>childItem2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>除此之外，还有其它添加结点的方法，例如使用QList&lt;QTreeWidgetItem *&gt; items一次性向树形控件中添加多个顶层结点或者子结点：</p> 
<pre><code class="prism language-cpp">QList<span class="token operator">&lt;</span>QTreeWidgetItem <span class="token operator">*</span><span class="token operator">&gt;</span> items<span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>item2<span class="token punctuation">)</span><span class="token punctuation">;</span>
treeWidget<span class="token punctuation">.</span><span class="token function">addTopLevelItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>Qt 对 C++ STL 库中的容器进行了更好的封装，QList 容器就是其中之一。通过先将 item 和 item2 添加到 items 容器中，然后再将 items 传递给 treeWidget 对象的 addTopLevelItems() 方法，就可以将 items 容器中的所有结点添加到 treeWidget 控件中，作为该控件的顶层结点。</p> 
<h5><a id="2__783"></a>2) 给结点添加图标</h5> 
<p>对于每个 QTreeWidgetItem 类的结点，除了可以放置文本信息外，还可以添加 icon 图标。<br> #include <br> #include <br> #include <br> #include <br> int main(int argc, char *argv[])<br> {<!-- --><br> QApplication a(argc, argv);<br> QWidget widget;<br> widget.setWindowTitle(“MyTreeWidget控件”);<br> QTreeWidget treeWidget(&amp;widget);<br> QTreeWidgetItem item;<br> item.setText(0,“Day09”);<br> item.setIcon(0,QIcon(“D:\xxxx.ico”));<br> treeWidget.addTopLevelItem(&amp;item);<br> widget.show();</p> 
<pre><code>return a.exec();
</code></pre> 
<p>}</p> 
<h5><a id="3__803"></a>3) 给结点添加复选框</h5> 
<p>setCheckState(0,Qt::Unchecked);</p> 
<p>默认情况下，QTreeWidgetItem 结点不显示复选框，通过调用 setCheckState() 方法，可以使结点自带的复选框显现出来。复选框的状态有 3 种：</p> 
<ul><li>Qt::Unchecked：未选中状态</li><li>Qt::Checked：选中状态</li><li>Qt::PartiallyChecked：部分选中状态</li></ul> 
<p>所谓部分选中状态，是指当该结点下包含多个带复选框的子节点时，如果用户只选中了其中一部分子结点，那么通常将该结点设置为部分选中状态。</p> 
<h5><a id="4__814"></a>4) 多列树形控件</h5> 
<p>根据需要，QTreeWidget 控件中每一行可以存放多列结点。</p> 
<pre><code class="prism language-cpp"><span class="token operator">&gt;</span> #include <span class="token operator">&lt;</span>QApplication<span class="token operator">&gt;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidgetItem&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStringList&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"MyTreeWidget控件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QTreeWidget <span class="token function">treeWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置列数</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">setColumnCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加顶层结点</span>
    QTreeWidgetItem topItem<span class="token punctuation">;</span>
    topItem<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"教程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">addTopLevelItem</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加子结点</span>
    QStringList c<span class="token punctuation">;</span>
    c <span class="token operator">&lt;&lt;</span> <span class="token string">"C语言教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"http://c.biancheng.net/c/"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"已完成"</span><span class="token punctuation">;</span>
    QTreeWidgetItem <span class="token function">childItem1</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QStringList qt<span class="token punctuation">;</span>
    qt <span class="token operator">&lt;&lt;</span> <span class="token string">"Qt教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"http://c.biancheng.net/qt/"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"未完成"</span><span class="token punctuation">;</span>
    QTreeWidgetItem <span class="token function">childItem2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span>qt<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QStringList python<span class="token punctuation">;</span>
    python <span class="token operator">&lt;&lt;</span> <span class="token string">"Python教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"http://c.biancheng.net/python/"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"已完成"</span><span class="token punctuation">;</span>
    QTreeWidgetItem <span class="token function">childItem3</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span>python<span class="token punctuation">)</span><span class="token punctuation">;</span>

    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
</code></pre> 
<p>默认情况下，每一列的表头是当前列的列号。必要的时候，我们还可以指定每一列的表头。</p> 
<pre><code class="prism language-cpp">QStringList top<span class="token punctuation">;</span>
top <span class="token operator">&lt;&lt;</span> <span class="token string">"str1"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"str2"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"str3"</span><span class="token punctuation">;</span>
treeWidget<span class="token punctuation">.</span><span class="token function">setHeaderLabels</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>此外，QTreeWidget 控件默认会显示每一列的表头，通过调用从 QTreeView 父类继承过来的 setHeaderHidden() 方法，可以将表头隐藏起来。例如：</p> 
<pre><code class="prism language-cpp">
<span class="token operator">&gt;</span> treeWidget<span class="token punctuation">.</span><span class="token function">setHeaderHidden</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>当参数值为 true 时，表示将表头隐藏起来，反之则表示不隐藏表头。</p> 
<h5><a id="5_QTreeWidget_872"></a>5) QTreeWidget中添加其它控件</h5> 
<p>QTreeWidgetItem 结点除了可以显示文本信息、icon图标、复选框等基本内容外，还可以容纳其它的一些的控件，例如输入框、按钮等。<br> QTreeWidget 类提供有 setItemWidget() 方法，可以将其它控件添加到指定列的结点中：</p> 
<blockquote> 
 <p>void QTreeWidget::setItemWidget(QTreeWidgetItem *item, int column, QWidget *widget)<br> 参数解释：</p> 
</blockquote> 
<ul><li>item 表示容纳 widget 控件的结点</li><li>column 参数用于指定将 widget 添加到 item 第几列的位置上。</li></ul> 
<p>下为将表格作为节点的例子：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidgetItem&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStringList&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTableWidget&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"MyTreeWidget控件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QTreeWidget <span class="token function">treeWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置列数</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加顶层结点</span>
    QTreeWidgetItem topItem<span class="token punctuation">;</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">addTopLevelItem</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建表格控件</span>
    QTableWidget <span class="token function">TableWidget</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置表格中每一行的内容</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"C语言教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net/c/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"已更新完毕"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Qt教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net/qt/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"正在更新"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"C++教程"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"http://c.biancheng.net/cplus/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TableWidget<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"已更新完毕"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将表格控件作为结点内容</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">setItemWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>TableWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>

    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="QTreeWidget_923"></a>QTreeWidget信号和槽</h4> 
<p>QTreeWidget 控件提供了很多信号函数，可以捕捉用户的诸多动作，例如点击或双击了某个结点、某个结点被修改等等，如下罗列了几个常用的信号函数：</p> 
<h5><a id="QTreeWidget_925"></a>QTreeWidget信号函数：</h5> 
<blockquote> 
 <p>//用户单击某个结点时，会触发此信号函数<br> void QTreeWidget::itemClicked(QTreeWidgetItem *item, int column)<br> //用户双击某个结点时，会触发此信号函数<br> void QTreeWidget::itemDoubleClicked(QTreeWidgetItem *item, int column)<br> //当某个结点的内容被修改时，会触发此信号函数<br> void QTreeWidget::itemChanged(QTreeWidgetItem *item, int column)<br> //当用户选择其它结点时，会触发此信号函数<br> void QTreeWidget::currentItemChanged(QTreeWidgetItem *current, QTreeWidgetItem *previous)</p> 
</blockquote> 
<h5><a id="QTreeWidget__935"></a>QTreeWidget 的槽函数</h5> 
<blockquote> 
 <p>//控件树形控件中的所有结点<br> void QTreeWidget::clear()<br> //折叠指定结点所有的子结点<br> void QTreeWidget::collapseItem(const QTreeWidgetItem *item)<br> //展开指定结点所有的子结点<br> void QTreeWidget::expandItem(const QTreeWidgetItem *item)</p> 
</blockquote> 
<h4><a id="_943"></a>示例</h4> 
<p>仍然是无ui，仅main.cpp</p> 
<pre><code class="prism language-cpp"><span class="token comment">//main.cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidgetItem&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStringList&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTableWidget&gt;</span></span>

<span class="token comment">//自定义槽函数</span>
<span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span><span class="token punctuation">{<!-- --></span>
    Q_OBJECT
<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">treeWidgetClicked</span><span class="token punctuation">(</span>QTreeWidgetItem <span class="token operator">*</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//接收 itemClicked() 信号函数传递过来的 item 参数</span>
<span class="token keyword">void</span> <span class="token class-name">MyWidget</span><span class="token operator">::</span><span class="token function">treeWidgetClicked</span><span class="token punctuation">(</span>QTreeWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//遍历 item 结点所有的子结点</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>item<span class="token operator">-&gt;</span><span class="token function">childCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//找到每个子结点</span>
        QTreeWidgetItem <span class="token operator">*</span>childItem <span class="token operator">=</span> item<span class="token operator">-&gt;</span><span class="token function">child</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将子结点的选中状态调整为和父结点相同</span>
        childItem<span class="token operator">-&gt;</span><span class="token function">setCheckState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>item<span class="token operator">-&gt;</span><span class="token function">checkState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"MyTreeWidget控件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QTreeWidget <span class="token function">treeWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置列数</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">setColumnCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加顶层结点</span>
    QTreeWidgetItem topItem<span class="token punctuation">;</span>
    topItem<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"教程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    topItem<span class="token punctuation">.</span><span class="token function">setCheckState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>Qt<span class="token operator">::</span>Unchecked<span class="token punctuation">)</span><span class="token punctuation">;</span>
    treeWidget<span class="token punctuation">.</span><span class="token function">addTopLevelItem</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加子结点</span>
    QStringList c<span class="token punctuation">;</span>
    c <span class="token operator">&lt;&lt;</span> <span class="token string">"C语言教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"http://c.biancheng.net/c/"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"已完成"</span><span class="token punctuation">;</span>
    QTreeWidgetItem <span class="token function">childItem1</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    childItem1<span class="token punctuation">.</span><span class="token function">setCheckState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>Qt<span class="token operator">::</span>Unchecked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QStringList qt<span class="token punctuation">;</span>
    qt <span class="token operator">&lt;&lt;</span> <span class="token string">"Qt教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"http://c.biancheng.net/qt/"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"未完成"</span><span class="token punctuation">;</span>
    QTreeWidgetItem <span class="token function">childItem2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span>qt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    childItem2<span class="token punctuation">.</span><span class="token function">setCheckState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>Qt<span class="token operator">::</span>Unchecked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QStringList python<span class="token punctuation">;</span>
    python <span class="token operator">&lt;&lt;</span> <span class="token string">"Python教程"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"http://c.biancheng.net/python/"</span> <span class="token operator">&lt;&lt;</span><span class="token string">"已完成"</span><span class="token punctuation">;</span>
    QTreeWidgetItem <span class="token function">childItem3</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>topItem<span class="token punctuation">,</span>python<span class="token punctuation">)</span><span class="token punctuation">;</span>
    childItem3<span class="token punctuation">.</span><span class="token function">setCheckState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>Qt<span class="token operator">::</span>Unchecked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加信号和槽机制，当某个结点被点击时，调整所有子结点的选中状态，同时将所有子结点展开。</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>treeWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QTreeWidget<span class="token operator">::</span>itemClicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>treeWidgetClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>treeWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QTreeWidget<span class="token operator">::</span>itemClicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>treeWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QTreeWidget<span class="token operator">::</span>expandItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//MyWidget类的定义应该放到 .h 文件中，本例中将其写到 main.cpp 中，程序最后需要添加 #include "当前源文件名.moc" 语句，否则无法通过编译。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"main.moc"</span></span>
</code></pre> 
<h3><a id="Day10_QMessageBox_1015"></a>Day10 QMessageBox用法详解</h3> 
<p>QMessageBox 是 Qt 框架中常用的一个类，可以生成各式各样、各种用途的消息对话框</p> 
<p>很多 GUI 程序都会用到消息对话框，且很多场景中使用的消息对话框是类似的，唯一的区别只是提示信息不同。为了提高程序员的开发效率，避免重复地“造轮子”，Qt 开发者设计好了几种通用的 QMessageBox 消息对话框，需要时可以直接使用。</p> 
<h4><a id="QMessageBox_1019"></a>通用的QMessageBox消息框</h4> 
<h5><a id="1_information_1020"></a>1) information消息对话框</h5> 
<p>information 对话框常用于给用户提示一些关键的信息，它的外观如下图所示：<img src="https://images2.imgbox.com/c7/1c/L9cjvipe_o.gif" alt="请添加图片描述"><br> 在项目中使用 information 消息对话框，直接调用 QMessageBox 类中的 information() 静态成员方法即可，该方法的语法格式如下：</p> 
<blockquote> 
 <p>StandardButton QMessageBox::information(QWidget *parent,<br> const QString &amp;title,<br> const QString &amp;text,<br> StandardButtons buttons = Ok,<br> StandardButton defaultButton = NoButton)</p> 
</blockquote> 
<p>各个参数的含义是：</p> 
<ul><li>parent：指定消息对话框的父窗口，消息提示框会作为一个独立的窗口显示在父窗口的前面。消息提示框从弹出到关闭的整个过程中，用户无法操作父窗口，更不能删除父窗口；</li><li>title：指定消息对话框的标题，即图中的 Titile；</li><li>text：指定消息对话框的具体内容，即图中的 text；</li><li>buttons：指定消息对话框中包含的按钮。默认情况下，消息对话框只包含一个按钮，即图 2 中显示的 “OK” 按钮。根据需要，我们可以用|按位或运算符在消息对话框中设置多个按钮，例如 QMessageBox::Ok|QMessageBox::Cancel；</li><li>defaultButton：指定 Enter 回车键对应的按钮，用户按下回车键时就等同于按下此按钮。注意，defaultButton 参数的值必须是 buttons 中包含的按钮，当然也可以不手动指定，QMessageBox 会自动从 buttons 中选择合适的按钮作为 defaultButton 的值。</li></ul> 
<p>information() 函数会返回用户按下的按钮。StandardButton 是 QMessageBox 类中定义的枚举类型，每个枚举值代表一种按钮。StandardButton 类型中的值有很多，下表给大家罗列了几个常用的：<br> <img src="https://images2.imgbox.com/f5/20/rLLHG02K_o.png" alt="在这里插入图片描述"><br> 示例：</p> 
<pre><code class="prism language-cpp">QMessageBox<span class="token operator">::</span>StandardButton result <span class="token operator">=</span> <span class="token class-name">QMessageBox</span><span class="token operator">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span> <span class="token string">"Title"</span><span class="token punctuation">,</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中，widget 是我们创建好的 QWidget 窗口，创建好的 information 对话框会显示在 widget 窗口的前面。通过用 result 接收 information() 函数的返回值，我们可以得知用户选择的是哪个按钮。</p> 
<h5><a id="2_critical_1046"></a>2) critical消息对话框</h5> 
<p>critical 消息对话框常用于给用户提示“操作错误”或“运行失败”的信息，它的外观如下图所示：<img src="https://images2.imgbox.com/7b/da/gA65SeYl_o.gif" alt="请添加图片描述"><br> 项目中使用 critical 消息对话框，直接调用 QMessageBox 类提供的 critical() 静态成员方法即可，该方法的语法格式为：</p> 
<blockquote> 
 <p>StandardButton QMessageBox::critical(QWidget *parent,<br> const QString &amp;title,<br> const QString &amp;text,<br> StandardButtons buttons = Ok,<br> StandardButton defaultButton = NoButton)</p> 
</blockquote> 
<p>各个参数的含义以及返回值的含义，都与 information() 函数相同，这里不再重复赘述。<br> 示例：</p> 
<pre><code class="prism language-cpp">QMessageBox<span class="token operator">::</span>StandardButton result<span class="token operator">=</span><span class="token class-name">QMessageBox</span><span class="token operator">::</span><span class="token function">critical</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span> <span class="token string">"Title"</span><span class="token punctuation">,</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中，widget 是我们创建好的 QWidget 窗口，创建好的 critical 对话框会显示在 widget 窗口的前面</p> 
<h5><a id="3_question_1064"></a>3) question消息对话框</h5> 
<p>question 对话框常用于向用户提出问题并接收用户的答案，它的外观如下图所示：<img src="https://images2.imgbox.com/b1/86/2xmDBeuK_o.gif" alt="请添加图片描述"><br> 项目中使用 question 对话框，可以直接调用 QMessageBox 类的 question() 静态成员方法，该方法的语法格式为：</p> 
<blockquote> 
 <p>StandardButton QMessageBox::question(QWidget *parent,<br> const QString &amp;title,<br> const QString &amp;text,<br> StandardButtons buttons = StandardButtons( Yes | No ),<br> StandardButton defaultButton = NoButton)</p> 
</blockquote> 
<p>示例：</p> 
<pre><code class="prism language-cpp">QMessageBox<span class="token operator">::</span>StandardButton result<span class="token operator">=</span><span class="token class-name">QMessageBox</span><span class="token operator">::</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span> <span class="token string">"Title"</span><span class="token punctuation">,</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="4_warning_1079"></a>4) warning消息对话框</h5> 
<p>warining 对话框常用于向用户显示一些警告信息，它的外观如下图所示：<img src="https://images2.imgbox.com/82/1e/wPh2gf4C_o.gif" alt="请添加图片描述"><br> 项目中使用 warning 对话框，可以直接调用 QMessageBox 类的 warning() 静态成员方法，该方法的语法格式为：</p> 
<blockquote> 
 <p>StandardButton QMessageBox::warning(QWidget *parent,<br> const QString &amp;title,<br> const QString &amp;text,<br> StandardButtons buttons = Ok,<br> StandardButton defaultButton = NoButton)</p> 
</blockquote> 
<p>示例：</p> 
<pre><code class="prism language-cpp">QMessageBox<span class="token operator">::</span>StandardButton result<span class="token operator">=</span><span class="token class-name">QMessageBox</span><span class="token operator">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">,</span> <span class="token string">"Title"</span><span class="token punctuation">,</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="5_aboutaboutQt_1094"></a>5) about和aboutQt对话框</h5> 
<p>about 对话框常常作为介绍某个产品或某项功能的临时窗口，它的外观如下图所示：<img src="https://images2.imgbox.com/01/49/Uxzeqz0N_o.gif" alt="请添加图片描述"><br> 注意，about 对话框没有固定的图标，它显示的图标可能来自父窗口、包含父窗口的顶层窗口等，也可能使用和 information 对话框相同的图标。<br> 语法：</p> 
<blockquote> 
 <p>void QMessageBox::about(QWidget *parent, const QString &amp;title, const QString &amp;text)</p> 
</blockquote> 
<p>我们只能设置 aboutQt 对话框的 parent 父窗口和 title 标题，不能自定义它的内容。所以在实际场景中，aboutQt() 对话框很少使用。</p> 
<h5><a id="QMessageBox_1102"></a>自定义QMessageBox对话框</h5> 
<p>以上 6 种通用的 QMessageBox 对话框，界面上的图片无法修改，按钮上的文字也无法修改（例如无法将 OK、No 改成中文）。如果想修改它们，就需要自定义一个 QMessageBox 对话框。</p> 
<p><strong>QMessageBox对话框的创建</strong><br> 程序中创建 QMessageBox 对象，必须先引入QMessageBox头文件。QMessageBox 类提供了两个构造函数，分别是：</p> 
<blockquote> 
 <p>QMessageBox::QMessageBox(QWidget *parent = Q_NULLPTR)<br> QMessageBox::QMessageBox(Icon icon,<br> const QString &amp;title,<br> const QString &amp;text,<br> StandardButtons buttons = NoButton,<br> QWidget *parent = Q_NULLPTR,<br> Qt::WindowFlags f = Qt::Dialog | Qt::MSWindowsFixedSizeDialogHint)</p> 
</blockquote> 
<p>第一个构造函数可以创建一个“空白”对话框，即对话框中不包含任何文本和按钮。当然，通过调用 QMessageBox 类提供的成员方法，可以向“空白”对话框中添加各种元素（图标、文本、按钮等）。<br> 第二个构造函数中，各个参数的含义是：</p> 
<ul><li>icon：指定对话框中的图片。Icon 是 QMessageBox 类中定义的枚举类型，内部包含 QMessageBox::NoIcon、QMessageBox::Question、QMessageBox::Information、QMessageBox::Warning、QMessageBox::Critical 几个值，分别表示：不指定图片、question对话框的图片、information对话框的图片、warning对话框的图片、critical对话框的图片。</li><li>title：指定对话框的标题；</li><li>text：指定对话框中显示的文本信息；</li><li>buttons：指定对话框中包含的的按钮，可选值如表 1 所示。</li><li>parent：指定对话框的父窗口</li><li>f：指定对话框的属性。WindowFlags 是 Qt 提供的枚举类型，内部包含的值有很多，有的用来指定对话框的用途（比如 Qt::Dialog 表示对话框窗口），有的用来指定对话框的外观（比如 MSWindowsFixedSizeDialogHint 表示给对话框添加一个细的边框）<br> 示例：</li></ul> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMessageBox&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建 QMessageBox 类对象</span>
    QMessageBox <span class="token function">MyBox</span><span class="token punctuation">(</span>QMessageBox<span class="token operator">::</span>Question<span class="token punctuation">,</span><span class="token string">"Title"</span><span class="token punctuation">,</span><span class="token string">"text"</span><span class="token punctuation">,</span>QMessageBox<span class="token operator">::</span>Yes<span class="token operator">|</span>QMessageBox<span class="token operator">::</span>No<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//使 MyBox 对话框显示</span>
    MyBox<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>程序中创建了一个 MyBox 对话框，通过调用 QMessageBox 提供的 exec() 方法，可以使 MyBox 对话框弹出。运行程序可以发现，MyBox 对话框的外观和 question 对话框完全一样。<br> <strong>QMessageBox对话框的使用</strong><br> QMessageBox 类提供了很多功能实用的成员方法，方便我们快速地制作出实际场景需要的对话框。</p> 
<p>下表给大家罗列了常用的一些 QMessageBox 类成员方法：</p> 
<h5><a id="QMessageBox_httpsimgblogcsdnimgcn4f377a8a07fe4433b8bbb2bb8587df64pngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBAQ2xheVRveQsize_20color_FFFFFFt_70g_sex_16_1145"></a>QMessageBox 常用成员方法<img src="https://images2.imgbox.com/4a/75/A9EDg7Zx_o.png" alt="在这里插入图片描述"></h5> 
<p>示例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMessageBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QMessageBox MBox<span class="token punctuation">;</span>
    MBox<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QMessageBox自定义对话框"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    MBox<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"这是一个自定义的对话框"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    MBox<span class="token punctuation">.</span><span class="token function">setIconPixmap</span><span class="token punctuation">(</span><span class="token function">QPixmap</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\xiexuewu\\Desktop\\icon_c.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPushButton <span class="token operator">*</span>agreeBut <span class="token operator">=</span> MBox<span class="token punctuation">.</span><span class="token function">addButton</span><span class="token punctuation">(</span><span class="token string">"同意"</span><span class="token punctuation">,</span> QMessageBox<span class="token operator">::</span>AcceptRole<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MBox<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>MBox<span class="token punctuation">.</span><span class="token function">clickedButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>QAbstractButton<span class="token operator">*</span><span class="token punctuation">)</span>agreeBut<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//在 Qt Creator 的输出窗口中输出指定字符串</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"用户点击了同意按钮"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="QMessageBox_1170"></a>QMessageBox的信号和槽</h5> 
<p>操作 QMessageBox 对话框，最常用的信号函数是 buttonClicked() 函数，最常用的槽函数是 exec() 函数，它们的语法格式和功能如下表所示。</p> 
<p><img src="https://images2.imgbox.com/1d/13/ODnU8VHI_o.png" alt="在这里插入图片描述"><br> 示例：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//main.cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMessageBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QAbstractButton&gt;</span></span>
QPushButton<span class="token operator">*</span> agreeBut<span class="token punctuation">;</span>
QPushButton<span class="token operator">*</span> disagreeBut<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span><span class="token punctuation">{<!-- --></span>
    Q_OBJECT
<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">buttonClicked</span><span class="token punctuation">(</span>QAbstractButton <span class="token operator">*</span> butClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token class-name">MyWidget</span><span class="token operator">::</span><span class="token function">buttonClicked</span><span class="token punctuation">(</span>QAbstractButton <span class="token operator">*</span> butClicked<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>butClicked <span class="token operator">==</span> <span class="token punctuation">(</span>QAbstractButton<span class="token operator">*</span><span class="token punctuation">)</span>disagreeBut<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    MyWidget myWidget<span class="token punctuation">;</span>
    myWidget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"主窗口"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myWidget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//创建消息框</span>
    QMessageBox <span class="token function">MyBox</span><span class="token punctuation">(</span>QMessageBox<span class="token operator">::</span>Question<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBox<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置消息框的属性为对话框，它会是一个独立的窗口</span>
    MyBox<span class="token punctuation">.</span><span class="token function">setWindowFlags</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>Dialog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBox<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"协议"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBox<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"使用本产品，请您严格遵守xxx规定！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//自定义两个按钮</span>
    agreeBut <span class="token operator">=</span> MyBox<span class="token punctuation">.</span><span class="token function">addButton</span><span class="token punctuation">(</span><span class="token string">"同意"</span><span class="token punctuation">,</span> QMessageBox<span class="token operator">::</span>AcceptRole<span class="token punctuation">)</span><span class="token punctuation">;</span>
    disagreeBut <span class="token operator">=</span> MyBox<span class="token punctuation">.</span><span class="token function">addButton</span><span class="token punctuation">(</span><span class="token string">"拒绝"</span><span class="token punctuation">,</span> QMessageBox<span class="token operator">::</span>RejectRole<span class="token punctuation">)</span><span class="token punctuation">;</span>

    myWidget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//添加信号和槽，监听用户点击的按钮，如果用户拒绝，则主窗口随之关闭。</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>MyBox<span class="token punctuation">,</span><span class="token operator">&amp;</span>QMessageBox<span class="token operator">::</span>buttonClicked<span class="token punctuation">,</span><span class="token operator">&amp;</span>myWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>buttonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBox<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//MyWidget类的定义应该放到 .h 文件中，本例中将其写到 main.cpp 中，程序最后需要添加 #include "当前源文件名.moc" 语句，否则无法通过编译。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"main.moc"</span></span>
</code></pre> 
<h3><a id="Day11_Qt5_1229"></a>Day11 Qt布局管理详解（5种布局控件）</h3> 
<p>作为一款成熟的 GUI 框架，Qt 提供了很多摆放控件的辅助工具（又称布局管理器或者布局控件），它们可以完成两件事：</p> 
<ul><li>自动调整控件的位置，包括控件之间的间距、对齐等；</li><li>当用户调整窗口大小时，位于布局管理器内的控件也会随之调整大小，从而保持整个界面的美观。</li></ul> 
<p>Qt 共提供了 5 种布局管理器，每种布局管理器对应一个类，分别是 QVBoxLayout（垂直布局）、QHBoxLayout（水平布局）、QGridLayout（网格布局）、QFormLayout（表单布局）和 QStackedLayout（分组布局），它们的继承关系如下图所示：<img src="https://images2.imgbox.com/15/c9/lkTrmXHS_o.gif" alt="请添加图片描述"></p> 
<p><strong>QVBoxLayout垂直布局</strong><br> 直布局指的是将所有控件从上到下（或者从下到上）依次摆放，例如：<img src="https://images2.imgbox.com/4c/ca/Mep1BJnY_o.gif" alt="请添加图片描述"><br> 程序中使用 QVBoxLayout 布局控件，需提前引入QVBoxLayout头文件。每个 QVBoxLayout 控件本质都是 QVBoxLayout 类的实例对象，该类提供了两个构造函数，分别是：</p> 
<blockquote> 
 <p>QVBoxLayout()<br> QVBoxLayout(QWidget *parent)</p> 
</blockquote> 
<p>创建 QVBoxLayout 控件的同时可以指定父窗口，那么它将作为父窗口中管理其它控件的工具；也可以暂时不指定父窗口，待全部设置完毕后再将其添加到某个窗口中。</p> 
<h5><a id="QVBoxLayout_1245"></a>QVBoxLayout常用方法</h5> 
<p><img src="https://images2.imgbox.com/09/f2/K8y3hvLg_o.png" alt="在这里插入图片描述"><br> 示例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QVBoxLayout垂直布局"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建垂直布局管理器</span>
    QVBoxLayout <span class="token operator">*</span>layout<span class="token operator">=</span><span class="token keyword">new</span> QVBoxLayout<span class="token punctuation">;</span>
    <span class="token comment">//设置布局管理器中所有控件从下往上依次排列</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setDirection</span><span class="token punctuation">(</span>QBoxLayout<span class="token operator">::</span>BottomToTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//连续创建 3 个文本框，并设置它们的背景和字体大小</span>
    QLabel <span class="token function">lab1</span><span class="token punctuation">(</span><span class="token string">"Label1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab1<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#dddddd;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab1<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLabel <span class="token function">lab2</span><span class="token punctuation">(</span><span class="token string">"Label2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab2<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#cccccc;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab2<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLabel <span class="token function">lab3</span><span class="token punctuation">(</span><span class="token string">"Label3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab3<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#ffffff;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab3<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//将 3 个文本框和 2 个空白行添加到管理器中，它们的伸缩系数比是 2:1:2:3:3</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab2<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab3<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//将布局管理器添加到 widget 窗口中</span>
    widget<span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>程序中做了以下几个操作：<br> 通过调用 setDirection() 方法，将添加到 QVBoxLayout 管理器中的所有控件（包括空白行）按照从下到上的顺序依次摆放。举个例子，由于 lab1 文本框是第二个添加到管理器中的，因此在最终显示的界面中，lab1 位于倒数第二的位置。<br> 通过调用 addStrech() 方法，向管理器中先后添加了两个空白行，它们的伸缩系数分别为 2 和 3，因此 widget 窗口中的空白区域会平均分为 5 份，一个空白行占 3 份，另一个占 2 份。<br> 通过调用 addWidget() 方法，向管理器中先后添加了 3 个文本框，它们的拉伸系数比为 1:2:3，所以当我们拉伸 widget 窗口时，三个文本框的大小（宽度）呈现 1:2:3 的关系。<br> 通过调用 setLayout() 方法，成功地将 layout 布局管理器添加到了 widget 窗口中。当然，也可以在创建 layout 对象时指定 widget 作为它的父窗口，两种方式是完全等价的。</p> 
<p><img src="https://images2.imgbox.com/94/1a/s1jbq2pZ_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="QHBoxLayout_1298"></a>QHBoxLayout水平布局</h5> 
<p>水平布局指的是将所有控件从左到右（或者从右到左）依次摆放，例如：</p> 
<p><img src="https://images2.imgbox.com/fb/66/lkK9HTa8_o.gif" alt="请添加图片描述"><br> 使用 QHBoxLayout 水平布局控件，程序中要提前引入QHBoxLayout头文件。QHBoxLayout 和 QVBoxLayout 继承自同一个类，它们的用法非常相似，比如 QHBoxLayout 类也提供了两个构造函数：</p> 
<blockquote> 
 <p>QHBoxLayout()<br> QHBoxLayout(QWidget *parent)</p> 
</blockquote> 
<p>QHBoxLayout 类也没有新添任何成员方法，它只能使用从父类继承的成员方法。因此，QVBoxLayout常用方法 中罗列的所有成员方法也同样适用于 QHBoxLayout 对象。<br> 示例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QHBoxLayout&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QHBoxLayout水平布局"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建水平布局管理器</span>
    QHBoxLayout <span class="token operator">*</span>layout<span class="token operator">=</span><span class="token keyword">new</span> QHBoxLayout<span class="token punctuation">;</span>
    <span class="token comment">//设置布局管理器中所有控件的布局方向为从右往左依次排列</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setDirection</span><span class="token punctuation">(</span>QBoxLayout<span class="token operator">::</span>RightToLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//连续创建 3 个文本框，并设置它们的背景和字体大小</span>
    QLabel <span class="token function">lab1</span><span class="token punctuation">(</span><span class="token string">"Label1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab1<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#dddddd;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab1<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLabel <span class="token function">lab2</span><span class="token punctuation">(</span><span class="token string">"Label2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab2<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#cccccc;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab2<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLabel <span class="token function">lab3</span><span class="token punctuation">(</span><span class="token string">"Label3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab3<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#ffffff;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab3<span class="token punctuation">.</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//将 3 个文本框和 2 个空白列添加到管理器中，它们的拉伸系数比是 2:1:2:3:3</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab2<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lab3<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//将布局管理器添加到 widget 窗口中</span>
    widget<span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8d/2b/qtPmlo4k_o.gif" alt="请添加图片描述"></p> 
<h5><a id="QGridLayout_1352"></a>QGridLayout网格布局</h5> 
<p>QGridLayout网格布局<br> <img src="https://images2.imgbox.com/07/b6/7FhtvYAi_o.gif" alt="请添加图片描述"><br> QGridLayout 的行标和列标都从 0 开始，例如图 6 中 one 按钮的位置为 (0, 0)，Four 按钮的位置为 (2, 0)。我们可以随意指定 QGridLayout 的行数和列数，各个控件可以随意摆放，必要时某些位置可以空着不用。</p> 
<p>使用 QGridLayout 网格控件，程序中需引入QGridLayout头文件。每个 QGridLayout 控件都是 QGridLayout 类的一个实例对象，该类提供了两个构造函数，分别是：</p> 
<blockquote> 
 <p>QGridLayout(QWidget *parent)<br> QGridLayout()</p> 
</blockquote> 
<h5><a id="QGridLayout_1362"></a>QGridLayout常用方法</h5> 
<p><img src="https://images2.imgbox.com/c1/93/lOmA0eRR_o.png" alt="在这里插入图片描述"><br> 示例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QGridLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QGridLayout网格布局"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建 4 个按钮和 1 个文本框</span>
    QPushButton <span class="token operator">*</span>but1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"but1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPushButton <span class="token operator">*</span>but2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"but2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLabel <span class="token operator">*</span>lab3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"lab"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab3<span class="token operator">-&gt;</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span><span class="token string">"QLabel{background:#dddddd;font:20px;}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lab3<span class="token operator">-&gt;</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPushButton <span class="token operator">*</span>but3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"but3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPushButton <span class="token operator">*</span>but4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"but4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建网格布局控件</span>
    QGridLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> QGridLayout<span class="token punctuation">;</span>
    <span class="token comment">//向 layout 中添加控件，并指定各个控件的位置</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>lab3<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but3<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but4<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将 layout 添加到 widget 窗口中</span>
    widget<span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a1/ea/86YveSBW_o.gif" alt="请添加图片描述"></p> 
<h4><a id="QFormLayout_1416"></a>QFormLayout表单布局</h4> 
<p>Qt 提供了很多种输入框控件，包括 QLineEdit 单行输入框、QTextEdit 多行输入框等。通常情况下，每个输入框的旁边都会附带一些文字（又称标签），用来提示用户需要输入的信息。例如，图 8 中第一个输入框的标签为 “Name”，提示用户填写自己的姓名。<img src="https://images2.imgbox.com/6b/34/bRGKWoMd_o.gif" alt="请添加图片描述"><br> 使用 QFormLayout 布局控件之前，程序中应引入QFormLayout头文件。每一个表单布局控件都是 QFormLayout 类的一个实例对象，该类仅提供了一个构造函数：</p> 
<blockquote> 
 <p>QFormLayout(QWidget *parent = Q_NULLPTR)</p> 
</blockquote> 
<h5><a id="QFormLayout_1422"></a>QFormLayout常用方法</h5> 
<p><img src="https://images2.imgbox.com/10/1b/mvzpDjRk_o.png" alt="在这里插入图片描述"><br> 示例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLineEdit&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFormLayout&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QFormLayout表单布局"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建 4 个按钮和 1 个文本框</span>
    QFormLayout<span class="token operator">*</span> layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QFormLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置表单中的标签都位于控件的上方</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setRowWrapPolicy</span><span class="token punctuation">(</span>QFormLayout<span class="token operator">::</span>WrapAllRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//添加 3 行输入框和标签</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addRow</span><span class="token punctuation">(</span><span class="token string">"Name:"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QLineEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addRow</span><span class="token punctuation">(</span><span class="token string">"Email:"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QLineEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addRow</span><span class="token punctuation">(</span><span class="token string">"Adress:"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token function">QLineEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置行间距和列间距为 10</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setSpacing</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将 layout 表单添加到 widget 窗口中</span>
    widget<span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/48/f8/WU8BC4zJ_o.gif" alt="请添加图片描述"></p> 
<h4><a id="QStackedLayout_1454"></a>QStackedLayout分组布局</h4> 
<p>QStackedLayout 布局管理器可以容纳多个控件或者窗口，但每次只显示其中的一个。类似于vscode中的设置界面</p> 
<p>使用 QStackedLayout 布局控件，程序中必须先引入QStackedLayout头文件。 每个 QStackedLayout 控件都是 QStackedLayout 类的一个实例对象，该类提供有 3 个构造函数，分别是：</p> 
<pre><code class="prism language-cpp"><span class="token function">QStackedLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">QStackedLayout</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
<span class="token function">QStackedLayout</span><span class="token punctuation">(</span>QLayout <span class="token operator">*</span>parentLayout<span class="token punctuation">)</span>
</code></pre> 
<p>借助第二个构造函数，我们可以将 QStackedLayout 添加到指定的 parent 窗口中；借助第三个构造函数，我们可以将 QStackedLayout 嵌入到指定的 parentLayout 布局控件中</p> 
<h5><a id="QStackedLayout_1466"></a>QStackedLayout常用方法</h5> 
<p><img src="https://images2.imgbox.com/1f/d3/g31aNxdq_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLineEdit&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStackedLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QListWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QHBoxLayout&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    QWidget widget<span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QStackedLayout分组布局"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//向主窗口中添加一个水平布局控件</span>
    QHBoxLayout <span class="token operator">*</span>layout<span class="token operator">=</span><span class="token keyword">new</span> QHBoxLayout<span class="token punctuation">;</span>
   
    <span class="token comment">//创建一个列表</span>
    QListWidget <span class="token function">listWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">setMinimumWidth</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token function">QFont</span><span class="token punctuation">(</span><span class="token string">"宋体"</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"QPushButton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"QLabel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listWidget<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"QLineEdit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//新建 3 个窗口，分别放置文本框、按钮和单行输入框</span>
    QWidget widget1<span class="token punctuation">;</span>
    widget1<span class="token punctuation">.</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPushButton <span class="token function">but1</span><span class="token punctuation">(</span><span class="token string">"这是一个按钮"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QWidget widget2<span class="token punctuation">;</span>
    widget2<span class="token punctuation">.</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLabel <span class="token function">lab1</span><span class="token punctuation">(</span><span class="token string">"这是一个文本框"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QWidget widget3<span class="token punctuation">;</span>
    widget3<span class="token punctuation">.</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLineEdit <span class="token function">edit</span><span class="token punctuation">(</span><span class="token string">"这是一个单行输入框"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>widget3<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//创建一个分组布局，将 3 个窗口添加到分组控件中</span>
    QStackedLayout <span class="token operator">*</span>stackedLayout <span class="token operator">=</span> <span class="token keyword">new</span> QStackedLayout<span class="token punctuation">;</span>
    stackedLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stackedLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stackedLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget3<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">//layout 第一列添加 QListWidget 控件，第二列添加分组布局控件，设置它们的伸缩系数比为 1:4</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>listWidget<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addLayout</span><span class="token punctuation">(</span>stackedLayout<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将 layout 水平布局控件添加到 widget 窗口中</span>
    widget<span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//连接信号和槽，实现当点击列表中的某一项，切换分组布局管理器显示的控件</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>listWidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>QListWidget<span class="token operator">::</span>currentRowChanged<span class="token punctuation">,</span>stackedLayout<span class="token punctuation">,</span><span class="token operator">&amp;</span>QStackedLayout<span class="token operator">::</span>setCurrentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e3/a1/njM0qKmv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Day12_Qt_pro_1528"></a>Day12 Qt pro文件详解</h3> 
<p>默认情况下，每个 Qt 项目都包含一个后缀名为.pro、名称和项目名相同的文件，我们通常称它为项目管理文件或者工程管理文件（简称 pro 文件）。</p> 
<p>任何一个 Qt 项目都至少包含一个 pro 文件，此文件负责存储与当前项目有关的配置信息，比如：</p> 
<ul><li>项目中用到了哪些模块？</li><li>项目中包含哪些源文件，哪些头文件，它们的存储路径是什么？</li><li>项目使用哪个图片作为应用程序的图标？</li><li>项目最终生成的可执行文件的名称是什么？</li></ul> 
<blockquote> 
 <p>所谓模块，可以简单地理解为文件夹或者压缩包，内部包含多个功能相近的类。作为一款成熟的 GUI 框架，Qt 提供了大量的类，根据这些类的功能，Qt 将它们分成了几个组，每个组称为一个模块。打开 Qt Creator 的帮助界面并搜索“All modules”，可以看到 Qt 的所有模块</p> 
</blockquote> 
<p>一个项目中可能包含上百个源文件，Qt 编译这些源文件的方法是：先由 qmake 工具根据 pro 文件记录的配置信息生成相应的 makefile 文件，然后执行 make 命令完成对整个项目的编译。也就是说，pro 文件存储的配置信息是用来告知编译器如何编译当前项目的，所以一个 Qt 项目要想完美运行，既要保证各个源文件中程序的正确性，还要保证 pro 文件中配置信息的合理性。</p> 
<p>对于一个刚刚创建好的 Qt 项目，pro 文件并不是空的，而是包含一些基本的配置信息。实际开发中，Qt 会自动修改 pro 文件的内容，但有时也需要我们手动修改，例如程序中用到某个第三方库时，就需要我们手动修改 pro 文件。</p> 
<p><strong>pro文件中的配置信息</strong><br> <img src="https://images2.imgbox.com/fd/3a/iVBep6eS_o.png" alt="在这里插入图片描述"><br> 以上是 Demo.pro 配置文件中默认包含的内容。其中，#号是注释符号，除了以#号开头的注释内容外，其它内容都是当前项目的配置信息，比如QT += core gui、TARGET = Demo等。</p> 
<ol><li>pro 文件可以存储上百条配置信息，每条配置信息由三部分构成：</li><li>前半部分是关键字，也称配置项，用来指明配置信息的含义； 中间用 +=、-=、= 等数学符号连接配置项和它对应的值；</li><li>后半部分是配置项对应的值，一个配置项可以对应多个值，每个值代表不同的含义。<br> 例如在 QT += core gui中，Qt是配置项，core和gui是该配置项的值，中间用+=符号连接。下表给大家罗列了一些常用的配置项以及它们各自的含义。</li></ol> 
<h5><a id="Qt_pro_1556"></a>Qt pro文件常用配置项</h5> 
<p><img src="https://images2.imgbox.com/7d/4b/kabyegrn_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>根据上表中对各个配置项的讲解，您可以很轻松地搞清楚 Demo.pro 文件中各个配置项的含义，这里不再过多赘述。</p> 
</blockquote> 
<p>上表中，大部分配置项不需要我们手动修改，比如 SOURCES、HEADERS、FORMS 等，当我们添加或者删除项目中的源文件时，Qt 会自动修改这些配置项。有些配置项需要手动修改，比如 QT 配置项，接下来重点给大家讲解 QT 的用法。</p> 
<h4><a id="QT_1563"></a>QT配置项</h4> 
<p>前面提到，Qt 根据各个类的功能将它们分到不同的模块，因此程序中要想使用某个类，必须完成两项准备工作：</p> 
<ul><li>引入包含该类的头文件，通常情况下，Qt 中每个类的类名和包含它的头文件的名称是相同的，比如 QWiget 窗口类位于QWidget头文件中</li><li>将该类所属的模块添加到 pro 项目管理文件中。</li></ul> 
<p>QT 用来指明当前项目中用到的所有模块，它的默认值是 core 和 gui，分别表示引入 Core 模块和 GUI 模块：</p> 
<ul><li>Core 模块包含了 Qt GUI 界面开发的核心功能，其它所有模块都需要依赖于这个模块，它是所有 Qt GUI 项目必备的模块；</li><li>GUI 模块提供了用于开发 GUI 应用程序的必要的一些类。</li><li></ul> 
<p>每个新创建的 Qt GUI 项目中，都默认包含 Core 模块和 GUI 模块，如果项目中用不到它们，可以使用QT -=删除。例如，删除项目中包含的 GUI 模块，只需在 pro 文件中添加一条配置信息：</p> 
<blockquote> 
 <p>QT -= gui</p> 
</blockquote> 
<p>除了 Core 和 GUI 模块外，Qt 还有 SQL（包含操作数据库相关的类）、Widgets（包含构建界面的所有控件类）、Multimedia（包含提供音频、视频等功能的类）等模块，Qt 项目不会自动包含这些模块。例如，项目中用到 SQL 模块中的一些类时，需要在 pro 文件中添加如下配置信息：</p> 
<blockquote> 
 <p>QT += sql</p> 
</blockquote> 
<p>那么，当程序中用到某个类时，如何知道它属于哪个模块呢？很简单，先将该类所在的头文件中引入到程序中，然后鼠标选中头文件并按Fn+F1组合键，打开该头文件的使用手册后就可以看到它所属的模块。以程序中使用 QWidget 窗口类为例，先在程序中添加如下语句：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span> </span>
</code></pre> 
<p>紧接着，鼠标选中“QWidget”并按Fn+F1组合键，打开下图所示的 QWdiget 类使用手册，可以看到该类所属的模块为 widgets。</p> 
<h3><a id="Day13_Qt_1587"></a>Day13 Qt自定义信号和槽函数</h3> 
<p>实际开发中，如果仅使用 Qt 提供的信号函数和槽函数，会经常遇到信号函数的参数类型和个数无法满足实际需求、信号函数和槽函数的参数类型不匹配等问题。解决此类问题，最简单有效的方式就是：自定义场景需要的信号函数和槽函数。</p> 
<p><strong>自定义信号函数</strong><br> 信号函数指的是符合以下条件的函数：</p> 
<ul><li>定义在某个类中，该类直接或间接继承自 QObject 类；</li><li>用 signals 关键字修饰；</li><li>函数只需要声明，不需要定义（实现）；</li><li>函数的返回值类型为 void，参数的类型和个数不限。</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//Q_OBJECT 是一个宏，添加它才能正常使用 Qt 的信号和槽机制</span>
    Q_OBJECT
<span class="token comment">//修饰信号函数的关键字</span>
signals<span class="token operator">:</span>
    <span class="token comment">//自定义的信号函数</span>
    <span class="token keyword">void</span> <span class="token function">MySignal</span><span class="token punctuation">(</span>QString message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们自定义了一个继承自 QWidget 的 MyWidget 类，QWidget 是 QObject 的子类，所以 MyWidget 间接继承自 QObject 类。MyWidget 类中自定义了名为 MySignal 的信号函数（可以简称 MySignal 信号），它用 signals 关键字修饰，没有返回值，也没有定义（实现），仅有 1 个参数。</p> 
<p>对于 MySignal() 信号函数，程序中不会直接调用它，而是借助 connect() 连接某个槽函数，实现的语法格式是：</p> 
<blockquote> 
 <p><strong>MyWidget myWidget;<br> QObject::connect(&amp;myWidget,&amp;MyWidget::MySignal,信号接收者,槽函数);</strong></p> 
</blockquote> 
<p>一旦确定了信号接收者和槽函数，当 MySignal 信号发出后，与之相连的槽函数就会执行。那么，程序中如何发出 MySignal 信号呢？</p> 
<p>对于 Qt 提供给我们的信号函数，其底层已经设置好了信号发出的时机，例如按下鼠标时、点击 Enter 回车键时等等。对于自定义的信号，我们需要自己指定信号发出的时机，这就需要用到 emit 关键字。emit 中文意思为“发出、射出”，是 Qt 在 C++ 基础上扩展的一个关键字，专门用来发射信号。</p> 
<p>以定义好的 MySignal 信号为例，修改 MyWidget 类为：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//Q_OBJECT 是一个宏，添加它才能正常使用 Qt 的信号和槽机制</span>
    Q_OBJECT
<span class="token comment">//自定义信号函数</span>
signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">MySignal</span><span class="token punctuation">(</span>QString mess<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">emitSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        emit <span class="token function">MySignal</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QString message<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们为 MyWidget 类新增了一个 emitSignal() 方法和一个 message 属性，emitSignal() 方法中的emit MySignal(message);语句就表示发射 MySignal 信号。当程序中执行 emitSingal() 函数时，就会发出 MySignal 信号，message 属性的值也会随信号一同发出，对应的槽函数可以接收到 message 的值。</p> 
<blockquote> 
 <p>对于每一个自定义的信号函数，程序中都应该提供发射该信号的方法（函数），而且这样的方法（函数）可以有多个。</p> 
</blockquote> 
<p><strong>自定义槽函数</strong><br> Qt5 中，槽函数既可以是普通的全局函数、也可以是类的成员函数、静态成员函数、友元函数、虚函数，还可以用 lambda 表达式表示。</p> 
<p>和信号函数不同，槽函数必须手动定义（实现）。槽函数可以在程序中直接调用，但主要用来响应某个信号。自定义一个槽函数时，需要注意以下几点：</p> 
<ul><li>槽函数的返回值必须和信号函数相同，由于信号函数的返回值一定是 void，所以槽函数的返回值也必须为 void；</li><li>对于带参的信号函数，槽函数可以选择接收所有参数，则参数的类型、顺序、个数都必须与信号函数相同；也可以选择接收前几个参数，这些参数的类型、顺序都必须与信号函数相同；还可以选择不接受任何参数。</li><li>槽函数的参数个数只能比信号函数少，不能比信号函数多；</li><li>槽函数的参数不能有默认值。</li></ul> 
<p>举个例子，自定义响应 MySignal 信号的槽函数：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//Q_OBJECT 是一个宏，添加它才能正常使用 Qt 的信号和槽机制</span>
    Q_OBJECT
signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">MySignal</span><span class="token punctuation">(</span>QString mess1<span class="token punctuation">,</span>QString mess2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">emitSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        emit <span class="token function">MySignal</span><span class="token punctuation">(</span>message1<span class="token punctuation">,</span>message2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//类的成员函数</span>
    <span class="token keyword">void</span> <span class="token function">recSlot1</span><span class="token punctuation">(</span>QString mess<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"执行 recSlot1() 成员函数，输出"</span> <span class="token operator">&lt;&lt;</span> mess<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//指明定义的是槽函数</span>
<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">recSlot2</span><span class="token punctuation">(</span>QString mess1<span class="token punctuation">,</span>QString mess2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"执行 recSlot2() 槽函数，输出"</span><span class="token operator">&lt;&lt;</span> mess1 <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> mess2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    QString message1<span class="token punctuation">;</span>
    QString message2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//全局函数</span>
<span class="token keyword">void</span> <span class="token function">recSlot3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"执行 recSlot3() 全局函数"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>程序中，重点关注 recSlot1()、recSlot2()、recSlot3() 这 3 个函数：</p> 
<ul><li>recSlot1() 是 MyWidget 类内部的 public 成员函数，可以当做槽函数使用；</li><li>recSlot2() 位于 MyWidget 类的内部，修饰它的关键字是 public slots。slots 和 emit 一样，是 Qt 扩展的一个关键字，专门用来修饰槽函数。也就是说，recSlot2() 是 MyWidget 类中的槽函数。</li><li>recSlot3() 是全局函数，可以当做槽函数使用。</li></ul> 
<p>slots 关键字可以和 public、protected、private 搭配使用，它们的区别是：</p> 
<ul><li>public slots：该关键字修饰的槽函数，既可以在当前类及其子类的成员函数中调用，也可以在类外部的其它函数（比如 main() 函数）中调用；</li><li>protected slots：该关键字修饰的槽函数，仅允许在当前类及其子类的成员函数内调用，不能在类外部的其它函数内调用；</li><li>private slots：该关键字修饰的槽函数，只允许在当前类的成员函数内调用，不能在子类中调用，也不能在类外部的其它函数内调用。</li></ul> 
<p>通常情况下，槽函数使用 public slots 修饰。</p> 
<blockquote> 
 <p>很多读者会问，既然 public 修饰的成员函数可以当做槽函数，为什么还要提供 slots 关键字呢？笔者认为，“兼容旧的 Qt 版本”是其中的一个原因。Qt4 中的槽函数只能是 slots 修饰的类成员函数，Qt5 中取消了这一限制，但考虑到要兼容旧的 Qt 版本，Qt5 保留了旧版本中 connect() 函数的语法格式，也保留了 slots 关键字。</p> 
</blockquote> 
<p>调用 connect() 函数，将 MySignal() 信号函数分别连接 recSlot1()、recSlot2()、recSlot3() 三个槽函数，实现代码为：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//类的成员函数作为槽函数</span>
<span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>MySignal<span class="token punctuation">,</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>recSlot1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//信号函数和槽函数相连接</span>
<span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>MySignal<span class="token punctuation">,</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>recSlot2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//全局函数作为槽函数</span>
<span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>MySignal<span class="token punctuation">,</span><span class="token operator">&amp;</span>recSlot3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_1706"></a>自定义信号和槽的完整实例</h4> 
<pre><code class="prism language-cpp"><span class="token comment">//main.cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token keyword">class</span> <span class="token class-name">MyWidget</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//Q_OBJECT 是一个宏，添加它才能正常使用 Qt 的信号和槽机制</span>
    Q_OBJECT
<span class="token comment">//信号函数</span>
signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">MySignal</span><span class="token punctuation">(</span>QString mess1<span class="token punctuation">,</span>QString mess2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">//发射信号的函数</span>
    <span class="token keyword">void</span> <span class="token function">emitSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        emit <span class="token function">MySignal</span><span class="token punctuation">(</span>message1<span class="token punctuation">,</span>message2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//普通类成员函数</span>
    <span class="token keyword">void</span> <span class="token function">recSlot1</span><span class="token punctuation">(</span>QString mess<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"执行 recSlot1() 成员函数，输出"</span> <span class="token operator">&lt;&lt;</span> mess<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//槽函数</span>
<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">recSlot2</span><span class="token punctuation">(</span>QString mess1<span class="token punctuation">,</span>QString mess2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"执行 recSlot2() 槽函数，输出"</span><span class="token operator">&lt;&lt;</span> mess1 <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> mess2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    QString message1<span class="token punctuation">;</span>
    QString message2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//全局函数</span>
<span class="token keyword">void</span> <span class="token function">recSlot3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"执行 recSlot3() 全局函数"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建主窗口</span>
    MyWidget mywidget<span class="token punctuation">;</span>
    mywidget<span class="token punctuation">.</span>message1 <span class="token operator">=</span> <span class="token string">"day13"</span><span class="token punctuation">;</span>
    mywidget<span class="token punctuation">.</span>message2 <span class="token operator">=</span> <span class="token string">"qt"</span><span class="token punctuation">;</span>
    <span class="token comment">//类的成员函数作为槽函数</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>MySignal<span class="token punctuation">,</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>recSlot1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//信号函数和槽函数相连接</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>MySignal<span class="token punctuation">,</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>recSlot2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//全局函数作为槽函数</span>
    <span class="token class-name">QObject</span><span class="token operator">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mywidget<span class="token punctuation">,</span><span class="token operator">&amp;</span>MyWidget<span class="token operator">::</span>MySignal<span class="token punctuation">,</span><span class="token operator">&amp;</span>recSlot3<span class="token punctuation">)</span><span class="token punctuation">;</span>

    mywidget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//发射 Signal 信号</span>
    mywidget<span class="token punctuation">.</span><span class="token function">emitSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//MyWidget类的定义应该放到 .h 文件中，本例中将其写到 main.cpp 中，程序最后需要添加 #include "当前源文件名.moc" 语句，否则无法通过编译。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"main.moc"</span></span>
</code></pre> 
<p>执行程序，会弹出一个 myWidget 空白窗口，同时输出以下信息：</p> 
<blockquote> 
 <p>执行 recSlot1() 成员函数，输出 “day13”<br> 执行 recSlot2() 槽函数，输出 “day13” “qt”<br> 执行 recSlot3() 全局函数</p> 
</blockquote> 
<h3><a id="Day14_QFile_1771"></a>Day14 QFile文件操作</h3> 
<p>QFile 类支持对文件进行读取、写入、删除、重命名、拷贝等操作，它既可以操作文件文件，也可以操作二进制文件。</p> 
<p>使用 QFile 类操作文件之前，程序中需引入头文件。创建 QFile 类的对象，常用的构造函数有：</p> 
<blockquote> 
 <p>QFile::QFile()<br> QFile::QFile(const QString &amp;name)</p> 
</blockquote> 
<p>参数 name 用来指定要操作的目标文件，包含文件的存储路径和文件名，存储路径可以使用绝对路径（比如 “D:/Demo/test.txt”）或者相对路径（比如"./Demo/test.txt"），路径中的分隔符要用 “/” 表示。</p> 
<p>通常情况下，我们会调用第二个构造函数，直接指明要操作的文件。对于第一个构造函数创建的 QFile 对象，需要再调用 setFileName() 方法指明要操作的文件。</p> 
<p>与 C++ 读写文件的规则一样，使用 QFile 读写文件之前必须先打开文件，调用 open() 成员方法即可，常用的语法格式为：</p> 
<blockquote> 
 <p>bool QFile::open(OpenMode mode)</p> 
</blockquote> 
<p>mode 参数用来指定文件的打开方式，下表罗列了此参数的可选值以及各自的含义：</p> 
<h4><a id="QFile_1788"></a>QFile文件打开方式</h4> 
<p><img src="https://images2.imgbox.com/c0/3f/5sXACuUv_o.png" alt="在这里插入图片描述"><br> 根据需要，可以为 mode 参数一次性指定多个值，值和值之间用|分割。比如：</p> 
<ul><li>QIODevice::ReadOnly | QIODevice::Text：表示只允许对文件进行读操作，读取文件时，会将行尾结束符转换为 ‘\n’；</li><li>QIODevice::WriteOnly | QIODevice::Text：表示只允许对文件进行写操作，将数据写入文件时，会将行尾结束符转换为本地格式；</li><li>QIODevice::ReadWrite | QIODevice::Append | QIODevice::Text：表示对文件进行写操作，写入的数据会存放到文件的尾部，同时数据中的行尾结束符转换为本地格式。</li></ul> 
<blockquote> 
 <p>注意，传递给 mode 参数的多个值之间不能相互冲突，比如 Append 和 Truncate 不能同时使用。</p> 
</blockquote> 
<p>如果文件成功打开，open() 函数返回 true，否则返回 false。</p> 
<p>QFile 类提供了很多功能实用的方法，可以快速完成对文件的操作，下表列举了常用的一些：</p> 
<h4><a id="QFilehttpsimgblogcsdnimgcnee573a577b91431a897378b1fa68435apngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBAQ2xheVRveQsize_20color_FFFFFFt_70g_sex_16_1801"></a>QFile常用方法<img src="https://images2.imgbox.com/2a/45/AOCeyfh6_o.png" alt="在这里插入图片描述"></h4> 
<h4><a id="_QFile__1802"></a>【实例一】演示了 QFile 类读写文本文件的过程</h4> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//创建 QFile 对象，同时指定要操作的文件</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"D:/demo.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//对文件进行写操作</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>WriteOnly<span class="token operator">|</span>QIODevice<span class="token operator">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//向文件中写入两行字符串</span>
    file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"qt学习\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"day14"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//关闭文件</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//重新打开文件，对文件进行读操作</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>ReadOnly<span class="token operator">|</span>QIODevice<span class="token operator">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//每次都去文件中的一行，然后输出读取到的字符串</span>
    <span class="token keyword">char</span> <span class="token operator">*</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    qint64 readNum <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//当读取出现错误（返回 -1）或者读取到的字符数为 0 时，结束读取</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>readNum <span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>readNum <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> str<span class="token punctuation">;</span>
        readNum <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>执行程序，“qt学习” 和 “day14” 先写入 D 盘的 demo.txt 文件，然后再从文件中将它们读取出来。</p> 
<h4><a id="_QFile__1839"></a>【实例二】演示 QFile 读写二进制文件的过程。</h4> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//指定要写入文件的数据</span>
    qint32 nums<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//写入文件之前，要将数据以二进制方式存储到字节数组中</span>
    QByteArray byteArr<span class="token punctuation">;</span>
    byteArr<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//借助指针，将每个整数拷贝到字节数组中</span>
        <span class="token function">memcpy</span><span class="token punctuation">(</span>byteArr<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>qint32<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>qint32<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//将 byteArr 字节数组存储到文件中</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"D:/demo.dat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>byteArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//再次打开文件，读取文件中存储的二进制数据</span>
    file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray resArr <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//输出读取到的二进制数据</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"resArr: "</span><span class="token operator">&lt;&lt;</span>resArr<span class="token punctuation">;</span>
    <span class="token comment">//将二进制数据转化为整数</span>
    <span class="token keyword">char</span><span class="token operator">*</span> data <span class="token operator">=</span> resArr<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>qint32<span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">;</span>
        data <span class="token operator">+=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>qint32<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>执行程序，demo.dat 文件中会存储 {1,2,3,4,5} 这 5 个整数的二进制形式，同时输出以下内容：</p> 
<blockquote> 
 <p>resArr: “\x01\x00\x00\x00\x02\x00\x00\x00\x03\x00\x00\x00\x04\x00\x00\x00\x05\x00\x00\x00”<br> 1<br> 2<br> 3<br> 4<br> 5</p> 
</blockquote> 
<p>单独使用 QFile 类读写文件的过程既繁琐又复杂，Qt 提供了两个辅助类 QTextStream 和 QDataStream，前者用来读写文件文件，后者用来读写二进制文件，QFile 可以和它们搭配使用，从整体上提高读写文件的开发效率。</p> 
<h4><a id="QFileQTextStream_1885"></a>QFile+QTextStream</h4> 
<p>和单独使用 QFile 类读写文本文件相比，QTextStream 类提供了很多读写文件相关的方法，还可以设定写入到文件中的数据格式，比如对齐方式、写入数字是否带前缀等等。</p> 
<p>使用 QTextStream 类之前，程序中要先引入头文件。QTextStream 类提供了很多种构造函数，常用的是：</p> 
<blockquote> 
 <p>QTextStream(QIODevice *device)</p> 
</blockquote> 
<p>QIODevice 是 QFile 的父类，因此在构造 QTextStream 类的对象时，需要传递一个 QFile 类的对象。</p> 
<p>下表罗列了 QTextStream 类常用的一些方法：</p> 
<h4><a id="QTextStream_1895"></a>QTextStream常用方法</h4> 
<p>成员方法 <br> <img src="https://images2.imgbox.com/d2/8e/l3ifozDp_o.png" alt="在这里插入图片描述"><br> QTextStream 类重载了&gt;&gt;输入运算符和&gt;&gt;输出运算符，使读写文本文件变得更简单。例如，用 QTextStream 实现【实例一】的程序如下：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QString&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTextStream&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//创建 QFile 对象，同时指定要操作的文件</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//对文件进行写操作</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>WriteOnly<span class="token operator">|</span>QIODevice<span class="token operator">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    QTextStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//向文件中写入两行字符串</span>
    out <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>QString<span class="token punctuation">)</span><span class="token string">"qt学习\n"</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>QString<span class="token punctuation">)</span><span class="token string">"day14"</span><span class="token punctuation">;</span>
    <span class="token comment">//关闭文件</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//重新打开文件，对文件进行读操作</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>ReadOnly<span class="token operator">|</span>QIODevice<span class="token operator">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    QTextStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//一直读，直至读取失败</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        QString str<span class="token punctuation">;</span>
        <span class="token comment">//从文件中读取一个字符串</span>
        in <span class="token operator">&gt;&gt;</span> str<span class="token punctuation">;</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>和iostream类似，QTextStream 类提供了两种格式化输出的方法，一种是调用该类的成员方法，例如表 3 中的 setFieldAlignment()、setFieldWidth 等，另一种是调用 QTextStream 类提供的格式描述符，下表罗列了常用的一些：</p> 
<h4><a id="QTextStreamhttpsimgblogcsdnimgcn7df56bda63cd497081077deda3c9f31apngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBAQ2xheVRveQsize_20color_FFFFFFt_70g_sex_16_1938"></a>QTextStream常用格式描述符<img src="https://images2.imgbox.com/b7/90/Nc9VxVcf_o.png" alt="在这里插入图片描述"></h4> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QString&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTextStream&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>WriteOnly<span class="token operator">|</span>QIODevice<span class="token operator">::</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"文件打开失败"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    QTextStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将 10 的十六进制数写入文件</span>
    out <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">//设置每份数据占用 10 个字符的位置</span>
    out<span class="token punctuation">.</span><span class="token function">setFieldWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//以右对齐的方式写入 3.14</span>
    out <span class="token operator">&lt;&lt;</span> left <span class="token operator">&lt;&lt;</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
    <span class="token comment">//后续数据以左对齐的方式写入文件</span>
    out<span class="token punctuation">.</span><span class="token function">setFieldAlignment</span><span class="token punctuation">(</span>QTextStream<span class="token operator">::</span>AlignRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    out <span class="token operator">&lt;&lt;</span> <span class="token number">2.7</span><span class="token punctuation">;</span>
    <span class="token comment">//关闭文件</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>程序运行后，1.txt 存储的文本内容为：</p> 
<blockquote> 
 <p>a3.14 2.7</p> 
</blockquote> 
<h4><a id="QFileQDataStream_1970"></a>QFile+QDataStream</h4> 
<p>QDataStream 类的用法和 QTextStream 非常类似，最主要的区别在于，QDataStream 用于读写二进制文件。</p> 
<p>使用 QDataStream 类之前，程序中要引入头文件。创建 QDataStream 对象常用的构造函数为：</p> 
<blockquote> 
 <p>QDataStream::QDataStream(QIODevice *d)</p> 
</blockquote> 
<p>下表罗列了 QDataStream 类常用的成员方法：</p> 
<h4><a id="QDataStream_1978"></a>QDataStream常用方法</h4> 
<p><img src="https://images2.imgbox.com/ac/fb/jXO4ReU6_o.png" alt="在这里插入图片描述"><br> QDataStream 类也对&lt;&lt;和&gt;&gt;进行了重载，举个简单的例子，用 QDataStream 重新实现实例二：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDataStream&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//指定要写入文件的数据</span>
    qint32 nums<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"1.dat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建 QDataStream 对象</span>
    QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将 nums 数组中的整数逐个写入到二进制文件中</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      out <span class="token operator">&lt;&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//再次打开文件，读取文件中存储的二进制数据</span>
    file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//读取二进制文件中的数据</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//每次读取一个整数</span>
        qint32 num<span class="token punctuation">;</span>
        in <span class="token operator">&gt;&gt;</span> num<span class="token punctuation">;</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>输出结果为：</p> 
<blockquote> 
 <p>1<br> 2<br> 3<br> 4<br> 5</p> 
</blockquote> 
<h3><a id="Day15_Qt_2021"></a>Day15 Qt实现学生信息管理系统</h3> 
<p><img src="https://images2.imgbox.com/7c/77/uXBeRTg8_o.gif" alt="请添加图片描述"><br> 该学生信息管理系统将学生信息保存到文件中，用户借助界面上的表格、列表、按钮、输入框等控件，可以对学生信息进行查看、添加、删除、查找、更改、保存等操作。<br> 整个学生信息管理系统，需要设计两个界面，一个是上图所示的主界面，另一个是添加学生信息的界面，如下图所示：<br> <img src="https://images2.imgbox.com/ce/47/39KvGaNb_o.gif" alt="请添加图片描述"></p> 
<p>主界面的设计实现思路是：将 QHBoxLayout 作为主界面的布局工具，内部添加两个 QGroupBox 分组框，从而将整个界面一分为二：</p> 
<ul><li>左边的分组框中添加一个 QTableWidget 表格控件，如果想让表格控件的尺寸随着主窗口尺寸的变化而变化，可以将 QTableWidget 框架添加到某个布局工具中（比如 QHBoxLayout、QVBoxLayout 等）。</li><li>右边的分组框中，向 QVBoxLayout 先后添加一个 QListWidget 和 QGridLayout，从而将右侧分组框分为上下两部分。在 QGridLayout 中放置添加、删除、保存、退出按钮以及一个 QLineEdit 单行输入框。</li></ul> 
<p>所示的添加学生信息界面非常简单，只需要自定义一个继承自 QDialog 的窗口类，用 QVBoxLayout 作为该窗口的布局工具，并依次将 QFormLayout 和 QHBoxLayout 添加到 QVBoxLayout 中：</p> 
<ul><li>向 QFormLayout 中添加多个单行输入框；</li><li>向 QHBoxLayout 中添加两个按钮。</li></ul> 
<p><strong>学生信息管理系统的功能实现</strong><br> 整个学生信息管理系统，由以下几个文件构成：<img src="https://images2.imgbox.com/88/f8/3Q98yhTK_o.gif" alt="请添加图片描述"><br> 各个文件的作用分别是：</p> 
<ul><li>StuInfoFile.pro：项目文件，整个项目的实现并没有手动修改此文件中的内容；</li><li>main.cpp：整个项目的主程序文件，用来启动主界面；</li><li>MainWidget.h 和 MainWidget.cpp：自定义的窗口类（继承自 QWdiget），实现图 1 所示的主界面，并完成主界面中所有控件的功能；</li><li>EditStuMessBox.h 和 EditStuMessBox.cpp：自定义的窗口类（继承自 QDialog），实现图 2 所示的界面，并完成添加学生信息界面的功能；</li><li>Tool.h 和 Tool.cpp：包含一些公共的宏定义和函数；</li><li>image.qrc：为项目中的窗口添加 icon 图标。<br> 整个项目的实现过程，需要重点说明的有以下几点：<br> **<img src="https://images2.imgbox.com/09/41/jEthnd7y_o.gif" alt="请添加图片描述"><br> **<br> 对于关联在一起的信号函数和槽函数，有些场景中，需要调用 disconnect() 暂时取消它们之间的连接，后续再重新关联它们。</li></ul> 
<p>例如在本项目中，MainWidget.cpp 文件 flushTable() 函数的功能是更新 QTableWidget 表格控件中显示的学生信息。更新学生信息之前，需要调用 disconnect() 函数切断 cellChanged() 信号函数与其它所有槽函数的关联，然后才能正常更新数据，更新完成后再恢复 cellChanged() 与其它槽函数的关联。</p> 
<p>之所以更新数据前必须切断 cellChanged() 与其它槽函数的关联，是因为更新表格数据会不断地触发 cellChanged() 信号，最终会导致程序崩溃。<br> <strong>2、从文件中删除和更改某个学生信息</strong><br> 实现对学生信息的“增删查改”操作中，删除和修改学生信息的实现过程更复杂一些，本项目中采取的实现方法是：不断地从 student.txt 文件中读取学生信息，判断读取到的学生信息是否需要删除或修改，如果不需要，则直接写入 student_temp.txt 文件；反之如果需要删除，则直接将读取到的信息丢弃，如果需要修改，则将修改后的学生信息写入到 student_temp.txt 文件中。</p> 
<p>最终，student_temp.txt 文件中存储的就是最新的学生信息，我们可以将 student.txt 文件中的内容删除，然后将 student_temp.txt 文件中的内容拷贝到 student.txt 文件中，最后删除 student_temp.txt 文件；也可以直接删除 student.txt 文件，然后将 student_temp.txt 文件的名称改为 student.txt，本项目中采用的是第二种方法。<br> <strong>3、为项目添加图标</strong><br> image.qrc 文件是用来为项目添加图标的，本项目选用的是 C 语言中文网的 icon 图标，就存储在当前项目的文件夹内，如下图所示：<br> 首先，我们要在项目中新建一个后缀名为 qrc 的文件，鼠标移动到项目名上右击选择“添加新文件”，Qt Creator 会弹出如下对话框：<img src="https://images2.imgbox.com/5b/11/ANH0LIJc_o.gif" alt="请添加图片描述"></p> 
<p>选择 “Qt -&gt; Qt Rescource File”，可以创建一个 qrc 文件。在此基础上，在 image.qrc 上右击选择“添加现有文件”，选中项目中的 logo.ico 图标，就被成功地将图标添加到项目中。<br> 接下来，哪个界面需要添加图标，直接调用 setWindowIcon() 方法即可，例如：</p> 
<blockquote> 
 <p>setWindowIcon(QIcon(":/logo.ico"));</p> 
</blockquote> 
<p>icon 图标的存储路径可以通过右击项目中的 logo.ico 图标，选择 "Copy Path “:logo.ico” 即可获得。<br> 进度拖拉一下， 详情参考c语言中文网</p> 
<h3><a id="Qt_2075"></a>Qt打包程序详解</h3> 
<p>分享 Qt 程序（项目）的方式无非两种，要么直接分享程序的源代码，要么分享程序生成的可执行文件。</p> 
<p>和直接分享源码相比，大多数人会选择后者。但遗憾地是，Qt Creator 默认以动态链接的方式生成可执行文件，该文件无法独立运行，必须为其提供所需的动态链接库。也就是说，只分享 Qt Creator 生成的可执行文件是不行的，必须将运行所需的动态链接库一起分享，可执行文件才能在他人的电脑上正常运行。<br> <strong>为可执行文件添加图标</strong><br> 为可执行文件添加 icon 图标的方法很简单，将事先准备好的 icon 图标拷贝到程序对应的文件夹中，然后在 pro 工程文件内添加如下指令：</p> 
<pre><code class="prism language-cpp">RC_ICONS <span class="token operator">+=</span> logo<span class="token punctuation">.</span>ico
</code></pre> 
<p>其中，logo.ico 是图标文件的名称。重新对程序进行编译、链接，最终生成的就是带 icon 图标的可执行文件。</p> 
<p><strong>Qt程序打包</strong><br> 打包 Qt 程序，通常选用以 release 模式生成的可执行文件。和 debug 模式相比，release 模式生成的可执行文件体积更小，运行效率更快。</p> 
<p>Qt Creator 默认以 debug 模式生成可执行文件，如下图所示，可以手动修改 Qt Creator 以 release 模式生成可执行文件：<br> <img src="https://images2.imgbox.com/fa/06/kJ1ICyAc_o.gif" alt="请添加图片描述"><br> 选择“Release”之后，再次运行程序，生成的可执行文件可以在下图所示的路径中找到：</p> 
<p><img src="https://images2.imgbox.com/75/f1/4K7g0K77_o.gif" alt="请添加图片描述"><br> 找到可执行文件之后，将其拷贝到一个空的文件夹，比如笔者将其拷贝到了新建的 D:\StuInfoFile 文件夹中，如下图所示：<br> <img src="https://images2.imgbox.com/b6/bb/HCQo1Jjc_o.gif" alt="请添加图片描述"><br> 此时的 StuInfoFile.exe 是无法运行的，双击它系统会提示类似“找不到 xxx.dll”的错误信息。<br> 在“开始”中找到 Qt 命令行程序并打开，如下图所示：<br> <img src="https://images2.imgbox.com/ad/54/65pk5vVl_o.gif" alt="请添加图片描述"><br> 在命令行中，先执行 “cd D:\StuInfoFile” 命令进入 StuInfoFile 文件夹，然后再执行 “windeployqt StuInfoFile.exe” 命令。windeployqt 是 Qt 提供的 Windows 平台打包工具，它能找到 StuInfoFile.exe 可执行文件需要的所有动态链接库，并将它们拷贝到当前文件夹中。</p> 
<p>成功执行命令之后，StuInfoFile 文件夹内会增加很多文件夹和文件（如下图所示），这些都是 StuinfoFile.exe 执行所需要的。<br> <img src="https://images2.imgbox.com/8a/4a/XQrNQy4p_o.gif" alt="请添加图片描述"><br> 再次双击 StuInfoFile.exe，如果它可以成功执行，表明打包操作是成功的。我们可以直接将 StuInfoFile 文件夹分享给他人，只要是 Windows 平台，都可以直接点击运行 StuinfoFile.exe 文件。</p> 
<h3><a id="_2106"></a>问题总结</h3> 
<h4><a id="1_2109"></a>1）中文乱码</h4> 
<p>其中一个管用</p> 
<pre><code class="prism language-cpp"><span class="token class-name">QTextCodec</span><span class="token operator">::</span><span class="token function">setCodecForCStrings</span><span class="token punctuation">(</span><span class="token class-name">QTextCodec</span><span class="token operator">::</span><span class="token function">codecForName</span><span class="token punctuation">(</span><span class="token string">"GB2312"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QTextCodec</span><span class="token operator">::</span><span class="token function">setCodecForCStrings</span><span class="token punctuation">(</span><span class="token class-name">QTextCodec</span><span class="token operator">::</span><span class="token function">codecForName</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>资料来源：</strong><a href="http://c.biancheng.net/view/9431.html" rel="nofollow">c语言中文网</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1ee0e6c5b982353c30cf224a8972701e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">高斯消元法（Gauss Elimination）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1b6783e8402a90307f137de97a2cc6b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JDK、JRE、JVM区别与联系</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>