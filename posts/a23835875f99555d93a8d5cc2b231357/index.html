<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>influxdb基础---介绍和配置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="influxdb基础---介绍和配置" />
<meta property="og:description" content="#概述
InfluxDB是一个用Go语言编写的时间序列数据库，旨在处理高写入和查询负载。它是TICK堆栈的组成部分 。InfluxDB旨在用作涉及大量带时间戳数据的任何用例的后备存储，包括DevOps监控，应用程序指标，物联网传感器数据和实时分析。同时influxdb也是一个开源分布式时序、事件和指标数据库，无需外部依赖。类似的数据库有kdb、Graphite、es等
influxdb git
note：说明了新版本集群只有在云版或者企业版中才能使用（从0.12开始）就是要缴费，价格参考官网
其主要特色功能
基于时间序列，支持与时间有关的相关函数（如最大，最小，求和等）可度量性：你可以实时对大量数据进行计算基于事件：它支持任意的事件数据 InfluxDB的主要特点
专为时间序列数据编写的自定义高性能数据存储。TSM引擎允许高摄取速度和数据压缩完全写在Go。它编译成单个二进制文件，没有外部依赖项。简单，高性能的写入和查询HTTP API。插件支持其他数据提取协议，如Graphite，collectd和OpenTSDB。专为类似SQL的查询语言量身定制，可轻松查询聚合数据。支持min, max, sum, count, mean, median 等一系列函数，方便统计标签允许对系列进行索引以实现快速有效的查询。保留策略有效地自动使过时数据过期。连续查询自动计算聚合数据，以提高频繁查询的效率。无结构（无模式）：可以是任意数量的列可拓展的 集群版本要收费，单机版本免费（0.11是最后一个包含集群服务的开源版本：在influxdb 0.12发布的同时，也宣告了influxdb开源集群服务的结束，在官方文档0.12与0.11的差别中的clustering updates部分 011_vs_012）
内部集成的web控制台模块从1.3开始就被去掉了 web_admin_interface
#安装
安装最新版本 v1.6.2
以centos为例，其他的 参考官网https连接 或者 参考官网http连接
安装
RedHat &amp; CentOS SHA256: fbe635db1402b0427b32b7268d291093fc97ae888b1a68087dbc1dd39e0ddf67 wget https://dl.influxdata.com/influxdb/releases/influxdb-1.6.2.x86_64.rpm sudo yum localinstall influxdb-1.6.2.x86_64.rpm 配置文件默然在/etc/influxdb/influxdb.conf,默认占用端口是8088、8086
# Bind address to use for the RPC service for backup and restore.
# bind-address = “127.0.0.1:8088”
# The bind address used by the HTTP service." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a23835875f99555d93a8d5cc2b231357/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-11T14:35:28+08:00" />
<meta property="article:modified_time" content="2018-09-11T14:35:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">influxdb基础---介绍和配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>#概述<br> InfluxDB是一个用Go语言编写的时间序列数据库，旨在处理高写入和查询负载。它是TICK堆栈的组成部分 。InfluxDB旨在用作涉及大量带时间戳数据的任何用例的后备存储，包括DevOps监控，应用程序指标，物联网传感器数据和实时分析。同时influxdb也是一个开源分布式时序、事件和指标数据库，无需外部依赖。类似的数据库有kdb、Graphite、es等</p> 
<p><a href="https://github.com/influxdata/influxdb">influxdb git</a></p> 
<p><img src="https://images2.imgbox.com/cb/a8/Tff2RkSp_o.png" alt="这里写图片描述"></p> 
<blockquote> 
 <p>note：说明了新版本集群只有在云版或者企业版中才能使用（从0.12开始）就是要缴费，价格参考官网<br> <img src="https://images2.imgbox.com/cb/3c/EDoGBKb2_o.png" alt="这里写图片描述"></p> 
</blockquote> 
<p>其主要特色功能</p> 
<ul><li>基于时间序列，支持与时间有关的相关函数（如最大，最小，求和等）</li><li>可度量性：你可以实时对大量数据进行计算</li><li>基于事件：它支持任意的事件数据</li></ul> 
<p>InfluxDB的主要特点</p> 
<ul><li>专为时间序列数据编写的自定义高性能数据存储。TSM引擎允许高摄取速度和数据压缩</li><li>完全写在Go。它编译成单个二进制文件，没有外部依赖项。</li><li>简单，高性能的写入和查询HTTP API。</li><li>插件支持其他数据提取协议，如Graphite，collectd和OpenTSDB。</li><li>专为类似SQL的查询语言量身定制，可轻松查询聚合数据。支持min, max, sum, count, mean, median 等一系列函数，方便统计</li><li>标签允许对系列进行索引以实现快速有效的查询。</li><li>保留策略有效地自动使过时数据过期。</li><li>连续查询自动计算聚合数据，以提高频繁查询的效率。</li><li>无结构（无模式）：可以是任意数量的列</li><li>可拓展的</li></ul> 
<blockquote> 
 <p>集群版本要收费，单机版本免费（0.11是最后一个包含集群服务的开源版本：在influxdb 0.12发布的同时，也宣告了influxdb开源集群服务的结束，在官方文档0.12与0.11的差别中的clustering updates部分 <a href="http://docs.influxdata.com/influxdb/v0.12/concepts/011_vs_012#clustering-updates/" rel="nofollow">011_vs_012</a>）<br> 内部集成的web控制台模块从1.3开始就被去掉了 <a href="http://docs.influxdata.com/influxdb/v1.3/tools/web_admin/" rel="nofollow">web_admin_interface</a></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/51/45/BEXoD0Ts_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/3f/2b/yW5XSZUQ_o.png" alt="这里写图片描述"></p> 
<p>#安装<br> 安装最新版本 v1.6.2</p> 
<p>以centos为例，其他的 <a href="https://docs.influxdata.com/influxdb/v1.6/introduction/installation/" rel="nofollow">参考官网https连接</a> 或者 <a href="http://docs.influxdata.com/influxdb/v1.6/introduction/installation/" rel="nofollow">参考官网http连接</a></p> 
<ul><li>安装<br> RedHat &amp; CentOS SHA256: fbe635db1402b0427b32b7268d291093fc97ae888b1a68087dbc1dd39e0ddf67</li></ul> 
<pre><code>wget https://dl.influxdata.com/influxdb/releases/influxdb-1.6.2.x86_64.rpm
sudo yum localinstall influxdb-1.6.2.x86_64.rpm
</code></pre> 
<blockquote> 
 <p>配置文件默然在/etc/influxdb/influxdb.conf,默认占用端口是8088、8086<br>  # Bind address to use for the RPC service for backup and restore.<br>  # bind-address = “127.0.0.1:8088”<br>  # The bind address used by the HTTP service.<br>  # bind-address = “:8086”</p> 
</blockquote> 
<ul><li>启动命令</li></ul> 
<pre><code>service influxdb start
</code></pre> 
<blockquote> 
 <p>非服务方式启动 influxd</p> 
</blockquote> 
<ul><li>关闭命令</li></ul> 
<pre><code>service influxdb stop
</code></pre> 
<p>#相关目录</p> 
<table><thead><tr><th align="left">目录</th><th align="left">文件</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left">/usr/bin</td><td align="left"></td><td align="left"></td></tr><tr><td align="left"></td><td align="left">influxd</td><td align="left">influxdb服务器</td></tr><tr><td align="left"></td><td align="left">influx</td><td align="left">influxdb命令行客户端</td></tr><tr><td align="left"></td><td align="left">influx_inspect</td><td align="left">查看工具</td></tr><tr><td align="left"></td><td align="left">influx_stress</td><td align="left">压力测试工具</td></tr><tr><td align="left"></td><td align="left">influx_tsm</td><td align="left">数据库转换工具（将数据库从b1或bz1格式转换为tsm1格式）</td></tr><tr><td align="left">/var/lib/influxdb/</td><td align="left"></td><td align="left"></td></tr><tr><td align="left"></td><td align="left">data</td><td align="left">存放最终存储的数据，文件以.tsm结尾</td></tr><tr><td align="left"></td><td align="left">meta</td><td align="left">存放数据库元数据</td></tr><tr><td align="left"></td><td align="left">wal</td><td align="left">存放预写日志文件</td></tr><tr><td align="left">/var/log/influxdb</td><td align="left"></td><td align="left"></td></tr><tr><td align="left"></td><td align="left">influxd.log</td><td align="left">日志文件</td></tr><tr><td align="left">/etc/influxdb</td><td align="left"></td><td align="left"></td></tr><tr><td align="left"></td><td align="left">influxdb.conf</td><td align="left">配置文件</td></tr></tbody></table> 
<p>#相关配置<br> 配置文件默认位置/etc/influxdb/influxdb.conf,从上到下</p> 
<pre><code># reporting-disabled = false	# 该选项用于上报influxdb的使用信息给InfluxData公司，默认值为false
# bind-address = "127.0.0.1:8088"	# 备份恢复时使用，默认值为8088
### [meta]
[meta]
  dir = "/var/lib/influxdb/meta"  # meta数据存放目录
  # retention-autocreate = true  # 用于控制默认存储策略，数据库创建时，会自动生成autogen的存储策略，默认值：true
  # logging-enabled = true  # 是否开启meta日志，默认值：true
### [data]
[data]
  dir = "/var/lib/influxdb/data"  # 最终数据（TSM文件）存储目录
  wal-dir = "/var/lib/influxdb/wal"  # 预写日志存储目录
  # wal-fsync-delay = "0s" #在同步写入之前等待的总时间，默认0s
  # index-version = "inmem" #用于新碎片的切分索引的类型。
  # trace-logging-enabled = false #跟踪日志记录在tsm引擎周围提供了更详细的输出
  # query-log-enabled = true  # 是否开启tsm引擎查询日志，默认值： true
  # Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).
  # cache-max-memory-size = "1g"  # 用于限定shard最大值，大于该值时会拒绝写入，默认值：1000MB，单位：byte
  # Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).
  # cache-snapshot-memory-size = "25m"  # 用于设置快照大小，大于该值时数据会刷新到tsm文件，默认值：25MB，单位：byte
  # cache-snapshot-write-cold-duration = "10m"  # tsm引擎 snapshot写盘延迟，默认值：10Minute
  # compact-full-write-cold-duration = "4h"  # tsm文件在压缩前可以存储的最大时间，默认值：4Hour
  # max-concurrent-compactions = 0 #压缩并发的最大数量，默认设置为0表示runtime.GOMAXPROCS(0)*50% ，否则以设置的非零值为准
  # Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).
  # max-index-log-file-size = "1m" #限制索引日志文件大小
  # max-series-per-database = 1000000  # 限制数据库的级数，该值为0时取消限制，默认值：1000000
  # max-values-per-tag = 100000  # 一个tag最大的value数，0取消限制，默认值：100000
  # tsm-use-madv-willneed = false #如果为true，mmap的建议值MADV_WILLNEED会被提供给内核
### [coordinator]
[coordinator]
  # write-timeout = "10s"  # 写操作超时时间，默认值： 10s
  # max-concurrent-queries = 0  # 最大并发查询数，0无限制，默认值： 0
  # query-timeout = "0s"  # 查询操作超时时间，0无限制，默认值：0s
  # log-queries-after = "0s"  # 慢查询超时时间，0无限制，默认值：0s
  # max-select-point = 0  # SELECT语句可以处理的最大点数（points），0无限制，默认值：0
  # max-select-series = 0  # SELECT语句可以处理的最大级数（series），0无限制，默认值：0
  # max-select-buckets = 0  # SELECT语句可以处理的最大"GROUP BY time()"的时间周期，0无限制，默认值：0
### [retention]
[retention]
  # enabled = true  # 是否启用该模块，默认值 ： true
  # check-interval = "30m" # 检查时间间隔，默认值 ："30m"
### [shard-precreation]
[shard-precreation]
  # enabled = true # 是否启用该模块，默认值 ： true
  # check-interval = "10m"  # 检查时间间隔，默认值 ："10m"
  # advance-period = "30m"  # 预创建分区的最大提前时间，默认值 ："30m"
[monitor]
  # store-enabled = true # 是否启用该模块，默认值 ：true
  # store-database = "_internal" # 默认数据库："_internal"
  # store-interval = "10s" # 统计间隔，默认值："10s"
### [http]
[http]
  # enabled = true # 是否启用该模块，默认值 ：true
  # bind-address = ":8086" # 绑定地址，默认值 ：":8086"
  # auth-enabled = false # 是否开启认证，默认值：false
  # realm = "InfluxDB" # 配置JWT realm，默认值: "InfluxDB"
  # log-enabled = true  # 是否开启日志，默认值：true
  # suppress-write-log = false #在启用日志时是否抑制HTTP写请求日志
  # access-log-path = "" #当启用HTTP请求日志时，该选项指定了路径。如influxd不能访问指定的路径，它将记录一个错误并将请求日志写入stderr
  # write-tracing = false  # 是否开启写操作日志，如果置成true，每一次写操作都会打日志，默认值：false
  # pprof-enabled = true  # 是否开启pprof，默认值：true
  # debug-pprof-enabled = false  # 是否开启pprof，默认值：true
  # https-enabled = false # 是否开启https ，默认值 ：false
  # https-certificate = "/etc/ssl/influxdb.pem" # 设置https证书路径，默认值："/etc/ssl/influxdb.pem"
  # https-private-key = ""# 设置https私钥，无默认值
  # shared-secret = "" # 用于JWT签名的共享密钥，无默认值
  # max-row-limit = 0 # 配置查询返回最大行数，0无限制，默认值：0
  # max-connection-limit = 0  # 配置最大连接数，0无限制，默认值：0
  # unix-socket-enabled = false  # 是否使用unix-socket，默认值：false
  # bind-socket = "/var/run/influxdb.sock" # unix-socket路径，默认值："/var/run/influxdb.sock"
  # max-body-size = 25000000 #客户端请求主体的最大值，以字节为单位。0无限制，默认值0
  # max-concurrent-write-limit = 0 #并发处理的最大写入次数,0无限制，默认值0
  # max-enqueued-write-limit = 0 #排队等待处理的最大数量,0无限制，默认值0
  # enqueued-write-timeout = 0 #在队列中等待处理的最长时间，0或者setting max-concurrent-write-limit=0无限制，默认值0
### [ifql]
[ifql]
  # enabled = true# 是否启用该模块，默认值 ：true
  # log-enabled = true# 是否开启日志，默认值：true
  # bind-address = ":8082" #ifql RPC服务使用的绑定地址默认是8082
### [logging]
[logging]
  # format = "auto" #日志格式，默认是自动
  # level = "info" #日志级别默认info
  # suppress-logo = false #当程序启动时，会抑制打印出来的logo输出
### [subscriber]
[subscriber]
  # enabled = true	# 是否启用该模块，默认值 ：true
  # http-timeout = "30s"	# http超时时间，默认值："30s"
  # insecure-skip-verify = false	# 是否允许不安全的证书
  # ca-certs = ""	# 设置CA证书
  # write-concurrency = 40	#设置并发数目，默认值：40
  # write-buffer-size = 1000 	# 设置buffer大小，默认值：1000
### [[graphite]]
[[graphite]]
  # enabled = false# 是否启用该模块，默认值 ：false
  # database = "graphite"# 数据库名称，默认值："graphite"
  # retention-policy = "" # 存储策略，无默认值
  # bind-address = ":2003"# 绑定地址，默认值：":2003"
  # protocol = "tcp"# 协议，默认值："tcp"
  # consistency-level = "one" # 一致性级别，默认值："one
  # batch-size = 5000 # 批量size，默认值：5000
  # batch-pending = 10# 配置在内存中等待的batch数，默认值：10
  # batch-timeout = "1s" # 超时时间，默认值："1s"
  # udp-read-buffer = 0# udp读取buffer的大小，0表示使用操作系统提供的值，如果超过操作系统的默认配置则会出错。 该配置的默认值：0
  # separator = "." # 多个measurement间的连接符，默认值： "."
  # tags = ["region=us-east", "zone=1c"] #将被添加到所有指标的默认标签。这些可以在模板级别上覆盖或者从指标中提取的标签
  # templates = [  
  #   "*.app env.service.resource.measurement",
  #   # Default template
  #   "server.*",
  # ]
### [collectd]
[[collectd]]
  # enabled = false# 是否启用该模块，默认值 ：false
  # bind-address = ":25826"  # 绑定地址，默认值： ":25826"
  # database = "collectd"# 数据库名称，默认值："collectd"
  # retention-policy = "" # 存储策略，无默认值
  # typesdb = "/usr/local/share/collectd" # 路径，默认值："/usr/share/collectd/types.db"
  # security-level = "none" #安全级别
  # auth-file = "/etc/collectd/auth_file"
  # batch-size = 5000 #从缓存中批量获取数据的量，默认值：5000
  # batch-pending = 10 #可能在内存中等待的批次的数量，默认值：10
  # batch-timeout = "10s" #即使没有达到缓冲区的限制，至少要刷新一下，默认值："10s"
  # read-buffer = 0 #udp读取buffer的大小，0表示使用操作系统提供的值，如果超过操作系统的默认配置则会出错。默认值：0
  # parse-multivalue-plugin = "split" #两种处理方式split和join，split会分到不同的表中，join会将记录作为一个单独的记录处理。默认是split
### [opentsdb]
[[opentsdb]]
  # enabled = false# 是否启用该模块，默认值 ：false
  # bind-address = ":4242"# 绑定地址，默认值：":4242"
  # database = "opentsdb"  # 默认数据库："opentsdb"
  # retention-policy = ""# 存储策略，无默认值
  # consistency-level = "one" # 一致性级别，默认值："one"
  # tls-enabled = false # 是否开启tls，默认值：false
  # certificate= "/etc/ssl/influxdb.pem" # 证书路径，默认值："/etc/ssl/influxdb.pem"
  # log-point-errors = true# 出错时是否记录日志，默认值：true
  # batch-size = 1000 #从缓存中批量获取数据的量，默认值：1000
  # batch-pending = 5 #可能在内存中等待的批次的数量，默认值：5
  # batch-timeout = "1s" #即使没有达到缓冲区的限制，至少要刷新一下，默认值："1s"
### [[udp]]
[[udp]]
  # enabled = false# 是否启用该模块，默认值 ：false
  # bind-address = ":8089" # 绑定地址，默认值：":8089"
  # database = "udp"# 数据库名称，默认值："udp"
  # retention-policy = "" # 存储策略，无默认值
  # precision = "" #接收点的时间点的精度("" or "n", "u", "ms", "s", "m", "h")
  # batch-size = 5000#从缓存中批量获取数据的量，默认值：5000 
  # batch-pending = 10 #可能在内存中等待的批次的数量，默认值：10
  # batch-timeout = "1s" #即使没有达到缓冲区的限制，至少要刷新一下，默认值："1s"
  # read-buffer = 0# udp读取buffer的大小，0表示使用操作系统提供的值，如果超过操作系统的默认配置则会出错。 该配置的默认值：0　
### [continuous_queries]
[continuous_queries]
  # enabled = true# 是否启用该模块，默认值 ：true
  # log-enabled = true# 是否开启日志，默认值：true
  # query-stats-enabled = false #控制查询是否被记录到自我监控数据存储中
  # run-interval = "1s" # 时间间隔，默认值："1s"
### [tls]
[tls]
  # ciphers = [
  #   "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",
  #   "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
  # ]
  # min-version = "tls1.2"
  # max-version = "tls1.2"
</code></pre> 
<p>用法下一节说~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2620960c4e0405887007c3216aacf4b8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java web</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a625e6dbd0d1e8cec478c9e7c248c53/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java第五章练习题（继承）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>