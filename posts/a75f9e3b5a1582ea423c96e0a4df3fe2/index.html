<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>2.IHRM人力资源 - 登录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="2.IHRM人力资源 - 登录" />
<meta property="og:description" content="一、登录页结构与表单开发 我们要实现的登录界面
目前的登录界面
1.1 登录页结构 复制下面的代码到views/login/index.vue页面下
&lt;template&gt; &lt;div class=&#34;login-container&#34;&gt; &lt;div class=&#34;logo&#34;/&gt; &lt;div class=&#34;form&#34;&gt; &lt;h1&gt;登录&lt;/h1&gt; &lt;el-card shadow=&#34;never&#34; class=&#34;login-card&#34;&gt; &lt;!--登录表单--&gt; &lt;/el-card&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;Login&#39; } &lt;/script&gt; &lt;style lang=&#34;scss&#34;&gt; .login-container { display: flex; align-items: stretch; height: 100vh; .logo { flex: 3; background: rgba(38, 72, 176) url(../../assets/common/login_back.png) no-repeat center / cover; border-top-right-radius: 60px; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; padding: 0 100px; .icon { background: url(." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a75f9e3b5a1582ea423c96e0a4df3fe2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-15T11:04:58+08:00" />
<meta property="article:modified_time" content="2024-01-15T11:04:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">2.IHRM人力资源 - 登录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一、登录页结构与表单开发</h2> 
<p>我们要实现的登录界面</p> 
<p><img src="https://images2.imgbox.com/ce/88/798jTUJO_o.png" alt="image-20240109112142005"></p> 
<p>目前的登录界面</p> 
<p><img src="https://images2.imgbox.com/9f/b2/9rDDiUgr_o.png" alt="image-20240109112337473"></p> 
<h3><a id="11__12"></a>1.1 登录页结构</h3> 
<p>复制下面的代码到views/login/index.vue页面下</p> 
<p><img src="https://images2.imgbox.com/32/8c/wtBkywfK_o.png" alt="image-20240109113326105"></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-container"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"form"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>card shadow<span class="token operator">=</span><span class="token string">"never"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-card"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>登录表单<span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Login'</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span>login<span class="token operator">-</span>container <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> stretch<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 100vh<span class="token punctuation">;</span>

  <span class="token punctuation">.</span>logo <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">176</span><span class="token punctuation">)</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>assets<span class="token operator">/</span>common<span class="token operator">/</span>login_back<span class="token punctuation">.</span>png<span class="token punctuation">)</span> no<span class="token operator">-</span>repeat center <span class="token operator">/</span> cover<span class="token punctuation">;</span>
    border<span class="token operator">-</span>top<span class="token operator">-</span>right<span class="token operator">-</span>radius<span class="token operator">:</span> 60px<span class="token punctuation">;</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
    flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
    align<span class="token operator">-</span>items<span class="token operator">:</span> flex<span class="token operator">-</span>end<span class="token punctuation">;</span>
    justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span> 100px<span class="token punctuation">;</span>

    <span class="token punctuation">.</span>icon <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>assets<span class="token operator">/</span>common<span class="token operator">/</span>logo<span class="token punctuation">.</span>png<span class="token punctuation">)</span> no<span class="token operator">-</span>repeat 70px center <span class="token operator">/</span>
        contain<span class="token punctuation">;</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> 300px<span class="token punctuation">;</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
      margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 50px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    p <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span>
      font<span class="token operator">-</span>size<span class="token operator">:</span> 18px<span class="token punctuation">;</span>
      margin<span class="token operator">-</span>top<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> 300px<span class="token punctuation">;</span>
      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">.</span>form <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
    flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
    justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
    padding<span class="token operator">-</span>left<span class="token operator">:</span> 176px<span class="token punctuation">;</span>

    <span class="token punctuation">.</span>el<span class="token operator">-</span>card <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">border</span><span class="token operator">:</span> none<span class="token punctuation">;</span>
      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    h1 <span class="token punctuation">{<!-- --></span>
      padding<span class="token operator">-</span>left<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
      font<span class="token operator">-</span>size<span class="token operator">:</span> 24px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>el<span class="token operator">-</span>input <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> 350px<span class="token punctuation">;</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> 44px<span class="token punctuation">;</span>

      <span class="token punctuation">.</span>el<span class="token operator">-</span>input__inner <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">background</span><span class="token operator">:</span> #f4f5fb<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>el<span class="token operator">-</span>checkbox <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">606266</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>保存并看一下页面结构，并没有登录表单，然后下面写一下登录表单</p> 
<p><img src="https://images2.imgbox.com/6d/e5/jWIwVNMD_o.png" alt="image-20240109113238985"></p> 
<h3><a id="12__108"></a>1.2 登录表单结构</h3> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-container"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"form"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>card shadow<span class="token operator">=</span><span class="token string">"never"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-card"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>登录表单<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>el<span class="token operator">-</span>form element<span class="token operator">-</span>ui的表单<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item 表单中的一项<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>el<span class="token operator">-</span>input 输入框<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input placeholder<span class="token operator">=</span><span class="token string">"请输入手机号"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input placeholder<span class="token operator">=</span><span class="token string">"请输入密码"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>勾选框<span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>用户平台使用协议<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>登录按钮
          设置一下宽度 style<span class="token operator">=</span><span class="token string">"width: 350px"</span>
          <span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> style<span class="token operator">=</span><span class="token string">"width: 350px"</span><span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Login'</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span>login<span class="token operator">-</span>container <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> stretch<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 100vh<span class="token punctuation">;</span>

  <span class="token punctuation">.</span>logo <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">176</span><span class="token punctuation">)</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>assets<span class="token operator">/</span>common<span class="token operator">/</span>login_back<span class="token punctuation">.</span>png<span class="token punctuation">)</span> no<span class="token operator">-</span>repeat center <span class="token operator">/</span> cover<span class="token punctuation">;</span>
    border<span class="token operator">-</span>top<span class="token operator">-</span>right<span class="token operator">-</span>radius<span class="token operator">:</span> 60px<span class="token punctuation">;</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
    flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
    align<span class="token operator">-</span>items<span class="token operator">:</span> flex<span class="token operator">-</span>end<span class="token punctuation">;</span>
    justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span> 100px<span class="token punctuation">;</span>

    <span class="token punctuation">.</span>icon <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>assets<span class="token operator">/</span>common<span class="token operator">/</span>logo<span class="token punctuation">.</span>png<span class="token punctuation">)</span> no<span class="token operator">-</span>repeat 70px center <span class="token operator">/</span>
        contain<span class="token punctuation">;</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> 300px<span class="token punctuation">;</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
      margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 50px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    p <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span>
      font<span class="token operator">-</span>size<span class="token operator">:</span> 18px<span class="token punctuation">;</span>
      margin<span class="token operator">-</span>top<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> 300px<span class="token punctuation">;</span>
      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">.</span>form <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
    flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
    justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
    padding<span class="token operator">-</span>left<span class="token operator">:</span> 176px<span class="token punctuation">;</span>

    <span class="token punctuation">.</span>el<span class="token operator">-</span>card <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">border</span><span class="token operator">:</span> none<span class="token punctuation">;</span>
      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    h1 <span class="token punctuation">{<!-- --></span>
      padding<span class="token operator">-</span>left<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
      font<span class="token operator">-</span>size<span class="token operator">:</span> 24px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>el<span class="token operator">-</span>input <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> 350px<span class="token punctuation">;</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> 44px<span class="token punctuation">;</span>

      <span class="token punctuation">.</span>el<span class="token operator">-</span>input__inner <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">background</span><span class="token operator">:</span> #f4f5fb<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>el<span class="token operator">-</span>checkbox <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">606266</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="_218"></a>二、登录</h2> 
<p>我们使用了很多Element-ui的组件</p> 
<p>官网：<a href="https://element.eleme.cn/#/zh-CN/component/installation" rel="nofollow">Element-ui组件官网</a></p> 
<p>接下来我们的登录流程将会按照下图进行设计</p> 
<p><img src="https://images2.imgbox.com/d2/e7/jHz9R83s_o.png" alt=""></p> 
<h3><a id="21__228"></a>2.1 登录表单校验</h3> 
<p>比如校验手机号的格式是否正确，密码是否符合位数</p> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_51351637/article/details/126764326">13.Vue - ref属性、props配置、mixin混入、插件、scoped样式</a></p> 
</blockquote> 
<blockquote> 
 <p>在element-ui中其实就是如下所示的组件，进行表单验证</p> 
 <p>我们可以通过<strong>el-form标签的ref属性</strong>获取form表单的整体实例，进而进行整体的校验</p> 
 <p><strong>el-form标签中的:rules</strong>="rulesFrom"属性其实就是我们的校验规则，并且校验规则都会写在rulesFrom里</p> 
 <p><strong>el-form标签中的:model</strong>="ruleForm"属性其实就是我们所绑定的数据从ruleForm数据结构中来</p> 
 <p><strong>el-form-item标签汇总的prop="test1"属性，并且test1字段是ruleForm数据结构中的一个属性</strong></p> 
 <p><strong>el-input标签做一个v-model双向绑定，这样的话就能做回显了</strong></p> 
 <p><img src="https://images2.imgbox.com/ca/7d/1moQHwwt_o.png" alt="image-20240112112319251"></p> 
</blockquote> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-container"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"form"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>card shadow<span class="token operator">=</span><span class="token string">"never"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-card"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>登录表单<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>el<span class="token operator">-</span>form element<span class="token operator">-</span>ui的表单<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item 表单中的一项<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>el<span class="token operator">-</span>input 输入框<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form ref<span class="token operator">=</span><span class="token string">"loginFormRef"</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"loginFromModel"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"loginFromRules"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"mobile"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input placeholder<span class="token operator">=</span><span class="token string">"请输入手机号"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"loginFromModel.mobile"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> show<span class="token operator">-</span>password是el<span class="token operator">-</span>input属性，表示不展示input框中信息<span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input show<span class="token operator">-</span>password placeholder<span class="token operator">=</span><span class="token string">"请输入密码"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"loginFromModel.password"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>勾选框<span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"isAgree"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"loginFromModel.isAgree"</span><span class="token operator">&gt;</span>用户平台使用协议<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>登录按钮
          设置一下宽度 style<span class="token operator">=</span><span class="token string">"width: 350px"</span>
          <span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"isAgree"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"login"</span> type<span class="token operator">=</span><span class="token string">"primary"</span> style<span class="token operator">=</span><span class="token string">"width: 350px"</span><span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Login'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 登录表单数据结构</span>
      <span class="token literal-property property">loginFromModel</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">isAgree</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 登录表单规则,数据字段和loginFromModel一样，只不过值是数组的模式</span>
      <span class="token comment">// 数组中的每一个对象值就是一个校验规则</span>
      <span class="token literal-property property">loginFromRules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 手机号校验规则</span>
        <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">/**
           *  required: true 必填
           *  trigger触发模式
           *    change表示只要我们不断的写就会触发校验
           *    blur 失去焦点才会触发校验
           */</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入手机号信息'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 正则表达式检验规则</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3-9]\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'手机号输入格式不合规范'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入密码'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 密码长度校验规则</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'密码长度在 6 到 16 个字符'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 说明：required命令检测不了false，只能检测null/undefine/空字符串
         *  所以我们要自定义校验方式，其实是自定义校验方式是一个函数
         *    需要三个参数rule,value,callback
         *    rule:校验规则
         *    value:要校验的值
         *    callback: 一个必须要执行的函数（无论校验成功还是失败都要执行）
         *              如果校验成功的话直接执行callback()函数，如果失败的话执行callback(new Error(错误信息))
         */</span>
        <span class="token literal-property property">isAgree</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              value <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'您必须勾选用户平台使用协议'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">/**
       * 通过表单的ref属性获取表单实例对象，并且执行此表单实例对象的validate方法校验一下
       * validate方法可以传入一个回调函数，并且会传入一个参数，我们可以命名为isOK
       */</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>loginFormRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">isOK</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isOK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 此时isOK为false，表示校验没有通过</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'校验没有通过，请检查您的登录信息'</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 此时isOK为true，表示校验通过了</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>效果展示</strong></p> 
<p><img src="https://images2.imgbox.com/62/3d/C4t2avOE_o.png" alt="image-20240113133756705"></p> 
<h3><a id="22_Vuex__365"></a>2.2 Vuex 用户模块</h3> 
<p>我们在登录表单校验之后并不是直接调用请求到后台验证用户名和密码是否正确</p> 
<p>而是前端又调用了VuexAction，之后会再去调用登录接口并返回一个token，我们要把此token进行缓存并使用vuex进行共享，共享之后相当于我们的登录成功了，然后跳转到主页</p> 
<p><img src="https://images2.imgbox.com/9b/ba/oPgNSuuQ_o.png" alt="image-20240113134425480"></p> 
<blockquote> 
 <p>使用了vuex表示一定有数据要去做共享，在这里我们要<strong>共享用户的token，之后在每个页面我们都能拿到用户的token了</strong></p> 
 <p><a href="https://blog.csdn.net/weixin_51351637/article/details/126915799">Vuex基础知识</a></p> 
</blockquote> 
<p>vuex中的用户模块如下图所示：</p> 
<p><img src="https://images2.imgbox.com/ed/d0/CE23QbtW_o.png" alt="image-20240113134628710"></p> 
<pre><code class="prism language-java"><span class="token comment">// State理解为数据源,像极了我们之前学的data,用来存放数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  token<span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token comment">// Mutations类似java中的数据层，只对数据进行操作，不对业务操作（比如数据加减乘除）</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 修改token</span>
  <span class="token function">setToken</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    state<span class="token punctuation">.</span>token <span class="token operator">=</span> token
    <span class="token comment">// console.log(state.token)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * actions似java中的业务逻辑层，对逻辑操作，然后向mutations发送数据，在这个业务逻辑中也可以互相调用
 * actions可以做异步操作
 */</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 参数1： context上下文对象，有commit和dispatch方法
   * 参数2：我们要传入的参数
   */</span>
  <span class="token function">login</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token comment">// TODO 调用登录接口(代办)</span>
    <span class="token comment">// 假设登录成功之后就会返回一个token，我们要将此token实现共享就要存储在state中</span>
    <span class="token comment">// vuex中想修改state中数据必须通过mutations，不能直接修改state中属性</span>
    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span>'setToken<span class="token char">', '</span><span class="token number">123456</span>'<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 对三个变量进行一个默认的导出</span>
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 开启命名空间。表示之后调用state/mutations/actions时必须带上模块名称</span>
  namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  state<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  actions
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>但是现在有一个问题，当我们刷新页面之后，state.token的值会消失，所以我们要实现vuex持久化</strong></p> 
<h3><a id="23_vuex__429"></a>2.3 vuex 数据持久化</h3> 
<p>这样就算我们给state.token赋值之后，但刷新页面后仍然是null，所以此时永远不能取到我们缓存的token值</p> 
<pre><code class="prism language-java"><span class="token comment">// State理解为数据源,像极了我们之前学的data,用来存放数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  token<span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>所以我们要实现vuex的数据持久化</strong>，我们要从缓存中读取state.token的初始值</p> 
<p><strong>编写一个工具类</strong></p> 
<p><img src="https://images2.imgbox.com/36/3d/1SKF1SAG_o.png" alt="image-20240113145501980"></p> 
<pre><code class="prism language-java"><span class="token comment">// 我们使用了一个cookie的包，其实和localStorage都可以实现前端缓存数据</span>
<span class="token keyword">import</span> <span class="token class-name">Cookies</span> from 'js<span class="token operator">-</span>cookie'

<span class="token keyword">const</span> <span class="token class-name">TokenKey</span> <span class="token operator">=</span> 'vue_admin_template_token'

<span class="token comment">// 按需导出了三个函数    </span>
    
<span class="token comment">// 获取token</span>
export function <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token class-name">Cookies</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">TokenKey</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 设置token</span>
export function <span class="token function">setToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token class-name">Cookies</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">TokenKey</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移除token</span>
export function <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token class-name">Cookies</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">TokenKey</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>在vuex用户模块user.js中进行引用</strong></p> 
<pre><code class="prism language-java"><span class="token comment">// @符号表示根路径</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> getToken<span class="token punctuation">,</span> setToken<span class="token punctuation">,</span> removeToken <span class="token punctuation">}</span> from '@<span class="token operator">/</span>utils<span class="token operator">/</span>auth'

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 这样就算我们给state.token赋值之后，但刷新页面后仍然是null，所以此时永远不能取到我们缓存的token值</span>
  <span class="token comment">// token: null</span>
  <span class="token comment">// 从缓存中读取初始值</span>
  token<span class="token operator">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 修改token</span>
  <span class="token function">setToken</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    state<span class="token punctuation">.</span>token <span class="token operator">=</span> token
    <span class="token comment">// console.log(state.token)</span>
    <span class="token comment">// 将token值同步到缓存</span>
    <span class="token function">setToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 删除vuex的token</span>
    state<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token comment">// 删除缓存中的token</span>
    <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>我们要在登录组件中进行调用vuex</strong></p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 通过表单的ref属性获取表单实例对象，并且执行此表单实例对象的validate方法校验一下
     * validate方法可以传入一个回调函数，并且会传入一个参数，我们可以命名为isOK
     */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>loginFormRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">isOK</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isOK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 此时isOK为false，表示校验没有通过</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'校验没有通过，请检查您的登录信息'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">/**
       * 此时isOK为true，表示校验通过了,调用vuex中的用户模块
       * 此时因为我们开启了命名空间，传参时要带上模块名，即模块名/actions中方法名
       * dispatch方法是调用vuex中的actions
       */</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/login'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginFromModel<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>效果如下图所示</p> 
<p><img src="https://images2.imgbox.com/d3/b0/cWCls6iS_o.png" alt="image-20240113150404419"></p> 
<h3><a id="24__534"></a>2.4 登录联调</h3> 
<p><img src="https://images2.imgbox.com/22/42/OyemLZto_o.png" alt="image-20240113200709958"></p> 
<h4><a id="241__540"></a>2.4.1 请求模块封装</h4> 
<p><strong>编写登录接口</strong></p> 
<p><img src="https://images2.imgbox.com/a9/d7/2ZdjbJtX_o.png" alt="image-20240113200838635"></p> 
<pre><code class="prism language-java"><span class="token comment">// 引入封装的axios工具</span>
<span class="token keyword">import</span> <span class="token namespace">request</span> from '@<span class="token operator">/</span>utils<span class="token operator">/</span>request'

<span class="token comment">// 按需暴露一个登录方法</span>
export function <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">Data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// request发送登录请求，会得到一个promise结果并将其返回</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 请求地址</span>
    url<span class="token operator">:</span> '<span class="token operator">/</span>sys<span class="token operator">/</span>login'<span class="token punctuation">,</span>
    <span class="token comment">// 请求方式</span>
    method<span class="token operator">:</span> <span class="token char">'POST'</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求参数</span>
    data<span class="token operator">:</span> <span class="token class-name">Data</span>
    <span class="token comment">// 在ES6中上面data: Data可以简写为 data</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="242__vuex_569"></a>2.4.2 登录表单 调用vuex</h4> 
<p><img src="https://images2.imgbox.com/d8/e3/al1gIFW0_o.png" alt="image-20240113201636001"></p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 通过表单的ref属性获取表单实例对象，并且执行此表单实例对象的validate方法校验一下
     * validate方法可以传入一个回调函数，并且会传入一个参数，我们可以命名为isOK
     */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>loginFormRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">isOK</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isOK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 此时isOK为false，表示校验没有通过</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'校验没有通过，请检查您的登录信息'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">/**
       * 此时isOK为true，表示校验通过了,调用vuex中的用户模块
       * 此时因为我们开启了命名空间，传参时要带上模块名，即模块名/actions中方法名
       * dispatch方法是调用vuex中的actions
       */</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/login'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginFromModel<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="243_vux__601"></a>2.4.3 vux模块 调用登录接口</h4> 
<p><img src="https://images2.imgbox.com/a5/ec/pFeJ5Mh4_o.png" alt="image-20240113201858115"></p> 
<h4><a id="244__607"></a>2.4.4 登录测试</h4> 
<p>超级管理员电话号：138 0000 0002</p> 
<p>超级管理员密码：hm#qd@23!</p> 
<blockquote> 
 <p>登录密码：网络安全需要，密码以由原来的123456 变更为hm#qd@23! ， 管理员不可修改密码，新建用户的密码仍为123456</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/17/05/EBVWE6xo_o.png" alt="image-20240113202917035"></p> 
<p><strong>点击登录接口</strong></p> 
<p><img src="https://images2.imgbox.com/ca/e7/IRXaekHA_o.png" alt="image-20240113205216951"></p> 
<p>请求信息</p> 
<p><img src="https://images2.imgbox.com/5e/cc/U9wFsjV3_o.png" alt="image-20240113205231956"></p> 
<p>响应信息</p> 
<p><img src="https://images2.imgbox.com/42/4e/hCxvY3Id_o.png" alt="image-20240113205552222"></p> 
<p>成功存储了浏览器缓存：cookie</p> 
<p><img src="https://images2.imgbox.com/45/8c/AT4d3mVG_o.png" alt="image-20240113205300039"></p> 
<p><img src="https://images2.imgbox.com/90/7e/rvBtJeNM_o.png" alt="image-20240113205459505"></p> 
<p>刷新之后进入了主页面</p> 
<p><img src="https://images2.imgbox.com/df/3c/a5pGr3Wt_o.png" alt="image-20240113205515377"></p> 
<p><strong>补充：为了方便，登录表单的数据我们可以做出如下所示的修改</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 登录表单数据结构</span>
    <span class="token literal-property property">loginFromModel</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">mobile</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> <span class="token string">'13800000002'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">password</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> <span class="token string">'hm#qd@23!'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">isAgree</span><span class="token operator">:</span> isAgree<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>   
</code></pre> 
<h3><a id="25__657"></a>2.5 跳转主页面</h3> 
<p>当用户登录成功后直接跳转到主页面，而不是等到用户手动刷新之后才跳转到主页面</p> 
<p>此功能是登录的最后一个功能</p> 
<p>修改登录页面的代码</p> 
<p><img src="https://images2.imgbox.com/4a/04/ax1aO91U_o.png" alt="image-20240113211212413"></p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 通过表单的ref属性获取表单实例对象，并且执行此表单实例对象的validate方法校验一下
     * validate方法可以传入一个回调函数，并且会传入一个参数，我们可以命名为isOK
     */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>loginFormRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">isOK</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isOK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 此时isOK为false，表示校验没有通过</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'校验没有通过，请检查您的登录信息'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">/**
       * 此时isOK为true，表示校验通过了,调用vuex中的用户模块
       * 此时因为我们开启了命名空间，传参时要带上模块名，即模块名/actions中方法名
       * dispatch方法是调用vuex中的actions
       * Vuex中的action返回的是一个promise，说明是一个异步，我们必须等到promise执行成功才能继续跳转到主页
       * 只要是用了await表示下方的代码一定是promise执行成功了
       * await 一定要写，因为我们要等待登录成功，如果失败的话就走axios中的reject
       */</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/login'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loginFromModel<span class="token punctuation">)</span>
      <span class="token comment">// 登录成功后跳转到主页面</span>
      <span class="token comment">//  this.$router获取到路由的实例对象,push表示我们要跳转到哪里，'/'表示我们的主页</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>我们可以看一下路由的配置</strong></p> 
<p><img src="https://images2.imgbox.com/2b/f9/iYZX93n0_o.png" alt="image-20240113212644831"></p> 
<p><img src="https://images2.imgbox.com/05/8c/uxBYsyGf_o.png" alt="image-20240113212723553"></p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span>

<span class="token comment">/**
 *  Layout @/在vue中代表路径别名
 *  @ 符号表示当前目录的src
 *  @/ 表示src下的layout,而layout又是一个目录，所以会拉取index.vue文件
 *  即index.vue组件就是我们的路由组件，会实现二级路由
* */</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'@/layout'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> constantRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/login/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hidden</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/404'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/404'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hidden</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'dashboard'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Dashboard'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Dashboard'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'dashboard'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/example'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/example/table'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Example'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Example'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'el-icon-s-help'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'table'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Table'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/table/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Table'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'table'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'tree'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Tree'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/tree/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Tree'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'tree'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/form'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Form'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/form/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Form'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'form'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/nested'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/nested/menu1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Nested'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Nested'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'nested'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu1'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu1/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Parent router-view</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu1'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Menu1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu1-1'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu1/menu1-1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu1-1'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Menu1-1'</span> <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu1-2'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu1/menu1-2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu1-2'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Menu1-2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu1-2-1'</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu1/menu1-2/menu1-2-1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu1-2-1'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Menu1-2-1'</span> <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu1-2-2'</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu1/menu1-2/menu1-2-2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu1-2-2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Menu1-2-2'</span> <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu1-3'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu1/menu1-3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu1-3'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Menu1-3'</span> <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'menu2'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/nested/menu2/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Menu2'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'menu2'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'external-link'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'https://panjiachen.github.io/vue-element-admin-site/#/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'External Link'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'link'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 404 page must be placed at the end !!!</span>
  <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/404'</span><span class="token punctuation">,</span> <span class="token literal-property property">hidden</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">createRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// mode: 'history', // require service support</span>
  <span class="token function-variable function">scrollBehavior</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> constantRoutes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Detail see: https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">resetRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> newRouter <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  router<span class="token punctuation">.</span>matcher <span class="token operator">=</span> newRouter<span class="token punctuation">.</span>matcher <span class="token comment">// reset router</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> 
<p><strong>跳转后如下如图所示</strong></p> 
<p><img src="https://images2.imgbox.com/c5/99/GUzjHpww_o.png" alt="image-20240113213017032"></p> 
<h2><a id="vuecli__876"></a>三、vue-cli 代理解决跨域</h2> 
<p>下面仅仅是解决开发环境中的跨域问题，生产环境的跨域问题后面会详细解析</p> 
<p><img src="https://images2.imgbox.com/b5/44/qHdeckQd_o.png" alt="image-20240113151249028"></p> 
<p>如果跨域问题不解决的话，我们的请求是发送不过去的</p> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_51351637/article/details/127210935">Vue - 前端代理服务器解决跨域问题</a></p> 
 <p><img src="https://images2.imgbox.com/ad/16/Lw6TJk0q_o.png" alt="image-20240113152849778"></p> 
 <p><img src="https://images2.imgbox.com/6b/b4/qdfz27JL_o.png" alt="image-20240113152925711"></p> 
</blockquote> 
<p>我们前端页面的地址是http://localhost:9528，后端项目的地址是https://heimahr.itheima.net/，一眼可以看出前后端地址不同源</p> 
<blockquote> 
 <p><strong>浏览器同源策略：协议、主机、端口三者一致</strong>。目前来说都不一致，如果后端不开启cors的话，前端是请求不到后端去的</p> 
</blockquote> 
<p><strong>解决方案：配置vue-cli代理服务器</strong></p> 
<p>如果是node向后端接口服务发送请求的话不会发生跨域问题，因为同源策略是浏览器的策略，并不是node的策略</p> 
<p>相当于前端向后端请求的中间新加了一个vue-cli(node)</p> 
<p><img src="https://images2.imgbox.com/c4/d4/Ijti6sBC_o.png" alt="image-20240113153125683"></p> 
<p>修改vue.config.js文件，并且修改后记得重启项目</p> 
<pre><code class="prism language-java"><span class="token keyword">module</span><span class="token punctuation">.</span><span class="token keyword">exports</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// 此属性中存放项目的一些配置，可以在这个位置写代理的一些属性</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    port<span class="token operator">:</span> port<span class="token punctuation">,</span>
    <span class="token keyword">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    overlay<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      warnings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// before: require('./mock/mock-server.js'), 基础模板做的模拟数据</span>
    <span class="token comment">// 代理属性</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// path:目标服务器，想要代理到哪里</span>
      <span class="token char">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 要代理到的目标服务器</span>
        target<span class="token operator">:</span> 'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>heimahr<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>net<span class="token operator">/</span>'
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>     
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    
    
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="axios__936"></a>四、axios 封装</h2> 
<p><img src="https://images2.imgbox.com/6b/a6/uENAh8Zs_o.png" alt="image-20240113194132188"></p> 
<p><img src="https://images2.imgbox.com/36/a5/8H3qe8gC_o.png" alt="image-20240113154412346"></p> 
<p><strong>基地址</strong>：axios中有一个baseurl的属性，表示我痛序偶axios设置了一个基础的地址，剩下的所有请求都不要再拼接这个地址了</p> 
<p><strong>超时时间</strong>：请求超时时间，比如设置为10s，但是我们前端发起请求而服务器10s内没有做出响应，则表示请求失败</p> 
<p>axios中还有两个比较重要的拦截器：<strong>请求拦截器与响应拦截器</strong></p> 
<p>一般来说我们的请求拦截器是往请求中注入一个token，后面的请求就不用一个一个的往请求数据中添加token数据了</p> 
<p>响应拦截器一般是负责解析一些数据结构及处理异常</p> 
<blockquote> 
 <p>拦截器的基础知识</p> 
 <p><a href="https://blog.csdn.net/weixin_51351637/article/details/127072928">axios——难点语法使用、拦截器的使用、取消请求功能演示</a></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/5d/c8/wjlJUDgU_o.png" alt="image-20240113154949071"></p> 
<h3><a id="41_axios_958"></a>4.1 配置axios基础信息</h3> 
<p>配置一下axios的基地址和超时时间</p> 
<p><img src="https://images2.imgbox.com/17/1c/oxtrOTuf_o.png" alt="image-20240113170125447"></p> 
<p><strong>我们补充一下其他文件的内容</strong></p> 
<p>vuex中的index.js文件</p> 
<p><img src="https://images2.imgbox.com/6d/c6/xI6DYGwj_o.png" alt="image-20240113171642993"></p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> getters <span class="token keyword">from</span> <span class="token string">'./getters'</span>
<span class="token keyword">import</span> app <span class="token keyword">from</span> <span class="token string">'./modules/app'</span>
<span class="token keyword">import</span> settings <span class="token keyword">from</span> <span class="token string">'./modules/settings'</span>
<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./modules/user'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 模块</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    app<span class="token punctuation">,</span>
    settings<span class="token punctuation">,</span>
    user
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// Vuex中的计算属性</span>
  getters
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre> 
<p>vuex中的getters.js文件</p> 
<p><img src="https://images2.imgbox.com/43/27/xgOKZ5oH_o.png" alt="image-20240113171719736"></p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">sidebar</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>sidebar<span class="token punctuation">,</span>
  <span class="token function-variable function">device</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>device<span class="token punctuation">,</span>
  <span class="token function-variable function">token</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">,</span>
  <span class="token function-variable function">avatar</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar<span class="token punctuation">,</span>
  <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> getters
</code></pre> 
<h3><a id="42__1011"></a>4.2 请求拦截器</h3> 
<p>如下所示的代码我们配置了基地址、超时时间、请求拦截器</p> 
<pre><code class="prism language-java"><span class="token comment">// 引入axios</span>
<span class="token keyword">import</span> <span class="token namespace">axios</span> from <span class="token char">'axios'</span>
<span class="token comment">// 引入vuex可以获取vuex实例对象，</span>
<span class="token comment">// 我们在vuex实例对象找那个又添加了一个getters.js,其实是为了获取token数据</span>
<span class="token keyword">import</span> <span class="token namespace">store</span> from '@<span class="token operator">/</span>store<span class="token operator">/</span>index<span class="token punctuation">.</span>js'

<span class="token comment">// 创建一个axios实例</span>
<span class="token comment">// 根据指定配置创建一个新的axios，也就是每个新的axios都有自己的配置</span>
<span class="token keyword">var</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 基地址。因为后端的所有地址都有一个共同路径/api</span>
  baseURL<span class="token operator">:</span> <span class="token char">'/api'</span><span class="token punctuation">,</span>
  <span class="token comment">// 超时时间，单位为毫秒，10000毫秒为10秒</span>
  timeout<span class="token operator">:</span> <span class="token number">10000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 创建请求拦截器,并且两个参数都是回调函数</span>
<span class="token comment">// 请求成功的时候执行第一个成功回调函数</span>
<span class="token comment">// 请求失败的时候执行第二个失败回调函数，error就是错误对象</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token comment">// 成功时执行</span>
  <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 将vuex中的token值放入到请求头里面</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 存在token，才放入请求头中</span>
      <span class="token class-name"><span class="token namespace">config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span></span>Authorization</span> <span class="token operator">=</span> `<span class="token class-name">Bearer</span> $<span class="token punctuation">{<!-- --></span>store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>token<span class="token punctuation">}</span>`
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 失败时执行</span>
  <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 默认支持promise的,下面语句相当于终止了当前promise的执行</span>
    <span class="token keyword">return</span> <span class="token class-name">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 默认导出axios实例对象</span>
export <span class="token keyword">default</span> service
</code></pre> 
<h3><a id="43__1056"></a>4.3 响应拦截器</h3> 
<p>仍然是修改如下所示文件</p> 
<p><img src="https://images2.imgbox.com/8a/49/RNUaRlbq_o.png" alt="image-20240113193909930"></p> 
<p><img src="https://images2.imgbox.com/4b/7c/8dxvcxK5_o.png" alt="image-20240113192714709"></p> 
<pre><code class="prism language-javascript"><span class="token comment">// 创建响应拦截器,并且两个参数都是回调函数</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token comment">// 请求成功时响应,此时的响应默认包裹了一层data，即response.data才是后台服务返回的内容</span>
  <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 一次性解析出response.data中的三个属性</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> data<span class="token punctuation">,</span> message<span class="token punctuation">,</span> success <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data
    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 此时响应正常</span>
      <span class="token keyword">return</span> data
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 请求失败时响应</span>
  <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// this.$message.warning 不能这么使用，因为此时的this不是组件实例对象</span>
    <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 默认支持promise的,下面语句相当于终止了当前promise的执行</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="44_axios__1091"></a>4.4 axios 区分不同环境</h3> 
<h4><a id="441__1093"></a>4.4.1 介绍</h4> 
<p><strong>开发环境</strong>：开发人员开发代码、测试的代码环境。此环境对代码的要求不是很高，可以随意更改，因为还不是面向真正的用户</p> 
<p><strong>生产环境</strong>：也叫做正式环境，面向真实的用户</p> 
<p><img src="https://images2.imgbox.com/82/0d/fH6W99ls_o.png" alt="image-20240113194614759"></p> 
<p>下面我们就要实现下图流程中的“区分环境”模块</p> 
<p><img src="https://images2.imgbox.com/70/b9/klApdGiy_o.png" alt="image-20240113194259285"></p> 
<p><strong>怎么区分不同的环境</strong>？</p> 
<p><strong>使用环境变量</strong>，有如下两个位置</p> 
<ul><li> <p>.env.development中设置<strong>开发环境变量</strong> 默认 NODE_ENV 值为 <strong>development</strong></p> </li><li> <p>.env.production中设置<strong>生产环境变量</strong>默认 NODE_ENV 值为 <strong>production</strong></p> </li></ul> 
<p><img src="https://images2.imgbox.com/54/9e/4tZbvAXF_o.png" alt="image-20240113200035069"></p> 
<p>执行不同的命令，NODE_ENV的值是不同的，我们需要node命令来取出NODE_ENV的值</p> 
<pre><code class="prism language-java">process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>属性的方式获取
</code></pre> 
<blockquote> 
 <p>process.env是我们node.js的全局变量，可以通过它来取到环境变量的名称</p> 
</blockquote> 
<p><strong>测试一下</strong></p> 
<p>开发环境下：在登录界面写一个created钩子函数</p> 
<pre><code class="prism language-javascript"><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">alert</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c3/92/0it5t71L_o.png" alt="image-20240113195347418"></p> 
<p>生产环境下：</p> 
<p><img src="https://images2.imgbox.com/a6/40/4Fpqpjig_o.png" alt="image-20240113195433408"></p> 
<h4><a id="442__1141"></a>4.4.2 区分不同环境</h4> 
<p><strong>所以为什么要区分环境</strong>？</p> 
<p>开发环境下我们的数据随意更改，但是生产环境下数据是不能随意更改的，并且开发环境下和生产环境下的请求路径也是有所差别的</p> 
<p>比如开发环境下请求/api路径，生产环境下走/prod-api路径</p> 
<p><img src="https://images2.imgbox.com/5b/01/QZmX0vXI_o.png" alt="image-20240113195841574"></p> 
<p><strong>vue-cli给我们做了一个变量规范</strong>：</p> 
<p><strong>Vue代码中NODE_ENV之外，所有的变量必须以VUE_APP_开头</strong></p> 
<p><img src="https://images2.imgbox.com/29/1c/AzSud2SZ_o.png" alt="image-20240113200155923"></p> 
<p><strong>所以接下来我们要在axios中区分不同的环境，将VUE_APP_BASE_API的值赋值给axios的基地址</strong></p> 
<p><img src="https://images2.imgbox.com/8b/70/r4MOW1mu_o.png" alt="image-20240113200427220"></p> 
<pre><code class="prism language-javascript"><span class="token comment">// 创建一个axios实例</span>
<span class="token comment">// 根据指定配置创建一个新的axios，也就是每个新的axios都有自己的配置</span>
<span class="token keyword">var</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 基地址。因为后端的所有地址都有一个共同路径/api</span>
  <span class="token comment">// 并且这个地方不能写死，否则生产环境和开发环境都走的一个地址</span>
  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_BASE_API</span><span class="token punctuation">,</span>
  <span class="token comment">// 超时时间，单位为毫秒，10000毫秒为10秒</span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">10000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bceda0df308bc4ccadeb08f862764f19/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【UnityShader入门精要学习笔记】第四章（5）坐标空间</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c8847da6b9966e66d1c5c331ffda9f50/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">方差分析（F检验）用于特征选择的Python实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>