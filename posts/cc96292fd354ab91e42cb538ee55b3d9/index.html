<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV图像缩放插值之BiCubic双三次插值 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenCV图像缩放插值之BiCubic双三次插值" />
<meta property="og:description" content="转载请注明出处。 文章链接：https://blog.csdn.net/duiwangxiaomi/article/details/123845869?spm=1001.2014.3001.5501 图像缩放算法简介 在图像的仿射变换中，很多地方需要用到插值运算，常见的插值运算包括最邻近插值，双线性插值，双三次插值（立体插值），兰索思插值等方法，OpenCV提供了很多方法，其中，双线性插值由于折中的插值效果和运算速度，运用比较广泛。双三次插值效果最好，但速度较慢。
OpenCV中实现图像缩放的函数为
void resize(InputArray src, OutputArray dst, Size dsize, double fx=0, double fy=0, int interpolation=INTER_LINEAR ); 参数说明：
src：输入，原图像，即待改变大小的图像；
dst：输出，改变大小之后的图像，这个图像和原图像具有相同的内容，只是大小和原图像不一样而已；
dsize：输出图像的大小。如果这个参数不为0，那么就代表将原图像缩放到这个Size(width，height)指定的大小；如果这个参数为0，那么原图像缩放之后的大小就要通过下面的公式来计算：
dsize = Size(round(fxsrc.cols), round(fysrc.rows))
其中，fx和fy就是下面要说的两个参数，是图像width方向和height方向的缩放比例。
fx：width方向的缩放比例，如果它是0，那么它就会按(double)dsize.width/src.cols来计算；
fy：height方向的缩放比例，如果它是0，那么它就会按照(double)dsize.height/src.rows来计算；
interpolation：这个是指定插值的方式，图像缩放之后，肯定像素要进行重新计算的，就靠这个参数来指定重新计算像素的方式，有以下几种：
INTER_NEAREST - 最邻近插值 INTER_LINEAR - 双线性插值，如果最后一个参数你不指定，默认使用这种方法 INTER_AREA - 区域插值 resampling using pixel area relation.It may be a preferred method for image decimation, as it gives moire’-free results. But when the image is zoomed, it is similar to the INTER_NEAREST method." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cc96292fd354ab91e42cb538ee55b3d9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-18T17:28:36+08:00" />
<meta property="article:modified_time" content="2022-08-18T17:28:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV图像缩放插值之BiCubic双三次插值</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code class="prism language-c">转载请注明出处。
文章链接：https<span class="token operator">:</span><span class="token comment">//blog.csdn.net/duiwangxiaomi/article/details/123845869?spm=1001.2014.3001.5501</span>
</code></pre> 
<h2><a id="_5"></a>图像缩放算法简介</h2> 
<p>        在图像的仿射变换中，很多地方需要用到插值运算，常见的插值运算包括最邻近插值，双线性插值，双三次插值（立体插值），兰索思插值等方法，OpenCV提供了很多方法，其中，双线性插值由于折中的插值效果和运算速度，运用比较广泛。双三次插值效果最好，但速度较慢。<br>         OpenCV中实现图像缩放的函数为</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>InputArray src<span class="token punctuation">,</span> OutputArray dst<span class="token punctuation">,</span> Size dsize<span class="token punctuation">,</span> <span class="token keyword">double</span> fx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">double</span> fy<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> interpolation<span class="token operator">=</span>INTER_LINEAR <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>        参数说明：</p> 
<ol><li> <p>src：输入，原图像，即待改变大小的图像；</p> </li><li> <p>dst：输出，改变大小之后的图像，这个图像和原图像具有相同的内容，只是大小和原图像不一样而已；</p> </li><li> <p>dsize：输出图像的大小。如果这个参数不为0，那么就代表将原图像缩放到这个Size(width，height)指定的大小；如果这个参数为0，那么原图像缩放之后的大小就要通过下面的公式来计算：<br> dsize = Size(round(fx<em>src.cols), round(fy</em>src.rows))<br> 其中，fx和fy就是下面要说的两个参数，是图像width方向和height方向的缩放比例。<br> fx：width方向的缩放比例，如果它是0，那么它就会按(double)dsize.width/src.cols来计算；<br> fy：height方向的缩放比例，如果它是0，那么它就会按照(double)dsize.height/src.rows来计算；</p> </li><li> <p>interpolation：这个是指定插值的方式，图像缩放之后，肯定像素要进行重新计算的，就靠这个参数来指定重新计算像素的方式，有以下几种：</p> <pre><code>	INTER_NEAREST - 最邻近插值
	INTER_LINEAR - 双线性插值，如果最后一个参数你不指定，默认使用这种方法
	INTER_AREA - 区域插值
		resampling using pixel area relation.It may be a preferred method for image decimation, as it gives moire’-free results. But when the image is zoomed, it is similar to the INTER_NEAREST method.
	INTER_CUBIC - 双三次插值，4x4像素邻域内的双立方插值
	INTER_LANCZOS4 - 8x8像素邻域内的Lanczos插值
</code></pre> </li></ol> 
<h2><a id="OpenCVINTER_CUBIC_27"></a>OpenCV中INTER_CUBIC算法原理</h2> 
<p>        接下来讲一下INTER_CUBIC - 双三次插值的算法原理。<br>         双三次插值算法是基于周围的4*4=16个像素点，通过计算16个像素点的权重，累积得到增加点的像素值。<br>         算法流程如下：</p> 
<ol><li>假设源图像A大小为m * n，缩放K倍后的目标图像B的大小为M*N，即K=M/m；</li><li>A的每一个像素点是已知的，B是未知的，我们想要求出目标图像B中每一像素点(X,Y)的值，必须先找出像素(X,Y)在源图像A中对应的像素(x,y)；</li><li>再根据源图像A距离像素(x,y)最近的16个像素点作为计算目标图像B(X,Y)处像素值的参数；</li><li>利用BiCubic基函数求出16个像素点的权重，图B像素(x,y)的值就等于16个像素点的加权叠加。</li></ol> 
<p>        根据比例关系x/X=m/M=1/K，我们可以得到B(X,Y)在A上的对应坐标为</p> 
<pre><code>					A(x,y)=A(X*(m/M),Y*(n/N))=A(X/K,Y/K)。
</code></pre> 
<p>        如图所示P点就是目标图像B在(X,Y)处对应于源图像A中的位置，P的坐标位置会出现小数部分，所以我们假设 P的坐标为P(x+u,y+v)，其中x,y分别表示整数部分，u,v分别表示小数部分（蓝点P1到a11方格中红点的距离）。那么我们就可以得到如图所示的最近16个像素的位置，在这里用a(i,j)(i,j=0,1,2,3)来表示，如下图，图中方格为单个像素的尺寸，红点为像素中心。<br> <img src="https://images2.imgbox.com/18/ff/paHhePh4_o.png" alt="图1"><br>         双立方插值的目的就是通过找到一种关系，或者说系数，可以把这 16 个像素对于 P 处像素值的影响因子找出来，从而根据这个影响因子来获得目标图像对应点的像素值，达到图像缩放的目的。<br>         BiCubic基函数形式如下<br> <img src="https://images2.imgbox.com/6e/eb/1t9aTi8h_o.png" alt="图2"><br>         BiCubic函数图像如下<br> <img src="https://images2.imgbox.com/7c/b9/xQ093Svq_o.png" alt="图3"><br>         我们要做的就是求出BiCubic函数中的参数x,从而获得上面所说的16个像素所对应的<strong>权重W(x)</strong>。<br>         BiCubic基函数是一维的，而像素是二维的，所以我们将像素点的行与列分开计算。<br>         BiCubic函数中的参数x<strong>表示该像素点到P点的距离</strong>.<br>         例如a00距离P(x+u,y+v)的距离为(1+u,1+v)，因此a00的纵坐标权重i_0=W(1+v)，横坐标权重j_0=W(1+u)，a00对B(X,Y)的贡献值为：</p> 
<pre><code>				（a00像素值）* i_0* j_0。
</code></pre> 
<p>因此，a0X的横坐标权重分别为W(1+u)，W(u)，W(1-u)，W(2-u)；ay0的纵坐标权重分别为W(1+v)，W(v)，W(1-v)，W(2-v)；B(X,Y)像素值为：<br> <img src="https://images2.imgbox.com/e1/ec/ALLwZ1J8_o.png" alt="图4"></p> 
<h2><a id="CUBICC_54"></a>CUBIC算法C语言实现</h2> 
<pre><code class="prism language-cpp"><span class="token comment">// im-原图指针	w-原图宽		h-原图高</span>
<span class="token comment">// s_im-目标图像指针		w-目标图像宽		h-目标图像高</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> ErrorCode_imdataProc <span class="token operator">=</span><span class="token operator">-</span><span class="token number">1000000</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">vcImageSimpleSamplingRoi</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span> im<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">,</span> 
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span> s_im<span class="token punctuation">,</span> <span class="token keyword">int</span> s_w<span class="token punctuation">,</span> <span class="token keyword">int</span> s_h<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">float</span> fWStep <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> fHStep <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> jj <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span> pCurr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span> pSamp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	
	<span class="token keyword">const</span> <span class="token keyword">float</span> A <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.75f</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> coeffsX<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> coeffsY<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> fx <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> fy <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> sx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> iscale_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> iscale_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">short</span> cbufX<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cbufY<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> mm <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> nn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NULL</span> <span class="token operator">==</span> im <span class="token operator">||</span> w <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> h <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span>
		<span class="token constant">NULL</span> <span class="token operator">==</span> s_im <span class="token operator">||</span> s_w <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> s_h <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ret <span class="token operator">=</span> ErrorCode_imdataProc <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">;</span>
		<span class="token keyword">goto</span> nExit<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	fWStep <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">*</span> roi<span class="token punctuation">.</span>width <span class="token operator">/</span> s_w<span class="token punctuation">;</span>
	fHStep <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">*</span> roi<span class="token punctuation">.</span>height <span class="token operator">/</span> s_h<span class="token punctuation">;</span>
	pSamp <span class="token operator">=</span> s_im<span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span>ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ii <span class="token operator">&lt;</span> s_h<span class="token punctuation">;</span> <span class="token operator">++</span>ii<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		fy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ii <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token operator">*</span>fHStep <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sy <span class="token operator">=</span> <span class="token function">vcFloor</span><span class="token punctuation">(</span>fy<span class="token punctuation">)</span><span class="token punctuation">;</span>
		fy <span class="token operator">-=</span> sy<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>sy <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			fy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sy <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>sy <span class="token operator">&gt;=</span> roi<span class="token punctuation">.</span>height<span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			fy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sy <span class="token operator">=</span> roi<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		coeffsY<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A<span class="token operator">*</span><span class="token punctuation">(</span>fy <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token operator">*</span>A<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>fy <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">*</span> A<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>fy <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> A<span class="token punctuation">;</span>
		coeffsY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span>fy <span class="token operator">-</span> <span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span>fy<span class="token operator">*</span>fy <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		coeffsY<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fy<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fy<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fy<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		coeffsY<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.f</span> <span class="token operator">-</span> coeffsY<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> coeffsY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> coeffsY<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		cbufY<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsY<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cbufY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cbufY<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsY<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cbufY<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsY<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span>jj <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> jj <span class="token operator">&lt;</span> s_w<span class="token punctuation">;</span> <span class="token operator">++</span>jj<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			fx <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span>jj <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token operator">*</span>fWStep <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			sx <span class="token operator">=</span> <span class="token function">vcFloor</span><span class="token punctuation">(</span>fx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			fx <span class="token operator">-=</span> sx<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>sx <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				fx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>sx <span class="token operator">&gt;=</span> roi<span class="token punctuation">.</span>width<span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				fx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sx <span class="token operator">=</span> roi<span class="token punctuation">.</span>width<span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			coeffsX<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A<span class="token operator">*</span><span class="token punctuation">(</span>fx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token operator">*</span>A<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>fx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token operator">*</span>A<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>fx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token operator">*</span>A<span class="token punctuation">;</span>
			coeffsX<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span>fx <span class="token operator">-</span> <span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span>fx<span class="token operator">*</span>fx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
			coeffsX<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fx<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>A <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fx<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> fx<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
			coeffsX<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.f</span> <span class="token operator">-</span> coeffsX<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> coeffsX<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> coeffsX<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			
			cbufX<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsX<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cbufX<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsX<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cbufX<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsX<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cbufX<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token punctuation">(</span>coeffsX<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>mm <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> mm <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token operator">++</span>mm<span class="token punctuation">)</span><span class="token comment">//rows</span>
			<span class="token punctuation">{<!-- --></span>
				pCurr <span class="token operator">=</span> im <span class="token operator">+</span> <span class="token punctuation">(</span>roi<span class="token punctuation">.</span>y <span class="token operator">+</span> sy <span class="token operator">+</span> mm <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> w <span class="token operator">+</span> roi<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>nn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> nn <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token operator">++</span>nn<span class="token punctuation">)</span><span class="token comment">//cols</span>
				<span class="token punctuation">{<!-- --></span>
					sum <span class="token operator">+=</span> pCurr<span class="token punctuation">[</span>sx <span class="token operator">+</span> nn <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> cbufY<span class="token punctuation">[</span>mm<span class="token punctuation">]</span><span class="token operator">*</span>cbufX<span class="token punctuation">[</span>nn<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			pSamp<span class="token punctuation">[</span>jj<span class="token punctuation">]</span> <span class="token operator">=</span> sum <span class="token operator">&gt;&gt;</span> <span class="token number">22</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		pSamp <span class="token operator">+=</span> s_w<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	ret <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
nExit<span class="token operator">:</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_156"></a>结语</h2> 
<p>        以上为OpenCV图像缩放插值之BiCubic双三次插值的原理及实现。如还有不懂，可参考下面的参考链接，都是很不错的文章。<br> 参考链接：</p> 
<ol><li><a href="https://blog.csdn.net/fengbingchun/article/details/17335477">OpenCV中resize函数五种插值算法的实现过程</a></li><li><a href="https://www.cnblogs.com/yssongest/p/5303151.html" rel="nofollow">OpenCV ——双线性插值（Bilinear interpolation）</a></li><li><a href="https://www.jb51.net/article/230973.htm" rel="nofollow">C++ OpenCV实现图像双三次插值算法详解</a></li><li><a href="https://blog.csdn.net/qq_34885184/article/details/79163991?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-5.pc_relevant_paycolumn_v3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-5.pc_relevant_paycolumn_v3&amp;utm_relevant_index=8">双三次插值（BiCubic插值）</a></li><li><a href="https://blog.csdn.net/linqianbi/article/details/78594019">图像插值算法之双三次插值</a></li><li><a href="https://blog.csdn.net/Ibelievesunshine/article/details/104942406">BiCubic Interpolation</a></li><li><a href="https://blog.csdn.net/guyuealian/article/details/85097633">OpenCV图像缩放resize各种插值方式的比较</a></li><li><a href="https://blog.csdn.net/weixin_32176627/article/details/112454507">aitken插值方法的c++代码_双三次插值算法的C++实现与SSE指令优化</a></li></ol> 
<p>        如果觉得本文写的不错的，欢迎点赞、收藏、评论哦~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e7235eec02b47814c0505b831986ef1e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android中的Switch控件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/17b0c0fe13cde6b86ce0c6de5e933735/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux安装和使用OpenCV</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>