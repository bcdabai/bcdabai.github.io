<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Linux上使用PHP-FPM与Nginx实现高效的HTTP处理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在Linux上使用PHP-FPM与Nginx实现高效的HTTP处理" />
<meta property="og:description" content="当谈到高效的HTTP处理时，PHP-FPM（FastCGI进程管理器）与Nginx的结合是许多web开发者的首选。这种组合提供了出色的性能、可扩展性和稳定性，尤其适用于高流量的网站和应用程序。
1. 为什么选择PHP-FPM与Nginx？ 性能优化：PHP-FPM通过进程管理和缓存机制，显著提高了PHP脚本的执行效率。资源隔离：每个PHP进程独立运行，降低了资源争用和潜在的冲突。与Nginx的集成：Nginx是一个高性能的HTTP和反向代理服务器，与PHP-FPM结合使用，可以提供快速、稳定的请求处理。 2. 安装与配置 安装PHP-FPM:
根据你的Linux发行版，使用适当的包管理器安装PHP-FPM。例如，在Debian/Ubuntu上：
bash复制代码
sudo apt-get update sudo apt-get install php-fpm
配置PHP-FPM:
编辑/etc/php/fpm/php.ini，根据需要进行配置调整，如内存限制、执行时间等。
安装Nginx:
同样使用包管理器进行安装：
bash复制代码
sudo apt-get install nginx
配置Nginx:
编辑Nginx的配置文件（通常位于/etc/nginx/nginx.conf或/etc/nginx/conf.d/default.conf）。你需要指定FastCGI的监听地址和端口，并配置一个或多个server块来处理PHP请求。一个基本的配置示例如下：
nginx复制代码
server { listen 80; server_name example.com; root /var/www/html; index index.php index.html index.htm; location / { try_files $uri $uri/ =404; } location ~ \.php$ { fastcgi_pass unix:/var/run/php/php7.4-fpm.sock; # 根据你的PHP-FPM版本调整路径和端口号 fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } }
重启服务:
一旦完成配置文件的更改，重启Nginx和PHP-FPM服务以使更改生效：
bash复制代码
sudo systemctl restart nginx php-fpm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4b2dfb106f6e65aaa2300ad71c25583d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-15T13:20:24+08:00" />
<meta property="article:modified_time" content="2024-01-15T13:20:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Linux上使用PHP-FPM与Nginx实现高效的HTTP处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8a/03/hJTNDU3t_o.png"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">当谈到高效的HTTP处理时，PHP-FPM（FastCGI进程管理器）与Nginx的结合是许多web开发者的首选。这种组合提供了出色的性能、可扩展性和稳定性，尤其适用于高流量的网站和应用程序。</span></p> 
<h4 style="margin-left:0pt;text-align:left;"><strong><strong><strong>1. 为什么选择PHP-FPM与Nginx？</strong></strong></strong></h4> 
<ul><li style="text-align:justify;"><strong><span style="color:#05073b;"><strong>性能优化</strong></span></strong><span style="color:#05073b;">：PHP-FPM通过进程管理和缓存机制，显著提高了PHP脚本的执行效率。</span></li><li style="text-align:justify;"><strong><span style="color:#05073b;"><strong>资源隔离</strong></span></strong><span style="color:#05073b;">：每个PHP进程独立运行，降低了资源争用和潜在的冲突。</span></li><li style="text-align:justify;"><strong><span style="color:#05073b;"><strong>与Nginx的集成</strong></span></strong><span style="color:#05073b;">：Nginx是一个高性能的HTTP和反向代理服务器，与PHP-FPM结合使用，可以提供快速、稳定的请求处理。</span></li></ul> 
<h4 style="margin-left:0pt;text-align:left;"><strong><strong><strong>2. 安装与配置</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#05073b;"><strong>安装PHP-FPM</strong></span></strong><span style="color:#05073b;">:</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">根据你的Linux发行版，使用适当的包管理器安装PHP-FPM。例如，在Debian/Ubuntu上：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#e3e8f6;"><strong><span style="background-color:#e3e8f6;"><span style="color:#120649;"><strong>bash</strong></span></span></strong><span style="background-color:#e3e8f6;"><span style="color:#7886a4;">复制代码</span></span></span></p> 
<table cellspacing="0" style="margin-left:5.4pt;"><tbody><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">sudo apt-get update </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">sudo apt-get install php-fpm</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#05073b;"><strong>配置PHP-FPM</strong></span></strong><span style="color:#05073b;">:</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">编辑</span><span style="color:#05073b;">/etc/php/fpm/php.ini</span><span style="color:#05073b;">，根据需要进行配置调整，如内存限制、执行时间等。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#05073b;"><strong>安装Nginx</strong></span></strong><span style="color:#05073b;">:</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">同样使用包管理器进行安装：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#e3e8f6;"><strong><span style="background-color:#e3e8f6;"><span style="color:#120649;"><strong>bash</strong></span></span></strong><span style="background-color:#e3e8f6;"><span style="color:#7886a4;">复制代码</span></span></span></p> 
<table cellspacing="0" style="margin-left:5.4pt;"><tbody><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">sudo apt-get install nginx</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#05073b;"><strong>配置Nginx</strong></span></strong><span style="color:#05073b;">:</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">编辑Nginx的配置文件（通常位于</span><span style="color:#05073b;">/etc/nginx/nginx.conf</span><span style="color:#05073b;">或</span><span style="color:#05073b;">/etc/nginx/conf.d/default.conf</span><span style="color:#05073b;">）。你需要指定FastCGI的监听地址和端口，并配置一个或多个server块来处理PHP请求。一个基本的配置示例如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#e3e8f6;"><strong><span style="background-color:#e3e8f6;"><span style="color:#120649;"><strong>nginx</strong></span></span></strong><span style="background-color:#e3e8f6;"><span style="color:#7886a4;">复制代码</span></span></span></p> 
<table cellspacing="0" style="margin-left:5.4pt;"><tbody><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#007faa;">server</span><span style="color:#545454;"> { </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">listen</span> <span style="color:#aa5d00;">80</span><span style="color:#545454;">; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">server_name</span><span style="color:#545454;"> example.com; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:justify;"></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">root</span><span style="color:#545454;"> /var/www/html; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">index</span><span style="color:#545454;"> index.php index.html index.htm; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:justify;"></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#007faa;">location</span><span style="color:#545454;"> / { </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">try_files</span> <span style="color:#d91e18;">$uri</span> <span style="color:#d91e18;">$uri</span><span style="color:#545454;">/ =</span><span style="color:#aa5d00;">404</span><span style="color:#545454;">; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">} </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:justify;"></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#007faa;">location</span> <span style="color:#d91e18;">~ \.php$</span><span style="color:#545454;"> { </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">fastcgi_pass</span><span style="color:#545454;"> unix:/var/run/php/php7.4-fpm.sock; </span><span style="color:#696969;"># 根据你的PHP-FPM版本调整路径和端口号 </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">fastcgi_index</span><span style="color:#545454;"> index.php; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">fastcgi_param</span><span style="color:#545454;"> SCRIPT_FILENAME </span><span style="color:#d91e18;">$document_root$fastcgi_script_name</span><span style="color:#545454;">; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#aa5d00;">include</span><span style="color:#545454;"> fastcgi_params; </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">} </span></p> </td></tr><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#05073b;"><strong>重启服务</strong></span></strong><span style="color:#05073b;">:</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">一旦完成配置文件的更改，重启Nginx和PHP-FPM服务以使更改生效：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#e3e8f6;"><strong><span style="background-color:#e3e8f6;"><span style="color:#120649;"><strong>bash</strong></span></span></strong><span style="background-color:#e3e8f6;"><span style="color:#7886a4;">复制代码</span></span></span></p> 
<table cellspacing="0" style="margin-left:5.4pt;"><tbody><tr><td style="vertical-align:top;width:22.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#545454;">sudo systemctl restart nginx php-fpm</span></p> </td></tr></tbody></table> 
<h4 style="margin-left:0pt;text-align:left;"><strong><strong><strong>3. 优化与监控</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#05073b;">定期监控Nginx和PHP-FPM的性能指标，如请求速率、资源使用情况等。使用工具如</span><span style="color:#05073b;">top</span><span style="color:#05073b;">, </span><span style="color:#05073b;">htop</span><span style="color:#05073b;">, </span><span style="color:#05073b;">netstat</span><span style="color:#05073b;"> 或 </span><span style="color:#05073b;">nginx-status</span><span style="color:#05073b;"> 进行实时监控。根据需要调整配置参数，如连接数限制、缓冲区大小等，以获得最佳性能。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/39d8c89879a04b03a4a7b306ba7dc734/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac查看以太网信息，IP地址，查看配置桥接网络，使得虚拟机和本机ping通--linux系统part</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/669ca9e722d3361b0feee280aa13e3c1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">保姆级-从搭建到发布Quest3-Unity开发流程及问题解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>