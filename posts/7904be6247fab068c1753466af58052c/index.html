<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Filter和Listener使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Filter和Listener使用" />
<meta property="og:description" content="目录
1.Filter概念
2.Filter 快速入门
3.Filter 执行流程 4. Filter 拦截路径配置
4.1过滤器链（执行顺序）
5.登录验证 5.1创建文件
5.2代码 6.Listener 6.1代码 1.Filter概念 概念：Filter 表示过滤器，是 JavaWeb 三大组件(Servlet、Filter、Listener)之一。
过滤器可以把对资源的请求拦截下来，从而实现一些特殊的功能。
过滤器一般完成一些通用的操作，比如：权限控制、统一编码处理、敏感字符处理等等…
2.Filter 快速入门 3.Filter 执行流程 4. Filter 拦截路径配置 Filter 可以根据需求，配置不同的拦截资源路径
拦截具体的资源：/index.jsp：只有访问index.jsp时才会被拦截。目录拦截：/user/*：访问/user下的所有资源，都会被拦截后缀名拦截：*.jsp：访问后缀名为jsp的资源，都会被拦截拦截所有：/*：访问所有资源，都会被拦截 4.1过滤器链（执行顺序） 5.登录验证 5.1创建文件 注意
问题 解决
//获取request 将ServletRequest强转成HttpServletRequest HttpServletRequest req = (HttpServletRequest) request; //判断访问资源路径是否和登录注册相关 String[] urls = {&#34;/login.jsp&#34;,&#34;/imgs/&#34;,&#34;/css/&#34;,&#34;/loginServlet&#34;,&#34;register.jsp&#34;,&#34;/registerServlet&#34;,&#34;/checkCodeServlet&#34;}; //获取当前访问的资源路径 String url = req.getRequestURL().toString(); //循环判断 for (String u : urls) { if (url.contains(u)){ //找到了 //放行 chain.doFilter(request, response); //放行后，后面的代码就不用执行了 return结束方法 return; } } 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7904be6247fab068c1753466af58052c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-23T18:37:21+08:00" />
<meta property="article:modified_time" content="2022-08-23T18:37:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Filter和Listener使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.Filter%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#1.Filter%E6%A6%82%E5%BF%B5" rel="nofollow">1.Filter概念</a></p> 
<p id="2.Filter%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-toc" style="margin-left:40px;"><a href="#2.Filter%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8" rel="nofollow">2.Filter 快速入门</a></p> 
<p id="3.Filter%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%C2%A0-toc" style="margin-left:40px;"><a href="#3.Filter%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%C2%A0" rel="nofollow">3.Filter 执行流程 </a></p> 
<p id="4.%20Filter%20%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#4.%20Filter%20%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE" rel="nofollow">4. Filter 拦截路径配置</a></p> 
<p id="4.1%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE%EF%BC%88%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%EF%BC%89-toc" style="margin-left:80px;"><a href="#4.1%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE%EF%BC%88%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%EF%BC%89" rel="nofollow">4.1过滤器链（执行顺序）</a></p> 
<p id="5.%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%C2%A0-toc" style="margin-left:40px;"><a href="#5.%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%C2%A0" rel="nofollow">5.登录验证 </a></p> 
<p id="5.1%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#5.1%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6" rel="nofollow">5.1创建文件</a></p> 
<p id="5.2%E4%BB%A3%E7%A0%81%C2%A0-toc" style="margin-left:80px;"><a href="#5.2%E4%BB%A3%E7%A0%81%C2%A0" rel="nofollow">5.2代码 </a></p> 
<p id="6.Listener%C2%A0-toc" style="margin-left:40px;"><a href="#6.Listener%C2%A0" rel="nofollow">6.Listener </a></p> 
<p id="6.1%E4%BB%A3%E7%A0%81%C2%A0-toc" style="margin-left:80px;"><a href="#6.1%E4%BB%A3%E7%A0%81%C2%A0" rel="nofollow">6.1代码 </a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="1.Filter%E6%A6%82%E5%BF%B5">1.Filter概念</h3> 
<p>概念：Filter 表示过滤器，是 JavaWeb 三大组件(Servlet、Filter、Listener)之一。</p> 
<p>过滤器可以把对资源的请求<span style="color:#fe2c24;"><strong>拦截</strong></span>下来，从而实现一些特殊的功能。</p> 
<p>过滤器一般完成一些<span style="color:#fe2c24;"><strong>通用</strong></span>的操作，比如：权限控制、统一编码处理、敏感字符处理等等…</p> 
<h3 id="2.Filter%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">2.Filter 快速入门</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f5/78/Y9ORytdV_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bf/57/B2PRJ9z4_o.png"></p> 
<p></p> 
<h3 id="3.Filter%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%C2%A0">3.Filter 执行流程 </h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d4/04/0D04VuFr_o.png"></p> 
<p></p> 
<h3 id="4.%20Filter%20%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE">4. Filter 拦截路径配置</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/68/9d/h3tIJsYq_o.png"></p> 
<p> Filter 可以根据需求，配置不同的拦截资源路径</p> 
<ul><li>拦截具体的资源：/index.jsp：只有访问index.jsp时才会被拦截。</li><li>目录拦截：/user/*：访问/user下的所有资源，都会被拦截</li><li>后缀名拦截：*.jsp：访问后缀名为jsp的资源，都会被拦截</li><li>拦截所有：/*：访问所有资源，都会被拦截</li></ul> 
<h4 id="4.1%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE%EF%BC%88%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%EF%BC%89">4.1过滤器链（执行顺序）</h4> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f8/81/l0MFnFnP_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6d/22/JbuOSjkK_o.png"></p> 
<p></p> 
<h3 id="5.%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%C2%A0">5.登录验证 </h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b2/04/mWhppFnw_o.png"></p> 
<h4 id="5.1%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6">5.1创建文件</h4> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6d/3e/Qa6iVaRe_o.png"></p> 
<p>注意</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8f/7b/4Mzc4Hq6_o.png"></p> 
<p>问题 </p> 
<p style="text-align:center;"><img alt="" height="373" src="https://images2.imgbox.com/e7/5c/lBd8GNk6_o.png" width="298"></p> 
<p> 解决</p> 
<pre><code class="language-java">
        //获取request  将ServletRequest强转成HttpServletRequest
        HttpServletRequest req = (HttpServletRequest) request;

        //判断访问资源路径是否和登录注册相关
        String[] urls = {"/login.jsp","/imgs/","/css/","/loginServlet","register.jsp","/registerServlet","/checkCodeServlet"};
        //获取当前访问的资源路径
        String url = req.getRequestURL().toString();

        //循环判断
        for (String u : urls) {
            if (url.contains(u)){
                //找到了
                //放行
                chain.doFilter(request, response);
                //放行后，后面的代码就不用执行了   return结束方法
                return;
            }
        }</code></pre> 
<h4 id="5.2%E4%BB%A3%E7%A0%81%C2%A0">5.2代码 </h4> 
<p>后端代码    </p> 
<pre>loginFilter.java</pre> 
<pre><code class="language-java">package com.itheima.web.filter;

import javax.servlet.*;
import javax.servlet.annotation.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import java.io.IOException;

/*
*
* 登录验证的过滤器
* */

@WebFilter( "/*")
public class loginFilter implements Filter {



    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {

        //获取request  将ServletRequest强转成HttpServletRequest
        HttpServletRequest req = (HttpServletRequest) request;

        //判断访问资源路径是否和登录注册相关
        String[] urls = {"/login.jsp","/imgs/","/css/","/loginServlet","register.jsp","/registerServlet","/checkCodeServlet"};
        //获取当前访问的资源路径
        String url = req.getRequestURL().toString();

        //循环判断
        for (String u : urls) {
            if (url.contains(u)){
                //找到了
                //放行
                chain.doFilter(request, response);
                //放行后，后面的代码就不用执行了   return结束方法
                return;
            }
        }


        // 1.判断session中是否有user
        HttpSession session = req.getSession();
        Object user = session.getAttribute("user");

        //2.判断user是否为null
        if (user != null) {
            //登录过了
            //放行
            chain.doFilter(request, response);
        }else {
            //没有登陆，存储提示信息，跳转到登录页面

            req.setAttribute("login_msg","您尚未登陆!");
            req.getRequestDispatcher("/login.jsp").forward(req, response);
        }


    }

    @Override
    public void init(FilterConfig config) throws ServletException {
    }

    @Override
    public void destroy() {
    }
}
</code></pre> 
<h3 id="6.Listener%C2%A0">6.Listener </h3> 
<p>概念：Listener 表示监听器，是 JavaWeb 三大组件(Servlet、Filter、Listener)之一。</p> 
<p>监听器可以监听就是在application,session,request三个对象创建、销毁或者往其中添加修改删除属性时<span style="color:#fe2c24;"><strong>自动</strong></span>执行代码的功能组件</p> 
<p>Listener分类：JavaWeb中提供了8个监听器</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/58/ba/jMT6wf6J_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6a/69/ttr1f7d4_o.png"></p> 
<h4 id="6.1%E4%BB%A3%E7%A0%81%C2%A0">6.1代码 </h4> 
<pre><code class="language-java">package com.itheima.web.listener;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;

/**
 * @author wzq
 * @date 2022-08-23 15:48
 */

@WebListener
public class ContextLoaderListener implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        //加载资源
        System.out.println("ContextLoaderListener...");
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
//释放资源
    }
}
</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ba/31/UJHAozVC_o.png"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ecf3ed9981b3d46aa311040906e3414a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[Git]-如何提交 Pull Request(PR)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79a2b16bcf7a9be8806dd4edae09f4f5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">初探 NVMe</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>