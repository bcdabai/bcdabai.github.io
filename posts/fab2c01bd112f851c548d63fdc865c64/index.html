<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VMTK学习——02.基本的PYPES教程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VMTK学习——02.基本的PYPES教程" />
<meta property="og:description" content="写在这里的初衷，一是备忘，二是希望得到高人指点，三是希望能遇到志同道合的朋友。
目录 基本的PYPES教程 基本的PYPES教程 最新的稳定版本和开发版本
本教程将使您开始使用PypeS。建议的第一步是有效使用vmtk的第一步。
PypeS是vmtk脚本之间的粘合剂。它允许轻松编写新脚本并具有通用接口，但是最重要的是，它允许单个vmtk脚本相互交互，从而使vmtk模块化且灵活。
原始链接：http://www.vmtk.org/tutorials/PypesBasic.html
让我们键入vmtkmarchingcubes --help（给二进制包用户的注释：您可以在PypePad中键入相同的内容，也可以在命令行前添加vmtk，即在命令行中输入）。 vmtk vmtkmarchingcubes --help。将显示以下文本：
vmtkmarchingcubes --help Creating vmtkMarchingCubes instance. Automatic piping vmtkmarchingcubes Parsing options vmtkmarchingcubes vmtkmarchingcubes : generate an isosurface of given level from a 3D image Input arguments: -id Id(int,1); default=0: script id -handle Self (self,1): handle to self -disabled Disabled (bool,1); default=0: disable execution and piping -i Image (vtkImageData,1): the input image -ifile ImageInputFileName(str,1): filename for the default Image Reader -array ArrayName (str,1): name of the array to work with -l Level(float,1); default=0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fab2c01bd112f851c548d63fdc865c64/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-14T23:02:09+08:00" />
<meta property="article:modified_time" content="2021-03-14T23:02:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VMTK学习——02.基本的PYPES教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>写在这里的初衷，一是备忘，二是希望得到高人指点，三是希望能遇到志同道合的朋友。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#PYPES_5" rel="nofollow">基本的PYPES教程</a></li></ul> 
</div> 
<p></p> 
<hr color="#000000" size='1"'> 
<h2><a id="PYPES_5"></a>基本的PYPES教程</h2> 
<p><a href="http://www.vmtk.org/download/#binary_packages" rel="nofollow">最新的稳定版本</a>和<a href="http://www.vmtk.org/download/#development_version" rel="nofollow">开发版本</a><br> 本教程将使您开始使用PypeS。建议的第一步是有效使用vmtk的第一步。<br> PypeS是vmtk脚本之间的粘合剂。它允许轻松编写新脚本并具有通用接口，但是最重要的是，它允许单个vmtk脚本相互交互，从而使vmtk模块化且灵活。<br> <strong>原始链接</strong>：<a href="http://www.vmtk.org/tutorials/PypesBasic.html" rel="nofollow">http://www.vmtk.org/tutorials/PypesBasic.html</a><br> <img src="https://images2.imgbox.com/72/ab/rZk3lNb8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e7/d5/lMki8bwp_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>让我们键入<font color="#900">vmtkmarchingcubes --help</font>（给二进制包用户的注释：您可以在PypePad中键入相同的内容，也可以在命令行前添加vmtk，即在命令行中输入）。 <font color="#900">vmtk vmtkmarchingcubes --help</font>。将显示以下文本：</strong></p> 
</blockquote> 
<pre><code class="prism language-javascript">vmtkmarchingcubes <span class="token operator">--</span>help
Creating vmtkMarchingCubes instance<span class="token punctuation">.</span>
Automatic piping vmtkmarchingcubes
Parsing options vmtkmarchingcubes
vmtkmarchingcubes <span class="token punctuation">:</span> generate an isosurface <span class="token keyword">of</span> given level <span class="token keyword">from</span> a <span class="token number">3</span>D image
Input arguments<span class="token punctuation">:</span>
	<span class="token operator">-</span>id <span class="token function">Id</span><span class="token punctuation">(</span>int<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">:</span> script id
	<span class="token operator">-</span>handle <span class="token function">Self</span> <span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> handle to self
	<span class="token operator">-</span>disabled <span class="token function">Disabled</span> <span class="token punctuation">(</span>bool<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">:</span> disable execution and piping
	<span class="token operator">-</span>i <span class="token function">Image</span> <span class="token punctuation">(</span>vtkImageData<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> the input image
	<span class="token operator">-</span>ifile <span class="token function">ImageInputFileName</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> filename <span class="token keyword">for</span> the <span class="token keyword">default</span> Image Reader
	<span class="token operator">-</span>array <span class="token function">ArrayName</span> <span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> name <span class="token keyword">of</span> the array to work <span class="token keyword">with</span>
	<span class="token operator">-</span>l <span class="token function">Level</span><span class="token punctuation">(</span>float<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">:</span> graylevel to generate the isosurface at
	<span class="token operator">-</span>connectivity <span class="token function">Connectivity</span> <span class="token punctuation">(</span>bool<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">:</span> only output the largest connected region <span class="token keyword">of</span> the isosurface
	<span class="token operator">-</span>ofile <span class="token function">SurfaceOutputFileName</span> <span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> filename <span class="token keyword">for</span> the <span class="token keyword">default</span> Surface writer
Output arguments<span class="token punctuation">:</span>
	<span class="token operator">-</span>id <span class="token function">Id</span> <span class="token punctuation">(</span>int<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">default</span><span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">:</span> script id
	<span class="token operator">-</span>handle <span class="token function">Self</span> <span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> handle to self
	<span class="token operator">-</span>o <span class="token function">Surface</span> <span class="token punctuation">(</span>vtkPolyData<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> the output surface
</code></pre> 
<blockquote> 
 <p><strong>前三行记录了幕后发生的事情：创建了一个PypeS实例，该实例又创建了一个vmtkMarchingCubes实例，并负责将正确的参数传递给它。以下是vmtkmarchingcubes的帮助，以脚本名称，简短描述，输入参数列表和输出参数列表开头。它们依次作为命令行选项，相应的实例变量名称，其必需的类型，默认值和说明进行报告。</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/76/89/OnHOSXzl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/34/32/LBcFIqk9_o.png" alt="在这里插入图片描述"><br> <strong>通过使用内置的I / O功能，我们可以将vmtkmarchingcubes用作独立脚本</strong></p> 
<pre><code class="prism language-javascript">vmtkmarchingcubes <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp
</code></pre> 
<p><strong>或者我们可以构建一个做同样事情的pype</strong></p> 
<pre><code class="prism language-javascript">vmtkimagereader <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp
</code></pre> 
<blockquote> 
 <p>pype所做的是将每个脚本的自变量与最接近的前一个脚本的匹配自变量进行管道传递。当两个参数具有相同的类型并且其对应的实例变量具有相同的名称时，它们将匹配。阅读上述PypeS生成的日志将有助于澄清发生的情况。</p> 
</blockquote> 
<p><strong>假设我们要在将表面写入磁盘之前先显示该表面。让我们通过管道将查看器放在最后，然后</strong></p> 
<pre><code class="prism language-javascript">vmtkimagereader <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">--</span>pipe vmtksurfaceviewer <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp
</code></pre> 
<p><strong>以及在显示之前对表面进行平滑处理呢？</strong></p> 
<pre><code class="prism language-javascript">vmtkimagereader <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">--</span>pipe vmtksurfacesmoothing <span class="token operator">-</span>passband <span class="token number">0.1</span> <span class="token operator">-</span>iterations <span class="token number">30</span> <span class="token operator">--</span>pipe vmtksurfaceviewer <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp
</code></pre> 
<p><strong>另外，请注意，可以通过使用内置I / O功能来简化上述操作</strong></p> 
<pre><code class="prism language-javascript">vmtkmarchingcubes <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">--</span>pipe vmtksurfacesmoothing <span class="token operator">-</span>passband <span class="token number">0.1</span> <span class="token operator">-</span>iterations <span class="token number">30</span> <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp <span class="token operator">--</span>pipe vmtksurfaceviewer
</code></pre> 
<p><strong>除了在此处看到的自动管道连接之外，还可以通过使用@符号显式设置连接，然后使用我们要通过其进行管道传输的脚本名称，并在管道选项上加点。例如，如果我们要显示平滑的表面，但编写不平滑的表面而不更改脚本的顺序，请执行以下操作：</strong></p> 
<pre><code class="prism language-javascript">vmtkimagereader <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">--</span>pipe vmtksurfacesmoothing <span class="token operator">-</span>passband <span class="token number">0.1</span> <span class="token operator">-</span>iterations <span class="token number">30</span> <span class="token operator">--</span>pipe vmtksurfaceviewer <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>i @vmtkmarchingcubes<span class="token punctuation">.</span>o <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp
</code></pre> 
<p><strong>当一个引用当前脚本之前的脚本时，可以使用一种简写形式，即省略脚本名称，例如</strong></p> 
<pre><code class="prism language-javascript">vmtkimagereader <span class="token operator">-</span>ifile foo<span class="token punctuation">.</span>vti <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">--</span>pipe vmtksurfacesmoothing <span class="token operator">-</span>passband <span class="token number">0.1</span> <span class="token operator">-</span>iterations <span class="token number">30</span> <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>i @<span class="token punctuation">.</span>o <span class="token operator">-</span>ofile foo<span class="token punctuation">.</span>vtp
</code></pre> 
<blockquote> 
 <p><strong>在这种情况下，vmtksurfacewriter具有从vmtksurfacesmoothing的-o参数显式传递的-ifile参数。（在此示例中，显式管道的输出与自动管道的输出相同）。请谨慎使用此简写形式，因为如果稍后您决定要在vmtksurfacesmoothing和vmtksurfacewriter之间插入脚本，@。o最终将指向新插入的脚本。</strong></p> 
</blockquote> 
<p><strong>另一个功能解决了在同一个管道中具有相同名称的脚本之间进行区分的问题。说我们有两个地面读者和一个作家</strong></p> 
<pre><code class="prism language-javascript">vmtksurfacereader <span class="token operator">-</span>ifile foo1<span class="token punctuation">.</span>vtp <span class="token operator">--</span>pipe vmtksurfacereader <span class="token operator">-</span>ifile foo2<span class="token punctuation">.</span>vtp <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>ofile foo3<span class="token punctuation">.</span>vtp
</code></pre> 
<p><strong>在后一种情况下，编写器将编写来自第二个读取器的表面（自动管道机制将查找向后的第一个匹配参数）。为了手动指定我们要编写来自第一个阅读器的表面，我们可以为每个阅读器分配一个ID，然后使用脚本的ID将第一个阅读器的表面显式地传递给编写器</strong></p> 
<pre><code class="prism language-javascript">vmtksurfacereader <span class="token operator">-</span>ifile foo1<span class="token punctuation">.</span>vtp <span class="token operator">-</span>id <span class="token number">1</span> <span class="token operator">--</span>pipe vmtksurfacereader <span class="token operator">-</span>ifile foo2<span class="token punctuation">.</span>vtp <span class="token operator">-</span>id <span class="token number">2</span> <span class="token operator">--</span>pipe vmtksurfacewriter <span class="token operator">-</span>i @vmtksurfacereader<span class="token operator">-</span><span class="token number">1.</span>o <span class="token operator">-</span>ofile foo3<span class="token punctuation">.</span>vtp
</code></pre> 
<p><strong>最后一个功能是可以沿pype推送输入参数。假设我们要读取两个图像，并使用行进立方体提取水平为20的表面。我们可以写</strong></p> 
<pre><code class="prism language-javascript">vmtkmarchingcubes <span class="token operator">-</span>ifile foo1<span class="token punctuation">.</span>vti <span class="token operator">-</span>l <span class="token number">20</span> <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">-</span>ifile foo2<span class="token punctuation">.</span>vti <span class="token operator">-</span>l <span class="token number">20</span>
</code></pre> 
<p><strong>或以这种方式将输入参数-l推到第二个vmtkmarchingcubes</strong></p> 
<pre><code class="prism language-javascript">vmtkmarchingcubes <span class="token operator">-</span>ifile foo1<span class="token punctuation">.</span>vti <span class="token operator">-</span>l@ <span class="token number">20</span> <span class="token operator">--</span>pipe vmtkmarchingcubes <span class="token operator">-</span>ifile foo2<span class="token punctuation">.</span>vti
</code></pre> 
<p>在这个例子中，推送实际上并不是很方便，但是当事情变得复杂的时候，您会很高兴地进行推送。<br> 工具箱中的所有脚本都可以通过这种方式进行粘合（无论它们是否属于vmtk，只要它们是从PypeScript基类派生的）。您甚至可以编写自己的PypeScript派生工具，并使它们以相同的方式与vmtk交互（这将在以后的教程中介绍）。<br> 尽管示例中的脚本相互传递了VTK对象，但是PypeS并不了解什么是VTK。类型只是在PypeScript派生类中指定的字符串，因此，如果您想出于不同目的重用PypeS，则非常欢迎这样做。如果您想了解更多，只需看一下脚本，例如vmtk / vmtkScripts / vmtkmarchingcubes.py。这是一个很好的机会，可以欣赏每个脚本使一切正常运行所需的额外代码量很少的事实。如果您认为I / O，选项解析和用法打印会自动处理，那么所需的代码实际上会更少。<br> 现在，您准备好探索vmtk脚本。</p> 
<hr color="#000000" size='1"'> 
<p><strong>以上是自己通过网络查找及自身实践整理所得，大家有更好的建议，可以留言交流！</strong></p> 
<p><mark>转载或者引用本文内容请注明来源及原作者</mark></p> 
<blockquote> 
 <p><strong>翻译自</strong><br> <a href="http://www.vmtk.org/tutorials/PypesBasic.html" rel="nofollow">http://www.vmtk.org/tutorials/PypesBasic.html</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/17d1fe0f4215543f7969bf504b037eff/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一次破解TP-Link WAR308路由器的经历</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/642c9bae30e26347dfff433323369bf7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">perror()函数的运用（详解）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>