<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Linux--多线程同步与互斥】 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Linux--多线程同步与互斥】" />
<meta property="og:description" content="目录 一、线程互斥1.1相关概念介绍1.2互斥量mutex1.3互斥量接口1.3.1初始化互斥量1.3.2销毁互斥量1.3.3互斥量加锁1.3.4互斥量解锁1.3.5使用互斥量解决上面分苹果问题 1.4互斥原理 二、可重入与线程安全2.1相关概念2.2常见线程不安全的情况2.3常见不可重入的情况2.4 可重入与线程安全的关系 三、死锁四、线程同步4.1同步概念与竞态条件4.2条件变量4.2.1概念4.2.2接口4.2.2.1初始化条件变量4.2.2.2销毁条件变量4.2.2.2等待条件变量满足4.2.2.3唤醒等待4.2.2.5改进分苹果 一、线程互斥 1.1相关概念介绍 临界资源： 多线程执行流共享的资源叫做临界资源临界区： 每个线程内部访问临界资源的代码，被称为临界区互斥： 任何时刻，互斥保证有且只有一个执行流进入临界区访问临界资源，通常对临界资源起保护作用原子性： 不会被任何调度机制打断的操作，该操作只有两态：要么完成，要么未完成
为什么要有线程互斥？下面模拟下4人分苹果的代码。
代码： #include&lt;iostream&gt; using namespace std; #include&lt;pthread.h&gt; #include&lt;string&gt; #include&lt;vector&gt; #include&lt;unistd.h&gt; const int NUM=4; class ThreadDate { public: ThreadDate(string name) { _name=name; } string _name; }; int Apples=100; void* GetApple(void* args) { ThreadDate* td=static_cast&lt;ThreadDate*&gt;(args); while(1) { if(Apples&gt;0) { sleep(1); cout&lt;&lt;td-&gt;_name&lt;&lt;&#34;get a apple,apple number&#34;&lt;&lt;--Apples&lt;&lt;endl; } else break; } return nullptr; } int main() { vector&lt;pthread_t&gt; tids; vector&lt;ThreadDate*&gt; tds; for(int i=0;i&lt;NUM;i&#43;&#43;) { string name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ec8d3f95fefe7eea418bae0ea8dd7ab6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T19:34:04+08:00" />
<meta property="article:modified_time" content="2023-12-27T19:34:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Linux--多线程同步与互斥】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、线程互斥</a></li><li><ul><li><a href="#11_2" rel="nofollow">1.1相关概念介绍</a></li><li><a href="#12mutex_70" rel="nofollow">1.2互斥量mutex</a></li><li><a href="#13_80" rel="nofollow">1.3互斥量接口</a></li><li><ul><li><a href="#131_81" rel="nofollow">1.3.1初始化互斥量</a></li><li><a href="#132_95" rel="nofollow">1.3.2销毁互斥量</a></li><li><a href="#133_110" rel="nofollow">1.3.3互斥量加锁</a></li><li><a href="#134_124" rel="nofollow">1.3.4互斥量解锁</a></li><li><a href="#135_132" rel="nofollow">1.3.5使用互斥量解决上面分苹果问题</a></li></ul> 
   </li><li><a href="#14_206" rel="nofollow">1.4互斥原理</a></li></ul> 
  </li><li><a href="#_222" rel="nofollow">二、可重入与线程安全</a></li><li><ul><li><a href="#21_223" rel="nofollow">2.1相关概念</a></li><li><a href="#22_227" rel="nofollow">2.2常见线程不安全的情况</a></li><li><a href="#23_232" rel="nofollow">2.3常见不可重入的情况</a></li><li><a href="#24__236" rel="nofollow">2.4 可重入与线程安全的关系</a></li></ul> 
  </li><li><a href="#_241" rel="nofollow">三、死锁</a></li><li><a href="#_260" rel="nofollow">四、线程同步</a></li><li><a href="#41_261" rel="nofollow">4.1同步概念与竞态条件</a></li><li><a href="#42_268" rel="nofollow">4.2条件变量</a></li><li><ul><li><a href="#421_269" rel="nofollow">4.2.1概念</a></li><li><a href="#422_278" rel="nofollow">4.2.2接口</a></li><li><ul><li><a href="#4221_279" rel="nofollow">4.2.2.1初始化条件变量</a></li><li><a href="#4222_294" rel="nofollow">4.2.2.2销毁条件变量</a></li><li><a href="#4222_304" rel="nofollow">4.2.2.2等待条件变量满足</a></li><li><a href="#4223_314" rel="nofollow">4.2.2.3唤醒等待</a></li><li><a href="#4225_326" rel="nofollow">4.2.2.5改进分苹果</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、线程互斥</h2> 
<h3><a id="11_2"></a>1.1相关概念介绍</h3> 
<ul><li>临界资源： 多线程执行流共享的资源叫做临界资源</li><li>临界区： 每个线程内部访问临界资源的代码，被称为临界区</li><li>互斥： 任何时刻，互斥保证有且只有一个执行流进入临界区访问临界资源，通常对临界资源起保护作用</li><li>原子性： 不会被任何调度机制打断的操作，该操作只有两态：要么完成，要么未完成<br> 为什么要有线程互斥？下面模拟下4人分苹果的代码。<br> <strong>代码：</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pthread.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">const</span> <span class="token keyword">int</span> NUM<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ThreadDate</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">ThreadDate</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        _name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    string _name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> Apples<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">GetApple</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ThreadDate<span class="token operator">*</span> td<span class="token operator">=</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThreadDate<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Apples<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout<span class="token operator">&lt;&lt;</span>td<span class="token operator">-&gt;</span>_name<span class="token operator">&lt;&lt;</span><span class="token string">"get a apple,apple number"</span><span class="token operator">&lt;&lt;</span><span class="token operator">--</span>Apples<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

    vector<span class="token operator">&lt;</span>pthread_t<span class="token operator">&gt;</span> tids<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ThreadDate<span class="token operator">*</span><span class="token operator">&gt;</span> tds<span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        string name<span class="token operator">=</span><span class="token string">"thread"</span><span class="token operator">+</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ThreadDate<span class="token operator">*</span> td<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">ThreadDate</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tds<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>td<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pthread_t tid<span class="token punctuation">;</span>
        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span>GetApple<span class="token punctuation">,</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tids<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">pthread_join</span><span class="token punctuation">(</span>tids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>现象：</strong><br> <img src="https://images2.imgbox.com/76/f2/3dOxfIPo_o.png" alt="在这里插入图片描述"><br> <strong>产生该现象的原因：</strong><br> <img src="https://images2.imgbox.com/06/23/ChAQfwxq_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12mutex_70"></a>1.2互斥量mutex</h3> 
<p>若线程使用的数据是局部变量，变量的地址空间在线程栈空间内，变量归属单个线程，其他线程无法获得这种变量；但有些变量需要在线程间共享（共享变量），可以通过数据的共享，完成线程之间的交互。多个线程并发的操作共享变量就会带来一些问题</p> 
<p>要解决上述分苹果的问题，需要做到三点：</p> 
<p>代码必须有互斥行为：当代码进入临界区执行时，不允许其他线程进入该临界区。<br> 若多个线程同时要求执行临界区的代码，并且此时临界区没有线程在执行，那么只能允许一个线程进入该临界区<br> 若线程不在临界区中执行，那么该线程不能阻止其他线程进入临界区<br> 这时就需要一把锁，Linux中提供的这把锁被称为互斥量<br> <img src="https://images2.imgbox.com/12/34/qqFi9YfY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13_80"></a>1.3互斥量接口</h3> 
<h4><a id="131_81"></a>1.3.1初始化互斥量</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span>pthread_mutex_t <span class="token operator">*</span>restrict mutex<span class="token punctuation">,</span> <span class="token keyword">const</span> pthread_mutexattr_t <span class="token operator">*</span>restrict attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数：</strong></p> 
<ul><li>mutex：需要初始化的互斥量的地址</li><li>attr：初始化互斥量的属性，一般设置为nullptr即可<br> <strong>返回值：</strong></li><li>互斥量初始化成功返回0，失败返回错误码<br> 使用pthread_mutex_init()函数初始化互斥量的方式被称为动态分配，还可以使用静态分配进行初始化，即下面这种方式：</li></ul> 
<pre><code class="prism language-cpp">pthread_mutex_t mutex <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="132_95"></a>1.3.2销毁互斥量</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span>pthread_mutex_t <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数mutex</strong>：需要销毁的互斥量的地址</p> 
<p><strong>返回值</strong>：互斥量销毁成功返回0，失败返回错误码</p> 
<p><strong>注意：</strong></p> 
<ul><li>使用PTHREAD_MUTEX_INITIALIZER初始化的互斥量不需要销毁</li><li>不要销毁一个已经加锁的互斥量</li><li>已经销毁的互斥量，要确保后面不会有线程再尝试加锁</li></ul> 
<h4><a id="133_110"></a>1.3.3互斥量加锁</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span>pthread_mutex_t <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数mutex</strong>：需要加锁的互斥量的地址</p> 
<p><strong>返回值</strong>：互斥量加锁成功返回0，失败返回错误码</p> 
<p><strong>注意：</strong></p> 
<ul><li>互斥量处于未锁状态时，该函数会将互斥量锁定，同时返回成功</li><li>发起函数调用时，若其他线程已经锁定互斥量，或者存在其他线程同时申请互斥量，但没有竞争到互斥量，那么线程会在pthread_mutex_lock()函数内部阻塞至互斥量解锁</li></ul> 
<h4><a id="134_124"></a>1.3.4互斥量解锁</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span>pthread_mutex_t <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数mutex</strong>：需要解锁的互斥量的地址</p> 
<p><strong>返回值</strong>：互斥量解锁成功返回0，失败返回错误码</p> 
<h4><a id="135_132"></a>1.3.5使用互斥量解决上面分苹果问题</h4> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pthread.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">const</span> <span class="token keyword">int</span> NUM<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ThreadDate</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">ThreadDate</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span>pthread_mutex_t<span class="token operator">*</span> lock<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        _name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        _lock<span class="token operator">=</span>lock<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    string _name<span class="token punctuation">;</span>
    pthread_mutex_t<span class="token operator">*</span> _lock<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> Apples<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">GetApple</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ThreadDate<span class="token operator">*</span> td<span class="token operator">=</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThreadDate<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Apples<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//sleep(1);</span>
            cout<span class="token operator">&lt;&lt;</span>td<span class="token operator">-&gt;</span>_name<span class="token operator">&lt;&lt;</span><span class="token string">"get a apple,apple number"</span><span class="token operator">&lt;&lt;</span>Apples<span class="token operator">--</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> 
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    pthread_mutex_t lock<span class="token punctuation">;</span>
    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>pthread_t<span class="token operator">&gt;</span> tids<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ThreadDate<span class="token operator">*</span><span class="token operator">&gt;</span> tds<span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        string name<span class="token operator">=</span><span class="token string">"thread"</span><span class="token operator">+</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ThreadDate<span class="token operator">*</span> td<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">ThreadDate</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tds<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>td<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pthread_t tid<span class="token punctuation">;</span>
        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span>GetApple<span class="token punctuation">,</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tids<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">pthread_join</span><span class="token punctuation">(</span>tids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>写这个代码的时候出现了一个乌龙。写到这里复盘以下，顺便提一嘴，多线程写代码时考虑的是要多一点。<br> <img src="https://images2.imgbox.com/0e/8f/Ibvd9coJ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="14_206"></a>1.4互斥原理</h3> 
<p>引入互斥量后，当一个线程申请到锁进入临界区时，在其他线程看来该线程只有两种状态，要么没有申请锁，要么锁已经释放了，因为只有这两种状态对其他线程才是有意义的。</p> 
<p>例如，图中线程1进入临界区后，在线程2、3、4看来，线程1要么没有申请锁，要么线程1已经将锁释放了，因为只有这两种状态对线程2、3、4才是有意义的，当线程2、3、4检测到其他状态(线程1持有锁)时也就被阻塞了。此时对于线程2、3、4而言，线程1的整个操作过程是原子的<br> <img src="https://images2.imgbox.com/63/3c/vvm1YxE2_o.png" alt="在这里插入图片描述"><br> <strong>临界区内的线程可能被切换吗？</strong><br> 临界区内的线程是可能进行线程切换。但即便该线程被切走，其他线程也无法进入临界区进行资源访问，因为此时该线程是拿着锁被切走的，锁没有被释放也就意味着其他线程无法申请到锁，也就无法进入临界区进行资源访问了。<br> <strong>互斥锁是否需要被保护？</strong><br> 既然锁是临界资源，那么锁就必须被保护起来，但锁本身就是用来保护临界资源的，那锁又由谁来保护的呢？</p> 
<p>锁实际上是自己保护自己的，只需要保证申请锁的过程是原子的，那么锁就是安全的<br> <strong>如何保证申请锁是原子的？</strong><br> 为了实现互斥锁操作，大多数体系结构都提供了swap或exchange指令，该指令的作用就是把寄存器和内存单元的数据相交换。由于只有一条指令，保证了原子性。<br> <strong>lock和unlock的伪代码：</strong><br> <img src="https://images2.imgbox.com/51/a1/gZ4L81NR_o.png" alt="d6160.png)"><br> <img src="https://images2.imgbox.com/a8/ac/GtdUhqR7_o.png" alt="6c7540cf84ddb60b3d828201.png)"></p> 
<h2><a id="_222"></a>二、可重入与线程安全</h2> 
<h3><a id="21_223"></a>2.1相关概念</h3> 
<ul><li>线程安全： 多个线程并发同一段代码时，不会出现不同的结果</li><li>重入：同一个函数被不同的执行流调用，当前一个流程还没有执行完，就有其他的执行流再次进入，称之为重入。一个函数在重入的情况下，运行结果不会出现任何不同或者任何问题，则该函数被称为可重入函数，否则是不可重入函数。</li></ul> 
<h3><a id="22_227"></a>2.2常见线程不安全的情况</h3> 
<ul><li>不保护共享变量的函数</li><li>函数状态随着被调用，状态发生变化的函数</li><li>返回指向静态变量指针的函数</li><li>调用线程不安全函数的函数</li></ul> 
<h3><a id="23_232"></a>2.3常见不可重入的情况</h3> 
<ul><li>调用了malloc/free函数，因为malloc函数是用全局链表来管理堆的</li><li>调用了标准I/O库函数，标准I/O可以的很多实现都是以不可重入的方式使用全局数据结构</li><li>函数体内使用了静态的数据结构</li></ul> 
<h3><a id="24__236"></a>2.4 可重入与线程安全的关系</h3> 
<ul><li>线程安全不一定是可重入的，而可重入函数则一定是线程安全的（可重入函数是线程安全函数的一种）</li><li>函数是不可重入的，那就不能由多个线程使用，有可能引发线程安全问题</li><li>若一个函数中有全局变量，那么这个函数既不是线程安全也不是可重入的</li><li>若对临界资源的访问加上锁，则这个函数是线程安全的，但如果这个重入函数的锁还未释放则会产生死锁，因此是不可重入的</li></ul> 
<h2><a id="_241"></a>三、死锁</h2> 
<p>死锁是指在一组进程中的各个进程均占有不会释放的资源，但因互相申请被其他进程所占用不会释放的资源而处于的一种永久等待状态<br> <strong>一个锁锁死</strong><br> <img src="https://images2.imgbox.com/45/62/wSvSZav9_o.png" alt="在这里插入图片描述"><br> <strong>多个锁锁死</strong><br> 线程A申请锁资源的顺序为：锁1、锁2；线程B申请锁资源的顺序为：锁2、锁1</p> 
<p>当线程A申请到锁1准备申请锁2时，线程B已申请到锁2准备申请锁1，这时两个线程都会因为申请锁失败而陷入阻塞，并且无法释放锁，进入死锁状态<br> <strong>产生死锁的条件：</strong></p> 
<ul><li>互斥条件： 一个资源每次只能被一个执行流使用</li><li>请求与保持条件： 一个执行流因请求资源而阻塞时，对已获得的资源保持不放</li><li>不剥夺条件： 一个执行流已获得的资源，在未使用完之前，不能强行剥夺</li><li>循环等待条件： 若干执行流之间形成一种头尾相接的循环等待资源的关系<br> <strong>避免死锁</strong></li><li>破坏死锁的四个必要条件</li><li>加锁顺序一致</li><li>避免锁未释放的场景</li><li>资源一次性分配</li></ul> 
<h2><a id="_260"></a>四、线程同步</h2> 
<h2><a id="41_261"></a>4.1同步概念与竞态条件</h2> 
<p>同步： 在保证数据安全的前提下，让线程能够按照某种特定的顺序访问临界资源，从而有效避免饥饿问题，这就叫做同步<br> 竞态条件： 因为时序问题，而导致程序异常，我们称之为竞态条件</p> 
<ul><li>单纯的加锁是会存在某些问题的，若某个线程的优先级较高或竞争力较强，每次都能够申请到锁，但申请到锁之后什么也不做，那么这个线程就一直在申请锁和释放锁，这就可能导致其他线程长时间竞争不到锁，引起饥饿问题</li><li>单纯的加锁是没有错的，它能够保证在同一时间只有一个线程进入临界区，但它没有高效的让每一个线程使用这份临界资源</li><li>现在增加一个规则，当一个线程释放锁后，这个线程不能立马再次申请锁，该线程必须排到这个锁的资源等待队列的最后</li><li>增加这个规则之后，下一个获取到锁的资源的线程就一定是在资源等待队列首部的线程，若有十个线程，就能够让这十个线程按照某种次序进行临界资源的访问</li></ul> 
<h2><a id="42_268"></a>4.2条件变量</h2> 
<h3><a id="421_269"></a>4.2.1概念</h3> 
<p>条件变量是利用线程间共享的全局变量进行同步的一种机制，条件变量是用来描述某种资源是否就绪的一种数据化描述</p> 
<p>条件变量主要包括两个动作：</p> 
<ul><li>一个线程等待条件变量的条件成立而被挂起</li><li>另一个线程使条件成立后唤醒等待的线程</li></ul> 
<p>条件变量通常需要配合互斥锁一起使用</p> 
<h3><a id="422_278"></a>4.2.2接口</h3> 
<h4><a id="4221_279"></a>4.2.2.1初始化条件变量</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_cond_init</span><span class="token punctuation">(</span>pthread_cond_t <span class="token operator">*</span>restrict cond<span class="token punctuation">,</span> <span class="token keyword">const</span> pthread_condattr_t <span class="token operator">*</span>restrict attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数：</strong></p> 
<ul><li>cond：需要初始化的条件变量的地址</li><li>attr：初始化条件变量的属性，一般设置为NULL即可</li></ul> 
<p><strong>返回值</strong>：条件变量初始化成功返回0，失败返回错误码</p> 
<p>使用pthread_cond_init()函数初始化条件的方式被称为动态分配，还可以使用静态分配进行初始化，即下面这种方式：</p> 
<pre><code class="prism language-cpp">pthread_cond_t cond <span class="token operator">=</span> PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="4222_294"></a>4.2.2.2销毁条件变量</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_cond_destroy</span><span class="token punctuation">(</span>pthread_cond_t <span class="token operator">*</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数cond</strong>：需要销毁的条件变量的地址</p> 
<p><strong>返回值</strong>：条件变量销毁成功返回0，失败返回错误码</p> 
<p><strong>注意</strong>：使用PTHREAD_COND_INITIALIZER初始化的条件变量不需要销毁</p> 
<h4><a id="4222_304"></a>4.2.2.2等待条件变量满足</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span>pthread_cond_t <span class="token operator">*</span>restrict cond<span class="token punctuation">,</span> pthread_mutex_t <span class="token operator">*</span>restrict mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>参数：</strong></p> 
<ul><li>cond：需要等待的条件变量的地址</li><li>mutex：当前线程所处临界区对应的互斥锁</li></ul> 
<p><strong>返回值</strong>：函数调用成功返回0，失败返回错误码</p> 
<h4><a id="4223_314"></a>4.2.2.3唤醒等待</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">pthread_cond_broadcast</span><span class="token punctuation">(</span>pthread_cond_t <span class="token operator">*</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span>pthread_cond_t <span class="token operator">*</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>pthread_cond_signal()函数用于唤醒该条件变量等待队列中首个线程</li><li>pthread_cond_broadcast()函数用于唤醒该条件变量等待队列中的全部线程</li></ul> 
<p><strong>参数cond</strong>：唤醒在cond条件变量下等待的线程</p> 
<p><strong>返回值</strong>：函数调用成功返回0，失败返回错误码</p> 
<h4><a id="4225_326"></a>4.2.2.5改进分苹果</h4> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pthread.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">const</span> <span class="token keyword">int</span> NUM<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>

pthread_cond_t cond<span class="token operator">=</span>PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span>


<span class="token keyword">class</span> <span class="token class-name">ThreadDate</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span> 
    <span class="token function">ThreadDate</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span>pthread_mutex_t<span class="token operator">*</span> lock<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        _name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        _lock<span class="token operator">=</span>lock<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    string _name<span class="token punctuation">;</span>
    pthread_mutex_t<span class="token operator">*</span> _lock<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> Apples<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> flag<span class="token operator">=</span>NUM<span class="token punctuation">;</span>
<span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">GetApple</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ThreadDate<span class="token operator">*</span> td<span class="token operator">=</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThreadDate<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">,</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//线程在等待队列的时候会自动释放锁</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Apples<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>td<span class="token operator">-&gt;</span>_name<span class="token operator">&lt;&lt;</span><span class="token string">"get a apple,apple number"</span><span class="token operator">&lt;&lt;</span>Apples<span class="token operator">--</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> 
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>td<span class="token operator">-&gt;</span>_name<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token operator">&lt;&lt;</span><span class="token string">"quit!"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">,</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    flag<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span>td<span class="token operator">-&gt;</span>_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    pthread_mutex_t lock<span class="token punctuation">;</span>
    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>pthread_t<span class="token operator">&gt;</span> tids<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ThreadDate<span class="token operator">*</span><span class="token operator">&gt;</span> tds<span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        string name<span class="token operator">=</span><span class="token string">"thread"</span><span class="token operator">+</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ThreadDate<span class="token operator">*</span> td<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">ThreadDate</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tds<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>td<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pthread_t tid<span class="token punctuation">;</span>
        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span>GetApple<span class="token punctuation">,</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tids<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">pthread_join</span><span class="token punctuation">(</span>tids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pthread_cond_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/382ff4232cec341851eaa631427cb34b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js获取url后的参数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32287bef2e3bee7f2a6ba2e7ec6944cb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">多模态医学图像数据集</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>