<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于RESTful API的一些思考与疑问 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于RESTful API的一些思考与疑问" />
<meta property="og:description" content="最近在研究API规范的最佳实践。发现关于RESTful API规范的信息甚是模糊，没有一个明确的权威的说法，至少国内搜到的信息是这样的。比如下面的三篇文章，其中的内容差异很大，甚至相反（比如PUT和POST的用法），有此可见整个RESTful API规范实现的乱象。
RESTful API 规范 v1.0
Restful API 的设计规范
REST API URI的七大设计原则
其实RESTful API并没有一个权威的标准（至少笔者没有查到），REST只是一个抽象概念，RESTful API相当于其具体应用实现，既然没有绝对的标准，那么今天就来讨论一下吧。
1、是否启用PUT、DELETE？修改和创建，哪个用PUT哪个用POST？ 参考：POST增、GET查、DELETE删、PUT改
eg：GET /companies、GET /companies/3、POST /companies/3、DELETE /companies/3、PUT /companies/3
讨论：HTTP 1.1 这个版本是当前版本，包含GET(0.9) HEAD(1.0) POST(1.0) OPTIONS PUT DELETE TRACE CONNECT这8个方法，兼容性是毫无问题的。但是POST和PUT的区别是什么？
2、是否可以有动词？名词单数还是复数？ 参考：不应该有动词（用POST、GET、DELETE、PUT区分），全是名词复数。
eg：/companies/3/employees/45
讨论：这样看起来的确优雅，但是下面的场景如何处理呢。
详情页与编辑页（浏览器地址）如何设计？例：员工列表-&gt;员工详情 / 员工编辑详情页就是子层级的列表页时如何设计？例：公司列表-&gt;公司详情（就是部门列表）-&gt;部门详情（就是员工列表）-&gt;员工详情tabs怎么办？用query？ 3、单词连接用&#34;-&#34;横线、&#34;_&#34;下划线，还是驼峰？ 参考：用横线&#34;-&#34;，防止整个地址有超链接下划线时&#34;_&#34;看不出，RFC 3986将URI定义为区分大小写，但scheme 和 host components除外。
eg：/salary-records/3/paybill-details/34
讨论：python的变量推荐用&#34;_&#34;，这种习惯会被带到这里；另外，返回的数据里的key是否应该采用驼峰？eslint的报错很烦的。
4、结尾应不应该包含斜杠“/”？ 参考：不加
讨论：在地址栏与API中，以&#34;/&#34;为结尾有何区别？
5、地址栏的URL与API的get请求如何区分？ 参考：用域名区分
eg：https://www.example.com/companies/3 、 https://apis.example.com/companies/3
讨论：会不会混淆或有其他副作用？另外还有2当中讨论的第一个场景。
6、是否与http统一状态码？ 参考：返回状态码推荐标准HTTP状态码
有很多服务器将返回状态码一直设为200，然后在返回body里面自定义一些状态码来表示服务器返回结果的状态码。由于rest api是直接使用的HTTP协议，所以它的状态码也要尽量使用HTTP协议的状态码。
eg：200 OK 服务器返回用户请求的数据，该操作是幂等的
201 CREATED 新建或者修改数据成功
204 NOT CONTENT 删除数据成功" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/988930d8b3d2274dae9df578914b3fc2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-28T18:06:26+08:00" />
<meta property="article:modified_time" content="2018-06-28T18:06:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于RESTful API的一些思考与疑问</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近在研究API规范的最佳实践。发现关于RESTful API规范的信息甚是模糊，没有一个明确的权威的说法，至少国内搜到的信息是这样的。比如下面的三篇文章，其中的内容差异很大，甚至相反（比如PUT和POST的用法），有此可见整个RESTful API规范实现的乱象。<br></p> 
<p><a href="http://imweb.io/topic/5707561f06f2400432c139a5" rel="nofollow">RESTful API 规范 v1.0<br></a></p> 
<p><a href="http://novoland.github.io/%E8%AE%BE%E8%AE%A1/2015/08/17/Restful%20API%20%E7%9A%84%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83.html" rel="nofollow">Restful API 的设计规范<br></a></p> 
<p><a href="https://blog.csdn.net/qiansg123/article/details/80130206">REST API URI的七大设计原则</a></p> 
<p>其实RESTful API并没有一个权威的标准（至少笔者没有查到），REST只是一个抽象概念，RESTful API相当于其具体应用实现，既然没有绝对的标准，那么今天就来讨论一下吧。</p> 
<h5>1、是否启用PUT、DELETE？修改和创建，哪个用PUT哪个用POST？</h5> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>参考：</strong>POST增、GET查、DELETE删、PUT改</p> 
 <p><strong>eg：</strong>GET /companies、GET /companies/3、POST /companies/3、DELETE /companies/3、PUT /companies/3</p> 
</blockquote> 
<blockquote style="border:none;"> 
 <p></p> 
 <p><strong>讨论：</strong>HTTP 1.1 这个版本是当前版本，包含GET(0.9) HEAD(1.0) POST(1.0) OPTIONS PUT DELETE TRACE CONNECT这8个方法，兼容性是毫无问题的。但是POST和PUT的区别是什么？</p> 
</blockquote> 
<h5>2、是否可以有动词？名词单数还是复数？</h5> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>参考：</strong>不应该有动词（用POST、GET、DELETE、PUT区分），全是名词复数。</p> 
 <p><strong>eg：</strong>/companies/3/employees/45</p> 
</blockquote> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>讨论：</strong>这样看起来的确优雅，但是下面的场景如何处理呢。</p> 
 <p></p> 
 <ul><li>详情页与编辑页（浏览器地址）如何设计？例：员工列表-&gt;员工详情 / 员工编辑</li><li>详情页就是子层级的列表页时如何设计？例：公司列表-&gt;公司详情（就是部门列表）-&gt;部门详情（就是员工列表）-&gt;员工详情</li><li>tabs怎么办？用query？</li></ul> 
</blockquote> 
<h5>3、单词连接用"-"横线、"_"下划线，还是驼峰？</h5> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>参考：</strong>用横线"-"，防止整个地址有超链接下划线时"_"看不出，RFC 3986将URI定义为区分大小写，但scheme 和 host components除外。</p> 
 <p><strong>eg：</strong>/salary-records/3/paybill-details/34</p> 
</blockquote> 
<blockquote style="border:none;"> 
 <p><strong>讨论：</strong>python的变量推荐用"_"，这种习惯会被带到这里；另外，返回的数据里的key是否应该采用驼峰？eslint的报错很烦的。</p> 
</blockquote> 
<h5>4、结尾应不应该包含斜杠“/”？</h5> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>参考：</strong>不加</p> 
 <p><strong>讨论：</strong>在地址栏与API中，以"/"为结尾有何区别？</p> 
</blockquote> 
<p></p> 
<h5>5、地址栏的URL与API的get请求如何区分？</h5> 
<blockquote style="border:none;"> 
 <p></p> 
 <p><strong>参考：</strong>用域名区分</p> 
 <p><strong>eg：</strong>https://www.example.com/companies/3 、 https://apis.example.com/companies/3</p> 
 <p><strong>讨论：</strong>会不会混淆或有其他副作用？另外还有2当中讨论的第一个场景。</p> 
</blockquote> 
<h5>6、是否与http统一状态码？</h5> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>参考：</strong>返回状态码推荐标准HTTP状态码</p> 
 <p>有很多服务器将返回状态码一直设为200，然后在返回body里面自定义一些状态码来表示服务器返回结果的状态码。由于rest api是直接使用的HTTP协议，所以它的状态码也要尽量使用HTTP协议的状态码。</p> 
 <p><strong>eg：</strong>200 OK 服务器返回用户请求的数据，该操作是幂等的</p> 
 <p>201 CREATED 新建或者修改数据成功</p> 
 <p>204 NOT CONTENT 删除数据成功</p> 
 <p>400 BAD REQUEST 用户发出的请求有问题，该操作是幂等的</p> 
 <p>401 Unauthoried 表示用户没有认证，无法进行操作</p> 
 <p>403 Forbidden 用户访问是被禁止的</p> 
 <p>422 Unprocesable Entity 当创建一个对象时，发生一个验证错误</p> 
 <p>500 INTERNAL SERVER ERROR 服务器内部错误，用户将无法判断发出的请求是否成功</p> 
 <p>503 Service Unavailable 服务不可用状态，多半是因为服务器问题，例如CPU占用率大，等等</p> 
 <p><strong>讨论：</strong>现在的success=true，个人觉得信息量不足。</p> 
</blockquote> 
<p></p> 
<h5>7、版本控制放在URL中还是HEADER中？</h5> 
<p></p> 
<blockquote style="border:none;"> 
 <p><strong>讨论：</strong>现在的payroll是放在URL中</p> 
 <p><br></p> 
</blockquote> 
<span style="font-size:20px;"><strong>8、非标准RESTful API真的不好吗？</strong></span> 
<br> 
<blockquote style="border:none;"> 
 <p>/companies/3/departments/15/employees/45</p> 
 <p>VS</p> 
 <p>/employee?company=3&amp;depart=15&amp;employee=45</p> 
</blockquote> 
<blockquote style="border:none;"> 
 <p>请参考另一篇文章，并留下宝贵意见<a href="https://blog.csdn.net/zhaolandelong/article/details/80805543">params与query分别适合于何种场景？</a></p> 
</blockquote> 
<p><br></p> 
<p>参考文献：</p> 
<p><a href="https://hackernoon.com/restful-api-designing-guidelines-the-best-practices-60e1d954e7c9" rel="nofollow">RESTful API Designing guidelines — The best practices<br></a></p> 
<p><a href="https://blog.csdn.net/qiansg123/article/details/80130206">RESTful Web Services Cookbook中文版</a>（这书好烂）</p> 
<p><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" rel="nofollow">理解RESTful架构——阮一峰</a><br></p> 
<p><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" rel="nofollow">RESTful API 设计指南——阮一峰</a><br></p> 
<p><br></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6d534cce4655ae020c8f424dba3b0ad2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">类和类之间的关系</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/66702cb40b932edd2b2809890a497714/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">汇编语言程序设计之二</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>