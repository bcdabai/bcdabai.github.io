<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SQLITE语法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SQLITE语法" />
<meta property="og:description" content="一、基本语法 创建数据库 : create database basename
删除数据库 : drop database dbname
创建新表 : create table tablename(col1 type1 [not null] [primary key],col2 type2 [not null],..)
创建相似表 :
1：create table tab_new like tab_old (使用旧表创建新表)
2：create table tab_new as select col1,col2… from tab_old definition only
删除新表 : drop table tabname 增加一个列 : Alter table tabname add column type
添加主键：Alter table tabname add primary key(col) 删除主键：Alter table tabname drop primary key(col) 创建索引：create [unique] index idxname on tabname(col…." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1d4d0a3a64aa490962afb81f77834b2a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-26T16:58:07+08:00" />
<meta property="article:modified_time" content="2020-10-26T16:58:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SQLITE语法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>一、基本语法</strong></h2> 
<p><span style="color:#7c79e5;">创建数据库</span><strong> : create database <span style="color:#86ca5e;">basename</span></strong><br><span style="color:#7c79e5;">删除数据库</span><strong> : drop database <span style="color:#86ca5e;">dbname</span></strong><br><span style="color:#7c79e5;">创建新表</span><strong> : create table <span style="color:#86ca5e;">tablename</span>(<span style="color:#86ca5e;">col1 type1 [not null] [primary key]</span>,<span style="color:#86ca5e;">col2 type2 [not null]</span>,<span style="color:#86ca5e;">..</span>)</strong></p> 
<p><span style="color:#7c79e5;">创建相似表</span><strong> :<br> 1：create table <span style="color:#86ca5e;">tab_new</span> like <span style="color:#86ca5e;">tab_old</span> (使用旧表创建新表)<br> 2：create table<span style="color:#86ca5e;"> tab_new</span> as select <span style="color:#86ca5e;">col1,col2…</span> from <span style="color:#86ca5e;">tab_old</span> definition only</strong></p> 
<p><br><span style="color:#7c79e5;">删除新表</span><strong> : drop table <span style="color:#86ca5e;">tabname</span> </strong><br><span style="color:#7c79e5;">增加一个列</span><strong> : Alter table <span style="color:#86ca5e;">tabname</span> add <span style="color:#86ca5e;">column</span> <span style="color:#86ca5e;">type</span></strong></p> 
<p><br><span style="color:#7c79e5;">添加主键</span>：<strong>Alter table <span style="color:#86ca5e;">tabname</span> add primary key(<span style="color:#86ca5e;">col</span>) </strong><br><span style="color:#7c79e5;">删除主键</span>：<strong>Alter table <span style="color:#86ca5e;">tabname</span> drop primary key(<span style="color:#86ca5e;">col</span>) </strong><br><span style="color:#7c79e5;">创建索引</span>：<strong>create [unique] index <span style="color:#86ca5e;">idxname</span> on <span style="color:#86ca5e;">tabname</span>(<span style="color:#86ca5e;">col….</span>) </strong><br><span style="color:#7c79e5;">删除索引</span>：<strong>drop index <span style="color:#86ca5e;">idxname</span></strong><br> 注：索引是不可更改的，想更改必须删除重新建。<br><span style="color:#7c79e5;">创建视图</span>：<strong>create view <span style="color:#86ca5e;">viewname</span> as select <span style="color:#86ca5e;">statement </span></strong><br><span style="color:#7c79e5;">删除视图</span>：<strong>drop view <span style="color:#86ca5e;">viewname</span></strong></p> 
<h2><br><strong>二、简单sql语句</strong></h2> 
<table border="1" cellpadding="1" cellspacing="1"><caption>
   简单SQL语句 
 </caption><thead><tr><th style="width:152px;"><strong>选择</strong></th><th><strong>select * from <span style="color:#86ca5e;">table1</span> where <span style="color:#86ca5e;">条件</span></strong></th></tr></thead><tbody><tr><td style="width:152px;"><strong>插入</strong></td><td><strong>insert into <span style="color:#86ca5e;">table1(field1,field2)</span> values(<span style="color:#86ca5e;">value1,value2</span>)</strong></td></tr><tr><td style="width:152px;"><strong>删除</strong></td><td><strong>delete from <span style="color:#86ca5e;">table1</span> where <span style="color:#86ca5e;">条件</span></strong></td></tr><tr><td style="width:152px;"><strong>更新</strong></td><td><strong>update <span style="color:#86ca5e;">table1</span> set <span style="color:#86ca5e;">field1=value1</span> where <span style="color:#86ca5e;">条件</span></strong></td></tr><tr><td style="width:152px;"><strong>查找</strong></td><td><strong>select * from <span style="color:#86ca5e;">table1</span> where <span style="color:#86ca5e;">field1</span> like <span style="color:#86ca5e;">’%value1%’</span> </strong></td></tr><tr><td style="width:152px;"><strong>排序</strong></td><td><strong>select * from <span style="color:#86ca5e;">table1</span> order by <span style="color:#86ca5e;">field1,field2 [desc]</span> 降序</strong></td></tr><tr><td style="width:152px;"><strong>总数</strong></td><td><strong>select count as totalcount from <span style="color:#86ca5e;">table1</span></strong></td></tr><tr><td style="width:152px;"><strong>求和</strong></td><td><strong>select sum(<span style="color:#86ca5e;">field1</span>) as sumvalue from <span style="color:#86ca5e;">table1</span></strong></td></tr><tr><td style="width:152px;"><strong>平均</strong></td><td><strong>select avg(<span style="color:#86ca5e;">field1</span>) as avgvalue from <span style="color:#86ca5e;">table1</span></strong></td></tr><tr><td style="width:152px;"><strong>最大</strong></td><td><strong>select max(<span style="color:#86ca5e;">field1</span>) as maxvalue from <span style="color:#86ca5e;">table1</span></strong></td></tr><tr><td style="width:152px;"><strong>最小</strong></td><td><strong>select min(<span style="color:#86ca5e;">field1</span>) as minvalue from <span style="color:#86ca5e;">table1</span></strong></td></tr></tbody></table> 
<h2><br>  </h2> 
<h2><strong>三、布尔运算</strong></h2> 
<p><strong>合并： UNION </strong></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td><strong>UNION</strong></td><td>合并会消除重复项。</td></tr><tr><td><strong>UNION ALL</strong></td><td>不消除重复项</td></tr></tbody></table> 
<p>                <br><strong>排除： EXCEPT<br>             EXCEPT</strong>   包括所有在 TABLE1 中但不在 TABLE2 中的行并消除所有重复行而派生出一个结果表。</p> 
<p>            <strong>EXCEPT ALL</strong>   不消除重复行。</p> 
<p><br><strong>交集：INTERSECT<br>            INTERSECT</strong>    运算符通过只包括 TABLE1 和 TABLE2 中都有的行并消除所有重复行而派生出一个结果表。</p> 
<p>          <strong> INTERSECT ALL</strong>   不消除重复行。<br><span style="color:#f33b45;"><strong>注：使用运算词的几个查询结果行必须是一致的。</strong> </span></p> 
<h2><br><strong>四、连接 </strong></h2> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><strong>left （outer） join</strong></td><td> <p><strong>结果集几包括连接表的匹配行，也包括左连接表的所有行。</strong></p> <p><strong>select a.a, a.b, a.c, b.c, b.d, b.f from a LEFT OUT JOIN b ON a.a = b.c</strong></p> </td></tr><tr><td><strong>right （outer） join</strong></td><td><strong>右外连接(右连接)：结果集既包括连接表的匹配连接行，也包括右连接表的所有行。 </strong></td></tr><tr><td><strong>full/cross （outer） join</strong></td><td><strong>全外连接：不仅包括符号连接表的匹配行，还包括两个连接表中的所有记录。</strong></td></tr><tr><td><strong>Group by</strong></td><td><strong>一张表，一旦分组 完成后，查询后只能得到组相关的信息</strong></td></tr></tbody></table> 
<p> </p> 
<p><strong> </strong></p> 
<h2><strong>五、常见应用</strong></h2> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><strong>法一：select * into b from a where 1&lt;&gt;1<br> 法二：select top 0 * into b from a</strong></td><td style="width:667px;"><strong>复制表(只复制结构,源表名：a 新表名：b) </strong></td></tr><tr><td><strong>insert into b(a, b, c) select d,e,f from b;</strong></td><td style="width:667px;"><strong>拷贝表(拷贝数据,源表名：a 目标表名：b) (Access可用)</strong></td></tr><tr><td><strong>insert into b(a, b, c) select d,e,f from b in ‘具体数据库’ where 条件</strong></td><td style="width:667px;"><strong>跨数据库之间表的拷贝(具体数据使用绝对路径) (Access可用)</strong></td></tr><tr><td> <p><strong>select a,b,c from a where a IN (select d from b ) </strong></p> <p><strong>select a,b,c from a where a IN (1,2,3)</strong></p> </td><td style="width:667px;"><strong>子查询(表名1：a 表名2：b)</strong></td></tr><tr><td><strong>select a.title,a.username,b.adddate from table a,(select max(adddate) adddate from table where table.title=a.title) b</strong></td><td style="width:667px;"><strong>显示文章、提交人和最后回复时间</strong></td></tr><tr><td><strong>select a.a, a.b, a.c, b.c, b.d, b.f from a LEFT OUT JOIN b ON a.a = b.c</strong></td><td style="width:667px;"><strong>外连接查询(表名1：a 表名2：b)</strong></td></tr><tr><td><strong>select * from (SELECT a,b,c FROM a) T where t.a &gt; 1;</strong></td><td style="width:667px;"><strong>在线视图查询(表名1：a )</strong><br>  </td></tr><tr><td><strong>select * from table1 where time between time1 and time2<br> select a,b,c, from table1 where a not between 数值1 and 数值2</strong></td><td style="width:667px;"><strong>between的用法,between限制查询数据范围时包括了边界值,not between不包括</strong></td></tr><tr><td><strong>select * from table1 where a [not] in (‘值1’,’值2’,’值4’,’值6’)</strong></td><td style="width:667px;"><strong>in 的使用方法</strong></td></tr><tr><td><strong>delete from table1 where not exists ( select * from table2 where table1.field1=table2.field1 )</strong></td><td style="width:667px;"><strong>两张关联表，删除主表中已经在副表中没有的信息 </strong></td></tr><tr><td><strong>select * from a left inner join b on a.a=b.b right inner join c on a.a=c.c inner join d on a.a=d.d where .....</strong></td><td style="width:667px;"><strong>四表联查问题：</strong></td></tr><tr><td><strong>select * from 日程安排 where datediff('minute',f开始时间,getdate())&gt;5</strong></td><td style="width:667px;"><strong>日程安排提前五分钟提醒 </strong></td></tr><tr><td><strong>select top 10 b.* from (select top 20 主键字段,排序字段 from 表名 order by 排序字段 desc) a,表名 b where b.主键字段 = a.主键字段 order by a.排序字段</strong></td><td style="width:667px;"><strong>一条sql 语句搞定数据库分页</strong></td></tr><tr><td><strong>select top 10 * form table1 where 范围</strong></td><td style="width:667px;"><strong>前10条记录</strong></td></tr><tr><td><strong>select a,b,c from tablename ta where a=(select max(a) from tablename tb where tb.b=ta.b)</strong></td><td style="width:667px;"><strong>选择在每一组b值相同的数据中对应的a最大的记录的所有信息(类似这样的用法可以用于论坛每月排行榜,每月热销产品分析,按科目成绩排名,等等.)</strong></td></tr><tr><td><strong>(select a from tableA ) except (select a from tableB) except (select a from tableC)</strong></td><td style="width:667px;"><strong>包括所有在 TableA中但不在 TableB和TableC中的行并消除所有重复行而派生出一个结果表</strong><br>  </td></tr><tr><td><strong>select top 10 * from tablename order by newid()</strong></td><td style="width:667px;"><strong>随机取出10条数据</strong></td></tr><tr><td><strong>select newid()</strong></td><td style="width:667px;"><strong>随机选择记录</strong></td></tr><tr><td><strong>1) delete from tablename where id not in (select max(id) from tablename group by col1,col2,...)<br> 2) select distinct * into temp from tablename<br>    delete from tablename<br>    insert into tablename select * from temp</strong></td><td style="width:667px;"><strong>删除重复记录</strong></td></tr><tr><td><strong>alter table tablename<br> --添加一个自增列<br> add  column_b int identity(1,1)<br>  delete from tablename where column_b not in(<br> select max(column_b)  from tablename group by column1,column2,...)<br> alter table tablename drop column column_b</strong></td><td style="width:667px;"><strong>在一个外部表中导入数据，由于某些原因第一次只导入了一部分，但很难判断具体位置，这样只有在下一次全部导入，这样也就产生好多重复的字段，怎样删除重复字段</strong></td></tr><tr><td><strong>select name from sysobjects where type='U' // U代表用户</strong></td><td style="width:667px;"><strong>列出数据库里所有的表名</strong></td></tr><tr><td><strong>select name from syscolumns where id=object_id('TableName')</strong></td><td style="width:667px;"><strong>列出表里的所有的列名</strong></td></tr><tr><td><strong>select type,sum(case vender when 'A' then pcs else 0 end),sum(case vender when 'C' then pcs else 0 end),sum(case vender when 'B' then pcs else 0 end) FROM tablename group by type</strong></td><td style="width:667px;"><strong>列示type、vender、pcs字段，以type字段排列，case可以方便地实现多重选择，类似select 中的case。</strong></td></tr><tr><td><strong>TRUNCATE TABLE table1</strong></td><td style="width:667px;"><strong>初始化表table1</strong></td></tr><tr><td><strong>select top 5 * from (select top 15 * from table order by id asc) table_别名 order by id desc</strong></td><td style="width:667px;"><strong>选择从10到15的记录</strong></td></tr></tbody></table> 
<h2> </h2> 
<h2>六、Like匹配语法</h2> 
<p>大多数对<span style="color:#7c79e5;">字符串的查找</span>都是模糊的，或某个字段只有部分是相同的，这就要用到LIKE语句了，LIKE常用于SQL的模式匹配。</p> 
<p><span style="color:#3399ea;">语法格式</span>：select * from <span style="color:#86ca5e;">表名</span> where <span style="color:#86ca5e;">字段名</span> like <span style="color:#86ca5e;">对应值（子串）</span></p> 
<p>  </p> 
<p>1. Like通配符：</p> 
<table border="1" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:top;"> <p>通配符</p> </td><td style="vertical-align:top;"> <p>说明</p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>_</strong></p> </td><td style="vertical-align:top;"> <p><strong>单个任意字符</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>%</strong></p> </td><td style="vertical-align:top;"> <p><strong>一个或多个（字符或字符串）</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>[]</strong></p> </td><td style="vertical-align:top;"> <p><strong>指定范围</strong><strong>(</strong><strong>例如</strong><strong>[a-d]</strong><strong>或特定集例如</strong><strong>[abcdef])</strong><strong>中的任意字符串</strong></p> </td></tr><tr><td style="vertical-align:top;"><strong>^</strong></td><td style="vertical-align:top;"><strong>‘非’，与指定字符以外的任意字符匹配</strong></td></tr><tr><td style="vertical-align:top;"> <p><strong>[^]</strong></p> </td><td style="vertical-align:top;"> <p><strong>指定范围（例如，</strong><strong>[^a-f]</strong><strong>）或特定集（例如，</strong><strong>[^abcdef]</strong><strong>）之外的任意单字符匹配</strong></p> </td></tr></tbody></table> 
<p>例子:</p> 
<p>假设有一个数据库中有个表Student，在Student中有两个字段，分别是id和name,id是int类型，name是varchar类型</p> 
<p>1.  查询id为100开头的学生信息</p> 
<p>Select * fromStudent where id like ‘100%’;</p> 
<p>2.  查询id为99结尾的学生信息</p> 
<p>Select * from Student where id like ‘%99’;</p> 
<p>3.查询id包含11在中间的学校信息</p> 
<p>Select* from Student where id like %11%;</p> 
<p> </p> 
<p>1• WHERE name LIKE '_qiu'                           可以找到以任意一个字符开始、并以 qiu结尾的名字（例如，<span style="color:#ffbb66;">a</span>qiu、<span style="color:#ffbb66;">b</span>qiu），<span style="color:#f33b45;">第一个字符不能为空</span>。 <br> 2• WHERE name LIKE '% qiu'                         可以找到姓以qiu结尾的所有员工。 <br> 3• WHERE name LIKE '% qiu'%'                     可以找到姓中任意位置包括qiu的所有员工。 <br> 4• WHERE name LIKE '[X]qiu'                         可以找到qiu、或以<span style="color:#ffbb66;">X</span>qiu，第一个字符可为空。<br> 5• WHERE name LIKE x[^x]%'                        可以找到<span style="color:#ffbb66;">以x开始的</span>、后面的（第二个开始）字母不为 x 的所有项。</p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f9c739243bec8308c311c6728c514546/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Egg开发项目实践纪实</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/966e1817cff96f99ddd575a834bb0191/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">canvas绘制不规则图形，点击获取当前图形索引</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>