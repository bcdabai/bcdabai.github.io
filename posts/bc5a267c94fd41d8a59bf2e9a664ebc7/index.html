<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>KingbaseES时间类数据类型和oracle时间类数据类型的区别 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="KingbaseES时间类数据类型和oracle时间类数据类型的区别" />
<meta property="og:description" content="关键字：
数据类型、时间类型
Oracle日期时间类型有两类，一类是日期时间类型，包括Date， Timestamp with time zone，Timestamp with local time zone。另一类是Interval类型，主要有Interval year to month 和Interval day to second两种。
KingbaseES也有类似的两类时间类型。其中日期时间类型包括Timestamp with time zone， Timestamp without time zone，Date，Time with time zone , Time without time zone五种。Interval类型为Interval。此外，KingbaseES扩展了Date数据类型，在兼容oracle模式时date的值“年月日时分秒”与oracle一致，在pg模式下则为“年月日”。
1、 日期时间类型
1.1. Date 类型
Oracle的Date类型包括年、月、日、时、分、秒六个字段，时间跨度是公元前4712年1月1日~公元9999年12月31日。
 Oracle date：
SQL&gt; create table o_test(value date);
Table created.
SQL&gt; insert into o_test values(to_date(’-4712-01-01 00:30:45’, ‘syyyy-mm-dd hh24:mi:ss’));
1 row created.
SQL&gt; insert into o_test values(to_date(’-4712-01-01 00:30:45’, ‘syyyy-mm-dd hh24:mi:ss’) - interval ‘1’ day);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bc5a267c94fd41d8a59bf2e9a664ebc7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-29T10:42:03+08:00" />
<meta property="article:modified_time" content="2021-10-29T10:42:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">KingbaseES时间类数据类型和oracle时间类数据类型的区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>关键字：</strong><br> 数据类型、时间类型</p> 
<p>Oracle日期时间类型有两类，一类是日期时间类型，包括Date， Timestamp with time zone，Timestamp with local time zone。另一类是Interval类型，主要有Interval year to month 和Interval day to second两种。<br> KingbaseES也有类似的两类时间类型。其中日期时间类型包括Timestamp with time zone， Timestamp without time zone，Date，Time with time zone , Time without time zone五种。Interval类型为Interval。此外，KingbaseES扩展了Date数据类型，在兼容oracle模式时date的值“年月日时分秒”与oracle一致，在pg模式下则为“年月日”。<br> 1、 日期时间类型<br> 1.1. Date 类型<br> Oracle的Date类型包括年、月、日、时、分、秒六个字段，时间跨度是公元前4712年1月1日~公元9999年12月31日。<br>  Oracle date：<br> SQL&gt; create table o_test(value date);<br> Table created.<br> SQL&gt; insert into o_test values(to_date(’-4712-01-01 00:30:45’, ‘syyyy-mm-dd hh24:mi:ss’));<br> 1 row created.<br> SQL&gt; insert into o_test values(to_date(’-4712-01-01 00:30:45’, ‘syyyy-mm-dd hh24:mi:ss’) - interval ‘1’ day);<br> insert into o_test values(to_date(’-4712-01-01 00:30:45’, ‘syyyy-mm-dd hh24:mi:ss’) - interval ‘1’ day)<br> *<br> ERROR at line 1:<br> ORA-01841: (full) year must be between -4713 and +9999, and not be 0<br> SQL&gt; insert into o_test values(to_date(‘9999-12-31 12:30:45’, ‘yyyy-mm-dd hh24:mi:ss’));<br> 1 row created.<br> SQL&gt; insert into o_test values(to_date(‘9999-12-31 12:30:45’, ‘yyyy-mm-dd hh24:mi:ss’) + interval ‘1’ day);<br> insert into o_test values(to_date(‘9999-12-31 12:30:45’, ‘yyyy-mm-dd hh24:mi:ss’) + interval ‘1’ day)<br> *<br> ERROR at line 1:<br> ORA-01841: (full) year must be between -4713 and +9999, and not be 0</p> 
<p>SQL&gt; select to_char(value, ‘syyyy/mm/dd hh24:mi:ss’) from o_test;</p> 
<h3><a id="TO_CHARVALUESYYYYMMDDHH24MISS_28"></a>TO_CHAR(VALUE,‘SYYYY/MM/DDHH24:MI:SS’)</h3> 
<p>-4712/01/01 00:30:45<br> 9999/12/31 12:30:45<br> KingbaseES在兼容oracle模式下可以直接使用date数据类型或者使用 Timestamp(0) without time zone 类型来对应。时间跨度从公元前4713年~公元294276年。<br>  KingbaseES Date 和 Timestamp(0) without time zone<br> test=# create table test1(value timestamp(0) without time zone,value1 date);<br> CREATE TABLE<br> test=# insert into test1 values(‘4712-01-01 00:30:45BC’,‘4712-01-01 00:30:45BC’);<br> INSERT 0 1<br> insert into test1 values(to_timestamp(‘4712-01-01 00:30:45BC’,‘yyyy-mm-dd hh24:mi:ssBC’) - interval ‘1 day’,to_timestamp(‘4712-01-01 00:30:45BC’,‘yyyy-mm-dd hh24:mi:ssBC’) - interval ‘1 day’);<br> INSERT 0 1<br> test=# insert into test1 values(‘9999-12-31 23:59:59’,‘9999-12-31 23:59:59’);<br> INSERT 0 1<br> insert into test1 values(to_timestamp(‘9999-12-31 23:59:59’,‘yyyy-mm-dd hh24:mi:ss’) + interval ‘1 day’,to_timestamp(‘9999-12-31 23:59:59’,‘yyyy-mm-dd hh24:mi:ss’) + interval ‘1 day’);<br> INSERT 0 1</p> 
<p>test=# select * from test1;<br> value | value1<br> ------------------------±-----------------------<br> 4712-01-01 00:30:45 BC | 4712-01-01 00:30:45 BC<br> 4713-12-31 00:30:45 BC | 4713-12-31 00:30:45 BC<br> 9999-12-31 23:59:59 | 9999-12-31 23:59:59<br> 10000-01-01 23:59:59 | 10000-01-01 23:59:59<br> (4 行记录)</p> 
<p>1.2. Timestamp§类型<br> 在Timestamp§数据类型上两种数据库基本一致，除了毫秒精度上的区别。<br> Oracle毫秒的精度最大为9位，默认为6位。数据中的毫秒数如果小于精度，会在有效数据后自动以0补足位数。<br> KingbaseES 毫秒精度最大为6位，默认为6位，当指定精度超过6位时表依然会创建但是会有警告提示并将精度自动修正为6位。在兼容oracle模式时会在末尾补0，pg模式不会补足。<br>  Oracle Timestamp 默认精度<br> SQL&gt; create table o_test(value timestamp);</p> 
<p>Table created.<br> SQL&gt; insert into o_test values(to_timestamp(‘2021-10-1 12:30:50.123’, ‘yyyy-mm-dd hh24:mi:ss.ff’));<br> 1 row created.<br> SQL&gt; insert into o_test values(to_timestamp(‘2021-10-1 12:30:50.123456’, ‘yyyy-mm-dd hh24:mi:ss.ff6’));<br> 1 row created.<br> SQL&gt; insert into o_test values(to_timestamp(‘2021-10-1 12:30:50.123456789’, ‘yyyy-mm-dd hh24:mi:ss.ff9’));<br> 1 row created.</p> 
<h3><a id="SQL_select__from_o_test%0AVALUE_69"></a>SQL&gt; select * from o_test;<br> VALUE</h3> 
<h3><a id="01OCT21_123050123000_PM%0A01OCT21_123050123456_PM%0A01OCT21_123050123457_PM%0A%09KingbaseES_Timestamp_without_time_zone_%0Aoracle_pg_%0Atest_create_table_test1value_timestamp_without_time_zone%0ACREATE_TABLE%0Atest_insert_into_test1_values2021101_123045123456%0AINSERT_0_1%0Atest_insert_into_test1_values2021101_123045123456789%0AINSERT_0_1%0Atest_insert_into_test1_values2021101_123045123%0AINSERT_0_1%0Aoracle%0Atest_select__from_test1%0A___________value_72"></a>01-OCT-21 12.30.50.123000 PM<br> 01-OCT-21 12.30.50.123456 PM<br> 01-OCT-21 12.30.50.123457 PM<br>  KingbaseES Timestamp without time zone 默认精度<br> 分别在oracle和 pg 模式下插入以下数据。<br> test=# create table test1(value timestamp without time zone);<br> CREATE TABLE<br> test=# insert into test1 values(‘2021-10-1 12:30:45.123456’);<br> INSERT 0 1<br> test=# insert into test1 values(‘2021-10-1 12:30:45.123456789’);<br> INSERT 0 1<br> test=# insert into test1 values(‘2021-10-1 12:30:45.123’);<br> INSERT 0 1<br> 兼容oracle模式<br> test=# select * from test1;<br> value</h3> 
<h3><a id="20211001_123045123456%0A_20211001_123045123457%0A_20211001_123045123000%0Apg%0Atest_select__from_test1%0A___________value_89"></a>2021-10-01 12:30:45.123456<br> 2021-10-01 12:30:45.123457<br> 2021-10-01 12:30:45.123000<br> 兼容pg模式<br> test=# select * from test1;<br> value</h3> 
<p>2021-10-01 12:30:45.123456<br> 2021-10-01 12:30:45.123457<br> 2021-10-01 12:30:45.123</p> 
<h3><a id="%09Oracle_Timestamp_%0ASQL_create_table_o_test1value_timestamp9%0ATable_created%0ASQL_insert_into_o_test1_valuesto_timestamp2021101_113050123456789_yyyymmdd_hh24missff9%0A1_row_created%0ASQL_insert_into_o_test1_valuesto_timestamp2021101_113050123_yyyymmdd_hh24missff%0A1_row_created%0ASQL_select__from_o_test1%0AVALUE_100"></a> Oracle Timestamp 指定精度<br> SQL&gt; create table o_test1(value timestamp(9));<br> Table created.<br> SQL&gt; insert into o_test1 values(to_timestamp(‘2021-10-1 11:30:50.123456789’, ‘yyyy-mm-dd hh24:mi:ss.ff9’));<br> 1 row created.<br> SQL&gt; insert into o_test1 values(to_timestamp(‘2021-10-1 11:30:50.123’, ‘yyyy-mm-dd hh24:mi:ss.ff’));<br> 1 row created.<br> SQL&gt; select * from o_test1;<br> VALUE</h3> 
<p>01-OCT-21 11.30.50.123456789 AM<br> 01-OCT-21 11.30.50.123000000 AM</p> 
<p> KingbaseES Timestamp without time zone指定精度<br> test=# create table test2(value timestamp(9) without time zone);<br> 警告: 将TIMESTAMP(9)减少到最大允许值,6<br> 第1行create table test2(value timestamp(9) without time zone);<br> ^<br> 警告: 将TIMESTAMP(9)减少到最大允许值,6<br> 警告: 将TIMESTAMP(9)减少到最大允许值,6<br> CREATE TABLE</p> 
<h3><a id="test_create_table_test2value_timestamp3_without_time_zone%0ACREATE_TABLE%0Atest_insert_into_test2_values2021101_123045123456789%0AINSERT_0_1%0Atest_insert_into_test2_values2021101_123045123%0AINSERT_0_1%0Atest_insert_into_test2_values2021101_1230451%0AINSERT_0_1%0Atest_select__from_test2%0A__________value_122"></a>test=# create table test2(value timestamp(3) without time zone);<br> CREATE TABLE<br> test=# insert into test2 values(‘2021-10-1 12:30:45.123456789’);<br> INSERT 0 1<br> test=# insert into test2 values(‘2021-10-1 12:30:45.123’);<br> INSERT 0 1<br> test=# insert into test2 values(‘2021-10-1 12:30:45.1’);<br> INSERT 0 1<br> test=# select * from test2;<br> value</h3> 
<p>2021-10-01 12:30:45.123<br> 2021-10-01 12:30:45.123<br> 2021-10-01 12:30:45.100</p> 
<p>1.3. Timestamp§ with time zone类型<br> 带时区的时间类型，两种数据库之间的区别: Oracle会保存输入的的时区，而KingbaseES是把数据自动转换成为数据库时区对应的时间 (时区值由kingbase.conf中的timezone参数设定，可以使用set timezone来进行更改)。在使用时需要注意这个变化。</p> 
<h3><a id="%09Oracle_Timestampp_with_time_zone%0ASQL_create_table_o_test_value_timestamp_with_time_zone%0ATable_created%0ASQL_insert_into_o_test_valuessystimestamp%0A1_row_created%0ASQL_insert_into_o_test_valuesto_timestamp_tz20121231_123050123456_1000_yyyymmdd_hh24missff_tzhtzm%0A1_row_created%0ASQL_select__from_o_test____%0AVALUE_140"></a> Oracle 的Timestamp§ with time zone<br> SQL&gt; create table o_test( value timestamp with time zone);<br> Table created.<br> SQL&gt; insert into o_test values(systimestamp);<br> 1 row created.<br> SQL&gt; insert into o_test values(to_timestamp_tz(‘2012-12-31 12:30:50.123456 +10:00’, ‘yyyy-mm-dd hh24:mi:ss.ff tzh:tzm’));<br> 1 row created.<br> SQL&gt; select * from o_test;<br> VALUE</h3> 
<p>14-OCT-21 11.33.12.639156 AM +08:00<br> 31-DEC-12 12.30.50.123456 PM +10:00</p> 
<h3><a id="%09KingbaseES_Timestampp_with_time_zone%0Atest_create_table_test3value_timestamp_with_time_zone%0ACREATE_TABLE%0Atest_insert_into_test3_valuescurrent_timestamp%0AINSERT_0_1%0Atest_insert_into_test3_values20211231_12305012345610%0AINSERT_0_1%0Atest_insert_into_test3_values20211231_123050123456_PST%0AINSERT_0_1%0Atest_%0Atest_select__from_test3%0A_____________value_153"></a> KingbaseES的 Timestamp§ with time zone<br> test=# create table test3(value timestamp with time zone);<br> CREATE TABLE<br> test=# insert into test3 values(current_timestamp);<br> INSERT 0 1<br> test=# insert into test3 values(‘2021-12-31 12:30:50.123456+10’);<br> INSERT 0 1<br> test=# insert into test3 values(‘2021-12-31 12:30:50.123456 PST’);<br> INSERT 0 1<br> test=#<br> test=# select * from test3;<br> value</h3> 
<p>2021-10-14 11:31:10.820010+08<br> 2021-12-31 10:30:50.123456+08<br> 2022-01-01 04:30:50.123456+08</p> 
<p>2、 Interval类型<br> Oracle的Interval类型主要分为Interval year to month 和 Interval day to second两类。分别对应间隔为年月和间隔为日、时、分、秒的情况。<br> KingbaseES的interval提供了比较丰富的扩展：interval[fields][§] 。interval类型有一个附加选项，它可以通过写下面之一的短语来限制存储的fields的集合：<br> YEAR,MONTH,DAY,HOUR,MINUTE,SECOND,YEAR TO MONTH,DAY TO HOUR,DAY TO MINUTE,<br> DAY TO SECOND,HOUR TO MINUTE,HOUR TO SECOND,MINUTE TO SECOND<br> 注意：如果fields和p被指定，fields必须包括SECOND，因为精度只应用于秒。</p> 
<p> Oracle的Interval year§ to month类型<br> Oracle的Interval year§ to month类型表示年月的时间间隔。year, month一起使用的时候，写法类似于Interval ‘12-11’ year to month。其中的年份根据精度p来决定，p值为1<sub>9，默认为2。月份只能是0</sub>11之间的值。单独使用month时精度也是控制年份的。<br> SQL&gt; create table test(value interval year(3) to month);<br> Table created.<br> SQL&gt; insert into test values(interval ‘100-5’ year to month);<br> insert into test values(interval ‘100-5’ year to month) *<br> ERROR at line 1:<br> ORA-01873: the leading precision of the interval is too small<br> SQL&gt; insert into test values(interval ‘100-5’ year(3) to month);<br> 1 row created.<br> SQL&gt; insert into test values(interval ‘1299’ month);<br> insert into test values(interval ‘1299’ month)<br> *<br> ERROR at line 1:<br> ORA-01873: the leading precision of the interval is too small<br> SQL&gt; insert into test values(interval ‘1299’ month(3));<br> 1 row created.</p> 
<h3><a id="SQL_select__from_test%0AVALUE_195"></a>SQL&gt; select * from test;<br> VALUE</h3> 
<p>+100-05<br> +108-03</p> 
<h3><a id="%09KingbaseES__Interval%0AKingbaseES_interval%0Atest_create_table_test4value_interval%0ACREATE_TABLE%0Atest_insert_into_test4_values1005%0AINSERT_0_1%0Atest_insert_into_test4_values9012%0A___9012%0A1insert_into_test4_values9012%0A______________________________%0Atest_insert_into_test4_values9011%0AINSERT_0_1%0Atest_insert_into_test4_values900%0AINSERT_0_1%0Atest_insert_into_test4_values10000_year%0AINSERT_0_1%0Atest_insert_into_test4_values12000_month%0AINSERT_0_1%0Atest_insert_into_test4_values1000_year_12000_month%0AINSERT_0_1%0Atest_insert_into_test4_values80000_hour%0AINSERT_0_1%0Atest_select__from_test4%0A_______value_201"></a> KingbaseES 的 Interval类型<br> KingbaseES 可以直接使用interval类型的数据，使用上比较灵活。<br> test=# create table test4(value interval);<br> CREATE TABLE<br> test=# insert into test4 values(‘100-5’);<br> INSERT 0 1<br> test=# insert into test4 values(‘90-12’);<br> 错误: 间隔字段超出范围: “90-12”<br> 第1行insert into test4 values(‘90-12’);<br> ^<br> test=# insert into test4 values(‘90-11’);<br> INSERT 0 1<br> test=# insert into test4 values(‘90-0’);<br> INSERT 0 1<br> test=# insert into test4 values(‘10000 year’);<br> INSERT 0 1<br> test=# insert into test4 values(‘12000 month’);<br> INSERT 0 1<br> test=# insert into test4 values(‘1000 year 12000 month’);<br> INSERT 0 1<br> test=# insert into test4 values(‘80000 hour’);<br> INSERT 0 1<br> test=# select * from test4;<br> value</h3> 
<p>100 years 5 mons<br> 90 years 11 mons<br> 90 years<br> 10000 years<br> 1000 years<br> 2000 years<br> 80000:00:00.000000</p> 
<p>参考文档：<br> https://help.kingbase.com.cn/stage-api/profile/document/kes/v8r6/html/development/develop-transfer/transplant-oracle/index.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ce64a5f26ba7d71867ba5a3f2763d960/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css-Flex弹性布局篇</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ba423c1cb2a643242ed3d47386d48e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用docker部署 SqlServer 容器后过几秒就停止了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>