<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>获取JSON数据 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="获取JSON数据" />
<meta property="og:description" content="方式一、使用JSON工具将对象序列化成Json，常用工具有Jackson,fastjson,gjson,然后利用HttpServletResponse获取response.getOutputStream(),或者PrintWriter()fhf接输出
以Jackson为例：
引包
&lt;!-- json依赖包 --&gt; &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.11.4&lt;/version&gt; &lt;/dependency&gt; 前端：
&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;script type=&#34;text/javascript&#34; src=&#34;${path}/resource/js/jquery.min.js&#34;&gt;&lt;/script&gt; &lt;script type=&#34;text/javascript&#34;&gt; $(function(){ $(&#34;.testJson&#34;).click(function(){ var url=this.href; alert(url) var args={}; //ajax,url:目标地址 ; args:带出去的参数 ;data:目标方法返回的值 $.post(url,args,function(data){ for(var i=0; i&lt;data.length;i&#43;&#43;){ var userid=data[i].id; var username=data[i].name; alert(userid&#43;&#34;:&#34;&#43;username); } }); return false; }); }); &lt;/script&gt; &lt;meta charset=&#34;utf-8&#34;&gt; &lt;title&gt;testJson&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;br&gt;&lt;br&gt;&lt;br&gt; &lt;a class=&#34;testJson&#34; href=&#34;${path}/getJson&#34;&gt;传统方式获取json数据测试&lt;/a&gt; &lt;br&gt;&lt;br&gt; &lt;a class=&#34;testJson&#34; href=&#34;${path}/getJson2&#34;&gt;MVC方式获取json数据测试&lt;/a&gt; &lt;/body&gt; &lt;/html&gt; 后台：
import java.io.PrintWriter; import java." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b4e2f00431bb634373eaacbf4ebd9daa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-23T17:36:36+08:00" />
<meta property="article:modified_time" content="2022-10-23T17:36:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">获取JSON数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>方式一、使用JSON工具将对象序列化成Json，常用工具有Jackson,fastjson,gjson,然后利用HttpServletResponse获取response.getOutputStream(),或者PrintWriter()fhf接输出</p> 
<p>以Jackson为例：<br> 引包</p> 
<pre><code class="hljs">&lt;!-- json依赖包 --&gt;
		&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
			&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
			&lt;version&gt;2.11.4&lt;/version&gt;
		&lt;/dependency&gt;</code></pre> 
<p><br> 前端：</p> 
<pre><code class="hljs">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript" src="${path}/resource/js/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
$(function(){
	$(".testJson").click(function(){
		var url=this.href;
		alert(url)
		var args={};
		//ajax,url:目标地址 ; args:带出去的参数 ;data:目标方法返回的值
		$.post(url,args,function(data){
			for(var i=0; i&lt;data.length;i++){
				var userid=data[i].id;
				var username=data[i].name;
				alert(userid+":"+username);
			}
		});
		return false;
	});
});

&lt;/script&gt;

&lt;meta charset="utf-8"&gt;
&lt;title&gt;testJson&lt;/title&gt;

&lt;/head&gt;
&lt;body&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;a class="testJson" href="${path}/getJson"&gt;传统方式获取json数据测试&lt;/a&gt;
&lt;br&gt;&lt;br&gt;
&lt;a class="testJson" href="${path}/getJson2"&gt;MVC方式获取json数据测试&lt;/a&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>后台：<br>  </p> 
<pre><code class="hljs">import java.io.PrintWriter;
import java.util.List;

import javax.servlet.http.HttpServletResponse;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.restfullDemo.model.User;
import com.restfullDemo.service.UserService;
/*在调用Json工具对对像进行 Json对像转换时，如明对像有关联的对像是 赖加载的，那必须在数据库文件中，要设lazy="false" ，或在对像的实体内中加入@JsonIgnoreProperties忽略相关的属性*/

@Controller
public class TestJsonController {
	@Autowired
	private UserService userService;
	@RequestMapping (value="/testJson")
	public String jsonView() {
		return "testJson";
	}

	/* 传统方式来返回json */
	@RequestMapping(value="/getJson",method = RequestMethod.POST)
	public void getJson(HttpServletResponse resp,PrintWriter out) throws JsonProcessingException {
		resp.setContentType("application/json;charset=utf-8");
		/* 清除缓存中的对应数据 */
		resp.setHeader("pragma", "no-cache");
		resp.setHeader("cache-control", "no-cache");
		List&lt;User&gt; users=userService.getAllUsers();
		ObjectMapper mapper=new ObjectMapper();
		String jsonStr=mapper.writeValueAsString(users);
		out.write(jsonStr);
		out.close();
		
	}
	
}</code></pre> 
<p>方式二、使用springmvc 中@ResponseBody标签</p> 
<p>后台：</p> 
<pre><code class="hljs">import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.restfullDemo.model.User;
import com.restfullDemo.service.UserService;
/*在调用Json工具对对像进行 Json对像转换时，如明对像有关联的对像是 赖加载的，那必须在数据库文件中，要设lazy="false" ，或在对像的实体内中加入@JsonIgnoreProperties忽略相关的属性*/

@Controller
public class TestJsonController {
	@Autowired
	private UserService userService;
	@RequestMapping (value="/testJson")
	public String jsonView() {
		return "testJson";
	}

	
	/* mvc方式来返回json */
	@ResponseBody
	@RequestMapping(value="/getJson2",method = RequestMethod.POST)
	public List&lt;User&gt; getJson2(){
		List&lt;User&gt; users=userService.getAllUsers();
		return users;
		
	}

}
</code></pre> 
<p>注意，在调用Json工具对对像进行 Json对像转换时，如明对像有关联的对像是 赖加载的，那必须在数据库文件中，要设lazy="false" ，或在对像的实体内中加入@JsonIgnoreProperties忽略相关的属性<br><img alt="" height="496" src="https://images2.imgbox.com/f2/5b/bhMGXuZJ_o.png" width="443"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/43778f22806c492fcace7bc85e8cb984/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【测试面试】2022年软件测试面试题大全（附答案）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ce1961c9866adb962d11b5a04ebd17a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">envi神经网络分类原理,ENVI神经网络分类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>