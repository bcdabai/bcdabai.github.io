<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>cmake 添加头文件目录，链接动态、静态库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="cmake 添加头文件目录，链接动态、静态库" />
<meta property="og:description" content="罗列一下cmake常用的命令。
CMake支持大写、小写、混合大小写的命令。
1. 添加头文件目录INCLUDE_DIRECTORIES
语法：
include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...]) 它相当于g&#43;&#43;选项中的-I参数的作用，也相当于环境变量中增加路径到CPLUS_INCLUDE_PATH变量的作用。
include_directories(../../../thirdparty/comm/include) 2. 添加需要链接的库文件目录LINK_DIRECTORIES
语法：
link_directories(directory1 directory2 ...) 它相当于g&#43;&#43;命令的-L选项的作用，也相当于环境变量中增加LD_LIBRARY_PATH的路径的作用。
link_directories(&#34;/home/server/third/lib&#34;) 3. 查找库所在目录FIND_LIBRARY
语法：
A short-hand signature is: find_library (&lt;VAR&gt; name1 [path1 path2 ...]) The general signature is: find_library ( &lt;VAR&gt; name | NAMES name1 [name2 ...] [NAMES_PER_DIR] [HINTS path1 [path2 ... ENV var]] [PATHS path1 [path2 ... ENV var]] [PATH_SUFFIXES suffix1 [suffix2 ...]] [DOC &#34;cache documentation string&#34;] [NO_DEFAULT_PATH] [NO_CMAKE_ENVIRONMENT_PATH] [NO_CMAKE_PATH] [NO_SYSTEM_ENVIRONMENT_PATH] [NO_CMAKE_SYSTEM_PATH] [CMAKE_FIND_ROOT_PATH_BOTH | ONLY_CMAKE_FIND_ROOT_PATH | NO_CMAKE_FIND_ROOT_PATH] ) 例子如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/961372ba33fdaa0e0855f4534001e0e7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-06-29T15:03:00+08:00" />
<meta property="article:modified_time" content="2016-06-29T15:03:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">cmake 添加头文件目录，链接动态、静态库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>罗列一下cmake常用的命令。</p> 
 <p>CMake支持大写、小写、混合大小写的命令。</p> 
 <p> </p> 
 <p>1. 添加头文件目录<strong>INCLUDE_DIRECTORIES</strong></p> 
 <p><strong>语法：</strong></p> 
 <pre><span class="highlighted">include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])</span></pre> 
 <p>它相当于g++选项中的-I参数的作用，也相当于环境变量中增加路径到CPLUS_INCLUDE_PATH变量的作用。</p> 
 <div class="cnblogs_code"> 
  <pre><span class="highlighted">include_directories</span><span style="line-height:1.5;">(../../../thirdparty/comm/include)</span></pre> 
 </div> 
 <p> </p> 
 <p>2. 添加需要链接的库文件目录<strong>LINK_DIRECTORIES</strong></p> 
 <p><strong>语法：</strong></p> 
 <pre><span class="highlighted">link_directories(directory1 directory2 ...)</span></pre> 
 <p>它相当于g++命令的-L选项的作用，也相当于环境变量中增加LD_LIBRARY_PATH的路径的作用。</p> 
 <div class="cnblogs_code"> 
  <pre><strong>link_directories</strong>("/home/server/third/lib")</pre> 
 </div> 
 <p> </p> 
 <p>3. 查找库所在目录<strong>FIND_LIBRARY</strong></p> 
 <p><strong>语法：</strong></p> 
 <div class="cnblogs_code"> 
  <pre>A <span style="color:#0000ff;">short</span>-<span style="color:#000000;">hand signature is:

find_library (</span>&lt;VAR&gt;<span style="color:#000000;"> name1 [path1 path2 ...])
The general signature is:

find_library (
          </span>&lt;VAR&gt;<span style="color:#000000;">
          name </span>|<span style="color:#000000;"> NAMES name1 [name2 ...] [NAMES_PER_DIR]
          [HINTS path1 [path2 ... ENV var]]
          [PATHS path1 [path2 ... ENV var]]
          [PATH_SUFFIXES suffix1 [suffix2 ...]]
          [DOC </span><span style="color:#800000;">"</span><span style="color:#800000;">cache documentation string</span><span style="color:#800000;">"</span><span style="color:#000000;">]
          [NO_DEFAULT_PATH]
          [NO_CMAKE_ENVIRONMENT_PATH]
          [NO_CMAKE_PATH]
          [NO_SYSTEM_ENVIRONMENT_PATH]
          [NO_CMAKE_SYSTEM_PATH]
          [CMAKE_FIND_ROOT_PATH_BOTH </span>|<span style="color:#000000;">
           ONLY_CMAKE_FIND_ROOT_PATH </span>|<span style="color:#000000;">
           NO_CMAKE_FIND_ROOT_PATH]
         )</span></pre> 
 </div> 
 <p>例子如下：</p> 
 <div class="cnblogs_code"> 
  <pre>FIND_LIBRARY(RUNTIME_LIB rt /usr/lib  /usr/local/lib NO_DEFAULT_PATH)</pre> 
 </div> 
 <p>cmake会在目录中查找，如果所有目录中都没有，值RUNTIME_LIB就会被赋为NO_DEFAULT_PATH</p> 
 <p> </p> 
 <p>4. 添加需要链接的库文件路径<strong>LINK_LIBRARIES</strong></p> 
 <p><strong>语法：</strong></p> 
 <pre><span class="highlighted">link_libraries(library1 &lt;debug | optimized&gt; library2 ...)</span></pre> 
 <div class="cnblogs_code"> 
  <pre><span style="line-height:1.5;"># 直接是全路径<br>link_libraries(“/home/server/third/lib/libcommon.a”)</span></pre> 
  <pre># 下面的例子，只有库名，cmake会自动去所包含的目录搜索<br>link_libraries(iconv)<br><br># 传入变量<br>link_libraries(${RUNTIME_LIB})</pre> 
  <pre># 也可以链接多个<br>link_libraries("/opt/MATLAB/R2012a/bin/glnxa64/libeng.so"　"/opt/MATLAB/R2012a/bin/glnxa64/libmx.so")</pre> 
 </div> 
 <p>可以链接一个，也可以多个，中间使用空格分隔.</p> 
 <p> </p> 
 <p>5. 设置要链接的库文件的名称<strong>TARGET_LINK_LIBRARIES </strong></p> 
 <p><strong>语法：</strong></p> 
 <pre><span class="highlighted">target_link_libraries(&lt;target&gt; [item1 [item2 [...]]]
                      [[debug|optimized|general] &lt;item&gt;] ...)<br></span></pre> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#000000;"># 以下写法都可以： 
target_link_libraries(myProject comm)       # 连接libhello.so库，默认优先链接动态库
target_link_libraries(myProject libcomm.a)  # 显示指定链接静态库
target_link_libraries(myProject libcomm.so) # 显示指定链接动态库

# 再如：
target_link_libraries(myProject libcomm.so)　　#这些库名写法都可以。
target_link_libraries(myProject comm)
target_link_libraries(myProject </span>-lcomm)</pre> 
 </div> 
 <pre><span class="highlighted"><br><span style="font-size:14px;">6. 为工程生成目标文件</span><br><span style="font-size:14px;"><strong>语法：</strong></span></span></pre> 
 <div class="cnblogs_code"> 
  <pre>add_executable(&lt;name&gt;<span style="color:#000000;"> [WIN32] [MACOSX_BUNDLE]
               [EXCLUDE_FROM_ALL]
               source1 [source2 ...])</span></pre> 
 </div> 
 <p>简单的例子如下：</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#000000;">add_executable(demo
        main.</span><span style="color:#0000ff;">cpp</span><span style="color:#000000;">
)</span></pre> 
 </div> 
 <pre><span class="highlighted"><span class="highlighted"><span style="font-size:15px;"><br>6. 最后贴一个完整的例子</span><br></span></span></pre> 
 <div class="cnblogs_code"> 
  <pre>cmake_minimum_required (VERSION <span style="color:#800080;">2.6</span><span style="color:#000000;">)

INCLUDE_DIRECTORIES(..</span>/../thirdparty/<span style="color:#000000;">comm)

FIND_LIBRARY(COMM_LIB comm ..</span>/../thirdparty/comm/<span style="color:#000000;">lib NO_DEFAULT_PATH)
FIND_LIBRARY(RUNTIME_LIB rt </span>/usr/lib  /usr/local/<span style="color:#000000;">lib NO_DEFAULT_PATH)

link_libraries(${COMM_LIB} ${RUNTIME_LIB})

ADD_DEFINITIONS(
</span>-O3 -g -W -<span style="color:#000000;">Wall
 </span>-Wunused-variable -Wunused-parameter -Wunused-<span style="color:#0000ff;">function</span> -<span style="color:#000000;">Wunused
 </span>-Wno-deprecated -Woverloaded-virtual -Wwrite-<span style="color:#000000;">strings
 </span>-D__WUR= -D_REENTRANT -D_FILE_OFFSET_BITS=<span style="color:#800080;">64</span> -<span style="color:#000000;">DTIXML_USE_STL
)


add_library(lib_demo
        cmd.</span><span style="color:#0000ff;">cpp</span><span style="color:#000000;">
        global.</span><span style="color:#0000ff;">cpp</span><span style="color:#000000;">
        md5.</span><span style="color:#0000ff;">cpp</span><span style="color:#000000;">
)

link_libraries(lib_demo)
add_executable(demo
        main.</span><span style="color:#0000ff;">cpp</span><span style="color:#000000;">
)

# link library </span><span style="color:#0000ff;">in</span><span style="color:#000000;"> static mode
target_link_libraries(demo libuuid.a)</span></pre> 
 </div> 
 <pre><span class="highlighted"><span class="highlighted"><br><br><span style="font-size:16px;">另外，使用cmake生成makefile之后，make edit_cache可以编辑编译选项。</span><br><br><span style="font-size:14px;">不熟悉的命令可以去查找文档，贴个cmake3.0官方帮助文档地址</span><br><span style="font-size:14px;">https://cmake.org/cmake/help/v3.0/index.html<br>==============================================<br>最近在搭建自己的博客，欢迎来逛。<br>https://sharebook.wang<br></span></span></span></pre> 
</div> 
<p>转载于:https://www.cnblogs.com/binbinjx/p/5626916.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/031d1b532b545530f92b35f260f21e0f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">程序员福利：大牛收藏5年的开发资料</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2ef9a77e7bbaf9ad27491b1c6cf24a18/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring源码深度解析（四）容器的基础XmlBeanFactory</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>