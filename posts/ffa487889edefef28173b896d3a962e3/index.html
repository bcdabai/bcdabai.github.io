<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据压缩与打包：jar、war、arr、tar、zip - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据压缩与打包：jar、war、arr、tar、zip" />
<meta property="og:description" content="1，概念 1）无损压缩和有损压缩 有损压缩：压缩之后就无法完整还原原始信息，但是压缩率可以很高，主要应用于视频、话音等数据的压缩；无损压缩：用于文件等等必须完整还原信息的场合。ZIP、RAR、GZIP、GIF、PNG等等都是无损压缩格式。 2，文件压缩与打包 1）ZIP压缩 场景：jar包shell命令：
需要先下载zip for linux。 功能命令备注将jpg格式的文件压缩zip jpg.zip *.jpg将几个文件和目录同时压缩zip -r file1.zip file1 file2 dir1解压zipunzip file.zip 2）jar打包（Java Archive File，Java 归档文件）、war打包（Web Application Archive） jar包 = class文件 &#43; 资源 &#43; 配置文件 = zip &#43; META-INF（清单文件）；
一个jar包就是一个java应用程序。平台无关的文件格式；jar文件使用了ZIP压缩格式，通过unzip命令可以解压； 1&gt;Pack200 Java5提供的压缩工具，能对普通的jar文件进行高效压缩。
实现原理：根据Java类特有的结构，合并常数池，去掉无用信息等来实现对java类的高效压缩。对于Jar文件却能轻易达到10-40%的压缩率，甚至接近90%。这在Java应用部署中很有用，尤其对于移动Java计算，能够大大减小代码下载量。
压缩 Packer packer=Pack200.newPacker(); OutputStream output=new BufferedOutputStream(new FileOutputStream(outfile)); packer.pack(new JarFile(jarFile), output); output.close(); 解压 Unpacker unpacker=Pack200.newUnpacker(); output=new JarOutputStream(new FileOutputStream(jarFile)); unpacker.unpack(pack200File, output); output.close(); 2&gt;shell命令 常见参数：
-c 创建新的JAR文件包、war文件包 -t 列出JAR文件包的内容列表。 -x 展开JAR文件包的指定文件或全部文件。 -u 更新已存在的JAR包。对于一个已经存在的JAR包。我们任然能够向当中加入新的字节码文件或旧的字节码文件，假设已经存在路径、类名都同样的文件，则更新源文件，假设不存在。则加入该文件。清单文件也能够通过这种方式更改。 -v 显示过程并输出。 -f 指定JAR包的文件名称。通常该选项是必选的。 -m 指定须要包括的MANIFEST." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ffa487889edefef28173b896d3a962e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-28T22:23:53+08:00" />
<meta property="article:modified_time" content="2023-12-28T22:23:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据压缩与打包：jar、war、arr、tar、zip</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_0"></a>1，概念</h2> 
<h3><a id="1_1"></a>1）无损压缩和有损压缩</h3> 
<ol><li>有损压缩：压缩之后就无法完整还原原始信息，但是压缩率可以很高，主要应用于视频、话音等数据的压缩；</li><li>无损压缩：用于文件等等必须完整还原信息的场合。ZIP、RAR、GZIP、GIF、PNG等等都是无损压缩格式。</li></ol> 
<h2><a id="2_4"></a>2，文件压缩与打包</h2> 
<h3><a id="1ZIP_5"></a>1）ZIP压缩</h3> 
<ol><li>场景：jar包</li><li>shell命令：<br> 需要先下载zip for linux。</li></ol> 
<table><thead><tr><th align="left">功能</th><th align="left">命令</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left">将jpg格式的文件压缩</td><td align="left"><code>zip jpg.zip *.jpg</code></td><td align="left"></td></tr><tr><td align="left">将几个文件和目录同时压缩</td><td align="left"><code>zip -r file1.zip file1 file2 dir1</code></td><td align="left"></td></tr><tr><td align="left">解压zip</td><td align="left"><code>unzip file.zip</code></td><td align="left"></td></tr></tbody></table> 
<h3><a id="2jarJava_Archive_FileJava_warWeb_Application_Archive_15"></a>2）jar打包（Java Archive File，Java 归档文件）、war打包（Web Application Archive）</h3> 
<ol><li>jar包 = class文件 + 资源 + 配置文件 = zip + META-INF（清单文件）；<br> 一个jar包就是一个java应用程序。</li><li>平台无关的文件格式；</li><li>jar文件使用了ZIP压缩格式，通过unzip命令可以解压；</li></ol> 
<h4><a id="1Pack200_20"></a>1&gt;Pack200</h4> 
<p>Java5提供的压缩工具，能对普通的jar文件进行高效压缩。<br> 实现原理：根据Java类特有的结构，合并常数池，去掉无用信息等来实现对java类的高效压缩。对于Jar文件却能轻易达到10-40%的压缩率，甚至接近90%。这在Java应用部署中很有用，尤其对于移动Java计算，能够大大减小代码下载量。</p> 
<pre><code class="prism language-java">压缩

    <span class="token class-name">Packer</span> packer<span class="token operator">=</span><span class="token class-name">Pack200</span><span class="token punctuation">.</span><span class="token function">newPacker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">OutputStream</span> output<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>outfile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    packer<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JarFile</span><span class="token punctuation">(</span>jarFile<span class="token punctuation">)</span><span class="token punctuation">,</span> output<span class="token punctuation">)</span><span class="token punctuation">;</span>
    output<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
解压

    <span class="token class-name">Unpacker</span> unpacker<span class="token operator">=</span><span class="token class-name">Pack200</span><span class="token punctuation">.</span><span class="token function">newUnpacker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    output<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">JarOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>jarFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    unpacker<span class="token punctuation">.</span><span class="token function">unpack</span><span class="token punctuation">(</span>pack200File<span class="token punctuation">,</span> output<span class="token punctuation">)</span><span class="token punctuation">;</span>
    output<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="2shell_38"></a>2&gt;shell命令</h4> 
<p>常见参数：</p> 
<pre><code class="prism language-shell"><span class="token parameter variable">-c</span> 创建新的JAR文件包、war文件包

<span class="token parameter variable">-t</span> 列出JAR文件包的内容列表。
<span class="token parameter variable">-x</span> 展开JAR文件包的指定文件或全部文件。
<span class="token parameter variable">-u</span> 更新已存在的JAR包。对于一个已经存在的JAR包。我们任然能够向当中加入新的字节码文件或旧的字节码文件，假设已经存在路径、类名都同样的文件，则更新源文件，假设不存在。则加入该文件。清单文件也能够通过这种方式更改。

<span class="token parameter variable">-v</span> 显示过程并输出。
<span class="token parameter variable">-f</span> 指定JAR包的文件名称。通常该选项是必选的。

<span class="token parameter variable">-m</span> 指定须要包括的MANIFEST.MF清单文件。

<span class="token parameter variable">-O</span> 仅仅存储。不压缩。  生成的JAR包体积大，但运行速度快。

<span class="token parameter variable">-M</span> 不产生全部项的清单文件，此參数会忽略-m选项。
<span class="token punctuation">[</span>-C 文件夹<span class="token punctuation">]</span> 表示转到指定文件夹下去运行jar命令的操作，它相当于优先使用cd命令转到指定文件夹下运行不带-C參数的jar命令。它仅仅能在创建和更新JAR包的时候使用
</code></pre> 
<table><thead><tr><th align="left">功能</th><th align="left">命令</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left"><strong>包启动</strong></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">启动jar包</td><td align="left"><code>java -jar test.jar</code></td><td align="left"></td></tr><tr><td align="left">启动war包</td><td align="left"><code>java -jar jenkins.war –httpPort=8090</code></td><td align="left">war包一般要放在tomcat中，jenkins的war包自带Jetty服务器，可以直接运行</td></tr><tr><td align="left"><strong>包解压</strong></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">包解压</td><td align="left"><code>jar -xvf xxx.war</code></td><td align="left">解压到当前文件夹，并显示解压过程</td></tr><tr><td align="left">包解压到目标目录</td><td align="left"><code>unzip .jar -d 目录</code></td><td align="left"></td></tr><tr><td align="left"><strong>包压缩</strong></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">把当前目录下的所有文件打包成game.war</td><td align="left"><code>jar -cvfM0 game.war ./</code></td><td align="left">-0 这个是阿拉伯数字，只打包不压缩的意思</td></tr><tr><td align="left">将com下的class文件打包成jar</td><td align="left"><code>jar cvf allenwells.jar com</code></td><td align="left">覆盖原文件</td></tr><tr><td align="left">向allenwells.jar中加入manifest.mf文件</td><td align="left"><code>jar uvf allenwells.jar manifest.mf</code></td><td align="left">作为普通文件加入。通过-m-m选项设置清单文件</td></tr><tr><td align="left">使用自己定义的清单文件mymanifest.mf并将com/文件夹下的全部文件归档到allenwells.jar中</td><td align="left"><code>jar cvfm allenwells.jar mymanifest.mf -C com/ .</code></td><td align="left"></td></tr><tr><td align="left"><strong>包信息查看</strong></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">显示jar内文件的具体信息</td><td align="left"><code>jar tvf allenwells.jar</code></td><td align="left"></td></tr></tbody></table> 
<h4><a id="3MANFESTMF_74"></a>3&gt;MANFEST.MF文件</h4> 
<p>常见属性：</p> 
<pre><code class="prism language-mf">Manifest-Version
    用来定义manifest文件的版本号，比如：Manifest-Version: 1.0。最小的清单文件只包含这一条。
    Created-By
    声明该文件的生成者，一般该属性是由jar命令行工具生成的。比如：Created-By: Apache Ant 1.5.1
    Signature-Version
    定义jar文件的签名版本号
    Class-Path
    应用程序或者类装载器使用该值来构建内部的类搜索路径
Main-Class
    定义jar文件的入口类。该类必须是一个可运行的类，一旦定义了该属性就可以通过 java -jar x.jar来运行该jar文件。
</code></pre> 
<h3><a id="3rarRoshal_ARchive_89"></a>3）rar压缩（Roshal ARchive）</h3> 
<ol><li>相比zip压缩：压缩率高、解压压缩慢</li></ol> 
<h4><a id="1shell_92"></a>1&gt;shell命令</h4> 
<table><thead><tr><th>功能</th><th align="left">命令</th><th align="left">备注</th></tr></thead><tbody><tr><td>解压rar</td><td align="left"><code>unrar e file.rar</code></td><td align="left"></td></tr><tr><td>压缩rar</td><td align="left"><code>rar a jpg.rar *.jpg</code></td><td align="left">需要先下载rar for Linux 。</td></tr><tr><td>同时压缩file1,file2,以及目录dir1</td><td align="left"><code>rar a file1.rar file1 file2 dir1</code></td><td align="left"></td></tr></tbody></table> 
<h3><a id="4tartargz_100"></a>4）tar打包、tar.gz压缩</h3> 
<ol><li>linux将多个文件打成tar包。</li><li>经过gzip压缩后的tar文件，形成tar.gz包，扩展名为“xx.tar.gz”；</li><li>java通过assembly.xml来打包。</li></ol> 
<h4><a id="1shell_105"></a>1&gt;shell命令</h4> 
<p>参数：</p> 
<pre><code class="prism language-shell"><span class="token number">5</span>个独立命令，可以和其它命令连用但只能用其中一个：
-c: 建立压缩档案
-x：解压
-t：查看内容
-r：向压缩归档文件末尾追加文件
-u：更新原压缩包中的文件

<span class="token number">5</span>个可选命令：
-z：有gzip属性的
-j：有bz2属性的
-Z：有compress属性的
-v：显示所有过程
-O：将文件解开到标准输出

<span class="token number">1</span>个必备参数：表示归档名
<span class="token parameter variable">-f</span>  name.tar 
</code></pre> 
<table><thead><tr><th align="left">功能</th><th align="left">命令</th><th>备注</th></tr></thead><tbody><tr><td align="left">解压 tar包</td><td align="left"><code>tar –xvf file.tar</code></td><td></td></tr><tr><td align="left">解压tar.gz</td><td align="left"><code>tar xzvf dist_10_30.tar.gz -C /www</code></td><td>解压到对应目录www</td></tr><tr><td align="left">压缩test为tar.gz包</td><td align="left">tar -czvf test.tar.gz test</td><td></td></tr><tr><td align="left">将目录里所有jpg文件打成tar包并压缩</td><td align="left"><code>tar –czf jpg.tar.gz *.jpg</code></td><td>去掉-z不压缩直接打tar包</td></tr><tr><td align="left">将所有.gif的文件增加到all.tar的包里面去</td><td align="left"><code>tar -rf all.tar *.gif</code></td><td></td></tr><tr><td align="left">更新原来tar包all.tar中logo.gif文件</td><td align="left"><code>tar -uf all.tar logo.gif</code></td><td></td></tr><tr><td align="left">列出all.tar包中所有文件</td><td align="left"><code>tar -tf all.tar</code></td><td></td></tr></tbody></table> 
<h3><a id="5_136"></a>5）其他</h3> 
<table><thead><tr><th align="left">功能</th><th align="left">命令</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left">压缩</td><td align="left">bzip2 file1</td><td align="left"></td></tr><tr><td align="left">压缩</td><td align="left">gzip file1</td><td align="left"></td></tr><tr><td align="left">解压 tar.bz2</td><td align="left"><code>tar -xjvf file.tar.bz2</code></td><td align="left"></td></tr><tr><td align="left">解压tar.Z</td><td align="left"><code>tar –xZvf file.tar.Z</code></td><td align="left"></td></tr><tr><td align="left">解压bz2</td><td align="left"><code>bunzip2 file1.bz2</code></td><td align="left"></td></tr><tr><td align="left">解压gz</td><td align="left"><code>gunzip file1.gz</code></td><td align="left"></td></tr></tbody></table> 
<h3><a id="6aarAARAndroid_Archive_150"></a>6）*.aar，AAR（Android Archive）</h3> 
<ol><li>Android库项目的二进制归档文件，包含所有资源，class以及res资源文件。<br> AAR = AndroidManifest.xml + classes.jar + res + R.txt</li><li>解压：找一个aar文件，然后修改后缀名为‘zip’或者‘rar’格式，然后解压该文件；</li><li>对于一些不常变动的 Android Library，我们可以直接引用 aar，加快编译速度。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b2888b63c060f3c195f425f371cdf83b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac如何下载python？安装完python之后终端却找不到命令（已解决）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e0dd4c0c9899a393b8b0d311341cd10/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【RK3568】瑞芯微平台的编译</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>