<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux查看历史命令history - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux查看历史命令history" />
<meta property="og:description" content="１．可以按一下上＼下方向键，命令行就会显示相对于当前命令的上一条或下一条历史记录．
２．和方向键相同功能的就是组合键Ctrl&#43; p （前面执行过的命令）,Ctrl &#43;n（后面执行过的命令）．
２．上面两个都是相对于当前命令查询上一条或者下一条命令的历史记录．如果搜索命令历史记录，
就用Ctrl&#43; r 组合键进入历史记录搜寻状态，然后，键盘每按一个字母，当前命令行就会搜索出命令历史记录．
1. history作用 linux的history命令的作用是，记录执行过的命令。 用法： history [n] n为数字，列出最近的n条命令 -c 将目前shell中的所有history命令消除 history [-raw] histfiles -a 将目前新增的命令写入histfiles, 默认写入~/.bash_history -r 将histfiles内容读入到目前shell的history记忆中 -w 将目前history记忆的内容写入到histfiles shell &gt; history 34 14-10-28 16:19:24 ll 35 14-10-28 16:19:26 vim test 36 14-10-28 16:19:33 ll 37 14-10-28 16:19:34 ll shell &gt; history 3 1032 14-11-02 16:10:41 history 1033 14-11-02 16:10:46 history |more 1034 14-11-02 16:11:15 history 3 使用! 执行历史命令。 ! number 执行第几条命令 !" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f6ec7a5b10d0b5b0f23c6592b4a9e1e4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-01T11:06:53+08:00" />
<meta property="article:modified_time" content="2018-02-01T11:06:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux查看历史命令history</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="article_content" class="article_content csdn-tracking-statistics"> 
 <p><span style="font-size:18px">１．可以按一下<strong>上＼下方向键</strong>，命令行就会显示相对于当前命令的上一条或下一条历史记录．</span></p> 
 <p><span style="font-size:18px">２．和方向键相同功能的就是组合键<strong>Ctrl+ p</strong> （前面执行过的命令）,<strong>Ctrl +n</strong>（后面执行过的命令）．</span></p> 
 <p><span style="font-size:18px">２．上面两个都是相对于当前命令查询上一条或者下一条命令的历史记录．如果搜索命令历史记录，</span></p> 
 <p><span style="font-size:18px">就用<strong>Ctrl+ r </strong>组合键进入历史记录搜寻状态，然后，键盘每按一个字母，当前命令行就会搜索出命令历史记录．</span></p> 
 <p><span style="font-size:18px"></span></p> 
 <h3>1. history作用</h3> 
 <div> 
  <br> 
 </div> 
 <div>
   linux的history命令的作用是，记录执行过的命令。 
 </div> 
 <div>
   用法： 
 </div> 
 <div>
   history [n]  n为数字，列出最近的n条命令 
 </div> 
 <div>
   -c  将目前shell中的所有history命令消除 
 </div> 
 <div>
   history [-raw] histfiles 
 </div> 
 <div>
   -a 将目前新增的命令写入histfiles, 默认写入~/.bash_history 
 </div> 
 <div>
   -r  将histfiles内容读入到目前shell的history记忆中 
 </div> 
 <div>
   -w 将目前history记忆的内容写入到histfiles 
 </div> 
 <div> 
  <pre><code class="language-plain">shell &gt; history
   34  14-10-28 16:19:24 ll
   35  14-10-28 16:19:26 vim test
   36  14-10-28 16:19:33 ll
   37  14-10-28 16:19:34 ll</code></pre> 
  <br> 
  <br> 
 </div> 
 <div> 
  <div class="dp-highlighter bg_plain"> 
   <div class="bar"> 
    <div class="tools"> 
     <span class="tracking-ad"></span> 
     <pre><code class="language-plain">    shell &gt; history 3  
     1032  14-11-02 16:10:41 history  
     1033  14-11-02 16:10:46 history |more  
     1034  14-11-02 16:11:15 history 3  </code></pre> 
     <br> 
     <br> 
     <span class="tracking-ad"></span> 
    </div> 
   </div> 
  </div> 
  <div>
    使用! 执行历史命令。 
  </div> 
  <div>
    ! number 执行第几条命令 
  </div> 
  <div>
    ! command 从最近的命令查到以command开头的命令执行 
  </div> 
  <div>
    !! 执行上一条 
   <br> 
   <pre><code class="language-plain">shell &gt; !1046
history 3
 1045  14-11-02 16:22:38 head ~/.bash_history 
 1046  14-11-02 16:35:37 history 3
 1047  14-11-02 16:35:48 history 3
shell &gt; !!
history 3
 1046  14-11-02 16:35:37 history 3
 1047  14-11-02 16:35:48 history 3
 1048  14-11-02 16:35:52 history 3
shell &gt; !head
head ~/.bash_history 
#1414484377
cd update/
#1414484377</code></pre> 
   <br> 
   <br> 
  </div> 
  <h3>2. history配置修改</h3> 
  <div> 
   <br> 
  </div> 
  <div>
    history记录的行数 
  </div> 
  <div> 
   <div class="dp-highlighter bg_plain"> 
    <div class="bar"> 
     <div class="tools"> 
      <span class="tracking-ad"></span> 
      <pre><code class="language-plain">shell &gt; echo $HISTSIZE
1000
shell &gt; </code></pre> 
      <span class="tracking-ad"> </span> 
     </div> 
    </div> 
   </div> 默认记录1000行 
  </div> 
  <div>
    配置文件在/etc/profile中修改 
  </div> 
  <div> 
   <div class="dp-highlighter bg_plain"> 
    <div class="bar"> 
     <div class="tools"> 
      <span class="tracking-ad"></span> 
      <pre><code class="language-plain">HISTSIZE=1000
export  HISTSIZE</code></pre> 
      <span class="tracking-ad"> </span> 
     </div> 
    </div> 
   </div> 历史命令文件记录在 ~/.bash_history中 
  </div> 
  <div> 
   <br> 
  </div> 
  <div>
    想要让linux的history命令显示时间，history是默认不带时间， 
  </div> 
  <div>
    在/etc/profile 中增加 
  </div> 
  <div> 
   <div class="dp-highlighter bg_plain"> 
    <div class="bar"> 
     <div class="tools"> 
      <pre><code class="language-plain">export HISTTIMEFORMAT="%y-%m-%d %H:%M:%S "</code></pre> 
      <span class="tracking-ad"></span> 
      <span class="tracking-ad"> </span> 
     </div> 
    </div> 
   </div> 查看.bash_history 
  </div> 
  <div> 
   <pre><code class="language-plain">shell &gt; head ~/.bash_history 
#1414484377
cd update/
#1414484377
ll
#1414484388
vim address 
#1414484439
ll
#1414484440
ll
shell &gt; </code></pre> 
   <h3>3. 同一账号同时多次登录写入history</h3> 
   <div> 
    <br> 
   </div> 
   <div>
     普通情况下， 当以bash登录系统时，系统会从~/.bash_history读取以前运行的命令 
   </div> 
   <div>
     当注销时，把最新的1000（HISTSIZE）条命令更新到~/.bash_history文件中。 
   </div> 
   <div>
     也可以使用history -w强制立刻写入，仅保留最新的。 
   </div> 
   <div> 
    <br> 
   </div> 
   <div>
     当同一账号，同时登录多个bash时，只有最后一个退出的会写入bash_history,其他的都被覆盖了。 
   </div> 
   <div> 
    <br> 
   </div> 
   <h3>4. Ctrl+r 反向查询历史命令</h3> 
   <div> 
    <br> 
   </div> 
   <div>
     使用Ctrl+r反向查询历史命令，将匹配的最新一条显示出来 
   </div> 
   <div>
     如果还想继续向上查询，继续按Ctrl+r 
    <br> 
    <pre><code class="language-plain">shell &gt; history 3                                       
 1048  14-11-02 16:35:52 history 3
 1049  14-11-02 16:36:11 head ~/.bash_history 
 1050  14-11-02 16:41:05 history 3
(reverse-i-search)`his': head ~/.bash_history </code></pre> 
   </div> 
  </div> 
 </div> 
 <p></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/57f4aedb86e608eb495d8f1088f89ab8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">设计模式--代理模式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a74c6082faafdac572fd7b0fcb4d5528/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">better-scroll 使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>