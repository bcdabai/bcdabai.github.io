<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>å…³äºæŠ–éŸ³æŠ“åŒ…çš„ä¸€äº›åˆ†æå’ŒæŠ–éŸ³è§†é¢‘æ‰¹é‡ä¸‹è½½ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="å…³äºæŠ–éŸ³æŠ“åŒ…çš„ä¸€äº›åˆ†æå’ŒæŠ–éŸ³è§†é¢‘æ‰¹é‡ä¸‹è½½" />
<meta property="og:description" content="ä¸Šä¸€ç¯‡ä»‹ç»äº†æŠ“åŒ…è½¯ä»¶çš„ä½¿ç”¨ï¼š
Fiddler&#43;å¤œç¥æ¨¡æ‹Ÿå™¨&#43;xposed&#43;justTrustMeæ‰‹æœºæŠ“åŒ…
è¿™ä¸€ç¯‡ä»‹ç»ä¸‹å¯¹æŠ–éŸ³é‡Œ**â€œå–œæ¬¢â€**çš„è§†é¢‘æ‰¹é‡ä¸‹è½½ï¼Œå’Œä¸€äº›åˆ†æã€‚
1.æ ¹æ®ä¸Šä¸€ç¯‡çš„æŠ“åŒ…è½¯ä»¶ä»‹ç»ï¼Œæˆ‘ä»¬å…ˆæ¨¡æ‹Ÿå™¨ä¸Šç™»å½•æŠ–éŸ³å¼€å§‹æŠ“åŒ…ã€‚ 1.1 ç»è¿‡åˆ†æå‘ç°â€œå–œæ¬¢â€çš„è§†é¢‘åˆ—è¡¨æ¥å£æ˜¯: https://aweme.snssdk.com/aweme/v1/aweme/favorite/
1.2 è¿‡æ»¤ä¸‹url:
1.3 headerså‚æ•°ï¼š
X-Gorgonï¼šè¯·æ±‚æ‰€éœ€çš„åŠ å¯†å‚æ•°
X-Tt-Tokenï¼šåœ¨æœç´¢æ¥å£ç”¨äºç”¨æˆ·èº«ä»½çš„æ ‡ç¤ºã€‚
æœ‰çš„æ¥å£ä¼šæœ‰X-SS-STUBç”¨äºpostè¯·æ±‚æ—¶bodyéƒ¨åˆ†çš„md5å€¼ï¼Œä½†æ˜¯åœ¨ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶å€™ä¸å‚ä¸åŠ å¯†ï¼Œæœ‰æ—¶å€™å‚ä¸åŠ å¯†ï¼Œå…·ä½“æ¥å£éœ€è¦å…·ä½“åˆ†æã€‚
ç»è¿‡æµ‹è¯•ï¼Œæœç´¢æ¥å£çš„ xgorgon ä¸€ä¸ªå¤§æ¦‚å¯ä»¥ç”¨2åˆ†é’Ÿã€‚1ç§’è¯·æ±‚1æ¬¡ï¼Œè¯·æ±‚130æ¡æ•°æ®éœ€è¦é‡æ–°è·å–xgorgonã€‚
å½“ç„¶ä¹Ÿå¯ä»¥æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°ç”Ÿæˆxgorgonã€‚
æ¯ä¸ªè´¦å·æ¯å¤©è¯·æ±‚æœç´¢æ¥å£æœ‰æ¬¡æ•°é™åˆ¶ï¼Œå¤§æ¦‚åœ¨300å·¦å³ã€‚
è¶…è¿‡é™åˆ¶éœ€è¦æ›´æ¢è´¦å·ï¼Œå¦å¤–paramsä¹Ÿè¦æ”¹å˜ã€‚
1.4 paramså‚æ•°ï¼š
æ€»çš„æœ‰37ä¸ªå‚æ•°åŒ…æ‹¬è®¾å¤‡ä¿¡æ¯ç­‰ã€‚
æ¯”å¦‚ï¼š sec_user_id:åŠ å¯†åçš„ä½ çš„æŠ–éŸ³id
longitudeï¼šç»åº¦
latitudeï¼šçº¬åº¦
device_typeï¼šè®¾å¤‡å‹å·
manifest_version_codeï¼šæŠ–éŸ³ä»£ç ç‰ˆæœ¬
å…¶ä»–çš„æœ‰ä¸¤ä¸ªå‚æ•°éœ€è¦æ³¨æ„ï¼Œmax_cursor å’Œ count è¿™ä¸¤ä¸ªå‚æ•°
max_cursor : æ ¹æ®è¿™ä¸ªå‚æ•°æ¥è¿”å›ç”¨æˆ·çš„è§†é¢‘åˆ—è¡¨ , ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ , æœ¬å‚æ•°ä¸º0 , ä¼šè¿”å›æœ€æ–°çš„20ä¸ªè§†é¢‘ (countä¸º20æ—¶) count : è¿”å›è§†é¢‘çš„æ•°é‡ ç¬¬ä¸€æ¬¡è¯·æ±‚æ˜¯20 , åé¢æ¯æ¬¡æ˜¯10ã€‚ æˆ‘ä¿®æ”¹äº†countåå¾—åˆ°çš„è¯·æ±‚æ˜¯è¿™æ ·çš„
ä¼°è®¡æ˜¯headerséƒ¨åˆ†çš„å‚æ•°æœ‰å¯¹paramsè¿›è¡Œäº†md5æ ¡éªŒï¼Œæ‰€ä»¥ä¿®æ”¹äº†å‚æ•°æ ¡éªŒä¸é€šè¿‡å¯¼è‡´æ²¡æœ‰æ•°æ®è¿”å›ã€‚
1.4 è¯·æ±‚å“åº”å¦‚ä¸‹ï¼š ......çœç•¥ &#34;aweme_list&#34;: [ { &#34;aweme_id&#34;: &#34;6908554513959898376&#34;, &#34;desc&#34;: &#34;å¥–åŠ±ä½  åœ¨ä¸‹é›¨å¤©è¿˜æ„¿æ„é€æˆ‘å›å®¶#é€ä½ ä¸€æœµå°çº¢èŠ± #é€ä¸€æœµå°çº¢èŠ±å‘Šåˆ«2020&#34;, &#34;create_time&#34;: 1608523210, &#34;author&#34;: { &#34;uid&#34;: &#34;85837556756&#34;, &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f1a08fec7afbccb01a8c2c934334e17f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-25T18:11:26+08:00" />
<meta property="article:modified_time" content="2020-12-25T18:11:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å…³äºæŠ–éŸ³æŠ“åŒ…çš„ä¸€äº›åˆ†æå’ŒæŠ–éŸ³è§†é¢‘æ‰¹é‡ä¸‹è½½</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ä¸Šä¸€ç¯‡ä»‹ç»äº†æŠ“åŒ…è½¯ä»¶çš„ä½¿ç”¨ï¼š<br> <a href="https://blog.csdn.net/qq_33697094/article/details/111596004">Fiddler+å¤œç¥æ¨¡æ‹Ÿå™¨+xposed+justTrustMeæ‰‹æœºæŠ“åŒ…</a></p> 
<p>è¿™ä¸€ç¯‡ä»‹ç»ä¸‹å¯¹æŠ–éŸ³é‡Œ**â€œå–œæ¬¢â€**çš„è§†é¢‘æ‰¹é‡ä¸‹è½½ï¼Œå’Œä¸€äº›åˆ†æã€‚<br> <img src="https://images2.imgbox.com/99/a1/GUtngaeS_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="1_6"></a>1.æ ¹æ®ä¸Šä¸€ç¯‡çš„æŠ“åŒ…è½¯ä»¶ä»‹ç»ï¼Œæˆ‘ä»¬å…ˆæ¨¡æ‹Ÿå™¨ä¸Šç™»å½•æŠ–éŸ³å¼€å§‹æŠ“åŒ…ã€‚</h4> 
<p><img src="https://images2.imgbox.com/94/c5/wpsqisz9_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ul><li><strong>1.1 ç»è¿‡åˆ†æå‘ç°â€œå–œæ¬¢â€çš„è§†é¢‘åˆ—è¡¨æ¥å£æ˜¯:</strong></li></ul> 
<blockquote> 
 <p>https://aweme.snssdk.com/aweme/v1/aweme/favorite/</p> 
</blockquote> 
<ul><li> <p><strong>1.2 è¿‡æ»¤ä¸‹url:</strong><br> <img src="https://images2.imgbox.com/86/4b/Cz4XeCbE_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> </li><li> <p><strong>1.3 headerså‚æ•°ï¼š</strong></p> <p>X-Gorgonï¼šè¯·æ±‚æ‰€éœ€çš„åŠ å¯†å‚æ•°</p> <p>X-Tt-Tokenï¼šåœ¨æœç´¢æ¥å£ç”¨äºç”¨æˆ·èº«ä»½çš„æ ‡ç¤ºã€‚</p> </li></ul> 
<p>æœ‰çš„æ¥å£ä¼šæœ‰X-SS-STUBç”¨äºpostè¯·æ±‚æ—¶bodyéƒ¨åˆ†çš„md5å€¼ï¼Œä½†æ˜¯åœ¨ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶å€™ä¸å‚ä¸åŠ å¯†ï¼Œæœ‰æ—¶å€™å‚ä¸åŠ å¯†ï¼Œå…·ä½“æ¥å£éœ€è¦å…·ä½“åˆ†æã€‚</p> 
<p>ç»è¿‡æµ‹è¯•ï¼Œæœç´¢æ¥å£çš„ xgorgon ä¸€ä¸ªå¤§æ¦‚å¯ä»¥ç”¨2åˆ†é’Ÿã€‚1ç§’è¯·æ±‚1æ¬¡ï¼Œè¯·æ±‚130æ¡æ•°æ®éœ€è¦é‡æ–°è·å–xgorgonã€‚<br> å½“ç„¶ä¹Ÿå¯ä»¥æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°ç”Ÿæˆxgorgonã€‚<br> æ¯ä¸ªè´¦å·æ¯å¤©è¯·æ±‚æœç´¢æ¥å£æœ‰æ¬¡æ•°é™åˆ¶ï¼Œå¤§æ¦‚åœ¨300å·¦å³ã€‚<br> è¶…è¿‡é™åˆ¶éœ€è¦æ›´æ¢è´¦å·ï¼Œå¦å¤–paramsä¹Ÿè¦æ”¹å˜ã€‚</p> 
<ul><li><strong>1.4 paramså‚æ•°ï¼š</strong><br> æ€»çš„æœ‰37ä¸ªå‚æ•°åŒ…æ‹¬è®¾å¤‡ä¿¡æ¯ç­‰ã€‚<br> æ¯”å¦‚ï¼š</li></ul> 
<blockquote> 
 <p>sec_user_id:åŠ å¯†åçš„ä½ çš„æŠ–éŸ³id<br> longitudeï¼šç»åº¦<br> latitudeï¼šçº¬åº¦<br> device_typeï¼šè®¾å¤‡å‹å·<br> manifest_version_codeï¼šæŠ–éŸ³ä»£ç ç‰ˆæœ¬</p> 
</blockquote> 
<p>å…¶ä»–çš„æœ‰ä¸¤ä¸ªå‚æ•°éœ€è¦æ³¨æ„ï¼Œmax_cursor å’Œ count è¿™ä¸¤ä¸ªå‚æ•°</p> 
<pre><code>max_cursor :  æ ¹æ®è¿™ä¸ªå‚æ•°æ¥è¿”å›ç”¨æˆ·çš„è§†é¢‘åˆ—è¡¨ , ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ , æœ¬å‚æ•°ä¸º0 , ä¼šè¿”å›æœ€æ–°çš„20ä¸ªè§†é¢‘ (countä¸º20æ—¶)

count : è¿”å›è§†é¢‘çš„æ•°é‡ ç¬¬ä¸€æ¬¡è¯·æ±‚æ˜¯20 , åé¢æ¯æ¬¡æ˜¯10ã€‚
</code></pre> 
<p>æˆ‘ä¿®æ”¹äº†countåå¾—åˆ°çš„è¯·æ±‚æ˜¯è¿™æ ·çš„<br> <img src="https://images2.imgbox.com/89/f3/weDnv1wh_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä¼°è®¡æ˜¯headerséƒ¨åˆ†çš„å‚æ•°æœ‰å¯¹paramsè¿›è¡Œäº†md5æ ¡éªŒï¼Œæ‰€ä»¥ä¿®æ”¹äº†å‚æ•°æ ¡éªŒä¸é€šè¿‡å¯¼è‡´æ²¡æœ‰æ•°æ®è¿”å›ã€‚</p> 
<ul><li><strong>1.4 è¯·æ±‚å“åº”å¦‚ä¸‹</strong>ï¼š</li></ul> 
<pre><code class="prism language-javascript">   <span class="token operator">...</span><span class="token operator">...</span>çœç•¥
<span class="token string">"aweme_list"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string">"aweme_id"</span><span class="token punctuation">:</span> <span class="token string">"6908554513959898376"</span><span class="token punctuation">,</span>
      <span class="token string">"desc"</span><span class="token punctuation">:</span> <span class="token string">"å¥–åŠ±ä½  åœ¨ä¸‹é›¨å¤©è¿˜æ„¿æ„é€æˆ‘å›å®¶#é€ä½ ä¸€æœµå°çº¢èŠ± #é€ä¸€æœµå°çº¢èŠ±å‘Šåˆ«2020"</span><span class="token punctuation">,</span>
      <span class="token string">"create_time"</span><span class="token punctuation">:</span> <span class="token number">1608523210</span><span class="token punctuation">,</span>
      <span class="token string">"author"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"uid"</span><span class="token punctuation">:</span> <span class="token string">"85837556756"</span><span class="token punctuation">,</span>
        <span class="token string">"short_id"</span><span class="token punctuation">:</span> <span class="token string">"331226453"</span><span class="token punctuation">,</span>
        <span class="token string">"nickname"</span><span class="token punctuation">:</span> <span class="token string">"è¢å°è‘³"</span><span class="token punctuation">,</span>
        <span class="token string">"signature"</span><span class="token punctuation">:</span> <span class="token string">"é…·ç‹—/ç½‘æ˜“äº‘éŸ³ä¹æœç´¢ï¼šè¢å°è‘³ï¼ˆæœ€åä¸€ä¸ªå­—å¿µå¾®ï¼‰\nç½‘æ˜“â˜ï¸ç”µå°æœç´¢ï¼šé˜¿è¢çš„æ­Œå•\nå…¨æ°‘kæ­Œï¼š457700932\nğŸ§ç¾¤ï¼š596919261\nåˆä½œvxï¼šhz-flow16\nå’¨è¯¢ğŸ¸vxï¼šjitavvvvv\næ›´æ–°æ—¶é—´æ˜¯ä¸­åˆ12ç‚¹å“¦\nQQéŸ³ä¹ï¼šè¢å°è‘³ï¼ˆæœ€åä¸€ä¸ªå­—å¿µå¾®ï¼‰\nğŸ§£ï¼šè¢å°è‘³ï¼ˆæœ€åä¸€ä¸ªå­—å¿µå¾®ï¼‰"</span><span class="token punctuation">,</span>
        <span class="token string">"avatar_larger"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"uri"</span><span class="token punctuation">:</span> <span class="token string">"1080x1080/2ec9c0004e65964c250c2"</span><span class="token punctuation">,</span>
          <span class="token string">"url_list"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">"https://p5-dy-ipv6.byteimg.com/aweme/1080x1080/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p3-dy-ipv6.byteimg.com/aweme/1080x1080/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p9-dy.byteimg.com/aweme/1080x1080/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p5-dy-ipv6.byteimg.com/aweme/1080x1080/2ec9c0004e65964c250c2.jpeg?from=2563711402"</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">720</span><span class="token punctuation">,</span>
          <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">720</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"avatar_thumb"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"uri"</span><span class="token punctuation">:</span> <span class="token string">"100x100/2ec9c0004e65964c250c2"</span><span class="token punctuation">,</span>
          <span class="token string">"url_list"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">"https://p6-dy-ipv6.byteimg.com/aweme/100x100/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p26-dy.byteimg.com/aweme/100x100/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p29-dy.byteimg.com/aweme/100x100/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p6-dy-ipv6.byteimg.com/aweme/100x100/2ec9c0004e65964c250c2.jpeg?from=2563711402"</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">720</span><span class="token punctuation">,</span>
          <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">720</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"avatar_medium"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"uri"</span><span class="token punctuation">:</span> <span class="token string">"720x720/2ec9c0004e65964c250c2"</span><span class="token punctuation">,</span>
          <span class="token string">"url_list"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">"https://p5-dy-ipv6.byteimg.com/aweme/720x720/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p6-dy-ipv6.byteimg.com/aweme/720x720/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p9-dy.byteimg.com/aweme/720x720/2ec9c0004e65964c250c2.webp?from=2563711402"</span><span class="token punctuation">,</span>
            <span class="token string">"https://p5-dy-ipv6.byteimg.com/aweme/720x720/2ec9c0004e65964c250c2.jpeg?from=2563711402"</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string">"width"</span><span class="token punctuation">:</span> <span class="token number">720</span><span class="token punctuation">,</span>
          <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">720</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"is_verified"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">"follow_status"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">"is_block"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token string">"location"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token string">"hide_location"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token string">"custom_verify"</span><span class="token punctuation">:</span> <span class="token string">"æŠ–éŸ³éŸ³ä¹äºº"</span><span class="token punctuation">,</span>
        <span class="token string">"unique_id"</span><span class="token punctuation">:</span> <span class="token string">"vivian020322"</span><span class="token punctuation">,</span>
        <span class="token string">"story_count"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">"room_id"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">"authority_status"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">"verify_info"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token string">"share_info"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"share_url"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>çœç•¥
</code></pre> 
<ul><li><strong>1.5 è¯·æ±‚å“åº”åˆ†æï¼š</strong></li></ul> 
<pre><code class="prism language-yaml">aweme_liståˆ—è¡¨ä¸­æ¯æ¬¡ä¼šè¿”å›20æ¡å–œæ¬¢çš„å†…å®¹æ¯ä¸€æ¡åŒ…æ‹¬ï¼š
       descï¼šè§†é¢‘ä¸‹çš„æ–‡å­—æè¿°
       authorï¼šè§†é¢‘åˆ›ä½œè€…çš„ä¿¡æ¯ï¼š
	        nicknameï¼šæŠ–éŸ³é‡Œçš„æ˜µç§°
			signatureï¼šæŠ–éŸ³é‡Œçš„ä¸»é¡µæè¿°
			avatar_largerã€avatar_thumbã€avatar_mediumï¼šä¸åŒå°ºå¯¸çš„æŠ–éŸ³å¤´åƒ
			is_verifiedï¼šæ˜¯å¦è®¤è¯
			custom_verifyï¼šè®¤è¯çš„æè¿°
			unique_idï¼šæŠ–éŸ³å·
	   share_infoï¼šåˆ†äº«çš„ä¿¡æ¯ï¼š
	        share_urlï¼šæœ‰æ°´å°çš„è§†é¢‘åœ°å€urlï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰
	        share_qrcode_urlï¼šåˆ†äº«çš„äºŒç»´ç 
	   musicï¼šè§†é¢‘çš„éŸ³ä¹ä¿¡æ¯
	        play_urlï¼šéŸ³ä¹åœ°å€url
	   <span class="token key atrule">video</span><span class="token punctuation">:</span> è§†é¢‘ä¿¡æ¯
	        uri<span class="token punctuation">:</span>è§†é¢‘çš„å”¯ä¸€idï¼ˆé‡è¦ï¼‰
	        play_addrï¼šæ— æ°´å°çš„è§†é¢‘æ’­æ”¾åœ°å€urlï¼ˆçŸ­æ—¶é—´æœ‰æ•ˆï¼Œè¶…æ—¶æ— æ³•æ‰“å¼€ï¼‰
			<span class="token key atrule">cover</span><span class="token punctuation">:</span> è§†é¢‘å°é¢åœ°å€
			download_addrï¼šå¸¦æ°´å°çš„è§†é¢‘åœ°å€
</code></pre> 
<p>å…¶ä¸­</p> 
<ul><li><strong>play_addræ˜¯æ— æ°´å°çš„è§†é¢‘é“¾æ¥</strong>ï¼Œè¯¥é“¾æ¥æ¥åšäº†æ—¶é—´é™åˆ¶ï¼ŒæŠŠé“¾æ¥å¤åˆ¶å‡ºæ¥åœ¨æµè§ˆå™¨å†…æ‰“å¼€çŸ­æ—¶é—´å†…å¯ä»¥è§‚çœ‹å’Œä¸‹è½½ï¼Œä½†æ˜¯è¶…å‡ºæ—¶é—´é™åˆ¶åˆ™æ— æ³•è®¿é—®ï¼Œé‚£æ€ä¹ˆæï¼Ÿçœ‹ä¸‹é¢çš„uriã€‚</li><li><strong>share_urlæœ‰æ°´å°çš„è§†é¢‘åœ°å€url</strong>ï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰</li><li><strong>uri</strong>è§†é¢‘çš„å”¯ä¸€idï¼ŒæŠŠuriå¤åˆ¶æ›¿æ¢ä¸‹é¢çš„uriï¼Œæµè§ˆå™¨æ‰“å¼€ï¼Œä½ ä¼šå‘ç°ä¸€ç‰‡ç©ºç™½ï¼Œä½†æ˜¯å‘é€åˆ°æ‰‹æœºæˆ–è€…ç”µè„‘æµè§ˆå™¨ç”¨æ‰‹æœºæ¨¡å¼æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°åŸè§†é¢‘äº†</li></ul> 
<pre><code class="prism language-java">https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>aweme<span class="token punctuation">.</span>snssdk<span class="token punctuation">.</span>com<span class="token operator">/</span>aweme<span class="token operator">/</span>v1<span class="token operator">/</span>play<span class="token operator">/</span><span class="token operator">?</span>video_id<span class="token operator">=</span>uri<span class="token operator">&amp;</span>ratio<span class="token operator">=</span><span class="token number">720</span>p<span class="token operator">&amp;</span>line<span class="token operator">=</span><span class="token number">0</span>
</code></pre> 
<p>æˆ–è€…ï¼š</p> 
<pre><code class="prism language-java">https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>aweme<span class="token punctuation">.</span>snssdk<span class="token punctuation">.</span>com<span class="token operator">/</span>aweme<span class="token operator">/</span>v1<span class="token operator">/</span>play<span class="token operator">/</span><span class="token operator">?</span>video_id<span class="token operator">=</span>uri
</code></pre> 
<p><strong>æ¯”å¦‚ï¼š</strong></p> 
<blockquote> 
 <p>https://aweme.snssdk.com/aweme/v1/play/?video_id=v0d00ffa0000bvq6d47clnok9ciqf3jg&amp;ratio=720p&amp;line=0</p> 
</blockquote> 
<p>æ‰‹æœºæ¨¡å¼æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°æ— æ°´å°è§†é¢‘äº†ï¼Œç„¶åå¤åˆ¶åœ°å€æ çš„åœ°å€å°±æ˜¯è§†é¢‘çš„çœŸå®åœ°å€äº†ï¼Œè¿™ä¸ªåœ°å€æ‰‹æœºç”µè„‘éƒ½èƒ½æ‰“å¼€æ’­æ”¾ä¸‹è½½ã€‚<br> <img src="https://images2.imgbox.com/8c/b6/kvfhaN8r_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æŠ–éŸ³apkä½¿ç”¨jadxé€†å‘åå‘ç°åŒ…åã€å˜é‡ã€å‡½æ•°åå¾ˆå¤šéƒ½ç»è¿‡äº†æ··æ·†ï¼š</p> 
<p><img src="https://images2.imgbox.com/0a/6f/cdQbtz0d_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/11/18/OTaYILyR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å¤ªéš¾é¡¶äº†ã€‚</p> 
<p>Fiddlerå’Œæ¨¡æ‹Ÿå™¨çš„ä½¿ç”¨è¯·å‚è€ƒæˆ‘å¦ä¸€ç¯‡æ–‡ç« <br> <a href="https://blog.csdn.net/qq_33697094/article/details/111596004">Fiddler+å¤œç¥æ¨¡æ‹Ÿå™¨+xposed+justTrustMeæ‰‹æœºæŠ“åŒ…</a></p> 
<h4><a id="_164"></a>äºŒã€æ‰¹é‡ä¸‹è½½æŠ–éŸ³é‡Œçš„ç‚¹äº†çº¢å¿ƒçš„è§†é¢‘æ€è·¯ï¼š</h4> 
<p>1.å‚ç…§ä¸Šé¢çš„æ–‡ç« ï¼Œé…ç½®å¥½fiddlerå’Œæ¨¡æ‹Ÿå™¨ï¼Œæ‰“å¼€fiddlerå¼€å§‹æŠ“åŒ…ï¼Œæ¨¡æ‹Ÿå™¨æ‰“å¼€æŠ–éŸ³ç™»å½•è‡ªå·±çš„è´¦å·ï¼Œç‚¹å‡»å–œæ¬¢çš„è§†é¢‘åˆ—è¡¨å¼€å§‹æ»‘åŠ¨ã€‚ï¼ˆå› ä¸ºæ²¡æœ‰ä½¿ç”¨è„šæœ¬æˆ–å…¶ä»–å·¥å…·å»æ¨¡æ‹Ÿæ»‘åŠ¨å±å¹•æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦æ‰‹åŠ¨æ»‘åŠ¨ï¼Œæˆ‘å–œæ¬¢çš„è§†é¢‘åªæœ‰600å¤šä¸ªï¼Œæ…¢æ…¢çš„æ»‘çš„ä¼°è®¡åªè¦ä¸¤åˆ†é’Ÿå¯ä»¥æ»‘å®Œï¼‰ã€‚<br> <img src="https://images2.imgbox.com/bc/03/lvnJqq8G_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>2.æ»‘å®Œä¹‹åfiddlerå…³é—­æŠ“åŒ…ï¼Œç„¶åè¿‡æ»¤ä¸‹urlï¼Œè·å–æ‰€æœ‰å–œæ¬¢åˆ—è¡¨çš„è¯·æ±‚ã€‚<br> <img src="https://images2.imgbox.com/06/14/mU33OYlM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è¿‡æ»¤å‡ºçš„è¯·æ±‚å°±æ˜¯æ‰€æœ‰å–œæ¬¢åˆ—è¡¨çš„çš„è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚é‡Œçš„å“åº”å°±åŒ…å«äº†è§†é¢‘urlã€å°é¢ã€æè¿°ç­‰ä¿¡æ¯ã€‚</p> 
<p>3.é€‰æ‹©saveä¿å­˜æ‰€æœ‰çš„è¯·æ±‚ä¸ºä¼šè¯ï¼Œç»™æœ¬æ¬¡ä¼šè¯èµ·ä¸ªåå­—ï¼Œç„¶ååœ¨å·¦ä¾§ä¼šçœ‹åˆ°æœ¬æ¬¡ä¿å­˜çš„ä¼šè¯ã€‚<br> <img src="https://images2.imgbox.com/0b/2d/9CfERcJs_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>4.é€‰æ‹©ä¿å­˜çš„ä¼šè¯å³é”®Exportå¯¼å‡ºï¼Œå¯¼å‡ºæ ¼å¼é€‰æ‹©Raw Fileã€‚Raw Fileæ ¼å¼å¯ä»¥å°†æ‰€æœ‰å“åº”ä¿å­˜ä¸ºjsonæ–‡ä»¶ã€‚<br> <img src="https://images2.imgbox.com/01/3e/zR2jNMhs_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/16/b5/P7nRD8Lg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> 5.å†™ä»£ç è§£æä¸Šé¢è·å¾—çš„å“åº”æ–‡ä»¶ï¼Œä»å“åº”æ–‡ä»¶ä¸­è·å–urlå’Œè§†é¢‘ä¿¡æ¯ï¼Œç„¶åé€šè¿‡urlä¸‹è½½è§†é¢‘ã€‚</p> 
<p>ä»£ç ä¸»è¦ç”¨åˆ°çš„jaråŒ…ï¼š</p> 
<blockquote> 
 <p>fastjson-1.2.70.jar<br> httpclient-4.5.12.jar<br> httpcore-4.4.13.jar<br> commons-lang3-3.3.9.jar</p> 
</blockquote> 
<p>jaråŒ…å·²ä¸Šä¼ <a href="https://pan.baidu.com/s/1nj062TwzDqZrAJVQdEU6hQ" rel="nofollow">ç™¾åº¦äº‘</a>ï¼Œæå–ç ï¼šdi81</p> 
<h4><a id="_190"></a>ä¸‰ã€ä¸»è¦çš„ä»£ç ï¼š</h4> 
<p><strong>å“åº”æ–‡ä»¶è§£æè·å–urlç±»ï¼š</strong><br> path æ”¹æˆä¸Šé¢å¯¼å‡ºçš„æ–‡ä»¶å¤¹é‡Œçš„favoriteæ–‡ä»¶å¤¹åœ°å€</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> utils<span class="token punctuation">;</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span>JSONArray<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span>JSONObject<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ConcurrentHashMap<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Douyin</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * å­˜æ”¾æ‰€æœ‰çš„å“åº”æ–‡ä»¶å
     */</span>
    <span class="token keyword">private</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> files <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * å­˜æ”¾æ‰€æœ‰è§†é¢‘åç§°å’Œurlï¼Œ&lt;è§†é¢‘ä¿¡æ¯ï¼Œurl&gt;
     */</span>
    <span class="token keyword">private</span> Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> videoMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * è¦è§£æçš„å“åº”æ–‡ä»¶å­˜æ”¾è·¯å¾„
     */</span>
    <span class="token keyword">private</span> String path <span class="token operator">=</span> <span class="token string">"D:\\fiddlerSaveFile\\2021-1-14\\aweme.snssdk.com\\aweme\\v1\\aweme\\favorite\\"</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> number<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>


    <span class="token keyword">public</span> String <span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> path<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPath</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>path <span class="token operator">=</span> path<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * è·å–å“åº”æ–‡ä»¶ä¸­çš„è§†é¢‘urlåœ°å€ï¼ˆaweme_listä¸­çš„play_addråˆ°videoMapï¼‰
     *
     * @param filePath
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getVideoUrl</span><span class="token punctuation">(</span>String filePath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        StringBuilder jaonstr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
                <span class="token comment">//è¯»å–æ–‡ä»¶ä¸ºå­—èŠ‚æµ</span>
                FileInputStream file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//å­—èŠ‚æµè½¬åŒ–ä¸ºå­—ç¬¦æµï¼Œä»¥UTF-8è¯»å–é˜²æ­¢ä¸­æ–‡ä¹±ç </span>
                InputStreamReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//åŠ å…¥åˆ°ç¼“å­˜</span>
                BufferedReader buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            String str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>str <span class="token operator">=</span> buf<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//æŒ‰è¡Œè¯»å–ï¼Œåˆ°è¾¾æœ€åä¸€è¡Œè¿”å›null</span>
                jaonstr<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        JSONObject json <span class="token operator">=</span> JSONObject<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jaonstr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å­—ç¬¦ä¸²è½¬jsonå¯¹è±¡</span>
        JSONArray jsonArray <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"aweme_list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> jsonArray<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            String videoInfo <span class="token operator">=</span> jsonArray<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"desc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            JSONObject videoJson <span class="token operator">=</span> jsonArray<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span><span class="token string">"video"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            JSONObject playAddrJson <span class="token operator">=</span> videoJson<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span><span class="token string">"play_addr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String videoUrl <span class="token operator">=</span> playAddrJson<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"url_list"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>number<span class="token operator">+</span><span class="token string">".æ ‡é¢˜:"</span><span class="token operator">+</span>videoInfo<span class="token operator">+</span><span class="token string">",url:"</span><span class="token operator">+</span>videoUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
            number<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>
            videoMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>videoInfo<span class="token punctuation">,</span> videoUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * è·å–æ‰€æœ‰çš„è§†é¢‘urlè¿”å›
     *
     * @param
     * @return videoMap
     */</span>
    <span class="token keyword">public</span> Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> <span class="token function">getAllVideoUrlToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//è·å–pathè·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ç»å¯¹è·¯å¾„åˆ°files</span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        File<span class="token punctuation">[</span><span class="token punctuation">]</span> tempList <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tempList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tempList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                files<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tempList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//éå†filesè§£ææ¯ä¸ªæ–‡ä»¶è·å–urlåˆ°videoMap</span>
        files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>v <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">getVideoUrl</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>è§†é¢‘ä¸‹è½½ç±»ï¼š</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> utils<span class="token punctuation">;</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span>JSON<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span>StringUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpEntity<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpStatus<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>HttpClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>config<span class="token punctuation">.</span>RequestConfig<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>CloseableHttpResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>HttpGet<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>HttpPost<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>ContentType<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>StringEntity<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span>CloseableHttpClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span>HttpClients<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>util<span class="token punctuation">.</span>EntityUtils<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpUtil</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> RequestConfig requestConfig <span class="token operator">=</span> RequestConfig<span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSocketTimeout</span><span class="token punctuation">(</span><span class="token number">60000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setConnectTimeout</span><span class="token punctuation">(</span><span class="token number">60000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> String chaset <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token punctuation">;</span>    <span class="token comment">// é»˜è®¤ç¼–ç </span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> String videoDownLoadPath <span class="token operator">=</span> <span class="token string">"D:\\video\\"</span><span class="token punctuation">;</span>    <span class="token comment">// é»˜è®¤è§†é¢‘ä¸‹è½½çš„ä½ç½®</span>

    <span class="token comment">/**
     * å‘é€ GET è¯·æ±‚ï¼ˆHTTPï¼‰ï¼Œæ— å‚æ•°
     *
     * @param url
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">doGet</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token string">"urlä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// åˆ›å»ºhttp GETè¯·æ±‚</span>
        <span class="token comment">//logger.info("url:{}", url);</span>
        HttpGet httpGet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpGet</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®è¯·æ±‚å’Œä¼ è¾“è¶…æ—¶æ—¶é—´</span>
        httpGet<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String result <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>CloseableHttpClient httpclient <span class="token operator">=</span> HttpClients<span class="token punctuation">.</span><span class="token function">createDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºHttpclientå¯¹è±¡</span>
             CloseableHttpResponse response <span class="token operator">=</span> httpclient<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpGet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ‰§è¡Œè¯·æ±‚</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> statusCode <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatusLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statusCode <span class="token operator">==</span> HttpStatus<span class="token punctuation">.</span>SC_OK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                result <span class="token operator">=</span> EntityUtils<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> chaset<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//logger.info("HttpGetæ–¹å¼è¯·æ±‚æˆåŠŸï¼è¿”å›ç»“æœï¼š{}", result);</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// logger.info("HttpGetæ–¹å¼è¯·æ±‚å¤±è´¥ï¼çŠ¶æ€ç :" + statusCode);</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘é€ GET è¯·æ±‚ï¼ˆHTTPï¼‰ï¼Œæœ‰å‚æ•°
     *
     * @param url
     * @param params
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">doGet</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> params<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            StringBuffer extraUrl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>String key <span class="token operator">:</span> params<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    extraUrl<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    extraUrl<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                extraUrl<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                temp<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            url <span class="token operator">+=</span> extraUrl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">doGet</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘é€ POST è¯·æ±‚ï¼ˆHTTPï¼‰ï¼Œæ— å‚æ•°
     *
     * @param url
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">doPost</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">doPost</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘é€ POST è¯·æ±‚ï¼ˆHTTPï¼‰ï¼Œæœ‰å‚æ•°
     *
     * @param url
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">doPost</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// åˆ›å»ºhttp POSTè¯·æ±‚</span>
        HttpPost httpPost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpPost</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpPost<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpPost<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>params <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            httpPost<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringEntity</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">,</span> ContentType<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        String result <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>CloseableHttpClient httpclient <span class="token operator">=</span> HttpClients<span class="token punctuation">.</span><span class="token function">createDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºHttpclientå¯¹è±¡</span>
             CloseableHttpResponse response <span class="token operator">=</span> httpclient<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpPost<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ‰§è¡Œè¯·æ±‚</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//logger.info("httpPost:{}", httpPost);</span>
            <span class="token keyword">int</span> statusCode <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatusLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statusCode <span class="token operator">==</span> HttpStatus<span class="token punctuation">.</span>SC_OK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                result <span class="token operator">=</span> EntityUtils<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> chaset<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//logger.info("HttpPostæ–¹å¼è¯·æ±‚æˆåŠŸï¼è¿”å›ç»“æœï¼š{}", result);</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//logger.info("HttpPostæ–¹å¼è¯·æ±‚å¤±è´¥ï¼çŠ¶æ€ç :" + statusCode);</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * å‘é€šè¿‡urlä¸‹è½½è§†é¢‘ï¼Œä¸‹è½½åˆ°é»˜è®¤ç›®å½•D:\video\,ä¸‹è½½çš„æ–‡ä»¶åæ˜¯æ•°å­—
     *
     * @param url
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">downloadVideo</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">downloadVideo</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> null<span class="token punctuation">,</span> videoDownLoadPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘é€šè¿‡urlä¸‹è½½è§†é¢‘,é»˜è®¤ä¸‹è½½åˆ°D:\video\ï¼Œæ–‡ä»¶åæ˜¯ä¼ å…¥çš„fileName
     *
     * @param url
     * @param fileName ä¸‹è½½åˆ°æœ¬åœ°çš„æ–‡ä»¶å
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">downloadVideo</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String fileName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">downloadVideo</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> videoDownLoadPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * å‘é€šè¿‡urlä¸‹è½½è§†é¢‘ï¼Œä¸‹è½½çš„è§†é¢‘æ–‡ä»¶åæ˜¯æ•°å­—
     *
     * @param url
     * @param fileName ä¿å­˜çš„è§†é¢‘åï¼Œä¸ºç©ºåˆ™ä¿å­˜ä¸ºæ•°å­—
     * @param filepath ä¸‹è½½åˆ°æœ¬åœ°çš„è·¯å¾„ï¼Œä¸ºç©ºåˆ™ä¿å­˜åˆ°é»˜è®¤è·¯å¾„D:\video\
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">downloadVideo</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String fileName<span class="token punctuation">,</span> String filepath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        String filename <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token string">"urlä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//è·å–è§†é¢‘æµ</span>
            HttpClient client <span class="token operator">=</span> HttpClients<span class="token punctuation">.</span><span class="token function">createDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            HttpGet httpget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpGet</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            HttpResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpget<span class="token punctuation">)</span><span class="token punctuation">;</span>
            HttpEntity entity <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            InputStream is <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//æ–‡ä»¶ä¿å­˜è·¯å¾„ä¸ºç©ºåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                filepath <span class="token operator">=</span> videoDownLoadPath<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//filepathä¸æ˜¯æ–œæ ç»“æŸçš„åœ¨æœ«å°¾æ·»åŠ æ–œæ </span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>filepath<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">!=</span> filepath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                filepath <span class="token operator">+=</span> <span class="token string">"\\"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//å¦‚æœæ²¡æœ‰æ–‡ä»¶å¤¹ï¼Œåˆ™åˆ›å»º</span>
            File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                file<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ•°é‡ï¼Œæ–‡ä»¶æ•°é‡åŠ ä¸€ä½œä¸ºè¦ä¸‹è½½çš„æ–‡ä»¶å</span>
                <span class="token keyword">int</span> fileCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                File<span class="token punctuation">[</span><span class="token punctuation">]</span> list <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        fileCount<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                fileCount <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                filename <span class="token operator">=</span> filepath <span class="token operator">+</span> fileCount <span class="token operator">+</span> <span class="token string">".mp4"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//windowsé‡Œæ–‡ä»¶åä¸èƒ½æœ‰ç‰¹æ®Šç¬¦å·ï¼ŒfileNameé‡Œå»é™¤\/:*?"&lt;&gt;|</span>
                fileName <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\?"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\|"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\\\"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\*"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\&lt;"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\&gt;"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//fileNameä½œä¸ºè¦ä¸‹è½½çš„æ–‡ä»¶å</span>
                filename <span class="token operator">=</span> filepath <span class="token operator">+</span> fileName <span class="token operator">+</span> <span class="token string">".mp4"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</span>
            File file_name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file_name<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//åˆ›å»ºæ–‡ä»¶</span>
                file_name<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//è§†é¢‘æµå†™å…¥æ–‡ä»¶</span>
            FileOutputStream fileout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            BufferedInputStream buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> buf<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                fileout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileout<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileout<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"ä¸‹è½½æˆåŠŸï¼æ–‡ä»¶åï¼š"</span> <span class="token operator">+</span> filename <span class="token operator">+</span> <span class="token string">",url:"</span> <span class="token operator">+</span> url<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>ä¸‹è½½æµ‹è¯•ï¼š</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> utils<span class="token punctuation">.</span>Douyin<span class="token punctuation">;</span>
<span class="token keyword">import</span> utils<span class="token punctuation">.</span>HttpUtil<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        Douyin douyin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Douyin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> douyin<span class="token punctuation">.</span><span class="token function">getAllVideoUrlToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…±"</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸ªè§†é¢‘,å¼€å§‹ä¸‹è½½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> m <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹ä¸‹è½½ç¬¬"</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">"ä¸ªè§†é¢‘ï¼Œè§†é¢‘ä¿¡æ¯ï¼š"</span> <span class="token operator">+</span> m<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",url:"</span><span class="token operator">+</span>m<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String a<span class="token operator">=</span> HttpUtil<span class="token punctuation">.</span><span class="token function">downloadVideo</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¬¬"</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">"ä¸ªè§†é¢‘ä¸‹è½½å®Œæˆï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/48/dd/wPDk0PQm_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/2c/f3/xf7NshxM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/09/20/EaO5cCUQ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è‡³æ­¤ï¼Œå®Œç»“ï¼<br> <img src="https://images2.imgbox.com/72/06/uozRgSRO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å‚è€ƒï¼š<br> <a href="https://www.jianshu.com/p/54f12e6c1d7e" rel="nofollow">æŠ–éŸ³å¹³å°åˆ†æ</a><br> <a href="https://www.jianshu.com/p/3b7a9980c837" rel="nofollow">æŠ–éŸ³X-GorgonXgorgonç­‰å‚æ•°ç®—æ³•åœ¨çº¿ç”Ÿæˆç®—æ³•</a><br> <a href="https://blog.csdn.net/weixin_43582101/article/details/105996989">æŠ–éŸ³APPæ¥å£åˆ†æ</a><br> <a href="https://blog.csdn.net/q690080900/article/details/83748488">æŠ–éŸ³çˆ¬è™«è§£å†³æ–¹æ¡ˆ è·å–ç”¨æˆ·è§†é¢‘/ä¿¡æ¯ java+appium1.7.2+å¤œç¥æ¨¡æ‹Ÿå™¨+fiddler4</a><br> <a href="https://cloud.tencent.com/developer/article/1131879" rel="nofollow">æŠ–éŸ³APPçš„è§†é¢‘æ•°æ®é‡‡é›†æ–¹æ³•ï¼ˆç®€ä¹¦é¦–å‘ï¼‰</a><br> <a href="http://www.yxfzedu.com/rs_show/253" rel="nofollow">æŠ–éŸ³çŸ­è§†é¢‘x-gorgonç®—æ³•å…¥å£å®šä½æŸ¥æ‰¾è¿‡ç¨‹ç¬”è®°</a><br> <a href="https://www.jianshu.com/p/e5b021df2170" rel="nofollow">Android åç¼–è¯‘åˆ©å™¨ï¼Œjadx çš„é«˜çº§æŠ€å·§</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3dadea72ad8c32fd8afbcf0ae0b858d3/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æä¾›HTTPã€HTTPSéƒ½å¯è®¿é—®çš„API</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/33082f6b9f7747dbee647836771dfabf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ç½‘é¡µè¢«åŠ«æŒæ€ä¹ˆä¿®å¤ï¼Ÿä¸»é¡µè¢«åŠ«æŒä¿®å¤æ–¹æ³•</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>