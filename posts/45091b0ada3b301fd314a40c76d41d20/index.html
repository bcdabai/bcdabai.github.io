<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>手把手教你搭建鸿蒙hi3518开发和运行环境 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="手把手教你搭建鸿蒙hi3518开发和运行环境" />
<meta property="og:description" content="前言
学习C语言，C&#43;&#43;语言，数据结构和算法，操作系统，网络，驱动，设计模式等知识
用鸿蒙来强化就太对了。本文教你一步一步搭建鸿蒙的开发和运行环境，有点啰嗦，适合小白。
本文所涉及的所有工具都可以在这里找到(提取码ue2a)
具体有下列步骤：
组装开发板连接开发板安装串口驱动安装USB驱动安装烧录工具擦除引导程序烧录系统登录开发板修改OS启动地址运行可执行程序安装VMWARE安装编译服务器访问编译服务器编译鸿蒙产品编译鸿蒙组件打通开发板网络部署NFS新增自定义组件 组装开发板
我们选用HiSpark IPC DIY Camera产品。内部含hi3518ev300芯片。
请参考产品的安装说明书。
或者参考安装视频指导 连接开发板
开发板和PC的连接关系如下图。2条usb线(产品包装中的)，其中一个三针插头，一个四针插头。
安装串口驱动
请双击USB-to-Serial Comm Port.exe。进行串口驱动安装，安装完成后。在设备管理器中应该能看到下面这样的COM接口，你的COM接口编号可能有所不同。表明串口驱动安装成功。
安装USB驱动
注意：有2个USB驱动需要安装
双击zadig-2.5.exe安装通用USB驱动，点击中间的Install
安装第2个USB驱动，这个驱动的名称是: HiUSBBurnDriver. 对应的安装文件已经放在网盘中，请自行安装。
上述2个驱动都安装成功以后，才能正常的进行USB烧录（往开发板烧录鸿蒙系统）。
安装烧录工具
直接解压HiTool-HM-5.4.9-win32-x86_64.zip文件。然后双击其中的HiTool.exe. 界面如下图。然后先将芯片切换到3518ev300
擦除引导程序
然后就是擦除uboot了，记得使用串口来擦除
有几点需要注意
由于编译服务器还没有创建，所以我把自己编译好的文件放网上了，你可以下载文件路径根据你自己的实际路径，下载下来后存放的位置COM口根据你之前设备管理器看到的那个CH340口选择确保顶部选中的芯片是3518ev300传输方式选择串口按分区烧写器件类型spi nor开始地址0，长度1M点击擦除后10秒内拔插usb电源线接口(即接4个针脚的那个usb口，小的那个usb头)，让板子重启 很快就能看到擦除成功的提示
烧录系统
主要注意如下几点
使用usb口烧录(不是串口)现在需要烧录4个文件(通过右侧绿色&#43;可以添加文件)每个文件的名称，器件类型，地址，长度要填写正确最后点击烧写 然后等待烧写成功
如果你的烧写不成功，请检查之前的usb驱动是否已安装。
登录开发板
鸿蒙系统烧录好以后，就可以进去看一下鸿蒙系统的模样了。
双击MobaXterm_Personal_20.2.exe. 也可以用你自己喜欢的终端工具
然后点击Session, 在弹出的窗口中填好相关字段
点击OK以后，会进入下面这个界面
这里是uboot程序的界面，还没有进入鸿蒙OS,原因是uboot此时不知道鸿蒙OS的启动地址。
然后我们设置启动地址
设置OS启动地址
setenv bootcmd &#34;sf probe 0;sf read 0x40000000 0x100000 0x600000;go 0x40000000&#34;;
setenv bootargs &#34;console=ttyAMA0,115200n8 root=flash fstype=jffs2 rw rootaddr=7M rootsize=8M&#34;;
保存配置" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/45091b0ada3b301fd314a40c76d41d20/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-18T15:28:45+08:00" />
<meta property="article:modified_time" content="2022-05-18T15:28:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">手把手教你搭建鸿蒙hi3518开发和运行环境</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">前言</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">学习</span><span style="color:#333333;">C</span><span style="color:#333333;">语言，</span><span style="color:#333333;">C++</span><span style="color:#333333;">语言，数据结构和算法，操作系统，网络，驱动，设计模式等知识</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">用鸿蒙来强化就太对了。本文教你一步一步搭建鸿蒙的开发和运行环境，有点啰嗦，适合小白。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">本文所涉及的所有工具都可以在</span><span style="color:#333333;"><a href="https://pan.baidu.com/s/1m2dyNPEjZM6BwAxdfpSDvg" rel="nofollow" title="这里">这里</a></span><span style="color:#333333;">找到</span><span style="color:#333333;">(</span><span style="color:#333333;">提取码</span><span style="color:#333333;">ue2a)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">具体有下列步骤：</span></span></p> 
<ul><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">组装开发板</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">连接开发板</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">安装串口驱动</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">安装</span><span style="color:#333333;">USB</span><span style="color:#333333;">驱动</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">安装烧录工具</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">擦除引导程序</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">烧录系统</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">登录开发板</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">修改</span><span style="color:#333333;">OS</span><span style="color:#333333;">启动地址</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">运行可执行程序</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">安装</span><span style="color:#333333;">VMWARE</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">安装编译服务器</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">访问编译服务器</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编译鸿蒙产品</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编译鸿蒙组件</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">打通开发板网络</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">部署</span><span style="color:#333333;">NFS</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">新增自定义组件</span></span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">组装开发板</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">我们选用</span><span style="color:#333333;">HiSpark IPC DIY Camera</span><span style="color:#333333;">产品。内部含</span><span style="color:#333333;">hi3518ev300</span><span style="color:#333333;">芯片。</span><br><span style="color:#333333;">请参考产品的安装说明书。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">或者参考</span><span style="color:#333333;"><a href="https://www.bilibili.com/video/BV18r4y1F7Lx?from=search&amp;seid=16503504888266711974" rel="nofollow" title="安装视频指导">安装视频指导</a> </span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">连接开发板</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">开发板和</span><span style="color:#333333;">PC</span><span style="color:#333333;">的连接关系如下图。</span><span style="color:#333333;">2</span><span style="color:#333333;">条</span><span style="color:#333333;">usb</span><span style="color:#333333;">线</span><span style="color:#333333;">(</span><span style="color:#333333;">产品包装中的</span><span style="color:#333333;">)</span><span style="color:#333333;">，其中一个三针插头，一个四针插头。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/52/29/4qGCKAMm_o.jpg" width="1080"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/99/8d/5ROdzQpN_o.jpg" width="1080"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">安装串口驱动</span></strong><br><span style="color:#333333;">请双击</span><span style="color:#333333;">USB-to-Serial Comm Port.exe</span><span style="color:#333333;">。进行串口驱动安装，安装完成后。在设备管理器中应该能看到下面这样的</span><span style="color:#333333;">COM</span><span style="color:#333333;">接口，你的</span><span style="color:#333333;">COM</span><span style="color:#333333;">接口编号可能有所不同。表明串口驱动安装成功。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;"></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">安装</span></strong><strong><span style="color:#333333;">USB</span></strong><strong><span style="color:#333333;">驱动</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">注意</span></strong><span style="color:#333333;">：有</span><span style="color:#333333;">2</span><span style="color:#333333;">个</span><span style="color:#333333;">USB</span><span style="color:#333333;">驱动需要安装</span><br><span style="color:#333333;">双击</span><span style="color:#333333;">zadig-2.5.exe</span><span style="color:#333333;">安装通用</span><span style="color:#333333;">USB</span><span style="color:#333333;">驱动，点击中间的</span><span style="color:#333333;">Install</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="248" src="https://images2.imgbox.com/77/5c/0sAUKLbe_o.png" width="558"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">安装第</span></strong><strong><span style="color:#333333;">2</span></strong><strong><span style="color:#333333;">个</span></strong><strong><span style="color:#333333;">USB</span></strong><strong><span style="color:#333333;">驱动</span></strong><span style="color:#333333;">，这个驱动的名称是</span><span style="color:#333333;">: HiUSBBurnDriver. </span><span style="color:#333333;">对应的安装文件已经放在网盘中，请自行安装。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">上述</span><span style="color:#333333;">2</span><span style="color:#333333;">个驱动都安装成功以后，才能正常的进行</span><span style="color:#333333;">USB</span><span style="color:#333333;">烧录（往开发板烧录鸿蒙系统）。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">安装烧录工具</span></strong><br><span style="color:#333333;">直接解压</span><span style="color:#333333;">HiTool-HM-5.4.9-win32-x86_64.zip</span><span style="color:#333333;">文件。然后双击其中的</span><span style="color:#333333;">HiTool.exe. </span><span style="color:#333333;">界面如下图。然后先将芯片切换到</span><span style="color:#e03e2d;">3518ev300</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="768" src="https://images2.imgbox.com/cf/a1/Bw0zcC28_o.png" width="1024"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">擦除引导程序</span></strong><br><span style="color:#333333;">然后就是擦除</span><span style="color:#333333;">uboot</span><span style="color:#333333;">了，记得使用串口来擦除</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="768" src="https://images2.imgbox.com/e1/aa/doHHeqYC_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">有几点需要注意</span></span></p> 
<ol><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">由于编译服务器还没有创建，所以我把自己编译好的文件放网上了，你可以下载</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">文件路径根据你自己的实际路径，下载下来后存放的位置</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">COM</span><span style="color:#333333;">口根据你之前设备管理器看到的那个</span><span style="color:#333333;">CH340</span><span style="color:#333333;">口选择</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">确保顶部选中的芯片是</span><span style="color:#333333;">3518ev300</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">传输方式选择串口</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">按分区烧写</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">器件类型</span><span style="color:#333333;">spi nor</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">开始地址</span><span style="color:#333333;">0</span><span style="color:#333333;">，长度</span><span style="color:#333333;">1M</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">点击擦除后</span><span style="color:#e03e2d;">10</span><span style="color:#e03e2d;">秒内</span><span style="color:#333333;">拔插</span><span style="color:#333333;">usb</span><span style="color:#333333;">电源线接口</span><span style="color:#333333;">(</span><span style="color:#333333;">即接</span><span style="color:#333333;">4</span><span style="color:#333333;">个针脚的那个</span><span style="color:#333333;">usb</span><span style="color:#333333;">口，小的那个</span><span style="color:#333333;">usb</span><span style="color:#333333;">头</span><span style="color:#333333;">)</span><span style="color:#333333;">，让板子重启</span></span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">很快就能看到擦除成功的提示</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;"></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">烧录系统</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="818" src="https://images2.imgbox.com/cf/8f/HbrlAUqn_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">主要注意如下几点</span></span></p> 
<ol><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">使用</span><span style="color:#333333;">usb</span><span style="color:#333333;">口烧录</span><span style="color:#333333;">(</span><span style="color:#333333;">不是串口</span><span style="color:#333333;">)</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">现在需要烧录</span><span style="color:#333333;">4</span><span style="color:#333333;">个文件</span><span style="color:#333333;">(</span><span style="color:#333333;">通过右侧绿色</span><span style="color:#333333;">+</span><span style="color:#333333;">可以添加文件</span><span style="color:#333333;">)</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">每个文件的名称，器件类型，地址，长度要填写正确</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">最后点击烧写</span></span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后等待烧写成功</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;"></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">如果你的烧写不成功，请检查之前的</span><span style="color:#333333;">usb</span><span style="color:#333333;">驱动是否已安装。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">登录开发板</span></strong><br><span style="color:#333333;">鸿蒙系统烧录好以后，就可以进去看一下鸿蒙系统的模样了。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">双击</span><span style="color:#333333;">MobaXterm_Personal_20.2.exe.  </span><span style="color:#333333;">也可以用你自己喜欢的终端工具</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后点击</span><strong><span style="color:#333333;">Session</span></strong><span style="color:#333333;">, </span><span style="color:#333333;">在弹出的窗口中填好相关字段</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="899" src="https://images2.imgbox.com/d1/d2/ekCD1RBR_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">点击</span><span style="color:#333333;">OK</span><span style="color:#333333;">以后，会进入下面这个界面</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;"></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">这里是</span><span style="color:#333333;">uboot</span><span style="color:#333333;">程序的界面，还没有进入鸿蒙</span><span style="color:#333333;">OS,</span><span style="color:#333333;">原因是</span><span style="color:#333333;">uboot</span><span style="color:#333333;">此时不知道鸿蒙</span><span style="color:#333333;">OS</span><span style="color:#333333;">的启动地址。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后我们设置启动地址</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">设置</span></strong><strong><span style="color:#333333;">OS</span></strong><strong><span style="color:#333333;">启动地址</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">setenv bootcmd "sf probe 0;sf read 0x40000000 0x100000 0x600000;go 0x40000000";</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">setenv bootargs "console=ttyAMA0,115200n8 root=flash fstype=jffs2 rw rootaddr=7M rootsize=8M";</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">保存配置</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">saveenv</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后<strong>重启</strong></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="828" src="https://images2.imgbox.com/37/11/epgYjGJx_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">然后，很快就可以看到鸿蒙</span></strong><strong><span style="color:#333333;">OS</span></strong><strong><span style="color:#333333;">起来了</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="923" src="https://images2.imgbox.com/bc/5d/eGcW1TSa_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">如果你没有看到</span><span style="color:#333333;">OHOS#</span><span style="color:#333333;">字样，请按下几次</span><span style="color:#333333;">enter</span><span style="color:#333333;">键。接下来，我们手动运行一个鸿蒙的程序。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">运行可执行程序</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">进入</span><span style="color:#333333;">bin</span><span style="color:#333333;">目录，运行</span><span style="color:#333333;">writer</span><span style="color:#333333;">程序</span><span style="color:#333333;">(</span><span style="color:#333333;">这个程序是我新增的，如果你的开发板上没有，你可以运行</span><span style="color:#333333;">./camera_app</span><span style="color:#333333;">程序</span><span style="color:#333333;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="955" src="https://images2.imgbox.com/bf/21/rRikulmp_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">创建编译服务器</span></strong><br><span style="color:#333333;">为了省去搭建编译环境的繁琐，本次将一个已经搭建好的编译服务器制作成镜像。我们只需要使用这个镜像即可获得编译环境。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">镜像文件比较大</span><span style="color:#333333;">(</span><span style="color:#333333;">超过</span><span style="color:#333333;">8G)</span><span style="color:#333333;">，请直接找老师获取，也可以去前言提到的地方下载</span><span style="color:#333333;">(</span><span style="color:#333333;">建议晚上睡觉时下载</span><span style="color:#333333;">)</span><span style="color:#333333;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">本次使用的</span><span style="color:#333333;">Ubuntu</span><span style="color:#333333;">是不带桌面环境的。内部已经安装好</span><span style="color:#333333;">HarmonyOS</span><span style="color:#333333;">的编译环境，并且安装了</span><span style="color:#333333;">samba</span><span style="color:#333333;">文件共享工具。方便</span><span style="color:#333333;">windows</span><span style="color:#333333;">访问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">请先安装</span></strong><strong><span style="color:#333333;">VMWARE WorkStation</span></strong><strong><span style="color:#333333;">软件</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">然后打开它，</span></strong><strong> </strong><strong><span style="color:#333333;">选择</span></strong><strong> </strong><strong><span style="color:#333333;">文件</span></strong><strong><span style="color:#333333;">--&gt;</span></strong><strong><span style="color:#333333;">打开</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;"></span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/d7/48/uaOY24vO_o.png" width="960"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">然后开始了服务器创建过程，这个过程比较漫长，请保持耐心。</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">访问服务器</span><br><span style="color:#333333;">服务器创建完成后。然后我们对它进行上电启动</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="675" src="https://images2.imgbox.com/7d/f0/pnZ046Nd_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">等待服务器开机。</span><span style="color:#333333;">1</span><span style="color:#333333;">分钟内一般就能正常起来。这个过程中，注意保持网线插入，因为虚拟机和</span><span style="color:#333333;">PC</span><span style="color:#333333;">之间是通过有线网卡桥接的。启机过程有软件会探测网络是否在，否则会很慢。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">当屏幕输出变慢后，我们就可以访问它了，当然也可以在黑窗口里面直接键入各种命令，不过不方便。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="786" src="https://images2.imgbox.com/b9/42/Q829Gv9x_o.png" width="1126"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">把鼠标放入黑窗口，点击以后，鼠标焦点就进入黑窗口了，让焦点退出来的方法是按</span><span style="color:#e03e2d;">CTRL+g</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">如果想在黑窗口操作</span><span style="color:#333333;">linux</span><span style="color:#333333;">相关命令，则键入用户名</span><span style="color:#333333;">compile  </span><span style="color:#333333;">密码</span><span style="color:#333333;">compile</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">一般我们不在黑窗口操作。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">我们需要如下</span><span style="color:#333333;">2</span><span style="color:#333333;">种方法来访问虚拟机：</span></span></p> 
<ol><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">通过</span><span style="color:#333333;">ssh</span><span style="color:#333333;">访问，即可以远程登录虚拟机的</span><span style="color:#333333;">shell,</span><span style="color:#333333;">并执行命令</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">通过文件共享访问，可以在</span><span style="color:#333333;">windows</span><span style="color:#333333;">上查看和修改虚拟机中的文件</span></span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">注意：</span></span></p> 
<ol><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">当前创建的虚拟机采用的是桥接模式，它的</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址为</span><span style="color:#333333;">192.168.2.20</span><span style="color:#333333;">。你需要确保虚拟机中的</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址和自己</span><span style="color:#333333;">PC</span><span style="color:#333333;">的</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址在同一个网段。</span><span style="color:#333333;">(</span><span style="color:#333333;">最简单的方法是在自己的网卡上添加一个</span><span style="color:#333333;">192.168.2.X</span><span style="color:#333333;">网段的</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址</span><span style="color:#333333;">)</span><span style="color:#333333;">。</span><span style="color:#333333;">Windows</span><span style="color:#333333;">添加</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址的方法请自行查阅。</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">如果多台编译服务器在同一个局域网络，那么</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址会冲突，因为都是</span><span style="color:#333333;">192.168.2.20</span><span style="color:#333333;">。所以，需要对地址进行修改。</span></span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">SSH</span></strong><strong><span style="color:#333333;">访问</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="900" src="https://images2.imgbox.com/9d/ab/j9FxtDCG_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">点击</span><span style="color:#333333;">OK</span><span style="color:#333333;">以后，就登录到了编译服务器的</span><span style="color:#333333;">shell</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="237" src="https://images2.imgbox.com/0e/5d/U2aTV1Q3_o.png" width="558"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">文件共享访问</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">为了从</span><span style="color:#333333;">Windows</span><span style="color:#333333;">访问编译服务器上的源代码和编译出的目标文件，在编译服务器上已经安装好了</span><span style="color:#333333;">samba</span><span style="color:#333333;">文件共享服务，只需要在</span><span style="color:#333333;">windows</span><span style="color:#333333;">这边映射网络驱动器即可。按如下方法操作。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1080" src="https://images2.imgbox.com/c7/11/QpDhYlFL_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">右键点击</span> <span style="color:#333333;">计算机</span> <span style="color:#333333;">，选择映射网络驱动器。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="681" src="https://images2.imgbox.com/ef/30/qnmlUxFS_o.png" width="951"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后就可以在</span><span style="color:#333333;">windows</span><span style="color:#333333;">看到编译服务器上的内容了。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">现在开始，你就可以像操作</span><span style="color:#333333;">windows</span><span style="color:#333333;">的文件一样来操作编译服务器里面的文件了</span><span style="color:#333333;">(</span><span style="color:#333333;">比如通过</span><span style="color:#333333;">Visual Studio</span><span style="color:#333333;">来修改服务器上的</span><span style="color:#333333;">C/C++</span><span style="color:#333333;">代码文件</span><span style="color:#333333;">)</span><span style="color:#333333;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">编译产品</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">整个工程是存放在</span><span style="color:#333333;">~/harmonyos/openharmony</span><span style="color:#333333;">目录，</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">得先进入这个目录。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后执行</span><span style="color:#333333;">python</span><span style="color:#333333;">脚本来编译产品。如下红色框即编译整个产品。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="725" src="https://images2.imgbox.com/cb/bd/zvKBe8pD_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">特别提醒：</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">python build.py ipcamera_hi3518ev300 -b debug</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编译</span><span style="color:#333333;">debug</span><span style="color:#333333;">版本才会含有调试的</span><span style="color:#333333;">shell</span><span style="color:#333333;">，如果省略</span><span style="color:#333333;">-b debug</span><span style="color:#333333;">，无法通过</span><span style="color:#333333;">shell</span><span style="color:#333333;">命令行执行命令。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">大约需要</span><span style="color:#333333;">10</span><span style="color:#333333;">多分钟完成产品编译，编译成功后，结果如下。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="467" src="https://images2.imgbox.com/3c/c1/KjTiWkqx_o.png" width="986"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后在</span><span style="color:#333333;">windows</span><span style="color:#333333;">文件夹下可以看到编译出来的结果</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="929" src="https://images2.imgbox.com/28/ad/8tQjodVe_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">每次系统烧录时，将上述</span><span style="color:#333333;">3</span><span style="color:#333333;">个文件以及</span><span style="color:#333333;">uboot</span><span style="color:#333333;">文件</span><span style="color:#333333;">(Z:\vendor\hisi\hi35xx\hi3518ev300\uboot\out\boot\u-boot-hi3518ev300.bin)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">拷贝到</span><span style="color:#333333;">windows</span><span style="color:#333333;">某个目录下（比如我的例子中的</span><span style="color:#333333;">D:\BIN</span><span style="color:#333333;">），然后用</span><span style="color:#333333;">HiTool.exe</span><span style="color:#333333;">来烧录。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">更新源码</span></strong><br><span style="color:#333333;">鸿蒙系统目前更新比较频繁，如果需要获取最新版本，请执行下面的命令更新源码。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">这里有一个问题：编译服务器预设的</span><span style="color:#333333;">192.168.2.20</span><span style="color:#333333;">无法上网。这个时候你可以再添加</span><span style="color:#333333;">1</span><span style="color:#333333;">个</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址</span><span style="color:#333333;">(</span><span style="color:#333333;">添加可以上网的</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址</span><span style="color:#333333;">)</span><span style="color:#333333;">。然后再执行下面</span><span style="color:#333333;">2</span><span style="color:#333333;">条命令</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">cd ~/harmonyos/openharmony</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">repo sync -c</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">。。。待贴图。。。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">编译组件</span></strong><br><span style="color:#333333;">编译完整产品比较耗时，大多数时候我们修改的代码较少，只需要编译指定的组件就行了。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">由</span><span style="color:#333333;">-T</span><span style="color:#333333;">指定编译一个已经存在的组件，只编译一个小组件，速度飞快。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="718" src="https://images2.imgbox.com/a8/9a/9DbY8LiT_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">注意，编译组件的时候</span><span style="color:#333333;"> -T </span><span style="color:#333333;">后面的路径需要使用全路径。如何确定</span><span style="color:#333333;">-T</span><span style="color:#333333;">后面的参数？请看下图</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">文本编辑器</span><span style="color:#333333;">(</span><span style="color:#333333;">如</span><span style="color:#333333;">notepad++)</span><span style="color:#333333;">打开</span><span style="color:#333333;">build/lite/product/ ipcamera_hi3518ev300.json</span><span style="color:#333333;">文件</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="478" src="https://images2.imgbox.com/0e/ae/XGby5A1d_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">这个组件涉及的代码文件是哪些呢，继续看对应目录的</span><span style="color:#333333;">BUILD.gn</span><span style="color:#333333;">文件，对于此例子为</span><span style="color:#333333;">//applications/sample/camera/app</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="842" src="https://images2.imgbox.com/23/b1/uhKTwaU8_o.png" width="1070"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">生成的程序在下面这个目录</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="307" src="https://images2.imgbox.com/43/aa/N5Ctfecq_o.png" width="1018"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">打通网络</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">设备本身没有以太口，只有</span><span style="color:#333333;">wifi</span><span style="color:#333333;">接口。但默认情况下</span><span style="color:#333333;">wifi</span><span style="color:#333333;">是无法工作的。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">输入</span><span style="color:#333333;">ifconfig</span><span style="color:#333333;">你会看到</span><span style="color:#333333;">wlan0</span><span style="color:#333333;">接口</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址为</span><span style="color:#333333;">0</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">               </span></span><img alt="" height="196" src="https://images2.imgbox.com/53/d0/eqBgeX52_o.png" width="867"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">需要做如下工作才能让</span><span style="color:#333333;">wifi</span><span style="color:#333333;">正常运行起来。</span></span></p> 
<ul><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">配置</span><span style="color:#333333;">SSID</span><span style="color:#333333;">和密码</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">修改</span><span style="color:#333333;">wpa_sample.c</span><span style="color:#333333;">源码</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">配置自启动</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编译系统</span></span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">配置</span></strong><strong><span style="color:#333333;">SSID</span></strong><strong><span style="color:#333333;">和密码</span></strong><br><span style="color:#333333;">修改</span><span style="color:#333333;">applications\sample\camera\communication\wpa_supplicant\config\ wpa_supplicant.conf</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">修改后的内容如下。这个文件的目的是配置</span><span style="color:#333333;">wifi</span><span style="color:#333333;">用户名和密码</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">country=GB</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">ctrl_interface=udp</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">network={<!-- --></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">        ssid="teacher"</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">        psk="12345678qwe"</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">    }</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">注意</span></span></p> 
<ul><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">=</span><span style="color:#333333;">号</span><span style="color:#333333;">2</span><span style="color:#333333;">端不要留空格</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">ssid</span><span style="color:#333333;">和</span><span style="color:#333333;">psk</span><span style="color:#333333;">按你自己的实际进行配置，比如你手机热点的网络名和密码。</span></span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">修改源码</span></strong><br><span style="color:#333333;">修改</span><span style="color:#333333;">applications\sample\camera\communication\wpa_supplicant\src\wpa_sample.c</span><span style="color:#333333;">源代码</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">只修改</span><span style="color:#333333;">main</span><span style="color:#333333;">函数部分。这个程序的目的是读取</span><span style="color:#333333;">wifi</span><span style="color:#333333;">用户名和密码配置文件，并进行</span><span style="color:#333333;">wifi</span><span style="color:#333333;">连接。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#1990b8;">int</span> <span style="color:#128b4e;">main</span><span style="color:#5f6364;">(</span><span style="color:#1990b8;">int</span><span style="color:#000000;"> argc</span><span style="color:#5f6364;">,</span> <span style="color:#1990b8;">char</span> <span style="color:#a67f59;">*</span><span style="color:#000000;">argv</span><span style="color:#5f6364;">[])</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#5f6364;">{<!-- --></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">    g_wpaArgc </span><span style="color:#a67f59;">=</span><span style="color:#000000;"> argc</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#1990b8;">for</span> <span style="color:#5f6364;">(</span><span style="color:#1990b8;">int</span><span style="color:#000000;"> i </span><span style="color:#a67f59;">=</span> <span style="color:#c92c2c;">0</span><span style="color:#5f6364;">;</span><span style="color:#000000;"> i </span><span style="color:#a67f59;">&lt;</span><span style="color:#000000;"> g_wpaArgc</span><span style="color:#5f6364;">;</span><span style="color:#000000;"> i</span><span style="color:#a67f59;">++</span><span style="color:#5f6364;">)</span> <span style="color:#5f6364;">{<!-- --></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">        g_wpaArg</span><span style="color:#5f6364;">[</span><span style="color:#000000;">i</span><span style="color:#5f6364;">]</span> <span style="color:#a67f59;">=</span><span style="color:#000000;"> argv</span><span style="color:#5f6364;">[</span><span style="color:#000000;">i</span><span style="color:#5f6364;">];</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#5f6364;">}</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">    g_wpaArgc</span><span style="color:#a67f59;">=</span><span style="color:#c92c2c;">5</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">    g_wpaArg</span><span style="color:#5f6364;">[</span><span style="color:#c92c2c;">1</span><span style="color:#5f6364;">]</span> <span style="color:#a67f59;">=</span> <span style="color:#128b4e;">"-i"</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">    g_wpaArg</span><span style="color:#5f6364;">[</span><span style="color:#c92c2c;">2</span><span style="color:#5f6364;">]</span><span style="color:#a67f59;">=</span><span style="color:#128b4e;">"wlan0"</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">    g_wpaArg</span><span style="color:#5f6364;">[</span><span style="color:#c92c2c;">3</span><span style="color:#5f6364;">]</span><span style="color:#a67f59;">=</span><span style="color:#128b4e;">"-c"</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#000000;">    g_wpaArg</span><span style="color:#5f6364;">[</span><span style="color:#c92c2c;">4</span><span style="color:#5f6364;">]</span><span style="color:#a67f59;">=</span><span style="color:#128b4e;">"/etc/wpa_supplicant.conf"</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#1990b8;">int</span><span style="color:#000000;"> ret </span><span style="color:#a67f59;">=</span> <span style="color:#128b4e;">pthread_create</span><span style="color:#5f6364;">(</span><span style="color:#a67f59;">&amp;</span><span style="color:#000000;">g_wpaThread</span><span style="color:#5f6364;">,</span> <span style="color:#c92c2c;">NULL</span><span style="color:#5f6364;">,</span><span style="color:#000000;"> ThreadMain</span><span style="color:#5f6364;">,</span> <span style="color:#c92c2c;">NULL</span><span style="color:#5f6364;">);</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#1990b8;">if</span> <span style="color:#5f6364;">(</span><span style="color:#000000;">ret </span><span style="color:#a67f59;">!=</span> <span style="color:#c92c2c;">0</span><span style="color:#5f6364;">)</span> <span style="color:#5f6364;">{<!-- --></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">        <span style="color:#128b4e;">printf</span><span style="color:#5f6364;">(</span><span style="color:#128b4e;">"[WpaSample]create thread failed error:%s.\n"</span><span style="color:#5f6364;">,</span> <span style="color:#128b4e;">strerror</span><span style="color:#5f6364;">(</span><span style="color:#000000;">ret</span><span style="color:#5f6364;">));</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">        <span style="color:#1990b8;">return</span> <span style="color:#c92c2c;">1</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#5f6364;">}</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#128b4e;">pthread_join</span><span style="color:#5f6364;">(</span><span style="color:#000000;">g_wpaThread</span><span style="color:#5f6364;">,</span> <span style="color:#c92c2c;">NULL</span><span style="color:#5f6364;">);</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;">    <span style="color:#1990b8;">return</span> <span style="color:#c92c2c;">0</span><span style="color:#5f6364;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#fdfdfd;"><span style="color:#5f6364;">}</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#bbbbbb;">复制</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">配置自启动</span></strong><br><span style="color:#333333;">刚才修改的</span><span style="color:#333333;">main</span><span style="color:#333333;">会生成一个可执行程序，这个程序我们需要把它配置在启动脚本中，这样每次板子重启都会运行这个程序</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">修改文件</span><span style="color:#333333;">vendor\huawei\camera\init_configs\ init_liteos_a_3518ev300.cfg  </span><span style="color:#333333;">。</span> <span style="color:#e03e2d;">红色部分</span><span style="color:#333333;">为新增</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">{<!-- --><br>     "jobs" : [{<!-- --><br>             "name" : "pre-init",<br>             "cmds" : [<br>                 "mkdir /storage/data/log",<br>                 "chmod 0755 /storage/data/log",<br>                 "chown 4 4 /storage/data/log",<br>                 "mkdir /storage/data/softbus",<br>                 "chmod 0700 /storage/data/softbus",<br>                 "chown 7 7 /storage/data/softbus",<br>                 "mkdir /sdcard",<br>                 "chmod 0777 /sdcard",<br>                 "mount vfat /dev/mmcblk0 /sdcard rw,umask=000",<br>                 "mount vfat /dev/mmcblk1 /sdcard rw,umask=000"<br>             ]<br>         }, {<!-- --><br>             "name" : "init",<br>             "cmds" : [<br>                 "start shell",<br>                 "start apphilogcat",<br>                 "start foundation",<br>                 "start bundle_daemon",<br>                 "start media_server",<br>                 "start appspawn",<br>   </span><span style="color:#e03e2d;">"start wpa_supplicant"</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">            ]<br>         }, {<!-- --><br>             "name" : "post-init",<br>             "cmds" : [<br>                 "chown 0 99 /dev/dev_mgr",<br>                 "chown 0 99 /dev/hdfwifi",<br>                 "chown 0 99 /dev/gpio",<br>                 "chown 0 99 /dev/i2c-0",<br>                 "chown 0 99 /dev/i2c-1",<br>                 "chown 0 99 /dev/i2c-2",<br>                 "chown 0 99 /dev/uartdev-0",<br>                 "chown 0 99 /dev/uartdev-1",<br>                 "chown 0 99 /dev/uartdev-2",<br>                 "chown 0 99 /dev/spidev0.0",<br>                 "chown 0 99 /dev/spidev1.0",<br>                 "chown 0 99 /dev/spidev1.1"<br>             ]<br>         }<br>     ],<br>     "services" : [{<!-- --><br>             "name" : "foundation",<br>             "path" : "/bin/foundation",<br>             "uid" : 7,<br>             "gid" : 7,<br>             "once" : 0,<br>             "importance" : 1,<br>             "caps" : [10, 11, 12, 13]<br>         }, {<!-- --><br>             "name" : "shell",<br>             "path" : "/bin/shell",<br>             "uid" : 2,<br>             "gid" : 2,<br>             "once" : 0,<br>             "importance" : 0,<br>             "caps" : [4294967295]<br>         }, {<!-- --><br>             "name" : "appspawn",<br>             "path" : "/bin/appspawn",<br>             "uid" : 1,<br>             "gid" : 1,<br>             "once" : 0,<br>             "importance" : 0,<br>             "caps" : [2, 6, 7, 8, 23]<br>         }, {<!-- --><br>             "name" : "apphilogcat",<br>             "path" : "/bin/apphilogcat",<br>             "uid" : 4,<br>             "gid" : 4,<br>             "once" : 1,<br>             "importance" : 0,<br>             "caps" : []<br>         }, {<!-- --><br>             "name" : "media_server",<br>             "path" : "/bin/media_server",<br>             "uid" : 5,<br>             "gid" : 5,<br>             "once" : 1,<br>             "importance" : 0,<br>             "caps" : []<br>         }, {<!-- --><br>             "name" : "wms_server",<br>             "path" : "/bin/wms_server",<br>             "uid" : 6,<br>             "gid" : 6,<br>             "once" : 1,<br>             "importance" : 0,<br>             "caps" : []<br>         }, {<!-- --><br>             "name" : "bundle_daemon",<br>             "path" : "/bin/bundle_daemon",<br>             "uid" : 8,<br>             "gid" : 8,<br>             "once" : 0,<br>             "importance" : 0,<br>             "caps" : [0, 1]<br>         }</span><span style="color:#e03e2d;">,{<!-- --></span><br><span style="color:#e03e2d;">     "name": "wpa_supplicant",</span><br><span style="color:#e03e2d;">     "path": "/bin/wpa_supplicant",</span><br><span style="color:#e03e2d;">     "uid" : 0,</span><br><span style="color:#e03e2d;">     "gid" :  0,</span><br><span style="color:#e03e2d;">     "once" : 1, </span><br><span style="color:#e03e2d;">     "importance" : 0,</span><br><span style="color:#e03e2d;">     "caps": [] </span><br><span style="color:#e03e2d;"> }</span><br><span style="color:#333333;">    ]<br> }</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">让</span></strong><strong><span style="color:#333333;">wifi</span></strong><strong><span style="color:#333333;">功能参与编译</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编译</span><span style="color:#333333;">wifi</span><span style="color:#333333;">模块的时候，要修改</span><span style="color:#333333;">build/lite/product/ ipcamera_hi3518ev300.json</span><span style="color:#333333;">文件，才能让</span><span style="color:#333333;">wpa_supplicant</span><span style="color:#333333;">这个模块参与编译，修改如下：</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="608" src="https://images2.imgbox.com/56/8e/CfH3mL2Q_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">编译系统</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">此时我们配置好了</span><span style="color:#333333;">wifi</span><span style="color:#333333;">用户名和密码，也修改了</span><span style="color:#333333;">wifi</span><span style="color:#333333;">启动程序并设置好了启动脚本。接下来我们把这些修改编译到系统中，然后再烧录到板子上</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">当完整编译系统，烧录好以后，新版本的系统起来以后，我们可以看到</span><span style="color:#333333;">wlan0 </span><span style="color:#333333;">的接口的</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址正常获取到了。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="205" src="https://images2.imgbox.com/55/59/5hOfki9G_o.png" width="993"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">部署</span></strong><strong><span style="color:#333333;">NFS</span></strong><br><span style="color:#333333;">当网络打通以后，我们就可以部署</span><span style="color:#333333;">NFS</span><span style="color:#333333;">（网络文件系统）了。部署</span><span style="color:#333333;">NFS</span><span style="color:#333333;">最大的好处是，可以将</span><span style="color:#333333;">windows</span><span style="color:#333333;">的某个文件夹当成开发板上的文件夹来使用，这样，不需要把编译的程序手动拷贝到开发板去，就可以执行编译出来的程序。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">主要分为如下</span><span style="color:#333333;">3</span><span style="color:#333333;">个过程</span></span></p> 
<ol><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">安装</span><span style="color:#333333;">NFS Server</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">配置和启动</span><span style="color:#333333;">Server</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">挂载</span><span style="color:#333333;">NFS</span></span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">安装</span></strong><strong><span style="color:#333333;">NFS</span></strong><br><span style="color:#333333;">在</span><span style="color:#333333;">PC</span><span style="color:#333333;">上安装</span><span style="color:#333333;">NFS</span><span style="color:#333333;">服务器。双击</span><span style="color:#333333;">nfs1169.exe</span><span style="color:#333333;">进行安装，同常规软件安装方法。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">配置</span></strong><strong><span style="color:#333333;">NFS</span></strong><br><span style="color:#333333;">安装好以后，就是配置了，这一步稍微麻烦。首先需要以管理员身份运行</span><span style="color:#333333;">NFS</span><span style="color:#333333;">服务器</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">开始</span><span style="color:#333333;">--&gt;</span><span style="color:#333333;">所有程序</span><span style="color:#333333;">--&gt;haneWIN</span><span style="color:#333333;">软件</span><span style="color:#333333;">--&gt;NFS--&gt;NFS</span><span style="color:#333333;">服务器</span><span style="color:#333333;">(</span><span style="color:#333333;">右键点击</span><span style="color:#333333;">)--</span><span style="color:#333333;">选择</span><span style="color:#333333;">(</span><span style="color:#333333;">以管理员身份运行</span><span style="color:#333333;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="535" src="https://images2.imgbox.com/5f/44/vEmYpoIS_o.png" width="628"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编辑输出表文件。如下。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="624" src="https://images2.imgbox.com/ca/87/MayBt040_o.png" width="773"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后保存</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后我们配置防火墙，使得</span><span style="color:#333333;">NFS</span><span style="color:#333333;">相关的网络通信畅通。先看需要放行哪些端口。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="537" src="https://images2.imgbox.com/0d/c7/pK9UzSqJ_o.png" width="629"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">需要放行的端口有</span><span style="color:#333333;">: 111, 1058, 2049. TCP</span><span style="color:#333333;">和</span><span style="color:#333333;">UDP</span><span style="color:#333333;">都需要。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后我们配置放行这些端口</span><span style="color:#333333;">(</span><span style="color:#333333;">即允许这些端口的流量通过</span><span style="color:#333333;">)</span><span style="color:#333333;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">控制面板</span><span style="color:#333333;">\</span><span style="color:#333333;">系统和安全</span><span style="color:#333333;">\Windows </span><span style="color:#333333;">防火墙</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="526" src="https://images2.imgbox.com/34/e9/vFD2kxWQ_o.png" width="774"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="771" src="https://images2.imgbox.com/ab/40/TBwC8jFw_o.png" width="1054"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="567" src="https://images2.imgbox.com/e1/6a/I3LRofUg_o.png" width="654"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="383" src="https://images2.imgbox.com/f0/c2/7OhIpEos_o.png" width="1012"><img alt="" height="776" src="https://images2.imgbox.com/06/e9/FuRhM6cp_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">确保规则已配置好。然后重启防火墙</span><span style="color:#333333;">(</span><span style="color:#333333;">关闭防火墙，再打开防火墙</span><span style="color:#333333;">)</span><span style="color:#333333;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="533" src="https://images2.imgbox.com/18/f9/VPlfcsc3_o.png" width="789"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">重启</span></strong><strong><span style="color:#333333;">NFS</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">开始</span><span style="color:#333333;">---</span><span style="color:#333333;">所有程序</span><span style="color:#333333;">---haneWIN</span><span style="color:#333333;">软件</span><span style="color:#333333;">---NFS---</span><span style="color:#333333;">重启所有服务</span><span style="color:#333333;">(</span><span style="color:#e03e2d;">以管理员身份运行</span><span style="color:#333333;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">挂载</span></strong><strong><span style="color:#333333;">NFS</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">在开发板</span><span style="color:#333333;">shell</span><span style="color:#333333;">界面，挂载</span><span style="color:#333333;">NFS</span><span style="color:#333333;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">先确保开发板和</span><span style="color:#333333;">PC</span><span style="color:#333333;">之间能互通</span><span style="color:#333333;">(</span><span style="color:#333333;">可以从</span><span style="color:#333333;">PC ping</span><span style="color:#333333;">开发板</span><span style="color:#333333;">)</span><span style="color:#333333;">。我的开发板和</span><span style="color:#333333;">PC</span><span style="color:#333333;">都通过</span><span style="color:#333333;">wifi</span><span style="color:#333333;">连接手机热点，所以在一个网段，能互相</span><span style="color:#333333;">ping</span><span style="color:#333333;">通。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后开发板上面执行下面的命令。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="225" src="https://images2.imgbox.com/cf/e3/njC1lav9_o.png" width="1067"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">除了</span><span style="color:#333333;">IP</span><span style="color:#333333;">地址调整成你</span><span style="color:#333333;">PC</span><span style="color:#333333;">的地址，其它信息照抄。挂载成功会显示</span><span style="color:#333333;">finished</span><span style="color:#333333;">如红框所示。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后我们就可以执行</span><span style="color:#333333;">windows</span><span style="color:#333333;">上的程序了。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="771" src="https://images2.imgbox.com/67/a8/4Ubhg2U9_o.png" width="1083"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">在我的机器上，上述文件存放在</span><span style="color:#333333;">d:\BIN</span><span style="color:#333333;">目录。因为这个目录我配置成了</span><span style="color:#333333;">NFS Server</span><span style="color:#333333;">的根目录</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">所以，能从开发板上看到并运行它们。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">上述这些内容，是通过从编译服务器拷贝出来的。如何拷贝，请参阅访问虚拟机章节。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#333333;">添加组件</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">如果我们要新增程序怎么处理。请仿照范例中的</span><span style="color:#333333;">camer_app</span><span style="color:#333333;">处理。具体如下，比如我新增了一个</span><span style="color:#333333;">reader</span><span style="color:#333333;">程序，一个</span><span style="color:#333333;">writer</span><span style="color:#333333;">程序。以下描述</span><span style="color:#333333;">reader</span><span style="color:#333333;">的添加逻辑。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"> </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">在</span><span style="color:#333333;">applications\sample\camera</span><span style="color:#333333;">目录下，将</span><span style="color:#333333;">app</span><span style="color:#333333;">目录复制一份，改名为</span><span style="color:#333333;">reader</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="293" src="https://images2.imgbox.com/61/7d/3roLWSv2_o.png" width="558"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后修改</span><span style="color:#333333;">reader</span><span style="color:#333333;">里面的文件。先修改</span><span style="color:#333333;">BUILD.gn</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="352" src="https://images2.imgbox.com/44/83/n4w7N0Dk_o.png" width="558"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">然后源码根据自己的实际情况修改。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">最后修改编译脚本</span><span style="color:#333333;">build\lite\product\ ipcamera_hi3518ev300.json</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">添加红框中的一行，然后按组件编译方式编译就可以了。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="788" src="https://images2.imgbox.com/38/2e/6LmVNOQV_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#333333;">编译好的程序在</span><span style="color:#333333;">out\ipcamera_hi3518ev300\bin</span><span style="color:#333333;">目录下</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bc3f7629f89de04ce20d5ac2d30ccbb4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">配置SSH服务远程连接空闲超时退出时间（包括SSH无法登录、登录缓慢）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1cbb1287230272650ee4a017f794f15f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">布隆过滤器详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>