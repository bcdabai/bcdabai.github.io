<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3 使用vue-i18njie解决切换语言不更新问题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3 使用vue-i18njie解决切换语言不更新问题" />
<meta property="og:description" content="场景：我这里做的不是点击按钮切换语言，是从地址栏里取不同的语言时需要更新数据 问题：地址栏语言的传参变换后，页面的展示的数据还是翻译的上一个语言的数据，需要再次刷新才正确 解决：proxy.$i18n.locale = 当前语言; 具体使用如下：
使用版本：
package.json文件
&#34;vue&#34;: &#34;^3.2.45&#34;, &#34;vue-i18n&#34;: &#34;^9.2.2&#34;, 1、安装： npm install vue-i18n@next 这样装的最新版的才能在vue3.0使用
2、使用：
main.js文件
import { createApp } from &#34;vue&#34;; import App from &#34;./App.vue&#34;; ... import i18n from &#34;./i18n&#34;; const app = createApp(App); app.use(i18n); ... app.mount(&#34;#app&#34;); 建文件
i18n/index.js文件
import { createI18n } from &#34;vue-i18n&#34;; import ZH from &#34;./zh.js&#34;; import EN from &#34;./en.js&#34;; import ES from &#34;./es.js&#34;; import PT from &#34;./pt.js&#34;; const messages = { zh: { ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/83a27322c751996f2150d04873bd2dc7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-02T11:47:12+08:00" />
<meta property="article:modified_time" content="2023-03-02T11:47:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3 使用vue-i18njie解决切换语言不更新问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <blockquote class="kdocs-blockquote" style=""> 
  <span class="kdocs-fontSize" style="font-size:13pt;">场景：我这里做的不是点击按钮切换语言，是从地址栏里取不同的语言时需要更新数据</span> 
 </blockquote> 
 <blockquote class="kdocs-blockquote" style=""> 
  <span class="kdocs-fontSize" style="font-size:13pt;">问题：地址栏语言的传参变换后，页面的展示的数据还是翻译的上一个语言的数据，需要再次刷新才正确</span> 
 </blockquote> 
 <blockquote class="kdocs-blockquote" style=""> 
  <span class="kdocs-fontSize" style="font-size:13pt;">解决：proxy.$i18n.locale = 当前语言;</span> 
 </blockquote> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">具体使用如下：</span></p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">使用版本：</span></p> 
 <p style="">package.json文件</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">"vue": "^3.2.45",
"vue-i18n": "^9.2.2",</code></pre> 
 <p style="">1、<span class="kdocs-bold" style="font-weight:bold;">安装</span>： npm install vue-i18n@next 这样装的最新版的才能在vue3.0使用</p> 
 <p style="">2、<span class="kdocs-bold" style="font-weight:bold;">使用：</span></p> 
 <p style="">main.js文件</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">import { createApp } from "vue";
import App from "./App.vue";
...
import i18n from "./i18n";

const app = createApp(App);
app.use(i18n);
...

app.mount("#app");
</code></pre> 
 <p style="">建文件</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:295px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:53.898304%;height:0;"> 
    <img src="https://images2.imgbox.com/68/33/a4vTPPJC_o.png" style="margin-left:;display:block;width:295px;margin-top:-53.898304%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">i18n/index.js文件</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">import { createI18n } from "vue-i18n";
import ZH from "./zh.js";
import EN from "./en.js";
import ES from "./es.js";
import PT from "./pt.js";
const messages = {
  zh: { ...ZH },
  en: { ...EN },
  es: { ...ES },
  pt: { ...PT },
};

const i18n = createI18n({
  legacy: false,
  globalInjection: true,
  locale: localStorage.getItem("language") || "en",
  messages,
});
export default i18n;</code></pre> 
 <p style="">App.vue文件</p> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;script setup&gt;
import { onMounted, getCurrentInstance } from "vue";
import { transformParams } from "@/utils/tool.js";
let { proxy } = getCurrentInstance()
onMounted(() =&gt; {
  const { language } = transformParams();
  localStorage.setItem("language", language ?? "en");
  // 关键之处在这里
  proxy.$i18n.locale = language; // 切换当前语言环境
});
&lt;/script&gt;

&lt;template&gt;
  &lt;RouterView /&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
...
&lt;/style&gt;</code></pre> 
 <blockquote class="kdocs-blockquote" style=""> 
  <span class="kdocs-fontSize" style="font-size:13pt;">结果：页面渲染的数据就是当前地址栏取到的语言所对应的翻译数据</span> 
 </blockquote> 
 <p style=""></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a363b5e3a4f34d761da2963d1874a683/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VS2022找不到 .NETFramework,Version=v4.0 的引用程序集</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2d7247d64820e1f236658b2412330d07/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS7不关闭Selinux修改ssh端口号</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>