<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GBase8s 查看数据库表空间信息 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GBase8s 查看数据库表空间信息" />
<meta property="og:description" content="##onstat -d 查看数据库表空间信息
onstat -d命令用于检查数据库空间的使用情况
[gbasedbt@node13 ~]$ onstat -d Your evaluation license will expire on 2021-08-27 00:00:00 GBase Database Server Version 12.10.FC4G1TL -- On-Line (Prim) -- Up 00:16:02 -- 2023104 Kbytes Dbspaces address number flags fchunk nchunks pgsize flags owner name 55143028 1 0x60001 1 1 2048 N BA gbasedbt rootdbs 576e8028 2 0x40001 2 1 2048 N BA gbasedbt plogdbs 576e8258 3 0x60001 3 1 2048 N BA gbasedbt llogdbs 576e8488 4 0x42001 4 1 8192 N TBA gbasedbt tmpdbs1 576e86b8 5 0x40001 5 1 16384 N BA gbasedbt datadbs1 576e88e8 6 0x48001 6 1 2048 N SBA gbasedbt sbspace1 576e8b18 7 0x40001 7 1 16384 N BA gbasedbt datadbs2 7 active, 2047 maximum Chunks address chunk/dbs offset size free bpages flags pathname 55143258 1 1 0 102400 75469 PO-B-D /home/gbasedbt/gbs_server/data/storage_hdr5/rootdbs 5770b028 2 2 0 500000 4947 PO-B-D /home/gbasedbt/gbs_server/data/storage_hdr5/plogdbs 5770c028 3 3 0 5500000 4899947 PO-BED /home/gbasedbt/gbs_server/data/storage_hdr5/llogdbs 5770d028 4 4 0 125000 124947 PO-B-- /home/gbasedbt/gbs_server/data/storage_hdr5/tmpdbs1 5770e028 5 5 0 125000 64642 PO-BED /home/gbasedbt/gbs_server/data/storage_hdr5/datadbs1 57b02028 6 6 0 500000 466272 466272 POSB-D /home/gbasedbt/gbs_server/data/storage_hdr5/sbspace1 Metadata 33675 25057 33675 57b03028 7 7 0 625000 389399 PO-B-D /home/gbasedbt/gbs_server/data/storage_hdr5/datadbs2 7 active, 32766 maximum NOTE: The values in the &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4e84b4cbf2360209f11f26d9f3b977ef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-08T10:15:17+08:00" />
<meta property="article:modified_time" content="2020-12-08T10:15:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GBase8s 查看数据库表空间信息</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>##onstat -d 查看数据库表空间信息<br> onstat -d命令用于检查数据库空间的使用情况</p> 
<pre><code class="prism language-language">[gbasedbt@node13 ~]$ onstat -d
Your evaluation license will expire on 2021-08-27 00:00:00

GBase Database Server Version 12.10.FC4G1TL -- On-Line (Prim) -- Up 00:16:02 -- 2023104 Kbytes

Dbspaces
address          number   flags      fchunk   nchunks  pgsize   flags    owner    name
55143028         1        0x60001    1        1        2048     N  BA    gbasedbt rootdbs
576e8028         2        0x40001    2        1        2048     N  BA    gbasedbt plogdbs
576e8258         3        0x60001    3        1        2048     N  BA    gbasedbt llogdbs
576e8488         4        0x42001    4        1        8192     N TBA    gbasedbt tmpdbs1
576e86b8         5        0x40001    5        1        16384    N  BA    gbasedbt datadbs1
576e88e8         6        0x48001    6        1        2048     N SBA    gbasedbt sbspace1
576e8b18         7        0x40001    7        1        16384    N  BA    gbasedbt datadbs2
 7 active, 2047 maximum

Chunks
address          chunk/dbs     offset     size       free       bpages     flags pathname
55143258         1      1      0          102400     75469                 PO-B-D /home/gbasedbt/gbs_server/data/storage_hdr5/rootdbs
5770b028         2      2      0          500000     4947                  PO-B-D /home/gbasedbt/gbs_server/data/storage_hdr5/plogdbs
5770c028         3      3      0          5500000    4899947               PO-BED /home/gbasedbt/gbs_server/data/storage_hdr5/llogdbs
5770d028         4      4      0          125000     124947                PO-B-- /home/gbasedbt/gbs_server/data/storage_hdr5/tmpdbs1
5770e028         5      5      0          125000     64642                 PO-BED /home/gbasedbt/gbs_server/data/storage_hdr5/datadbs1
57b02028         6      6      0          500000     466272     466272     POSB-D /home/gbasedbt/gbs_server/data/storage_hdr5/sbspace1
                                 Metadata 33675      25057      33675   
57b03028         7      7      0          625000     389399                PO-B-D /home/gbasedbt/gbs_server/data/storage_hdr5/datadbs2
 7 active, 32766 maximum

NOTE: The values in the "size" and "free" columns for DBspace chunks are
      displayed in terms of "pgsize" of the DBspace to which they belong.


Expanded chunk capacity mode: always
</code></pre> 
<p>其中上半部分展示的是Dbspaces 数据库表空间信息。</p> 
<pre><code class="prism language-language">number		为表空间唯一标示号
pagesize	数据库空间的页大小
flag 列信息：
	
	Position 1:	M	镜像
			N	未镜像

	Position 2:	X	新镜像
			D	Down，不可用chunk
			P	物理恢复完成，等待逻辑恢复
			L	正在逻辑恢复
			R	正在恢复
		
	Position 3:	B	BLOB空间
			P	物理日志空间
			S	智能大对象空间
			T	临时空间
			U	临时智能大对象空间
			W	SDS主节点的临时空间，只在SDS备节点显示

	Position 4:	B	空间可包含大于2G的chunk

	Position 5:	A	空间自动扩展

</code></pre> 
<p>下半部分展示的上Chuncks信息，通过chunk/dbs列展示的chunk号/表空间号来对应chunk所属表空间，及chunk文件的物理位置</p> 
<pre><code class="prism language-language">flags	

Position 1:	P	主chunk
		M	镜像chunk

Position 2:	O	可用
		D	不可用
		I	不一致状态，高可用环境下备机显示该状态
		R	正在恢复
		X	新镜像chunk
		N	重命名chunk

Position 3:	-	标准数据空间
		B	BLOB空间
		S	智能大对象空间

Position 4:	B	大于2G的chunk

Position 5:	E	可扩展chunk
		-	不可扩展chunk

Position 6:	-	文件chunk未开启直接I/O或同步I/O
		C	AIX上的文件chunk开启同步I/O
		D	文件chunk开启直接I/O


</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/162470823c539f101e2886cfb4cc3e43/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">稠密集和疏朗集_拓扑动力系统(2): 极小集, Birkhoff定理, ω极限点</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/96b7644bf4d74b341437bd468ef018d2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">http常见响应码及含义</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>