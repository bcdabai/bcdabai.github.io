<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PyCharm中运行django程序 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PyCharm中运行django程序" />
<meta property="og:description" content="使用PyCharm开发django程序，发现如果不在命令行而在IDE的django项目中直接运行django程序，发现报错，程序如下：
def main(): from people.models import Blog blog = Blog() blog.name = &#39;blog1&#39; blog.tagline = &#39;tagline1&#39; blog.save() if __name__ == &#39;__main__&#39;: main() print(&#39;Done......&#39;) 抛出的异常如下：
C:\python\python.exe C:/Users/Administrator/PycharmProjects/mydjango/mytest.py Traceback (most recent call last): File &#34;C:/Users/Administrator/PycharmProjects/mydjango/mytest.py&#34;, line 10, in &lt;module&gt; main() File &#34;C:/Users/Administrator/PycharmProjects/mydjango/mytest.py&#34;, line 3, in main from people.models import Blog File &#34;C:\Users\Administrator\PycharmProjects\mydjango\people\models.py&#34;, line 4, in &lt;module&gt; class Person(models.Model): File &#34;C:\Users\Administrator\PycharmProjects\mydjango\people\models.py&#34;, line 5, in Person name = models.CharField(max_length=30) File &#34;C:\python\lib\site-packages\django-1.10-py3.5.egg\django\db\models\fields\__init__.py&#34;, line 1043, in __init__ super(CharField, self)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/84c63a0be08d2ba843cf3ee22c259ca2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-07T19:08:51+08:00" />
<meta property="article:modified_time" content="2016-08-07T19:08:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PyCharm中运行django程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>使用PyCharm开发django程序，发现如果不在命令行而在IDE的django项目中直接运行django程序，发现报错，程序如下：</p> 
<pre class="prettyprint"><code class=" hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">from</span> people.models <span class="hljs-keyword">import</span> Blog
    blog = Blog()
    blog.name = <span class="hljs-string">'blog1'</span>
    blog.tagline = <span class="hljs-string">'tagline1'</span>
    blog.save()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
    print(<span class="hljs-string">'Done......'</span>)
</code></pre> 
<p>抛出的异常如下：</p> 
<pre class="prettyprint"><code class=" hljs tex">C:<span class="hljs-command">\python</span><span class="hljs-command">\python</span>.exe C:/Users/Administrator/PycharmProjects/mydjango/mytest.py
Traceback (most recent call last):
  File "C:/Users/Administrator/PycharmProjects/mydjango/mytest.py", line 10, in &lt;module&gt;
    main()
  File "C:/Users/Administrator/PycharmProjects/mydjango/mytest.py", line 3, in main
    from people.models import Blog
  File "C:<span class="hljs-command">\Users</span><span class="hljs-command">\Administrator</span><span class="hljs-command">\PycharmProjects</span><span class="hljs-command">\mydjango</span><span class="hljs-command">\people</span><span class="hljs-command">\models</span>.py", line 4, in &lt;module&gt;
    class Person(models.Model):
  File "C:<span class="hljs-command">\Users</span><span class="hljs-command">\Administrator</span><span class="hljs-command">\PycharmProjects</span><span class="hljs-command">\mydjango</span><span class="hljs-command">\people</span><span class="hljs-command">\models</span>.py", line 5, in Person
    name = models.CharField(max_length=30)
  File "C:<span class="hljs-command">\python</span><span class="hljs-command">\lib</span><span class="hljs-command">\site</span>-packages<span class="hljs-command">\django</span>-1.10-py3.5.egg<span class="hljs-command">\django</span><span class="hljs-command">\db</span><span class="hljs-command">\models</span><span class="hljs-command">\fields</span><span class="hljs-command">\_</span>_init__.py", line 1043, in __init__
    super(CharField, self).__init__(*args, **kwargs)
  File "C:<span class="hljs-command">\python</span><span class="hljs-command">\lib</span><span class="hljs-command">\site</span>-packages<span class="hljs-command">\django</span>-1.10-py3.5.egg<span class="hljs-command">\django</span><span class="hljs-command">\db</span><span class="hljs-command">\models</span><span class="hljs-command">\fields</span><span class="hljs-command">\_</span>_init__.py", line 166, in __init__
    self.db_tablespace = db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
  File "C:<span class="hljs-command">\python</span><span class="hljs-command">\lib</span><span class="hljs-command">\site</span>-packages<span class="hljs-command">\django</span>-1.10-py3.5.egg<span class="hljs-command">\django</span><span class="hljs-command">\conf</span><span class="hljs-command">\_</span>_init__.py", line 53, in __getattr__
    self._setup(name)
  File "C:<span class="hljs-command">\python</span><span class="hljs-command">\lib</span><span class="hljs-command">\site</span>-packages<span class="hljs-command">\django</span>-1.10-py3.5.egg<span class="hljs-command">\django</span><span class="hljs-command">\conf</span><span class="hljs-command">\_</span>_init__.py", line 39, in _setup
    <span class="hljs-comment">% (desc, ENVIRONMENT_VARIABLE))</span>
django.core.exceptions.ImproperlyConfigured: Requested setting DEFAULT_INDEX_TABLESPACE, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.

Process finished with exit code 1
</code></pre> 
<p>经上网查找，增加代码处理如下：</p> 
<pre class="prettyprint"><code class=" hljs python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> django

os.environ.setdefault(<span class="hljs-string">'DJANGO_SETTING_MODULE'</span>, <span class="hljs-string">'mydjango.settings'</span>)
django.setup()
<span class="hljs-string">'''
version = django.get_version()
print(version)
version = (int(version[0]), int(version[2:]))
print(version)

if version &gt;= (1,7):
    django.setup()
'''</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">from</span> people.models <span class="hljs-keyword">import</span> Blog
    blog = Blog()
    blog.name = <span class="hljs-string">'blog1'</span>
    blog.tagline = <span class="hljs-string">'tagline1'</span>
    blog.save()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
    print(<span class="hljs-string">'Done......'</span>)
</code></pre> 
<p>运行后发现还是异常，此时是LOGGING_CONFIG没有设置：</p> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-constant">C</span><span class="hljs-symbol">:</span>\python\python.exe <span class="hljs-constant">C</span><span class="hljs-symbol">:/Users/Administrator/PycharmProjects/mydjango/mytest</span>.py
<span class="hljs-constant">Traceback</span> (most recent call last)<span class="hljs-symbol">:</span>
  <span class="hljs-constant">File</span> <span class="hljs-string">"C:/Users/Administrator/PycharmProjects/mydjango/mytest.py"</span>, line <span class="hljs-number">5</span>, <span class="hljs-keyword">in</span> &lt;<span class="hljs-class"><span class="hljs-keyword">module</span>&gt;</span>
    django.setup()
  <span class="hljs-constant">File</span> <span class="hljs-string">"C:\python\lib\site-packages\django-1.10-py3.5.egg\django\__init__.py"</span>, line <span class="hljs-number">22</span>, <span class="hljs-keyword">in</span> setup
    configure_logging(settings.<span class="hljs-constant">LOGGING_CONFIG</span>, settings.<span class="hljs-constant">LOGGING</span>)
  <span class="hljs-constant">File</span> <span class="hljs-string">"C:\python\lib\site-packages\django-1.10-py3.5.egg\django\conf\__init__.py"</span>, line <span class="hljs-number">53</span>, <span class="hljs-keyword">in</span> __getattr_<span class="hljs-number">_</span>
    <span class="hljs-keyword">self</span>._setup(name)
  <span class="hljs-constant">File</span> <span class="hljs-string">"C:\python\lib\site-packages\django-1.10-py3.5.egg\django\conf\__init__.py"</span>, line <span class="hljs-number">39</span>, <span class="hljs-keyword">in</span> _setup
    % (desc, <span class="hljs-constant">ENVIRONMENT_VARIABLE</span>))
django.core.exceptions.<span class="hljs-constant">ImproperlyConfigured</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Requested</span> setting <span class="hljs-constant">LOGGING_CONFIG</span>, but settings are <span class="hljs-keyword">not</span> configured. <span class="hljs-constant">You</span> must either define the environment variable <span class="hljs-constant">DJANGO_SETTINGS_MODULE</span> <span class="hljs-keyword">or</span> call settings.configure() before accessing settings.

<span class="hljs-constant">Process</span> finished with exit code <span class="hljs-number">1</span>
</code></pre> 
<p>经过查找，终于发现将配置添加到pycharm中的python配置中，可以正常运行程序，配置项的key为DJANGO_SETTINGS_MODULE，value为django的项目名称加点号加settings，我的项目名称为mydjango，所以value为mydjango.settings，具体如下图所示： <br> <img src="https://images2.imgbox.com/55/3d/dZdRCVP4_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/fd/bf/LVR6685R_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/c4/0a/GMSl9tGe_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/80/8e/8EePoncW_o.png" alt="这里写图片描述" title=""> <br> <img src="https://images2.imgbox.com/1b/f2/ZRAxlfkC_o.png" alt="这里写图片描述" title=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2c6674701bd614499b3d6a4148ad3a19/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java中JDK和JRE的区别是什么？它们的作用分别是什么？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e25c21225f98acb5131476de962052d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Shell重定向  ＆&gt;file、2&gt;&amp;1、1&gt;&amp;2 、/dev/null的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>