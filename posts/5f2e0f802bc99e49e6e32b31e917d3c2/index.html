<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot - SWAGGER中配置.pathMapping(“XXXX“)引发的404错误 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot - SWAGGER中配置.pathMapping(“XXXX“)引发的404错误" />
<meta property="og:description" content="写在前面 SpringBoot - SWAGGER2的集成与使用(一)
SpringBoot - SWAGGER2公共模块的抽象集成与使用(二)
SpringBoot - SWAGGER3公共模块的抽象集成与使用(三)
SpringBoot - 集成SWAGGER的常见问题
问题描述 A. 前端UI将SWAGGER-UI集成到系统的菜单中了，SWAGGER-UI是用iframe形式打开的；
B. 直接在前端UI的菜单中访问SWAGGER-UI正常，接口访问正常；
C. 如果直接使用：http://后端服务地址:后端端口/swagger-ui/index.html访问SWAGGER-UI，页面显示正常，但是测试接口的时候报404错误；
D. SWAGGER的配置如下：
@Bean public Docket createRestApi() { return new Docket(DocumentationType.OAS_30) // 是否启用Swagger .enable(enabled) // 用来创建该API的基本信息，展示在文档的页面中（自定义展示的信息） .apiInfo(apiInfo()) // 设置哪些接口暴露给Swagger展示 .select() // 扫描所有有注解的api, 用这种方式更灵活(本系统默认方式) //.apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class)) // 扫描指定包中的swagger注解 .apis(RequestHandlerSelectors.basePackage(&#34;cn.hadoopx.web.controller.system&#34;)) // 扫描所有 //.apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build() /* 设置安全模式，swagger可以设置访问token */ .securitySchemes(securitySchemes()) .securityContexts(securityContexts()) .pathMapping(&#34;/dev-api&#34;); } 问题分析 A. 为什么直接在前端UI的菜单中访问SWAGGER-UI正常，接口访问正常？
在前后端分离架构上，SWAGGER-UI使用iframe方式嵌套，生成的服务地址也是前端暴露的地址端口，然后请求过来时将请求代理到后端的目标地址上，同时前端会去掉’.pathMapping(“/dev-api”)&#39;设置的请求前缀，所以访问是正常的。
B. 为什么直接使用：http://后端服务地址:后端端口/swagger-ui/index.html访问SWAGGER-UI，页面显示正常，但是测试接口的时候报404错误？
.pathMapping(“/dev-api”)，只是一个附加的虚拟的路径，并没有实际映射作用到对应的@RequestMapping的路径上，实际的访问路径依然是去掉请求前缀&#34;/dev-api&#34;的，但是它会作用到生成SWAGGER-DOC里的API路径上，会在API路径的前面拼接上前缀，所以直接访问会报错。
C. 如何解决？
第一种方式：针对这个情况可以写个全局过滤器，将请求路径的前缀去掉；
第二种方式：测试的时候，不使用SWAGGER，直接使用POST-MAN测试，使用服务接口真实的调用地址&#43;端口(不带/dev-api前缀)；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5f2e0f802bc99e49e6e32b31e917d3c2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-19T10:44:31+08:00" />
<meta property="article:modified_time" content="2022-08-19T10:44:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot - SWAGGER中配置.pathMapping(“XXXX“)引发的404错误</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>写在前面</h4> 
<p><a href="https://blog.csdn.net/goodjava2007/article/details/125206925">SpringBoot - SWAGGER2的集成与使用(一)</a><br> <a href="https://blog.csdn.net/goodjava2007/article/details/125531395">SpringBoot - SWAGGER2公共模块的抽象集成与使用(二)</a><br> <a href="https://blog.csdn.net/goodjava2007/article/details/125545773?spm=1001.2014.3001.5502">SpringBoot - SWAGGER3公共模块的抽象集成与使用(三)</a><br> <a href="https://blog.csdn.net/goodjava2007/article/details/125547420?spm=1001.2014.3001.5502">SpringBoot - 集成SWAGGER的常见问题</a></p> 
<h4><a id="_6"></a>问题描述</h4> 
<p>A. 前端UI将SWAGGER-UI集成到系统的菜单中了，SWAGGER-UI是用iframe形式打开的；<br> B. 直接在前端UI的菜单中访问SWAGGER-UI正常，接口访问正常；<br> C. 如果直接使用：http://后端服务地址:后端端口/swagger-ui/index.html访问SWAGGER-UI，页面显示正常，<font color="red">但是测试接口的时候报404错误；</font><br> D. SWAGGER的配置如下：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Docket</span> <span class="token function">createRestApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>OAS_30<span class="token punctuation">)</span>
            <span class="token comment">// 是否启用Swagger</span>
            <span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>enabled<span class="token punctuation">)</span>
            <span class="token comment">// 用来创建该API的基本信息，展示在文档的页面中（自定义展示的信息）</span>
            <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// 设置哪些接口暴露给Swagger展示</span>
            <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// 扫描所有有注解的api, 用这种方式更灵活(本系统默认方式)</span>
            <span class="token comment">//.apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))</span>
            <span class="token comment">// 扫描指定包中的swagger注解</span>
            <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"cn.hadoopx.web.controller.system"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// 扫描所有</span>
            <span class="token comment">//.apis(RequestHandlerSelectors.any())</span>
            <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">/* 设置安全模式，swagger可以设置访问token */</span>
            <span class="token punctuation">.</span><span class="token function">securitySchemes</span><span class="token punctuation">(</span><span class="token function">securitySchemes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">securityContexts</span><span class="token punctuation">(</span><span class="token function">securityContexts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pathMapping</span><span class="token punctuation">(</span><span class="token string">"/dev-api"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_36"></a>问题分析</h4> 
<p>A. 为什么直接在前端UI的菜单中访问SWAGGER-UI正常，接口访问正常？<br> 在前后端分离架构上，SWAGGER-UI使用iframe方式嵌套，生成的服务地址也是前端暴露的地址端口，然后请求过来时将请求代理到后端的目标地址上，同时前端会去掉’.pathMapping(“/dev-api”)'设置的请求前缀，所以访问是正常的。</p> 
<p>B. 为什么直接使用：http://后端服务地址:后端端口/swagger-ui/index.html访问SWAGGER-UI，页面显示正常，但是测试接口的时候报404错误？<br> .pathMapping(“/dev-api”)，只是一个附加的虚拟的路径，并没有实际映射作用到对应的@RequestMapping的路径上，实际的访问路径依然是去掉请求前缀"/dev-api"的，但是它会作用到生成SWAGGER-DOC里的API路径上，会在API路径的前面拼接上前缀，所以直接访问会报错。</p> 
<p><font color="red">C. 如何解决？</font><br> 第一种方式：针对这个情况可以写个全局过滤器，将请求路径的前缀去掉；<br> 第二种方式：测试的时候，不使用SWAGGER，直接使用POST-MAN测试，使用服务接口真实的调用地址+端口(不带/dev-api前缀)；<br> 第三种方式：直接通过前端的UI菜单来访问SWAGGER-UI。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/086e8d636bed4ee88963ef2d403a1c20/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GPU error：CUDA超内存</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce9ba67880b98dc8fb325d6f501b6454/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Xavier NX实现硬解码H264&amp;H265</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>