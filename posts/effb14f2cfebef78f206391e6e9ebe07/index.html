<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue异步发送请求，渲染数据 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue异步发送请求，渲染数据" />
<meta property="og:description" content="异步请求
html：
&lt;table&gt; &lt;tr&gt;&lt;td&gt;用户名：&lt;/td&gt;&lt;td&gt;&lt;input type=&#34;email&#34; name=&#34;email&#34; v-model=&#34;email&#34;&gt;&lt;/td&gt;&lt;/tr&gt; //使用双向绑定 &lt;tr&gt;&lt;td&gt;密码：&lt;/td&gt;&lt;td&gt;&lt;input type=&#34;password&#34; name=&#34;password&#34; id=&#34;password&#34; v-model=&#34;password&#34;&gt;&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td colspan=&#34;2&#34;&gt;&lt;input type=&#34;submit&#34; value=&#34;登陆&#34; @click=&#34;user()&#34;&gt;&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; script
export default{ data() { return { email:&#39;&#39;, #双向绑定 password:null, result:null, } }, scrip 中js异步请求，写在method中
user() { let xhr = new XMLHttpRequest() let that=this xhr.open(&#39;post&#39;,&#39;http://111.230.10.23/orange/user/login/&#39;,true) xhr.setRequestHeader(&#39;content-type&#39;,&#39;application/x-www-form-urlencoded&#39;);#post参数请求说明 xhr.send(&#34;email=&#34;&#43;this.email&#43;&#34;&amp;password=&#34;&#43;this.password);//传递参数 xhr.onreadystatechange = function(){ if (xhr.status==200 &amp;&amp; xhr.readyState==4){ //获取返回成功的数据 let res = xhr.responseText res=JSON.parse(res) console.log(res) if (res.code==1){ that.$router.push({path:&#39;/info&#39;}) #跳转路由vue中 window.localhost.href = &#39;/info/&#39; #js跳转 window.open(&#39;/info/&#39;) #window跳转 } } }	}	vue，script的ajax写法，首先要使用Axios重新定义ajax" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/effb14f2cfebef78f206391e6e9ebe07/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-01T11:02:07+08:00" />
<meta property="article:modified_time" content="2019-09-01T11:02:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue异步发送请求，渲染数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>异步请求<br> html：</p> 
<pre><code>&lt;table&gt;
&lt;tr&gt;&lt;td&gt;用户名：&lt;/td&gt;&lt;td&gt;&lt;input type="email" name="email"  v-model="email"&gt;&lt;/td&gt;&lt;/tr&gt;   //使用双向绑定
&lt;tr&gt;&lt;td&gt;密码：&lt;/td&gt;&lt;td&gt;&lt;input type="password" name="password" id="password" v-model="password"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td colspan="2"&gt;&lt;input type="submit" value="登陆" @click="user()"&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</code></pre> 
<p>script</p> 
<pre><code>export default{
		data() {
			return {
				email:'',     #双向绑定
				password:null,
				result:null,
			}
		},
</code></pre> 
<p>scrip 中js异步请求，写在method中</p> 
<pre><code>user() {
    let xhr = new XMLHttpRequest()
    let that=this
    xhr.open('post','http://111.230.10.23/orange/user/login/',true)
    xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');#post参数请求说明
    xhr.send("email="+this.email+"&amp;password="+this.password);//传递参数
    xhr.onreadystatechange = function(){
        	if (xhr.status==200 &amp;&amp; xhr.readyState==4){       //获取返回成功的数据
    		let res = xhr.responseText
    		res=JSON.parse(res)
        		console.log(res)
    		if (res.code==1){
    			that.$router.push({path:'/info'})   #跳转路由vue中
                           window.localhost.href = '/info/'     #js跳转
                           window.open('/info/')     #window跳转
                    }
            }
    }		
}	 
</code></pre> 
<p>vue，script的ajax写法，首先要使用Axios重新定义ajax</p> 
<pre><code>import Axios from 'axios'
Vue.prototype.$ajax = Axios 
</code></pre> 
<p>然后ajax可以这么写</p> 
<pre><code>user(){
    let that=this
    var qs = require('qs');
    var  params= new URLSearchParams();  #post请求传参需要这么写，指明类型
    params.append('email', this.email);
    params.append('password', this.password);
    this.$ajax.post('http://111.230.10.23/orange/user/login/',params)
    .then(response =&gt; (that.$router.push({path:'/info'})))
    .catch(err =&gt; (console.log('错误提示:' + err),console.log(456)))
    }
			
},
</code></pre> 
<p>数据渲染时，进入页面就直接渲染<br> template中</p> 
<pre><code>&lt;div&gt;
		&lt;img :src="icon" alt=""&gt;
		&lt;p&gt;昵称：{<!-- -->{ name }}&lt;/p&gt;
		&lt;p&gt;签名：{<!-- -->{ info }}&lt;/p&gt;
		&lt;p&gt;性别：{<!-- -->{ sex }}&lt;/p&gt;
		&lt;p&gt;ID号：{<!-- -->{ id }}&lt;/p&gt;
	&lt;/div&gt;
</code></pre> 
<p>script中</p> 
<pre><code>export default{
		data(){
			return{
				icon:'',
				sex:'',
				name:'',
				info:'',
				id:'',
			}
		},
</code></pre> 
<p>进入则直接调用渲染函数</p> 
<pre><code>mounted:function(){
    this.showdate();
    },
methods: {
    showdate() {
        this.$ajax.get('http://111.230.10.23/orange/user/info/')     #vue中的ajax写法
        .then(response =&gt; (console.log(response.data)))
        .catch(err =&gt; (console.log('错误提示:' + err)))
    }
},
</code></pre> 
<p>使用钩子函数</p> 
<pre><code>created(){
    this.$ajax.get('http://111.230.10.23/orange/user/info/')
    .then(response =&gt; (this.name=response.data.user[0].name,
                        this.id=response.data.user[0].id))
    .catch(err =&gt; (console.log('错误提示:' + err)))
    }
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7aa4911d7f466aae5fbe353fdd71f31e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数学建模之粒子群算法详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2ee7c2299429e200d2bb3e8ec946de77/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在Linux系统下安装了VMware后打开提示GCC没有找到的解决方法 [GNU C Compiler (gcc) version 7.3.0 was not found.]</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>