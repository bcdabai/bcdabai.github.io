<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前端八股文之Vue - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="前端八股文之Vue" />
<meta property="og:description" content="1. Vue的响应式原理
数据驱动视图，UI =render(state)，state状态发生变化，vue经过模板编译，虚拟DOM，patch过程更新视图。vue2.x会使用object.defineProperty重新当以data中的所有属性，当页面使用对应属性，首先进行数据收集，如果是属性变化会通知相关依赖进行更新操作。vue3.x改用proxy替换object.defineproperty，因为Proxy可以直接监听对象和数组的变化。
1. Vue的双向绑定
双向绑定是通过数据劫持结合发布者-订阅者模式来实现的，get是收集依赖，set进行数据变化更新操作，实现一个监听器observer，用来劫持并监听所有属性，如果有变动，通知订阅者，实现一个订阅器watcher，可以收到属性的变化并执行响应的函数，从而更新视图，实现一个解析器compile，可以扫描解析每个节点的相关指令，并根据初始化模板数据一起初始化响应的订阅器
1. Vue的neextTick原理
在下次DOM更新循环之后执行延迟回调，nextTick主要使用了宏任务和微任务，根据执行环境分别尝试采用promise，mutationObserver，setImmediate定义一个异步方法，多次调用nextTick会将方法存入任务队列中，通过异步方法清空当前队列
4.Vue组件的生命周期
一个组件从创建，数据初始化，挂载，更新，渲染，更新，销毁的过程称为生命周期。
1. 创建前后：
beforeCreate：Vue实例的data和挂载元素el都未定义，还未初始化。created阶段：Vue实例的数据对象data有了，el为undefined，实例创建完成，挂载未完成 2. 载入前后：
beforeMount：Vue实例的el和data都初始化了，还没有挂载，此时DOM为虚拟DOM。把需内中渲染好的模板结构替换到页面上。mounted：Vue实例挂载完成，成功渲染视图，页面渲染完成。 3. 销毁前后：
beforeDestory：组件即将销毁，还没销毁，destoryed：Vue实例销毁后调用，组件无法使用，已经解除了事件监听以及DOM的绑定 4. 更新前后:
beforeUpdate：当data变化后，数据更新的时候调用，把重新渲染好的模板结构放到页面上，updated：页面更新完成，数据更新新数据 Vue父子组件的生命周期调用顺序
组件的调用顺序都是先父后子，渲染完成时先子后父
组件的销毁时先父后子，销毁完成是先子后父
加载渲染完成：父createCreate–父created–父breateMount–子beforeCreate–子created–子breateMount–子mounted—父mounted子组件更新过程：父breateUpdate—子beforeUpdate----子updated----父updated父组件更新过程: 父beforeUpdate—父updated销毁过程: 父beforeDestory—子beforeDestory—子destoryed—父destoryed computed和watch的区别
computed具有缓存功能，只有依赖的数据发生了变化才触发computed
watcher没有缓存功能，可以监听数据执行回调，深度监听的话对象中的属性时，可以打开deep-true选项，watcher支持异步，有两个参数，newData，和oldData，=，两个属性，deep：深入观察没一层层遍历对象，immediate：组件加载立即执行回调函数
组件data为什么是函数
一个组件被复用多次的话，也就会创建多个实例，本质上这些实例用的都是同一个构造函数，如果data是对象的话，对象属于引用类型，会影响到所有的实例
组件间如何通信
1. 父子组件通信
- 父组件通过props向子组件传值
- 子组件通过emit，on向父组件传值
父子组件获取父子组件实例 p a r e n t , parent, parent,childrenref获取实例的方式调用组件的属性和方法 2. 兄弟组件通信
event bus实例跨组件通信-Vue.prototype.$bus = new Vue()vuex 3. 跨组件通信
vuex a t t r s , attrs, attrs,listeners diff算法事件复杂度" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/306918d5672bcffb415286b674062877/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-06T15:31:36+08:00" />
<meta property="article:modified_time" content="2021-01-06T15:31:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前端八股文之Vue</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><strong>1. Vue的响应式原理</strong></p> 
</blockquote> 
<p>数据驱动视图，UI =render(state)，state状态发生变化，vue经过模板编译，虚拟DOM，patch过程更新视图。vue2.x会使用object.defineProperty重新当以data中的所有属性，当页面使用对应属性，首先进行数据收集，如果是属性变化会通知相关依赖进行更新操作。vue3.x改用proxy替换object.defineproperty，因为Proxy可以直接监听对象和数组的变化。</p> 
<blockquote> 
 <p><strong>1. Vue的双向绑定</strong></p> 
</blockquote> 
<p>双向绑定是通过数据劫持结合发布者-订阅者模式来实现的，get是收集依赖，set进行数据变化更新操作，实现一个监听器observer，用来劫持并监听所有属性，如果有变动，通知订阅者，实现一个订阅器watcher，可以收到属性的变化并执行响应的函数，从而更新视图，实现一个解析器compile，可以扫描解析每个节点的相关指令，并根据初始化模板数据一起初始化响应的订阅器</p> 
<blockquote> 
 <p><strong>1. Vue的neextTick原理</strong></p> 
</blockquote> 
<p>在下次DOM更新循环之后执行延迟回调，nextTick主要使用了宏任务和微任务，根据执行环境分别尝试采用promise，mutationObserver，setImmediate定义一个异步方法，多次调用nextTick会将方法存入任务队列中，通过异步方法清空当前队列</p> 
<blockquote> 
 <p><strong>4.Vue组件的生命周期</strong></p> 
</blockquote> 
<p><strong>一个组件从创建，数据初始化，挂载，更新，渲染，更新，销毁的过程称为生命周期。</strong></p> 
<p><strong>1. 创建前后：</strong></p> 
<ul><li>beforeCreate：Vue实例的data和挂载元素el都未定义，还未初始化。</li><li>created阶段：Vue实例的数据对象data有了，el为undefined，实例创建完成，挂载未完成</li></ul> 
<p><strong>2. 载入前后：</strong></p> 
<ul><li>beforeMount：Vue实例的el和data都初始化了，还没有挂载，此时DOM为虚拟DOM。把需内中渲染好的模板结构替换到页面上。</li><li>mounted：Vue实例挂载完成，成功渲染视图，页面渲染完成。</li></ul> 
<p><strong>3. 销毁前后：</strong></p> 
<ul><li>beforeDestory：组件即将销毁，还没销毁，</li><li>destoryed：Vue实例销毁后调用，组件无法使用，已经解除了事件监听以及DOM的绑定</li></ul> 
<p><strong>4. 更新前后:</strong></p> 
<ul><li>beforeUpdate：当data变化后，数据更新的时候调用，把重新渲染好的模板结构放到页面上，</li><li>updated：页面更新完成，数据更新新数据</li></ul> 
<blockquote> 
 <p><strong>Vue父子组件的生命周期调用顺序</strong></p> 
</blockquote> 
<p><strong>组件的调用顺序都是先父后子，渲染完成时先子后父</strong><br> <strong>组件的销毁时先父后子，销毁完成是先子后父</strong></p> 
<ul><li><strong>加载渲染完成</strong>：父createCreate–父created–父breateMount–子beforeCreate–子created–子breateMount–子mounted—父mounted</li><li><strong>子组件更新过程</strong>：父breateUpdate—子beforeUpdate----子updated----父updated</li><li><strong>父组件更新过程</strong>: 父beforeUpdate—父updated</li><li><strong>销毁过程:</strong> 父beforeDestory—子beforeDestory—子destoryed—父destoryed</li></ul> 
<blockquote> 
 <p><strong>computed和watch的区别</strong></p> 
</blockquote> 
<ul><li> <p>computed具有缓存功能，只有依赖的数据发生了变化才触发computed</p> </li><li> <p>watcher没有缓存功能，可以监听数据执行回调，深度监听的话对象中的属性时，可以打开deep-true选项，watcher支持异步，有两个参数，newData，和oldData，=，两个属性，deep：深入观察没一层层遍历对象，immediate：组件加载立即执行回调函数</p> </li></ul> 
<blockquote> 
 <p><strong>组件data为什么是函数</strong></p> 
</blockquote> 
<p>一个组件被复用多次的话，也就会创建多个实例，本质上这些实例用的都是同一个构造函数，如果data是对象的话，对象属于引用类型，会影响到所有的实例</p> 
<blockquote> 
 <p><strong>组件间如何通信</strong></p> 
</blockquote> 
<p><strong>1. 父子组件通信</strong><br> - 父组件通过props向子组件传值<br> - 子组件通过emit，on向父组件传值</p> 
<ul><li>父子组件获取父子组件实例<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
          a 
         
        
          r 
         
        
          e 
         
        
          n 
         
        
          t 
         
        
          , 
         
        
       
         parent, 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.80952em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mpunct">,</span></span></span></span></span>children</li><li>ref获取实例的方式调用组件的属性和方法</li></ul> 
<p><strong>2. 兄弟组件通信</strong></p> 
<ul><li>event bus实例跨组件通信</li><li>-Vue.prototype.$bus = new Vue()</li><li>vuex</li></ul> 
<p><strong>3. 跨组件通信</strong></p> 
<ul><li>vuex</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          a 
         
        
          t 
         
        
          t 
         
        
          r 
         
        
          s 
         
        
          , 
         
        
       
         attrs, 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.80952em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mpunct">,</span></span></span></span></span>listeners</li></ul> 
<blockquote> 
 <p><strong>diff算法事件复杂度</strong></p> 
</blockquote> 
<p><strong>1. 判断是否是静态节点</strong></p> 
<ul><li>静态节点无需处理</li></ul> 
<p><strong>2. VNode是否是文本节点</strong></p> 
<ul><li>oldVNode不是文本阶段，直接使用setTextNode设置为文本节点，再把内容复制过去</li><li>oldVNode是文本节点，比较两个新旧节点是否相等，让旧的节点的内容等于新节点内容</li></ul> 
<p><strong>3. VNode是元素节点</strong></p> 
<ul><li>VNode不含有子节点，也不是文本节点，直接把旧节点的内容清空即可</li><li>VNode含有子节点 
  <ol><li>旧的节点里不包含子节点，就把新节点的内容创建一份插入到旧的节点里面</li><li>旧的节点里播包含子节点，就需要递归遍历对比更新子节点</li><li>如果旧的节点是文本节点，则把文本清空，然后把新节点的内容创建一份插入到旧节点里</li></ol> </li></ul> 
<p><strong>正常比较DOM-Diff是 O(n^3)，Vue2的diff算法采用了双端比较优化算法和只有当新旧children都为多个子节点时才需要用黑犀牛的Diff算法进行同层级比较时间复杂度就是O(n)</strong></p> 
<blockquote> 
 <p><strong>vue中keep-alive有什么用</strong></p> 
</blockquote> 
<p><strong>我们可以把一些不常变动的组件或者需要缓存的组件用包裹起来，这样就会帮我们把组件保存在内存中，而不是直接的销毁</strong></p> 
<ul><li> <p>好处：保留组件的状态或避免多次渲染，提高了页面性能</p> </li><li> <p>有一个淘汰策略LRU，</p> 
  <ol><li>将新数据放到数组尾部</li><li>每当缓存命中，将缓存命中的数据放到数组尾部</li><li>当this.keys满的时候，将头部的数据销毁</li></ol> </li><li> <p>生命周期钩子：activated：缓存组件激活的时候，deactivated：缓存组件销毁的时候</p> </li></ul> 
<blockquote> 
 <p><strong>Vue中history和hash实现的原理</strong></p> 
</blockquote> 
<p><a href="https://juejin.cn/post/6844903589123457031" rel="nofollow">https://juejin.cn/post/6844903589123457031</a></p> 
<ul><li>hash模式下单单修改#后面的部分，浏览器只会滚动到相应的位置，不会重新加载网页。他会触发hashchange()函数</li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Routers</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 储存hash与callback键值对</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// 当前hash</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token comment">// 记录出现过的hash</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 作为指针,默认指向this.history的末尾,根据后退前进指向history中不同的hash</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>refresh <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refresh<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>backOff <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backOff<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 默认不是后退操作</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isBack <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refresh<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refresh<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token function">route</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isBack<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果不是后退操作,且当前指针小于数组总长度,直接截取指针之前的部分储存下来</span>
        <span class="token comment">// 此操作来避免当点击后退按钮之后,再进行正常跳转,指针会停留在原地,而数组添加新hash路由</span>
        <span class="token comment">// 避免再次造成指针的不匹配,我们直接截取指针之前的数组</span>
        <span class="token comment">// 此操作同时与浏览器自带后退功能的行为保持一致</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
           <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'指针:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">,</span> <span class="token string">'history:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isBack <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 后退功能</span>
    <span class="token function">backOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 后退操作设置为true</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isBack <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">&lt;=</span> <span class="token number">0</span>
        <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      location<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token template-string"><span class="token string">`#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>history<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<ol><li>将路由的hash以及对应的callback函数存储</li><li>触发路由的hash变化后，执行对应的callback函数</li><li>监听对应的事件，我们只需要在实例化class的时候监听上面的事件即可</li></ol> 
<p><strong>history模式：</strong></p> 
<ul><li>会调用pushState()和replaceState()方法，应用于记录站。<br> 常用的方法：</li></ul> 
<ol><li>window.history.back() 后退</li><li>window.history.forward() 前进</li><li>window.history.go(-3) 后退三个页面</li></ol> 
<ul><li><strong>history.pushState用于浏览历史中添加历史记录，但是并不触发跳转，此方法接收三个参数state,title,url）</strong></li></ul> 
<ol><li>state：一个与指定网址相关的状态对象，popState事件触发时，该对象会传入回调函数</li><li>title：新页面的标题，</li><li>url：新的网址，必须与当前页面处于同一个域</li></ol> 
<ul><li><strong>history.replaceState方法的参数与pushState方法一摸一样。区别是它修改历览历史中当前记录，而非添加记录，同样不触发跳转</strong></li><li><strong>popState事件，每当同一个文档的浏览历史出现变化的时候，就会触发popState事件</strong></li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Routers</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// 在初始化监听popstate事件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_bindPopState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 初始化路由 replaceState</span>
    <span class="token function">init</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>path<span class="token punctuation">:</span> path<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将路径和对应对调函数加入hashMap存储</span>
    <span class="token function">route</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 触发路由对应回调 pushState</span>
    <span class="token function">go</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>path<span class="token punctuation">:</span> path<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 监听popstate事件</span>
    <span class="token function">_bindPopState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> path <span class="token operator">=</span> e<span class="token punctuation">.</span>state <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>state<span class="token punctuation">.</span>path<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  window<span class="token punctuation">.</span>Router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Routers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Router<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化路由</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">changeBgColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> color<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  Router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">changeBgColor</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/blue'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">changeBgColor</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/green'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">changeBgColor</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><strong>vuex的原理</strong></p> 
</blockquote> 
<p><a href="https://juejin.cn/post/6844904081119510536" rel="nofollow">https://juejin.cn/post/6844904081119510536</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a3208110e14a39d578b51bae272dfee5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前后端分离项目踩过的坑（SpringBoot&#43;layui）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5588cb5757fd9706c3ef21a476ef94ea/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">路由器刷机教程图解_tp-link无线路由器软件如何升级【教程图解】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>