<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>全面了解环保HJ212协议和使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="全面了解环保HJ212协议和使用" />
<meta property="og:description" content="1 环保HJ212协议介绍
环保HJ212协议是在环保行业中使用的数据传输协议。数据终端、采集终端、环保仪等终端设备把采集好的数据发送到环保平台使用这个协议。这个协议是环保行业的标准协议。所以实现了各种终端和平台之间的完美对接。只要符合协议标准的设备和平台，都可以互联互通。
协议定义：本标准适用于污染物在线监控（监测）系统、污染物排放过程（工况）自动监控系统与监控中心之间的数据传输，规定了传输的过程及参数命令、交互命令、数据命令和控制命令的格式，给出了代码定义，本标准允许扩展，但扩展内容时不得与本标准中所使用或保留的控制命令相冲突。本标准还规定了在线监控（监测）仪器仪表和数据采集传输仪之间的数据传输格式，同时给出了代码定义。
2 协议版本
212协议有两个版本，HJ 212-2005，HJ 212-2017。现在用的是HJ 212-2017。大部分设备和平台已经升级到最新版的协议。
3 系统架构
现场有一套或多套监控仪器仪表，监控仪器仪表具有数字输出接口，连接到独立的数据采集传输仪，上位机通过传输网络与数采仪进行通讯（包括发起、数据交换、应答等）
4 通讯协议的数据格式
HJ212协议是一种字符串协议，数据传输通讯包主要由包头、数据段长度、数据段、CRC校验、包尾组成，其中“数据段”内容包括请求编码、系统编码、命令编码、密码、设备唯一标识、总包数、包号、指令参数。请求编码为请求的时间戳，系统编码ST统一规定为22，命令编码CN为该数据包的时间类型，访问密码、设备唯一标识在对接时由平台提供，指令参数为数据内容。通讯协议的数据结构如图所示。
4.1 通讯包结构组成
4.2 数据段结构组成
5 数据样例
##0127QN=20210320163058511;ST=32;CN=2081;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320163058;RestartTime=20210320000006&amp;&amp;A781
##0457QN=20210320163101890;ST=32;CN=2011;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320013400;w00000-Rtd=181.682,w00000-Flag=N;w21001-SampleTime=20210320005400,w21001-Rtd=45.160,w21001-Flag=N;w21011-SampleTime=20210320013400,w21011-Rtd=1.970,w21011-Flag=N;w21003-SampleTime=20210320013400,w21003-Rtd=53.131,w21003-Flag=N;w01018-SampleTime=20210320013400,w01018-Rtd=194.200,w01018-Flag=N;w01001-SampleTime=20210320013406,w01001-Rtd=7.496,w01001-Flag=N&amp;&amp;6E80
##0596QN=20210320163106355;ST=32;CN=2051;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320155000;w00000-Cou=177.217,w00000-Min=292.286,w00000-Avg=295.361,w00000-Max=297.287,w00000-Flag=D;w21001-Cou=8.164,w21001-Min=46.070,w21001-Avg=46.070,w21001-Max=46.070,w21001-Flag=D;w21011-Cou=0.392,w21011-Min=2.214,w21011-Avg=2.214,w21011-Max=2.214,w21011-Flag=N;w21003-Cou=8.532,w21003-Min=48.145,w21003-Avg=48.144,w21003-Max=48.145,w21003-Flag=N;w01018-Cou=41.486,w01018-Min=234.100,w01018-Avg=234.100,w01018-Max=234.100,w01018-Flag=N;w01001-Min=7.551,w01001-Avg=7.556,w01001-Max=7.559,w01001-Flag=N&amp;&amp;42C0
##0457QN=20210320163113904;ST=32;CN=2011;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320013500;w00000-Rtd=181.682,w00000-Flag=N;w21001-SampleTime=20210320005400,w21001-Rtd=45.160,w21001-Flag=N;w21011-SampleTime=20210320013500,w21011-Rtd=1.970,w21011-Flag=N;w21003-SampleTime=20210320013500,w21003-Rtd=53.131,w21003-Flag=N;w01018-SampleTime=20210320013500,w01018-Rtd=194.200,w01018-Flag=N;w01001-SampleTime=20210320013506,w01001-Rtd=7.500,w01001-Flag=N&amp;&amp;8F81
6 上传数据分类
很多环境监控的应用的场合需要把各种终端的设备数据发送到环保局的平台，每种应用需要发送的数据是不同的。有的需要实时数据，有的需要分钟数据，小时数据，日数据等等。这个需要在数采仪上进行相应的配置。环保212协议的数传设备使用可配置以下参数。
7 深入学习
可参考HJ212-2017的协议文档。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d924aa54c4dca249747a68f0bd39ce87/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-25T10:51:07+08:00" />
<meta property="article:modified_time" content="2022-01-25T10:51:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">全面了解环保HJ212协议和使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>1 环保HJ212协议介绍</strong><br> 环保HJ212协议是在环保行业中使用的数据传输协议。数据终端、采集终端、环保仪等终端设备把采集好的数据发送到环保平台使用这个协议。这个协议是环保行业的标准协议。所以实现了各种终端和平台之间的完美对接。只要符合协议标准的设备和平台，都可以互联互通。<br> 协议定义：本标准适用于污染物在线监控（监测）系统、污染物排放过程（工况）自动监控系统与监控中心之间的数据传输，规定了传输的过程及参数命令、交互命令、数据命令和控制命令的格式，给出了代码定义，本标准允许扩展，但扩展内容时不得与本标准中所使用或保留的控制命令相冲突。本标准还规定了在线监控（监测）仪器仪表和数据采集传输仪之间的数据传输格式，同时给出了代码定义。</p> 
<p><strong>2 协议版本</strong><br> 212协议有两个版本，HJ 212-2005，HJ 212-2017。现在用的是HJ 212-2017。大部分设备和平台已经升级到最新版的协议。</p> 
<p><strong>3 系统架构</strong><br> 现场有一套或多套监控仪器仪表，监控仪器仪表具有数字输出接口，连接到独立的数据采集传输仪，上位机通过传输网络与数采仪进行通讯（包括发起、数据交换、应答等）<br> <img src="https://images2.imgbox.com/72/8c/tQpe8Ig5_o.png" alt="在这里插入图片描述"></p> 
<p><strong>4 通讯协议的数据格式</strong><br> HJ212协议是一种字符串协议，数据传输通讯包主要由包头、数据段长度、数据段、CRC校验、包尾组成，其中“数据段”内容包括请求编码、系统编码、命令编码、密码、设备唯一标识、总包数、包号、指令参数。请求编码为请求的时间戳，系统编码ST统一规定为22，命令编码CN为该数据包的时间类型，访问密码、设备唯一标识在对接时由平台提供，指令参数为数据内容。通讯协议的数据结构如图所示。<br> <img src="https://images2.imgbox.com/08/49/PzgYs2Nb_o.png" alt="在这里插入图片描述"></p> 
<p>4.1 通讯包结构组成<br> <img src="https://images2.imgbox.com/e3/f7/KDA1FOBi_o.png" alt="在这里插入图片描述"></p> 
<p>4.2 数据段结构组成<br> <img src="https://images2.imgbox.com/0c/93/FmFNINjf_o.png" alt="在这里插入图片描述"></p> 
<p>5 数据样例<br> ##0127QN=20210320163058511;ST=32;CN=2081;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320163058;RestartTime=20210320000006&amp;&amp;A781<br> ##0457QN=20210320163101890;ST=32;CN=2011;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320013400;w00000-Rtd=181.682,w00000-Flag=N;w21001-SampleTime=20210320005400,w21001-Rtd=45.160,w21001-Flag=N;w21011-SampleTime=20210320013400,w21011-Rtd=1.970,w21011-Flag=N;w21003-SampleTime=20210320013400,w21003-Rtd=53.131,w21003-Flag=N;w01018-SampleTime=20210320013400,w01018-Rtd=194.200,w01018-Flag=N;w01001-SampleTime=20210320013406,w01001-Rtd=7.496,w01001-Flag=N&amp;&amp;6E80<br> ##0596QN=20210320163106355;ST=32;CN=2051;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320155000;w00000-Cou=177.217,w00000-Min=292.286,w00000-Avg=295.361,w00000-Max=297.287,w00000-Flag=D;w21001-Cou=8.164,w21001-Min=46.070,w21001-Avg=46.070,w21001-Max=46.070,w21001-Flag=D;w21011-Cou=0.392,w21011-Min=2.214,w21011-Avg=2.214,w21011-Max=2.214,w21011-Flag=N;w21003-Cou=8.532,w21003-Min=48.145,w21003-Avg=48.144,w21003-Max=48.145,w21003-Flag=N;w01018-Cou=41.486,w01018-Min=234.100,w01018-Avg=234.100,w01018-Max=234.100,w01018-Flag=N;w01001-Min=7.551,w01001-Avg=7.556,w01001-Max=7.559,w01001-Flag=N&amp;&amp;42C0<br> ##0457QN=20210320163113904;ST=32;CN=2011;PW=123456;MN=81733553213013;Flag=4;CP=&amp;&amp;DataTime=20210320013500;w00000-Rtd=181.682,w00000-Flag=N;w21001-SampleTime=20210320005400,w21001-Rtd=45.160,w21001-Flag=N;w21011-SampleTime=20210320013500,w21011-Rtd=1.970,w21011-Flag=N;w21003-SampleTime=20210320013500,w21003-Rtd=53.131,w21003-Flag=N;w01018-SampleTime=20210320013500,w01018-Rtd=194.200,w01018-Flag=N;w01001-SampleTime=20210320013506,w01001-Rtd=7.500,w01001-Flag=N&amp;&amp;8F81</p> 
<p>6 上传数据分类<br> 很多环境监控的应用的场合需要把各种终端的设备数据发送到环保局的平台，每种应用需要发送的数据是不同的。有的需要实时数据，有的需要分钟数据，小时数据，日数据等等。这个需要在数采仪上进行相应的配置。环保212协议的数传设备使用可配置以下参数。<br> <img src="https://images2.imgbox.com/67/65/quYfkQJh_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/73/4d/tq4Dzuci_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a1/b3/rxYEat4I_o.png" alt="在这里插入图片描述"></p> 
<p>7 深入学习<br> 可参考HJ212-2017的协议文档。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/929c5aea1c446fae064ac374e44e4081/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">typescript中的type关键字</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6b7b06bc42c731c5265ef12ebe808e1d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STM32 编码器驱动/旋转编码器旋钮encoder</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>