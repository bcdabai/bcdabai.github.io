<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Configuration - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Configuration" />
<meta property="og:description" content="一、configuration types
1、exporting a object
2、exporting a function
输出的函数会注入两个参数：环境，options(描述了传给webpack的配置参数，比如output-filename和optimize-minimize).
module.exports = function(env, argv) { return { devtool: env.production ? &#39;source-maps&#39; : &#39;eval&#39;, plugins: [ new webpack.optimize.UglifyJsPlugin({ compress: argv[&#39;optimize-minimize&#39;] // only if -p or --optimize-minimize were passed }) ] }; }; 3、exporting a promise
webpack会运行配置文件输出的函数，可以返回一个Promise。用于异步加载配置参数。
module.exports = () =&gt; { return new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { resolve({ entry: &#39;./app.js&#39;, /* ... */ }) }, 5000) }) } 4、exporting multiple configurations" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/254f642527b45bc260048e30704edb39/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-08T18:40:00+08:00" />
<meta property="article:modified_time" content="2018-01-08T18:40:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Configuration</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>一、configuration types</p> 
 <p>1、exporting a object</p> 
 <p>2、exporting a function</p> 
 <p>输出的函数会注入两个参数：环境，options(描述了传给webpack的配置参数，比如output-filename和optimize-minimize).</p> 
 <div class="cnblogs_code"> 
  <pre>module.exports = <span style="color:#0000ff;">function</span><span style="color:#000000;">(env, argv) {
  </span><span style="color:#0000ff;">return</span><span style="color:#000000;"> {
    devtool: env.production </span>? 'source-maps' : 'eval'<span style="color:#000000;">,
     plugins: [
       </span><span style="color:#0000ff;">new</span><span style="color:#000000;"> webpack.optimize.UglifyJsPlugin({
        compress: argv[</span>'optimize-minimize'] <span style="color:#008000;">//</span><span style="color:#008000;"> only if -p or --optimize-minimize were passed</span>
<span style="color:#000000;">       })
     ]
  };
};</span></pre> 
 </div> 
 <p> </p> 
 <p>3、exporting a promise</p> 
 <p>webpack会运行配置文件输出的函数，可以返回一个Promise。用于异步加载配置参数。</p> 
 <div class="cnblogs_code"> 
  <pre>module.exports = () =&gt;<span style="color:#000000;"> {
  </span><span style="color:#0000ff;">return</span> <span style="color:#0000ff;">new</span> Promise((resolve, reject) =&gt;<span style="color:#000000;"> {
    setTimeout(() </span>=&gt;<span style="color:#000000;"> {
      resolve({
        entry: </span>'./app.js'<span style="color:#000000;">,
        </span><span style="color:#008000;">/*</span><span style="color:#008000;"> ... </span><span style="color:#008000;">*/</span><span style="color:#000000;">
      })
    }, </span>5000<span style="color:#000000;">)
  })
}</span></pre> 
 </div> 
 <p> </p> 
 <p>4、exporting multiple configurations</p> 
 <p>可以输出多个配置（多个配置函数webpack 3.1才支持）。当运行webpack时，所有的配置都会构建。可以用于构建针对不同target（AMD和CommonJS）的library.</p> 
 <div class="cnblogs_code"> 
  <pre>module.exports =<span style="color:#000000;"> [{
  output: {
    filename: </span>'./dist-amd.js'<span style="color:#000000;">,
    libraryTarget: </span>'amd'<span style="color:#000000;">
  },
  entry: </span>'./app.js'<span style="color:#000000;">,
}, {
  output: {
    filename: </span>'./dist-commonjs.js'<span style="color:#000000;">,
    libraryTarget: </span>'commonjs'<span style="color:#000000;">
  },
  entry: </span>'./app.js'<span style="color:#000000;">,
}]</span></pre> 
 </div> 
 <p> </p> 
 <p>二、Entry and Context</p> 
 <p>webpack从entry对象指定位置开始构建bundle。context是包含entry文件的文件夹的绝对路径。</p> 
 <p>1、context</p> 
 <p>绝对路径，用于从配置中解析入口点和加载程序。</p> 
 <div class="cnblogs_code"> 
  <pre>context: path.resolve(__dirname, "app")</pre> 
 </div> 
 <p> 默认使用当前文件夹，但推荐配置一个值，这样就不用依赖cwd了。</p> 
 <p> </p> 
 <p>2、entry</p> 
 <p>entry指定应用程序的入口。如果传入一个数组，数组中所有文件都会执行。动态加载的module不是入口。</p> 
 <p>一个最简单的原则：一个HTML页面一个入口。SPA：一个入口；MPA：多个入口</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#000000;">entry: {
  home: </span>"./home.js"<span style="color:#000000;">,
  about: </span>"./about.js"<span style="color:#000000;">,
  contact: </span>"./contact.js"<span style="color:#000000;">
}</span></pre> 
 </div> 
 <p> 1）naming</p> 
 <p>如果传入一个字符串或者字符串数组，chunk名字就是main。如果传入一个对象，对象的key值为chunk名字，value值描述chunk的入口。</p> 
 <p> 2）动态入口</p> 
 <div class="cnblogs_code"> 
  <pre>entry: () =&gt; './demo'<span style="color:#000000;">
or
entry: () </span>=&gt; <span style="color:#0000ff;">new</span> Promise((resolve) =&gt; resolve(['./demo', './demo2']))</pre> 
 </div> 
 <p> 当结合output.library时，如果传入一个数组，只有最后一个会被输出。</p> 
 <div> 
  <p> </p> 
  <p> </p> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/YangqinCao/p/8244212.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c650f416e2a7a12ada1e78c227e5984f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Greenplum介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d90d7125d8979abab24fe7bdfca7abad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PHP 如何实现页面静态化？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>