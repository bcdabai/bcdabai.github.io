<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux网络测试命令 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux网络测试命令" />
<meta property="og:description" content="文章目录 一.route命令解释二.traceroute命令三.nslookup命令四.本地主机映射文件五.修改网络配置文件六.设置网络接口参数 一.route命令解释 Destination（目标）：这一列显示要路由的目标网络或主机的IP地址。它标识了数据包要发送到的目的地。Gateway（网关）：此列显示用于将数据包传输到目标网络或主机的下一跳路由器的IP地址。如果数据包的目标与本地网络相同，该列将显示本地网络的IP地址。Genmask（子网掩码）：这一列显示目标网络的子网掩码。子网掩码用于确定哪些位被视为网络位和主机位。Flags（标志）：此列显示与路由条目相关的标志。常见的标志包括 G（网关，表示目标是通过网关进行路由）、U（启用，表示路由是活动的）和H（主机，表示目标是单个主机）等。Metric（度量）：该列显示路由的度量值。度量用于确定数据包传输的优先级，较小的度量意味着更优先传递。Ref（引用）：此列显示对路由的引用计数。引用计数表示有多少个其他路由表条目引用了该路由。Use（使用）：这一列显示路由的使用计数。使用计数表示有多少个数据包已经使用了该路由。Iface（接口）：该列显示数据包将通过的网络接口，如eth0、wlan0等。
Destination Gateway Genmask Flags Metric Ref Use Iface
192.168.1.0 0.0.0.0 255.255.255.0 U 600 0 0 enp3s0
10.0.0.0 192.168.1.1 255.255.255.0 UG 0 0 0 enp3s0
在这个例子中，路由表包含两个条目。
第一个条目的目标是192.168.1.0，网关是0.0.0.0，子网掩码是255.255.255.0，标志为U（启用），度量为600。这意味着当要发送到192.168.1.0/24网络的数据包时，它将被直接发送到接口enp3s0，而不使用网关。
第二个条目的目标是10.0.0.0，网关是192.168.1.1，子网掩码是255.255.255.0，标志为UG（网关、启用），度量为0。这意味着当要发送到10.0.0.0/24网络的数据包时，它将首先发送到位于本地网络192.168.1.0/24上的网关192.168.1.1，由该网关进一步路由到目标网络。接口enp3s0将用于跟网关通信。 二.traceroute命令 测试从当前主机到目的主机之间经过的网络节点
traceroute 目标主机地址 traceroute命令可以用于测试从当前主机到目的主机之间经过了哪些网络结点，并显示各中间结点的连接状态(响应时间)。对于无法响应的结点，连接状态将显示为&#34;*&#34;。
三.nslookup命令 测试DNS域名解析
nslookup 目标主机地址 [DNS服务器地址] Server是指DNS服务器地址
Addres是指解析出的ip
域名解析配置文件查看与修改 resolv.conf
/etc/resolv.conf 文件中记录了本机默认使用的DNS服务器的地址信息，对该文件所做的修改将会立刻生效。
Linux系统中最多可以指定3个（第3个以后的将被忽略)不同的 DNS 服务器地址，优先使用第1个 DNS服务器。
resolv.conf 文件中的 “search localdomain” 行用来设置默认的搜索域(域名后缀)。例如，当访问主机“localhost”时,就相当于访问“localhost.localdomain”
四.本地主机映射文件 /etc/hosts文件
保存主机名与IP地址的映射记录
这里可以修改IP和对应的主机名或者域名，例如你想要访问
若在/etc/hosts 文件中添加“192.168.109.11 www.zhangbin.com”的映射记录，则当访问网站 www.zhangbin.com 时，将会直接向 IP 地址 192.168.109.11 www." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9de52a494875177528acafa363c396bf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-24T14:37:03+08:00" />
<meta property="article:modified_time" content="2023-10-24T14:37:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux网络测试命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#route_4" rel="nofollow">一.route命令解释</a></li><li><a href="#traceroute_23" rel="nofollow">二.traceroute命令</a></li><li><a href="#nslookup_32" rel="nofollow">三.nslookup命令</a></li><li><a href="#_48" rel="nofollow">四.本地主机映射文件</a></li><li><a href="#_62" rel="nofollow">五.修改网络配置文件</a></li><li><a href="#_96" rel="nofollow">六.设置网络接口参数</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="route_4"></a>一.route命令解释</h2> 
<p><img src="https://images2.imgbox.com/b4/99/nIuHf9Vf_o.png" alt="在这里插入图片描述"></p> 
<ol><li>Destination（目标）：这一列显示要路由的目标网络或主机的IP地址。它标识了数据包要发送到的目的地。</li><li>Gateway（网关）：此列显示用于将数据包传输到目标网络或主机的下一跳路由器的IP地址。如果数据包的目标与本地网络相同，该列将显示本地网络的IP地址。</li><li>Genmask（子网掩码）：这一列显示目标网络的子网掩码。子网掩码用于确定哪些位被视为网络位和主机位。</li><li>Flags（标志）：此列显示与路由条目相关的标志。常见的标志包括 G（网关，表示目标是通过网关进行路由）、U（启用，表示路由是活动的）和H（主机，表示目标是单个主机）等。</li><li>Metric（度量）：该列显示路由的度量值。度量用于确定数据包传输的优先级，较小的度量意味着更优先传递。</li><li>Ref（引用）：此列显示对路由的引用计数。引用计数表示有多少个其他路由表条目引用了该路由。</li><li>Use（使用）：这一列显示路由的使用计数。使用计数表示有多少个数据包已经使用了该路由。</li><li>Iface（接口）：该列显示数据包将通过的网络接口，如eth0、wlan0等。<br> Destination Gateway Genmask Flags Metric Ref Use Iface<br> 192.168.1.0 0.0.0.0 255.255.255.0 U 600 0 0 enp3s0<br> 10.0.0.0 192.168.1.1 255.255.255.0 UG 0 0 0 enp3s0<br> 在这个例子中，路由表包含两个条目。<br> 第一个条目的目标是192.168.1.0，网关是0.0.0.0，子网掩码是255.255.255.0，标志为U（启用），度量为600。这意味着当要发送到192.168.1.0/24网络的数据包时，它将被直接发送到接口enp3s0，而不使用网关。<br> 第二个条目的目标是10.0.0.0，网关是192.168.1.1，子网掩码是255.255.255.0，标志为UG（网关、启用），度量为0。这意味着当要发送到10.0.0.0/24网络的数据包时，它将首先发送到位于本地网络192.168.1.0/24上的网关192.168.1.1，由该网关进一步路由到目标网络。接口enp3s0将用于跟网关通信。</li></ol> 
<h2><a id="traceroute_23"></a>二.traceroute命令</h2> 
<p>测试从当前主机到目的主机之间经过的网络节点</p> 
<pre><code class="prism language-go">traceroute 目标主机地址
</code></pre> 
<p>traceroute命令可以用于测试从当前主机到目的主机之间经过了哪些网络结点，并显示各中间结点的连接状态(响应时间)。对于无法响应的结点，连接状态将显示为"*"。</p> 
<h2><a id="nslookup_32"></a>三.nslookup命令</h2> 
<p>测试DNS域名解析</p> 
<pre><code class="prism language-go">nslookup 目标主机地址 <span class="token punctuation">[</span>DNS服务器地址<span class="token punctuation">]</span>
</code></pre> 
<p>Server是指DNS服务器地址<br> Addres是指解析出的ip<br> 域名解析配置文件查看与修改 resolv.conf<br> /etc/resolv.conf 文件中记录了本机默认使用的DNS服务器的地址信息，对该文件所做的修改将会立刻生效。<br> Linux系统中最多可以指定3个（第3个以后的将被忽略)不同的 DNS 服务器地址，优先使用第1个 DNS服务器。<br> resolv.conf 文件中的 “search localdomain” 行用来设置默认的搜索域(域名后缀)。例如，当访问主机“localhost”时,就相当于访问“localhost.localdomain”</p> 
<h2><a id="_48"></a>四.本地主机映射文件</h2> 
<p>/etc/hosts文件<br> 保存主机名与IP地址的映射记录<br> 这里可以修改IP和对应的主机名或者域名，例如你想要访问</p> 
<p>若在/etc/hosts 文件中添加“192.168.109.11 www.zhangbin.com”的映射记录，则当访问网站 www.zhangbin.com 时，将会直接向 IP 地址 192.168.109.11 www.zhangbin.com 发送 Web 请求。</p> 
<p>是的，当系统进行网络连接时，会按照一定的顺序查找/etc/hosts文件和/etc/resolv.conf文件。<br> 首先，系统会查找/etc/hosts文件。/etc/hosts文件是一个本地的静态IP地址解析表，它将特定主机名映射到相应的IP地址。如果在/etc/hosts文件中找到了与目标主机名匹配的条目，系统将直接使用该IP地址进行通信。<br> 如果在/etc/hosts文件中没有找到匹配的条目，系统会继续查找/etc/resolv.conf文件。/etc/resolv.conf文件包含了域名解析的配置信息，包括DNS服务器的IP地址。系统将使用/etc/resolv.conf中指定的DNS服务器来解析目标主机名。DNS服务器负责将域名解析为相应的IP地址，并返回给请求的系统。<br> 因此，在网络连接过程中，首先检查/etc/hosts文件，如果找不到匹配的条目，则继续查找/etc/resolv.conf文件来进行域名解析。</p> 
<h2><a id="_62"></a>五.修改网络配置文件</h2> 
<p>网络接口的配置文件默认位于/etc/sysconfig/network-script/ifcfg-ens33<br> 文件名格式为"ifcfg-XXX",其中"XXX"是网络接口的名称<br> 例如：网卡ens33的配置文件是"ifcfg-ens33",回环接口lo的配置文件是"ifcfg-lo"。</p> 
<p>此配置文件是用来配置网络接口em1的。下面是各个参数的含义：</p> 
<ul><li>TYPE=“Ethernet”：表示这是一个以太网接口。</li><li>PROXY_METHOD=“none”：表示不使用代理。</li><li>BROWSER_ONLY=“no”：表示该网络接口可以访问所有网络资源，而不仅仅是浏览器。</li><li>BOOTPROTO=“none”：表示手动配置IP地址和网关。</li><li>DEFROUTE=“yes”：表示该接口是系统的默认路由。</li><li>IPV4_FAILURE_FATAL=“no”：表示IPv4连接失败后不会导致网络连接失败。</li><li>IPV6INIT=“yes”：表示启用IPv6连接。</li><li>IPV6_AUTOCONF=“yes”：表示启用IPv6自动配置。</li><li>IPV6_DEFROUTE=“yes”：表示该接口是IPv6系统的默认路由。</li><li>IPV6_FAILURE_FATAL=“no”：表示IPv6连接失败后不会导致网络连接失败。</li><li>IPV6_ADDR_GEN_MODE=“stable-privacy”：表示使用稳定的随机化IP地址。</li><li>NAME=“em1”：表示网络接口的名称为em1。</li><li>UUID=“05cb4184-ae56-4443-9372-450bc2e115b0”：表示网络接口的唯一标识。</li><li>DEVICE=“em1”：表示该配置文件所对应的网络接口名。</li><li>ONBOOT=“yes”：表示系统启动时自动启用该网络接口。</li><li>IPADDR=“192.168.1.106”：表示网络接口的IPv4地址。</li><li>PREFIX=“24”：表示IPv4地址的子网掩码为24位。</li><li>GATEWAY=“192.168.1.1”：表示网络接口的默认网关。</li><li>DNS1=“210.22.84.3”、DNS2=“210.22.70.3”：表示两个DNS服务器的IP地址。</li><li>IPV6_PRIVACY=“no”：表示禁用IPv6隐私扩展。</li></ul> 
<p>systemctl restart network<br> #重启网络</p> 
<p>注：建议关闭NetworkManager服务，否则有时启动network会报错<br> systmctl stop NetworkManager<br> systmctl disable NetworkManager</p> 
<h2><a id="_96"></a>六.设置网络接口参数</h2> 
<p>ifconfig 命令不仅可以用于查看网卡配置，还可以修改网卡的 IP 地址、子网掩码，也可以绑定虚拟网络接口、激活或禁用网络接口</p> 
<pre><code class="prism language-go">ifconfig ens37 <span class="token number">192.168</span><span class="token number">.109</span><span class="token number">.13</span>   netmask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>         <span class="token comment">//临时配置网卡的ip地址</span>
ifconfig ens37 <span class="token number">192.168</span><span class="token number">.109</span><span class="token number">.13</span><span class="token operator">/</span><span class="token number">24</span>         <span class="token comment">//当不指定子网掩码时，将使用 IP 地址所在分类的默认子网掩码</span>
</code></pre> 
<p>启用、禁用网络接口配置</p> 
<p>如果只是禁用、启用某一个网络接口（而不是所有接口），可分别使用两个接口控制脚本ifdown、ifup<br> ifconfig ens37 down|up 或<br> ifup/ifdown ens37</p> 
<p>systemctl restart network #重启所有的网卡</p> 
<p>ifdown ens33 #关闭某个网卡</p> 
<p>ifup ens33 #启动某个网卡</p> 
<p>ifconfig ens33 down #临时禁用某个网卡</p> 
<p>ifconfig ens33 up #重新激活某个网卡（不会更新IP地址）</p> 
<p>ifdown ens33 &amp;&amp; ifup ens33<br> //关闭并开启</p> 
<p>为网卡绑定虚拟接口：在对服务器网络进行调试的过程中，有时候需要临时在同一个网卡上使用一个新的IP地址，但是又不能覆盖原有IP地址而导致服务程序不可用。这时可以为网卡绑定一个虚拟的网络接口，然后为虚拟接口设置新的IP地址（相当于一块网卡配多个IP地址）。</p> 
<p>ifconfig ens33:192.168.109.11</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e04ffb43394be966fbc9dcde95de1b71/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【JS学习笔记】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0752c2c39124295d14534fae2f7c77b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java遍历数组</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>