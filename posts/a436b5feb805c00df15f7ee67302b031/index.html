<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>红黑树排序(javascript) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="红黑树排序(javascript)" />
<meta property="og:description" content="/**********************************************************/ /*红黑树(平衡树)排序 */ /**********************************************************/ var red = 1; var black = 0; //结点 function RB_Node(val) { this.left = null; //左结点 this.right = null; //右结点 this.parent = null; //父结点 this.color = red; //结点的颜色 this.value = val; //值结点 //取得叔父结点 this.Uncle = function() { if(this.parent == this.Grandpa().left) return this.Grandpa().right; return this.Grandpa().left; } //取得祖父结点 this.Grandpa = function() { return this.parent.parent; } } //树 function RB_Tree() { this.header = null; //头结点 this.output_string = &#34;&#34;; //插入结点 this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a436b5feb805c00df15f7ee67302b031/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2008-10-15T17:16:00+08:00" />
<meta property="article:modified_time" content="2008-10-15T17:16:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">红黑树排序(javascript)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="highlighter"> 
 <ol start="1" class="highlighter-c"><li> <span class="comment">/**********************************************************/</span></li><li class="alt">  <span class="comment">/*红黑树(平衡树)排序                                      */</span></li><li>  <span class="comment">/**********************************************************/</span></li><li class="alt">  var red = 1;</li><li>  var black = 0;</li><li class="alt">  </li><li>  <span class="comment">//结点</span></li><li class="alt">  function RB_Node(val)</li><li>  {<!-- --></li><li class="alt">      <span class="keyword">this</span>.left  = <span class="keyword">null</span>;                  <span class="comment">//左结点</span></li><li>      <span class="keyword">this</span>.right = <span class="keyword">null</span>;                  <span class="comment">//右结点</span></li><li class="alt">      <span class="keyword">this</span>.parent = <span class="keyword">null</span>;                 <span class="comment">//父结点</span></li><li>  </li><li class="alt">      <span class="keyword">this</span>.color = red;                   <span class="comment">//结点的颜色</span></li><li>       </li><li class="alt">      <span class="keyword">this</span>.value = val;                  <span class="comment">//值结点 </span></li><li>      </li><li class="alt">      <span class="comment">//取得叔父结点</span></li><li>      <span class="keyword">this</span>.Uncle = function()</li><li class="alt">      {<!-- --></li><li>        <span class="keyword">if</span>(<span class="keyword">this</span>.parent == <span class="keyword">this</span>.Grandpa().left) <span class="keyword">return</span> <span class="keyword">this</span>.Grandpa().right;</li><li class="alt">       </li><li>        <span class="keyword">return</span> <span class="keyword">this</span>.Grandpa().left;</li><li class="alt">      }</li><li>      </li><li class="alt">      <span class="comment">//取得祖父结点</span></li><li>      <span class="keyword">this</span>.Grandpa = function()</li><li class="alt">      {<!-- --></li><li>        <span class="keyword">return</span> <span class="keyword">this</span>.parent.parent;</li><li class="alt">      }</li><li>  }</li><li class="alt">  </li><li>  <span class="comment">//树</span></li><li class="alt">  function RB_Tree()</li><li>  {<!-- --></li><li class="alt">    <span class="keyword">this</span>.header = <span class="keyword">null</span>;          <span class="comment">//头结点</span></li><li>    <span class="keyword">this</span>.output_string = <span class="string">""</span>;</li><li class="alt">   </li><li>    <span class="comment">//插入结点</span></li><li class="alt">    <span class="keyword">this</span>.InsertNode = function(val)</li><li>    {<!-- --></li><li class="alt">        var node = <span class="keyword">new</span> RB_Node(val);</li><li>        var target_pos = <span class="keyword">this</span>.header;</li><li class="alt">            </li><li>        var parent = <span class="keyword">null</span>;</li><li class="alt">        var be_in_left = <span class="keyword">true</span>;</li><li>        </li><li class="alt">        <span class="comment">//查找插入位置</span></li><li>        <span class="keyword">while</span>(<span class="keyword">null</span> != target_pos)</li><li class="alt">        {<!-- --></li><li>            parent = target_pos;</li><li class="alt">            <span class="keyword">if</span>(<span class="keyword">this</span>.compare(node,target_pos))   <span class="comment">//插入右树</span></li><li>            {<!-- --></li><li class="alt">                target_pos = target_pos.right;</li><li>                be_in_left = <span class="keyword">false</span>;</li><li class="alt">            }</li><li>            <span class="keyword">else</span>                      <span class="comment">//插入左子树</span></li><li class="alt">            {<!-- --></li><li>                target_pos =target_pos.left;</li><li class="alt">                be_in_left = <span class="keyword">true</span>;</li><li>            }</li><li class="alt">        }</li><li>    </li><li class="alt">        node.parent = parent;</li><li>        </li><li class="alt">        <span class="keyword">if</span>(parent){<!-- --></li><li>            <span class="keyword">if</span>(be_in_left){<!-- --></li><li class="alt">                <span class="comment">//alert(val + "插到" + parent.value + "的左子树");</span></li><li>                parent.left = node;</li><li class="alt">            }<span class="keyword">else</span>{<!-- --></li><li>                <span class="comment">//alert(val + "插到" + parent.value + "的右子树");</span></li><li class="alt">                parent.right = node;</li><li>            }</li><li class="alt">        }</li><li>        <span class="keyword">else</span>{<!-- --></li><li class="alt">            <span class="keyword">this</span>.header = node;</li><li>        }</li><li class="alt">        </li><li>        <span class="comment">//调整颜色值或结构</span></li><li class="alt">        <span class="keyword">this</span>.adjustPath(node);</li><li>    }</li><li class="alt">    </li><li>    <span class="keyword">this</span>.compare = function(l, r)</li><li class="alt">    {<!-- --></li><li>        <span class="keyword">if</span>(parseInt(l.value) &gt; parseInt(r.value))</li><li class="alt">            <span class="keyword">return</span> <span class="keyword">true</span>;</li><li>        <span class="keyword">return</span> <span class="keyword">false</span>;</li><li class="alt">    }</li><li>    </li><li class="alt">    <span class="keyword">this</span>.adjustPath = function(node)</li><li>    {<!-- --></li><li class="alt">        var w = <span class="keyword">null</span>;</li><li>        var s = <span class="string">"node ="</span> + node + <span class="string">"; header = "</span> + <span class="keyword">this</span>.header + <span class="string">"node == header is "</span> + (node == <span class="keyword">this</span>.header);</li><li class="alt">        s +=  <span class="string">"/r/n node.value="</span> + node.value + <span class="string">", node.parent = "</span> + node.parent;</li><li>        <span class="keyword">if</span>(node.parent != <span class="keyword">null</span>)</li><li class="alt">            s+= <span class="string">"node.parent.color = "</span> + node.parent.color;</li><li>            </li><li class="alt">        <span class="comment">//alert(s);</span></li><li>       </li><li class="alt">        <span class="keyword">while</span>(node != <span class="keyword">this</span>.header &amp;&amp; node.parent.color == red)</li><li>        {<!-- --></li><li class="alt">            <span class="comment">//alert("going...");</span></li><li>                  <span class="comment">//如果为左子树</span></li><li class="alt">          <span class="keyword">if</span>(node.parent == node.Grandpa().left)</li><li>          {<!-- --></li><li class="alt">            <span class="comment">//alert("going...1a");</span></li><li>            w = node.Uncle();</li><li class="alt">            <span class="keyword">if</span>(w != <span class="keyword">null</span> &amp;&amp; red == w.color)   <span class="comment">//如果叔父结点为红色的，则只需将叔父和父结点置为黑色，祖父结点置为红色，然后祖父结点的父结点可能为红色，则违反了规则，需要继续调整</span></li><li>            {<!-- --></li><li class="alt">                <span class="comment">//alert("going...1b");</span></li><li>                w.color = black;</li><li class="alt">                node.parent.color = black;</li><li>                node.Grandpa().color = red;</li><li class="alt">                node = node.Grandpa();</li><li>            }</li><li class="alt">            <span class="keyword">else</span></li><li>            {<!-- --></li><li class="alt">                <span class="comment">//如果node为右子树</span></li><li>                <span class="keyword">if</span>(node == node.parent.right)</li><li class="alt">                {<!-- --></li><li>                    <span class="comment">//alert("going...1c");</span></li><li class="alt">                    node = node.parent;</li><li>                    </li><li class="alt">                    <span class="comment">//alert("before roate_left node = " + node.value + " node.parent = " + node.parent.value + " node.Grandpa().value = "+node.Grandpa().value)</span></li><li>                    <span class="keyword">this</span>.rotate_left(node);</li><li class="alt">                   <span class="comment">// alert("after roate_left node = " + node.value + " node.parent = " + node.parent.value + " node.Grandpa().value = "+node.Grandpa().value)</span></li><li>                }</li><li class="alt">                </li><li>                <span class="comment">//alert("going...1d");</span></li><li class="alt">                node.parent.color = black;</li><li>                node.Grandpa().color = red;</li><li class="alt">                <span class="comment">//alert("before roate_right node = " + node.value + " node.Grandpa() = " + node.Grandpa().value)</span></li><li>                <span class="keyword">this</span>.rotate_right(node.Grandpa());</li><li class="alt">                <span class="comment">//alert("after roate_left node = " + node.value + " node.parent = " + node.parent.value)</span></li><li>            }</li><li class="alt">          }</li><li>          <span class="keyword">else</span>      <span class="comment">//为右子树</span></li><li class="alt">          {<!-- --></li><li>            <span class="comment">//alert("going...2a");</span></li><li class="alt">            </li><li>            w = node.Uncle();</li><li class="alt">            </li><li>            <span class="keyword">if</span>(w != <span class="keyword">null</span> &amp;&amp; red == w.color)   <span class="comment">//如果叔父结点为红色的，则只需将叔父和父结点置为黑色，祖父结点置为红色，然后祖父结点的父结点可能为红色，则违反了规则，需要继续调整</span></li><li class="alt">            {<!-- --></li><li>                <span class="comment">//alert("going...2b");</span></li><li class="alt">                w.color = black;</li><li>                node.parent.color = black;</li><li class="alt">                node.Grandpa().color = red;</li><li>                node = node.Grandpa();</li><li class="alt">            }</li><li>            <span class="keyword">else</span></li><li class="alt">            {<!-- --></li><li>                <span class="comment">//如果node为右子树</span></li><li class="alt">                <span class="keyword">if</span>(node == node.parent.left)</li><li>                {<!-- --></li><li class="alt">                    <span class="comment">//alert("going...2c");</span></li><li>                    node = node.parent;</li><li class="alt">                    <span class="keyword">this</span>.rotate_right(node);</li><li>                }</li><li class="alt">                </li><li>                <span class="comment">//alert("going...2d");</span></li><li class="alt">                </li><li>                node.parent.color = black;</li><li class="alt">                node.Grandpa().color = red;</li><li>                <span class="keyword">this</span>.rotate_left(node.Grandpa());</li><li class="alt">            }</li><li>          }</li><li class="alt">        }</li><li>        </li><li class="alt">        <span class="keyword">this</span>.header.color = black;</li><li>    }</li><li class="alt">    </li><li>    <span class="comment">//输出</span></li><li class="alt">    <span class="keyword">this</span>.Traverse = function()</li><li>    {<!-- --></li><li class="alt">        <span class="keyword">this</span>.traverse_tree(<span class="keyword">this</span>.header);</li><li>    }</li><li class="alt">    </li><li>    <span class="keyword">this</span>.traverse_tree = function(node)</li><li class="alt">    {<!-- --></li><li>        <span class="keyword">if</span>(node == <span class="keyword">null</span>) <span class="keyword">return</span>;</li><li class="alt">        </li><li>        <span class="keyword">this</span>.traverse_tree(node.left);</li><li class="alt">        </li><li>        <span class="keyword">this</span>.output_string += node.value + <span class="string">" "</span>;</li><li class="alt">        </li><li>        <span class="keyword">this</span>.traverse_tree(node.right);</li><li class="alt">    }</li><li>    </li><li class="alt">    <span class="comment">//左旋转结点</span></li><li>    <span class="keyword">this</span>.rotate_left = function(node)</li><li class="alt">    {<!-- --></li><li>        var parent = node.parent;</li><li class="alt">        var right = node.right;</li><li>        </li><li class="alt">        <span class="comment">//alert("in rotate_left " + right);// + " right.left" + right.left + "right.right" + right.right);</span></li><li>        </li><li class="alt">        var rleft = right.left;</li><li>        </li><li class="alt">        </li><li>        </li><li class="alt">        <span class="comment">//将node子树作为右子树的左子树,并将右子树的左子树做为node的右子树</span></li><li>        right.left = node;</li><li class="alt">        node.parent = right;</li><li>        node.right = rleft;</li><li class="alt">        </li><li>        <span class="comment">//将右子树代替node</span></li><li class="alt">        <span class="keyword">if</span>(parent != <span class="keyword">null</span>)</li><li>        {<!-- --></li><li class="alt">            <span class="keyword">if</span>(node == parent.left)  <span class="comment">//如果原来是左子树</span></li><li>               parent.left = right;</li><li class="alt">            <span class="keyword">else</span></li><li>               parent.right = right;</li><li class="alt">        }</li><li>        right.parent = parent;</li><li class="alt">        </li><li>        <span class="comment">//将右子树的原左子树挂到原root下</span></li><li class="alt">        <span class="keyword">if</span>(rleft)</li><li>            rleft.parent = node;</li><li class="alt"><li>        <span class="keyword">if</span>(parent == <span class="keyword">null</span>)</li><li class="alt">            <span class="keyword">this</span>.header = right;</li><li>    }</li><li class="alt">    </li><li>    </li><li class="alt">    <span class="comment">//右旋转结点</span></li><li>    <span class="keyword">this</span>.rotate_right = function(node)</li><li class="alt">    {<!-- --></li><li>        var parent = node.parent;</li><li class="alt">        var left = node.left;</li><li>        <span class="comment">//alert("in rotate_right: node.value" + node.value + " left = " + left);// + " right.left" + right.left + "right.right" + right.right);</span></li><li class="alt">        var lright = left.right;</li><li>        </li><li class="alt">        <span class="comment">//将node挂到左子树的右子树</span></li><li>        left.right = node;</li><li class="alt">        node.parent = left;</li><li>        node.left = lright;</li><li class="alt"><li>        <span class="comment">//将左子树代替node</span></li><li class="alt">        <span class="keyword">if</span>(parent)</li><li>            <span class="keyword">if</span>(parent.left== node)</li><li class="alt">                parent.left = left;</li><li>            <span class="keyword">else</span></li><li class="alt">                parent.right = left;</li><li><li class="alt">        left.parent = parent;</li><li><li class="alt">        <span class="comment">//将左子树的原右子树挂到原root下</span></li><li>        <span class="keyword">if</span>(lright)</li><li class="alt">            lright.parent = node;</li><li><li class="alt">        <span class="keyword">if</span>(parent == <span class="keyword">null</span>)</li><li>                <span class="keyword">this</span>.header = left;</li><li class="alt">    }</li><li>  }</li><li class="alt">  <span class="comment">/***********************************************************/</span></li></ol> 
 <div> 
  <span class="Apple-style-span" style="color: rgb(0, 130, 0); line-height: 14px;">测试代码</span> 
 </div> 
 <div> 
  <div class="highlighter"> 
   <ol start="1" class="highlighter-c"><li>var tree = <span class="keyword">new</span> RB_Tree();</li><li class="alt"><li><span class="comment">//插入</span></li><li class="alt"><span class="keyword">for</span>(var i = 10; i &gt; 0; i--)</li><li>    tree.InsertNode(Math.ceil(Math.random() * 100));</li><li class="alt"><span class="comment">//结束</span></li><li><li class="alt">tree.Traverse();</li><li><li class="alt">alert(<span class="string">"output:"</span> + tree.output_string);</li></ol> 
  </div> 
  <span class="Apple-style-span" style="color: rgb(0, 130, 0); line-height: 14px;"><br></span> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/542d2ded9eeab21bd8f6e71cc97d2e8c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">h3c交换机的vlan控制策略路由设置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bd3fbb5230b8eea7f4857423df5fd156/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">华为C/C&#43;&#43;笔试题(2)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>