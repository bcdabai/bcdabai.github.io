<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>循环冗余校验码CRC原理与LFSR循环码编码器原理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="循环冗余校验码CRC原理与LFSR循环码编码器原理" />
<meta property="og:description" content="文章目录 1 产生原理1.1 CRC可检测的错误？1.2 CRC生成过程？1.3 接收过程？ 2 CRC 的计算2.1 手算2.1 在线计算器 3 Verilog 实现3.1 线性反馈移位寄存器（LFSR）循环码编码3.2 Verilog代码 1 产生原理 循环冗余校验码Cyclic Redundancy Check（CRC）
简介：在发送端根据要传送的K位二进制码序列，以一定的规则产生一个校验用的r位监督码（CRC码），附在信息后面组成n=k&#43;r位的码发出去。这种编码也叫（n,k）码。对于一个给定的（n,k）码，存在一个高次幂为r的多项式G(x)，根据多项式G(x)可以生成k位信息的校验码，G(x)叫做这个CRC码的生成多项式, 生成多项式的最高位和最低位必是1。
1.1 CRC可检测的错误？ 突发长度小于n-k&#43;1的突发错误；大部分突发长度等于n-k&#43;1的突发错误，其中不可检出的占2-(n-k-1)；大部分突发长度大于n-k&#43;1的突发错误，其中不可检出的占2-(n-k)；所有与许用码组 码距 小于dmin-1的错误及所有奇数个错误。 1.2 CRC生成过程？ 生成过程：发送信息C(x)左移r位，表示为C(x)×2r，C(x)右边空出的r位就是校验码的位置。通过C(x)×2r模2除以生成多项式G(x)得到的余数就是校验码。
1.3 接收过程？ 接收过程：
计算CRC比较。收到的二进制序列（信息码&#43;循环码）除以多项式，如果余数为0，则说明传输过程无错误发生。 2 CRC 的计算 以输入数据0x5a，G(x)=x^8&#43;x^2&#43;x&#43;1计算为例。
2.1 手算 首先了解模2运算：
模2加：0&#43;0=0，0&#43;1=1，1&#43;1=0 -&gt; a(模2加)b = a⊕b
模2减：0-0=0，0-1=1，1-0=1，1-1=0 -&gt; a(模2减)b = a⊕b
模2乘：0×0=0，0×1=0，1×1=1
模2除：0/1=0，1/1=1
根据生成过程：C(x)×2^r模2除以生成多项式G(x)得到的余数就是校验码。
G(x)对应：0x107
运算过程减法为模2减，即异或运算。
设余数为R[8:0]，注意的是，当 R[7] 为1，下一商位为1，当 R[7] 为0，下一商位为0。
其他规则与正常二进制除法一致。
可以看到每次运算的结果：
输入位商余数000_0000_0000110_0110_1111000_0110_1111110_1011_1011110_0111_0001000_0111_0001110_1100_0011010_1000_0001 最终的到的余数为：0x81，即我们需要的CRC码，0x5a编码之后为 0x5a|0x81。
2.1 在线计算器 CRC（循环冗余校验）在线计算" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2249ff87b6612c1a0ce7fd7ee41180b8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-24T09:50:58+08:00" />
<meta property="article:modified_time" content="2022-04-24T09:50:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">循环冗余校验码CRC原理与LFSR循环码编码器原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__4" rel="nofollow">1 产生原理</a></li><li><ul><li><a href="#11_CRC_11" rel="nofollow">1.1 CRC可检测的错误？</a></li><li><a href="#12_CRC_17" rel="nofollow">1.2 CRC生成过程？</a></li><li><a href="#13__20" rel="nofollow">1.3 接收过程？</a></li></ul> 
  </li><li><a href="#2_CRC__26" rel="nofollow">2 CRC 的计算</a></li><li><ul><li><a href="#21__29" rel="nofollow">2.1 手算</a></li><li><a href="#21__60" rel="nofollow">2.1 在线计算器</a></li></ul> 
  </li><li><a href="#3_Verilog__71" rel="nofollow">3 Verilog 实现</a></li><li><ul><li><a href="#31_LFSR_72" rel="nofollow">3.1 线性反馈移位寄存器（LFSR）循环码编码</a></li><li><a href="#32_Verilog_137" rel="nofollow">3.2 Verilog代码</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="1__4"></a>1 产生原理</h2> 
<p><strong>循环冗余校验码Cyclic Redundancy Check（CRC）</strong></p> 
<p>简介：在发送端根据要传送的K位二进制码序列，以一定的规则产生一个校验用的r位监督码（CRC码），附在信息后面组成n=k+r位的码发出去。这种编码也叫（n,k）码。对于一个给定的（n,k）码，存在一个高次幂为r的多项式G(x)，根据多项式G(x)可以生成k位信息的校验码，G(x)叫做这个CRC码的生成多项式, 生成多项式的最高位和最低位必是1。</p> 
<h3><a id="11_CRC_11"></a>1.1 CRC可检测的错误？</h3> 
<ul><li>突发长度小于n-k+1的突发错误；</li><li>大部分突发长度等于n-k+1的突发错误，其中不可检出的占2-(n-k-1)；</li><li>大部分突发长度大于n-k+1的突发错误，其中不可检出的占2-(n-k)；</li><li>所有与许用码组 码距 小于dmin-1的错误及所有奇数个错误。</li></ul> 
<h3><a id="12_CRC_17"></a>1.2 CRC生成过程？</h3> 
<p><strong>生成过程</strong>：发送信息C(x)左移r位，表示为C(x)×2<sup>r，C(x)右边空出的r位就是校验码的位置。通过C(x)×2</sup>r模2除以生成多项式G(x)得到的余数就是校验码。</p> 
<h3><a id="13__20"></a>1.3 接收过程？</h3> 
<p><strong>接收过程</strong>：</p> 
<ol><li>计算CRC比较。</li><li>收到的二进制序列（信息码+循环码）除以多项式，如果余数为0，则说明传输过程无错误发生。</li></ol> 
<hr> 
<h2><a id="2_CRC__26"></a>2 CRC 的计算</h2> 
<p>以输入数据0x5a，G(x)=x^8+x^2+x+1计算为例。</p> 
<h3><a id="21__29"></a>2.1 手算</h3> 
<p>首先了解模2运算：<br> 模2加：0+0=0，0+1=1，1+1=0 -&gt; a(模2加)b = a⊕b<br> 模2减：0-0=0，0-1=1，1-0=1，1-1=0 -&gt; a(模2减)b = a⊕b<br> 模2乘：0×0=0，0×1=0，1×1=1<br> 模2除：0/1=0，1/1=1</p> 
<p>根据生成过程：C(x)×2^r模2除以生成多项式G(x)得到的余数就是校验码。<br> G(x)对应：0x107</p> 
<p><img src="https://images2.imgbox.com/75/df/1KDL0PpP_o.png" alt="在这里插入图片描述"></p> 
<p>运算过程减法为模2减，即异或运算。<br> 设余数为R[8:0]，注意的是，当 R[7] 为1，下一商位为1，当 R[7] 为0，下一商位为0。<br> 其他规则与正常二进制除法一致。</p> 
<p>可以看到每次运算的结果：</p> 
<table><thead><tr><th>输入位</th><th>商</th><th>余数</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0_0000_0000</td></tr><tr><td>1</td><td>1</td><td>0_0110_1111</td></tr><tr><td>0</td><td>0</td><td>0_0110_1111</td></tr><tr><td>1</td><td>1</td><td>0_1011_1011</td></tr><tr><td>1</td><td>1</td><td>0_0111_0001</td></tr><tr><td>0</td><td>0</td><td>0_0111_0001</td></tr><tr><td>1</td><td>1</td><td>0_1100_0011</td></tr><tr><td>0</td><td>1</td><td>0_1000_0001</td></tr></tbody></table> 
<p>最终的到的余数为：0x81，即我们需要的CRC码，0x5a编码之后为 0x5a|0x81。</p> 
<h3><a id="21__60"></a>2.1 在线计算器</h3> 
<p><a href="http://www.ip33.com/crc.html" rel="nofollow">CRC（循环冗余校验）在线计算</a></p> 
<p><img src="https://images2.imgbox.com/af/f5/4QA6ODHe_o.png" alt="在这里插入图片描述"></p> 
<p>网页就有各参数的介绍。<br> 需要注意的是</p> 
<ul><li>POLY：生成项的简写，以16进制表示。忽略了最高位的"1"。</li><li>INIT：这是算法开始时寄存器（crc）的初始化预置值，十六进制表示。手动计算过程初始值是0x00。</li></ul> 
<h2><a id="3_Verilog__71"></a>3 Verilog 实现</h2> 
<h3><a id="31_LFSR_72"></a>3.1 线性反馈移位寄存器（LFSR）循环码编码</h3> 
<p>以上的计算过程很多文章都有介绍，但是都没有介绍为什么是题目中的结构？<br> 比如为什么 Verilog实现串行CRC-8，G(D)=D8+D2+D+1，电路结构如下？</p> 
<p><img src="https://images2.imgbox.com/e2/26/qogMs5UX_o.png" alt="在这里插入图片描述"></p> 
<p>其实这是线性反馈移位寄存器（LFSR）循环码编码。</p> 
<p>引用《数字通信（第四版）John G.Proakis著.张力军译》8.1.3 循环码的内容：</p> 
<p><img src="https://images2.imgbox.com/3a/53/sfeR5Ba9_o.png" alt="在这里插入图片描述"></p> 
<p>对于CRC-8进行信源0x5a的校验，移位运算过程为：<br> 信源数据的逐个输入等效于把0x5a（8’b01011010）移位后的 16’b0101_1010_0000_0000 拆分为：</p> 
<ol><li> <p>16’b0000_0000_0000_0000 模2除 9’b1_0000_0111 = 商0…余 R1:0000_0000</p> <pre><code>                             0
              ________________________
8’b1_0000_0111|16'b0000_0000_0000_0000
              /-   0000_0000_0 
                  ____________
              =R1: 0000_0000_0     
</code></pre> <p><img src="https://images2.imgbox.com/53/ab/mbHMguy3_o.png" alt="在这里插入图片描述"></p> <p>这一步比较直观。所以在这我们就知道为什么在线计算器需要设置初始值？嘿嘿</p> </li><li> <p>16’b0100_0000_0000_0000 模2除 9’b1_0000_0111 ⊕ R1 = 商1…余 R2: 0000_0111</p> <pre><code>                             01
              ________________________
8’b1_0000_0111|16'b0100_0000_0000_0000
              /-    100_0001_11   
               +R1: 0000_0000_0
                   ____________ 
               =R2: 0000_0011_1
                    
</code></pre> <p><img src="https://images2.imgbox.com/db/65/WxRLVJcR_o.png" alt="在这里插入图片描述"></p> <p>这一步值得注意的是生成多项式为0的位可以想象有一个C_(i-1) ⊕ 0，只不过与结果为C_(i-1)省略了，因为加减都是等效于异或，以此实现加上上一步的余数减去因式。</p> </li><li> <p>16’b0000_0000_0000_0000 模2除 9’b1_0000_0111 ⊕ R2 = 商0…余 R3:0000_1110:</p> </li><li> <p>16’b0001_0000_0000_0000 模2除 9’b1_0000_0111 ⊕ R3 = 商1…余 R4:0001_1011:</p> </li><li> <p>16’b0000_1000_0000_0000 模2除 9’b1_0000_0111 ⊕ R4 = 商1…余 R5:1000_1100:</p> </li><li> <p>16’b0000_0000_0000_0000 模2除 9’b1_0000_0111 ⊕ R5 = 商0…余 R6:0110_0010:</p> </li><li> <p>16’b0000_0010_0000_0000 模2除 9’b1_0000_0111 ⊕ R6 = 商1…余 R7:1100_0001:</p> </li><li> <p>16’b0000_0000_0000_0000 模2除 9’b1_0000_0111 ⊕ R7 = 商1…余 R8:1000_0001:</p> </li></ol> 
<table><thead><tr><th>输入</th><th>移位</th><th>移位寄存器值C7~C0</th></tr></thead><tbody><tr><td></td><td>0</td><td>0000_0000</td></tr><tr><td>0</td><td>0</td><td>0000_0000</td></tr><tr><td>1</td><td>1</td><td>0000_0111</td></tr><tr><td>0</td><td>0</td><td>0000_1110</td></tr><tr><td>1</td><td>1</td><td>0001_1011</td></tr><tr><td>1</td><td>1</td><td>1000_1100</td></tr><tr><td>0</td><td>0</td><td>0110_0010</td></tr><tr><td>1</td><td>1</td><td>1100_0001</td></tr><tr><td>0</td><td>1</td><td>1000_0001</td></tr></tbody></table> 
<p>可以看到，这其实就是对应我们模2除运算的过程。</p> 
<h3><a id="32_Verilog_137"></a>3.2 Verilog代码</h3> 
<p><a href="http://outputlogic.com/?page_id=321" rel="nofollow">OutputLogic</a>可以在线生成CRC代码，我们在生成的基础上改就好了。<br> <img src="https://images2.imgbox.com/34/60/q9umaGTr_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a5/86/NUbzATtY_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9047297e52f679749ed5a0154405495f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue 范围拖选插件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9ad070d34199de92a3f846b263e576c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SQLSERVER新增账户指定浏览表或视图权限配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>