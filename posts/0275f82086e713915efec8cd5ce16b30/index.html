<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NWERC 2013 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NWERC 2013" />
<meta property="og:description" content="B Battle for Silver 容易发现答案最多有4个点，枚举所有4个点一下的完全图。
#include&lt;bits/stdc&#43;&#43;.h&gt; using namespace std; #define For(i,n) for(int i=1;i&lt;=n;i&#43;&#43;) #define Fork(i,k,n) for(int i=k;i&lt;=n;i&#43;&#43;) #define ForkD(i,k,n) for(int i=n;i&gt;=k;i--) #define Rep(i,n) for(int i=0;i&lt;n;i&#43;&#43;) #define ForD(i,n) for(int i=n;i;i--) #define RepD(i,n) for(int i=n;i&gt;=0;i--) #define Forp(x) for(int p=pre[x];p;p=next[p]) #define Forpiter(x) for(int &amp;p=iter[x];p;p=next[p]) #define Lson (o&lt;&lt;1) #define Rson ((o&lt;&lt;1)&#43;1) #define MEM(a) memset(a,0,sizeof(a)); #define MEMI(a) memset(a,0x3f,sizeof(a)); #define MEMi(a) memset(a,128,sizeof(a)); #define MEMx(a,b) memset(a,b,sizeof(a)); #define INF (0x3f3f3f3f) #define F (1000000007) #define pb push_back #define mp make_pair #define fi first #define se second #define vi vector&lt;int&gt; #define pi pair&lt;int,int&gt; #define SI(a) ((a)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0275f82086e713915efec8cd5ce16b30/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-10-13T00:47:10+08:00" />
<meta property="article:modified_time" content="2017-10-13T00:47:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NWERC 2013</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="b-battle-for-silver">B Battle for Silver</h2> 
<p>容易发现答案最多有4个点，枚举所有4个点一下的完全图。</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-preprocessor">#include&lt;bits/stdc++.h&gt; </span>
<span class="hljs-keyword">using</span> namespace std;
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Fork(i,k,n) for(int i=k;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForkD(i,k,n) for(int i=n;i&gt;=k;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rep(i,n) for(int i=0;i&lt;n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForD(i,n) for(int i=n;i;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> RepD(i,n) for(int i=n;i&gt;=0;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forp(x) for(int p=pre[x];p;p=next[p])</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forpiter(x) for(int &amp;p=iter[x];p;p=next[p])  </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Lson (o&lt;&lt;1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rson ((o&lt;&lt;1)+1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEM(a) memset(a,0,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMI(a) memset(a,0x3f,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMi(a) memset(a,128,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMx(a,b) memset(a,b,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> INF (0x3f3f3f3f)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> F (1000000007)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pb push_back</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> mp make_pair</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fi first</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> se second</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> vi vector&lt;int&gt; </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pi pair&lt;int,int&gt;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> SI(a) ((a).size())</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Pr(kcase,ans) printf("Case #%d: %lld\n",kcase,ans);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi(a,n) For(i,n-1) cout&lt;&lt;a[i]&lt;&lt;' '; cout&lt;&lt;a[n]&lt;&lt;endl;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi2D(a,n,m) For(i,n) { \</span>
                        For(j,m-<span class="hljs-number">1</span>) cout&lt;&lt;a[i][j]&lt;&lt;<span class="hljs-string">' '</span>;\
                        cout&lt;&lt;a[i][m]&lt;&lt;endl; \
                        } 
<span class="hljs-preprocessor">#<span class="hljs-keyword">pragma</span> comment(linker, "/STACK:102400000,102400000")</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ALL(x) (x).begin(),(x).end()</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmax(a,b) a=max(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmin(a,b) a=min(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fr(x) freopen(x,"r",stdin)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fw(x) freopen(x,"w",stdout)</span>
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">double</span> ld;
typedef unsigned <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ull;
ll mul(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a*b)%F;}
ll add(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a+b)%F;}
ll sub(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> ((a-b)%F+F)%F;}
<span class="hljs-keyword">void</span> upd(ll &amp;a,ll b){a=(a%F+b%F)%F;}
inline <span class="hljs-keyword">int</span> read()
{
    <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>; <span class="hljs-keyword">char</span> ch=getchar();
    <span class="hljs-keyword">while</span>(!isdigit(ch)) {<!-- --><span class="hljs-keyword">if</span> (ch==<span class="hljs-string">'-'</span>) f=-<span class="hljs-number">1</span>; ch=getchar();}
    <span class="hljs-keyword">while</span>(isdigit(ch)) { x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">'0'</span>; ch=getchar();}
    <span class="hljs-keyword">return</span> x*f;
} 
<span class="hljs-keyword">int</span> S[<span class="hljs-number">1000</span>],n,m;
<span class="hljs-keyword">bool</span> b[<span class="hljs-number">500</span>][<span class="hljs-number">500</span>];
<span class="hljs-keyword">int</span> u[<span class="hljs-number">1000</span>],v[<span class="hljs-number">1000</span>];
<span class="hljs-keyword">int</span> main()
{
<span class="hljs-comment">//  freopen("B.in", "r", stdin);</span>
    <span class="hljs-keyword">while</span>(cin&gt;&gt;n&gt;&gt;m) {
        For(i,n) For(j,n) b[i][j]=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">int</span> ans=<span class="hljs-number">0</span>;
        For(i,n) S[i]=read(), gmax(ans,S[i])
        For(i,m) {
            u[i]=read(),v[i]=read();
            b[u[i]][v[i]]=b[v[i]][u[i]]=<span class="hljs-number">1</span>;
            gmax(ans,S[u[i]]+S[v[i]])
        }
        For(i,m) {
            For(j,n) <span class="hljs-keyword">if</span> (u[i]!=j &amp;&amp; v[i] != j &amp;&amp;b[u[i]][j] &amp;&amp; b[v[i]][j] ){
                gmax(ans,S[j] + S[u[i]] + S[v[i]] )
            }
            For(j,m) <span class="hljs-keyword">if</span> (u[i]!=u[j] &amp;&amp; v[i] != u[j] &amp;&amp; u[i]!=v[j] &amp;&amp; v[i] != v[j] ){
                <span class="hljs-keyword">if</span> (b[u[i]][v[j]] &amp;&amp;b[u[j]][v[i]] &amp;&amp; b[u[i]][u[j]]  &amp;&amp; b[v[i]][v[j]] ) {
                    gmax(ans,S[u[j]] + S[v[j]] + S[u[i]] + S[v[i]] )

                }
            }
        }
        cout&lt;&lt;ans&lt;&lt;endl;

    }   

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre> 
<h2 id="c-card-trick">C Card Trick</h2> 
<p>概率dp</p> 
<h2 id="g-grachten">G Grachten</h2> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-preprocessor">#include&lt;bits/stdc++.h&gt; </span>
<span class="hljs-keyword">using</span> namespace std;
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Fork(i,k,n) for(int i=k;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForkD(i,k,n) for(int i=n;i&gt;=k;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rep(i,n) for(int i=0;i&lt;n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForD(i,n) for(int i=n;i;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> RepD(i,n) for(int i=n;i&gt;=0;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forp(x) for(int p=pre[x];p;p=next[p])</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forpiter(x) for(int &amp;p=iter[x];p;p=next[p])  </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Lson (o&lt;&lt;1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rson ((o&lt;&lt;1)+1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEM(a) memset(a,0,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMI(a) memset(a,0x3f,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMi(a) memset(a,128,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMx(a,b) memset(a,b,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> INF (0x3f3f3f3f)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> F (1000000007)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pb push_back</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> mp make_pair</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fi first</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> se second</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> vi vector&lt;int&gt; </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pi pair&lt;int,int&gt;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> SI(a) ((a).size())</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Pr(kcase,ans) printf("Case #%d: %lld\n",kcase,ans);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi(a,n) For(i,n-1) cout&lt;&lt;a[i]&lt;&lt;' '; cout&lt;&lt;a[n]&lt;&lt;endl;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi2D(a,n,m) For(i,n) { \</span>
                        For(j,m-<span class="hljs-number">1</span>) cout&lt;&lt;a[i][j]&lt;&lt;<span class="hljs-string">' '</span>;\
                        cout&lt;&lt;a[i][m]&lt;&lt;endl; \
                        } 
<span class="hljs-preprocessor">#<span class="hljs-keyword">pragma</span> comment(linker, "/STACK:102400000,102400000")</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ALL(x) (x).begin(),(x).end()</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmax(a,b) a=max(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmin(a,b) a=min(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fr(x) freopen(x,"r",stdin)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fw(x) freopen(x,"w",stdout)</span>
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">double</span> ld;
typedef unsigned <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ull;
ll mul(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a*b)%F;}
ll add(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a+b)%F;}
ll sub(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> ((a-b)%F+F)%F;}
<span class="hljs-keyword">void</span> upd(ll &amp;a,ll b){a=(a%F+b%F)%F;}
inline <span class="hljs-keyword">int</span> read()
{
    <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>; <span class="hljs-keyword">char</span> ch=getchar();
    <span class="hljs-keyword">while</span>(!isdigit(ch)) {<!-- --><span class="hljs-keyword">if</span> (ch==<span class="hljs-string">'-'</span>) f=-<span class="hljs-number">1</span>; ch=getchar();}
    <span class="hljs-keyword">while</span>(isdigit(ch)) { x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">'0'</span>; ch=getchar();}
    <span class="hljs-keyword">return</span> x*f;
} 
ll gcd(ll a,ll b) {<!-- --><span class="hljs-keyword">if</span> (!b) <span class="hljs-keyword">return</span> a;<span class="hljs-keyword">return</span> gcd(b,a%b);}
<span class="hljs-keyword">int</span> main()
{
    ll x,y,z;
<span class="hljs-comment">//  freopen("G.in", "r", stdin);</span>
    <span class="hljs-keyword">while</span>(cin&gt;&gt;x&gt;&gt;y&gt;&gt;z) {
        ll p1=x*z;
        ll p2=z-y;
        ll g=gcd(p1,p2);
        p1/=g,p2/=g;
        p1-=x*p2;
        cout&lt;&lt;p1&lt;&lt;<span class="hljs-string">'/'</span>&lt;&lt;p2&lt;&lt;endl;
    }   

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre> 
<h2 id="i-infix-to-prefix">I Infix to Prefix</h2> 
<p>显然我们可以区间dp<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-7-Frame"> 
   
   <span class="math" id="MathJax-Span-46" style="width: 3.106em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.647em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.44em 1000em 2.819em -0.457em); top: -2.411em; left: 0.003em;"><span class="mrow" id="MathJax-Span-47"><span class="mi" id="MathJax-Span-48" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-49" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-50"><span style="display: inline-block; position: relative; width: 1.095em; height: 0px;"><span style="position: absolute; clip: rect(1.784em 1000em 2.589em -0.514em); top: -2.411em; left: 0.003em;"><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 2.417em;"></span></span><span style="position: absolute; top: -2.756em; left: 0.578em;"><span class="mn" id="MathJax-Span-52" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 2.417em;"></span></span></span></span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.417em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.403em; vertical-align: -0.33em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-7">O(n^3)</script>暴力转移 <br> 然后这样就可以过了。</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-preprocessor">#include&lt;bits/stdc++.h&gt; </span>
<span class="hljs-keyword">using</span> namespace std;
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Fork(i,k,n) for(int i=k;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForkD(i,k,n) for(int i=n;i&gt;=k;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rep(i,n) for(int i=0;i&lt;n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForD(i,n) for(int i=n;i;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> RepD(i,n) for(int i=n;i&gt;=0;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forp(x) for(int p=pre[x];p;p=next[p])</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forpiter(x) for(int &amp;p=iter[x];p;p=next[p])  </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Lson (o&lt;&lt;1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rson ((o&lt;&lt;1)+1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEM(a) memset(a,0,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMI(a) memset(a,0x3f,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMi(a) memset(a,128,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMx(a,b) memset(a,b,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> INF (100000000000000ll)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> F (1000000007)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pb push_back</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> mp make_pair</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fi first</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> se second</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> vi vector&lt;int&gt; </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pi pair&lt;int,int&gt;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> SI(a) ((a).size())</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Pr(kcase,ans) printf("Case #%d: %lld\n",kcase,ans);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi(a,n) For(i,n-1) cout&lt;&lt;a[i]&lt;&lt;' '; cout&lt;&lt;a[n]&lt;&lt;endl;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi2D(a,n,m) For(i,n) { \</span>
                        For(j,m-<span class="hljs-number">1</span>) cout&lt;&lt;a[i][j]&lt;&lt;<span class="hljs-string">' '</span>;\
                        cout&lt;&lt;a[i][m]&lt;&lt;endl; \
                        } 
<span class="hljs-preprocessor">#<span class="hljs-keyword">pragma</span> comment(linker, "/STACK:102400000,102400000")</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ALL(x) (x).begin(),(x).end()</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmax(a,b) a=max(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmin(a,b) a=min(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fr(x) freopen(x,"r",stdin)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fw(x) freopen(x,"w",stdout)</span>
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">double</span> ld;
typedef unsigned <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ull;
ll mul(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a*b)%F;}
ll add(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a+b)%F;}
ll sub(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> ((a-b)%F+F)%F;}
<span class="hljs-keyword">void</span> upd(ll &amp;a,ll b){a=(a%F+b%F)%F;}
inline <span class="hljs-keyword">int</span> read()
{
    <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>; <span class="hljs-keyword">char</span> ch=getchar();
    <span class="hljs-keyword">while</span>(!isdigit(ch)) {<!-- --><span class="hljs-keyword">if</span> (ch==<span class="hljs-string">'-'</span>) f=-<span class="hljs-number">1</span>; ch=getchar();}
    <span class="hljs-keyword">while</span>(isdigit(ch)) { x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">'0'</span>; ch=getchar();}
    <span class="hljs-keyword">return</span> x*f;
} 
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXN (1010)</span>
<span class="hljs-keyword">string</span> Filename=<span class="hljs-string">"I"</span>;
<span class="hljs-keyword">int</span> n;
<span class="hljs-keyword">char</span> s[MAXN];
ll dpmax[MAXN][MAXN],dpmin[MAXN][MAXN];
<span class="hljs-keyword">bool</span> vis[MAXN][MAXN],valid[MAXN][MAXN];
<span class="hljs-keyword">bool</span> calc(<span class="hljs-keyword">int</span> i,<span class="hljs-keyword">int</span> j) {
    <span class="hljs-keyword">if</span> (i&gt;j) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (vis[i][j]) <span class="hljs-keyword">return</span> valid[i][j];
    vis[i][j]=<span class="hljs-number">1</span>;
    dpmax[i][j]=-INF;
    dpmin[i][j]=INF;

    <span class="hljs-keyword">if</span> (s[i]==<span class="hljs-string">'+'</span>) {
        Fork(k,i+<span class="hljs-number">1</span>,j-<span class="hljs-number">1</span>) {
            <span class="hljs-keyword">if</span> (calc(i+<span class="hljs-number">1</span>,k) &amp;&amp; calc(k+<span class="hljs-number">1</span>,j)) {
                gmax(dpmax[i][j] , dpmax[i+<span class="hljs-number">1</span>][k] + dpmax[k+<span class="hljs-number">1</span>][j] );
                gmin(dpmin[i][j] , dpmin[i+<span class="hljs-number">1</span>][k] + dpmin[k+<span class="hljs-number">1</span>][j] );
                valid[i][j]=<span class="hljs-number">1</span>;
            }
        }
    }
    <span class="hljs-keyword">if</span> (s[i]==<span class="hljs-string">'-'</span>) {
        <span class="hljs-keyword">if</span> (calc(i+<span class="hljs-number">1</span>,j)) {
            gmax(dpmax[i][j] , - dpmin[i+<span class="hljs-number">1</span>][j]  );
            gmin(dpmin[i][j] , - dpmax[i+<span class="hljs-number">1</span>][j]  );
            valid[i][j]=<span class="hljs-number">1</span>;
        }
        Fork(k,i+<span class="hljs-number">1</span>,j-<span class="hljs-number">1</span>) {
            <span class="hljs-keyword">if</span> (calc(i+<span class="hljs-number">1</span>,k) &amp;&amp; calc(k+<span class="hljs-number">1</span>,j)) {
                gmax(dpmax[i][j] , dpmax[i+<span class="hljs-number">1</span>][k] - dpmin[k+<span class="hljs-number">1</span>][j] );
                gmin(dpmin[i][j] , dpmin[i+<span class="hljs-number">1</span>][k] - dpmax[k+<span class="hljs-number">1</span>][j] );
                valid[i][j]=<span class="hljs-number">1</span>;
            }
        }
    }
    <span class="hljs-keyword">return</span> valid[i][j];
}
<span class="hljs-keyword">int</span> main()
{
<span class="hljs-comment">//  freopen((Filename+".in").c_str(), "r", stdin);</span>
    <span class="hljs-keyword">while</span>(scanf(<span class="hljs-string">"%s"</span>,s+<span class="hljs-number">1</span>)==<span class="hljs-number">1</span>) {
        n=strlen(s+<span class="hljs-number">1</span>);
        MEM(vis) MEM(valid)
        For(i,n) <span class="hljs-keyword">if</span> (isdigit(s[i])) {
            ll p=<span class="hljs-number">0</span>;
            Fork(j,i,min(i+<span class="hljs-number">8</span>,n) ) {
                <span class="hljs-keyword">if</span> (!isdigit(s[j])) <span class="hljs-keyword">break</span>;
                p=p*<span class="hljs-number">10</span>+s[j]-<span class="hljs-string">'0'</span>;
                dpmax[i][j]=dpmin[i][j]=p;
                valid[i][j]=vis[i][j]=<span class="hljs-number">1</span>;
                <span class="hljs-keyword">if</span> (j==i &amp;&amp; s[i]==<span class="hljs-string">'0'</span>) <span class="hljs-keyword">break</span>;
            }
        }
        calc(<span class="hljs-number">1</span>,n);
        cout&lt;&lt;dpmin[<span class="hljs-number">1</span>][n]&lt;&lt;<span class="hljs-string">' '</span>&lt;&lt;dpmax[<span class="hljs-number">1</span>][n]&lt;&lt;endl;
    } 


    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre> 
<h2 id="j-jingle-balls">J Jingle Balls</h2> 
<p>考虑先把树清空在往里扔苹果，计算放同等数量苹果时和原来的非重合数个数（只考虑完空树中填苹果） <br> 根据限制条件，假设现在某个子树要放k个苹果，容易发现最多只有2种情况。 <br> 同时由于每次节点数都会变为原来的一半，最多只要计算<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame"> 
   
   <span class="math" id="MathJax-Span-1" style="width: 3.394em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.934em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.555em 1000em 2.819em -0.514em); top: -2.411em; left: 0.003em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Main;">log</span><span class="mo" id="MathJax-Span-4"></span><span class="mn" id="MathJax-Span-5" style="font-family: MathJax_Main; padding-left: 0.175em;">500</span></span><span style="display: inline-block; width: 0px; height: 2.417em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.203em; vertical-align: -0.33em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-1">\log 500</script> 层，就剩0个或1个苹果，可以特判跳出。 <br> 答案=往空树里填了几次苹果</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-preprocessor">#include&lt;bits/stdc++.h&gt; </span>
<span class="hljs-keyword">using</span> namespace std;
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> For(i,n) for(int i=1;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Fork(i,k,n) for(int i=k;i&lt;=n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForkD(i,k,n) for(int i=n;i&gt;=k;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rep(i,n) for(int i=0;i&lt;n;i++)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ForD(i,n) for(int i=n;i;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> RepD(i,n) for(int i=n;i&gt;=0;i--)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forp(x) for(int p=pre[x];p;p=next[p])</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Forpiter(x) for(int &amp;p=iter[x];p;p=next[p])  </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Lson (o&lt;&lt;1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Rson ((o&lt;&lt;1)+1)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEM(a) memset(a,0,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMI(a) memset(a,0x3f,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMi(a) memset(a,128,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MEMx(a,b) memset(a,b,sizeof(a));</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> INF (1000000)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> F (1000000007)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pb push_back</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> mp make_pair</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fi first</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> se second</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> vi vector&lt;int&gt; </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> pi pair&lt;int,int&gt;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> SI(a) ((a).size())</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> Pr(kcase,ans) printf("Case #%d: %lld\n",kcase,ans);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi(a,n) For(i,n-1) cout&lt;&lt;a[i]&lt;&lt;' '; cout&lt;&lt;a[n]&lt;&lt;endl;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> PRi2D(a,n,m) For(i,n) { \</span>
                        For(j,m-<span class="hljs-number">1</span>) cout&lt;&lt;a[i][j]&lt;&lt;<span class="hljs-string">' '</span>;\
                        cout&lt;&lt;a[i][m]&lt;&lt;endl; \
                        } 
<span class="hljs-preprocessor">#<span class="hljs-keyword">pragma</span> comment(linker, "/STACK:102400000,102400000")</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ALL(x) (x).begin(),(x).end()</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmax(a,b) a=max(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> gmin(a,b) a=min(a,b);</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fr(x) freopen(x,"r",stdin)</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> fw(x) freopen(x,"w",stdout)</span>
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;
typedef <span class="hljs-keyword">long</span> <span class="hljs-keyword">double</span> ld;
typedef unsigned <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ull;
ll mul(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a*b)%F;}
ll add(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> (a+b)%F;}
ll sub(ll a,ll b){<!-- --><span class="hljs-keyword">return</span> ((a-b)%F+F)%F;}
<span class="hljs-keyword">void</span> upd(ll &amp;a,ll b){a=(a%F+b%F)%F;}
inline <span class="hljs-keyword">int</span> read()
{
    <span class="hljs-keyword">int</span> x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>; <span class="hljs-keyword">char</span> ch=getchar();
    <span class="hljs-keyword">while</span>(!isdigit(ch)) {<!-- --><span class="hljs-keyword">if</span> (ch==<span class="hljs-string">'-'</span>) f=-<span class="hljs-number">1</span>; ch=getchar();}
    <span class="hljs-keyword">while</span>(isdigit(ch)) { x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">'0'</span>; ch=getchar();}
    <span class="hljs-keyword">return</span> x*f;
} 
<span class="hljs-keyword">string</span> Filename=<span class="hljs-string">"J"</span>;
<span class="hljs-keyword">char</span> s[<span class="hljs-number">10000</span>];
<span class="hljs-keyword">int</span> tot=<span class="hljs-number">0</span>,n;
<span class="hljs-keyword">int</span> pre[<span class="hljs-number">10000</span>];
<span class="hljs-keyword">int</span> a[<span class="hljs-number">10000</span>];
<span class="hljs-keyword">bool</span> fl=<span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> ans=<span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> f[<span class="hljs-number">5310</span>][<span class="hljs-number">2310</span>];
<span class="hljs-keyword">int</span> Abs(<span class="hljs-keyword">int</span> x){<!-- --><span class="hljs-keyword">return</span> max(-x,x);
}
<span class="hljs-keyword">bool</span> dfs(<span class="hljs-keyword">int</span> l,<span class="hljs-keyword">int</span> r,<span class="hljs-keyword">int</span> k) {
    <span class="hljs-keyword">if</span> (!k) {
        f[l][k]=<span class="hljs-number">0</span>; <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    ++l,--r;    
    <span class="hljs-keyword">if</span> (l==r) {
        <span class="hljs-keyword">int</span> pson=k;
        <span class="hljs-keyword">if</span> (k==<span class="hljs-number">1</span>) {
            f[l-<span class="hljs-number">1</span>][k]=<span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;       
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k==<span class="hljs-number">0</span>) {
            f[l-<span class="hljs-number">1</span>][k]=<span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;       
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (r==l-<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">int</span> pson=k;
        <span class="hljs-keyword">if</span> (k==<span class="hljs-number">0</span>) {
            f[l-<span class="hljs-number">1</span>][k]=<span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;       
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k==<span class="hljs-number">1</span>) {
            f[l-<span class="hljs-number">1</span>][k]=<span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;       
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">int</span> pl=pre[l],pr=pre[r];

    f[l-<span class="hljs-number">1</span>][k]=INF;
    <span class="hljs-keyword">if</span> (dfs(l,pl,k&gt;&gt;<span class="hljs-number">1</span>)&amp;&amp; dfs(pr,r,k-(k&gt;&gt;<span class="hljs-number">1</span>) )) {
        gmin(f[l-<span class="hljs-number">1</span>][k],f[l][k&gt;&gt;<span class="hljs-number">1</span>]+f[pr][k-(k&gt;&gt;<span class="hljs-number">1</span>)]);
    }
    <span class="hljs-keyword">int</span> side=k&gt;&gt;<span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (side!=k-side)
        <span class="hljs-keyword">if</span> (dfs(l,pl,k-side)&amp;&amp; dfs(pr,r,side) ) {
            gmin(f[l-<span class="hljs-number">1</span>][k],f[l][k-side]+f[pr][side]);
        }
    <span class="hljs-keyword">return</span> f[l-<span class="hljs-number">1</span>][k]!=INF;

}
stack&lt;<span class="hljs-keyword">int</span>&gt; st;
<span class="hljs-keyword">int</span> main()
{
<span class="hljs-comment">//  freopen((Filename+".in").c_str(), "r", stdin);</span>
    <span class="hljs-keyword">while</span>(scanf(<span class="hljs-string">"%s"</span>,s+<span class="hljs-number">1</span>)!=EOF) {
        n=strlen(s+<span class="hljs-number">1</span>); tot=<span class="hljs-number">0</span>;
        a[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;
        For(i,n) {
            a[i]=a[i-<span class="hljs-number">1</span>]+(s[i]==<span class="hljs-string">'B'</span>);
            <span class="hljs-keyword">if</span> (s[i]==<span class="hljs-string">'B'</span>) ++tot;
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s[i]==<span class="hljs-string">'('</span>) st.push(i);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s[i]==<span class="hljs-string">')'</span>){
                <span class="hljs-keyword">int</span> p=st.top();st.pop();
                pre[i]=p,pre[p]=i;
            }
        }
        fl=dfs(<span class="hljs-number">1</span>,n,tot);
        <span class="hljs-keyword">if</span> (!fl) puts(<span class="hljs-string">"impossible"</span>);
        <span class="hljs-keyword">else</span> {
            printf(<span class="hljs-string">"%d\n"</span>,f[<span class="hljs-number">1</span>][tot]);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/db385f0a5e19a3bcb63fa2341f89bab1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">记忆网络之Dynamic Memory Networks模型介绍及代码实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ff177b656d008a975e2b384f345ae940/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">向量组的线性相关性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>