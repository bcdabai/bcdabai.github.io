<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LVDS接口分类与数据格式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LVDS接口分类与数据格式" />
<meta property="og:description" content="转发路径：https://blog.csdn.net/a617996505/article/details/82386952
1.LVDS接口分类与数据格式
单路6it LVDS
这种接口电路中，采用单路方式传输，每个基色信号采用6位数据，共18位RGB数据，因此，也称18位或18bit LVDS接口。此，也称18位或18bit LVDS接口。 双路6bit LVDS
这种接口电路中，采用双路方式传输，每个基色信号采用6位数据，其中奇路数据为18位，偶路数据为18位，共36位RGB数据，因此，也称36位或36bit LVDS接口。
单路8bit LVDS
这种接口电路中，采用单路方式传输，每个基色信号采用8位数据，共24位RGB数据，因此，也称24位或24bit LVDS接口。
双路8bit LVDS
这种接口电路中，采用双路方式传输，每个基色信号采用8位数据，其中奇路数据为24位，偶路数据为24位，共48位RGB数据，因此，也称48位或48bit LVDS接口
现在市场上基本是8bit和6bit的屏幕，
LVDS接口电路中，将像素的并行数据转换为串行数据的格式主要有两种标准：VESA和JEIDA
1）VSEA标准格式如下图所示：
以上图片是单路的VESA标准信号，对一行数据输入则多2bit。
关于双路的信号格式这个可以举个例子：
以上图片是双路8bit 的VSEA标准信号。
2)JEIDA标准是由日本电子行业开发协会(JAPANELECTRONIC INDUSTRY DEVELOPMENT ASSOCIATION)制定的标准，其格式如下:
可以对比参照查看，如果像素为6bit RGB，则每个通道只需要最上面的3对数据线，其中的R9…R4, G9…G4, B9…B4 对应实际的R5…R0, G5…G0, B5…B0；同样，如果像素是 8 bit RGB,则每个通道只需要靠上面的4对数据线，其中的R9…R2, G9…G2, B9…B2 对应实际的R7…R0, G7…G0, B7…B0。
基本上每个屏幕的datesheet上都有相关信号图。
由这些信号图基本上可以判断： 1.单双路； 2.是多少bit RGB； 3.数据信号格式；
查看IMX6Q_LDB Control Register，内有相关设置：
1.单双路； 2.是多少bit RGB； 3.数据信号格式；
有设备树的内核可以直接修改设备树来操作寄存器，红色部分即可修改的三个参数:
&amp;ldb { status = &#34;okay&#34;;
dual-mode = &lt;1&gt;; //这里为单路LVDS，双路应设为 split-mode = &lt;1&gt;;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/967663f7ec6f6794a6be3d3c3cfb9b8b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-18T20:03:10+08:00" />
<meta property="article:modified_time" content="2020-11-18T20:03:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LVDS接口分类与数据格式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>转发路径：https://blog.csdn.net/a617996505/article/details/82386952</p> 
<p>1.LVDS接口分类与数据格式</p> 
<ol><li> <p>单路6it LVDS</p> </li></ol> 
<p>这种接口电路中，采用单路方式传输，每个基色信号采用6位数据，共18位RGB数据，因此，也称18位或18bit LVDS接口。此，也称18位或18bit LVDS接口。 </p> 
<p> </p> 
<ol><li> <p>双路6bit LVDS</p> </li></ol> 
<p>这种接口电路中，采用双路方式传输，每个基色信号采用6位数据，其中奇路数据为18位，偶路数据为18位，共36位RGB数据，因此，也称36位或36bit LVDS接口。</p> 
<p> </p> 
<ol><li> <p>单路8bit LVDS</p> </li></ol> 
<p>这种接口电路中，采用单路方式传输，每个基色信号采用8位数据，共24位RGB数据，因此，也称24位或24bit LVDS接口。</p> 
<p> </p> 
<ol><li> <p>双路8bit LVDS</p> </li></ol> 
<p>这种接口电路中，采用双路方式传输，每个基色信号采用8位数据，其中奇路数据为24位，偶路数据为24位，共48位RGB数据，因此，也称48位或48bit LVDS接口</p> 
<p> </p> 
<p>      现在市场上基本是8bit和6bit的屏幕，</p> 
<p> </p> 
<p>      LVDS接口电路中，将像素的并行数据转换为串行数据的格式主要有两种标准：VESA和JEIDA</p> 
<p>      1）VSEA标准格式如下图所示：</p> 
<p>       <img alt="" class="has" src="https://images2.imgbox.com/2e/79/e9xxT0X3_o.png" width="778" height="305"></p> 
<p>      </p> 
<p>      以上图片是单路的VESA标准信号，对一行数据输入则多2bit。</p> 
<p> </p> 
<p>      关于双路的信号格式这个可以举个例子：</p> 
<p>      <img alt="" class="has" src="https://images2.imgbox.com/9c/d3/SqQ9Qdm7_o.png" width="705" height="383"></p> 
<p>      以上图片是双路8bit 的VSEA标准信号。</p> 
<p>      2)JEIDA标准是由日本电子行业开发协会(JAPANELECTRONIC INDUSTRY DEVELOPMENT ASSOCIATION)制定的标准，其格式如下:</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/38/a9/KFR7dT1M_o.png" width="842" height="328"></p> 
<p>    </p> 
<p>可以对比参照查看，如果像素为6bit RGB，则每个通道只需要最上面的3对数据线，其中的R9…R4, G9…G4, B9…B4 对应实际的R5…R0, G5…G0, B5…B0；同样，如果像素是 8 bit RGB,则每个通道只需要靠上面的4对数据线，其中的R9…R2, G9…G2, B9…B2 对应实际的R7…R0, G7…G0, B7…B0。</p> 
<p>基本上每个屏幕的datesheet上都有相关信号图。</p> 
<p>由这些信号图基本上可以判断：       1.单双路； </p> 
<p> 2.是多少bit RGB； </p> 
<p>       3.数据信号格式；</p> 
<p> </p> 
<p> </p> 
<p>查看IMX6Q_LDB Control Register，内有相关设置：</p> 
<p>       1.单双路； </p> 
<p> 2.是多少bit RGB； </p> 
<p>       3.数据信号格式；</p> 
<p> </p> 
<p>有设备树的内核可以直接修改设备树来操作寄存器，红色部分即可修改的三个参数:</p> 
<p>&amp;ldb { 
  </p> 
<p>status = "okay";</p> 
<p>dual-mode = &lt;1&gt;; //这里为单路LVDS，双路应设为 split-mode = &lt;1&gt;;</p> 
<p>                 lvds-channel@0 { 
  </p> 
<p>                 fsl,data-mapping = "spwg"; //这里为数据格式（VESA），还有一种为JEIDA的标准</p> 
<p>                 fsl,data-width = &lt;24&gt;; //这里是数据位宽，即8bit RGB</p> 
<p>                 status = "okay";</p> 
<p>                               display-timings { 
  </p> 
<p>                               native-mode = &lt;&amp;timing0&gt;;</p> 
<p>                               timing0: hsd100pxn1 { 
  </p> 
<p>                               clock-frequency = &lt;65000000&gt;; //像素时钟</p> 
<p>                               hactive = &lt;1280&gt;; //横像素点数</p> 
<p>                               vactive = &lt;800&gt;; //竖像素点数</p> 
<p>                               hback-porch = &lt;10&gt;;  //水平后沿</p> 
<p>                               hfront-porch = &lt;30&gt;;  //水平前沿</p> 
<p>                               vback-porch = &lt;2&gt;; //垂直后沿</p> 
<p>                               vfront-porch = &lt;4&gt;; //垂直前沿</p> 
<p>                               hsync-len = &lt;10&gt;; //行同步脉宽</p> 
<p>                               vsync-len = &lt;6&gt;; //垂直同步脉宽</p> 
<p>                              };</p> 
<p>                 };</p> 
<p>};</p> 
<p>下面我们分析蓝色部分应该如何填写。</p> 
<p> </p> 
<h3><strong><strong><strong>2.屏幕参数的相关设置（蓝色部分）</strong></strong></strong></h3> 
<p>fb_videomode各个参数的意义</p> 
<p>各参数的抽象如下图所示：</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/a4/ef/nW6mHp5Y_o.png"></p> 
<p>关于fb_videomode各个成员的意义详解：</p> 
<div class="table-box"> 
 <table cellspacing="0" border="1"><tbody><tr><td> <p>名称</p> </td><td> <p>数据手册中的简称</p> </td><td> <p>中文名</p> </td><td> <p>意义</p> </td><td> <p>备注</p> <p>（简称或另名称）</p> </td></tr><tr><td> <p>name</p> </td><td> <p>No</p> </td><td> <p>名字</p> </td><td> <p>液晶屏名字（可选）</p> </td><td> <p>No</p> </td></tr><tr><td> <p>refresh</p> </td><td> <p>No</p> </td><td> <p>刷新频率</p> </td><td> <p>刷新频率（内核中很多例子都赋值为60）</p> </td><td> <p>No</p> </td></tr><tr><td> <p>xres</p> </td><td> <p>No</p> </td><td> <p>行宽</p> </td><td> <p>每行的像素个数</p> </td><td> <p>No</p> </td></tr><tr><td> <p>yres</p> </td><td> <p>No</p> </td><td> <p>屏幕高度</p> </td><td> <p>屏幕的行数</p> </td><td> <p>No</p> </td></tr><tr><td> <p>pixclock</p> </td><td> <p>No</p> </td><td> <p>像素时钟</p> </td><td> <p>每个像素时钟周期的长度，单位是皮秒（10的负12次方分之1秒）</p> </td><td> <p>No</p> </td></tr><tr><td> <p>left_margin</p> </td><td> <p>HBP</p> </td><td> <p>水平后沿</p> </td><td> <p>在每行或每列的象素数据开始输出时要插入的象素时钟周期数</p> </td><td> <p>No</p> </td></tr><tr><td> <p>right_margin</p> </td><td> <p>HFP</p> </td><td> <p>水平前沿</p> </td><td> <p>在每行或每列的象素结束到LCD 行时钟输出脉冲之间的象素时钟数</p> </td><td> <p>No</p> </td></tr><tr><td> <p>upper_margin</p> </td><td> <p>VBP</p> </td><td> <p>垂直后沿</p> </td><td> <p>在垂直同步周期之后帧开头时的无效行数</p> </td><td> <p>No</p> </td></tr><tr><td> <p>lower_margin</p> </td><td> <p>VFP</p> </td><td> <p>垂直前沿</p> </td><td> <p>本帧数据输出结束到下一帧垂直同步周期开始之前的无效行数</p> </td><td> <p>No</p> </td></tr><tr><td> <p>hsync_len</p> </td><td> <p>HPW</p> </td><td> <p>行同步脉宽</p> </td><td> <p>单位：像素时钟周期</p> </td><td> <p>HWH(HSYNC width)</p> </td></tr><tr><td> <p>vsync_len</p> </td><td> <p>VPW</p> </td><td> <p>垂直同步脉宽</p> </td><td> <p>单位：显示一行的时间th</p> </td><td> <p>HWH(HSYNC width)</p> </td></tr><tr><td> <p>sync</p> </td><td> <p>No</p> </td><td> <p>同步极性设置</p> </td><td> <p>可以根据需要设置FB_SYNC_HOR_HIGH_ACT(水平同步高电平有效)和FB_SYNC_VERT_HIGH_ACT(垂直同步高电平有效)</p> </td><td> <p>No</p> </td></tr><tr><td> <p>vmode</p> </td><td> <p>No</p> </td><td> <p>No</p> </td><td> <p>  在内核中的大多数示例都直接置为FB_VMODE_NONINTERLACED。interlaced的意思是交错［隔行］扫描，电视中使用2:1的交错率, 即每帧分两场,垂直扫描两次,一场扫描奇数行,另一场扫描偶数行。很显然LCD目前不是这种模式。</p> </td><td> <p>No</p> </td></tr><tr><td> <p>flag</p> </td><td> <p>No</p> </td><td> <p>No</p> </td><td> <p>目前没有看到用法</p> </td><td> <p>No</p> </td></tr></tbody></table> 
</div> 
<p> </p> 
<p>由上图可得：</p> 
<p>水平总周期 = left_margin + right_margin + hsync_len</p> 
<p>垂直总周期 = upper_margin + lower_margin + vsync_len</p> 
<p>下面主要以16BPP的TFT屏作为例子。有的LCD会给出参数列表，比如下图，可以很清楚的在红框中找到需要的参数，取“type”典型值即可。但是有的LCD并没有直接给出这样的列表，设置某些参数没有给出，这需要通过时序图来确定。</p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/24/10/Ho51b6Mg_o.png"></p> 
<p>下面以天马的3.5寸TFT液晶屏 TM035KDH03为例进行讲解。</p> 
<p>参数计算：</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/7a/6d/uth9fe38_o.png" width="838" height="201"></p> 
<p>可以看到LCD时钟是28M，所以pixclock=1000000/28 ，在设备树上是clock-frequency = &lt;28000000&gt;;</p> 
<p>行同步脉冲宽度是一个时钟周期，所以，hsync_len=1</p> 
<p>场同步脉冲的宽度是一个行周期，所以，vsync_len = 1</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/6d/3a/LuWmQm47_o.png" width="845" height="195"></p> 
<p>上图是一帧图像的显示时序图。的上图显示，up_margin = 13-1=12,， yres= 240,</p> 
<p>整个场周期为263，所以lower_margin= 263-13-240 = 10</p> 
<p>同时看到，列同步信号高电平有效，行同步信号也是高电平有效。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/ec/b6/VpP9EZlo_o.png" width="850" height="417"></p> 
<p>上图是一行的时序图。</p> 
<p>可以看到，left_margin = 69， xres = 320， right_margin = 408 -320 - 70 = 18</p> 
<p>数据在上升沿有效，输出使能是高电平有效。</p> 
<p>总计一下上面的参数，得到如下结果：</p> 
<p>static struct clcd_panel conn_lcd_panel = {  </p> 
<p>.mode = {  </p> 
<p>.name = "QVGA TM035KDH03",  </p> 
<p>.refresh = 60,  </p> 
<p>.xres = 240,  </p> 
<p>.yres = 320,  </p> 
<p>.pixclock = 35714,  </p> 
<p>.left_margin = 69,  </p> 
<p>.right_margin = 18,  </p> 
<p>.upper_margin = 12,  </p> 
<p>.lower_margin = 10,  </p> 
<p>.hsync_len = 1,  </p> 
<p>.vsync_len = 1,  </p> 
<p>.sync = FB_SYNC_HOR_HIGH_ACT|FB_SYNC_VERT_HIGH_ACT,  </p> 
<p>.vmode = FB_VMODE_NONINTERLACED,  </p> 
<p>},  </p> 
<p>}</p> 
<p>所以用设备树可以这样写：</p> 
<p>              clock-frequency = &lt;28000000&gt;;         //像素时钟</p> 
<p>                            hactive = &lt;240&gt;;                              //横像素点数</p> 
<p>                            vactive = &lt;320&gt;;                              //竖像素点数</p> 
<p>                            hback-porch = &lt;18&gt;;                           //水平后沿</p> 
<p>                            hfront-porch = &lt;69&gt;;                           //水平前沿</p> 
<p>                            vback-porch = &lt;10&gt;;                           //垂直后沿</p> 
<p>                            vfront-porch = &lt;12&gt;;                           //垂直前沿</p> 
<p>                            hsync-len = &lt;1&gt;;                              //行同步脉宽</p> 
<p>                            vsync-len = &lt;1&gt;;                               //垂直同步脉宽</p> 
<h3>3.调试过程中的常见问题</h3> 
<p>    1.背光</p> 
<p>       调试屏幕首先要把背光点亮，没有点亮背光屏幕什么都显示不了，根据规格书将背光点亮，可以寻求硬件工程师帮忙</p> 
<p>    2.屏幕上星星点点<br>   在调试的时候，我们会发现屏幕上有莫名其妙的星星点点，一般这种情况下，我们首先要看看VGH和VGL电压是否处于datasheet所描述的范围之 内。如果属于标准范围之内，但星星点点依旧，很有可能就是时序问题。这时候不妨在代码中变更采样的时序（比如上升沿采样改为下降沿采样）。如果无法在代码 中更改，也可以在clk信号线加个100R电阻，也可能解决该问题。</p> 
<p>     3.显示抖动</p> 
<p>                在确认VPW,VBP,VFP,HPW,HBP,HFP的设置已经符合LCD规格要求后，如果屏幕的显示还在抖动的话，不妨将输出的时钟信号频率降低，有可能解决该问题。                  </p> 
<p>               还存在一种现象，LVDS的信号线电压高出规格书一点也会出现。曾经有过LVDS信号电压为3.3V的接到5V导致屏幕显示出现细小电波抖动。</p> 
<p>    4.显示花屏</p> 
<p>               出现花屏现象，理论上是RGB没有调好导致的。如颜色位数， 颜色顺序导致的。</p> 
<p>               检查一下规格书的颜色格式部分， 是否将RGB888格式设置成了666，或者顺序是RBG，BGR之类的都有可能。</p> 
<p>           </p> 
<p> </p> 
<div> 
 <div></div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bda2bd785197454536833a9c4b9fba73/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【uniapp】uniapp之websocket心跳重连机制</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae563e59b99d01a909405de587489619/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Centos8安装docker-ce的时候errordman-1.6.4-10.module_el8.2.0&#43;305&#43;5e198a41.x86_64 requires runc ＞= 1.0.0-57</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>