<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于springboot layui前后端分离的宿舍管理系统 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于springboot layui前后端分离的宿舍管理系统" />
<meta property="og:description" content="系统以MySQL 为数据库，在Spring Boot &#43; SpringMVC &#43; MyBatis &#43; Layui框架下基于B/S架构设计开发而成。系统中的用户分为三类，分别为学生、宿管、后勤。这三类用户拥有不同的操作权限。
系统中用到的技术包括Axios, Echarts, POI。特色功能有人性化的宿舍分配，可视化的账单管理、房间管理、记账管理，Excel文件上传后数据导入数据库等等。
运行教程 1. 准备工作 1.1 开发环境 JDK 1.8
MySQL 8.0 （替代品：MySQL 5.7）
1.2 开发工具 WebStorm 2020.3（替代品：Visual Studio Code）
IntelliJ IDEA 2020.3（替代品：Eclipse【界面、图标太丑，不推荐】）
DataGrip 2020.3（替代品：Navicat）
Google Chrome 90.0
2. 打开项目文件并运行 本系统将前后端开发分离：分别在IntelliJ IDEA（后端）与WebStrom（前端）中进行开发。
因此，在此用IntelliJ IDEA 2020.3与WebStrom 2020.3进行演示。
2.1 IntelliJ IDEA 点击Open，选择源文件中的dormitory文件并打开。
演示视频：
基于springboot layui前后端分离的宿舍管理系统源码
package com.silk.controller; import com.github.pagehelper.PageInfo; import com.silk.entity.Intention; import com.silk.entity.User; import com.silk.service.IntentionService; import com.silk.service.RoomService; import com.silk.service.UserService; import com.silk.utils.Result; import org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2ab79b446b5b59d1c189aa381cdfdd4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-20T10:22:09+08:00" />
<meta property="article:modified_time" content="2022-12-20T10:22:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于springboot layui前后端分离的宿舍管理系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p style="margin-left:.0001pt;text-align:justify;">系统以MySQL 为数据库，在Spring Boot + SpringMVC + MyBatis + Layui框架下基于B/S架构设计开发而成。系统中的用户分为三类，分别为学生、宿管、后勤。这三类用户拥有不同的操作权限。</p> 
<p style="margin-left:.0001pt;text-align:justify;">系统中用到的技术包括Axios, Echarts, POI。特色功能有人性化的宿舍分配，可视化的账单管理、房间管理、记账管理，Excel文件上传后数据导入数据库等等。</p> 
<p></p> 
<p><img alt="" height="168" src="https://images2.imgbox.com/40/9c/cFVXSADU_o.png" width="554"></p> 
<h2 style="text-align:justify;"><strong><strong><strong>运行教程</strong></strong></strong></h2> 
<h3 style="text-align:justify;"><strong><strong><strong>1. 准备工作</strong></strong></strong></h3> 
<h4 style="text-align:justify;"><strong><strong><strong>1.1 开发环境</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">    JDK 1.8</p> 
<p style="margin-left:.0001pt;text-align:justify;">    MySQL 8.0 （替代品：MySQL 5.7）</p> 
<h4 style="text-align:justify;"><strong><strong><strong>1.2 开发工具</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">    WebStorm 2020.3（替代品：Visual Studio Code）</p> 
<p style="margin-left:.0001pt;text-align:justify;">    IntelliJ IDEA 2020.3（替代品：Eclipse【界面、图标太丑，不推荐】）</p> 
<p style="margin-left:.0001pt;text-align:justify;">    DataGrip 2020.3（替代品：Navicat）</p> 
<p style="margin-left:.0001pt;text-align:justify;">    Google Chrome 90.0</p> 
<h3 style="text-align:justify;"><strong><strong><strong>2</strong></strong><strong><strong>. 打开项目文件并运行</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">本系统将前后端开发分离：分别在IntelliJ IDEA（后端）与WebStrom（前端）中进行开发。</p> 
<p style="margin-left:.0001pt;text-align:justify;">因此，在此用IntelliJ IDEA 2020.3与WebStrom 2020.3进行演示。</p> 
<h4 style="text-align:justify;"><strong><strong><strong>2</strong></strong><strong><strong>.1 IntelliJ IDEA</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">点击Open，选择源文件中的dormitory文件并打开。</p> 
<p> </p> 
<p></p> 
<p>演示视频：</p> 
<div class="csdn-video-box"> 
 <iframe id="IXCURCHP-1671502742937" frameborder="0" src="https://player.bilibili.com/player.html?aid=723880504" allowfullscreen="true" data-mediaembed="bilibili"></iframe> 
 <p>基于springboot layui前后端分离的宿舍管理系统源码</p> 
</div> 
<p> </p> 
<p></p> 
<p></p> 
<p><img alt="" height="707" src="https://images2.imgbox.com/91/de/QLvrxt71_o.png" width="1200"></p> 
<p> <img alt="" height="826" src="https://images2.imgbox.com/3b/ea/3PamzkEb_o.png" width="1200"></p> 
<p> <img alt="" height="825" src="https://images2.imgbox.com/53/39/OJ0o7QcU_o.png" width="1200"></p> 
<p><img alt="" height="852" src="https://images2.imgbox.com/c6/f4/PpF81NtB_o.png" width="1200"> </p> 
<p> <img alt="" height="934" src="https://images2.imgbox.com/f3/0f/h88nnVgm_o.png" width="1200"><img alt="" height="939" src="https://images2.imgbox.com/73/cd/elku98O9_o.png" width="1200"></p> 
<p> <img alt="" height="935" src="https://images2.imgbox.com/46/62/nKkSaLBc_o.png" width="1200"><img alt="" height="936" src="https://images2.imgbox.com/81/e6/naenVtPK_o.png" width="1200"></p> 
<p> <img alt="" height="942" src="https://images2.imgbox.com/0c/f8/ry6jiQZq_o.png" width="1200"><img alt="" height="937" src="https://images2.imgbox.com/ae/7c/x5ZtZk3H_o.png" width="1200"><img alt="" height="943" src="https://images2.imgbox.com/e8/c0/xLRqcWb2_o.png" width="1200"></p> 
<p> </p> 
<pre><code class="hljs">package com.silk.controller;

import com.github.pagehelper.PageInfo;
import com.silk.entity.Intention;
import com.silk.entity.User;
import com.silk.service.IntentionService;
import com.silk.service.RoomService;
import com.silk.service.UserService;
import com.silk.utils.Result;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

/**
 * @author LindaSilk
 * @date 2023年3月19日, 周五
 */
@RestController
@RequestMapping("/intention")
public class IntentionController {

    @Autowired
    private IntentionService intentionService;
    @Autowired
    private RoomService roomService;
    @Autowired
    private UserService userService;

    @PostMapping("create")
    public Result create(@RequestBody Intention intention){
        int flag = intentionService.create(intention);
        if(flag&gt;0){
            return Result.ok();
        }else{
            return Result.fail();
        }
    }

    @GetMapping("delete")
    public Result delete(String ids){
        int flag = intentionService.delete(ids);
        if(flag&gt;0){
            return Result.ok();
        }else{
            return Result.fail();
        }
    }

    @PostMapping("update")
    public Result update(@RequestBody Intention intention){
        int flag = intentionService.update(intention);
        if(flag&gt;0){
            return Result.ok();
        }else{
            return Result.fail();
        }
    }

    @GetMapping("detail")
    public Intention detail(Integer id){
        return intentionService.detail(id);
    }

    @PostMapping("query")
    public Map&lt;String,Object&gt; query(@RequestBody  Intention intention){
        PageInfo&lt;Intention&gt; pageInfo = intentionService.query(intention);
        return Result.ok(pageInfo);
    }



    @PostMapping("upload")
    @ResponseBody
    public Result excelImport(@RequestParam(value = "file") MultipartFile file){
        String fileName = file.getOriginalFilename();
        System.out.println(fileName);
        int result = 0;

        try {
            result = intentionService.addToDatabase(file);
        } catch (Exception e){
            e.printStackTrace();
        }

        List&lt;Integer&gt; maleAndFemaleAmountList = new ArrayList&lt;&gt;();

        maleAndFemaleAmountList.add(intentionService.queryFemaleAmount());
        maleAndFemaleAmountList.add(intentionService.queryMaleAmount());

        System.out.println("意向文件中男女生数量分别为：" + maleAndFemaleAmountList);

        if (result &gt; 0){
            System.out.println("Upload result:");
            System.out.println(result);
            return Result.ok(maleAndFemaleAmountList);
        }else {
            return Result.fail("害！导入失败了...");
        }
    }


    @GetMapping("query_male_and_female_amount")
    public Result queryMaleAndFemaleAmount(){
        List&lt;Integer&gt; maleAndFemaleAmountList = new ArrayList&lt;&gt;();

        maleAndFemaleAmountList.add(intentionService.queryMaleAmount());
        maleAndFemaleAmountList.add(intentionService.queryFemaleAmount());

        System.out.println("意向文件中男女生数量分别为：" + maleAndFemaleAmountList);

        return Result.ok(maleAndFemaleAmountList);
    }


    @PostMapping("arrange")
    public Result arrange(@RequestBody  Intention intention){
        System.out.println("Intention: " + intention);
        System.out.println("MaleBuilding: " + intention.getMaleBuilding());
        System.out.println("FemaleBuilding: " + intention.getFemaleBuilding());

        int maleBuildingId = intention.getMaleBuilding();           // 在页面上选择的男生宿舍楼ID
        int femaleBuildingId = intention.getFemaleBuilding();       // 在页面上选择的女生宿舍楼ID

        List&lt;Integer&gt; maleRoomList = roomService.queryEachStuRoomId(maleBuildingId);            // 有空床位的男生房间ID列表
        List&lt;Integer&gt; maleEachRoomFreeBedList = new ArrayList&lt;&gt;();                              // 空床位数量
        List&lt;Integer&gt; femaleRoomList = roomService.queryEachStuRoomId(femaleBuildingId);        // 有空床位的女生房间ID列表
        List&lt;Integer&gt; femaleEachRoomFreeBedList = new ArrayList&lt;&gt;();                            // 空床位数量

        List&lt;User&gt; maleList = new ArrayList&lt;&gt;();
        List&lt;User&gt; femaleList = new ArrayList&lt;&gt;();


        // 遍历房间列表，将与房间对应的空床位数量添加至List中
        for (int roomId : maleRoomList) {
            int roomFreeBedAmount = roomService.queryEachStuRoomFreeBedAmount(roomId);
            maleEachRoomFreeBedList.add(roomFreeBedAmount);
        }
        for (int roomId : femaleRoomList) {
            int roomFreeBedAmount = roomService.queryEachStuRoomFreeBedAmount(roomId);
            femaleEachRoomFreeBedList.add(roomFreeBedAmount);
        }


        /**
         * femaleRoomList: 女生房间列表
         * femaleEachRoomFreeBedList: 女生房间空位数量列表
         */
        Intention femaleIntention = new Intention();
        femaleIntention.setGender(0);                                                       // 设置性别为女
        PageInfo&lt;Intention&gt; femalePageInfo = intentionService.query(femaleIntention);       // 查询所有女生意向

        int femaleCount = 0;
        for (int i = 0; i &lt; femaleRoomList.size(); i++) {
            if (femaleEachRoomFreeBedList.get(i) != 0){
                List&lt;Intention&gt; list0 = null;
                if (femaleCount &gt; femalePageInfo.getList().size() || femaleCount + femaleEachRoomFreeBedList.get(i) &gt; femalePageInfo.getList().size()){
                    list0 = femalePageInfo.getList().subList(femaleCount, femalePageInfo.getList().size());
                    for (Intention entity: list0) {
                        int userId = entity.getId();                // 意向表ID-&gt;用户学号
                        String userPwd = "123456";                  // 设置默认密码
                        String userName = entity.getStuName();      // 意向表学生姓名-&gt;用户名
                        int gender = entity.getGender();            // 意向表学生性别-&gt;用户性别
                        String email = userId + "@silku.edu.cn";    // 学生ID-&gt;用户邮箱
                        int roomId = femaleRoomList.get(i);         // 房间号
                        int userType = 0;                           // 用户类型置0

                        User tempFemaleUser = new User(userId, userPwd, userName, gender, email, roomId, userType);
                        femaleList.add(tempFemaleUser);
                        System.out.println("--------");
                        System.out.println(femaleRoomList.get(i) + "寝室");
                        System.out.println("学生：" + list0);
                        System.out.println("加上一共：" + (femaleCount + list0.size()));
                    }
                    break;
                }else {
                    list0 = femalePageInfo.getList().subList(femaleCount, femaleEachRoomFreeBedList.get(i) + femaleCount);
                    for (Intention entity: list0) {
                        int userId = entity.getId();                // 意向表ID-&gt;用户学号
                        String userPwd = "123456";                  // 设置默认密码
                        String userName = entity.getStuName();      // 意向表学生姓名-&gt;用户名
                        int gender = entity.getGender();            // 意向表学生性别-&gt;用户性别
                        String email = userId + "@silku.edu.cn";    // 学生ID-&gt;用户邮箱
                        int roomId = femaleRoomList.get(i);         // 房间号
                        int userType = 0;                           // 用户类型置0

                        User tempFemaleUser = new User(userId, userPwd, userName, gender, email, roomId, userType);
                        femaleList.add(tempFemaleUser);
                    }
                }
                System.out.println("--------");
                System.out.println(femaleRoomList.get(i) + "寝室");
                System.out.println("学生：" + list0);
                femaleCount += femaleEachRoomFreeBedList.get(i);
                System.out.println("加上共：" + femaleCount);
            }
        }


        /**
         * maleRoomList: 男生房间列表
         * maleEachRoomFreeBedList: 男生房间空位数量列表
         */
        Intention maleIntention = new Intention();
        maleIntention.setGender(1);                                                 // 设置性别为男
        PageInfo&lt;Intention&gt; pageInfo = intentionService.query(maleIntention);       // 查询所有男生意向

        int count = 0;
        for (int i = 0; i &lt; maleRoomList.size(); i++) {
            if (maleEachRoomFreeBedList.get(i) != 0){
                List&lt;Intention&gt; list = null;
                if (count &gt; pageInfo.getList().size() || count + maleEachRoomFreeBedList.get(i) &gt; pageInfo.getList().size()){
                    list = pageInfo.getList().subList(count, pageInfo.getList().size());
                    break;
                }else {
                    list = pageInfo.getList().subList(count,maleEachRoomFreeBedList.get(i) + count);
                    for (Intention entity:list) {
                        int userId = entity.getId();                // 意向表ID-&gt;用户学号
                        String userPwd = "123456";                  // 设置默认密码
                        String userName = entity.getStuName();      // 意向表学生姓名-&gt;用户名
                        int gender = entity.getGender();            // 意向表学生性别-&gt;用户性别
                        String email = userId + "@silku.edu.cn";    // 学生ID-&gt;用户邮箱
                        int roomId = maleRoomList.get(i);           // 房间号
                        int userType = 0;                           // 用户类型置0

                        User tempUser = new User(userId, userPwd, userName, gender, email, roomId, userType);
                        maleList.add(tempUser);
                    }
                }

                System.out.println("--------");
                System.out.println(maleRoomList.get(i) + "寝室");
                System.out.println("学生：" + list);
                count += maleEachRoomFreeBedList.get(i);
                System.out.println("加上共：" + count);
            }
        }

        System.out.println("maleList大小：" + maleList.size());
        System.out.println("femaleList大小：" + femaleList.size());
        System.out.println("新结果：" + pageInfo.getList());        // 男生结果
        System.out.println("新结果：" + femalePageInfo.getList());  // 女生结果


        int maleToUserResult = 0;           // 分配宿舍等信息后成为系统用户的男生数量
        int femaleToUserResult = 0;         // 分配宿舍等信息后成为系统用户的女生数量
        for (User user: maleList){
            userService.create(user);
            maleToUserResult ++;
        }
        for (User user: femaleList){
            userService.create(user);
            femaleToUserResult ++;
        }


        System.out.println("共插入" + maleToUserResult + "条男生用户数据");
        System.out.println("共插入" + femaleToUserResult + "条女生用户数据");
        System.out.println("男生宿舍房间id列表：" + maleRoomList);
        System.out.println("男生宿舍房间空床位数量列表：" + maleEachRoomFreeBedList);
        System.out.println("女生宿舍房间id列表：" + femaleRoomList);
        System.out.println("女生宿舍房间空床位数量列表：" + femaleEachRoomFreeBedList);

        return Result.ok();
    }
}
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/98af3d2dab55f9fbfb95622e590e1672/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DeepSpeed使用指南(简略版)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/85993a7b7e0c65be5465b8cd83e20c31/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Zabbix 安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>