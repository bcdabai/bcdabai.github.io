<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>platfomio 编译 esp32 项目报 flash size 小的问题解决 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="platfomio 编译 esp32 项目报 flash size 小的问题解决" />
<meta property="og:description" content="esp32 板已经是16M的flash , 分区表用到8.1 M 理论是没问题的。
Partitions defined in &#39;mypartition.csv&#39; occupy 8.1MB of flash (8454144 bytes) which does not fit in configured flash size 4MB. Change the flash size in menuconfig under the &#39;Serial Flasher Config&#39; menu.
然而，使用 pio run -t menconfig ,配置 flash 也为16Mb 无效！
理解：编绎时没接入板，与板的flash大小没关。修改配置无效，是因为编绎程序首先认为板是默认4M大小的。而pio run -t menconfig 只是修改配置项，只能在编绎成功时才能将配置一起并入目标码，可能这个编译顺序错误或提示错误。所以就要了解从哪里读到的是4M大小。plaftfromio 新建项目时，要选择板，其实每种板子都有它的配置文件。plaftfromio 先读取的是配置文件。由与是选的板子是esp32 dev module ,所以 配置文件是 esp32_dev.json。
解决： 修改 板的配置文件，这里是 esp32_dev.json.windows 一般位于{userProfile}\.platformio\platforms\espressif32\boards 目录下。环境重装时记得这里要改过来，否则项目又会报错~。
&#34;upload&#34;: {
&#34;flash_size&#34;: &#34;16MB&#34;,
&#34;maximum_ram_size&#34;: 327680," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3dbf6d20d409dd4d9443df6e9d2a1e3c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-23T16:03:27+08:00" />
<meta property="article:modified_time" content="2021-11-23T16:03:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">platfomio 编译 esp32 项目报 flash size 小的问题解决</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p>esp32 板已经是16M的flash , 分区表用到8.1 M 理论是没问题的。</p> 
<p></p> 
<p></p> 
<p><span style="color:#fe2c24;">Partitions defined in 'mypartition.csv' occupy 8.1MB of flash (8454144 bytes) which does not fit in configured flash size 4MB. Change the flash size in menuconfig under the 'Serial Flasher Config' menu.</span></p> 
<p></p> 
<p></p> 
<p>然而，使用  pio run -t  menconfig ,配置 flash 也为16Mb  无效！</p> 
<p>理解：编绎时没接入板，与板的flash大小没关。修改配置无效，是因为编绎程序首先认为板是默认4M大小的。而pio run -t  menconfig 只是修改配置项，只能在编绎成功时才能将配置一起并入目标码，<span style="color:#fe2c24;"><strong>可能这个编译顺序错误或提示错误</strong></span>。所以就要了解从哪里读到的是4M大小。plaftfromio 新建项目时，要选择板，其实每种板子都有它的配置文件。plaftfromio 先读取的是配置文件。由与是选的板子是esp32 dev module ,所以 配置文件是  esp32_dev.json。</p> 
<p>解决： 修改  板的配置文件，这里是 esp32_dev.json.windows 一般位于<span style="color:#fe2c24;">{userProfile}</span>\.platformio\platforms\espressif32\boards 目录下。环境重装时记得这里要改过来，否则项目又会报错~。</p> 
<p>"upload": {<!-- --></p> 
<p>    "flash_size": "16MB",</p> 
<p>    "maximum_ram_size": 327680,</p> 
<p>    "maximum_size": 4194304,</p> 
<p>    "require_upload_port": true,</p> 
<p>    "speed": 460800</p> 
<p>  },</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dbdadf689b5246fec4e046a092e5ceb6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Shell 字符串转数组的三种方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a2551a223ca2e1c17e77d5b6313f11ca/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java接口的作用和意义是什么？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>