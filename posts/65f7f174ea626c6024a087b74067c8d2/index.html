<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu20 安装px4、mavros、QGroundControl - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu20 安装px4、mavros、QGroundControl" />
<meta property="og:description" content="一、安装PX4
jjm2是我的主文件夹名，可以根据自己的主文件夹名修改
下载PX4
git clone https://github.com/PX4/PX4-Autopilot.git --recursive 由于网速原因，我用的是别人已经下载好的压缩包。
链接：https://pan.baidu.com/s/1TRwHxNYsfs7p14mdmt0jeA 提取码：wstc 里面有PX4-Autopilot压缩包，libawt_xawt.so，libjawt.so和已经下载好的QGroundControl.AppImage
运行bash
由于网速原因可能导致一些python安装包没装上，可以自己先提前安装
pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple pandas pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple pymavlink pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple cerberus echo &#34;export PATH=/home/主目录/.local/bin/:$PATH&#34; &gt;&gt; ~/.bashrc 接着运行bash
bash ./PX4-Autopilot/Tools/setup/ubuntu.sh 运行完之后，请重启ubuntu
sudo reboot now 对PX4进行一下简单的测试（在PX4-Autopilot路径下执行）
首先安装一下ant，否则没法运行，同时因20.04的缺少动态库libawt_xawt.so无法被Java8给调用，我的解决办法是去18.04把18.04的相同路径下的动态库libawt_xawt.so移动到20.04的/usr/lib/jvm/java-11-openjdk-amd64/lib/路径中
sudo apt-get install ant sudo apt install xmlstarlet sudo pip3 install pyquaternion sudo cp /home/jjm2/libawt_xawt.so /usr/lib/jvm/java-11-openjdk-amd64/lib/libawt_xawt.so sudo cp /home/jjm2/libjawt.so /usr/lib/jvm/java-11-openjdk-amd64/lib/libjawt.so sudo apt-get install gcc-arm-none-eabi make px4_sitl jmavsim make px4_fmu-v3_default 注意：如果此处使用的是虚拟机的话需要注意扩大分配的内存最小需分配4G 在 make px4_sitl gazebo之前，可以安装一下gazebo的 模型" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/65f7f174ea626c6024a087b74067c8d2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-01T13:58:23+08:00" />
<meta property="article:modified_time" content="2024-01-01T13:58:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu20 安装px4、mavros、QGroundControl</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>一、安装PX4</strong></p> 
<p>jjm2是我的主文件夹名，可以根据自己的主文件夹名修改</p> 
<ol><li style="margin-left:1.4em;"> <p>下载PX4</p> </li></ol> 
<div> 
 <div> 
  <div> 
   <img alt="" src="https://images2.imgbox.com/d8/c3/j18vxllN_o.png" width="856"> 
  </div> 
 </div> 
</div> 
<pre class="kdocs-shell"><code class="language-shell">git clone https://github.com/PX4/PX4-Autopilot.git --recursive</code></pre> 
<p>由于网速原因，我用的是别人已经下载好的压缩包。</p> 
<p>链接：https://pan.baidu.com/s/1TRwHxNYsfs7p14mdmt0jeA <br> 提取码：wstc </p> 
<p><strong>里面有PX4-Autopilot压缩包，libawt_xawt.so，libjawt.so和已经下载好的QGroundControl.AppImage</strong></p> 
<ol><li style="margin-left:1.4em;"> <p>运行bash</p> </li></ol> 
<p>由于网速原因可能导致一些python安装包没装上，可以自己先提前安装</p> 
<pre class="kdocs-shell"><code class="language-shell">pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple pandas
pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple pymavlink
pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple cerberus
echo "export PATH=/home/主目录/.local/bin/:$PATH" &gt;&gt; ~/.bashrc</code></pre> 
<p>接着运行bash</p> 
<pre class="kdocs-shell"><code class="language-shell">bash ./PX4-Autopilot/Tools/setup/ubuntu.sh</code></pre> 
<p>运行完之后，请重启ubuntu</p> 
<pre class="kdocs-shell"><code class="language-shell">sudo reboot now</code></pre> 
<ol><li style="margin-left:1.4em;"> <p>对PX4进行一下简单的测试（在PX4-Autopilot路径下执行）</p> </li></ol> 
<p>首先安装一下ant，否则没法运行，同时因20.04的缺少动态库libawt_xawt.so无法被Java8给调用，我的解决办法是去18.04把18.04的相同路径下的动态库libawt_xawt.so移动到20.04的/usr/lib/jvm/java-11-openjdk-amd64/lib/路径中</p> 
<pre class="kdocs-shell"><code class="language-shell">sudo apt-get install ant
sudo apt install xmlstarlet
sudo pip3 install pyquaternion
sudo cp /home/jjm2/libawt_xawt.so /usr/lib/jvm/java-11-openjdk-amd64/lib/libawt_xawt.so
sudo cp /home/jjm2/libjawt.so /usr/lib/jvm/java-11-openjdk-amd64/lib/libjawt.so
sudo apt-get install gcc-arm-none-eabi</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">make px4_sitl jmavsim</code></pre> 
<div> 
 <div> 
  <div> 
   <img alt="" src="https://images2.imgbox.com/f7/20/frRzYI81_o.png" width="1200"> 
  </div> 
 </div> 
</div> 
<pre class="kdocs-shell"><code class="language-shell">make px4_fmu-v3_default</code></pre> 
<div> 
 <div> 
  <div> 
   <img alt="" src="https://images2.imgbox.com/d7/6b/fvbrvd6c_o.png" width="724"> 
  </div> 
 </div> 
</div> 
<h3 style="text-align:left;"><strong>注意：如果此处使用的是虚拟机的话需要注意扩大分配的内存最小需分配4G</strong></h3> 
<p>在 make px4_sitl gazebo之前，可以安装一下gazebo的 模型</p> 
<pre class="kdocs-shell"><code class="language-shell">git clone https://github.com/osrf/gazebo_models</code></pre> 
<p>然后把下载好的gazebo_models放到.gazebo里，重命名成model</p> 
<pre class="kdocs-shell"><code class="language-shell">echo "export SVGA_VGPU10=0" &gt;&gt; ~/.bashrc</code></pre> 
<p>重启一下</p> 
<pre class="kdocs-shell"><code class="language-shell">make px4_sitl gazebo</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">source ~/Work/PX4-Autopilot/Tools/setup_gazebo.bash ~/Work/PX4-Autopilot/ ~/Work/PX4-Autopilot/build/px4_sitl_default
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:~/Work/PX4-Autopilot
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:~/Work/PX4-Autopilot/Tools/sitl_gazebo
#这是我自己的路径，可以根据实际情况修改</code></pre> 
<div> 
 <div> 
  <div> 
   <img alt="" src="https://images2.imgbox.com/59/ac/ypIrKmQc_o.png" width="1099"> 
  </div> 
 </div> 
</div> 
<p style="text-align:left;"><strong>二、安装MAVROS</strong></p> 
<pre class="kdocs-shell"><code class="language-shell">mkdir -p catkin_ws/src</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">cd catkin_ws</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">catkin init</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">wstool init src</code></pre> 
<p>如果提示没有wstool，可以按照提示上的步骤安装</p> 
<pre class="kdocs-shell"><code class="language-shell">sudo apt-get install python3-catkin-tools python3-rosinstall-generator -y
#sudo apt-get install ros-melodic-mavros ros-melodic-mavros-extras</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">rosinstall_generator --rosdistro noetic mavlink | tee /tmp/mavros.rosinstall</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">rosinstall_generator --upstream-development mavros | tee -a /tmp/mavros.rosinstall</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">wstool merge -t src /tmp/mavros.rosinstall</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">wstool update -t src -j4</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">rosdepc update
rosdepc install --from-paths src --ignore-src -y</code></pre> 
<p>用rosdepc的时候，你得确保你用的是鱼香ROS的提供的ROS安装方法，否则是没有rosdepc的</p> 
<pre class="kdocs-shell"><code class="language-shell">sudo ./src/mavros/mavros/scripts/install_geographiclib_datasets.sh</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">catkin build</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">source devel/setup.bash</code></pre> 
<p><strong>三、安装QGroundControl</strong></p> 
<pre class="kdocs-shell"><code class="language-shell">sudo usermod -a -G dialout $USER
sudo apt-get remove modemmanager -y
sudo apt install gstreamer1.0-plugins-bad gstreamer1.0-libav gstreamer1.0-gl -y</code></pre> 
<p>然后下载<a class="kdocs-link" href="https://s3-us-west-2.amazonaws.com/qgroundcontrol/latest/QGroundControl.AppImage" rel="nofollow" title="QGroundControl.AppImage.">QGroundControl.AppImage.</a></p> 
<p>下载完成后，进入到QGroundControl.AppImage相应的目录，修改QGroundControl.AppImage权限：</p> 
<pre class="kdocs-shell"><code class="language-shell">chmod +x ./QGroundControl.AppImage</code></pre> 
<p>然后双击QGroundControl.AppImage或者在终端切换到QGroundControl.AppImage目录后，输入以下命令即可打开地面站：</p> 
<pre class="kdocs-shell"><code class="language-shell">./QGroundControl.AppImage</code></pre> 
<p><strong>四、测试 </strong></p> 
<p>可以提前安装一些python包</p> 
<pre class="kdocs-shell"><code class="language-shell">sudo apt-get install python3-mpltoolkits.basemap
pip3 install px4tools</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">cd PX4-Autopilot/
make px4_sitl_default jmavsim</code></pre> 
<pre class="kdocs-shell"><code class="language-shell">roslaunch mavros px4.launch fcu_url:="udp://:14540@127.0.0.1:14557" </code></pre> 
<pre class="kdocs-shell"><code class="language-shell">cd /home/jjm2/PX4-Autopilot/integrationtests/python_src/px4_it/mavros
python3 mission_test.py MC_mission_box.plan</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9664208f01124cecf74e39d8eab75929/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">白箱模型、灰箱模型、黑箱模型的定义</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8f530a4251318749d01f3f85263b51ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2024最新AI创作系统ChatGPT源码，支持Midjourney绘画，GPT语音对话&#43;ChatFile文档对话总结&#43;DALL-E3文生图&#43;GPT-4识图理解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>