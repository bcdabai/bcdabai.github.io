<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linuxæ­å»ºMySQLä¸»ä»å¤åˆ¶ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linuxæ­å»ºMySQLä¸»ä»å¤åˆ¶" />
<meta property="og:description" content="1.å…ˆæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦è£…æœ‰mysql rpm -qa | grep mysql å¦‚æœ‰ï¼Œéœ€è¦å¸è½½
rpm -e mysqlXXX.rpm
2.ä¸‹è½½mysqlçš„repoæº cd /software
wget -c http://repo.mysql.com/mysql57-community-release-el7-9.noarch.rpm å¦‚æœæç¤ºæ²¡æœ‰wget æ‰§è¡ŒÂ yum -y install wgetå®‰è£…
3.å®‰è£…mysql rpmåŒ… rpm -ivh mysql57-community-release-el7-9.noarch.rpm
å®‰è£…äº†è¿™ä¸ªï¼Œyumå°±å¯ä»¥åœ¨çº¿å®‰è£…mysqläº†ï¼Œè¿™é‡Œç‰ˆæœ¬æ˜¯mysql5.7.36
4.å®‰è£…MySQL yum install mysql-server
5.é‡ç½®MySQLå¯†ç  5.1é¦–å…ˆï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ vi /etc/my.cnf
åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ ä¸€è¡Œè·³è¿‡æƒé™éªŒè¯
skip-grant-tables
ç„¶åé‡å¯mysql
service mysqld restart
æ¥ç€å¯ä»¥ç”¨rootå…å¯†ç™»å½•
mysql -uroot -p
ç›´æ¥å›è½¦ä¸ç”¨è¾“å…¥å¯†ç 
5.2ä¿®æ”¹å¯†ç  åˆ‡æ¢mysqlåº“
use mysql;
æ‰§è¡Œä¿®æ”¹å¯†ç å‘½ä»¤
update user set authentication_string=password(&#39;123456&#39;) where user=&#39;root&#39; and Host=&#39;localhost&#39;;
æ‰§è¡Œå…è®¸ä»»æ„ip
UPDATE mysql.user SET Host=&#39;%&#39; where user=&#39;root&#39; AND Host=&#39;localhost&#39; LIMIT 1;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9421a1ea7d241a21700319003e16a6f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-30T17:47:26+08:00" />
<meta property="article:modified_time" content="2021-11-30T17:47:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linuxæ­å»ºMySQLä¸»ä»å¤åˆ¶</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>1.å…ˆæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦è£…æœ‰mysql</h3> 
<pre><code>rpm -qa | grep mysql</code></pre> 
<p>å¦‚æœ‰ï¼Œéœ€è¦å¸è½½</p> 
<p>rpm -e mysqlXXX.rpm</p> 
<h3>2.ä¸‹è½½mysqlçš„repoæº</h3> 
<p>cd /software</p> 
<pre><code>wget -c http://repo.mysql.com/mysql57-community-release-el7-9.noarch.rpm</code></pre> 
<p>å¦‚æœæç¤ºæ²¡æœ‰wget æ‰§è¡ŒÂ yum -y install wgetå®‰è£…</p> 
<h3>3.å®‰è£…mysql rpmåŒ…</h3> 
<p>rpm -ivh mysql57-community-release-el7-9.noarch.rpm</p> 
<p>å®‰è£…äº†è¿™ä¸ªï¼Œyumå°±å¯ä»¥åœ¨çº¿å®‰è£…mysqläº†ï¼Œè¿™é‡Œç‰ˆæœ¬æ˜¯mysql5.7.36</p> 
<h3>4.å®‰è£…MySQL</h3> 
<p>yum install mysql-server</p> 
<p><img alt="" height="258" src="https://images2.imgbox.com/12/35/uFCM1NBU_o.png" width="1200"></p> 
<h3><strong>Â 5.é‡ç½®MySQLå¯†ç </strong></h3> 
<h4>5.1é¦–å…ˆï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶</h4> 
<p>vi /etc/my.cnf</p> 
<p>åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ ä¸€è¡Œè·³è¿‡æƒé™éªŒè¯</p> 
<p>skip-grant-tables</p> 
<p>ç„¶åé‡å¯mysql</p> 
<p>service mysqld restart</p> 
<p>æ¥ç€å¯ä»¥ç”¨rootå…å¯†ç™»å½•</p> 
<p>mysql -uroot -p</p> 
<p>ç›´æ¥å›è½¦ä¸ç”¨è¾“å…¥å¯†ç </p> 
<h4>5.2ä¿®æ”¹å¯†ç </h4> 
<p>åˆ‡æ¢mysqlåº“</p> 
<p>Â  Â  use mysql;</p> 
<p>æ‰§è¡Œä¿®æ”¹å¯†ç å‘½ä»¤</p> 
<p>Â  Â  update user set authentication_string=password('123456') where user='root' and Host='localhost';</p> 
<p>æ‰§è¡Œå…è®¸ä»»æ„ip</p> 
<p>Â  Â  UPDATE mysql.user SET Host='%' where user='root' AND Host='localhost' LIMIT 1;</p> 
<p>åˆ·æ–°æƒé™</p> 
<p>Â  Â  flush privileges;</p> 
<p>é€€å‡ºmysql</p> 
<p>Â  Â  quit</p> 
<p>ç„¶åæŠŠmy.cnfè·³è¿‡æƒé™é‚£ä¸€è¡Œæ³¨é‡Šæˆ–åˆ é™¤ï¼Œé‡å¯mysql</p> 
<p>è¿™æ ·å¯†ç å°±æ”¹å¥½äº†</p> 
<p><img alt="" height="509" src="https://images2.imgbox.com/75/8c/I2bNfor5_o.png" width="702"></p> 
<p>Â MySQLä¸»ä»å¤åˆ¶é…ç½®</p> 
<p>æŒ‰ä»¥ä¸Šæ­¥éª¤é…ç½®2å°æœåŠ¡å™¨ï¼ˆè™šæ‹Ÿæœºä¹Ÿå¯ä»¥å¤åˆ¶ï¼Œæ³¨æ„server_idä¸è¦ç›¸åŒï¼‰ï¼Œéƒ½é…ç½®å¥½mysqlå¯†ç ï¼Œå¹¶å¯ä»¥ä½¿ç”¨åï¼Œæˆ‘ä»¬å¼€å§‹é…ç½®ä¸»ä»</p> 
<h3><strong>6.ä¸»æœåŠ¡å™¨èŠ‚ç‚¹ï¼šss1</strong></h3> 
<h4><strong>6.1ä¿®æ”¹my.cnf,å¢åŠ ä»¥ä¸‹å†…å®¹</strong></h4> 
<pre><code>#skip-grant-tables
###æœåŠ¡å™¨idæ ‡è¯†
server_id=1
###å¼€å¯æ—¥å¿—æ–‡ä»¶
log-bin=mysql-bin
</code></pre> 
<p><img alt="" height="463" src="https://images2.imgbox.com/e3/15/va54i8Ny_o.png" width="739"></p> 
<p>Â é‡å¯Â service mysqld restart</p> 
<h4>6.2è¿›å…¥mysqléªŒè¯ï¼Œçœ‹åˆ°idæ­£å¸¸å°±okäº†</h4> 
<pre><code>[root@ss1 software]# mysql -uroot -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.7.36-log MySQL Community Server (GPL)

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; show variables like '%server_id%';
+----------------+-------+
| Variable_name  | Value |
+----------------+-------+
| server_id      | 1     |
| server_id_bits | 32    |
+----------------+-------+
2 rows in set (0.00 sec)

mysql&gt; show master status;
+------------------+----------+--------------+------------------+-------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+------------------+----------+--------------+------------------+-------------------+
| mysql-bin.000001 |      154 |              |                  |                   |
+------------------+----------+--------------+------------------+-------------------+
1 row in set (0.00 sec)
</code></pre> 
<h3>7.ä»æœåŠ¡å™¨èŠ‚ç‚¹</h3> 
<h4>7.1åŒæ ·éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶my.cnf</h4> 
<p>vi /etc/my.cnf ,å¢åŠ ä»¥ä¸‹å†…å®¹ï¼Œè¿™é‡Œæ³¨æ„æˆ‘ä»¬éœ€è¦é…ç½®éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°</p> 
<pre><code>###ä»æœåŠ¡å™¨server_id
server_id=2
###æ—¥å¿—æ–‡ä»¶åŒæ­¥æ–¹å¼
log-bin=mysql-bin
###éœ€è¦åŒæ­¥æ•°æ®åº“ï¼Œå¦‚æœæœ‰å¤šä¸ªé€—å·åˆ†éš”
binlog_do_db=test,hivetest
</code></pre> 
<p>æ”¹å®Œé…ç½®åï¼Œè®°å¾—é‡å¯mysql</p> 
<h4>7.2é‡å¯åå†æ¬¡è¿›å…¥mysqlå‘½ä»¤è¡Œ</h4> 
<p>show variables like '%server_id%';//éªŒè¯é…ç½®</p> 
<pre><code>mysql&gt; show variables like '%server_id%';
+----------------+-------+
| Variable_name  | Value |
+----------------+-------+
| server_id      | 2     |
| server_id_bits | 32    |
+----------------+-------+
2 rows in set (0.01 sec)
</code></pre> 
<p>å¦‚æœéªŒè¯é…ç½®æ²¡é—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è®¾ç½®masteråŒæ­¥äº†ï¼Œæ³¨æ„masterçš„åœ°å€ï¼Œå¯†ç ä»¥åŠlogæ–‡ä»¶åå’Œèµ·å§‹ä½ç½®ä¿¡æ¯ï¼Œåœ¨ä¸Šé¢å·²ç»æŸ¥è¯¢è¿‡äº†ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p> 
<pre><code>change master to master_host='ss1',master_user='root',master_password='123456',Â master_log_file='mysql-bin.000001',master_log_pos=154;</code></pre> 
<p>Â ç„¶åæ‰§è¡Œstart slaveå¼€å§‹åŒæ­¥ï¼ŒåŒæ­¥åå¯ä»¥æŸ¥çœ‹ä¸‹æ•°æ®åº“åˆ—è¡¨</p> 
<p><img alt="" height="242" src="https://images2.imgbox.com/90/41/OOHeRqdU_o.png" width="593"></p> 
<p>Â å¯ä»¥çœ‹åˆ°æ•°æ®åº“testå·²ç»ä»masteråŒæ­¥è¿‡æ¥äº†ï¼Œè¿™é‡Œçš„testæ˜¯æˆ‘åœ¨åŒæ­¥å‰å»ºå¥½çš„ï¼Œé‡Œé¢æ²¡æœ‰è¡¨</p> 
<h3>8.æ¼”ç¤ºæ•°æ®åŒæ­¥</h3> 
<p>æˆ‘ä»¬åœ¨ss1ä¸»åº“æ–°å»ºä¸€å¼ è¡¨students</p> 
<pre><code>CREATE TABLE `students` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(15) NOT NULL,
  `age` tinyint(3) unsigned DEFAULT '0',
  `high` decimal(5,2) DEFAULT '0.00',
  `gender` enum('ç”·','å¥³','ä¸­æ€§','ä¿å¯†') DEFAULT 'ä¿å¯†',
  `cls_id` int(10) unsigned NOT NULL,
  `is_delete` bit(1) DEFAULT b'0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;</code></pre> 
<p>ç„¶ååˆ‡æ¢åˆ°ä»åº“çš„shellç•Œé¢</p> 
<p><img alt="" height="207" src="https://images2.imgbox.com/76/4a/cVeReRH2_o.png" width="453"></p> 
<p>å¯ä»¥æŸ¥åˆ°è¡¨å·²ç»æœ‰äº†ï¼Œé‡Œé¢æ²¡æœ‰æ•°æ®</p> 
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°ä¸»åº“shellç•Œé¢ï¼Œæ’å…¥ä¸€æ¡æ•°æ®åˆ°studentsè¡¨</p> 
<pre><code>INSERT INTO students (name, age, high, gender, cls_id, is_delete) VALUES('1130', 30, 180.00, 'ä¿å¯†', 0, b'0');
</code></pre> 
<p><img alt="" height="65" src="https://images2.imgbox.com/38/dc/eSQI7K6R_o.png" width="433"></p> 
<p>ç„¶åå†å›åˆ°ä»åº“ç•Œé¢ï¼Œæ‰§è¡ŒæŸ¥è¯¢ï¼Œå¯ä»¥çœ‹åˆ°åˆšæ‰ä¸»åº“çš„æ•°æ®äº†</p> 
<p><img alt="" height="97" src="https://images2.imgbox.com/0c/f3/uvYofqxw_o.png" width="670"></p> 
<p>Â æˆ‘ä»¬å†æ‰§è¡ŒSHOW SLAVE STATUSï¼Œå¯ä»¥æŸ¥çœ‹ä»åº“çš„åŒæ­¥ä¿¡æ¯</p> 
<pre><code>+----------------------------------+-------------+-------------+-------------+---------------+------------------+---------------------+----------------------+---------------+-----------------------+------------------+-------------------+-----------------+---------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+----------------+-----------------------------+------------------+--------------------------------------+----------------------------+-----------+---------------------+--------------------------------------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+-------------------+---------------+----------------------+--------------+--------------------+
| Slave_IO_State                   | Master_Host | Master_User | Master_Port | Connect_Retry | Master_Log_File  | Read_Master_Log_Pos | Relay_Log_File       | Relay_Log_Pos | Relay_Master_Log_File | Slave_IO_Running | Slave_SQL_Running | Replicate_Do_DB | Replicate_Ignore_DB | Replicate_Do_Table | Replicate_Ignore_Table | Replicate_Wild_Do_Table | Replicate_Wild_Ignore_Table | Last_Errno | Last_Error | Skip_Counter | Exec_Master_Log_Pos | Relay_Log_Space | Until_Condition | Until_Log_File | Until_Log_Pos | Master_SSL_Allowed | Master_SSL_CA_File | Master_SSL_CA_Path | Master_SSL_Cert | Master_SSL_Cipher | Master_SSL_Key | Seconds_Behind_Master | Master_SSL_Verify_Server_Cert | Last_IO_Errno | Last_IO_Error | Last_SQL_Errno | Last_SQL_Error | Replicate_Ignore_Server_Ids | Master_Server_Id | Master_UUID                          | Master_Info_File           | SQL_Delay | SQL_Remaining_Delay | Slave_SQL_Running_State                                | Master_Retry_Count | Master_Bind | Last_IO_Error_Timestamp | Last_SQL_Error_Timestamp | Master_SSL_Crl | Master_SSL_Crlpath | Retrieved_Gtid_Set | Executed_Gtid_Set | Auto_Position | Replicate_Rewrite_DB | Channel_Name | Master_TLS_Version |
+----------------------------------+-------------+-------------+-------------+---------------+------------------+---------------------+----------------------+---------------+-----------------------+------------------+-------------------+-----------------+---------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+----------------+-----------------------------+------------------+--------------------------------------+----------------------------+-----------+---------------------+--------------------------------------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+-------------------+---------------+----------------------+--------------+--------------------+
| Waiting for master to send event | ss1         | root        |        3306 |            60 | mysql-bin.000001 |                1138 | ss2-relay-bin.000002 |          1304 | mysql-bin.000001      | Yes              | Yes               |                 |                     |                    |                        |                         |                             |          0 |            |            0 |                1138 |            1509 | None            |                |             0 | No                 |                    |                    |                 |                   |                |                     0 | No                            |             0 |               |              0 |                |                             |                1 | f352dda6-51a9-11ec-abd6-525496503cbd | /var/lib/mysql/master.info |         0 |                NULL | Slave has read all relay log; waiting for more updates |              86400 |             |                         |                          |                |                    |                    |                   |             0 |                      |              |                    |
+----------------------------------+-------------+-------------+-------------+---------------+------------------+---------------------+----------------------+---------------+-----------------------+------------------+-------------------+-----------------+---------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+----------------+-----------------------------+------------------+--------------------------------------+----------------------------+-----------+---------------------+--------------------------------------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+-------------------+---------------+----------------------+--------------+--------------------+
1 row in set (0.00 sec)
</code></pre> 
<p><span style="color:#9c8ec1;">æ€»ç»“<br> Â  Â  Â  Â  æ„Ÿè°¢èƒ½çœ‹åˆ°è¿™é‡Œçš„æœ‹å‹ğŸ˜‰</span></p> 
<p><span style="color:#9c8ec1;">Â  Â  Â  Â  æœ¬æ¬¡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼ŒçŒ«å¤´é¹°æ•°æ®è‡´åŠ›äºä¸ºå¤§å®¶åˆ†äº«æŠ€æœ¯å¹²è´§ğŸ˜</span></p> 
<p><span style="color:#9c8ec1;">Â  Â  Â  Â  å¦‚æœä»¥ä¸Šè¿‡ç¨‹ä¸­å‡ºç°äº†ä»»ä½•çš„çº°æ¼é”™è¯¯ï¼Œçƒ¦è¯·å¤§ä½¬ä»¬æŒ‡æ­£ğŸ˜…</span></p> 
<p><span style="color:#9c8ec1;">Â  Â  Â  Â  å—ç›Šçš„æœ‹å‹æˆ–å¯¹æŠ€æœ¯æ„Ÿå…´è¶£çš„ä¼™ä¼´è®°å¾—ç‚¹èµå…³æ³¨æ”¯æŒä¸€æ³¢ğŸ™</span></p> 
<p><span style="color:#9c8ec1;">Â  Â  Â  Â  ä¹Ÿå¯ä»¥æ‰«æäºŒç»´ç æˆ–æœç´¢å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€çŒ«å¤´é¹°æ•°æ®åˆ†æã€‘ï¼Œç•™è¨€äº¤æµğŸ™</span></p> 
<p>Â </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/34/54/rvY94hFa_o.jpg"></p> 
<p>Â </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/194c7bae87003250366ff4b894df3250/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">é¡µé¢è·³è½¬å localStorageå­˜å‚¨çš„å€¼æ²¡æœ‰äº†ï¼Ÿ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/952664bdf55fd5e0137fcd97e87cdd92/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">æ•°æ®ç»“æ„ï¼šå¼—æ´›ä¼Šå¾·ç®—æ³•ï¼ˆæœ€çŸ­è·¯å¾„ï¼‰å›¾æ–‡è¯¦è§£</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>