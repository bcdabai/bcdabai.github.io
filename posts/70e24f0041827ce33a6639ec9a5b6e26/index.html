<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Lua的学习-4-Table 表 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Lua的学习-4-Table 表" />
<meta property="og:description" content="一、Table 表的初始化 Lua的Table表涵盖了 集合，数组，可变数组，哈希（键值对）
1、初始化-数组下标方式
Lua的下标从 1 开始
--声明（按照数组方式） --结果：len = 3,3，5，7 a = {3,5,7} len = #a p&#39;rint(&#34;len = &#34;..len) for i = 1,len do print(a[i]) end 通过 #a 的方式获取长度是不准确的，特别是在table的元素中有两个nil，并且以nil为结尾时，这时可以通过table.maxn()方式
--结果len =7 ,末尾的nil 代表table的结束；如果采用的是#a,则此处结果为3 a = {3,5,7,nil,&#34;a&#34;,&#34;b&#34;,&#34;c&#34;,nil} len = table.maxn(a) print(&#34;len=&#34;..len) --结果：len=9 b = {3,5,7,nil,&#34;a&#34;,&#34;b&#34;,&#34;c&#34;,nil} b[9] = 78 len table.maxn(b) 从上可知，table的特性：
table是可变数组，可以增加其元素；table内部元素可以多类型；下标从1开始
如果一定要下标从0开始，可以用下面方法，但不推荐，很多标准库不能使用。
c = {[0]=3,5,7,nil,&#34;a&#34;,&#34;b&#34;,&#34;c&#34;,nil} 2、初始化-键值对方式
声明 按照键值对方式
a = {x = 3,y=5,z=&#34;hello&#34;} a[&#34;n&#34;] = &#34;nnn&#34; a.m = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/70e24f0041827ce33a6639ec9a5b6e26/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-04T19:48:43+08:00" />
<meta property="article:modified_time" content="2019-11-04T19:48:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Lua的学习-4-Table 表</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="Table__0"></a>一、Table 表的初始化</h4> 
<p>Lua的Table表涵盖了 集合，数组，可变数组，哈希（键值对）<br> 1、初始化-数组下标方式<br> <mark>Lua的下标从 1 开始</mark></p> 
<pre><code>--声明（按照数组方式）
--结果：len = 3,3，5，7
a = {3,5,7}
len = #a
p'rint("len = "..len)
for i = 1,len do
    print(a[i])
end
</code></pre> 
<p>通过 #a 的方式获取长度是不准确的，特别是在table的元素中有两个nil，并且以nil为结尾时，这时可以通过table.maxn()方式</p> 
<pre><code>--结果len =7 ,末尾的nil 代表table的结束；如果采用的是#a,则此处结果为3
a = {3,5,7,nil,"a","b","c",nil}
len = table.maxn(a)
print("len="..len)

--结果：len=9
b = {3,5,7,nil,"a","b","c",nil}
b[9] = 78
len table.maxn(b)
</code></pre> 
<p>从上可知，table的特性：<br> <mark>table是可变数组，可以增加其元素；table内部元素可以多类型；下标从1开始</mark><br> 如果一定要下标从0开始，可以用下面方法，但不推荐，很多标准库不能使用。</p> 
<pre><code>c = {[0]=3,5,7,nil,"a","b","c",nil}
</code></pre> 
<p>2、初始化-键值对方式</p> 
<p>声明 按照键值对方式</p> 
<pre><code>a = {x = 3,y=5,z="hello"}
a["n"] = "nnn"
a.m = "mmm"

len = table.maxn(a)
print("len="..len)
print("a.x ="..a.x)
print("a[\"y\"] = "..a["y"])
print(a.n)
--结果：len = 0  a.x =3  a[“y”] =5  nnn
</code></pre> 
<p><mark>通过键值对方式创建的table，不能使用maxn()方法获取长度；使用方括号[ ]方式获取值时，需要转义符</mark></p> 
<p>3、键值方式、数组方式混合型</p> 
<pre><code>a = {3，5，7；x = 3,y=5,z="hello"}
a["n"] = "nnn"
a.m = "mmm"

len = table.maxn(a)
print("len="..len)
print("a.x ="..a.x)
print("a[\"y\"] = "..a["y"])
print(a.n)
--结果：len = 3  a.x =3  a[“y”] =5  nnn
</code></pre> 
<p>通过混合方式创建的table，maxn()方法只能获取到数组方式的长度；此处的“；”和“，”作用是一样的；但能让开发者更好的分辨；</p> 
<p>4、键为特殊字符的方式</p> 
<pre><code>c={["+"]="a",["-"]="b" }
print(c["+"])
--结果：a  但是这种创建方式，不能通过c["+"]来获取某一元素的值。
</code></pre> 
<h4><a id="_78"></a>二、二维数组</h4> 
<p>二维数组的写法也很灵活</p> 
<pre><code>--结果：能把数组里面所有的数据都输出
a = { {1,2,3},{"aa","bb","cc","dd","ee"} }
a[3] = {"张三","李四","王五"}
len = table.maxn(a)
innerLen = table.maxn(a[1])
for i = 1,len do
    innerLen = table.maxn(a[i])
    for j=1,innerLen do
        print(a[i][j])
    end
end
</code></pre> 
<h4><a id="__94"></a>三、表 遍历</h4> 
<p>上面通过for循环也是一样遍历方式。</p> 
<p>第二种方式：<br> for k,v in next,数组名称 do</p> 
<p>end<br> <mark>nil被自动忽略,后面的数组类型元素会被放到键值对元素前面输出</mark></p> 
<pre><code>--结果：1==3
2==5
3==7
5==a
x="hello"
m==mmm 

a = {3,5,7,nil,x="hello","a",nil}
a.m = "mmm"
for k,v in next, a do
    print(k.."=="..v)
end
</code></pre> 
<p>第三种方式：<br> <mark>ipairs是关键字，只输出1，2，3等数组元素</mark><br> for k,v in ipairs(a) do<br> print(k…==…v)<br> end</p> 
<pre><code>结果：
1==3
2==5
3==7

for k,v in ipairs(a) do
    print(k..==..v)
end
</code></pre> 
<p>第四种方式：<br> <mark>pairs是关键字，可以输出所有元素,但是无序输出。pairs和ipairs关键字是迭代器</mark></p> 
<pre><code>--结果同第二种方式
for k,v in pairs(a) do
    print(k..==..v)
end
</code></pre> 
<h4><a id="_145"></a>四、数组元素的插入和删除</h4> 
<p>table插入：<br> table.insert(数组名,1,“aaa”)–向table头插入<br> table.insert(数组名,“ccc”) --向table尾插入；会自动插入到数组的末尾</p> 
<pre><code>--结果：
1==3
2==5
3==7
5==a
6==ccc
x="hello"
m==mmm 

a = {3,5,7,nil,x="hello","a",nil}
table.insert(a,"ccc")

for k,v in pairs(a) do 
    print(k.."="..v)
end
</code></pre> 
<p>table删除<br> table.remove(数组名,1) --删除table头元素<br> table.remove(数组名) --删除table尾元素</p> 
<pre><code>--结果：
1==3
2==7
4==a
5==ccc
x="hello"
m==mmm 
table.remove(a,2)
</code></pre> 
<p>–删除数组元素中的最后一位</p> 
<pre><code>--结果：
1==3
2==7
4==a
x="hello"
m==mmm 

table.remove(a)
</code></pre> 
<p>–键值方式的删除<br> a.x = nil</p> 
<h4><a id="_197"></a>五、加载和编译运行</h4> 
<p>多个lua文件的调用加载<br> 1、dofile(“绝对路径\luaFile.lua”) --加载并执行<br> 绝对路径中用“\”转义，这种方式非常不灵活。如果不加绝对路径，会报错。</p> 
<p>2、loadfile(“luaFile.lua”) --加载并编译为中间码，不执行<br> assert() --可以返回更清楚的错误信息</p> 
<pre><code>--此种方法并不会执行，所以不会报错
file = loadfile("aa.file")

--用assert关键字之后才会执行，便会输出错误
local fun = assert(file)
fun()
</code></pre> 
<p>加绝对路径之后，便不会报错。</p> 
<p>3、loadstring(“字符串”) – 字符串当匿名函数用<br> 通常用于运行程序外部的代码，比如运行用户自定义的代码。<br> 可以用于：从服务端直接获取字符串代码；然后通过loadstring方法运行.</p> 
<pre><code>f = loadstring("print(\"aabbcc\")")
f()

d = loading("function aa(a,b) return a+b end")
d()
num = aa(3,9)t
print(num)  ---结果：12

</code></pre> 
<p>4、require函数，常用<br> require函数会搜索目录加载文件，上面我们都是用绝对路径，现在通过require函数就可以使用相对路径。底层文件已经指向src路径下。<br> 会判断文件是否已经加载，避免重复加载同一文件。</p> 
<pre><code>require("app.scenes.aa")
--在此文件中也可以调用aa文件中的方法
</code></pre> 
<h4><a id="Table_238"></a>六、Table排序算法</h4> 
<p>1、冒泡排序<br> 从小到大排序</p> 
<pre><code>arr = {19,3,25,11,17,2,98,27}
len = table.maxn(arr)
 
function sortArr()
    for i = 1,len do
        for j = i + 1,len do
            if arr[i] &gt; arr[j] then
                arr[i],arr[j] = arr[j]arr[i]
            end
        end
    end
    for i = 1,len do
        print(arr[i])
    end
end
</code></pre> 
<p>2、lua自带的table排序</p> 
<pre><code>--底层封装了冒泡排序,从大到小
table.sort(arr,function(a,b) return a&gt;b end)
for i = 1,len do
        print(arr[i])
    end
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b5a8d02c8779191bc0d627d0900c192/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数组根据某字段进行分组</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/83139387ba2443db6f38ed686220910d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">oracle常用命令行&lt;2&gt;</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>