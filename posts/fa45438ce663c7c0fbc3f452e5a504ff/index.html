<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue-cli 发布一个npm 包 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue-cli 发布一个npm 包" />
<meta property="og:description" content="此项目中我们将element-ui 自定义主题，并且覆盖更改了一些样式
作用：
1.避免在每个项目中重新生成主题文件
2.避免每个项目不一致性
3.增加可维护性
开始
在src目录下建了一个index.js文件用于导出重新的less文件和element-ui编译出的font和css文件
这里要注意先后顺序，相同样式的情况下后面的会覆盖前面的
index为编译出的主题样式文件
segma-ui为在编译的基础上再覆盖的样式文件（主题编译更改有限，比如hover active的效果不好更改）
package.js 中新增一条编译为库的命令，vuecli3提供了一个构建目标库的命令，
可以查看官方文档详细了解：https://cli.vuejs.org/zh/guide/build-targets.html#%E5%BA%93
vue-cli-service build --target lib --name myLib [entry] --target : 构建目标，默认为应用模式。这里修改为 lib 启用库模式。--dest : 输出目录，默认 dist 。这里我们改成 lib[entry] : 最后一个参数为入口文件，默认为 src/App.vue 。这里我们指定编译 packages/ 组件库目录。 这里我添加的是 src/index.js 我在index.js中导出了我需要的组件或者文件
... &#34;scripts&#34;: { ... &#34;lib&#34;: &#34;vue-cli-service build --target lib --name vue-svgicon-coms --dest lib src/index.js&#34;, ... }, ... 并在package.json中添加npm包的一些详细信息,仅供参考： { &#34;name&#34;: &#34;segma-ui&#34;, &#34;version&#34;: &#34;0.1.1&#34;, &#34;private&#34;: false, &#34;scripts&#34;: { &#34;serve&#34;: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fa45438ce663c7c0fbc3f452e5a504ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-24T11:02:18+08:00" />
<meta property="article:modified_time" content="2019-12-24T11:02:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue-cli 发布一个npm 包</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>此项目中我们将element-ui 自定义主题，并且覆盖更改了一些样式</p> 
<p>作用：</p> 
<p>1.避免在每个项目中重新生成主题文件</p> 
<p>2.避免每个项目不一致性</p> 
<p>3.增加可维护性</p> 
<p>开始</p> 
<p> <strong>在src目录下建了一个index.js文件用于导出重新的less文件和element-ui编译出的font和css文件</strong></p> 
<p><img alt="" class="has" height="140" src="https://images2.imgbox.com/47/95/pTjQodrM_o.png" width="301"><img alt="" class="has" height="191" src="https://images2.imgbox.com/b2/24/hnEKa6XO_o.png" width="277"></p> 
<p>这里要注意先后顺序，相同样式的情况下后面的会覆盖前面的</p> 
<p>index为编译出的主题样式文件</p> 
<p>segma-ui为在编译的基础上再覆盖的样式文件（主题编译更改有限，比如hover active的效果不好更改）</p> 
<p><img alt="" class="has" height="218" src="https://images2.imgbox.com/a1/0b/lTBEdKxE_o.png" width="623"></p> 
<p> </p> 
<p><strong>package.js 中新增一条编译为库的命令，vuecli3提供了一个构建目标库的命令，</strong></p> 
<p><strong>可以查看官方文档详细了解：<a href="https://cli.vuejs.org/zh/guide/build-targets.html#%E5%BA%93" rel="nofollow">https://cli.vuejs.org/zh/guide/build-targets.html#%E5%BA%93</a></strong></p> 
<pre class="has"><code class="language-javascript">vue-cli-service build --target lib --name myLib [entry]</code></pre> 
<ul><li>--target : 构建目标，默认为应用模式。这里修改为 lib 启用库模式。</li><li>--dest : 输出目录，默认 dist 。这里我们改成 lib</li><li>[entry] : 最后一个参数为入口文件，默认为 src/App.vue 。这里我们指定编译 packages/ 组件库目录。</li></ul> 
<p>这里我添加的是 src/index.js   我在index.js中导出了我需要的组件或者文件</p> 
<pre class="has"><code class="language-javascript">...
"scripts": {
    ...
    "lib": "vue-cli-service build --target lib --name vue-svgicon-coms --dest lib src/index.js",
   ...
  },
...</code></pre> 
<p>并在package.json中添加npm包的一些详细信息,仅供参考： </p> 
<pre class="has"><code class="language-javascript">{
    "name": "segma-ui",
    "version": "0.1.1",
    "private": false,
    "scripts": {
        "serve": "vue-cli-service serve",
        "build": "vue-cli-service build",
        "lib": "vue-cli-service build --target lib --name segma-ui --dest lib src/index.js",
    },
 
    "description": "```\r npm install\r ```",
    "main": "dist/index.html",
    "repository": {
        "type": "git",
        "url": "git+https://github.com/Embrace924/segma-ui.git"
    },
    "keywords": [
        "node",
        "element-ui",
        "vue",
        "javascript",
        "scss",
        "less"
    ],
    "author": "cld",
    "license": "MIT",
    "bugs": {
        "url": "https://github.com/Embrace924/segma-ui/issues"
    },
    "homepage": "https://github.com/Embrace924/segma-ui#readme"
}
</code></pre> 
<p><strong>执行编译</strong></p> 
<pre class="has"><code class="language-html">npm run lib</code></pre> 
<p><img alt="" class="has" height="659" src="https://images2.imgbox.com/40/ad/ypjMK8ZK_o.png" width="458"></p> 
<p>项目的根目录也多了一个lib文件夹</p> 
<p><img alt="" class="has" height="153" src="https://images2.imgbox.com/62/da/PCGzYZwy_o.png" width="301"></p> 
<p><strong>注册npm账号</strong></p> 
<p>如果之前修改过npm源为淘宝镜像，先改回为npm镜像</p> 
<pre class="has"><code class="language-javascript">npm config set registry http://registry.npmjs.org
</code></pre> 
<p>使用npm账号登录（在浏览器注册时使用的邮箱，点击注册链接完成邮箱认证）</p> 
<pre class="has"><code>npm login</code></pre> 
<p><strong> 执行发布命令，发布组件到 npm</strong></p> 
<pre class="has"><code>npm publish</code></pre> 
<p><img alt="" class="has" height="125" src="https://images2.imgbox.com/4e/4e/CQpaY3uh_o.png" width="462"></p> 
<p><img alt="" class="has" height="133" src="https://images2.imgbox.com/8d/24/0WjMNGx6_o.png" width="486"></p> 
<p>发布成功</p> 
<p>发布成功后稍等几分钟，即可在 npm 官网搜索到。以下是刚提交的 segma-ui</p> 
<p><img alt="" class="has" height="658" src="https://images2.imgbox.com/c0/a0/QYbryPst_o.png" width="1200"></p> 
<p> </p> 
<p> </p> 
<p>在需要的项目中安装依赖  对应需要的版本</p> 
<p><img alt="" class="has" height="361" src="https://images2.imgbox.com/e3/36/JHXY0be9_o.png" width="439"></p> 
<p>在项目中引用文件、使用组件</p> 
<p><img alt="" class="has" height="33" src="https://images2.imgbox.com/fd/c2/ykdgO5JN_o.png" width="417"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fd0f3668b5d022027031a93542431147/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iframe子页面调用父页面的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c8c6474b3d2c87f7bfa6b84728085a1f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Jenkins 部署 -- Failed to connect to repository</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>