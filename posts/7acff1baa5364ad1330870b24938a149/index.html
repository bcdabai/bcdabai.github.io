<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu操作系统下Pixhawk原生固件PX4的编译方法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu操作系统下Pixhawk原生固件PX4的编译方法" />
<meta property="og:description" content="在Ubuntu上搭建环境相对简单许多，按照PX4中文维基官网的教程即可。
工具链安装 权限设置 把用户添加到用户组　“dialout”（如果这步没做，会导致很多用户权限问题）:
.1 sudo usermod -a -G dialout $USER然后注销后，重新登录，因为重新登录后所做的改变才会有效
安装CMake .1 sudo add-apt-repository ppa:george-edison55/cmake-3.x -y .2 sudo apt-get update .3 # 必备软件(python、git、qt) .4 sudo apt-get install python-argparse git-core wget zip \ python-empy qtcreator cmake build-essential genromfs -y .5 # 仿真工具 .6 sudo add-apt-repository ppa:openjdk-r/ppa .7 sudo apt-get update .8 sudo apt-get install openjdk-8-jre .9 sudo apt-get install ant protobuf-compiler libeigen3-dev libopencv-dev openjdk-8-jdk openjdk-8-jre clang-3.5 lldb-3.5 -y 卸载模式管理器 Ubuntu配备了一系列代理管理，这会严重干扰任何机器人相关的串口（或usb串口），卸载掉它也不会有什么影响。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7acff1baa5364ad1330870b24938a149/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-06-11T16:47:48+08:00" />
<meta property="article:modified_time" content="2017-06-11T16:47:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu操作系统下Pixhawk原生固件PX4的编译方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在Ubuntu上搭建环境相对简单许多，按照<a target="_blank" href="https://fantasyjxf.gitbooks.io/px4-wiki/content/1_Getting-Started/linux.html" rel="nofollow noopener noreferrer">PX4中文维基</a>官网的教程即可。</p> 
<p></p> 
<h3 id="工具链安装"><strong>工具链安装</strong></h3> 
<ul><li>权限设置</li></ul> 
<p></p> 
<p>把用户添加到用户组　“dialout”（如果这步没做，会导致很多用户权限问题）:</p> 
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 sudo</span> usermod <span class="hljs-operator">-a</span> -G dialout <span class="hljs-variable">$USER

</span></code></pre> 
<p>然后注销后，重新登录，因为重新登录后所做的改变才会有效</p> 
<ul><li>安装CMake</li></ul> 
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 sudo</span> add-apt-repository ppa:george-edison55/cmake-<span class="hljs-number">3</span>.x -y
<span class="hljs-built_in">    .2 sudo</span> apt-get update
<span class="hljs-comment">    .3 # 必备软件(python、git、qt)</span>
<span class="hljs-built_in">    .4 sudo</span> apt-get install python-argparse git-core wget zip \
                            python-empy qtcreator cmake build-essential genromfs -y
<span class="hljs-comment">    .5 # 仿真工具</span>
<span class="hljs-built_in">    .6 sudo</span> add-apt-repository ppa:openjdk-r/ppa
<span class="hljs-built_in">    .7 sudo</span> apt-get update
<span class="hljs-built_in">    .8 sudo</span> apt-get install openjdk-<span class="hljs-number">8</span>-jre
<span class="hljs-built_in">    .9 sudo</span> apt-get install ant protobuf-compiler libeigen3-dev libopencv-dev openjdk-<span class="hljs-number">8</span>-jdk openjdk-<span class="hljs-number">8</span>-jre clang-<span class="hljs-number">3.5</span> lldb-<span class="hljs-number">3.5</span> -y</code></pre> 
<ul><li>卸载模式管理器</li></ul> 
<p>Ubuntu配备了一系列代理管理，这会严重干扰任何<a target="_blank" href="http://lib.csdn.net/base/robot" rel="nofollow noopener noreferrer" class="replace_word" title="机器人知识库" style="color:#df3434; font-weight:bold">机器人</a>相关的串口（或usb串口），卸载掉它也不会有什么影响。</p> 
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 sudo</span> apt-get remove modemmanager</code></pre> 
<ul><li>更新包列表和安装下面的依赖包</li></ul> 
<pre name="code" class="prettyprint"><code class="hljs lasso has-numbering">    .1 sudo add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> ppa:terry<span class="hljs-built_in">.</span>guo/gcc<span class="hljs-attribute">-arm</span><span class="hljs-attribute">-embedded</span> <span class="hljs-attribute">-y</span>
    .2 sudo add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> ppa:team<span class="hljs-attribute">-gcc</span><span class="hljs-attribute">-arm</span><span class="hljs-attribute">-embedded</span>/ppa
    .3 sudo apt<span class="hljs-attribute">-get</span> update
    .4 sudo apt<span class="hljs-attribute">-get</span> install python<span class="hljs-attribute">-serial</span> openocd <span class="hljs-subst">\</span>
                            flex bison libncurses5<span class="hljs-attribute">-dev</span> autoconf texinfo build<span class="hljs-attribute">-essential</span> <span class="hljs-subst">\</span>
                            libftdi<span class="hljs-attribute">-dev</span> libtool zlib1g<span class="hljs-attribute">-dev</span> <span class="hljs-subst">\</span>
                            python<span class="hljs-attribute">-empy</span> gcc<span class="hljs-attribute">-arm</span><span class="hljs-attribute">-none</span><span class="hljs-attribute">-eabi</span> <span class="hljs-attribute">-y</span></code></pre> 
<h3 id="代码编译-1"><a target="_blank" name="t8"></a><strong>代码编译</strong></h3> 
<hr> 
<p>根据<a target="_blank" href="https://fantasyjxf.gitbooks.io/px4-wiki/content/1_Getting-Started/building_the_code.html" rel="nofollow noopener noreferrer">PX4中文维基</a>官网教程。</p> 
<ul><li>安装Git</li></ul> 
<pre name="code" class="prettyprint"><code class="hljs lasso has-numbering">    .1 sudo apt<span class="hljs-attribute">-get</span> install git<span class="hljs-attribute">-all</span></code></pre> 
<ul><li>下载代码</li></ul> 
<pre name="code" class="prettyprint"><code class="hljs php has-numbering"></code><pre name="code" class="prettyprint">    .1<code class="hljs php has-numbering"> mkdir -p ~/src
    .2 cd ~/src
    .3 git <span class="hljs-keyword">clone</span> https:<span class="hljs-comment">//github.com/PX4/Firmware.git</span></code></pre>
<pre></pre>

 
 </pre><ul><li>初始化 <br>
先进入Firmware文件夹，进而进行初始化、更新子模块操作，耐心的等待……</li></ul>
<pre name="code" class="prettyprint"><code class="hljs brainfuck has-numbering"><span class="hljs-comment">    .1 cd</span> <span class="hljs-comment">Firmware</span>
<span class="hljs-comment">    .2 git</span> <span class="hljs-comment">submodule</span> <span class="hljs-comment">update</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">init</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">recursive</span></code></pre>

 
 <ul><li>编译 <br>
在上一步的操作结束之后，即可进行编译：</li></ul>
<pre name="code" class="prettyprint"><code class="hljs lasso has-numbering">    .1 make px4fmu<span class="hljs-attribute">-v2_default</span></code></pre>
<p>注意到“make”是一个字符命令编译工具，“px4fmu-v2”是硬件版本，“default”是默认配置，所有的PX4编译目标遵循这个规则。</p>
<p>与Windows环境中相同，这里也可能因为gcc-arm-none-eabi版本不对，需要进行版本升级到4.9.4，方法如下：</p>

 
 <ul><li>下载gcc-arm-none-eabi 4.9.4，对于的文件夹命名为arm-none-eabi-4_9-2014**q3**</li></ul>
<pre name="code" class="prettyprint"><code class="hljs avrasm has-numbering">    .1 wget https://launchpad<span class="hljs-preprocessor">.net</span>/gcc-arm-embedded/<span class="hljs-number">4.9</span>/<span class="hljs-number">4.9</span>-<span class="hljs-number">2015</span>-q3-update/+download/gcc-arm-none-eabi-<span class="hljs-number">4</span>_9-<span class="hljs-number">2015</span>q3-<span class="hljs-number">20150921</span>-linux<span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.bz</span></code></pre>

 
 <ul><li>去旧迎新</li></ul>
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 pushd</span> .
<span class="hljs-comment">    .2 # =&gt; 卸载新版的gcc-arm-none-eabi</span>
<span class="hljs-built_in">    .3 sudo</span> apt-get remove gcc-arm-none-eabi
<span class="hljs-comment">    .4 # =&gt; 安装下载好的gcc-arm-none-eabi</span>
    .5 .tar -jxf gcc-arm-none-eabi-<span class="hljs-number">4</span>_9-<span class="hljs-number">2015</span>q3-<span class="hljs-number">20150921</span>-linux.tar.bz2
<span class="hljs-built_in">    .6 sudo</span> mv gcc-arm-none-eabi-<span class="hljs-number">4</span>_9-<span class="hljs-number">2015</span>q3 /opt
    .7 exportline=<span class="hljs-string">"export PATH=/opt/gcc-arm-none-eabi-4_9-2015q3/bin:\$PATH"</span>
<span class="hljs-keyword">    .8 if</span> grep -Fxq <span class="hljs-string">"<span class="hljs-variable">$exportline</span>"</span> ~/.profile; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> nothing to <span class="hljs-keyword">do</span> ; <span class="hljs-keyword">else</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$exportline</span> &gt;&gt; ~/.profile; <span class="hljs-keyword">fi</span>
<span class="hljs-comment">    .9 # =&gt; 使路径生效</span>
    .10 . ~/.profile
<span class="hljs-built_in">    .11 popd</span></code></pre>
<p>对于GCC5.4.3版本的下载：</p>
<pre name="code" class="prettyprint"><code class="hljs avrasm has-numbering">    .1 wget https://launchpad<span class="hljs-preprocessor">.net</span>/gcc-arm-embedded/<span class="hljs-number">5.0</span>/<span class="hljs-number">5</span>-<span class="hljs-number">2016</span>-q2-update/+download/gcc-arm-none-eabi-<span class="hljs-number">5</span>_4-<span class="hljs-number">2016</span>q2-<span class="hljs-number">20160622</span>-linux<span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.bz</span>2</code></pre>
<p>其余操作不再赘述</p>
<p><a target="_blank" href="https://px4.osdrone.net/1_Getting-Started/adcanced_linux.html#" rel="nofollow noopener noreferrer">PX4 中文维基</a> 同步更新。</p>

 
 <hr>
<p>笔者装的是Ubuntu 64位系统，而上述arm-none-eabi是直接下载的编译好的32位，还需要安装一个东西</p>
<pre name="code" class="prettyprint"><code class="hljs lasso has-numbering">    .1 sudo apt<span class="hljs-attribute">-get</span> install lsb<span class="hljs-attribute">-core</span></code></pre>
<p>可以检查arm-none-eabi 4.９是否安装成功，输入以下指令：</p>
<pre name="code" class="prettyprint"><code class="hljs lasso has-numbering">    .1 arm<span class="hljs-attribute">-none</span><span class="hljs-attribute">-eabi</span><span class="hljs-attribute">-gcc</span> <span class="hljs-subst">--</span>version</code></pre>
<p>如果出现如下信息，交叉编译环境搭建就没有什么问题了</p>
<pre name="code" class="prettyprint"><code class="hljs vhdl has-numbering">    .1 ～$ arm-none-eabi-gcc <span class="hljs-comment">--version</span>
    .2 arm-none-eabi-gcc (GNU Tools <span class="hljs-keyword">for</span> ARM Embedded Processors) <span class="hljs-number">4.9</span><span class="hljs-number">.3</span> <span class="hljs-number">20150529</span> (<span class="hljs-keyword">release</span>) [ARM/embedded-<span class="hljs-number">4</span>_9-branch revision <span class="hljs-number">227977</span>]
    .3 Copyright (C) <span class="hljs-number">2014</span> Free Software Foundation, Inc.
    .4 This <span class="hljs-keyword">is</span> free software; see the source <span class="hljs-keyword">for</span> copying conditions.  There <span class="hljs-keyword">is</span> NO
    .5 warranty; <span class="hljs-keyword">not</span> even <span class="hljs-keyword">for</span> MERCHANTABILITY <span class="hljs-keyword">or</span> FITNESS <span class="hljs-keyword">FOR</span> A PARTICULAR PURPOSE.</code></pre>

 
 <ul><li>编译</li></ul>
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 cd</span> ~/src/Firmware
    .2 make px4fmu-v2_default</code></pre>
<p>进入Firmware所在的文件夹，make成功后，显示如下： <br>
<img src="https://images2.imgbox.com/db/4f/il7RZdXG_o.png" alt="ok" title=""></p>
<h3 id="ninja"><a target="_blank" name="t9"></a>Ninja</h3>
<p>Ninja比Make更快，并且PX4的CMake生成器可以支持它。不幸的是，Ubuntu目前只支持一个非常过时的版本。</p>
<p>这里博主下载二进制文件并添加到系统路径来安装最新版本的<a target="_blank" href="https://github.com/martine/ninja" rel="noopener noreferrer">Ninja</a>：</p>
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering">    .1 mkdir -p <span class="hljs-variable">$HOME</span>/ninja
<span class="hljs-built_in">    .2 cd</span> <span class="hljs-variable">$HOME</span>/ninja
    .3 wget https://github.com/martine/ninja/releases/download/v1.<span class="hljs-number">6.0</span>/ninja-linux.zip
    .4 unzip ninja-linux.zip
    .5 rm ninja-linux.zip
    .6 exportline=<span class="hljs-string">"export PATH=<span class="hljs-variable">$HOME</span>/ninja:\$PATH"</span>
<span class="hljs-keyword">    .7 if</span> grep -Fxq <span class="hljs-string">"<span class="hljs-variable">$exportline</span>"</span> ~/.profile; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> nothing to <span class="hljs-keyword">do</span> ; <span class="hljs-keyword">else</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$exportline</span> &gt;&gt; ~/.profile; <span class="hljs-keyword">fi</span>
    .8 . ~/.profile</code></pre>

 
 <blockquote>

  
  <p>按上面的方法配置好ninja之后，以后每次一make都会调用它，这样编译速度会更快。</p>

  
  <p>如果不想使用ninja的话，可以将其从’~/.profile’中注释掉。</p>

 
 </blockquote>
<p><code>#export PATH=/home/fantasy/ninja:$PATH</code></p>
<h3 id="qt-creator"><a target="_blank" name="t10"></a><strong>Qt Creator</strong></h3>

 
 <hr>
<p>Qt Creator是官方唯一支持的IDE，在Ubuntu上针对PX4固件使用，便于看代码的同时也可以进行编译烧录。</p>

 
 <ul><li>安装Qt</li></ul>
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 sudo</span> apt-get install qtcreator</code></pre>
<p>Qt Creator的常见功能如下： <br>
<img src="https://images2.imgbox.com/9b/fc/6dThSchm_o.png" alt="create" title=""></p>
<p>在打开Qt之前，应该创建project文件：</p>
<pre name="code" class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">    .1 cd</span> ~/src/Firmware
    .2 mkdir ../Firmware-build
<span class="hljs-built_in">    .3 cd</span> ../Firmware-build
    .4 cmake ../Firmware -G <span class="hljs-string">"CodeBlocks - Unix Makefiles"</span>
<span class="hljs-comment">    .5 #可以发现Firmware-build目录生成了一些文件</span></code></pre>

 
 <blockquote>

  
  <p><strong>提个醒：</strong> 按照官网上面最后一行的命令，当前使用Qt编译得到的将是<span style="font-size:24px; color:#DC143C">build px4</span> ，因为默认的编译指令是<code>make posix_sitl_default</code>，这不是大家所期待的结果。</p>

  
  <p><strong>解决方案</strong>：对于，Pixhawk硬件，将最后一行改成 <br>
<code>cmake ../Firmware -G "CodeBlocks - Unix Makefiles" -DCONFIG=nuttx_px4fmu-v2_default</code></p>

  
  <p>其他例如使用FMUv4的用户请根据需求进行替换。</p>

 
 </blockquote>

 
 <ul><li>
<p>打开Qt <br>
<img src="https://images2.imgbox.com/cb/0e/PNMCpY26_o.png" alt="Qt" title=""> <br>
Ubuntu用户只要导入主文件夹里的CMakeLists.txt文件就可以了，打开Qt，通过File -&gt; Open File or Project -&gt; 选择CMakeLists.txt (默认位置在Firmware文件夹根目录下)
<br>
<img src="https://images2.imgbox.com/7d/6c/mYKw2j3I_o.png" alt="open" title=""></p>
</li><li>
<p>项目配置 <br>
选择<strong>src/Firmware-build</strong>作为构建目录 <br>
<img src="https://images2.imgbox.com/a4/4c/K3XJwSf9_o.png" alt="build" title=""> <br>
运行设置 <br>
<img src="https://images2.imgbox.com/9c/17/j2kdz1Eh_o.png" alt="run" title=""></p>
</li><li>
<p>编译 <br>
<img src="https://images2.imgbox.com/88/76/RZcUXHS3_o.png" alt="runit" title=""></p>
</li><li>
<p>上传</p>
</li></ul>
<p><img src="https://images2.imgbox.com/69/7f/xODb4Gli_o.png" alt="upload2" title=""></p>
<p>笔者刚开始的时候发现Qt中默认显示的固件不全，很多文件都没有显示，如下图所示 <br>
<img src="https://images2.imgbox.com/8f/0a/12M2Bczj_o.png" alt="leave" title=""></p>
<p>进行下面的操作就哦可了</p>
<p><img src="https://images2.imgbox.com/9c/d3/We2n8TT9_o.png" alt="qtt" title=""></p>
<p><img src="https://images2.imgbox.com/7a/65/hcu0aBG9_o.png" alt="file" title=""></p>
<h3 id="eclipse-on-ubuntu"><a target="_blank" name="t11"></a>Eclipse on Ubuntu</h3>

 
 <center>
  
  <img src="https://images2.imgbox.com/dc/21/cFczMCpc_o.png" alt="ecl" title="">
 
 </center>
<p>在Windows下习惯了使用Eclipse的用户也可以直接在Ubuntu下使用Eclipse进行开发，与Qt一样，这也是一款跨平台的IDE。 <br>
就是Java配置有点复杂，用起来却是非常方便的，除了不用更改环境设置，其他的都与Ｗｉｎｄｏｗｓ下无异，此处不在赘述。</p>
<p>一个很棒的特点就是Ｕｂｕｎｔｕ下的Ｅｃｌｉｐｓｅ可以直接加中文注释，这是别的编译器没有的，我尝试了用Ｓｕｂｌｉｍｅ看代码，定义跳转不太给力，Ｑｔ打开工程很慢。</p>
<p>目前为止最好的方法还是虚拟机，Ｗｉｎｄｏｗｓ改一行代码编译上传可能需要五分钟，非常费劲，但是Ｕｂｕｎｔｕ可以说是极速。但是Ｗｉｎｄｏｗｓ下有很多好用的工具便于调试，Ｓｏｕｒｃｅ　Ｉｎｓｉｇｈｔ看代码也是很给力。<strong>虚拟机完美</strong>。</p>
<p>至此，在Windows已经Ubuntu下的环境搭建已经全部搭建成功。</p>
<p>现在是2016.7.26 19:37 为了确保方法的有效性，笔者已经在都装有Ubuntu虚拟机的笔记本和台式机上用上述方法完成了两种系统下环境搭建、代码编译的复现，亲测有效。</p>
<h2 id="tips"><a target="_blank" name="t12"></a>Tips</h2>
<h3 id="下载特定版本的固件"><a target="_blank" name="t13"></a>下载特定版本的固件</h3>
<p>PX4Firmware有非常多的发行版，可以从<a target="_blank" href="https://github.com/PX4/Firmware/releases" rel="noopener noreferrer">这里</a>看到。
<br>
</p>

 
 <center>
  
  <img src="https://images2.imgbox.com/a2/f0/HwhS5qlq_o.png" alt="release" title="">
 
 </center>
<p>也可以在<a target="_blank" href="https://github.com/PX4/Firmware/tree/v1.4.1" rel="noopener noreferrer">这里</a>进行选择：</p>

 
 <center>
  
  <img src="https://images2.imgbox.com/d8/69/usfJF5Fw_o.png" alt="tag" title="">
 
 </center>
<p>其实下载链接都是<a target="_blank" href="https://github.com/PX4/Firmware.git" rel="noopener noreferrer">https://github.com/PX4/Firmware.git</a>。</p>
<pre name="code" class="prettyprint"><code class="hljs r has-numbering">    .1 ~$:cd ~/src/Firmware
<span class="hljs-comment">    .2 # 查看标签（版本）</span>
    .3 ~$:git tag
<span class="hljs-keyword">    .4 ...</span>
    .5 v1.4.0rc1
    .6 v1.4.0rc2
    .7 v1.4.0rc3
    .8 v1.4.0rc4
    .9 v1.4.1rc1
    .10 v1.4.1rc2
<span class="hljs-keyword">    .11 ...</span>
<span class="hljs-comment">    .12 # 新建一个工作分区并切换到目标版本</span>
    .13 git checkout -b branch_name tag_name</code></pre>
<p>这样就可以使用你想要的任意版本固件进行开发了。（因为可能有的版本确实不太稳定）</p>
<h3 id="makefile"><a target="_blank" name="t14"></a>Makefile</h3>
<pre name="code" class="prettyprint"><code class="hljs vhdl has-numbering">    .1 # Don<span class="hljs-attribute">'t</span> be afraid <span class="hljs-keyword">of</span> this makefile, it <span class="hljs-keyword">is</span> just passing
    .2 # arguments <span class="hljs-keyword">to</span> cmake <span class="hljs-keyword">to</span> allow us <span class="hljs-keyword">to</span> keep the wiki pages etc.
    .3 # that describe how <span class="hljs-keyword">to</span> build the px4 firmware
    .4 # the same even <span class="hljs-keyword">when</span> using cmake instead <span class="hljs-keyword">of</span> make.</code></pre>
<p>Makefile只是将参数传递给cmake。所有与<code>make</code>相关的指令都可以在这里找到，也可以自定义编译指令，比如</p>
<pre name="code" class="prettyprint"><code class="hljs actionscript has-numbering">    .1 #  explicity <span class="hljs-keyword">set</span> <span class="hljs-keyword">default</span> build target
    .2 fantasy: px4fmu-v2_default</code></pre>
<p>于是博主编译固件变成下面这个样子：</p>
<pre name="code" class="prettyprint"><code class="hljs ruby has-numbering">    .1 ~<span class="hljs-variable">$:</span>~<span class="hljs-regexp">/src/</span><span class="hljs-constant">Firmware</span> <span class="hljs-variable">$ </span>make fantasy
<span class="hljs-constant">    .2 PX4</span> <span class="hljs-constant">CONFIG</span><span class="hljs-symbol">:</span> px4fmu-v2_default
<span class="hljs-symbol">    .3 ninja:</span> no work to <span class="hljs-keyword">do</span>.</code></pre>
<p>做这些只为让遇到相同问题的人少走弯路，专注核心问题，这也是笔者开展<a target="_blank" href="https://fantasyjxf.gitbooks.io/px4-wiki/content/index.html" rel="nofollow noopener noreferrer">PX4中文维基</a>汉化项目的初衷。
<br>
还望志同道合的你们多多支持！~</p>
<br>

                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/45b2360d54be1ce23cfbc40df87d1f90/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iOS 画线（曲线、虚线、直线）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/60b9dd3cee5447e01950006324e931cc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">统计中的p-value检验</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>