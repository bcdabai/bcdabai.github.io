<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker下梦织CMS的部署 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker下梦织CMS的部署" />
<meta property="og:description" content="摘要：Docker的广泛应用相对于传统的虚拟机而言提高了资源的利用率，推广后docker的影响不容忽视，在启动速度、硬盘、内存、运行密度、性能、隔离性和迁移性方面都有很大的提高。本次在centos7下使用不同容器搭建lamp环境后部署开源的CMS。分别在两个容器里用yum下载httpd、mysql，并在httpd内安装PHP7.1版本。测试apache通过后下载CMS镜像并部署。
关键词：Docker Lamp CMS
要求：
1.熟练掌握centos7版本下docker的安装、删除，启动、停止，docker镜像的安装、删除。
2.掌握容器端口的各个映射方式，及容器互联的操作方法。
3.掌握不同容器下lamp的搭建。
4.Lamp搭建在容器中搭建后掌握CMS镜像的保存、授权、部署。
一、 过程：
1.docker容器的创建，启动，停止，并查询docker容器的状态。
命令：yum install docker #下载docker
2.docker镜像的安装、删除、状态。
3.通过docker exec -it 2db /bin/bash 命令进入容器，安装httpd、php7.1。并测试apache是否成功。
命令：
docker pull docker.io/centos/mysql-57-centos7 #下载mysql镜像
docker run -d --name=mysql -e MYSQL_ROOT_PASSWORD=123456 docker.io/centos/mysql-57-centos7 #创建mysql容器创建用户root 口令123456
docker run --name=httpd -d -u root -P --link mysql centos/httpd #创建httpd容器并连接数据库
docker exec -it httpd /bin/bash #进入httpd容器
[root@2db3229c1b25 /]# yum install -y epel-release
[root@2db3229c1b25/]#rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm
[root@2db3229c1b25 /]# yum update -y
[root@2db3229c1b25 /]# yum install -y gcc make openssl openssl-devel" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f47b41327cc46a76a620a27d80aec7c6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-23T17:03:02+08:00" />
<meta property="article:modified_time" content="2021-01-23T17:03:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker下梦织CMS的部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>摘要：Docker的广泛应用相对于传统的虚拟机而言提高了资源的利用率，推广后docker的影响不容忽视，在启动速度、硬盘、内存、运行密度、性能、隔离性和迁移性方面都有很大的提高。本次在centos7下使用不同容器搭建lamp环境后部署开源的CMS。分别在两个容器里用yum下载httpd、mysql，并在httpd内安装PHP7.1版本。测试apache通过后下载CMS镜像并部署。</p> 
<p>关键词：Docker Lamp CMS</p> 
<p>要求：<br> 1.熟练掌握centos7版本下docker的安装、删除，启动、停止，docker镜像的安装、删除。<br> 2.掌握容器端口的各个映射方式，及容器互联的操作方法。<br> 3.掌握不同容器下lamp的搭建。<br> 4.Lamp搭建在容器中搭建后掌握CMS镜像的保存、授权、部署。<br> 一、 过程：<br> 1.docker容器的创建，启动，停止，并查询docker容器的状态。<br> 命令：yum install docker #下载docker<br> <img src="https://images2.imgbox.com/bb/2f/GxURlDNT_o.png" alt="所有容器"><br> <img src="https://images2.imgbox.com/7d/63/6VeeKOqU_o.png" alt="容器的启动和停止"></p> 
<p>2.docker镜像的安装、删除、状态。<br> <img src="https://images2.imgbox.com/f9/b6/ECru45c7_o.png" alt="所有镜像"></p> 
<p>3.通过docker exec -it 2db /bin/bash 命令进入容器，安装httpd、php7.1。并测试apache是否成功。<br> 命令：<br> docker pull docker.io/centos/mysql-57-centos7 #下载mysql镜像<br> docker run -d --name=mysql -e MYSQL_ROOT_PASSWORD=123456 docker.io/centos/mysql-57-centos7 #创建mysql容器创建用户root 口令123456<br> docker run --name=httpd -d -u root -P --link mysql centos/httpd #创建httpd容器并连接数据库<br> docker exec -it httpd /bin/bash #进入httpd容器<br> [root@2db3229c1b25 /]# yum install -y epel-release<br> [root@2db3229c1b25/]#rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm<br> [root@2db3229c1b25 /]# yum update -y<br> [root@2db3229c1b25 /]# yum install -y gcc make openssl openssl-devel<br> [root@2db3229c1b25 /]# yum install -y --enablerepo=remi --enablerepo=remi-php71 php php-devel php-mbstring php-mcrypt php-mysqlnd php-pdo php-gd<br> [root@2db3229c1b25 /]# yum clean all<br> [root@2db3229c1b25 /]# rm -rf /var/cache/yum<br> [root@2db3229c1b25 /]# cd /var/www/html/<br> [root@2db3229c1b25 html]# vi index.php<br> 在里面输入：</p> &lt;?php phpinfo(); ?&gt; 
<p><img src="https://images2.imgbox.com/be/90/Uvy8FI4g_o.png" alt="成功页面"></p> 
<p>出现以上页面表示安装成功。<br> 4.在容器里安装MySQL，并授权CMS，账户为“root”，口令：“123456”。<br> 命令：<br> Grant all on <em>.</em> to “root”@"%" identified by “123456”;<br> 截图如下：<br> <img src="https://images2.imgbox.com/e3/7b/OlIvSJUC_o.png" alt="更改密码"></p> 
<p>5.下载织梦CMS镜像，火狐浏览器寻找官网并下载UTF8版本。<br> <img src="https://images2.imgbox.com/03/df/3IikQQG1_o.jpg" alt="下载页面"></p> 
<p>6.将织梦CMS镜像复制到docker内<br> 口令：<br> Docker cp DedeCMS-V5.7 –UTF8-SP2.tar.gz httpd:/<br> <img src="https://images2.imgbox.com/c3/16/ClsQMc4B_o.png" alt="复制口令"></p> 
<p>7.1. 给更改httpd.conf文件并对目录授权<br> 口令 ：vi /etc/httpd/conf/httpd.conf<br> <img src="https://images2.imgbox.com/05/73/UHl7uqqn_o.png" alt="更改文件配置"><br> <img src="https://images2.imgbox.com/ff/08/QrecQ2XP_o.png" alt="更改参数"></p> 
<p>7.2. <br> 口令：chmod 777 dede<br> <img src="https://images2.imgbox.com/38/26/krV8KjJK_o.png" alt="权限操作"></p> 
<ol start="8"><li>安装DedeCMS，并连接数据库</li></ol> 
<p><img src="https://images2.imgbox.com/48/8c/sxhKBvje_o.png" alt="连接数据库"><br> <img src="https://images2.imgbox.com/2a/08/AtdNLLd7_o.png" alt="连接数据库"></p> 
<p>三、结果展示：<br> ![结果1![](https://img-blog.csdnimg.cn/20210123165641274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1llbGxsaQ==,size_16,color_FFFFFF,t_70)<br> <img src="https://images2.imgbox.com/38/12/ihAUc0Jl_o.png" alt="结果2"></p> 
<p>四、 实注意事项</p> 
<ol><li>实验过程中centos7系统中命令行有严格的格式要求，有无空格以及命令的准确性需要注意。</li><li>docker安装httpd后安装的php版本不匹配无法识别导致网页不通，需要安装PHP7.1版本</li><li>安装前需要进入docker更改 /etc/httpd/conf/htttpd.conf文件并授权目录否则无法识别。</li></ol> 
<p>五、 参考文献<br> [1]查找最快docker镜像<br> https://github.com/silenceshell/docker_mirror<br> [2] docker部署httpd+php7.1<br> https://blog.csdn.net/BingZhongDeHuoYan/article/details/79424340<br> [3] Linux下安装DedeCMS及安全设置 http://help.dedecms.com/install-use/server/2012/0510/2312.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/916d3edd7aae0cb8848c209da9957462/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决mybatis实体类中的属性名和SQL中的字段名不一致问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/89cf620bb24669ceef34cc5fb0adc03c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ecognition学习（2）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>