<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle中rownum的使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Oracle中rownum的使用" />
<meta property="og:description" content="一、rownum的说明
rownum是oracle特有的一个关键字。
（1）对于基表，在insert记录时，oracle就按照insert的顺序，将rownum分配给每一行记录，因此在select一个基表的时候，rownum的排序是根据insert记录的顺序显示的，例如：
select rownum as rn, t.* from emp t;
（2）对于子查询，则rownum的顺序是根据子查询的查询顺序进行动态分配的，例如：
select rownum as t2_rn, t2.* from (select rownum as t1_rn , t1.* from emp t1 order by t1.sal) t2;
由上图可以看到T1_RN和T2_RN的区别。
t1中的rownum是根据emp这个基表的默认顺序分配的，而内层子循环是根据SAL字段进行排序，所以t2的rownum是根据内层子查询的记录顺序分配的。
----------------------------- 分 割 线 -------------------------------------
二、rownum的一些使用技巧
（1）使用rownum限制查询返回的记录数
1、例如，我们现在只想看到emp表中的第一条记录：
select * from emp where rownum=1;
将rownum限制为1，这样就只能查询出一条记录。
2、现在，我们现在想查看emp中的前2条记录：
select * from emp where rownum&lt;=2;
将rownum的限制为2条，这样就可以查询出前2条记录。
3、假如我们现在只想查看emp中的第二条记录，又该如何写语句呢？
如果我们先这样写：
select * from emp where rownum=2;
where条件为：rownum=2，来看看查询结果：
发现没有查出任何数据，为什么呢？这里就要对oracle的rownum做进一步的理解。
因为rownum并不是当作实体数据存放在每一张表中，而是在每一次select查询的时候，根据基表的默认insert顺序由oracle动态分配的，有1才有2，如果rownum没有1，那么2也就没有了意义，所以这个查询就不会有任何结果出来。这个时候我们就需要利用子查询和别名列来实现这个需求：
select * from ( select rownum as rn, t." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/733a184e673fda5ecf3d8fee1bf70eb4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-24T18:24:11+08:00" />
<meta property="article:modified_time" content="2023-05-24T18:24:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle中rownum的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>一、rownum的说明</strong></p> 
<p>rownum是oracle特有的一个关键字。</p> 
<p>（1）对于基表，在insert记录时，oracle就按照insert的顺序，将rownum分配给每一行记录，因此在select一个基表的时候，rownum的排序是根据insert记录的顺序显示的，例如：</p> 
<p>select rownum as rn, t.* from emp t;</p> 
<p><img src="https://images2.imgbox.com/29/a9/QKUUO8nL_o.png" alt="在这里插入图片描述"></p> 
<p>（2）对于子查询，则rownum的顺序是根据子查询的查询顺序进行动态分配的，例如：</p> 
<p>select rownum as t2_rn, t2.* from (select rownum as t1_rn , t1.* from emp t1 order by t1.sal) t2;</p> 
<p><img src="https://images2.imgbox.com/3e/06/3DRr6Eu3_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Hz0yv70L-1684923575188)(E:\Typore\image\Oracle中rownum使用\v2-7ec1cf8a96280b3fead60e191ffb5107_720w.webp)]"></p> 
<p>由上图可以看到T1_RN和T2_RN的区别。</p> 
<p>t1中的rownum是根据emp这个基表的默认顺序分配的，而内层子循环是根据SAL字段进行排序，所以t2的rownum是根据内层子查询的记录顺序分配的。</p> 
<p>----------------------------- 分 割 线 -------------------------------------</p> 
<p><strong>二、rownum的一些使用技巧</strong></p> 
<p>（1）使用rownum限制查询返回的记录数</p> 
<p>1、例如，我们现在只想看到emp表中的第一条记录：</p> 
<p>select * from emp where rownum=1;</p> 
<p><img src="https://images2.imgbox.com/63/0a/yQitGdVF_o.png" alt="在这里插入图片描述"></p> 
<p>将rownum限制为1，这样就只能查询出一条记录。</p> 
<p>2、现在，我们现在想查看emp中的前2条记录：</p> 
<p>select * from emp where rownum&lt;=2;</p> 
<p><img src="https://images2.imgbox.com/19/70/q88rUCuX_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-UEz3fDM9-1684923575190)(E:\Typore\image\Oracle中rownum使用\v2-952571aa0120ee635ccdbab0de0f99a3_720w.webp)]"></p> 
<p>将rownum的限制为2条，这样就可以查询出前2条记录。</p> 
<p>3、假如我们现在只想查看emp中的第二条记录，又该如何写语句呢？</p> 
<p>如果我们先这样写：</p> 
<p>select * from emp where rownum=2;</p> 
<p>where条件为：rownum=2，来看看查询结果：</p> 
<p><img src="https://images2.imgbox.com/52/43/If3zVcfJ_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-3ZCbzKFH-1684923575190)(E:\Typore\image\Oracle中rownum使用\v2-a5ccc5632b4b106d16f936507b78e0ed_720w.webp)]"></p> 
<p>发现没有查出任何数据，为什么呢？这里就要对oracle的rownum做进一步的理解。</p> 
<p>因为rownum并不是当作实体数据存放在每一张表中，而是在每一次select查询的时候，根据基表的默认insert顺序由oracle动态分配的，有1才有2，如果rownum没有1，那么2也就没有了意义，所以这个查询就不会有任何结果出来。这个时候我们就需要利用子查询和别名列来实现这个需求：</p> 
<p>select * from ( select rownum as rn, t.* from emp t where rownum&lt;=2 ) where rn=2 ;</p> 
<p>首先通过子查询，取出emp表的前2条记录，并将子查询中的rownum定义为别名rn，然后在外层查询中，使用where条件使rn=2即可，查询出emp表的第二条记录：</p> 
<p><img src="https://images2.imgbox.com/c8/25/HSeCNWnF_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-NkmyEatV-1684923575192)(E:\Typore\image\Oracle中rownum使用\v2-9e2127192cf6fa21badf0804c0b1a7e1_720w.webp)]"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14fdbf4f39ce29f3f20d3d64874ec823/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">自己封装的移动端可横向滚动表格组件，可实现滚动加载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0e68f3a9fe3fc3041677f9e35745c9fa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于JavaWeb开发的销售商城系统（手机销售，笔记本电脑销售，书籍等通用版销售系统）大学生毕设通用程序销售管理系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>