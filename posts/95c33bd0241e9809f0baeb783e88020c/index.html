<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java Logback日志框架概述及logback.xml详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java Logback日志框架概述及logback.xml详解" />
<meta property="og:description" content="日志技术具备的优势
可以将系统执行的信息选择性的记录到指定的位置（控制台、文件中、数据库中)。·
可以随时以开关的形式控制是否记录日志，无需修改源代码。
日志体系结构
Logback日志框架
Logback是由log4j创始人设计的另一个开源日志组件，性能比log4j要好
Logback是基于slf4j的日志规范实现的框架。
Logback主要分为三个技术模块:
logback-core: logback-core 模块为其他两个模块奠定了基础，必须有。
logback-classic:它是log4j的一个改良版本，同时它完整实现了slf4j API。
logback-access模块与Tomcat和Jetty 等servlet容器集成，以提供HTTP访问日志功能
使用Logback需要使用哪几个模块，各自的作用是什么。
slf4j-api:日志规范
logback-core:基础模块。
logback-classic:它是log4j的一个改良版本，同时它完整实现了slf4j API
这些都可以去Logback或slf4j官方网站下载
使用Logback
完成这些步骤便可使用日志对象输出日志信息:
public class Test { //创建LogBack对象 public static final Logger LOGGER=LoggerFactory.getLogger(&#34;Test.class&#34;); public static void main(String[] args) { try { LOGGER.debug(&#34;main开始执行&#34;); LOGGER.info(&#34;第二行日志&#34;); int a=10,b=0; LOGGER.trace(&#34;a=&#34;&#43;a); LOGGER.trace(&#34;b=&#34;&#43;b); System.out.println(a/b); } catch (Exception e) { e.printStackTrace(); LOGGER.error(&#34;发生错误,&#34;&#43;e); } } } logback.xml文件:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;configuration&gt; &lt;!-- CONSOLE ：表示当前的日志信息是可以输出到控制台的。 --&gt; &lt;appender name=&#34;CONSOLE&#34; class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/95c33bd0241e9809f0baeb783e88020c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-05T15:26:46+08:00" />
<meta property="article:modified_time" content="2023-07-05T15:26:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java Logback日志框架概述及logback.xml详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>日志技术具备的优势</strong><br> 可以将系统执行的信息选择性的记录到指定的位置（控制台、文件中、数据库中)。·<br> 可以随时以开关的形式控制是否记录日志，无需修改源代码。</p> 
<br> 
<p><strong>日志体系结构</strong><br> <img src="https://images2.imgbox.com/36/39/Txi5Hgyh_o.png" alt="请添加图片描述"><br> <br></p> 
<p><strong>Logback日志框架</strong><br> Logback是由log4j创始人设计的另一个开源日志组件，性能比log4j要好<br> Logback是基于slf4j的日志规范实现的框架。</p> 
<p>Logback主要分为三个技术模块:<br> logback-core: logback-core 模块为其他两个模块奠定了基础，必须有。<br> logback-classic:它是log4j的一个改良版本，同时它完整实现了slf4j API。<br> logback-access模块与Tomcat和Jetty 等servlet容器集成，以提供HTTP访问日志功能</p> 
<p>使用Logback需要使用哪几个模块，各自的作用是什么。<br> slf4j-api:日志规范<br> logback-core:基础模块。<br> logback-classic:它是log4j的一个改良版本，同时它完整实现了slf4j API<br> 这些都可以去Logback或slf4j官方网站下载</p> 
<br> 
<p><strong>使用Logback</strong><br> <img src="https://images2.imgbox.com/4a/3c/yv30Xwvz_o.png" alt="请添加图片描述"><br> 完成这些步骤便可使用日志对象输出日志信息:</p> 
<pre><code>public class Test {
    //创建LogBack对象
    public static final Logger LOGGER=LoggerFactory.getLogger("Test.class");
    public static void main(String[] args) {
        try {
            LOGGER.debug("main开始执行");
            LOGGER.info("第二行日志");
            int a=10,b=0;
            LOGGER.trace("a="+a);
            LOGGER.trace("b="+b);
            System.out.println(a/b);
        } catch (Exception e) {
            e.printStackTrace();
            LOGGER.error("发生错误,"+e);
        }

    }
}
</code></pre> 
<p>logback.xml文件:</p> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;!--
        CONSOLE ：表示当前的日志信息是可以输出到控制台的。
    --&gt;
    &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;!--输出流对象 默认 System.out 改为 System.err则输出信息变成红色--&gt;
        &lt;target&gt;System.out&lt;/target&gt;
        &lt;encoder&gt;
            &lt;!--格式化输出：%d表示日期，%-5level：级别比如DEBUG、INFO 从左显示5个字符宽度 %c在哪个class里打的日志
                %thread表示线程名比如main %msg：日志消息，%n是换行符--&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%-5level]  %c [%thread] : %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- File是输出的方向通向文件的 --&gt;
    &lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;!--日志输出路径--&gt;
        &lt;file&gt;D:/Soft/Log/data.log&lt;/file&gt;
        &lt;!--指定日志文件拆分和压缩规则--&gt;
        &lt;rollingPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt;
            &lt;!--通过指定压缩文件名称，来确定分割文件方式 一旦到达一定大小按照下面的格式来拆分文件压缩--&gt;
            &lt;fileNamePattern&gt;D:/Soft/Log/data2-%d{yyyy-MM-dd}.log%i.gz&lt;/fileNamePattern&gt;
            &lt;!--文件拆分大小 即文件到了1MB就开辟第二个文件存储--&gt;
            &lt;maxFileSize&gt;1MB&lt;/maxFileSize&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;!--
    level:用来设置打印级别，大小写无关，级别程度依次是：TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR   默认debug
    可以通过设置日志的输出级别来控制哪些日志信息输出或者不输出 只输出级别不低于设定级别的日志信息     ALL 和 OFF分别是打开全部日志信息和关闭全部
    &lt;root&gt;可以包含零个或多个&lt;appender-ref&gt;元素，标识这个输出位置将会被本日志级别控制。
    --&gt;
    &lt;root level="ALL"&gt;
        &lt;!-- 注意：如果这里不配置关联打印位置，该位置将不会记录日志--&gt;
        &lt;appender-ref ref="CONSOLE" /&gt;
        &lt;appender-ref ref="FILE" /&gt;
    &lt;/root&gt;
&lt;/configuration&gt;
</code></pre> 
<p>运行Test将在控制台和xml设置的文件路径中看到日志信息：</p> 
<pre><code>2023-06-15 16:15:49.941 [DEBUG]  Test.class [main] : main开始执行
2023-06-15 16:15:49.957 [INFO ]  Test.class [main] : 第二行日志
2023-06-15 16:15:49.964 [TRACE]  Test.class [main] : a=10
2023-06-15 16:15:49.964 [TRACE]  Test.class [main] : b=0
2023-06-15 16:15:49.966 [ERROR]  Test.class [main] : 发生错误,java.lang.ArithmeticException: / by zero
java.lang.ArithmeticException: / by zero
</code></pre> 
<br> 
<br> 
<p><img src="https://images2.imgbox.com/a7/51/BPGJRnIx_o.png" alt="请添加图片描述"><br> <br></p> 
<p>如果系统上线后只想记录一些错误的日志信息或者不想记录日志了，怎么办?<br> 可以通过设置日志的输出级别来控制哪些日志信息输出或者不输出。</p> 
<p>日志级别级别程度依次是:TRACE&lt;DEBUG&lt;INFO&lt;WARN&lt;ERROR;默认级别是debug (忽略大小写)，对应其方法。<br> 作用:用于控制系统中哪些日志级别是可以输出的，只输出级别不低于设定级别的日志信息。<br> ALL和OFF分别是打开全部日志信息，及关闭全部日志信息。<br> 具体在root标签的level属性中设置日志级别。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ca664621e23605152c07657b4aa83def/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java中定时任务ScheduledThreadPoolExecutor、Timer、@Scheduled和Quartz</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ca2489c10d48491d8458ab92fd556401/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DBSCAN详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>