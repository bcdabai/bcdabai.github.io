<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vant实现 下拉刷新，上拉加载 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vant实现 下拉刷新，上拉加载" />
<meta property="og:description" content="引入Vant
npm i vant -S 没废话，直接上代码。 最后有一个附带的实际项目案例可以下载参考一下。
&lt;template&gt; &lt;div&gt; &lt;van-pull-refresh v-model=&#34;isLoading&#34; @refresh=&#34;onRefresh&#34;&gt; &lt;van-list v-model=&#34;isUpLoading&#34; :finished=&#34;upFinished&#34; @load=&#34;onLoad&#34; :offset=&#34;offset&#34; finished-text=&#34;我也是有底线的~~~&#34; &gt; &lt;div class=&#34;content&#34;&gt; &lt;!-- 自定义内容 --&gt; &lt;ul&gt; &lt;li v-for=&#34;(item, index) in datacontent&#34; :key=&#34;index&#34;&gt; &lt;div class=&#34;left&#34;&gt; &lt;p class=&#34;rank&#34;&gt;{{item.rank}}&lt;/p&gt; &lt;p class=&#34;score&#34;&gt; 分数： &lt;br /&gt; &lt;span&gt;{{item.score}}&lt;/span&gt; &lt;/p&gt; &lt;p class=&#34;title&#34;&gt;{{item.title}}&lt;/p&gt; &lt;p class=&#34;classify&#34;&gt;{{item.classify}}&lt;/p&gt; &lt;p class=&#34;author&#34;&gt;{{item.author}}&lt;/p&gt; &lt;p class=&#34;date&#34;&gt;{{item.date}}&lt;/p&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/van-list&gt; &lt;/van-pull-refresh&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { data() { return { data: [ ], //自己定义的数组，里面存放数据，用于v-for循环 datacontent: [], //空数组，用来储存循环出来的内容，因为没有造假数据，所以就反复循环这个数组里的内容了，懒～～～嘻嘻 isLoading: false, //下拉刷新 isUpLoading: false, //上拉加载 upFinished: false, //上拉加载完毕 finished: false, offset: 100 //滚动条与底部距离小于 offset 时触发load事件 }; }, mounted() { for (var i = 0; i &lt; 2; i&#43;&#43;) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8ce07de4d6b7a9dd17f53ec1f02e27c0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-03T15:45:06+08:00" />
<meta property="article:modified_time" content="2020-01-03T15:45:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vant实现 下拉刷新，上拉加载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>引入Vant</strong></p> 
<pre><code class="language-html">npm i vant -S</code></pre> 
<p><code>没废话，直接上代码。 最后有一个附带的实际项目案例可以下载参考一下。</code></p> 
<pre><code class="language-javascript">&lt;template&gt;

  &lt;div&gt;

    &lt;van-pull-refresh v-model="isLoading" @refresh="onRefresh"&gt;

      &lt;van-list v-model="isUpLoading" :finished="upFinished" @load="onLoad"

        :offset="offset" finished-text="我也是有底线的~~~"

      &gt;

        &lt;div class="content"&gt;

          &lt;!-- 自定义内容 --&gt;

          &lt;ul&gt;

            &lt;li v-for="(item, index) in datacontent" :key="index"&gt;

              &lt;div class="left"&gt;

                &lt;p class="rank"&gt;{<!-- -->{item.rank}}&lt;/p&gt;

                &lt;p class="score"&gt;

                  分数：

                  &lt;br /&gt;

                  &lt;span&gt;{<!-- -->{item.score}}&lt;/span&gt;

                &lt;/p&gt;

                &lt;p class="title"&gt;{<!-- -->{item.title}}&lt;/p&gt;

                &lt;p class="classify"&gt;{<!-- -->{item.classify}}&lt;/p&gt;

                &lt;p class="author"&gt;{<!-- -->{item.author}}&lt;/p&gt;

                &lt;p class="date"&gt;{<!-- -->{item.date}}&lt;/p&gt;

              &lt;/div&gt;

            &lt;/li&gt;

          &lt;/ul&gt;

        &lt;/div&gt;

      &lt;/van-list&gt;

    &lt;/van-pull-refresh&gt;

  &lt;/div&gt;

&lt;/template&gt;

&lt;script&gt;

export default {

  data() {

    return {

      data: [  ], //自己定义的数组，里面存放数据，用于v-for循环

      datacontent: [], //空数组，用来储存循环出来的内容，因为没有造假数据，所以就反复循环这个数组里的内容了，懒～～～嘻嘻

      isLoading: false, //下拉刷新

      isUpLoading: false, //上拉加载

      upFinished: false, //上拉加载完毕

      finished: false,

      offset: 100 //滚动条与底部距离小于 offset 时触发load事件

    };

  },

  mounted() {

    for (var i = 0; i &lt; 2; i++) {

      this.datacontent.push(this.data[i]); //页面一加载我就循环出来五条放进去

    }

  },

  methods: {

    // 下拉调用此函数

    onRefresh() {

      setTimeout(() =&gt; {

        this.$toast("刷新成功"); //弹出

        this.isLoading = false;

      }, 500);

    },

    // 上拉调用此函数

    onLoad() {

      setTimeout(() =&gt; {

        this.$toast("加载成功"); //弹出

        this.isUpLoading = false;

        for (var i = 0; i &lt; 1; i++) {

          this.datacontent.push(this.data[i]); // 上拉时循环出来这个数组的三条内容，放入datacontent这个数组里，那样就一直拉一直加

        }

      }, 500);

      // 加载完成时底部提示加载完成，禁止上拉加载。延迟器是为了避免和加载中同时执行

      setTimeout(() =&gt; {

        if (this.datacontent.length &gt;= 10) {

          this.upFinished = true;

        } else {

          this.upFinished = false;

        }

      }, 1000);

    }

  }

};
&lt;/script&gt;
&lt;style lang="less" scoped&gt;
  .van-pull-refresh{
    .left {
      overflow: hidden;
      p {
      width: 30px;
      float: left;
    }
    }
  }
&lt;/style&gt;




</code></pre> 
<p>vant官方地址：https://youzan.github.io/vant/#/zh-CN/pull-refresh#dai-ma-yan-shi</p> 
<p>优化简化版：</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div class="information"&gt;
    &lt;van-pull-refresh v-model="isLoading" @refresh="onRefresh"&gt;
      &lt;van-list
        v-model="isUpLoading"
        :finished="upFinished"
        @load="onLoad"
        :offset="offset"
        :finished-text="textBottom"
      &gt;
       //内容
      &lt;/van-list&gt;
    &lt;/van-pull-refresh&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { Toast } from "vant";

export default {
  data() {
    return {
      companyList: [],
      isLoading: false, //下拉刷新
      isUpLoading: false, //上拉加载
      upFinished: false, //上拉加载完毕
      finished: false,
      offset: 100, //滚动条与底部距离小于 offset 时触发load事件
      pages: 0,
      textBottom: "" //底部内容文字
    };
  },
  mounted() {
    this.compactInfo();
  },
  methods: {
    // 下拉调用此函数
    onRefresh() {
      setTimeout(() =&gt; {
        // this.$toast("刷新成功"); //弹出
        this.isLoading = false;
      }, 500);
    },
    // 上拉调用此函数
    onLoad() {
      setTimeout(() =&gt; {
        this.isUpLoading = false;
        this.compactInfo();
      }, 500);
    },
   //加载的数据
    compactInfo() {
      this.pages++;
      this.$axios
        .get("接口地址")
        .then(res =&gt; {
          if (res.data.status == "200") {
            let lists = res.data.body.records;
            if (lists.length == "0") {
              this.upFinished = true;
            } else {
              this.upFinished = false;
            }
            for (var i = 0; i &lt; lists.length; i++) {
              this.companyList.push(lists[i]); // 上拉时循环出来这个数组的三条内容，放入datacontent这个数组里，那样就一直拉一直加
            }
            if (this.companyList.length &gt; 7) {
              this.textBottom = "我也是有底线的~~~";
            }
          } else {
            Toast({
              message: res.data.title,
              position: "center",
              duration: 1000
            });
          }
        });
    },
    
  }
};
&lt;/script&gt;

</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/999e70a61f8622af6cd4837bf7d4a238/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue中的js文件如何使用i18n 国际化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6531362e63113a045bab6a77366533e7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Lambda 优雅的处理编译时异常</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>