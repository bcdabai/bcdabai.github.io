<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SAP ABAP Selection Screen 选择屏幕看这一篇就够了（持续更新） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SAP ABAP Selection Screen 选择屏幕看这一篇就够了（持续更新）" />
<meta property="og:description" content="Selection Screen 选择屏幕 文章目录 Selection Screen 选择屏幕BLOCK 块Radio button 单选框豪横的横向单选框Check Box 复选框文本框 - 一般不用 PARAMETERS文本框 - 主要使用 SELECT-OPTIONS动态显示选择屏幕Screen Icon 屏幕图标Drop Down List 下拉选项 BLOCK 块 Block 是在屏幕上划分一个区域，对屏幕进行分块便于对功能进行区分。
为了好看
SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME TITLE TEXT-001. SELECTION-SCREEN END OF BLOCK blk1. WITH FRAME 就是显示整个区域的边框
TITLE TEXT-001 就是给整个区域命名。TEXT-001 可以在文本元素里给整个 BLOCK 添加描述
Radio button 单选框 单选框，用来做选择。
选择大于努力
PARAMETERS: p_xxxx RADIOBUTTON GROUP g1 DEFAULT &#39;X&#39;, p_xxxx RADIOBUTTON GROUP g1. 有的时候还要加上 USER-COMMAND 关键字用于获取用户的选择，以便动态更改屏幕" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6b02535ec5ed469674d432a4b95f19fd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-08T19:16:19+08:00" />
<meta property="article:modified_time" content="2022-07-08T19:16:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SAP ABAP Selection Screen 选择屏幕看这一篇就够了（持续更新）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Selection_Screen__0"></a>Selection Screen 选择屏幕</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Selection_Screen__0" rel="nofollow">Selection Screen 选择屏幕</a></li><li><ul><li><a href="#BLOCK__2" rel="nofollow">BLOCK 块</a></li><li><a href="#Radio_button__27" rel="nofollow">Radio button 单选框</a></li><li><a href="#_46" rel="nofollow">豪横的横向单选框</a></li><li><a href="#Check_Box__70" rel="nofollow">Check Box 复选框</a></li><li><a href="#___PARAMETERS_86" rel="nofollow">文本框 - 一般不用 PARAMETERS</a></li><li><a href="#___SELECTOPTIONS_102" rel="nofollow">文本框 - 主要使用 SELECT-OPTIONS</a></li><li><a href="#_130" rel="nofollow">动态显示选择屏幕</a></li><li><a href="#Screen_Icon__196" rel="nofollow">Screen Icon 屏幕图标</a></li><li><a href="#Drop_Down_List__234" rel="nofollow">Drop Down List 下拉选项</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="BLOCK__2"></a>BLOCK 块</h3> 
<p>Block 是在屏幕上划分一个区域，对屏幕进行分块便于对功能进行区分。</p> 
<p><mark>为了好看</mark></p> 
<pre><code>SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME TITLE TEXT-001.

SELECTION-SCREEN END OF BLOCK blk1.
</code></pre> 
<p>WITH FRAME 就是显示整个区域的边框</p> 
<p><img src="https://images2.imgbox.com/ef/08/RvIFBKQ4_o.png" alt="在这里插入图片描述"></p> 
<p>TITLE TEXT-001 就是给整个区域命名。TEXT-001 可以在文本元素里给整个 BLOCK 添加描述</p> 
<p><img src="https://images2.imgbox.com/d6/65/QEnrByu7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Radio_button__27"></a>Radio button 单选框</h3> 
<p>单选框，用来做选择。</p> 
<p>选择大于努力</p> 
<pre><code>PARAMETERS: p_xxxx RADIOBUTTON GROUP g1 DEFAULT 'X',
            p_xxxx RADIOBUTTON GROUP g1.
</code></pre> 
<p><img src="https://images2.imgbox.com/21/8c/kxglhanC_o.png" alt="在这里插入图片描述"></p> 
<p><mark>有的时候还要加上 USER-COMMAND 关键字用于获取用户的选择，以便动态更改屏幕</mark></p> 
<h3><a id="_46"></a>豪横的横向单选框</h3> 
<p>有时候为了好看，我们会把单选框做来横着</p> 
<p>可以称之为豪横的单选框</p> 
<pre><code>SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME TITLE TEXT-001.
  SELECTION-SCREEN BEGIN OF LINE.
    SELECTION-SCREEN POSITION 1.
    PARAMETERS p_xxx1 RADIOBUTTON GROUP g1 USER-COMMAND uc DEFAULT 'X'.
   SELECTION-SCREEN COMMENT 2(8) TEXT-002 FOR FIELD p_xxx1.
   SELECTION-SCREEN POSITION 14.
   PARAMETERS p_xxx2 RADIOBUTTON GROUP g1.
   SELECTION-SCREEN COMMENT 15(10) TEXT-003 FOR FIELD p_xxx2.
 SELECTION-SCREEN END OF LINE.
SELECTION-SCREEN END OF BLOCK blk1.
</code></pre> 
<p><img src="https://images2.imgbox.com/05/b7/HIwP3W6f_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Check_Box__70"></a>Check Box 复选框</h3> 
<p>复选框</p> 
<p>小孩子才做选择</p> 
<p>我全都要</p> 
<pre><code>PARAMETERS p_xxxx AS CHECKBOX.
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/e6/VMEgmMQl_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="___PARAMETERS_86"></a>文本框 - 一般不用 PARAMETERS</h3> 
<p>PARAMETERS 已经在 单选框、多选框处大显身手了</p> 
<p>那么在文本框这里我们就给他点休息时间</p> 
<p>因为使用 SELECT-OPTIONS 来做输入框，相较于 PARAMETERS 可以说是</p> 
<p>“人无我有，人有我优”</p> 
<pre><code>PARAMETERS: p_xxxx TYPE xxxx OBLIGATORY,
            p_xxxx TYPE xxxx OBLIGATORY DEFAULT, 
            p_xxxx TYPE xxxx OBLIGATORY DEFAULT.
</code></pre> 
<h3><a id="___SELECTOPTIONS_102"></a>文本框 - 主要使用 SELECT-OPTIONS</h3> 
<p>有些人天生就是主角</p> 
<p>没错 说的就是 SELECT-OPTIONS</p> 
<p>SELECT-OPTIONS 可以输入单值、多值 、范围</p> 
<p>还可以包含、排除等</p> 
<p>再搭配上 OPEN-SQL 从数据库里查询值</p> 
<p>只能说<mark>爱不释手</mark></p> 
<pre><code>SELECT-OPTIONS: s_xxx FOR xxx,           
                s_xxx FOR xxx DEFAULT xxx. 
SELECT-OPTIONS: s_xxx1 FOR xxx NO INTERVALS NO-EXTENSION, " 和 PARAMETERES 一样
                s_xxx2 FOR xxx NO INTERVALS, " 可输入多值
                s_xxx3 FOR xxx. " 可输入多值、范围


</code></pre> 
<p><img src="https://images2.imgbox.com/2e/9e/ffqSc7fn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_130"></a>动态显示选择屏幕</h3> 
<p>为了使选择屏幕的输入有针对性，有时我们会让它动起来</p> 
<p>就是动态显示选择屏幕的内容</p> 
<pre><code>SELECT-OPTIONS: s_xxx1 FOR xxx NO INTERVALS NO-EXTENSION MEMORY ID s1 MODIF ID ty1, " 和 PARAMETERES 一样
                s_xxx2 FOR xxx NO INTERVALS MEMORY ID s2 MODIF ID ty2,              " 可输入多值
                s_xxx3 FOR xxx MEMORY ID s3 MODIF ID ty3. " 可输入多值、范围

PARAMETERS: p_xxx1 RADIOBUTTON GROUP g1 USER-COMMAND uc DEFAULT 'X',
p_xxx2 RADIOBUTTON GROUP g1,
p_xxx3 RADIOBUTTON GROUP g1.

AT SELECTION-SCREEN OUTPUT.

LOOP AT SCREEN. " LOOP 很关键，就是全部循环来控制哪些显示 1 哪些隐藏 0
IF screen-group1 EQ 'TY1' AND p_xxx1 NE 'X'.
* screen-invisible = 1.
    screen-active = 0. " 0 隐藏，1 显示
  ENDIF.

IF screen-group1 EQ 'TY2' AND p_xxx2 NE 'X'.
screen-active = 0.
  ENDIF.

IF screen-group1 EQ 'TY3' AND p_xxx3 NE 'X'.
screen-active = 0.
  ENDIF.

MODIFY SCREEN.
ENDLOOP.
</code></pre> 
<p><img src="https://images2.imgbox.com/fa/ae/CCfk46ue_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/74/e6/9AE7A3DK_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/8a/6f/EHMzQNss_o.png" alt="在这里插入图片描述"></p> 
<p>以上的效果是选择屏幕会依据单选框的选择进行变化</p> 
<p>这里有几点需要注意的</p> 
<ol><li>PARAMETERS 单选框里 <mark>USER-COMMAND uc</mark> 是必需的</li><li>SELECT-OPTIONS 输入框里 <mark>MODIF ID ty</mark> 是必需的</li><li>在 ==AT SELECTION-SCREEN OUTPUT ==事件里对屏幕进行逻辑处理</li></ol> 
<p>我们在 SELECT-OPTIONS 里还加入了 <mark>MEMORY ID xx</mark></p> 
<p>这是用来记录我们屏幕上输入的值</p> 
<p>当我们再次执行程序时，它会自动带出我们上一次输入的值</p> 
<p>这会减少用户的输入，是非常值得推荐的</p> 
<h3><a id="Screen_Icon__196"></a>Screen Icon 屏幕图标</h3> 
<p>在选择屏幕上我们除了可以<mark>ONLI</mark> POST 表单以外</p> 
<p>我们还能做什么？</p> 
<p>在很多时候，我们可能会需要从外部导入 EXCEL 等文件内容</p> 
<p>为了确保内容的可读性，我们会设计一个 EXCEL 模板</p> 
<p>那么用户怎么去下载这个模板呢</p> 
<p>这个时候我们就可以在选择屏幕处增加一个下载按钮</p> 
<p>就像下面这样</p> 
<pre><code>TABLES: sscrfields.

SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME TITLE TEXT-001.
  PARAMETERS p_xxxx TYPE xxxx.
SELECTION-SCREEN END OF BLOCK blk1.
SELECTION-SCREEN FUNCTION KEY 1.

INITIALIZATION.
  sscrfields-functxt_01 = 'Test Icon'.

AT SELECTION-SCREEN.
IF sscrfields-ucomm EQ 'FC01'.
    MESSAGE 'Hello World!' TYPE 'S'.
  ENDIF.
</code></pre> 
<p><img src="https://images2.imgbox.com/77/e0/CDOyFgt0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Drop_Down_List__234"></a>Drop Down List 下拉选项</h3> 
<p>有的时候单选框占的位置太多了，不太好看</p> 
<p>我们就可以用下拉框来限制用户的输入</p> 
<pre><code>TYPE-POOLS: vrm.

DATA: gv_name TYPE vrm_id,
      gt_list TYPE vrm_values,
      gs_list LIKE LINE OF gt_list.

PARAMETERS: p_type(10) AS LISTBOX VISIBLE LENGTH 10.

AT SELECTION-SCREEN OUTPUT.

  gv_name = 'P_TYPE'.
  gs_list-key = '1'.
  gs_list-text = '失败'.
  APPEND gs_list TO gt_list.

  gs_list-key = '2'.
  gs_list-text = '成功'.
  APPEND gs_list TO gt_list.

  gs_list-key = '3'.
  gs_list-text = '全部'.
  APPEND gs_list TO gt_list.

  CALL FUNCTION 'VRM_SET_VALUES' EXPORTING id = gv_name values = gt_list.
</code></pre> 
<p><img src="https://images2.imgbox.com/4b/5b/sQoXqKHc_o.png" alt="在这里插入图片描述"></p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/256251f1758550d2d9e2c18f98605228/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【大话通信】第七章</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aab5ee4953a64252e56b8bef8cba3961/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python抓取全国旅游景点以及小吃数据，想做旅游攻略？Python助你事半功倍。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>