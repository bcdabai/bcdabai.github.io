<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>wordcloud：自定义背景图片，生成词云 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="wordcloud：自定义背景图片，生成词云" />
<meta property="og:description" content="官方简介： github:https://github.com/amueller/word_cloud 官方地址:https://amueller.github.io/word_cloud/ 来一个例子： &#34;&#34;&#34; @author:FLY @software:PyCharm @time:2017/08/24 &#34;&#34;&#34; import pickle from os import path import jieba import matplotlib.pyplot as plt from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator text = &#39;&#39; with open(&#39;人工智能及应用.txt&#39;, &#39;r&#39;, encoding=&#39;utf8&#39;) as fin: for line in fin.readlines(): line = line.strip(&#39;\n&#39;) # sep’.join（seq）以sep作为分隔符，将seq所有的元素合并成一个新的字符串 text &#43;= &#39; &#39;.join(jieba.cut(line)) backgroud_Image = plt.imread(&#39;man.jpg&#39;) print(&#39;加载图片成功！&#39;) &#39;&#39;&#39;设置词云样式&#39;&#39;&#39; wc = WordCloud( background_color=&#39;white&#39;,# 设置背景颜色 mask=backgroud_Image,# 设置背景图片 font_path=&#39;C:\Windows\Fonts\STZHONGS.TTF&#39;, # 若是有中文的话，这句代码必须添加，不然会出现方框，不出现汉字 max_words=2000, # 设置最大现实的字数 stopwords=STOPWORDS,# 设置停用词 max_font_size=150,# 设置字体最大值 random_state=30# 设置有多少种随机生成状态，即有多少种配色方案 ) wc." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/05c01a104626ccbca874d0bc32c012f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-09-01T08:31:46+08:00" />
<meta property="article:modified_time" content="2017-09-01T08:31:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">wordcloud：自定义背景图片，生成词云</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <ul style="margin-left:0px;"><li>官方简介： <pre class="has"><code class="language-python">github:https://github.com/amueller/word_cloud 
官方地址:https://amueller.github.io/word_cloud/ </code></pre> </li></ul> 
<ul style="margin-left:0px;"><li>来一个例子： <pre class="has"><code class="language-python">"""
@author:FLY
@software:PyCharm
@time:2017/08/24
"""
import pickle
from os import path
import jieba
import matplotlib.pyplot as plt
from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator
text = ''
with open('人工智能及应用.txt', 'r', encoding='utf8') as fin:
    for line in fin.readlines():
        line = line.strip('\n')
# sep’.join（seq）以sep作为分隔符，将seq所有的元素合并成一个新的字符串
text += ' '.join(jieba.cut(line))
backgroud_Image = plt.imread('man.jpg')
print('加载图片成功！')
'''设置词云样式'''
wc = WordCloud(
    background_color='white',# 设置背景颜色
    mask=backgroud_Image,# 设置背景图片
    font_path='C:\Windows\Fonts\STZHONGS.TTF',  # 若是有中文的话，这句代码必须添加，不然会出现方框，不出现汉字
    max_words=2000, # 设置最大现实的字数
    stopwords=STOPWORDS,# 设置停用词
    max_font_size=150,# 设置字体最大值
    random_state=30# 设置有多少种随机生成状态，即有多少种配色方案
)
wc.generate_from_text(text)
print('开始加载文本')
#改变字体颜色
img_colors = ImageColorGenerator(backgroud_Image)
#字体颜色为背景图片的颜色
wc.recolor(color_func=img_colors)
# 显示词云图
plt.imshow(wc)
# 是否显示x轴、y轴下标
plt.axis('off')
plt.show()
# 获得模块所在的路径的
d = path.dirname(__file__)
# os.path.join()：  将多个路径组合后返回
wc.to_file(path.join(d, "h11.jpg"))
print('生成词云成功!')</code></pre> </li></ul> 
<p> </p> 
<ul style="margin-left:0px;"><li><span style="color:#555555;">运行结果：</span></li></ul> 
<p style="text-align:center;"><img alt="" class="has" height="395" src="https://images2.imgbox.com/c4/dc/rbuMxqNN_o.png" width="332"></p> 
<ul style="margin-left:0px;"><li>生成词云方法</li></ul> 
<p>word_cloud 生成词云有两个方法。from text 和 from frequencies 。即文本生成和频率生成，每一个都有对应的函数可以使用</p> 
<pre class="has"><code class="language-python">generate(text)      Generate wordcloud from text.
generate_from_text(text)    Generate wordcloud from text.
generate_from_frequencies      Create a word_cloud from words and frequencies.
fit_words      Create a word_cloud from words and frequencies.</code></pre> 
<p> </p> 
<ul style="margin-left:0px;"><li><span style="color:#3f3f3f;">wordcloud包的基本用法</span> <pre class="has"><code class="language-python">class wordcloud.WordCloud(font_path=None, width=400, height=200, margin=2, 
ranks_only=None, prefer_horizontal=0.9,mask=None, scale=1, color_func=None, 
max_words=200, min_font_size=4, stopwords=None, random_state=None,background_color='black', 
max_font_size=None, font_step=1, mode='RGB', relative_scaling=0.5, regexp=None, 
collocations=True,colormap=None, normalize_plurals=True)</code></pre> </li></ul> 
<p> </p> 
<ul style="margin-left:0px;"><li><span style="color:#3f3f3f;">这是wordcloud的所有参数，下面具体介绍一下各个参数：</span></li></ul> 
<blockquote> 
 <ol><li><code class="language-py"><span style="color:#48484c;"><strong>font_path </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> string </span><span style="color:#93a1a1;">//字体路径，需要展现什么字体就把该字体路径+后缀名写上，如：</span><span style="color:#48484c;">font_path </span><span style="color:#93a1a1;">=</span><span style="color:#48484c;"> </span><span style="color:#dd1144;">'黑体.ttf'</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>width </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> int </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">400</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//输出的画布宽度，默认为</span><span style="color:#195f91;">400</span><span style="color:#93a1a1;">像素</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>height </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> int </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">200</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//输出的画布高度，默认为</span><span style="color:#195f91;">200</span><span style="color:#93a1a1;">像素</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>prefer_horizontal</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> float </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">0.90</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//词语水平方向排版出现的频率，默认</span><span style="color:#48484c;"> </span><span style="color:#195f91;">0.9</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">（所以词语垂直方向排版出现频率为</span><span style="color:#48484c;"> </span><span style="color:#195f91;">0.1</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">）</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>mask</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> nd</span><span style="color:#93a1a1;">-</span><span style="color:#48484c;">array </span><span style="color:#1e347b;">or</span><span style="color:#48484c;"> </span><span style="color:#1e347b;">None</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#1e347b;">None</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//如果参数为空，则使用二维遮罩绘制词云。如果</span><span style="color:#48484c;"> mask </span><span style="color:#93a1a1;">非空，设置的宽高值将被忽略，遮罩形状被</span><span style="color:#48484c;"> mask </span><span style="color:#93a1a1;">取代。</span></code></li><li><code class="language-py"><span style="color:#93a1a1;">除全白（#</span><span style="color:#48484c;">FFFFFF</span><span style="color:#93a1a1;">）的部分将不会绘制，其余部分会用于绘制词云。如：</span><span style="color:#48484c;">bg_pic </span><span style="color:#93a1a1;">=</span><span style="color:#48484c;"> imread</span><span style="color:#93a1a1;">(</span><span style="color:#dd1144;">'读取一张图片.png'</span><span style="color:#93a1a1;">)，</span></code></li><li><code class="language-py"><span style="color:#93a1a1;">背景图片的画布一定要设置为白色（#</span><span style="color:#48484c;">FFFFFF</span><span style="color:#93a1a1;">），然后显示的形状为不是白色的其他颜色。可以用</span><span style="color:#48484c;">ps</span><span style="color:#93a1a1;">工具将自己要显示的形状复制到一个纯白色的画布上再保存，就</span><span style="color:#48484c;">ok</span><span style="color:#93a1a1;">了。</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>scale</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> float </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">1</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//按照比例进行放大画布，如设置为</span><span style="color:#195f91;">1.5</span><span style="color:#93a1a1;">，则长和宽都是原来画布的</span><span style="color:#195f91;">1.5</span><span style="color:#93a1a1;">倍。</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>min_font_size </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> int </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">4</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//显示的最小的字体大小</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>font_step </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> int </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">1</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//字体步长，如果步长大于</span><span style="color:#195f91;">1</span><span style="color:#93a1a1;">，会加快运算但是可能导致结果出现较大的误差。</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>max_words</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> number </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#195f91;">200</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//要显示的词的最大个数</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>stopwords</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> set of strings </span><span style="color:#1e347b;">or</span><span style="color:#48484c;"> </span><span style="color:#1e347b;">None</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//设置需要屏蔽的词，如果为空，则使用内置的</span><span style="color:#48484c;">STOPWORDS</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>background_color</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> color value </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=”</span><span style="color:#48484c;">black</span><span style="color:#93a1a1;">”)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//背景颜色，如</span><span style="color:#48484c;">background_color</span><span style="color:#93a1a1;">=</span><span style="color:#dd1144;">'white'</span><span style="color:#93a1a1;">,背景颜色为白色。</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>max_font_size</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> int </span><span style="color:#1e347b;">or</span><span style="color:#48484c;"> </span><span style="color:#1e347b;">None</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=</span><span style="color:#1e347b;">None</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//显示的最大的字体大小</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>mode </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> string </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=”</span><span style="color:#48484c;">RGB</span><span style="color:#93a1a1;">”)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//当参数为“</span><span style="color:#48484c;">RGBA</span><span style="color:#93a1a1;">”并且</span><span style="color:#48484c;">background_color</span><span style="color:#93a1a1;">不为空时，背景为透明。</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>relative_scaling </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> float </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">default</span><span style="color:#93a1a1;">=.</span><span style="color:#195f91;">5</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//词频和字体大小的关联性</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>color_func</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> callable</span><span style="color:#93a1a1;">,</span><span style="color:#48484c;"> default</span><span style="color:#93a1a1;">=</span><span style="color:#1e347b;">None</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//生成新颜色的函数，如果为空，则使用</span><span style="color:#48484c;"> self</span><span style="color:#93a1a1;">.</span><span style="color:#48484c;">color_func</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>regexp</strong> </span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> string </span><span style="color:#1e347b;">or</span><span style="color:#48484c;"> </span><span style="color:#1e347b;">None</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">optional</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//使用正则表达式分隔输入的文本</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>collocations </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> bool</span><span style="color:#93a1a1;">,</span><span style="color:#48484c;"> default</span><span style="color:#93a1a1;">=</span><span style="color:#1e347b;">True</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//是否包括两个词的搭配</span></code></li><li><code class="language-py"><span style="color:#48484c;"><strong>colormap </strong></span><span style="color:#93a1a1;">:</span><span style="color:#48484c;"> string </span><span style="color:#1e347b;">or</span><span style="color:#48484c;"> matplotlib colormap</span><span style="color:#93a1a1;">,</span><span style="color:#48484c;"> default</span><span style="color:#93a1a1;">=”</span><span style="color:#48484c;">viridis</span><span style="color:#93a1a1;">”</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">//给每个单词随机分配颜色，若指定</span><span style="color:#48484c;">color_func</span><span style="color:#93a1a1;">，则忽略该方法。</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">fit_words</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">frequencies</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span></strong><span style="color:#93a1a1;">//根据词频生成词云【<span style="color:#bebec5;"><span style="color:#48484c;">frequencies，为字典类型</span></span>】</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">generate</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">text</span><span style="color:#93a1a1;">)</span></strong><span style="color:#48484c;"><strong> </strong> </span><span style="color:#93a1a1;">//根据文本生成词云</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">generate_from_frequencies</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">frequencies</span><span style="color:#93a1a1;">[,</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">...])</span></strong><span style="color:#48484c;"><strong> </strong> </span><span style="color:#93a1a1;">//根据词频生成词云</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">generate_from_text</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">text</span><span style="color:#93a1a1;">)</span></strong><span style="color:#48484c;"><strong> </strong> </span><span style="color:#93a1a1;">//根据文本生成词云</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">process_text</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">text</span><span style="color:#93a1a1;">)</span></strong><span style="color:#48484c;"><strong> </strong> </span><span style="color:#93a1a1;">//将长文本分词并去除屏蔽词（此处指英语，中文分词还是需要自己用别的库先行实现，使用上面的</span><span style="color:#48484c;"> fit_words</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">frequencies</span><span style="color:#93a1a1;">)</span><span style="color:#48484c;"> </span><span style="color:#93a1a1;">）</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">recolor</span><span style="color:#93a1a1;">([</span><span style="color:#48484c;">random_state</span><span style="color:#93a1a1;">,</span><span style="color:#48484c;"> color_func</span><span style="color:#93a1a1;">,</span><span style="color:#48484c;"> colormap</span><span style="color:#93a1a1;">])</span></strong><span style="color:#48484c;"><strong> </strong> </span><span style="color:#93a1a1;">//对现有输出重新着色。重新上色会比重新生成整个词云快很多。</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">to_array</span><span style="color:#93a1a1;">()</span><span style="color:#48484c;"> </span></strong><span style="color:#93a1a1;">//转化为</span><span style="color:#48484c;"> numpy array</span></code></li><li><code class="language-py"><strong><span style="color:#48484c;">to_file</span><span style="color:#93a1a1;">(</span><span style="color:#48484c;">filename</span><span style="color:#93a1a1;">)</span></strong><span style="color:#48484c;"><strong> </strong> </span><span style="color:#93a1a1;">//输出到文件</span></code></li></ol> 
</blockquote> 
<ul style="margin-left:0px;"><li><span style="color:#3f3f3f;">简要讲下几个会影响图像清晰问题的</span><span style="color:#3f3f3f;"><code>WordCloud</code></span><span style="color:#3f3f3f;">的参数：</span></li></ul> 
<blockquote> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>mask</strong></span><span style="color:#93a1a1;"><strong>：</strong>遮罩图，字的大小布局和颜色都会依据遮罩图生成。其实理论上这对字大小和清晰程度的影响不大，</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">但是<span style="color:#ff0000;"><strong>遮罩图色和背景色</strong></span></span><span style="color:#48484c;"><span style="color:#ff0000;"><strong>background_color</strong></span></span><span style="color:#93a1a1;"><span style="color:#ff0000;"><strong>如果易混淆</strong></span>，则可能是一个导致看起来不清晰的因素；</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">另外<strong>遮罩图自身各个颜色之间的对比不强烈，也可能使图看起来层次感不够</strong>。</span></code></p> 
 <p> </p> 
 <p><code class="language-py"><span style="color:#93a1a1;">比如，一些图明度比较高，再加上背景白色，有可能导致字色太浅（背景色</span><span style="color:#48484c;">background_color</span><span style="color:#93a1a1;">又是白色）于是看起来不够“清晰”。</span></code></p> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>background_color</strong></span><span style="color:#93a1a1;"><strong>：</strong>背景色，默认黑。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">这个本来其实也不怎么影响清晰度，但是，就像之前在</span><span style="color:#48484c;">mask</span><span style="color:#93a1a1;">中提到的，如果遮罩图像颜色过浅、背景设置白色，</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">可能导致字看起来“不清晰”。而实际上，我对一个浅色遮罩图分别用白、黑两种背景色后发现，</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">黑色背景的强烈对比之下会有若干很浅也很小的词浮现出来，而之前因背景色、字色过于相近而几乎无法用肉眼看出这些词。</span></code></p> 
 <p> </p> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>mode</strong></span><span style="color:#93a1a1;"><strong>：</strong>默认“</span><span style="color:#48484c;">RGB</span><span style="color:#93a1a1;">”。根据说明文档，如果想<span style="color:#ff0000;"><strong>设置透明底色的云词图</strong></span>，那么可以<strong>设置</strong></span><strong><span style="color:#48484c;">background_color</span><span style="color:#93a1a1;">=</span><span style="color:#1e347b;">None</span><span style="color:#93a1a1;">,</span><span style="color:#48484c;"> mode</span><span style="color:#93a1a1;">=</span><span style="color:#dd1144;">"RGBA"</span><span style="color:#48484c;"> </span></strong></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">但是！！！实际中我尝试设置透明背景色并没有成功过！</span><span style="color:#48484c;"> </span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">当我选取的遮罩图是白色底时，如果</span><span style="color:#48484c;">background_color</span><span style="color:#93a1a1;">设置为</span><span style="color:#dd1144;">"white"</span><span style="color:#93a1a1;">或</span><span style="color:#dd1144;">"black"</span><span style="color:#93a1a1;">时，生成的云词确实是对应的“白色”“黑色”；</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">但是按照上述参数设置透明色时，结果出来依然是白色。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">当我选取的遮罩图是透明底时，那么不管我</span><span style="color:#48484c;">background_color</span><span style="color:#93a1a1;">设置为</span><span style="color:#dd1144;">"white"</span><span style="color:#93a1a1;">或</span><span style="color:#dd1144;">"black"</span><span style="color:#93a1a1;">，还是</span><span style="color:#1e347b;">None</span><span style="color:#93a1a1;">加上</span><span style="color:#48484c;">mode</span><span style="color:#93a1a1;">=</span><span style="color:#dd1144;">"RGBA"</span><span style="color:#93a1a1;">，</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">结果都是把背景部分当做黑色图块，自动匹配黑色的字！——也就是并没有实现透明底的云词。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">谁如果实现了透明底色的方案，欢迎给我留言。目前这个疑惑我打算先不研究了，放到以后再看。</span></code></p> 
 <p> </p> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>max_font_size</strong></span><span style="color:#93a1a1;"><strong>：</strong>最大字号。源文件中也有讲到，图的生成会依据最大字号等因素去自动判断词的布局。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">经测试，哪怕同一个图像，只要图本身尺寸不一样（比如我把一个</span><span style="color:#195f91;">300</span><span style="color:#93a1a1;">×</span><span style="color:#195f91;">300</span><span style="color:#93a1a1;">的图拉大到</span><span style="color:#195f91;">600</span><span style="color:#93a1a1;">×</span><span style="color:#195f91;">600</span><span style="color:#93a1a1;">再去当遮罩），那么同样的字号也是会有不同的效果。</span></code></p> 
 <p><span style="color:#93a1a1;">原理想想也很自然，字号决定了字的尺寸，而图的尺寸变了以后，最大字相对于图的尺寸比例自然就变了。</span></p> 
 <p><span style="color:#93a1a1;">所以，需要根据期望显示的效果，去调整最大字号参数值。</span><span style="color:#48484c;"> </span></p> 
 <p> </p> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>min_font_size</strong></span><span style="color:#93a1a1;"><strong>：</strong>最小字号。不设置的情况下，默认是</span><span style="color:#195f91;">4</span><span style="color:#93a1a1;">。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">尝试了设置比</span><span style="color:#195f91;">4</span><span style="color:#93a1a1;">大的字号，例如</span><span style="color:#195f91;">8</span><span style="color:#93a1a1;">、</span><span style="color:#195f91;">10</span><span style="color:#93a1a1;">，结果就是原本小于设定值且大于</span><span style="color:#195f91;">4</span><span style="color:#93a1a1;">号的词都直接不显示了，其它内容和未设置该值时都一样。</span></code></p> 
 <p> </p> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>relative_scaling</strong></span><span style="color:#93a1a1;"><strong>：</strong>表示<strong><span style="color:#ff0000;">词频和云词图中字大小的关系参数</span></strong>，默认</span><span style="color:#195f91;">0.5</span><span style="color:#93a1a1;">。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">为</span><span style="color:#195f91;">0</span><span style="color:#93a1a1;">时，表示只考虑词排序，而不考虑词频数；为</span><span style="color:#195f91;">1</span><span style="color:#93a1a1;">时，表示两倍词频的词也会用两倍字号显示。</span></code></p> 
 <p> </p> 
 <p><code class="language-py"><span style="color:#48484c;"><strong>scale</strong></span><span style="color:#93a1a1;"><strong>：</strong>根据说明文档，<span style="color:#ff0000;"><strong>当云词图很大的，加大该值会比使用更大的图更快，但值越高也会越慢</strong></span>（计算更复杂）。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">默认值是</span><span style="color:#195f91;">1</span><span style="color:#93a1a1;">。实际测试中，更大的值，确实输出图像看起来更精细（较小较浅的词会颜色更重，也感觉清楚，大的词差异不明显）。</span></code></p> 
 <p><code class="language-py"><span style="color:#93a1a1;">不过，可能由于我选的图不大、词也没有很多，所以差距并没有很大，缩小排列一下就基本上辨别不出多少差别了。</span><span style="color:#48484c;"> </span></code></p> 
</blockquote> 
<p> </p> 
<p><strong>备注</strong></p> 
<ul><li>背景图片-man.jpg  </li></ul> 
<p>       </p> 
<p style="text-align:center;"><img alt="" class="has" height="797" src="https://images2.imgbox.com/cb/e5/v9ZkJ8bZ_o.jpg" width="600"></p> 
<ul><li>STZHONGS.TTF  这个字体在CSDN和百度上都有，可自行下载</li></ul> 
<p> </p> 
<p><span style="color:#93a1a1;">以上参考来源</span><span style="color:#808080;">： </span><a href="http://blog.csdn.net/heyuexianzi/article/details/76851377">http://blog.csdn.net/heyuexianzi/article/details/76851377</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6ea52db9b01986f72698e28f976c57ac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">预习Dom4J之:把XML输出到Java控制台</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5283847c6157f8ad2e828c3dbbd77c91/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AJAX 加载数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>