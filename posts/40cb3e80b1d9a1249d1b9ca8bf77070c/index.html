<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>摄像头工作原理及isp相关知识 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="摄像头工作原理及isp相关知识" />
<meta property="og:description" content="转载地址：https://blog.csdn.net/wangliang888888/article/details/103695002
本文转自http://bbs.elecfans.com/jishu_1848707_1_1.html
一：摄像头的基本知识
1：摄像头结构
常用的结构如下图所示，主要包括镜头，基座，传感器以及PCB部分。
2：摄像头模组的种类
CCM分为4种：FF、MF、AF和ZOOM。FF（Fix Focus），定焦摄像头，是国内目前用的最多摄像头，用于30万和130万的手机产品。MF（micro Focus），两档变焦摄像头，主要用于近景拍照，如带有名片识别以及条形码识别的手机上，用于130万和200万的手机产品。AF（Auto Focus），自动变焦摄像头，主要用于高像素手机，同时具有MF的功能，用于200万和300万的手机产品。Zoom（Auto Zoom），自动数码变焦摄像头，主要用于相机手机，类似于相机影像的品质，用于300万以上的手机产品。
3：摄像头的工作原理
景物(SCE)通过镜头（LENS）生成的光学图像投射到图像传感器(Sensor)表面上，然后转为电信号，经过A/D（模数转换）转换后变为数字图像信号，再送到数字信号处理芯片（DSP）中加工处理，再通过I/O接口传输到CPU中处理，通过display就可以看到图像了。 二：Sensor的基本知识
1：Sensor的工作原理
Lens的作用是滤去不可见光，让可见光进入，并投射到Sensor上。Sensor的工作原理：光照--〉电荷--〉弱电流--〉RGB数字信号波形--〉YUV数字信号信号
2：Sensor 的分类
元件类型不同分为：CCD 和CMOS。CCD（Charge CoupLED Device，），一般是用于摄影摄像方面的高端技术元件。CCD的优点是灵敏度高，噪音小，信噪比大。但是生产工艺复杂、成本高、功耗高。CMOS（Complementary Metal-Oxide Semiconductor，金属氧化物半导体元件）应用于较低影像品质的产品中。CMOS的优点是集成度高、功耗低(不到CCD的1/3)、成本低。但是噪音比较大、灵敏度较低。对于CMOS来说，具有便于大规模生产，且速度快、成本较低，将是数字相机关键器件的发展方向。CMOS感光器以已经有逐渐取代CCD感光器的趋势，并有希望在不久的将来成为主流的感光器。
3：Sensor的封装形式
Sensor的封装形式有两种：CSP和DICE。在模组厂商加工制造中，CSP所对应的制程是SMT，DICE所对应的制程是COB。
4：常用的Sensor的厂商
厂商有omnivision、Siliconfile、Samsung 、SONY、Aptina等
5：Sensor 的基本框图
Sensor 的框图如图所示（以 Ov2718 为例）：
三：ISP 的基本知识
1：ISP的定义
ISP (Image Signal Processor)，即图像处理，主要作用是对前端图像传感器输出的信号做后期处理，主要功能有线性纠正、噪声去除、坏点去除、内插、白平衡、自动曝光控制等，依赖于ISP才能在不同的光学条件下都能较好的还原现场细节。
2：ISP的工作原理
从 Sensor 端过来的图像是 Bayer 图像，经过黑电平补偿、镜头矫正、坏像素矫正、颜色插值、Bayer 噪声去除、白平衡、色彩矫正、Gamma 矫正、色彩空间转换（ RGB 转换为 YUV ）、在 YUV 色彩空间上彩噪去除与边缘加强、色彩与对比度加强，中间还要进行自动曝光控制等，然后输出 YUV（ 或者 RGB ）格式的数据，再通过 I/O 接口传输到 CPU 中处理。（以 OV495 为例）
四：ISP 图像处理算法
1：AE ( Automatic Exposure )" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/40cb3e80b1d9a1249d1b9ca8bf77070c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-21T13:57:22+08:00" />
<meta property="article:modified_time" content="2020-11-21T13:57:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">摄像头工作原理及isp相关知识</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>转载地址：https://blog.csdn.net/wangliang888888/article/details/103695002</p> 
<p>本文转自http://bbs.elecfans.com/jishu_1848707_1_1.html<br> 一：摄像头的基本知识</p> 
<p><strong>1：摄像头结构</strong></p> 
<p>常用的结构如下图所示，主要包括镜头，基座，<a href="http://www.hqchip.com/app/835" rel="nofollow">传感器</a>以及<a href="http://bbs.elecfans.com/zhuti_pads_1.html" rel="nofollow">PCB</a>部分。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/8f/e4/krCtGSmb_o.png"></p> 
<p><strong>2：摄像头模组的种类</strong></p> 
<p>CCM分为4种：FF、MF、AF和ZOOM。FF（Fix Focus），定焦摄像头，是国内目前用的最多摄像头，用于30万和130万的<a href="http://bbs.elecfans.com/zhuti_tel_1.html" rel="nofollow">手机</a>产品。MF（<a href="http://www.elecfans.com/tags/MicroLED/" rel="nofollow">micro</a> Focus），两档变焦摄像头，主要用于近景拍照，如带有名片识别以及条形码识别的手机上，用于130万和200万的手机产品。AF（Auto Focus），自动变焦摄像头，主要用于高像素手机，同时具有MF的功能，用于200万和300万的手机产品。Zoom（Auto Zoom），自动数码变焦摄像头，主要用于相机手机，类似于相机影像的品质，用于300万以上的手机产品。</p> 
<p><strong>3：摄像头的工作原理</strong></p> 
<p>景物(SCE)通过镜头（LENS）生成的<a href="http://www.hqchip.com/app/960" rel="nofollow">光学</a>图像投射到图像传感器(Sensor)表面上，然后转为电信号，经过A/D（模数转换）转换后变为数字图像信号，再送到数字信号处理<a href="http://www.hqchip.com/?u=999" rel="nofollow">芯片</a>（DSP）中加工处理，再通过<a href="http://www.hqchip.com/app/1010" rel="nofollow">I/O</a><a href="http://www.hqchip.com/app/1039" rel="nofollow">接口</a><a href="http://www.elecfans.com/tags/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/" rel="nofollow">传输</a>到CPU中处理，通过<a href="http://www.elecfans.com/tags/Display/" rel="nofollow">display</a>就可以看到图像了。  </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/d5/16/pSNMjCLY_o.png"></p> 
<p><strong>二：Sensor</strong><strong>的基本知识</strong></p> 
<p><strong>1：Sensor的工作原理</strong></p> 
<p>Lens的作用是滤去不可见光，让可见光进入，并投射到Sensor上。Sensor的工作原理：光照--〉电荷--〉弱电流--〉RGB数字信号波形--〉Y<a href="http://www.hqchip.com/app/104" rel="nofollow">UV</a>数字信号信号</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/ae/e2/k3gy8tRJ_o.png"></p> 
<p><strong>2：Sensor 的分类</strong></p> 
<p><a href="http://bbs.elecfans.com/zhuti_yuanjian_1.html" rel="nofollow">元件</a>类型不同分为：CCD 和CMOS。CCD（Charge Coup<a href="http://www.hqchip.com/app/957" rel="nofollow">LED</a> Device，），一般是用于摄影摄像方面的高端技术元件。CCD的优点是灵敏度高，<a href="http://www.elecfans.com/tags/%E5%99%AA%E9%9F%B3/" rel="nofollow">噪音</a>小，信噪比大。但是生产工艺复杂、成本高、功耗高。CMOS（Complementary Metal-Oxide Semiconductor，金属氧化物<a href="http://bbs.elecfans.com/zhuti_bandaoti_1.html" rel="nofollow">半导体</a>元件）应用于较低影像品质的产品中。CMOS的优点是集成度高、功耗低(不到CCD的1/3)、成本低。但是噪音比较大、灵敏度较低。对于CMOS来说，具有便于大规模生产，且速度快、成本较低，将是数字相机关键器件的发展方向。CMOS感光器以已经有逐渐取代CCD感光器的趋势，并有希望在不久的将来成为主流的感光器。</p> 
<p><strong>3：Sensor的封装形式</strong></p> 
<p>Sensor的封装形式有两种：CSP和DICE。在模组厂商加工制造中，CSP所对应的制程是<a href="http://smt.hqchip.com/" rel="nofollow">SMT</a>，DICE所对应的制程是COB。</p> 
<p><strong>4：常用的Sensor的厂商</strong></p> 
<p>厂商有<a href="http://www.elecfans.com/tags/omnivision/" rel="nofollow">omnivision</a>、Siliconfile、Samsung 、SONY、Ap<a href="http://bbs.elecfans.com/zhuti_715_1.html" rel="nofollow">ti</a>na等</p> 
<p><strong>5：Sensor 的基本框图</strong></p> 
<p>Sensor 的框图如图所示（以 O<a href="http://www.elecfans.com/tags/V2X/" rel="nofollow">v2</a>718 为例）：</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/ee/d0/gEiMwx2o_o.png"></p> 
<p><strong>三：ISP </strong><strong>的基本知识</strong></p> 
<p><strong>1：ISP的定义</strong></p> 
<p>ISP (Image Signal Processor)，即图像处理，主要作用是对前端图像传感器输出的信号做后期处理，主要功能有线性纠正、噪声去除、坏点去除、内插、白平衡、自动曝光控制等，依赖于ISP才能在不同的光学条件下都能较好的还原现场细节。</p> 
<p><strong>2：ISP的工作原理</strong></p> 
<p>从 Sensor 端过来的图像是 Bayer 图像，经过黑电平补偿、镜头矫正、坏像素矫正、颜色插值、Bayer 噪声去除、白平衡、色彩矫正、Gamma 矫正、色彩空间转换（ RGB 转换为 YUV ）、在 YUV 色彩空间上彩噪去除与边缘加强、色彩与对比度加强，中间还要进行自动曝光控制等，然后输出 YUV（ 或者 RGB ）格式的数据，再通过 I/O 接口传输到 CPU 中处理。（以 OV495 为例）</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/53/51/EDqLebQr_o.png"></p> 
<p><strong>四：ISP 图像处理算法</strong></p> 
<p><strong>1：AE ( Automatic Exposure )</strong></p> 
<p>自动曝光是指根据光线的强弱自动调整曝光量，防止曝光过度或者不足，在不同的照明条件和场景中实现欣赏亮度级别或所谓的目标亮度级别，从而捕获的视频或图像既不太暗也不太亮。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/2a/de/dm8KcXVg_o.png"></p> 
<p><strong>2：HDR ( High-Dynamic Range Imaging ) 高<a href="http://www.elecfans.com/tags/%E5%8A%A8%E6%80%81%E8%8C%83%E5%9B%B4/" rel="nofollow">动态范围</a>成像</strong></p> 
<p>Sensor的动态范围就是Sensor在一幅图像里能够同时体现高光和阴影部分内容的能力。在自然界的真实情况，有些场景的动态范围要大于100 dB，人眼的动态范围可以达到100dB。高动态范围成像的目的就是要正确地表示真实世界中的亮度范围。适合场景：比较适合在具有背光的高对比度场景下使用如：日落、室内窗户，这样能使明处的景物不致过曝，而使得暗处的景物不致欠曝。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/14/6c/WQCfRjyp_o.png"></p> 
<p><strong>3：AWB ( Auto White Balance ) 自动白平衡</strong></p> 
<p>白平衡就是针对不同光线条件下，通过找到图像中的白块，然后调整 R/G/B 的比例抵消<a href="http://www.elecfans.com/tags/%E5%81%8F%E8%89%B2/" rel="nofollow">偏色</a>，把白色物体还原成白色物体，使其更接近人眼的视觉习惯。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/11/15/Ej4hpdtw_o.png"></p> 
<p><strong>4：CCM ( Color Correction Matrix ) 颜色校正</strong></p> 
<p>颜色校正主要为了校正在滤光板处各颜色块之间的颜色渗透带来的颜色误差。一般颜色校正的过程是首先利用该图像传感器拍摄到的图像与标准图像相比较，以此来计算得到一个校正矩阵。该矩阵就是该图像传感器的颜色校正矩阵。在该图像传感器应用的过程中，及可以利用该矩阵对该图像传感器所拍摄的所有图像来进行校正，以获得最接近于物体真实颜色的图像。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/94/75/cxA2DOhB_o.png"></p> 
<p><strong>5：DNS ( Denoise ) <a href="http://www.elecfans.com/tags/%E5%8E%BB%E5%99%AA/" rel="nofollow">去噪</a></strong></p> 
<p>使用 CMOS Sensor 获取图像，光照程度和传感器问题是生成图像中大量噪声的主要因素。同时，当信号经过 ADC 时，又会引入其他一些噪声。这些噪声会使图像整体变得模糊，而且丢失很多细节，所以需要对图像进行去噪处理空间去噪传统的方法有均值滤波、高斯滤波</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/4e/fb/aUKUux9Y_o.png"></p> 
<p><strong>6：BLC ( Black Level Correction ) 黑电平校正</strong></p> 
<p>Black Level 是用来定义图像数据为 0 时对应的信号电平。由于暗电流的影响，传感器出来的实际原始数据并不是我们需要的黑平衡。为减少暗电流对图像信号的影响，采用的方法是从已获得的图像信号中减去参考暗电流信号。一般情况下,在传感器中，实际像素要比有效像素多,像素区头几行作为不感光区，用于自动黑电平校正,其平均值作为校正值，然后在下面区域的像素都减去此矫正值，那么就可以将黑电平矫正过来了。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/7a/b9/guQ2eNuN_o.png"></p> 
<p><strong>7：LSC ( Lens Shade Correction ) 镜头阴影校正</strong></p> 
<p>由于相机在成像距离较远时，随着视场角慢慢增大，能够通过照相机镜头的斜光束将慢慢减少，从而使得获得的图像中间比较亮，边缘比较暗，这个现象就是光学系统中的渐晕。由于渐晕现象带来的图像亮度不均会影响后续处理的准确性。因此从图像传感器输出的数字信号必须先经过镜头矫正功能块来消除渐晕给图像带来的影响。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/a5/df/EOJwuGL7_o.png"></p> 
<div> 
 <div></div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d2c04385f217a54ab3ba753b7011c863/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VisualStudio2019设置android sdk路径</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5ad74b9814916b2144f4d07d3099ba7a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">tensorflow图像分割unet_案例分享 | 知衣科技利用 TensorFlow 构建 3D 试衣</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>