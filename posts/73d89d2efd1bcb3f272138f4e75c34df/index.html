<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>最新JAVA的NLP工具DJL - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="最新JAVA的NLP工具DJL" />
<meta property="og:description" content="零、其他：NLP工具包 LingPipe
是alias公司开发的一款自然语言处理软件包。
主题分类（Top Classification） 命名实体识别（Named Entity Recognition） 词性标注（Part-of Speech Tagging） 句题检测（Sentence Detection） 查询拼写检查（Query Spell Checking） 兴趣短语检测（Interseting Phrase Detection） 聚类（Clustering） 字符语言建模（Character Language Modeling） 医学文献下载/解析/索引（MEDLINE Download, Parsing and Indexing） 数据库文本挖掘（Database Text Mining） 中文分词（Chinese Word Segmentation） 情感分析（Sentiment Analysis） 语言辨别（Language Identification） HanLP
HanLP是一系列模型与算法组成的NLP工具包，目标是普及自然语言处理在生产环境中的应用。
FudanNLP
FNLP主要是为中文自然语言处理而开发的工具包，也包含为实现这些任务的机器学习算法和数据集。 本工具包及其包含数据集使用LGPL3.0许可证。
信息检索： 文本分类 新闻聚类 中文处理： 中文分词 词性标注 实体名识别 关键词抽取 依存句法分析 时间短语识别 结构化学习： 在线学习 层次分类 聚类 Apache OpenNLP
OpenNLP支持最常见的NLP任务:
例如标记化，句子分段，词性标记，命名实体提取，分块，解析，语言检测和共指解析 Stanford CoreNLP
斯坦福大学开发的自然语言处理工具套件,包括词性标注、命名实体识别、共指消解等 NLP 任务:
一、简介 开源库以Java构建和部署深度学习、编写一次即可在任何地方运行。使用DJL开发模型并在您选择的引擎上运行。直观的API使用本机Java概念并抽象化了深度学习所涉及的复杂性。引入您自己的模型，或使用我们库中的最新模型在几分钟内进行部署。
二、开源地址：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/73d89d2efd1bcb3f272138f4e75c34df/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-28T18:17:49+08:00" />
<meta property="article:modified_time" content="2020-02-28T18:17:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">最新JAVA的NLP工具DJL</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="NLP_0"></a>零、其他：NLP工具包</h3> 
<p><strong>LingPipe</strong></p> 
<p>是alias公司开发的一款自然语言处理软件包。</p> 
<pre><code class="prism language-java">主题分类（Top Classification）
命名实体识别（Named Entity Recognition）
词性标注（Part<span class="token operator">-</span>of Speech Tagging）
句题检测（Sentence Detection）
查询拼写检查（Query Spell Checking）
兴趣短语检测（Interseting Phrase Detection）
聚类（Clustering）
字符语言建模（Character Language Modeling）
医学文献下载<span class="token operator">/</span>解析<span class="token operator">/</span>索引（MEDLINE Download<span class="token punctuation">,</span> Parsing and Indexing）
数据库文本挖掘（Database Text Mining）
中文分词（Chinese Word Segmentation）
情感分析（Sentiment Analysis）
语言辨别（Language Identification）
</code></pre> 
<p><strong>HanLP</strong></p> 
<p>HanLP是一系列模型与算法组成的NLP工具包，目标是普及自然语言处理在生产环境中的应用。<br> <img src="https://images2.imgbox.com/55/1d/ZFrQpkSL_o.png" alt="在这里插入图片描述"><br> <strong>FudanNLP</strong></p> 
<p>FNLP主要是为中文自然语言处理而开发的工具包，也包含为实现这些任务的机器学习算法和数据集。 本工具包及其包含数据集使用LGPL3.0许可证。</p> 
<pre><code class="prism language-java">    信息检索： 文本分类 新闻聚类
	中文处理： 中文分词 词性标注 实体名识别 关键词抽取 依存句法分析 时间短语识别
	结构化学习： 在线学习 层次分类 聚类
</code></pre> 
<p><strong>Apache OpenNLP</strong></p> 
<p>OpenNLP支持最常见的NLP任务:</p> 
<pre><code class="prism language-java">例如标记化，句子分段，词性标记，命名实体提取，分块，解析，语言检测和共指解析
</code></pre> 
<p><strong>Stanford CoreNLP</strong></p> 
<p>斯坦福大学开发的自然语言处理工具套件,包括词性标注、命名实体识别、共指消解等 NLP 任务:<br> <img src="https://images2.imgbox.com/0d/c1/YQDz28xP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_48"></a>一、简介</h3> 
<p>开源库以Java构建和部署深度学习、编写一次即可在任何地方运行。使用DJL开发模型并在您选择的引擎上运行。直观的API使用本机Java概念并抽象化了深度学习所涉及的复杂性。引入您自己的模型，或使用我们库中的最新模型在几分钟内进行部署。</p> 
<p><strong>二、开源地址：</strong><br> <a href="https://github.com/awslabs/djl">https://github.com/awslabs/djl</a></p> 
<p><strong>三、例子或者用法</strong></p> 
<p>1、Single-shot object detection example<br> 2、Train your first model<br> 3、Image classification example<br> 4、Transfer learning example<br> 5、Train SSD model example<br> 6、Multi-threaded inference example<br> 7、Bert question and answer example<br> 8、Instance segmentation example<br> 9、Pose estimation example<br> 10、Action recognition example<br> 11、Multi-label dataset training example</p> 
<p><strong>四、官网地址：</strong></p> 
<p><a href="https://djl.ai/" rel="nofollow">https://djl.ai/</a></p> 
<p><strong>五、代码如下：</strong><br> 1、依赖：</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>project xmlns<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0"</span> xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>modelVersion<span class="token punctuation">&gt;</span></span><span class="token number">4.0</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>modelVersion<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>parent<span class="token punctuation">&gt;</span></span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>parent<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.2</span><span class="token number">.5</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>relativePath<span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> lookup parent from repository <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>parent<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>xxxx<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>bigdata<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.0</span><span class="token number">.1</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span>bigdata<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>description<span class="token punctuation">&gt;</span></span>Demo project <span class="token keyword">for</span> Spring Boot<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>

    <span class="token generics function"><span class="token punctuation">&lt;</span>properties<span class="token punctuation">&gt;</span></span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>java<span class="token punctuation">.</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>java<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>spring<span class="token operator">-</span>cloud<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>Hoxton<span class="token punctuation">.</span>SR1<span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token operator">-</span>cloud<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span>

    <span class="token generics function"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>aws<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>ai<span class="token punctuation">.</span>djl<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>examples<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>ai<span class="token punctuation">.</span>djl<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>api<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>optional<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>optional<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>ai<span class="token punctuation">.</span>djl<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>basicdataset<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>ai<span class="token punctuation">.</span>djl<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>model<span class="token operator">-</span>zoo<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>mxnet<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mxnet<span class="token operator">-</span>model<span class="token operator">-</span>zoo<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>exclusions<span class="token punctuation">&gt;</span></span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>exclusion<span class="token punctuation">&gt;</span></span>
                    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>vintage<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>junit<span class="token operator">-</span>vintage<span class="token operator">-</span>engine<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>exclusion<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>exclusions<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>

    <span class="token generics function"><span class="token punctuation">&lt;</span>dependencyManagement<span class="token punctuation">&gt;</span></span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>dependencies<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{<!-- --></span>spring<span class="token operator">-</span>cloud<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>type<span class="token punctuation">&gt;</span></span>pom<span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span><span class="token keyword">import</span><span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencyManagement<span class="token operator">&gt;</span>

    <span class="token generics function"><span class="token punctuation">&lt;</span>build<span class="token punctuation">&gt;</span></span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>plugins<span class="token punctuation">&gt;</span></span>
            <span class="token generics function"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token operator">&gt;</span>

</code></pre> 
<p>2、问答案例:</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>xxxx<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>nlputils<span class="token punctuation">;</span>

<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>Application<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>ModelException<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>inference<span class="token punctuation">.</span>Predictor<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>mxnet<span class="token punctuation">.</span>zoo<span class="token punctuation">.</span>nlp<span class="token punctuation">.</span>qa<span class="token punctuation">.</span>QAInput<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>repository<span class="token punctuation">.</span>zoo<span class="token punctuation">.</span>Criteria<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>repository<span class="token punctuation">.</span>zoo<span class="token punctuation">.</span>ModelZoo<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>repository<span class="token punctuation">.</span>zoo<span class="token punctuation">.</span>ZooModel<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ProgressBar<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>translate<span class="token punctuation">.</span>TranslateException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>Logger<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>LoggerFactory<span class="token punctuation">;</span>

<span class="token comment">/**
 * An example of inference using BertQA.
 *
 * &lt;p&gt;See:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;the &lt;a href="https://github.com/awslabs/djl/blob/master/jupyter/BERTQA.ipynb"&gt;jupyter
 *       demo&lt;/a&gt; with more information about BERT.
 *   &lt;li&gt;the &lt;a
 *       href="https://github.com/awslabs/djl/blob/master/examples/docs/BERT_question_and_answer.md"&gt;docs&lt;/a&gt;
 *       for information about running this example.
 * &lt;/ul&gt;
 */</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">BertQaInference</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>BertQaInference<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token function">BertQaInference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> TranslateException<span class="token punctuation">,</span> ModelException <span class="token punctuation">{<!-- --></span>
        String answer <span class="token operator">=</span> BertQaInference<span class="token punctuation">.</span><span class="token function">predict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Answer: {}"</span><span class="token punctuation">,</span> answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">predict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> TranslateException<span class="token punctuation">,</span> ModelException <span class="token punctuation">{<!-- --></span>
        String question <span class="token operator">=</span> <span class="token string">"When did BBC Japan start broadcasting?"</span><span class="token punctuation">;</span>
        String paragraph <span class="token operator">=</span>
                <span class="token string">"BBC Japan was a general entertainment Channel.\n"</span>
                        <span class="token operator">+</span> <span class="token string">"Which operated between December 2004 and April 2006.\n"</span>
                        <span class="token operator">+</span> <span class="token string">"It ceased operations after its Japanese distributor folded."</span><span class="token punctuation">;</span>

        QAInput input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QAInput</span><span class="token punctuation">(</span>question<span class="token punctuation">,</span> paragraph<span class="token punctuation">,</span> <span class="token number">384</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Paragraph: {}"</span><span class="token punctuation">,</span> input<span class="token punctuation">.</span><span class="token function">getParagraph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Question: {}"</span><span class="token punctuation">,</span> input<span class="token punctuation">.</span><span class="token function">getQuestion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Criteria<span class="token generics function"><span class="token punctuation">&lt;</span>QAInput<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> criteria <span class="token operator">=</span>
                Criteria<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optApplication</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span>NLP<span class="token punctuation">.</span>QUESTION_ANSWER<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span>QAInput<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optFilter</span><span class="token punctuation">(</span><span class="token string">"backbone"</span><span class="token punctuation">,</span> <span class="token string">"bert"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optFilter</span><span class="token punctuation">(</span><span class="token string">"dataset"</span><span class="token punctuation">,</span> <span class="token string">"book_corpus_wiki_en_uncased"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optProgress</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">(</span>ZooModel<span class="token generics function"><span class="token punctuation">&lt;</span>QAInput<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> model <span class="token operator">=</span> ModelZoo<span class="token punctuation">.</span><span class="token function">loadModel</span><span class="token punctuation">(</span>criteria<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">try</span> <span class="token punctuation">(</span>Predictor<span class="token generics function"><span class="token punctuation">&lt;</span>QAInput<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> predictor <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">newPredictor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> predictor<span class="token punctuation">.</span><span class="token function">predict</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<p>3、训练模型</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>xxxx<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>nlputils<span class="token punctuation">;</span>

<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>Device<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>Model<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>basicdataset<span class="token punctuation">.</span>CaptchaDataset<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>basicmodelzoo<span class="token punctuation">.</span>cv<span class="token punctuation">.</span>classification<span class="token punctuation">.</span>ResNetV1<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>examples<span class="token punctuation">.</span>training<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arguments<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>examples<span class="token punctuation">.</span>training<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ExampleTrainingResult<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>examples<span class="token punctuation">.</span>training<span class="token punctuation">.</span>util<span class="token punctuation">.</span>TrainingUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>metric<span class="token punctuation">.</span>Metrics<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>ndarray<span class="token punctuation">.</span>NDArray<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>ndarray<span class="token punctuation">.</span>NDList<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>ndarray<span class="token punctuation">.</span>types<span class="token punctuation">.</span>Shape<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>Block<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>SequentialBlock<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>DefaultTrainingConfig<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>Trainer<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>Dataset<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>Usage<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>RandomAccessDataset<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>evaluator<span class="token punctuation">.</span>Accuracy<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>TrainingListener<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>loss<span class="token punctuation">.</span>SimpleCompositeLoss<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>loss<span class="token punctuation">.</span>SoftmaxCrossEntropyLoss<span class="token punctuation">;</span>
<span class="token keyword">import</span> ai<span class="token punctuation">.</span>djl<span class="token punctuation">.</span>training<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ProgressBar<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span>Paths<span class="token punctuation">;</span>

<span class="token comment">/**
 * An example of training a CAPTCHA solving model.
 *
 * &lt;p&gt;See this &lt;a
 * href="https://github.com/awslabs/djl/blob/master/examples/docs/train_captcha.md"&gt;doc&lt;/a&gt; for
 * information about this example.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TrainCaptcha</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token function">TrainCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{<!-- --></span>
        TrainCaptcha<span class="token punctuation">.</span><span class="token function">runExample</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> ExampleTrainingResult <span class="token function">runExample</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
        Arguments arguments <span class="token operator">=</span> Arguments<span class="token punctuation">.</span><span class="token function">parseArgs</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">(</span>Model model <span class="token operator">=</span> Model<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            model<span class="token punctuation">.</span><span class="token function">setBlock</span><span class="token punctuation">(</span><span class="token function">getBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// get training and validation dataset</span>
            RandomAccessDataset trainingSet <span class="token operator">=</span> <span class="token function">getDataset</span><span class="token punctuation">(</span>Usage<span class="token punctuation">.</span>TRAIN<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
            RandomAccessDataset validateSet <span class="token operator">=</span> <span class="token function">getDataset</span><span class="token punctuation">(</span>Usage<span class="token punctuation">.</span>VALIDATION<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// setup training configuration</span>
            DefaultTrainingConfig config <span class="token operator">=</span> <span class="token function">setupTrainingConfig</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

            ExampleTrainingResult result<span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">(</span>Trainer trainer <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">newTrainer</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                trainer<span class="token punctuation">.</span><span class="token function">setMetrics</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Metrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                Shape inputShape <span class="token operator">=</span>
                        <span class="token keyword">new</span> <span class="token class-name">Shape</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CaptchaDataset<span class="token punctuation">.</span>IMAGE_HEIGHT<span class="token punctuation">,</span> CaptchaDataset<span class="token punctuation">.</span>IMAGE_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// initialize trainer with proper input shape</span>
                trainer<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>inputShape<span class="token punctuation">)</span><span class="token punctuation">;</span>

                TrainingUtils<span class="token punctuation">.</span><span class="token function">fit</span><span class="token punctuation">(</span>
                        trainer<span class="token punctuation">,</span>
                        arguments<span class="token punctuation">.</span><span class="token function">getEpoch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        trainingSet<span class="token punctuation">,</span>
                        validateSet<span class="token punctuation">,</span>
                        arguments<span class="token punctuation">.</span><span class="token function">getOutputDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token string">"captcha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExampleTrainingResult</span><span class="token punctuation">(</span>trainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            model<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span><span class="token function">getOutputDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"captcha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> DefaultTrainingConfig <span class="token function">setupTrainingConfig</span><span class="token punctuation">(</span>Arguments arguments<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        SimpleCompositeLoss loss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleCompositeLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_LENGTH<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            loss<span class="token punctuation">.</span><span class="token function">addLoss</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SoftmaxCrossEntropyLoss</span><span class="token punctuation">(</span><span class="token string">"loss_digit_"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        DefaultTrainingConfig config <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">DefaultTrainingConfig</span><span class="token punctuation">(</span>loss<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optDevices</span><span class="token punctuation">(</span>Device<span class="token punctuation">.</span><span class="token function">getDevices</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span><span class="token function">getMaxGpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addTrainingListeners</span><span class="token punctuation">(</span>
                                TrainingListener<span class="token punctuation">.</span>Defaults<span class="token punctuation">.</span><span class="token function">logging</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span><span class="token function">getModelDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arguments<span class="token punctuation">.</span><span class="token function">getBatchSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arguments<span class="token punctuation">.</span><span class="token function">getEpoch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arguments<span class="token punctuation">.</span><span class="token function">getMaxGpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arguments<span class="token punctuation">.</span><span class="token function">getOutputDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_LENGTH<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            config<span class="token punctuation">.</span><span class="token function">addEvaluator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Accuracy</span><span class="token punctuation">(</span><span class="token string">"acc_digit_"</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> config<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> RandomAccessDataset <span class="token function">getDataset</span><span class="token punctuation">(</span>Dataset<span class="token punctuation">.</span>Usage usage<span class="token punctuation">,</span> Arguments arguments<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        CaptchaDataset dataset <span class="token operator">=</span>
                CaptchaDataset<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optUsage</span><span class="token punctuation">(</span>usage<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setSampling</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span><span class="token function">getBatchSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">optMaxIteration</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span><span class="token function">getMaxIterations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataset<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dataset<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> Block <span class="token function">getBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Block resnet <span class="token operator">=</span>
                ResNetV1<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setNumLayers</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setImageShape</span><span class="token punctuation">(</span>
                                <span class="token keyword">new</span> <span class="token class-name">Shape</span><span class="token punctuation">(</span>
                                        <span class="token number">1</span><span class="token punctuation">,</span> CaptchaDataset<span class="token punctuation">.</span>IMAGE_HEIGHT<span class="token punctuation">,</span> CaptchaDataset<span class="token punctuation">.</span>IMAGE_WIDTH<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setOutSize</span><span class="token punctuation">(</span>CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_OPTIONS <span class="token operator">*</span> CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_LENGTH<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SequentialBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>resnet<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
                        resnetOutputList <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
                            NDArray resnetOutput <span class="token operator">=</span> resnetOutputList<span class="token punctuation">.</span><span class="token function">singletonOrThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            NDList splitOutput <span class="token operator">=</span>
                                    resnetOutput
                                            <span class="token punctuation">.</span><span class="token function">reshape</span><span class="token punctuation">(</span>
                                                    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
                                                    CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_LENGTH<span class="token punctuation">,</span>
                                                    CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_OPTIONS<span class="token punctuation">)</span>
                                            <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_LENGTH<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                            NDList output <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NDList</span><span class="token punctuation">(</span>CaptchaDataset<span class="token punctuation">.</span>CAPTCHA_LENGTH<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">for</span> <span class="token punctuation">(</span>NDArray outputDigit <span class="token operator">:</span> splitOutput<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                output<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>outputDigit<span class="token punctuation">.</span><span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            <span class="token keyword">return</span> output<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bd7b68eaf58cfca9378e64fff13bf949/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Channel shutdown: channel error; protocol method 错误处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0c06759a2644f868709e1dedb951c527/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">node.js | 从控制台获得输入并输出（同步方式）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>