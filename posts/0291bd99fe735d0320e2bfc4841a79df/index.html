<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>miitool 和ethtool工具介绍 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="miitool 和ethtool工具介绍" />
<meta property="og:description" content="文章来源：https://www.cnblogs.com/fengyv/p/2423895.html
1.1 mii-tool 介绍；
mii-tool - view, manipulate media-independent interface status （mii-tool 是查看，管理介质的网络接口的状态）
有时网卡需要配置协商方式 ，比如10/100/1000M的网卡半双工、全双工、自动协商的配置 。但大多数的网络设备是不用我们来修改协商，因为大多数网络设置接入的时候，都采用自动协商来解决相互通信的问题。不过自动协商也不是万能的，有时也会出现错误，比如丢包率比较高，这时就要我们来指定网卡的协商方式 。
mii-tool 就是能指定网卡的协商方式。下面我们说一说mii-tool的用法；
1.2 mii-tool 的用法；
mii-tool 在更改网络设备通信协商方式的方法比较简单，用 -v 参数来查看网络接口的状态；看下面的例子；
mii-tool 更改网络接口协商的方法；
[root@localhost ~]# mii-tool --help
usage: mii-tool [-VvRrwl] [-A media,... | -F media] [interface ...]
-V, --version display version information
-v, --verbose more verbose output 注：显示网络接口的信息；
-R, --reset reset MII to poweron state 注：重设MII到开启状态；
-r, --restart restart autonegotiation 注：重启自动协商模式；
-w, --watch monitor for link status changes 注：查看网络接口连接的状态变化；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0291bd99fe735d0320e2bfc4841a79df/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T09:39:38+08:00" />
<meta property="article:modified_time" content="2023-12-13T09:39:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">miitool 和ethtool工具介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>文章来源：<a href="https://www.cnblogs.com/fengyv/p/2423895.html" rel="nofollow" title="https://www.cnblogs.com/fengyv/p/2423895.html">https://www.cnblogs.com/fengyv/p/2423895.html</a></p> 
<p>1.1 mii-tool 介绍；<br> mii-tool - view, manipulate media-independent interface status （mii-tool 是查看，管理介质的网络接口的状态）<br> 有时网卡需要配置协商方式 ，比如10/100/1000M的网卡半双工、全双工、自动协商的配置 。但大多数的网络设备是不用我们来修改协商，因为大多数网络设置接入的时候，都采用自动协商来解决相互通信的问题。不过自动协商也不是万能的，有时也会出现错误，比如丢包率比较高，这时就要我们来指定网卡的协商方式 。<br> mii-tool 就是能指定网卡的协商方式。下面我们说一说mii-tool的用法；<br><br> 1.2 mii-tool 的用法；</p> 
<p><br> mii-tool 在更改网络设备通信协商方式的方法比较简单，用 -v 参数来查看网络接口的状态；看下面的例子；<br> mii-tool 更改网络接口协商的方法；<br> [root@localhost ~]# mii-tool --help<br> usage: mii-tool [-VvRrwl] [-A media,... | -F media] [interface ...]<br>        -V, --version display version information<br>        -v, --verbose more verbose output 注：显示网络接口的信息；<br>        -R, --reset reset MII to poweron state 注：重设MII到开启状态；<br>        -r, --restart restart autonegotiation 注：重启自动协商模式；<br>        -w, --watch monitor for link status changes 注：查看网络接口连接的状态变化；<br>        -l, --log with -w, write events to syslog 注：写入事件到系统日志；<br>        -A, --advertise=media,... advertise only specified media 注：指令特定的网络接口；<br>        -F, --force=media force specified media technology 注：更改网络接口协商方式；<br> media: 100baseT4, 100baseTx-FD, 100baseTx-HD, 10baseT-FD, 10baseT-HD,<br>        (to advertise both HD and FD) 100baseTx, 10baseT<br><br> ＊ 实例一：查看网络接口的协商状态；<br> [root@localhost ~]# mii-tool -v eth0<br> eth0: negotiated 100baseTx-FD, link ok<br>   product info: vendor 00:00:00, model 0 rev 0<br> basic mode: autonegotiation enabled<br>   basic status: autonegotiation complete, link ok<br>   capabilities: 100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD<br>   advertising:  100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD<br>   link partner: 100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD flow-control<br> 注：上面的例子，我们可以看得到是自动协商。注意红字的部份；</p> 
<p><br> ＊ 实例二：更改网络接口协商方式；<br> 更改网络接口的协商方式，我们要用到－F选项，后面可以接 100baseT4, 100baseTx-FD, 100baseTx-HD, 10baseT-FD, 10baseT-HD等参数；<br> 如果我们想把网络接口eth0改为 1000Mb/s全双工的模式应该怎么办呢？<br> [root@localhost ~]# mii-tool -F  100baseTx-FD<br> [root@localhost ~]#mii-tool -v eth0<br> eth0: 100 Mbit, full duplex, link ok<br>   product info: vendor 00:00:00, model 0 rev 0<br> basic mode: 100 Mbit, full duplex<br>   basic status: link ok<br>   capabilities: 100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD<br>   advertising:  100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD<br> 注：是不是已经改过来了？当然，我们也一样用ethtool 工具来更改，比如执行下面的命令；<br> [root@localhost ~]# ethtool -s eth0 speed 100 duplex full<br><br> 2、ethtool 工具关于网络协商功能介绍；<br> ethtool - Display or change ethernet card settings（ethtool 是用来显示和更改网卡设置的工具）；这个工具比较复杂，功能也特别多。由于洋文比较难懂。所以我们还是把网络设备协商方式的设置方法说一说。</p> 
<p><br> 2.1 ethtool 显示网络端口设置功能；<br> 这个功能比较好办。就是ethtool 后面直接接网絽接口就行；比如下面的例子；<br> [root@localhost ~]# ethtool eth0<br> Settings for eth0:<br>         Supported ports: [ TP MII ]<br>         Supported link modes: 10baseT/Half 10baseT/Full<br>                                 100baseT/Half 100baseT/Full<br>         Supports auto-negotiation: Yes<br>         Advertised link modes: 10baseT/Half 10baseT/Full<br>                                 100baseT/Half 100baseT/Full<br>         Advertised auto-negotiation: No 注：自动协商关闭<br>         Speed: 100Mb/s 注：速度 100Mb<br>         Duplex: Full 注：全双工<br>         Port: MII<br>         PHYAD: 32<br>         Transceiver: internal<br>         Auto-negotiation: off<br>         Supports Wake-on: pumbg<br>         Wake-on: d<br>         Current message level: 0x00000007 (7)<br>         Link detected: yes 注：eth0已经激活；</p> 
<p><br> 2.2 ethtool 设置网卡的协商模式；<br> 在ethtool的-h帮助中我们查看到有这样的帮助信息；<br> ethtool -s DEVNAME /<br>                 [ speed 10|100|1000 ] /<br>                 [ duplex half|full ] /<br>                 [ port tp|aui|bnc|mii|fibre ] /<br>                 [ autoneg on|off ] /</p> 
<p><br> ＊ 实例一： 把网卡eth0 速度改为10Mb/s，采用半双工；<br> [root@cuc03 beinan]# ethtool -s eth1 speed 10 duplex half<br> [root@cuc03 beinan]# ethtool eth1<br> Settings for eth1:<br>         Supported ports: [ TP MII ]<br>         Supported link modes:   10baseT/Half 10baseT/Full<br>                                 100baseT/Half 100baseT/Full<br>         Supports auto-negotiation: Yes<br>         Advertised link modes:  10baseT/Half 10baseT/Full<br>                                 100baseT/Half 100baseT/Full<br>         Advertised auto-negotiation: No<br>         Speed: 10Mb/s 注：速度 10M/s<br>         Duplex: Half  注：半双工<br>         Port: MII<br>         PHYAD: 32<br>         Transceiver: internal<br>         Auto-negotiation: off<br>         Supports Wake-on: pumbg<br>         Wake-on: d<br>         Current message level: 0x00000007 (7)<br>         Link detected: no 注：eth1没有激活；</p> 
<p><br> ＊ 实例二： 把网卡eth0 速度改为100Mb/s，采用全双工；<br> [root@cuc03 beinan]# ethtool -s eth1 speed 100 duplex full<br> [root@cuc03 beinan]# ethtool eth1<br> Settings for eth1:<br>         Supported ports: [ TP MII ]<br>         Supported link modes:   10baseT/Half 10baseT/Full<br>                                 100baseT/Half 100baseT/Full<br>         Supports auto-negotiation: Yes<br>         Advertised link modes:  10baseT/Half 10baseT/Full<br>                                 100baseT/Half 100baseT/Full<br>         Advertised auto-negotiation: No<br>         Speed: 100Mb/s  注：速度 100M/s<br>         Duplex: Full 注：全双工<br>         Port: MII<br>         PHYAD: 32<br>         Transceiver: internal<br>         Auto-negotiation: off<br>         Supports Wake-on: pumbg<br>         Wake-on: d<br>         Current message level: 0x00000007 (7)<br>         Link detected: no 注：eth1网卡没有激活；</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/652be055093e3795522d4d4308226aa7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">哪些数据适合放入缓存？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5712374897436894564d4c320919a44/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RTS核心技术:流场寻路详解(Flow Field Pathfinding)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>