<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Compose | UI组件(十二) | Lazy Layout - 列表 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Compose | UI组件(十二) | Lazy Layout - 列表" />
<meta property="og:description" content="文章目录 前言LazyListScope作用域 用来干什么？LazyColumn组件含义？LazyColumn的基本使用LazyColumn Padding设置边距LazyColumn 设置边距 (contentPadding)LazyColumn 为每个子项设置边距 (Arrangement.spacedBy())LazyColumn 根据 rememberLazyListState 记录item位置根据 items函数 新增 一个key参数，增加和删除操作时，提高页面性能问题 LazyRow的含义LazyRow的使用 总结 前言 现在应用市场上很多产品都少不了列表展示需求场景，例如通讯录，短信，音乐列表等等。
所以本篇文章讲解的组件 - 列表 （LazyList 和 LazyRow ）
在了解 LazyList 和 LazyRow 之前，我们先了解下 LazyListScope作用域
LazyListScope作用域 用来干什么？ LazyColumn 和 LazyRow 内部都是继承 LazyList组件 实现，但 LazyList 不能直接使用
LazyList 的 content 是一个 LazyListScope.() -&gt; Unit 类型的作用域
LazyListScope 提供了 item , items(Int) , item(List) , itemsIndexed(List) 扩展函数来展示列表内容
item：展示单项数据
items(Int)：展示多项整型数据
items(List) 展示一组集合数据
itemsIndexed(List) 展示一组集合数据，并且带有下标
val list = (&#39;A&#39;..&#39;Z&#39;).map { it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5e2faf4d7d1ae29685e441108b708884/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-30T23:50:45+08:00" />
<meta property="article:modified_time" content="2024-01-30T23:50:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Compose | UI组件(十二) | Lazy Layout - 列表</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">前言</a></li><li><ul><li><a href="#LazyListScope__14" rel="nofollow">LazyListScope作用域 用来干什么？</a></li><li><a href="#LazyColumn_46" rel="nofollow">LazyColumn组件含义？</a></li><li><a href="#LazyColumn_65" rel="nofollow">LazyColumn的基本使用</a></li><li><ul><li><a href="#LazyColumn_Padding_86" rel="nofollow">LazyColumn Padding设置边距</a></li><li><a href="#LazyColumn__contentPadding_121" rel="nofollow">LazyColumn 设置边距 (contentPadding)</a></li><li><a href="#LazyColumn__ArrangementspacedBy_151" rel="nofollow">LazyColumn 为每个子项设置边距 (Arrangement.spacedBy())</a></li><li><a href="#LazyColumn__rememberLazyListState_item_178" rel="nofollow">LazyColumn 根据 rememberLazyListState 记录item位置</a></li><li><a href="#_items__key_243" rel="nofollow">根据 items函数 新增 一个key参数，增加和删除操作时，提高页面性能问题</a></li></ul> 
   </li><li><a href="#LazyRow_259" rel="nofollow">LazyRow的含义</a></li><li><ul><li><a href="#LazyRow_278" rel="nofollow">LazyRow的使用</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_306" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_5"></a>前言</h2> 
<p>现在应用市场上很多产品都少不了列表展示需求场景，例如通讯录，短信，音乐列表等等。</p> 
<p>所以本篇文章讲解的组件 - <strong>列表</strong> （<strong>LazyList</strong> 和 <strong>LazyRow</strong> ）</p> 
<hr> 
<blockquote> 
 <p>在了解 <strong>LazyList</strong> 和 <strong>LazyRow</strong> 之前，我们先了解下 <strong>LazyListScope作用域</strong></p> 
</blockquote> 
<h3><a id="LazyListScope__14"></a>LazyListScope作用域 用来干什么？</h3> 
<blockquote> 
 <p><strong>LazyColumn</strong> 和 <strong>LazyRow</strong> 内部都是继承 <strong>LazyList组件</strong> 实现，但 <strong>LazyList</strong> 不能直接使用</p> 
 <p><strong>LazyList</strong> 的 <strong>content</strong> 是一个 <strong>LazyListScope.() -&gt; Unit</strong> 类型的作用域<br> <strong>LazyListScope</strong> 提供了 <strong>item</strong> , <strong>items(Int)</strong> , <strong>item(List)</strong> , <strong>itemsIndexed(List)</strong> 扩展函数来展示列表内容</p> 
</blockquote> 
<blockquote> 
 <p>item：展示单项数据<br> items(Int)：展示多项整型数据<br> items(List) 展示一组集合数据<br> itemsIndexed(List) 展示一组集合数据，并且带有下标</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token operator">..</span><span class="token char">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
LazyColumn<span class="token punctuation">{<!-- --></span>
    item <span class="token punctuation">{<!-- --></span> <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"first item"</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    
    <span class="token function">items</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> index <span class="token operator">-&gt;</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    item <span class="token punctuation">{<!-- --></span> <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"last item"</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

    <span class="token function">items</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  item <span class="token operator">-&gt;</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">itemsIndexed</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> item <span class="token operator">-&gt;</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">item</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="LazyColumn_46"></a>LazyColumn组件含义？</h3> 
<blockquote> 
 <p>LazyColumn 就是一个纵向滚动列表，用来显示一组纵向数据，并且可以滑动列表</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">LazyColumn</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>                                     <span class="token comment">//修饰符</span>
    state<span class="token operator">:</span> LazyListState <span class="token operator">=</span> <span class="token function">rememberLazyListState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token comment">//记录列表位置状态</span>
    contentPadding<span class="token operator">:</span> PaddingValues <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>               <span class="token comment">//整体内容周围的一个边距</span>
    reverseLayout<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                                    <span class="token comment">//是否反转列表</span>
    verticalArrangement<span class="token operator">:</span> Arrangement<span class="token punctuation">.</span>Vertical <span class="token operator">=</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reverseLayout<span class="token punctuation">)</span> Arrangement<span class="token punctuation">.</span>Top <span class="token keyword">else</span> Arrangement<span class="token punctuation">.</span>Bottom<span class="token punctuation">,</span>   <span class="token comment">//子组件纵向对齐方式</span>
    horizontalAlignment<span class="token operator">:</span> Alignment<span class="token punctuation">.</span>Horizontal <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>       <span class="token comment">//子组件横向对齐方式</span>
    flingBehavior<span class="token operator">:</span> FlingBehavior <span class="token operator">=</span> ScrollableDefaults<span class="token punctuation">.</span><span class="token function">flingBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//fling行为处理逻辑</span>
    userScrollEnabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                                 <span class="token comment">//是否允许滑动</span>
    content<span class="token operator">:</span> LazyListScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit                                  <span class="token comment">//LazyList作用域</span>
<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="LazyColumn_65"></a>LazyColumn的基本使用</h3> 
<blockquote> 
 <p><strong>LazyColumn</strong> 组件 相比传统的 <strong>RecyclerView</strong> 少写很多代码<br> <strong>RecyclerView</strong> 需要在xml中声明一个<strong>RecyclerView</strong>控件，再在xml中声明一个子控件，再创建一个适配器Adapter，最后在activity中 指定 <strong>RecyclerView</strong> 的布局类型，再为其填充数据<br> <strong>LazyColumn</strong> 就很简单了，看如下代码的实现，就知道了</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">LazyColumnList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    LazyColumn <span class="token punctuation">{<!-- --></span>
        <span class="token function">items</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> i <span class="token operator">-&gt;</span>
            <span class="token function">Text</span><span class="token punctuation">(</span>
                text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">i</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
                modifier <span class="token operator">=</span> Modifier
                    <span class="token punctuation">.</span><span class="token function">fillMaxWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="LazyColumn_Padding_86"></a>LazyColumn Padding设置边距</h4> 
<blockquote> 
 <p>Padding可以设置列表边距，但是会出现切割现象，我们来看下代码</p> 
</blockquote> 
<pre><code class="prism language-kotlin">    <span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token operator">..</span><span class="token char">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    LazyColumn <span class="token punctuation">{<!-- --></span>
        <span class="token function">itemsIndexed</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> letter <span class="token operator">-&gt;</span>
            <span class="token function">Card</span><span class="token punctuation">(</span>
                modifier <span class="token operator">=</span> Modifier
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">Text</span><span class="token punctuation">(</span>
                    text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">letter</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
                    textAlign <span class="token operator">=</span> TextAlign<span class="token punctuation">.</span>Center<span class="token punctuation">,</span>
                    fontSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
                    modifier <span class="token operator">=</span> Modifier
                        <span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">wrapContentHeight</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>CenterVertically<span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>现在看下运行代码的效果：<br> <img src="https://images2.imgbox.com/20/dd/xvdTQwGy_o.gif" alt="在这里插入图片描述"></p> 
<p>注：<br> 从上图可以看出来最后一个出现了被切割现象，那如何解决这个问题呢？</p> 
<p>那就要用到 <strong>LazyColumn</strong> 提供的 <strong>contentPadding</strong> 解决</p> 
<h4><a id="LazyColumn__contentPadding_121"></a>LazyColumn 设置边距 (contentPadding)</h4> 
<blockquote> 
 <p>LazyColumn 设置边距用的是contentPadding，能保证上下两边的边距相等同时，还不会在滚动的时候，出现切割现象</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token operator">..</span><span class="token char">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token function">LazyColumn</span><span class="token punctuation">(</span>contentPadding <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span>top <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> bottom <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token function">itemsIndexed</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> letter <span class="token operator">-&gt;</span>
         <span class="token function">Card</span><span class="token punctuation">(</span>
             modifier <span class="token operator">=</span> Modifier
                 <span class="token punctuation">.</span><span class="token function">fillMaxWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                 <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
<span class="token comment">//                    .padding(10.dp)</span>
         <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
             <span class="token function">Text</span><span class="token punctuation">(</span>
                 text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">letter</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
                 textAlign <span class="token operator">=</span> TextAlign<span class="token punctuation">.</span>Center<span class="token punctuation">,</span>
                 fontSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
                 modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapContentHeight</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>CenterVertically<span class="token punctuation">)</span>
             <span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>现在再看下效果图：<br> <img src="https://images2.imgbox.com/de/39/vvTV0JzE_o.gif" alt="在这里插入图片描述"></p> 
<p>注：<br> 现在可以看出来，没有切割的现象了，但有个问题，中间没有了间距<br> Lazy Layout提供了专门给子项之间设置边距的属性，使用Arrangement.spacedBy()即可</p> 
<h4><a id="LazyColumn__ArrangementspacedBy_151"></a>LazyColumn 为每个子项设置边距 (Arrangement.spacedBy())</h4> 
<blockquote> 
 <p>Arrangement.spacedBy() 专门为子项设置边距</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token operator">..</span><span class="token char">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token function">LazyColumn</span><span class="token punctuation">(</span>contentPadding <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span>top <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> bottom <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
           verticalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span><span class="token function">spacedBy</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		    <span class="token function">itemsIndexed</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> letter <span class="token operator">-&gt;</span>
		        <span class="token function">Card</span><span class="token punctuation">(</span>
		            modifier <span class="token operator">=</span> Modifier
		                <span class="token punctuation">.</span><span class="token function">fillMaxWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		                <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
		        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		            <span class="token function">Text</span><span class="token punctuation">(</span>
		                text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">letter</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
		                textAlign <span class="token operator">=</span> TextAlign<span class="token punctuation">.</span>Center<span class="token punctuation">,</span>
		                fontSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
		                modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		                                   <span class="token punctuation">.</span><span class="token function">wrapContentHeight</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>CenterVertically<span class="token punctuation">)</span>
		            <span class="token punctuation">)</span>
		        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>效果图如下：<br> <img src="https://images2.imgbox.com/50/c4/zeLUJ5Bv_o.gif" alt="在这里插入图片描述"></p> 
<h4><a id="LazyColumn__rememberLazyListState_item_178"></a>LazyColumn 根据 rememberLazyListState 记录item位置</h4> 
<blockquote> 
 <p>有时候有这样的需求：让组件随着列表的滚动进行一些额外的响应。如随着滚动隐藏和显示某个组件<br> 这时候 rememberLazyListState 就排上用场了</p> 
</blockquote> 
<p>以下是rememberLazyListState 源码：</p> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">rememberLazyListState</span><span class="token punctuation">(</span>
    initialFirstVisibleItemIndex<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token comment">//第一个可见子项元素的下标</span>
    initialFirstVisibleItemScrollOffset<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment">//第一个可见子项元素的偏移距离</span>
<span class="token punctuation">)</span><span class="token operator">:</span> LazyListState <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">rememberSaveable</span><span class="token punctuation">(</span>saver <span class="token operator">=</span> LazyListState<span class="token punctuation">.</span>Saver<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">LazyListState</span><span class="token punctuation">(</span>
            initialFirstVisibleItemIndex<span class="token punctuation">,</span>
            initialFirstVisibleItemScrollOffset
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>根据列表第一项可见显示组件，不可见隐藏组件</p> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@SuppressLint</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"FrequentlyChangedStateReadInComposition"</span></span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">ListLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> state <span class="token operator">=</span> <span class="token function">rememberLazyListState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    Box <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token operator">..</span><span class="token char">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token function">LazyColumn</span><span class="token punctuation">(</span>state <span class="token operator">=</span> state<span class="token punctuation">,</span>
            contentPadding <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span>top <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> bottom <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
            verticalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span><span class="token function">spacedBy</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">itemsIndexed</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> letter <span class="token operator">-&gt;</span>
                <span class="token function">Card</span><span class="token punctuation">(</span>
                    modifier <span class="token operator">=</span> Modifier
                        <span class="token punctuation">.</span><span class="token function">fillMaxWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
                <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">Text</span><span class="token punctuation">(</span>
                        text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">letter</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
                        textAlign <span class="token operator">=</span> TextAlign<span class="token punctuation">.</span>Center<span class="token punctuation">,</span>
                        fontSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
                        modifier <span class="token operator">=</span> Modifier
                            <span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">wrapContentHeight</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>CenterVertically<span class="token punctuation">)</span>
                    <span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>firstVisibleItemIndex  <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
                onClick <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                shape <span class="token operator">=</span> CircleShape<span class="token punctuation">,</span>
                modifier <span class="token operator">=</span> Modifier
                    <span class="token punctuation">.</span><span class="token function">align</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>CenterEnd<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Star<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Add Button"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/da/9f/GuD0SbRz_o.gif" alt="在这里插入图片描述"></p> 
<h4><a id="_items__key_243"></a>根据 items函数 新增 一个key参数，增加和删除操作时，提高页面性能问题</h4> 
<blockquote> 
 <p>因为compose中往列表添加一项数据，就会整体往后移，数据越多，页面性能越差<br> 所以Google给出了一个解决方案：在items函数添加一个唯一标识的key</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">SubVerticalScrollable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token operator">..</span><span class="token char">'Z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token function">LazyColumn</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">items</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> it <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> letter <span class="token operator">-&gt;</span>
            <span class="token operator">..</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="LazyRow_259"></a>LazyRow的含义</h3> 
<blockquote> 
 <p>LazyRow 和 LazyColumn用法基本相同，唯一不同的是横向布局的列表组件</p> 
</blockquote> 
<pre><code class="prism language-kotlin"><span class="token annotation builtin">@Composable</span>
<span class="token keyword">fun</span> <span class="token function">LazyRow</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>                                     <span class="token comment">//修饰符</span>
    state<span class="token operator">:</span> LazyListState <span class="token operator">=</span> <span class="token function">rememberLazyListState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token comment">//记录列表位置状态</span>
    contentPadding<span class="token operator">:</span> PaddingValues <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>               <span class="token comment">//整体内容周围的一个边距</span>
    reverseLayout<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                                    <span class="token comment">//是否反转列表</span>
    horizontalArrangement<span class="token operator">:</span> Arrangement<span class="token punctuation">.</span>Horizontal <span class="token operator">=</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reverseLayout<span class="token punctuation">)</span> Arrangement<span class="token punctuation">.</span>Start <span class="token keyword">else</span> Arrangement<span class="token punctuation">.</span>End<span class="token punctuation">,</span>    <span class="token comment">//子组件横向对齐方式</span>
    verticalAlignment<span class="token operator">:</span> Alignment<span class="token punctuation">.</span>Vertical <span class="token operator">=</span> Alignment<span class="token punctuation">.</span>Top<span class="token punctuation">,</span>             <span class="token comment">//子组件纵向对齐方式</span>
    flingBehavior<span class="token operator">:</span> FlingBehavior <span class="token operator">=</span> ScrollableDefaults<span class="token punctuation">.</span><span class="token function">flingBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//fling行为处理逻辑</span>
    userScrollEnabled<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                                 <span class="token comment">//是否允许滑动</span>
    content<span class="token operator">:</span> LazyListScope<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit                                  <span class="token comment">//LazyList作用域</span>
<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="LazyRow_278"></a>LazyRow的使用</h4> 
<pre><code class="prism language-kotlin"><span class="token function">LazyRow</span><span class="token punctuation">(</span>contentPadding <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span>top <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> bottom <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">.</span>dp<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
	    verticalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span><span class="token function">spacedBy</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token function">itemsIndexed</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> letter <span class="token operator">-&gt;</span>
	        <span class="token function">Card</span><span class="token punctuation">(</span>
	            modifier <span class="token operator">=</span> Modifier
	                <span class="token punctuation">.</span><span class="token function">fillMaxWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	                <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
	        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	            <span class="token function">Text</span><span class="token punctuation">(</span>
	                text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">letter</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
	                textAlign <span class="token operator">=</span> TextAlign<span class="token punctuation">.</span>Center<span class="token punctuation">,</span>
	                fontSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
	                modifier <span class="token operator">=</span> Modifier
	                    <span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	                    <span class="token punctuation">.</span><span class="token function">wrapContentHeight</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>CenterVertically<span class="token punctuation">)</span>
	            <span class="token punctuation">)</span>
	        <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>	
</code></pre> 
<p>到这里，基本上Lazy Layout 基本上覆盖到了，还有什么问题，可以到官网查询</p> 
<hr> 
<h2><a id="_306"></a>总结</h2> 
<ol><li>LazyListScope作用域提供了 <strong>item</strong> , <strong>items(Int)</strong> , <strong>item(List)</strong> , <strong>itemsIndexed(List)</strong> 扩展函数来展示列表内容</li><li>LazyColumn 就是一个纵向滚动列表</li><li>contentPadding 设置列表组件的整个内容的边距</li><li>Arrangement.spacedBy() 为列表的每个子项设置边距</li><li>LazyColumn 根据 rememberLazyListState 记录第一个可见子项元素位置</li><li>items函数 新增 一个key参数，设置唯一性，增加和删除操作时，性能得到优化和提高</li><li>LazyRow 是一个横向布局的列表组件，用法和 LazyColumn一致</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c81f2fecb9f0a4701ecd40fffeb0227a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">常用芯片学习——CD4094芯片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/87f220b40cc93e1c6d583a39f309246d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS 7 部署 ZeroTier Moon 节点</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>