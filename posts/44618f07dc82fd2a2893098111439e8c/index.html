<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shader眼球效果 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shader眼球效果" />
<meta property="og:description" content="（1）眼睛，眼球，
相关介绍：
眼睛介绍
效果图：
其中用到的知识点： 视差，漫反射，环境反射
直接贴上代码：
里面有注释：
Shader &#34;Eye&#34; { Properties { _BaseMap (&#34;_BaseMap&#34;, 2D) = &#34;white&#34; {} _NormalMap (&#34;_NormalMap&#34;, 2D) = &#34;bump&#34; {} _Parallax(&#34;_Parallax&#34;,float) = -0.1	_DecalMap (&#34;_DecalMap&#34;, 2D) = &#34;white&#34; {}	// 光滑度 _Roughness(&#34;_Roughness&#34;,range(0,1)) = 0.5 _EnvMap(&#34;_EnvMap&#34;,Cube) = &#34;_Skybox&#34;{} _EnvRotate(&#34;眼球的旋转_EnvRotate&#34;,Range(0,360)) = 0 _EnvIntensity(&#34;_EnvIntensity&#34;,range(0,5)) = 1 } SubShader { Tags { &#34;RenderType&#34;=&#34;Opaque&#34; &#34;LightMode&#34;=&#34;ForwardBase&#34;} Pass { CGPROGRAM #pragma vertex vert #pragma fragment frag #pragma multi_compile_fwdbase #include &#34;UnityCG.cginc&#34; #include &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/44618f07dc82fd2a2893098111439e8c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-01T16:01:47+08:00" />
<meta property="article:modified_time" content="2021-08-01T16:01:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shader眼球效果</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>（1）眼睛，眼球，<br> <img src="https://images2.imgbox.com/2b/c1/2QeVrewt_o.png" alt="在这里插入图片描述"></p> 
<p>相关介绍：<br> <a href="https://blog.csdn.net/wolf96/article/details/44586679?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162780384516780261983617%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162780384516780261983617&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-4-44586679.pc_search_result_control_group&amp;utm_term=%E7%9C%BC%E7%9D%9Bshder&amp;spm=1018.2226.3001.4187">眼睛介绍</a></p> 
<p>效果图：<br> <img src="https://images2.imgbox.com/ed/85/Wg6YZ5q8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/04/f6/7PEpR6iV_o.png" alt="在这里插入图片描述">其中用到的知识点： 视差，漫反射，环境反射<br> 直接贴上代码：<br> 里面有注释：</p> 
<pre><code class="prism language-csharp">Shader <span class="token string">"Eye"</span>
<span class="token punctuation">{<!-- --></span>
	Properties
	<span class="token punctuation">{<!-- --></span>
		_BaseMap <span class="token punctuation">(</span><span class="token string">"_BaseMap"</span><span class="token punctuation">,</span> <span class="token number">2D</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"white"</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		_NormalMap <span class="token punctuation">(</span><span class="token string">"_NormalMap"</span><span class="token punctuation">,</span> <span class="token number">2D</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"bump"</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token function">_Parallax</span><span class="token punctuation">(</span><span class="token string">"_Parallax"</span><span class="token punctuation">,</span><span class="token keyword">float</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.1</span>	
		_DecalMap <span class="token punctuation">(</span><span class="token string">"_DecalMap"</span><span class="token punctuation">,</span> <span class="token number">2D</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"white"</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>		
		<span class="token comment">// 光滑度</span>
		<span class="token function">_Roughness</span><span class="token punctuation">(</span><span class="token string">"_Roughness"</span><span class="token punctuation">,</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0.5</span>
		<span class="token function">_EnvMap</span><span class="token punctuation">(</span><span class="token string">"_EnvMap"</span><span class="token punctuation">,</span>Cube<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"_Skybox"</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token function">_EnvRotate</span><span class="token punctuation">(</span><span class="token string">"眼球的旋转_EnvRotate"</span><span class="token punctuation">,</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
		<span class="token function">_EnvIntensity</span><span class="token punctuation">(</span><span class="token string">"_EnvIntensity"</span><span class="token punctuation">,</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>

	<span class="token punctuation">}</span>
	SubShader
	<span class="token punctuation">{<!-- --></span>
		Tags <span class="token punctuation">{<!-- --></span> <span class="token string">"RenderType"</span><span class="token operator">=</span><span class="token string">"Opaque"</span> <span class="token string">"LightMode"</span><span class="token operator">=</span><span class="token string">"ForwardBase"</span><span class="token punctuation">}</span>
	

		Pass
		<span class="token punctuation">{<!-- --></span>
			CGPROGRAM
			<span class="token preprocessor property">#<span class="token directive keyword">pragma</span> vertex vert</span>
			<span class="token preprocessor property">#<span class="token directive keyword">pragma</span> fragment frag</span>
			
			<span class="token preprocessor property">#<span class="token directive keyword">pragma</span> multi_compile_fwdbase</span>
			<span class="token preprocessor property">#include </span><span class="token string">"UnityCG.cginc"</span>
			<span class="token preprocessor property">#include </span><span class="token string">"AutoLight.cginc"</span>
			<span class="token keyword">struct</span> <span class="token class-name">appdata</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token class-name">float4</span> vertex <span class="token punctuation">:</span> POSITION<span class="token punctuation">;</span>
				<span class="token class-name">float2</span> texcoord0 <span class="token punctuation">:</span> TEXCOORD0<span class="token punctuation">;</span>
				<span class="token class-name">float3</span> normal <span class="token punctuation">:</span> NORMAL<span class="token punctuation">;</span>
				<span class="token class-name">float4</span> tangent <span class="token punctuation">:</span> TANGENT<span class="token punctuation">;</span>
				<span class="token comment">// 顶点色 颜色   可以用作遮罩</span>
				<span class="token class-name">float4</span> color <span class="token punctuation">:</span> COLOR<span class="token punctuation">;</span>

			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">struct</span> <span class="token class-name">v2f</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token class-name">float4</span> pos <span class="token punctuation">:</span> SV_POSITION<span class="token punctuation">;</span>
				<span class="token class-name">float2</span> uv <span class="token punctuation">:</span> TEXCOORD0<span class="token punctuation">;</span>
				<span class="token class-name">float3</span> posWorld <span class="token punctuation">:</span> TEXCOORD1<span class="token punctuation">;</span>
				<span class="token class-name">float3</span> normalDir <span class="token punctuation">:</span> TEXCOORD2<span class="token punctuation">;</span>
				<span class="token class-name">float3</span> tangentDir <span class="token punctuation">:</span> TEXCOORD3<span class="token punctuation">;</span>
				<span class="token class-name">float3</span> binormalDir <span class="token punctuation">:</span> TEXCOORD4<span class="token punctuation">;</span>
				
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token class-name">sampler2D</span> _BaseMap<span class="token punctuation">,</span>_NormalMap<span class="token punctuation">;</span>
			<span class="token comment">//贴花的图</span>
			<span class="token class-name">sampler2D</span> _DecalMap<span class="token punctuation">;</span>
		
			<span class="token class-name"><span class="token keyword">float</span></span> _Roughness<span class="token punctuation">;</span>
			<span class="token class-name">samplerCUBE</span> _EnvMap<span class="token punctuation">;</span>
			<span class="token class-name">float4</span> _EnvMap_HDR<span class="token punctuation">;</span>
			<span class="token class-name"><span class="token keyword">float</span></span> _EnvIntensity<span class="token punctuation">;</span>
			<span class="token class-name"><span class="token keyword">float</span></span> _EnvRotate<span class="token punctuation">;</span>
			<span class="token class-name"><span class="token keyword">float</span></span> _Parallax<span class="token punctuation">;</span>
			<span class="token comment">//旋转</span>
			<span class="token return-type class-name">float3</span> <span class="token function">RotateAround</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> degree<span class="token punctuation">,</span><span class="token class-name">float3</span> target<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token class-name"><span class="token keyword">float</span></span> rad <span class="token operator">=</span> degree <span class="token operator">*</span> UNITY_PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
				<span class="token class-name">float2x2</span> m_rotate <span class="token operator">=</span> <span class="token function">float2x2</span><span class="token punctuation">(</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float2</span> dir_rotate <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>m_rotate<span class="token punctuation">,</span>target<span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>
				target <span class="token operator">=</span> <span class="token function">float3</span><span class="token punctuation">(</span>dir_rotate<span class="token punctuation">.</span>x<span class="token punctuation">,</span>target<span class="token punctuation">.</span>y<span class="token punctuation">,</span>dir_rotate<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> target<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">/// aces  高转低</span>
			inline <span class="token return-type class-name">float3</span> <span class="token function">ACESFilm</span><span class="token punctuation">(</span><span class="token class-name">float3</span> x<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token class-name"><span class="token keyword">float</span></span> a <span class="token operator">=</span> <span class="token number">2.51f</span><span class="token punctuation">;</span>
				<span class="token class-name"><span class="token keyword">float</span></span> b <span class="token operator">=</span> <span class="token number">0.03f</span><span class="token punctuation">;</span>
				<span class="token class-name"><span class="token keyword">float</span></span> c <span class="token operator">=</span> <span class="token number">2.43f</span><span class="token punctuation">;</span>
				<span class="token class-name"><span class="token keyword">float</span></span> d <span class="token operator">=</span> <span class="token number">0.59f</span><span class="token punctuation">;</span>
				<span class="token class-name"><span class="token keyword">float</span></span> e <span class="token operator">=</span> <span class="token number">0.14f</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">saturate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token punctuation">(</span>a <span class="token operator">*</span> x<span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>x<span class="token operator">*</span><span class="token punctuation">(</span>c<span class="token operator">*</span>x<span class="token operator">+</span>d<span class="token punctuation">)</span><span class="token operator">+</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>


			<span class="token return-type class-name">v2f</span> vert <span class="token punctuation">(</span><span class="token class-name">appdata</span> v<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token class-name">v2f</span> o<span class="token punctuation">;</span>
				o<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token function">UnityObjectToClipPos</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>vertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
				o<span class="token punctuation">.</span>uv <span class="token operator">=</span> v<span class="token punctuation">.</span>texcoord0<span class="token punctuation">;</span>
				<span class="token comment">// 法线三剑客</span>
				o<span class="token punctuation">.</span>normalDir <span class="token operator">=</span> <span class="token function">UnityObjectToWorldNormal</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>normal<span class="token punctuation">)</span><span class="token punctuation">;</span>
				o<span class="token punctuation">.</span>tangentDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>unity_ObjectToWorld<span class="token punctuation">,</span><span class="token function">float4</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>tangent<span class="token punctuation">.</span>xyz<span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>xyz<span class="token punctuation">;</span>
				o<span class="token punctuation">.</span>binormalDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">cross</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>normalDir<span class="token punctuation">,</span>o<span class="token punctuation">.</span>tangentDir<span class="token punctuation">)</span> <span class="token operator">*</span> v<span class="token punctuation">.</span>tangent<span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
				o<span class="token punctuation">.</span>posWorld <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>unity_ObjectToWorld<span class="token punctuation">,</span>v<span class="token punctuation">.</span>vertex<span class="token punctuation">)</span><span class="token punctuation">.</span>xyz<span class="token punctuation">;</span>
				
				<span class="token keyword">return</span> o<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token return-type class-name">fixed4</span> frag <span class="token punctuation">(</span><span class="token class-name">v2f</span> i<span class="token punctuation">)</span> <span class="token punctuation">:</span> SV_Target
			<span class="token punctuation">{<!-- --></span>

				<span class="token comment">// </span>
				<span class="token class-name">half3</span> normalDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>normalDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">half3</span> tangentDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>tangentDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">half3</span> binormalDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>binormalDir<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token class-name">half3</span> lightDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">UnityWorldSpaceLightDir</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>posWorld<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">half3</span> viewDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">UnityWorldSpaceViewDir</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>posWorld<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// 法线贴图</span>
				<span class="token class-name">float3x3</span> TBN <span class="token operator">=</span> <span class="token function">float3x3</span><span class="token punctuation">(</span>tangentDir<span class="token punctuation">,</span>binormalDir<span class="token punctuation">,</span>normalDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float4</span> normal_Map <span class="token operator">=</span> <span class="token function">tex2D</span><span class="token punctuation">(</span>_NormalMap<span class="token punctuation">,</span>i<span class="token punctuation">.</span>uv<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float3</span> normal_Data <span class="token operator">=</span> <span class="token function">UnpackNormal</span><span class="token punctuation">(</span>normal_Map<span class="token punctuation">)</span><span class="token punctuation">;</span>
				normalDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>normal_Data<span class="token punctuation">,</span>TBN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


				<span class="token comment">// 视差效果 从侧面看，模拟眼球是凸出的</span>
				<span class="token comment">//float parallax_depth =  1.0 - saturate(distance(i.uv,float2(0.5,0.5)) / 0.2);</span>
				<span class="token comment">// 和上面是一样的效果，但是写法更高端一点，，用作遮罩</span>
				<span class="token class-name"><span class="token keyword">float</span></span> parallax_depth <span class="token operator">=</span>  <span class="token function">smoothstep</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token function">distance</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>uv<span class="token punctuation">,</span><span class="token function">float2</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float3</span> tanViewDir <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>TBN<span class="token punctuation">,</span>viewDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float2</span> parallax_Offset <span class="token operator">=</span> parallax_depth <span class="token operator">*</span> tanViewDir<span class="token punctuation">.</span>xy <span class="token operator">/</span> <span class="token punctuation">(</span>tanViewDir<span class="token punctuation">.</span>z <span class="token operator">+</span> <span class="token number">0.42</span><span class="token punctuation">)</span> <span class="token operator">*</span> _Parallax<span class="token punctuation">;</span> 
				<span class="token class-name">half3</span> base_Color <span class="token operator">=</span> <span class="token function">tex2D</span><span class="token punctuation">(</span>_BaseMap<span class="token punctuation">,</span> i<span class="token punctuation">.</span>uv <span class="token operator">+</span> parallax_Offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">half3</span> decal_color <span class="token operator">=</span> <span class="token function">tex2D</span><span class="token punctuation">(</span>_DecalMap<span class="token punctuation">,</span> i<span class="token punctuation">.</span>uv<span class="token punctuation">)</span><span class="token punctuation">.</span>rgb<span class="token punctuation">;</span>


				<span class="token comment">// 眼球最外层是凸出的 ，内层是凹陷的，所以法线反向求出内陷的法线效果</span>
				normal_Data<span class="token punctuation">.</span>xy <span class="token operator">=</span> <span class="token operator">-</span> normal_Data<span class="token punctuation">.</span>xy<span class="token punctuation">;</span>
				<span class="token class-name">float3</span> normalDir_Iris <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>normal_Data<span class="token punctuation">,</span>TBN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 漫反射</span>
				<span class="token class-name">half</span> NdotL <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token function">dot</span><span class="token punctuation">(</span>normalDir_Iris<span class="token punctuation">,</span>lightDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">half</span> half_lambert <span class="token operator">=</span> <span class="token punctuation">(</span>NdotL <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
				<span class="token class-name">half3</span> final_diffuse <span class="token operator">=</span>  <span class="token function">pow</span><span class="token punctuation">(</span>half_lambert <span class="token operator">*</span> base_Color<span class="token punctuation">,</span><span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		


				<span class="token comment">/// 环境反射 、  边缘光，  最外层的外层的计算 用正常的normal				</span>
				<span class="token class-name">float3</span> reflectDir <span class="token operator">=</span> <span class="token function">reflect</span><span class="token punctuation">(</span><span class="token operator">-</span>viewDir<span class="token punctuation">,</span>normalDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
				reflectDir <span class="token operator">=</span>  <span class="token function">RotateAround</span><span class="token punctuation">(</span>_EnvRotate<span class="token punctuation">,</span>reflectDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name"><span class="token keyword">float</span></span> roughtness <span class="token operator">=</span> <span class="token function">lerp</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">0.95</span><span class="token punctuation">,</span><span class="token function">saturate</span><span class="token punctuation">(</span>_Roughness<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				roughtness <span class="token operator">=</span> roughtness <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.7</span> <span class="token operator">-</span> <span class="token number">0.7</span> <span class="token operator">*</span> roughtness<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name"><span class="token keyword">float</span></span> mip_level <span class="token operator">=</span> roughtness <span class="token operator">*</span> <span class="token number">6.0</span><span class="token punctuation">;</span>
				<span class="token class-name">float4</span> color_CubeMap <span class="token operator">=</span> <span class="token function">texCUBElod</span><span class="token punctuation">(</span>_EnvMap<span class="token punctuation">,</span><span class="token function">float4</span><span class="token punctuation">(</span>reflectDir<span class="token punctuation">,</span>mip_level<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float3</span> evn_Color <span class="token operator">=</span> <span class="token function">DecodeHDR</span><span class="token punctuation">(</span>color_CubeMap<span class="token punctuation">,</span>_EnvMap_HDR<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">float3</span> final_evn <span class="token operator">=</span> evn_Color <span class="token operator">*</span> _EnvIntensity<span class="token punctuation">;</span>
				<span class="token comment">// 求出明度值 用明度  会让眼球的对比度更见明显</span>
				<span class="token class-name"><span class="token keyword">float</span></span> evn_lumin <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>final_evn<span class="token punctuation">,</span><span class="token function">float3</span><span class="token punctuation">(</span><span class="token number">0.299f</span><span class="token punctuation">,</span><span class="token number">0.587f</span><span class="token punctuation">,</span><span class="token number">0.114f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				final_evn <span class="token operator">=</span> final_evn <span class="token operator">*</span> evn_lumin<span class="token punctuation">;</span>
				<span class="token class-name">half3</span> finalColor <span class="token operator">=</span> final_diffuse <span class="token operator">+</span><span class="token punctuation">(</span> final_diffuse  <span class="token operator">*</span>  <span class="token function">pow</span><span class="token punctuation">(</span>final_evn<span class="token punctuation">,</span><span class="token number">2.2</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">+</span> decal_color<span class="token punctuation">;</span>
				<span class="token class-name">half3</span> enconde_color <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">ACESFilm</span><span class="token punctuation">(</span>finalColor<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">float4</span><span class="token punctuation">(</span>enconde_color<span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			ENDCG
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9710a664587b51ab3f044fdd0b870c6e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43; 贪心问题、区间分组(含问题分析与代码）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/19f6ebc16ac6613827468f20a2d856be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">第二门课：改善深层神经网络：超参数调试、正则化以及优化（第一周）——深度学习的实用层面</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>