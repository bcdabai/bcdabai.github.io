<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>智能车四轮组打工日记（二）——单电机驱动硬件设计 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="智能车四轮组打工日记（二）——单电机驱动硬件设计" />
<meta property="og:description" content="欢迎来到矽芯硬翌的科技主义教室！ 害，如今已经十六届智能车啦也是我最后一次参赛了。第十五届充满了遗憾,如今也只能总结失败继续向前啦，接下来就在这里持续更新这次十六届智能车制作的实况吧，主要从硬件设计，程序设计，赛道元素，车模处理这几个方面出发，期待十六届的到来 加油UPUPUP！
@Author: 精神小🔥君！
👇 想要我的财宝吗?想要的话可以全部给你，去找出来吧,这世上所有的一切都在那里! 👇
ONE PIECE地址： ✨ 矽芯硬翌的博客✨
文章目录 欢迎来到矽芯硬翌的科技主义教室！ 前言一、总体介绍二、电机介绍三、硬件电路设计3.1 电源部分3.2 H桥硬件电路设计3.3 PWM输入电路 三、总结 前言 第十五届时四轮组用的是C车模，我们电机驱动选择的是MOS管双电机驱动。由于这次换了B车模所以我在原有的基础上将MOS管双电机驱动改为单电机驱动。关于硬件的设计我想说的是要站在巨人的肩膀上，我也不是自己造电路的，大多数都是对比模仿他人的方案，这里我重点讲一下元器件的PCB与原理图的绘制方面的问题 。 那现在我们就开始吧！ 以下是介绍电机驱动的各个组成部分，仅供参考。 上一篇已经介绍过TC264主板的设计啦,有兴趣的多多支持哦 关于TC264主板设计的内容看这里：👉智能车四轮组打工日记（一）—TC264主板硬件设计👈
一、总体介绍 在电机驱动电路的选型上，有很多选择和选型。 相比较常用的 BTN7971，MOS 导通电阻小、 响应快， 为想要发挥 B 车的性能， 同时 B 车电机满转的电流很大，为了达到软件控制的要求，我们最后经过比较，最终选择了来自英飞凌经典的驱动组合 IR2104 和 IRLR7843，搭建两个 H 桥驱动电路来驱动电机。
二、电机介绍 第十六届的新B车模采用的是RS-540伺服电机,其实物图如下。
RS-540电机实物图：
直流伺服电机具有优良的速度控制性能,它输出较大的转矩,直接拖动负载运行,同时它又受控制信号的直接控制进行转速调节。在很多方面有优越性,具体来说,它具有以下优点:
具有较大的转矩,以克服传动装置的摩擦转矩和负载转矩。调速范围宽,高精度,机械特性及调节特性线性好,且运行速度平稳。具有快速响应能力,可以适应复杂的速度变化。电机的负载特性硬,有较大的过载能力,确保运行速度不受负载冲击的影响。可以长时间地处于停转状态而不会烧毁电机,一般电机不能长时间运行于停转状态,电机长时间停转时,稳定温升不超过允许值时输出的最大堵转转矩称为连续堵转转矩,相应的电枢电流为连续堵转电流。 RS-540电机具体参数： 三、硬件电路设计 3.1 电源部分 电源部分采用的是1117-5。AMS1117是一个低漏失电压调整器，它的稳压调整管是由一个PNP驱动的NPN管组成的，漏失电压定义为：VDROP=VBE&#43;VSAT。AMS1117有固定和可调两个版本可用，输出电压可以是：1.2V，1.5V，1.8V，2.5V，2.85V，3.0V，3.3V，和5.0V。片内过热切断电路提供了过载和过热保护，以防环境温度造成过高的结温。
为了确保AMS1117的稳定性，对可调电压版本，输出需要连接一个至少22μF的钽电容。对于固定电压版本，可采用更小的电容，具体可以根据实际应用确定。通常，线性调整器的稳定性随着输出电流增加而降低。
AM1117-5的电路图部分：
升压电路采用的是MC34603,MC34063是一单片双极型线性集成电路，专用于直流-直流变换器控制部分。片内包含有温度补偿带隙基准源、一个占空比周期控制振荡器、驱动器和大电流输出开关，能输出1.5A的开关电流。它能使用最少的外接元件构成开关式升压变换器、降压式变换器和电源反向器
MC34063升压电路：从5V升到12V：
电源部分小结：通过AMS1117-5模块将电池的电压稳定在5V,并输送给MC34063用于升压。MC34063输出的12V电压用于提供给后面的H桥电路。
3.2 H桥硬件电路设计 关于H桥电路的设计主要用到了IR2104半桥驱动芯片和IR7843MOS管。
H桥电路整体原理图如下：
1. IR7843MOS管
在H桥中一般使用4个N型MOS管来搭建。对于NMOS，当外部给的栅源极Vgs电压大于芯片的Vgs阈值(大部分在2V-10V之间)时，漏极D和源极S之间直接导通。如果外部给的Vgs电压小于阈值，漏极D和源极S之间截止。
所以简单的来说，NMOS管就是一个由栅极G电压控制的一个开关。就是通过Vgs来控制NMOS管的通断。
NMOS管的原理图如下：
2.IR2104半桥驱动芯片
所谓半桥驱动芯片，便是一块驱动芯片只能用于控制H桥一侧的2个MOS管。因此采用半桥驱动芯片时，需要两块该芯片才能控制一个完整的H桥。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/17b089b09482a3dff1ac8ca7d6e19aa7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-11T18:44:26+08:00" />
<meta property="article:modified_time" content="2022-10-11T18:44:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">智能车四轮组打工日记（二）——单电机驱动硬件设计</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_1"></a>欢迎来到矽芯硬翌的科技主义教室！</h4> 
<blockquote> 
 <p>害，如今已经十六届智能车啦也是我最后一次参赛了。第十五届充满了遗憾,如今也只能总结失败继续向前啦，接下来就在这里持续更新这次十六届智能车制作的实况吧，主要从硬件设计，程序设计，赛道元素，车模处理这几个方面出发，期待十六届的到来 <strong>加油UPUPUP</strong>！<br> @<strong>Author:</strong> 精神小🔥君！<br> 👇 <code>想要我的财宝吗?想要的话可以全部给你，去找出来吧,这世上所有的一切都在那里!</code> 👇<br> <strong>ONE PIECE地址：</strong> ✨ <a href="https://blog.csdn.net/weixin_43853307">矽芯硬翌的博客</a>✨</p> 
</blockquote> 
<hr color="#999AAA" size='1"'> 
<p><img src="https://images2.imgbox.com/bf/de/1EqfdN8q_o.gif" alt="在这里插入图片描述"></p> 
<hr color="#999AAA" size='1"'> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">欢迎来到矽芯硬翌的科技主义教室！</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_13" rel="nofollow">前言</a></li><li><a href="#_32" rel="nofollow">一、总体介绍</a></li><li><a href="#_34" rel="nofollow">二、电机介绍</a></li><li><a href="#_52" rel="nofollow">三、硬件电路设计</a></li><li><ul><li><a href="#31__53" rel="nofollow">3.1 电源部分</a></li><li><a href="#32_H_70" rel="nofollow">3.2 H桥硬件电路设计</a></li><li><a href="#33_PWM_125" rel="nofollow">3.3 PWM输入电路</a></li></ul> 
  </li><li><a href="#_138" rel="nofollow">三、总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_13"></a>前言</h2> 
<font color="#999AAA"> 第十五届时四轮组用的是C车模，我们电机驱动选择的是MOS管双电机驱动。由于这次换了B车模所以我在原有的基础上将MOS管双电机驱动改为单电机驱动。关于硬件的设计我想说的是要站在巨人的肩膀上，我也不是自己造电路的，大多数都是对比模仿他人的方案，这里我重点讲一下元器件的PCB与原理图的绘制方面的问题 。</font> 那现在我们就开始吧！ 
<font color="#999AAA"> 以下是介绍电机驱动的各个组成部分，仅供参考。 </font> 
<hr color="#999AAA" size='1"'> 
<font color="#999AAA"> 上一篇已经介绍过TC264主板的设计啦,有兴趣的多多支持哦</font> 
<p><font color="#999AAA"> 关于TC264主板设计的内容看这里：👉<a href="https://blog.csdn.net/weixin_43853307/article/details/113448775">智能车四轮组打工日记（一）—TC264主板硬件设计</a>👈</font></p> 
<hr color="#999AAA" size='1"'> 
<h2><a id="_32"></a>一、总体介绍</h2> 
<p>在电机驱动电路的选型上，有很多选择和选型。 相比较常用的 BTN7971，MOS 导通电阻小、 响应快， 为想要发挥 B 车的性能， 同时 B 车电机满转的电流很大，为了达到软件控制的要求，我们最后经过比较，最终选择了来自英飞凌经典的驱动组合 IR2104 和 IRLR7843，搭建两个 H 桥驱动电路来驱动电机。</p> 
<h2><a id="_34"></a>二、电机介绍</h2> 
<p>第十六届的新B车模采用的是RS-540伺服电机,其实物图如下。<br> <font color="#999AAA"> RS-540电机实物图：</font></p> 
<p><img src="https://images2.imgbox.com/fa/80/mquIslSv_o.png" alt="在这里插入图片描述"><br> 直流伺服电机具有优良的速度控制性能,它输出较大的转矩,直接拖动负载运行,同时它又受控制信号的直接控制进行转速调节。在很多方面有优越性,具体来说,它具有以下优点:</p> 
<blockquote> 
 <ol><li>具有较大的转矩,以克服传动装置的摩擦转矩和负载转矩。</li><li>调速范围宽,高精度,机械特性及调节特性线性好,且运行速度平稳。</li><li>具有快速响应能力,可以适应复杂的速度变化。</li><li>电机的负载特性硬,有较大的过载能力,确保运行速度不受负载冲击的影响。</li><li>可以长时间地处于停转状态而不会烧毁电机,一般电机不能长时间运行于停转状态,电机长时间停转时,稳定温升不超过允许值时输出的最大堵转转矩称为连续堵转转矩,相应的电枢电流为连续堵转电流。</li></ol> 
</blockquote> 
<hr color="#999AAA" size='1"'> 
<font color="#999AAA"> RS-540电机具体参数： </font> 
<p><img src="https://images2.imgbox.com/f7/75/IVV6CDkK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/04/a8/3YEJSmpk_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_52"></a>三、硬件电路设计</h2> 
<h3><a id="31__53"></a>3.1 电源部分</h3> 
<p>电源部分采用的是1117-5。AMS1117是一个低漏失电压调整器，它的稳压调整管是由一个PNP驱动的NPN管组成的，漏失电压定义为：VDROP=VBE+VSAT。AMS1117有固定和可调两个版本可用，输出电压可以是：1.2V，1.5V，1.8V，2.5V，2.85V，3.0V，3.3V，和5.0V。片内过热切断电路提供了过载和过热保护，以防环境温度造成过高的结温。</p> 
<p>为了确保AMS1117的稳定性，对可调电压版本，输出需要连接一个至少22μF的钽电容。对于固定电压版本，可采用更小的电容，具体可以根据实际应用确定。通常，线性调整器的稳定性随着输出电流增加而降低。</p> 
<p><font color="#999AAA">AM1117-5的电路图部分：<br> <img src="https://images2.imgbox.com/fd/99/TiedkvCO_o.png" alt="在这里插入图片描述"></font></p> 
<hr color="#999AAA" size='1"'> 
<p>升压电路采用的是MC34603,MC34063是一单片双极型线性集成电路，专用于直流-直流变换器控制部分。片内包含有温度补偿带隙基准源、一个占空比周期控制振荡器、驱动器和大电流输出开关，能输出1.5A的开关电流。它能使用最少的外接元件构成开关式升压变换器、降压式变换器和电源反向器</p> 
<p><font color="#999AAA">MC34063升压电路：从5V升到12V：<br> <img src="https://images2.imgbox.com/25/46/94yFYpjI_o.png" alt="在这里插入图片描述"></font></p> 
<blockquote> 
 <p>电源部分小结：通过AMS1117-5模块将电池的电压稳定在5V,并输送给MC34063用于升压。MC34063输出的12V电压用于提供给后面的H桥电路。</p> 
</blockquote> 
<h3><a id="32_H_70"></a>3.2 H桥硬件电路设计</h3> 
<p>关于H桥电路的设计主要用到了IR2104半桥驱动芯片和IR7843MOS管。</p> 
<p><font color="#999AAA">H桥电路整体原理图如下：<br> <img src="https://images2.imgbox.com/f8/ee/DddrgUl9_o.png" alt="在这里插入图片描述"></font></p> 
<p><strong>1. IR7843MOS管</strong></p> 
<p>在H桥中一般使用4个N型MOS管来搭建。对于NMOS，当外部给的栅源极Vgs电压大于芯片的Vgs阈值(大部分在2V-10V之间)时，漏极D和源极S之间直接导通。如果外部给的Vgs电压小于阈值，漏极D和源极S之间截止。</p> 
<p>所以简单的来说，NMOS管就是一个由栅极G电压控制的一个开关。就是通过Vgs来控制NMOS管的通断。</p> 
<p><font color="#999AAA">NMOS管的原理图如下：<br> <img src="https://images2.imgbox.com/c4/c2/N8sQ4LLx_o.png" alt="在这里插入图片描述"></font></p> 
<p><strong>2.IR2104半桥驱动芯片</strong></p> 
<p>所谓半桥驱动芯片，便是一块驱动芯片只能用于控制H桥一侧的2个MOS管。因此采用半桥驱动芯片时，需要两块该芯片才能控制一个完整的H桥。</p> 
<p>相应的，全桥驱动芯片便是可以直接控制4个MOS管的导通与截止，一块该芯片便能完成一个完整H桥的控制。</p> 
<p>这里使用的IR2104便是一款半桥驱动芯片，因此在原理图中可以看到每个H桥需要使用两块此芯片。</p> 
<p><font color="#999AAA">IR2104经典电路设计如下：<br> <img src="https://images2.imgbox.com/fe/8d/KiJvYfJk_o.png" alt="在这里插入图片描述"><br> <font color="#999AAA">IR2104的各个引脚功能：<br> <img src="https://images2.imgbox.com/f7/e9/XQBXtWjv_o.png" alt="在这里插入图片描述"></font></font></p> 
<ul><li>VCC为芯片的电源输入，手册中给出的工作电压为10~20V。</li><li>IN和SD作为输入控制，可共同控制电机的转动状态(转向、转速和是否转动)。</li><li>VB和VS主要用于形成自举电路。</li><li>HO和LO接到MOS管栅极，分别用于控制上桥臂和下桥臂MOS的导通与截止。</li><li>COM脚直接接地即可。</li></ul> 
<p><strong>3.总体说明</strong><br> <img src="https://images2.imgbox.com/cc/9d/vP3fg3et_o.png" alt="在这里插入图片描述"><br> 对驱动一个电机的H桥电路来说，上半桥由<strong>自举电路</strong>来控制，下半桥由单片机的<strong>引脚</strong>来控制。<br> (关于<strong>自举电路</strong>大家可以查看这篇文章👉<a href="https://blog.csdn.net/best_xiaolong/article/details/109759339">H桥驱动电路详解</a>👈)</p> 
<p><font color="#999AAA">关于上半桥/下半桥/左右半桥的解释：<br> <img src="https://images2.imgbox.com/6b/d0/8G4reji4_o.png" alt="在这里插入图片描述"></font></p> 
<p>通过IR2104来控制MOS管的通断最终实现电机的正转与反转。</p> 
<p><font color="#999AAA">工作方式简述：</font></p> 
<p>① Q1Q2导通/Q3Q4截止<br> <img src="https://images2.imgbox.com/75/89/bNKfUYjB_o.png" alt="在这里插入图片描述"></p> 
<p>② Q3Q4导通/Q1Q2截止<br> <img src="https://images2.imgbox.com/7f/c7/SKkoenXN_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意：电机的正反转取决于电机的接线，这里正转与反转只起说明作用</p> 
</blockquote> 
<h3><a id="33_PWM_125"></a>3.3 PWM输入电路</h3> 
<p>通过单片机的IO口可以输出PWM波，当输入到驱动板是可以加上74LS244芯片起到隔离加驱的作用。</p> 
<p>74LS244为3态8位缓冲器，一般用作总线驱动器。74LS244没有锁存的功能。地址锁存器就是一个暂存器，它根据控制信号的状态，将总线上地址代码暂存起来。8086/8088数据和地址总线采用分时复用操作方法，即用同一总线既传输数据又传输地址。</p> 
<p><font color="#999AAA">具体电路如下图：<br> <img src="https://images2.imgbox.com/c7/01/SL8OEKoK_o.png" alt="在这里插入图片描述"><br> 数据引脚<br> 8个数据输入端，1A1、1A2、1A3、1A4，2A1、2A2、2A3、2A4，（其中1A4和2A4是高位）。<br> 8个二进制输出端1Y1、1Y2、1Y3、1Y4、2Y1、2Y2、2Y3、2Y4，以四位二进制形式输出。</font></p> 
<p>功能表简介：<br> <img src="https://images2.imgbox.com/23/31/tdOWMTtt_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_138"></a>三、总结</h2> 
<p>电机驱动的原理大致介绍完啦，从双驱动变为单驱动之后原理图结构更为简单，关键的地方在于PCB的布线。等原理图部分更新完了就去PCB与元器件的选型介绍啦嘻嘻！</p> 
<hr color="#999AAA" size='1"'> 
<blockquote> 
 <p>佛祖保佑，下期运放原理图见！</p> 
</blockquote> 
<pre><code class="prism language-cpp">						<span class="token comment">/*
						 *                        _oo0oo_
						 *                       o8888888o
						 *                       88" . "88
						 *                       (| -_- |)
						 *                       0\  =  /0
						 *                     ___/`---'\___
						 *                   .' \\|     |// '.
						 *                  / \\|||  :  |||// \
						 *                 / _||||| -:- |||||- \
						 *                |   | \\\  - /// |   |
						 *                | \_|  ''\---/''  |_/ |
						 *                \  .-\__  '-'  ___/-. /
						 *              ___'. .'  /--.--\  `. .'___
						 *           ."" '&lt;  `.___\_&lt;|&gt;_/___.' &gt;' "".
						 *          | | :  `- \`.;`\ _ /`;.`/ - ` : | |
						 *          \  \ `_.   \_ __\ /__ _/   .-` /  /
						 *      =====`-.____`.___ \_____/___.-`___.-'=====
						 *                        `=---='
						 * 
						 * 
						 *      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
						 * 
						 *            佛祖保佑       永不宕机     永无BUG
						 * 
						 *        佛曰:  
						 *                写字楼里写字间，写字间里程序员；  
						 *                程序人员写程序，又拿程序换酒钱。  
						 *                酒醒只在网上坐，酒醉还来网下眠；  
						 *                酒醉酒醒日复日，网上网下年复年。  
						 *                但愿老死电脑间，不愿鞠躬老板前；  
						 *                奔驰宝马贵者趣，公交自行程序员。  
						 *                别人笑我忒疯癫，我笑自己命太贱；  
						 *                不见满街漂亮妹，哪个归得程序员？
						 */</span>


</code></pre> 
<hr color="#999AAA" size='1"'>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2fe5a5f828a177a6ee51024bb43ccafc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GO创建数组</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6f52ebc5f8161e0834f45c22bc0f089c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">将python中的.py文件打包成.exe</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>