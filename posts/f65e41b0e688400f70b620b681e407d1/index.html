<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot中使用JdbcTemplate访问达梦数据库详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring Boot中使用JdbcTemplate访问达梦数据库详解" />
<meta property="og:description" content="Spring Boot中使用JdbcTemplate访问达梦数据库详解 前言 武汉达梦数据库股份有限公司作为国产数据库的龙头企业，是国内鲜有掌握数据管理与数据分析领域的核心前沿技术，拥有全部源代码，具有完全自主知识产权的国产数据库厂商，在国内数据库份额越来越多，深扎传统领域的关键业务场景，我们来学习下如果使用jdbcTemplate访问达梦数据库进行基本的Druid操作。
一、创建SpringBoot项目 创建项目，按下图选项进行勾选：
点击next进入下一步，配置项目基本信息，如下图：
勾选项目所需要的的依赖坐标，如下图：
点击next,finish结束后开始初始化项目，第一次建立项目，需要下载很多包，请耐心等待一下。初始化完毕后，由于我们要使用的是达梦数据库，需要我们自己增加达梦的jdbc驱动依赖，在maven的本地仓库中添加驱动包，驱动包在达梦的安装目录里有，可自行挪移，打开项目中的pom.xml文件，增加依赖坐标，如下图：
修改application.properties文件为application.yml文件，添加项目端口和jdbc链接相关信息，如下图：
二、代码编写 在启动类同级目录下创建entity,service,serviceImpl,dao,controller文件夹，如下图：
在entity文件夹下创建Plan实体类
package com.dm.jdbcdemo.entity; public class Plan { private String id; private String gznr; private String tdfw; private String czlx; public String getId() { return id; } public void setId(String id) { this.id = id; } public String getGznr() { return gznr; } public void setGznr(String gznr) { this.gznr = gznr; } public String getTdfw() { return tdfw; } public void setTdfw(String tdfw) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f65e41b0e688400f70b620b681e407d1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-05T14:56:59+08:00" />
<meta property="article:modified_time" content="2021-04-05T14:56:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot中使用JdbcTemplate访问达梦数据库详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="main-toc">Spring Boot中使用JdbcTemplate访问达梦数据库详解</h2> 
<hr> 
<h2><a id="_10"></a>前言</h2> 
<p>       武汉达梦数据库股份有限公司作为国产数据库的龙头企业，是国内鲜有掌握数据管理与数据分析领域的核心前沿技术，拥有全部源代码，具有完全自主知识产权的国产数据库厂商，在国内数据库份额越来越多，深扎传统领域的关键业务场景，我们来学习下如果使用jdbcTemplate访问达梦数据库进行基本的Druid操作。</p> 
<h2><a id="pandas_19"></a>一、创建SpringBoot项目</h2> 
<p>创建项目，按下图选项进行勾选：</p> 
<p><img alt="" height="391" src="https://images2.imgbox.com/da/43/cmDrfb2K_o.png" width="554"></p> 
<p>点击next进入下一步，配置项目基本信息，如下图：</p> 
<p><img alt="" height="391" src="https://images2.imgbox.com/5a/b7/ObVxvqVB_o.png" width="554"></p> 
<p style="margin-left:0pt;">勾选项目所需要的的依赖坐标，如下图：</p> 
<p style="margin-left:0pt;"><img alt="" height="391" src="https://images2.imgbox.com/3f/c9/BNkodaPn_o.png" width="554"></p> 
<p style="margin-left:0pt;"><img alt="" height="380" src="https://images2.imgbox.com/ee/ec/vAFZdPvQ_o.png" width="554"></p> 
<p style="margin-left:0pt;">点击next,finish结束后开始初始化项目，第一次建立项目，需要下载很多包，请耐心等待一下。初始化完毕后，由于我们要使用的是达梦数据库，需要我们自己增加达梦的jdbc驱动依赖，在maven的本地仓库中添加驱动包，驱动包在达梦的安装目录里有，可自行挪移，打开项目中的pom.xml文件，增加依赖坐标，如下图：</p> 
<p style="margin-left:0pt;"><img alt="" height="155" src="https://images2.imgbox.com/76/13/NqtD3f5T_o.png" width="553"></p> 
<p style="margin-left:0pt;"><img alt="" height="287" src="https://images2.imgbox.com/b2/a7/sEA7aKhF_o.png" width="554"></p> 
<p style="margin-left:0pt;">修改application.properties文件为application.yml文件，添加项目端口和jdbc链接相关信息，如下图：</p> 
<p style="margin-left:0pt;"><img alt="" height="299" src="https://images2.imgbox.com/ae/e1/5xPHtdEZ_o.png" width="554"></p> 
<h2><a id="_26"></a>二、代码编写</h2> 
<p><a id="1_27"></a>在启动类同级目录下创建entity,service,serviceImpl,dao,controller文件夹，如下图：</p> 
<p><img alt="" height="403" src="https://images2.imgbox.com/43/aa/dEdl2ZwD_o.png" width="314"></p> 
<p style="margin-left:0pt;">在entity文件夹下创建Plan实体类</p> 
<pre><code class="language-java">package com.dm.jdbcdemo.entity;

public class Plan {
    private String id;
    private String gznr;
    private String tdfw;
    private String czlx;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getGznr() {
        return gznr;
    }

    public void setGznr(String gznr) {
        this.gznr = gznr;
    }

    public String getTdfw() {
        return tdfw;
    }

    public void setTdfw(String tdfw) {
        this.tdfw = tdfw;
    }

    public String getCzlx() {
        return czlx;
    }

    public void setCzlx(String czlx) {
        this.czlx = czlx;
    }
}
</code></pre> 
<p>在dao文件夹下创建PlanDao接口</p> 
<pre><code class="language-java">package com.dm.jdbcdemo.dao;

import com.dm.jdbcdemo.entity.Plan;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.BeanPropertyRowMapper;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import javax.sql.DataSource;
import java.util.List;

@Repository
public class PlanDao {
    @Autowired
    JdbcTemplate jdbcTemplate;

    public List getPlanData() {
        return jdbcTemplate.queryForList("select * from plan where id='1111111'");
    }

    public int updatePlanData() {
        return jdbcTemplate.update("update plan set gznr='aaaaaa' where id='1111111'");
    }

    public int deletePlanData() {
        return jdbcTemplate.update("delete from plan where id in ('1111111','2222222','3333333')");
    }

    public int[] insertPlanData(List&lt;Object[]&gt; list) {
        return jdbcTemplate.batchUpdate("insert into plan(id, gznr, tdfw) values (?,?,?)", list);
    }

    public List&lt;Plan&gt; getPlanRecordData() {
        return jdbcTemplate.query("select top 5 id,gznr,tdfw,'cs' as czlx from plan",
                new BeanPropertyRowMapper&lt;&gt;(Plan.class));
    }
}
</code></pre> 
<p>在service文件夹下创建PlanService接口</p> 
<pre><code class="language-java">package com.dm.jdbcdemo.service;

import java.util.List;

public interface PlanService {

    List getPlanData();

    int updatePlanData();

    int deletePlanData();

    int[] insertPlanData();

    List getPlanRecordData();
}
</code></pre> 
<p style="margin-left:0pt;">在serviceImpl文件夹下创建PlanServiceImpl实现类</p> 
<pre><code class="language-java">package com.dm.jdbcdemo.serviceImpl;

import com.dm.jdbcdemo.dao.PlanDao;
import com.dm.jdbcdemo.service.PlanService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.ArrayList;
import java.util.List;

@Service
public class PlanServiceImpl implements PlanService {

    @Autowired
    PlanDao planDao;

    @Override
    public List getPlanData() {
        return planDao.getPlanData();
    }

    @Override
    public int updatePlanData() {
        return planDao.updatePlanData();
    }

    @Override
    public int deletePlanData() {
        return planDao.deletePlanData();
    }

    @Override
    public int[] insertPlanData() {
        Object[] firstPlan = {"1111111","a","b"};
        Object[] secondPlan = {"2222222","aa","bb"};
        Object[] thirdPlan = {"3333333","aaa","bbb"};
        List&lt;Object[]&gt; planList = new ArrayList();
        planList.add(firstPlan);
        planList.add(secondPlan);
        planList.add(thirdPlan);
        return planDao.insertPlanData(planList);
    }

    @Override
    public List getPlanRecordData() {
        return planDao.getPlanRecordData();
    }
}
</code></pre> 
<p style="margin-left:0pt;">在controller文件夹下创建PlanController类</p> 
<pre><code class="language-java">package com.dm.jdbcdemo.controller;

import com.dm.jdbcdemo.service.PlanService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
public class PlanController {

    @Autowired
    PlanService planService;

    @RequestMapping("/")
    public String index() {
        return "欢迎使用jdbcdTemplate！";
    }

    //查询plan数据
    @RequestMapping("/getPlanData")
    public List getPlanData() {
        return planService.getPlanData();
    }

    //修改plan数据
    @RequestMapping("/updatePlanData")
    public int updatePlanData() {
        return planService.updatePlanData();
    }

    //删除plan数据
    @RequestMapping("/deletePlanData")
    public int deletePlanData() {
        return planService.deletePlanData();
    }

    //新增plan数据
    @RequestMapping("/insertPlanData")
    public int[] insertPlanData() {
        return planService.insertPlanData();
    }

    //查询plan操作记录数据
    @RequestMapping("/getPlanRecordData")
    public List getPlanRecordData() {
        return planService.getPlanRecordData();
    }
}
</code></pre> 
<h2 style="margin-left:0pt;">三、测试</h2> 
<p style="margin-left:0pt;">开始启动项目，并查看日志是否启动正常，如下图：</p> 
<p style="margin-left:0pt;"><img alt="" height="299" src="https://images2.imgbox.com/dd/37/Kob9VlP7_o.png" width="554"></p> 
<p style="margin-left:0pt;">打开谷歌浏览器，测试数据库的增删查改功能，浏览器地址解析如图：</p> 
<p style="margin-left:0pt;"><img alt="" height="299" src="https://images2.imgbox.com/9c/d9/iI6krJAE_o.png" width="554"></p> 
<p style="margin-left:0pt;">插入三条数据，显示为1则代表插入成功，如下图：</p> 
<p><img alt="" height="134" src="https://images2.imgbox.com/d3/d2/Ht8tIV71_o.png" width="391"></p> 
<p style="margin-left:0pt;">修改一条数据，显示为1则代表修改成功，如下图：</p> 
<p style="margin-left:0pt;"><img alt="" height="119" src="https://images2.imgbox.com/15/28/eqFnnvXg_o.png" width="404"></p> 
<hr> 
<h2><a id="_63"></a>总结</h2> 
<p>数据库访问是数据库应用系统中非常重要的组成部分。DM 作为一个通用数据库管理系统，提供了多种数据库访问接口，包括 ODBC、JDBC、DPI 等方式。本指南的主要读者是从事过数据库应用系统开发，并具有 SQL 使用基础的程序员。开发一个应用系统，需要对其使用的数据库管理系统所具有的功能、性能、特性有较深入的了解。</p> 
<p style="text-indent:0;"> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4f4a57f4d44321e1eea134c491c1de7e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2021-04-05</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/121d1ce919407c522e1aaaae90a7f8fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nginx和php连接的2种方式,Nginx 中 fastcgi_pass 监听端口有2种方式（转发给php的2种方式）： unix socket和tcp socket差异...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>