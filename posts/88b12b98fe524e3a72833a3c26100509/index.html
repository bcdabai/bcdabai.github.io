<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AP6256 WIFI蓝牙模块 调试使用测试记录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="AP6256 WIFI蓝牙模块 调试使用测试记录" />
<meta property="og:description" content="一、wifi的基础知识储备 wifi通常情况下可以处在sta和ap模式下：
sta模式：作为终端去连接其他WiFi网络
ap模式：作为接入的热点中心，被其他终端连接
二、实操：设备在sta模式下，怎么通过命令连入别的wifi网络？ 要在设备上以**STA（Station）模式**连接到其他WiFi网络，您可以使用命令行工具，通常使用**wpa_supplicant**和**wpa_cli**工具来配置和管理WiFi连接。以下是一般步骤：
1. **检查WiFi适配器**：首先，确保您的设备上有可用的WiFi适配器，并且已正确安装WiFi驱动程序。
2. **启动wpa_supplicant**：运行以下命令来启动wpa_supplicant，其中 `interface_name` 是您的WiFi适配器的名称：
```shell
sudo wpa_supplicant -B -i interface_name -c /etc/wpa_supplicant.conf
```
`-B` 标志表示在后台运行，`-i` 指定WiFi接口，`-c` 指定配置文件的路径。请确保 `/etc/wpa_supplicant.conf` 文件包含要连接的WiFi网络的配置信息。示例配置：
```plaintext
network={
ssid=&#34;Your_SSID&#34;
psk=&#34;Your_Password&#34;
}
```
替换 `&#34;Your_SSID&#34;` 和 `&#34;Your_Password&#34;` 为目标WiFi网络的SSID和密码。
3. **使用wpa_cli连接**：运行以下命令使用wpa_cli连接到WiFi网络：
```shell
sudo wpa_cli -i interface_name
```
这将进入wpa_cli的交互模式。
4. 在wpa_cli中，输入以下命令连接到WiFi网络（请替换 `&lt;Your_SSID&gt;` 和 `&lt;Your_Password&gt;` 为目标网络的SSID和密码）：
```shell
scan
add_network
set_network 0 ssid &#34;&lt;Your_SSID&gt;&#34;
set_network 0 psk &#34;&lt;Your_Password&gt;&#34;
enable_network 0
```
这将扫描可用的WiFi网络，为目标网络创建一个新网络配置，并启用它。确保使用正确的SSID和密码。
5. 最后，运行以下命令来等待连接到网络：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/88b12b98fe524e3a72833a3c26100509/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-05T17:40:06+08:00" />
<meta property="article:modified_time" content="2023-09-05T17:40:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AP6256 WIFI蓝牙模块 调试使用测试记录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、wifi的基础知识储备</h2> 
<p>wifi通常情况下可以处在sta和ap模式下：</p> 
<p>sta模式：作为终端去连接其他WiFi网络</p> 
<p>ap模式：作为接入的热点中心，被其他终端连接</p> 
<h2>二、实操：设备在sta模式下，怎么通过命令连入别的wifi网络？</h2> 
<p>要在设备上以**STA（Station）模式**连接到其他WiFi网络，您可以使用命令行工具，通常使用**wpa_supplicant**和**wpa_cli**工具来配置和管理WiFi连接。以下是一般步骤：</p> 
<p>1. **检查WiFi适配器**：首先，确保您的设备上有可用的WiFi适配器，并且已正确安装WiFi驱动程序。</p> 
<p>2. **启动wpa_supplicant**：运行以下命令来启动wpa_supplicant，其中 `interface_name` 是您的WiFi适配器的名称：</p> 
<p>   ```shell<br>    sudo wpa_supplicant -B -i interface_name -c /etc/wpa_supplicant.conf<br>    ```</p> 
<p>   `-B` 标志表示在后台运行，`-i` 指定WiFi接口，`-c` 指定配置文件的路径。请确保 `/etc/wpa_supplicant.conf` 文件包含要连接的WiFi网络的配置信息。示例配置：</p> 
<p>   ```plaintext<br>    network={<!-- --><br>        ssid="Your_SSID"<br>        psk="Your_Password"<br>    }<br>    ```</p> 
<p>   替换 `"Your_SSID"` 和 `"Your_Password"` 为目标WiFi网络的SSID和密码。</p> 
<p>3. **使用wpa_cli连接**：运行以下命令使用wpa_cli连接到WiFi网络：</p> 
<p>   ```shell<br>    sudo wpa_cli -i interface_name<br>    ```</p> 
<p>   这将进入wpa_cli的交互模式。</p> 
<p>4. 在wpa_cli中，输入以下命令连接到WiFi网络（请替换 `&lt;Your_SSID&gt;` 和 `&lt;Your_Password&gt;` 为目标网络的SSID和密码）：</p> 
<p>   ```shell<br>    scan<br>    add_network<br>    set_network 0 ssid "&lt;Your_SSID&gt;"<br>    set_network 0 psk "&lt;Your_Password&gt;"<br>    enable_network 0<br>    ```</p> 
<p>   这将扫描可用的WiFi网络，为目标网络创建一个新网络配置，并启用它。确保使用正确的SSID和密码。</p> 
<p>5. 最后，运行以下命令来等待连接到网络：</p> 
<p>   ```shell<br>    select_network 0<br>    ```</p> 
<p>   如果一切设置正确，您的设备应该会连接到目标WiFi网络。</p> 
<p>请注意，这些步骤可能会因不同的Linux发行版和WiFi适配器而有所不同。确保您的设备已正确配置并具有连接到WiFi网络的权限。如果需要，还要检查网络设置，如DHCP等。</p> 
<p>6. 按照上面操作后，连入网络后，ifconfig wlan0 查询不到ip，执行了dhcpcd wlan后得到分配的ip,但是不是期待中的，目前尝试半天也行，</p> 
<p>（因为我按照上面操作连入到无线网，然和将笔记本电脑连入到同样的网络，发现两者ip不在同一个网段，相互ping不同，目前尚未解决）</p> 
<p>三、实操：在ap模式 做了哪些操作？</p> 
<p>/system/bin/hostapd /data/misc/wifi/hostapd.conf</p> 
<p>其中hostapd是必须要运行起来的，配置文件可以参考官方提供的写</p> 
<p>将这个运行起来后，终端设备连入后，发现起终端设备并没有自动dhcp到ip地址，需要手动配置成和ap设备同网段的ip后，才能连接。</p> 
<p>后查询发现，需要执行dnsmasq 这个工具，它可以充当 DHCP 服务器，为局域网中的设备分配IP地址、子网掩码、网关地址和DNS服务器地址等网络配置。这对于自动化管理设备的网络配置非常有用。</p> 
<p>因此执行/system/bin/dnsmasq -C /system/etc/dnsmasq.conf -u root -g root -k -x /data/dnsmasq.pid  具体的参数说明可以查看--help</p> 
<p>其中dnsmasq.conf配置了相关信息如下：</p> 
<p># 指定 DHCP 范围</p> 
<p>dhcp-range=172.18.2.100,172.18.255.254,12h</p> 
<p># 指定默认网关</p> 
<p>dhcp-option=3,172.18.2.1</p> 
<p># 指定 DNS 服务器</p> 
<p>dhcp-option=6,114.114.114.114,8.8.8.8</p> 
<p>dnsmasq.pid存放的是进程的pid号</p> 
<p>（未完待续）</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/acaddcea79916643622c03447ed58e29/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java手写数组队列和链表队列并使用java里面现成的队列方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/01a20009bd7ef35bd777012167799c72/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">不同版本的Dev Tools基本使用语法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>