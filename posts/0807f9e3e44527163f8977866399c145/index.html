<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vuex的使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vuex的使用" />
<meta property="og:description" content="Vuex 简介 Vuex是一个专为Vue.js 应用程序开发的==状态管理模式==。
它采用==集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。
Vuex也集成到Vue的官方调试工具devtools extension==，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。
专门在 Vue 中实现集中式状态（数据）管理的一个 Vue 插件，对 vue 应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。
Vuex的最主要的作用：实现多组件之间的数据共享
什么时候使用 Vuex
多个组件依赖于同一状态
来自不同组件的行为需要变更同一状态
1、安装：
注意：
vue2中，要用vuex的3版本。vue3中，要用vuex的4版本。 #vue2版本安装 npm install -save vuex@3 #vue3版本安装 npm install -save vuex@4 2、使用：在src目录下创建store目录，然后再store目录创建index.js文件
index.js
import Vue from &#39;vue&#39;; import Vuex from &#39;vuex&#39;; Vue.use(Vuex) //准备actions——用于响应组件中的动作 const actions = { } //准备mutations——用于操作数据（state） const mutations = { } //准备state——用于存储数据 const state = { } // 定义getter来获取数据 const getters = { } export default new Vuex." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0807f9e3e44527163f8977866399c145/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-01T11:42:15+08:00" />
<meta property="article:modified_time" content="2023-10-01T11:42:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vuex的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Vuex_0"></a>Vuex</h2> 
<h3><a id="_2"></a>简介</h3> 
<p>Vuex是一个专为Vue.js 应用程序开发的==<strong>状态管理模式</strong>==。</p> 
<p>它采用==<strong>集中式存储管理</strong><mark>应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<br> Vuex也集成到Vue的官方调试工具</mark>devtools extension==，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。</p> 
<p>专门在 Vue 中实现集中式状态（数据）管理的一个 Vue 插件，对 vue 应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。</p> 
<p><strong>Vuex的最主要的作用：实现多组件之间的数据共享</strong></p> 
<p><img src="https://images2.imgbox.com/9e/0d/8tiIcWOF_o.png" alt="image20230929121742248.png"></p> 
<p><strong>什么时候使用 Vuex</strong></p> 
<ol><li> <p>多个组件依赖于同一状态</p> </li><li> <p>来自不同组件的行为需要变更同一状态</p> </li></ol> 
<p>1、安装：</p> 
<p>注意：</p> 
<ul><li>vue2中，要用vuex的3版本。</li><li>vue3中，要用vuex的4版本。</li></ul> 
<pre><code class="prism language-shell"><span class="token comment">#vue2版本安装</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-save</span> vuex@3

<span class="token comment">#vue3版本安装</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-save</span> vuex@4
</code></pre> 
<p>2、使用：在src目录下创建store目录，然后再store目录创建index.js文件</p> 
<p><img src="https://images2.imgbox.com/2e/17/UW9JDMqv_o.png" alt="image20230929115901256.png"></p> 
<p>index.js</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>


<span class="token comment">//准备actions——用于响应组件中的动作</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	  
<span class="token punctuation">}</span>

<span class="token comment">//准备mutations——用于操作数据（state）</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token comment">//准备state——用于存储数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  
<span class="token punctuation">}</span>


<span class="token comment">// 定义getter来获取数据</span>
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	actions<span class="token punctuation">,</span>
	mutations<span class="token punctuation">,</span>
    state<span class="token punctuation">,</span>
    getters<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>3、再main.js文件导入<code>store/index.js</code>文件</p> 
<p><img src="https://images2.imgbox.com/25/35/0L35XqOP_o.png" alt="image20230929120854868.png"></p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token comment">//引入store</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;App/&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_111"></a>简单案例（求和）</h3> 
<h4><a id="Vue_113"></a>纯Vue版写的</h4> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="hello"&gt;
    &lt;h1&gt;当前sum的值为{<!-- -->{ sum }}&lt;/h1&gt;
    &lt;select v-model.number="num"&gt;
      &lt;option value="1"&gt;1&lt;/option&gt;
      &lt;option value="2"&gt;2&lt;/option&gt;
      &lt;option value="3"&gt;3&lt;/option&gt;
    &lt;/select&gt;
    &lt;hr&gt;
    &lt;button @click="increment"&gt;++&lt;/button&gt;
    &lt;button @click="decrement"&gt;--&lt;/button&gt;
    &lt;button @click="incrementOne"&gt;为奇数则加1&lt;/button&gt;
    &lt;button @click="incrementTow"&gt;为偶数则加2&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'Count',
  data () {
    return {
      sum: 0,
      num: 1
    }
  },

  methods: {
    increment() {
      this.sum += this.num
    },

    decrement() {
      this.sum -= this.num
    },

    incrementOne() {
      if (this.sum % 2 != 0) { 
          this.sum += 1
      }
    },
    incrementTow() {
      if (this.sum % 2 == 0) {
          this.sum += 2
      }
    },
  }
}
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;

&lt;/style&gt;

</code></pre> 
<p>效果</p> 
<p><img src="https://images2.imgbox.com/57/39/S5V6ikhI_o.png" alt="image20230929130905209.png"></p> 
<h4><a id="Vuex_176"></a>使用Vuex实现</h4> 
<p>action</p> 
<pre><code class="prism language-js"><span class="token comment">//准备actions——用于响应组件中的动作</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//commit是一个对象，可以获取到state状态中对象的属性值，这里是sum。state为传入的值</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"increment"</span><span class="token punctuation">,</span>commit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	  
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/48/5b/qGB3w0DT_o.png" alt="在这里插入图片描述"></p> 
<p>mutation</p> 
<pre><code class="prism language-js"><span class="token comment">//准备mutations——用于操作数据（state）</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//commit是一个对象，可以获取到state状态中对象的属性值，这里是sum。state为传入的值</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"increment"</span><span class="token punctuation">,</span>commit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"increment"</span><span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/16/0b/IeHqRziN_o.png" alt="image20230929144624544.png"></p> 
<p>state</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="indexjs_222"></a>完整的index.js</h5> 
<h6><a id="_224"></a>方式一（不推荐使用）</h6> 
<p>原因：这种的话数据使用vue的开发者工具就不奏效了</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>


<span class="token comment">//准备actions——用于响应组件中的动作</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"increment"</span><span class="token punctuation">,</span>commit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">-=</span> state

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">incrementOne</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">incrementTow</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span>
	  
<span class="token punctuation">}</span>

<span class="token comment">//准备mutations——用于操作数据（state）</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>sum <span class="token operator">-=</span> state

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">incrementOne</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">incrementTow</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//准备state——用于存储数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>


<span class="token comment">// 定义getter来获取数据</span>
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	actions<span class="token punctuation">,</span>
	mutations<span class="token punctuation">,</span>
    state<span class="token punctuation">,</span>
    getters<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="_291"></a>方式二（推荐使用）</h6> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>


<span class="token comment">//准备actions——用于响应组件中的动作</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"increment"</span><span class="token punctuation">,</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'INCREMENT'</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'DECREMENT'</span><span class="token punctuation">,</span>state<span class="token punctuation">)</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">incrementOne</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'INCREMENTONE'</span><span class="token punctuation">,</span>state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">incrementTow</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'INCREMENTTOW'</span><span class="token punctuation">,</span>state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
	  
<span class="token punctuation">}</span>

<span class="token comment">//准备mutations——用于操作数据（state）</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token constant">INCREMENT</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token constant">DECREMENT</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>sum <span class="token operator">-=</span> state

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token constant">INCREMENTONE</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token constant">INCREMENTTOW</span><span class="token punctuation">(</span><span class="token parameter">commit<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        commit<span class="token punctuation">.</span>sum <span class="token operator">+=</span> state
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//准备state——用于存储数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>


<span class="token comment">// 定义getter来获取数据</span>
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">sum</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>sum<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	actions<span class="token punctuation">,</span>
	mutations<span class="token punctuation">,</span>
    state<span class="token punctuation">,</span>
    getters<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="VueComponent_354"></a>VueComponent调用</h5> 
<h6><a id="dispatch_356"></a>方式一：通过dispatch调用</h6> 
<pre><code class="prism language-vue">&lt;template&gt;
    &lt;div class="hello"&gt;
        &lt;h1&gt;当前sum的值为{<!-- -->{ $store.state.sum }}&lt;/h1&gt;
        &lt;select v-model.number="num"&gt;
            &lt;option value="1"&gt;1&lt;/option&gt;
            &lt;option value="2"&gt;2&lt;/option&gt;
            &lt;option value="3"&gt;3&lt;/option&gt;
        &lt;/select&gt;
        &lt;hr&gt;
        &lt;button @click="increment"&gt;++&lt;/button&gt;
        &lt;button @click="decrement"&gt;--&lt;/button&gt;
        &lt;button @click="incrementOne"&gt;为奇数则加1&lt;/button&gt;
        &lt;button @click="incrementTow"&gt;为偶数则加2&lt;/button&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    name: 'Count',
    data() {
        return {
            num: 1
        }
    },

    methods: {
        increment() {
            this.$store.dispatch('increment', this.num)
        },

        decrement() {
            this.$store.dispatch('decrement', this.num)
        },

        incrementOne() {
            if (this.$store.state.sum % 2 != 0) {
                this.$store.dispatch('incrementOne', 1)
            }
        },
        incrementTow() {
            if (this.$store.state.sum % 2 == 0) {
                this.$store.dispatch('incrementTow', 2)
            }
        },
    },

    mounted() {
        console.log("app", this);
    }
}
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;&lt;/style&gt;
</code></pre> 
<h6><a id="commit_417"></a>方式二：通过commit调用</h6> 
<pre><code class="prism language-vue">&lt;template&gt;
    &lt;div class="hello"&gt;
        &lt;h1&gt;当前sum的值为{<!-- -->{ $store.state.sum }}&lt;/h1&gt;
        &lt;select v-model.number="num"&gt;
            &lt;option value="1"&gt;1&lt;/option&gt;
            &lt;option value="2"&gt;2&lt;/option&gt;
            &lt;option value="3"&gt;3&lt;/option&gt;
        &lt;/select&gt;
        &lt;hr&gt;
        &lt;button @click="increment"&gt;++&lt;/button&gt;
        &lt;button @click="decrement"&gt;--&lt;/button&gt;
        &lt;button @click="incrementOne"&gt;为奇数则加1&lt;/button&gt;
        &lt;button @click="incrementTow"&gt;为偶数则加2&lt;/button&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    name: 'Count',
    data() {
        return {
            num: 1
        }
    },

    methods: {
        increment() {
            this.$store.commit('INCREMENT', this.num)
        },

        decrement() {
            this.$store.commit('DECREMENT', this.num)
        },

        incrementOne() {
            if (this.$store.state.sum % 2 != 0) {
                this.$store.commit('INCREMENTONE', 1)
            }
        },
        incrementTow() {
            if (this.$store.state.sum % 2 == 0) {
                this.$store.commit('INCREMENTTOW', 2)
            }
        },
    },

    mounted() {
        console.log("app", this);
    }
}
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;&lt;/style&gt;
</code></pre> 
<p>效果</p> 
<p><img src="https://images2.imgbox.com/fb/2b/iq6BovJZ_o.png" alt="image20230929160957686.png"></p> 
<h3><a id="Vuex__480"></a><strong>Vuex 工作原理图</strong></h3> 
<p><img src="https://images2.imgbox.com/c7/58/SjzRDzun_o.png" alt="image20230925233024945.png"></p> 
<ul><li> <p>Vue Components：Vue组件</p> </li><li> <p>Actions：行为或动作</p> 
  <ul><li> <p>数据类型：<code>对象</code>（多个），一般是函数，如：</p> <pre><code class="prism language-js"><span class="token comment">//准备actions——用于响应组件中的动作</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	
    <span class="token comment">// 帐号登录, 从后端获取用户数据，并调用mutations来更新状态</span>
    <span class="token function">Login</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> loginForm</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">login</span><span class="token punctuation">(</span>loginForm<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
        <span class="token comment">// console.log(res);</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
          <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_USER'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
				<span class="token comment">// 传递给welcome.vue : store.dispatch('Login').then(data)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>	
          <span class="token punctuation">}</span>
			 <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>   
<span class="token punctuation">}</span>
</code></pre> </li></ul> </li><li> <p>Mutations：字面意思为修改</p> 
  <ul><li> <p>数据类型：<code>对象</code>（多个），一般是函数，如：</p> <pre><code class="prism language-js"><span class="token comment">//准备mutations——用于操作数据（state）</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>

  <span class="token function-variable function">SET_USER</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// console.log(`mutations中的SET_USER被调用了`);</span>
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id <span class="token operator">=</span> user<span class="token punctuation">.</span>id
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>nickName <span class="token operator">=</span> user<span class="token punctuation">.</span>nickName
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>email <span class="token operator">=</span> user<span class="token punctuation">.</span>email
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>password <span class="token operator">=</span> user<span class="token punctuation">.</span>password
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>phone <span class="token operator">=</span> user<span class="token punctuation">.</span>phone
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>qqOpenId <span class="token operator">=</span> user<span class="token punctuation">.</span>qqOpenId
    state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar <span class="token operator">=</span> user<span class="token punctuation">.</span>avatar
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> </li><li> <p>state：状态</p> 
  <ul><li> <p>数据类型：<code>对象</code>（多个），如：</p> <pre><code class="prism language-js"><span class="token comment">//准备state——用于存储数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//当前用户信息</span>
  <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//当前用户的token</span>
  <span class="token literal-property property">newArticle</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//最新文章</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> </li><li> <p><code>Actions、Mutations和state由store来管理。</code></p> <p><img src="https://images2.imgbox.com/29/38/BWLh80FP_o.png" alt="image20230929141535640.png"></p> </li></ul> 
<p>一般的调用过程解释：</p> 
<ul><li> <p>Vue组件通过调用dispatch(参数1，参数2)函数来调用Actions中的函数对象，参数1为Actions中的方法名并用<code>''</code>单引号包裹，方法名为Actions中的方法，参数2为传入的数据。调用过程：<code>Vue实例对象.$store.dispatch(function,数据)</code>，如：<code>this.$store.dispatch('Login',userForm)</code></p> </li><li> <p>Actions通过<code>commit(参数1，参数2)函数</code>调用Mutations的函数对象，参数1为Mutations中的方法名并用<code>''</code>单引号包裹，参数2为传入的数据。调用过程：<code>commit(function,数据)</code>，如：<code>commit('SET_USER',userForm)</code></p> </li><li> <p>同时Vue组件也可以通过<code>commit(参数1，参数2)函数</code>调用Mutations的函数对象，参数1为Mutations中的方法名并用<code>''</code>单引号包裹，方法名为Mutations中的方法，参数2为传入的数据。调用过程：<code>Vue实例对象.$store.commit(function,数据)</code>，如：<code>this.$store.commit('SET_USER',userForm)</code></p> </li><li> <p>Vue组件可以不直接也Actions交互，Actions一般与后端的接口交互。</p> </li></ul> 
<p><strong><mark>state相当于vue组件中的data，而getters相当于vue组件中的computed</mark></strong></p> 
<h3><a id="getters_574"></a>getters配置项</h3> 
<pre><code class="prism language-js"><span class="token comment">// 定义getter----用来对state的数据进行加工</span>
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
     <span class="token function-variable function">sum</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>sum <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//或</span>
    <span class="token comment">// bugSum(state) {<!-- --></span>
    <span class="token comment">//     return state.sum * 10</span>
    <span class="token comment">// }</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d9/2c/BOcxFUf9_o.png" alt="image20230929161606592.png"></p> 
<p><img src="https://images2.imgbox.com/82/e2/mABA8xRr_o.png" alt="image20230929161647849.png"></p> 
<p><strong>注意：这种方式再获取store中的值时，都需要使用<code>$store.state.xxx</code>或<code>$store.getters.xxx</code>来获取值，所以，这种方式比较繁琐。获取store中的值还有其他的方法，如mapState()、mapGetters()、mapActions()、Mutations()。下面将给出。</strong></p> 
<h3><a id="mapState_596"></a>mapState</h3> 
<p>导入mapState</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span>  <span class="token punctuation">{<!-- --></span>mapState<span class="token punctuation">}</span> <span class="token keyword">from</span><span class="token string">"vuex"</span>
</code></pre> 
<p>通过计算属性computed来获取state中的值</p> 
<pre><code class="prism language-js"><span class="token comment">//参数为数组的写法</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

   
<span class="token comment">//参数为对象的写法</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token string">'sum'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p><strong>注意：mapState()必须要传参数，且必须是数组或对象，mapState参数要是store中的state中存在的属性，不然取出的值为null</strong></p> 
<p><img src="https://images2.imgbox.com/8a/58/gKDJxprT_o.png" alt="image20230929175752612.png"></p> 
<p><img src="https://images2.imgbox.com/bc/6c/gTN5ZBeu_o.png" alt="image20230929172401397.png"></p> 
<p><img src="https://images2.imgbox.com/2b/8b/AeJEybvn_o.png" alt="image20230929172700867.png"></p> 
<p><strong>通过this.sum可以在当前vc中使用，原因：通过使用<code>...mapState(['sum'])</code>，vc就会拥有<code>sum</code>属性如下，</strong></p> 
<p><img src="https://images2.imgbox.com/8f/34/gYrQG4Do_o.png" alt="image20230929175523740.png"></p> 
<p>效果：</p> 
<p><img src="https://images2.imgbox.com/0b/2b/VhU3ZEQL_o.png" alt="image20230929172739700.png"></p> 
<h3><a id="mapGetters_639"></a>mapGetters</h3> 
<p>导入mapGetters</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span>  <span class="token punctuation">{<!-- --></span>mapGetters<span class="token punctuation">}</span> <span class="token keyword">from</span><span class="token string">"vuex"</span>
</code></pre> 
<p>通过计算属性computed来获取state中的值</p> 
<pre><code class="prism language-js"><span class="token comment">//参数为数组的写法</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bigSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    
<span class="token comment">//参数为对象的写法</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">bigSum</span><span class="token operator">:</span><span class="token string">'bigSum'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p><strong>注意：mapGetters()必须要传参数，且必须是数组或对象，mapGetters参数要是store中state中存在的属性，不然取出的值为null</strong></p> 
<p><img src="https://images2.imgbox.com/de/19/LFaovW3J_o.png" alt="image20230929172401397.png"></p> 
<p><img src="https://images2.imgbox.com/2a/1b/wY76pJ8i_o.png" alt="image20230929175925659.png"></p> 
<p><strong>通过this.bigSum可以在当前vc中使用，原因：通过使用<code>...mapGetters(['bigSum'])</code>，vc就会拥有<code>bigSum</code>属性如下，</strong></p> 
<p><img src="https://images2.imgbox.com/b0/b4/G7dTMN3A_o.png" alt="image20230929180141347.png"></p> 
<p><img src="https://images2.imgbox.com/45/88/wJzDQUlY_o.png" alt="image20230929180247122.png"></p> 
<p>效果：</p> 
<p><img src="https://images2.imgbox.com/4a/36/p6nbjQm5_o.png" alt="image20230929180318154.png"></p> 
<h3><a id="mapActions_679"></a>mapActions</h3> 
<p>mapActions方法：用于帮助我们生成与 actions对话的方法，即：包含$store.dispatch(xxx)的函数。借助mapActions生成对应的方法,方法中会调用dispacth去联系actions。</p> 
<p>导入mapGetters</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span>  <span class="token punctuation">{<!-- --></span>mapActions<span class="token punctuation">}</span> <span class="token keyword">from</span><span class="token string">"vuex"</span>
</code></pre> 
<p>mapGetters获取的是方法名，因此要写到methods中</p> 
<h4><a id="_693"></a>方式一：对象的写法</h4> 
<pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">// 对象的写法</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">jia</span><span class="token operator">:</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token literal-property property">jian</span><span class="token operator">:</span><span class="token string">'decrement'</span><span class="token punctuation">,</span> <span class="token literal-property property">jiaOne</span><span class="token operator">:</span><span class="token string">'incrementOne'</span><span class="token punctuation">,</span> <span class="token literal-property property">jiaTow</span><span class="token operator">:</span><span class="token string">'incrementTow'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>绑定事件</p> 
<p><img src="https://images2.imgbox.com/c9/ca/6mwyzgB2_o.png" alt="image20230929232645212.png"></p> 
<p>效果：</p> 
<p><img src="https://images2.imgbox.com/ea/34/BqcZ9IBU_o.png" alt="image20230929232351726.png"></p> 
<h4><a id="_710"></a>方式二：数组的写法</h4> 
<pre><code class="prism language-js"> <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token string">'INCREMENT'</span><span class="token punctuation">,</span> <span class="token string">'DECREMENT'</span><span class="token punctuation">,</span>  <span class="token string">'INCREMENTONE'</span><span class="token punctuation">,</span>  <span class="token string">'INCREMENTTOW'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>事件绑定</p> 
<p><img src="https://images2.imgbox.com/31/f6/zIoHkVi8_o.png" alt="image20230929231856380.png"></p> 
<p>效果：</p> 
<p><img src="https://images2.imgbox.com/fc/e7/7gJqw7qL_o.png" alt="image20230929232049455.png"></p> 
<h3><a id="mapMutations_728"></a>mapMutations</h3> 
<p>mapMutations方法：用于帮助我们生成与 mutations对话的方法，即：包含$store.commit(xxx)的函数。借助mapMutations生成对应的方法，方法中会调用commit去联系mutations。</p> 
<p>导入mapGetters</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span>  <span class="token punctuation">{<!-- --></span>mapMutations<span class="token punctuation">}</span> <span class="token keyword">from</span><span class="token string">"vuex"</span>
</code></pre> 
<p>通过计算属性computed来获取state中的值</p> 
<pre><code class="prism language-js"><span class="token comment">//参数为数组的写法</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bigSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    
<span class="token comment">//参数为对象的写法</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">bigSum</span><span class="token operator">:</span><span class="token string">'bigSum'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p><strong>注意：mapGetters()必须要传参数，且必须是数组或对象，mapGetters参数要是store中state中存在的属性，不然取出的值为null</strong></p> 
<h4><a id="_754"></a>方式一：对象的写法</h4> 
<pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
       <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">increment</span><span class="token operator">:</span> <span class="token string">'INCREMENT'</span><span class="token punctuation">,</span> <span class="token literal-property property">decrement</span><span class="token operator">:</span> <span class="token string">'DECREMENT'</span><span class="token punctuation">,</span> <span class="token literal-property property">incrementOne</span><span class="token operator">:</span> <span class="token string">'INCREMENTONE'</span><span class="token punctuation">,</span> <span class="token literal-property property">incrementTow</span><span class="token operator">:</span> <span class="token string">'INCREMENTTOW'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/ca/NytMRxca_o.png" alt="image20230929221412150.png"></p> 
<p>原因：increment，decrement，incrementOne与increment相当于methods中的方法名，让其他的事件调用。</p> 
<p>类似于调用<code>this.#stroe.commit('mutation中的方法名',传入的数据)</code>，次数mutation中方法的第二个参数（即传入的数据参数为<code>PointerEvent</code>鼠标事件对象）</p> 
<p><img src="https://images2.imgbox.com/5d/5a/KjTrde9z_o.png" alt="image20230929222425424.png"></p> 
<p>出现这种状况的原因：当由vc通过调用<code>this.$store.commit('INCREMENT',this.n)</code>时才是正确的，</p> 
<pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
	<span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'INCREMENT'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>绑定的事件为：</p> 
<p><img src="https://images2.imgbox.com/87/65/qHBQIJ2f_o.png" alt="image20230929223132581.png"><br> 而当使用<code>...mapMutations({ increment: 'INCREMENT',...}),</code>是调用成</p> 
<pre><code>methods:{
	increment(value){
		this.$store.commit('INCREMENT',value)
	}
}
</code></pre> 
<p>绑定的事件并没有传入参数，因此<code>increment</code>方法传入的参数value的值为<code>event</code>事件，所以就产生如上图的<code>当前sum的值为0[object PointerEvent]</code>错误，解决这个错误只需将绑定的事件传入指定的值即可，修改绑定事件如下：</p> 
<p><img src="https://images2.imgbox.com/1c/ce/xoZ15Xp4_o.png" alt="image20230929223916172.png"><br> 解决后的效果：</p> 
<p><img src="https://images2.imgbox.com/cb/2b/g3KwPFpM_o.png" alt="image20230929224105717.png"></p> 
<p>嵌套函数的写法（不推荐）：</p> 
<pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">jia</span><span class="token operator">:</span> <span class="token string">'INCREMENT'</span><span class="token punctuation">,</span> <span class="token literal-property property">jian</span><span class="token operator">:</span> <span class="token string">'DECREMENT'</span><span class="token punctuation">,</span> <span class="token literal-property property">jianOne</span><span class="token operator">:</span> <span class="token string">'INCREMENTONE'</span><span class="token punctuation">,</span> <span class="token literal-property property">jianTow</span><span class="token operator">:</span> <span class="token string">'INCREMENTTOW'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">jian</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token function">incrementOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">jianOne</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">incrementTow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">jianTow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>绑定事件</p> 
<p><img src="https://images2.imgbox.com/75/c8/5eAtgQ5j_o.png" alt="image20230929224931505.png"><br> 效果：</p> 
<p><img src="https://images2.imgbox.com/86/c2/x0uHc2Xn_o.png" alt="image20230929225002931.png"></p> 
<h4><a id="_840"></a>方式二：数组的写法</h4> 
<pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'INCREMENT'</span><span class="token punctuation">,</span> <span class="token string">'DECREMENT'</span><span class="token punctuation">,</span><span class="token string">'INCREMENTONE'</span><span class="token punctuation">,</span> <span class="token string">'INCREMENTTOW'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>需要注意的是，此时，mapMutations中数组的值必须为actions中的方法名，这时methods中的方法名也变成了actions中的方法名，因此绑定的事件名必须于actions中的方法名一致，并传入指定的参数值。如下</p> 
<p><img src="https://images2.imgbox.com/f3/63/MmN1oG48_o.png" alt="image20230929230225593.png"><br> 效果：</p> 
<p><img src="https://images2.imgbox.com/47/00/bm9sMR4q_o.png" alt="image20230929230100630.png"></p> 
<p><mark><strong>总结： mapActions与mapMutations使用时，若需要传递参数需要:在模板中绑定事件时传递好参数，否则参数是事件对象。</strong></mark></p> 
<h3><a id="Vuex_859"></a>Vuex模块化</h3> 
<p>countOption.js（求和相关）</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> countOption <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
     <span class="token comment">//开启命名空间</span>
    <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span>
    
    <span class="token literal-property property">actions</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//准备mutations——用于操作数据（state）</span>
    <span class="token literal-property property">mutations</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//准备state——用于存储数据</span>
    <span class="token literal-property property">state</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>


    <span class="token comment">// 定义getter----用来对state的数据进行加工</span>
    <span class="token literal-property property">getters</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> countOption
</code></pre> 
<p>personOption.js（人员管理相关）</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> personOption <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//开启命名空间</span>
    <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span>
    
    <span class="token literal-property property">actions</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//准备mutations——用于操作数据（state）</span>
    <span class="token literal-property property">mutations</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//准备state——用于存储数据</span>
    <span class="token literal-property property">state</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>


    <span class="token comment">// 定义getter----用来对state的数据进行加工</span>
    <span class="token literal-property property">getters</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> personOption
</code></pre> 
<p>index.js</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> count <span class="token keyword">from</span> <span class="token string">'./modules/countOption'</span>
<span class="token keyword">import</span> person <span class="token keyword">from</span> <span class="token string">'./modules/personOption'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    count<span class="token punctuation">,</span>
    person
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store

</code></pre> 
<p>开启命名空间后，组件中读取state数据：</p> 
<pre><code class="prism language-js"><span class="token comment">//方式一：直接读取</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>person<span class="token punctuation">.</span>list
<span class="token comment">//方式二：借助mapState读取：</span>
<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> 
<p>开启命名空间后，组件中读取getters数据：</p> 
<pre><code class="prism language-js"><span class="token comment">//方式一：直接读取</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">[</span><span class="token string">'person/firstPersonName'</span><span class="token punctuation">]</span>
<span class="token comment">//方式二：借助mapGetters读取：</span>
<span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'bigSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>开启命名空间后，组件中调用dispatch</p> 
<pre><code class="prism language-js"><span class="token comment">//方式一：直接dispatch</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'person/addPersonWang'</span><span class="token punctuation">,</span>person<span class="token punctuation">)</span>
<span class="token comment">//方式二：借助mapActions：</span>
<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">incrementOdd</span><span class="token operator">:</span><span class="token string">'jiaOdd'</span><span class="token punctuation">,</span><span class="token literal-property property">incrementWait</span><span class="token operator">:</span><span class="token string">'jiaWait'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>开启命名空间后，组件中调用commit</p> 
<pre><code class="prism language-js"><span class="token comment">//方式一：自己直接commit</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'person/ADD_PERSON'</span><span class="token punctuation">,</span>person<span class="token punctuation">)</span>
<span class="token comment">//方式二：借助mapMutations：</span>
<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">increment</span><span class="token operator">:</span><span class="token string">'JIA'</span><span class="token punctuation">,</span><span class="token literal-property property">decrement</span><span class="token operator">:</span><span class="token string">'JIAN'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> 
<p><strong>本文案例地址：https://github.com/rookiesnewbie/VuexStudy</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7719ff7f63761abc8137e11a774ce017/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos服务器a.sh内如何 在指令中自动加入当前时间？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/329c361030048b7dd171d0abb7154bb0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【IC设计】Chisel开发环境搭建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>