<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hive 函数大全（吐血整理） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hive 函数大全（吐血整理）" />
<meta property="og:description" content="Hive 函数大全（吐血整理） 前言关系运算1、等值比较：=2、不等值比较：&lt;&gt;3、小于比较：&lt;4、小于等于比较：&lt;=5、大于比较：&gt;6、大于等于比较：&gt;7、空值判断：IS NULL8、非空判断：IS NOT NULL9、LIKE 比较：LIKE10、JAVA 的 LIKE 比较：RLIKE11、正则匹配：REGEXP 数学运算1、加法操作：&#43;2、减法操作：-3、乘法操作：*4、除法操作：/5、取余操作：%6、位与操作：&amp;7、位或操作：|8、位异或操作：^9、按位取反操作：~ 逻辑运算1、逻辑与操作：AND2、逻辑与操作：OR3、逻辑非操作：NOT 条件运算1、IF 函数：IF2、非空查找函数：COALESCE3、条件判断函数：CASE4、条件判断函数：CASE 数值计算1、近似函数：round2、指定精度近似函数：round3、向下取整函数：floor4、向上取整函数：ceil5、向上取整函数：ceiling6、取随机函数：rand7、自然指数函数：exp8、以 10 为底的对数函数：log109、以 2 为底的对数函数：log210、对数函数：log11、幂运算函数：pow12、幂运算函数：power13、平方根函数：sqrt14、二进制函数：bin15、十六进制函数：hex16、反转十六进制函数：unhex17、进制转换函数：conv18、绝对值函数：abs19、正取余函数：pmod20、正弦函数：sin21、反正弦函数：asin22、余弦函数：cos23、反余弦函数：acos24、positive 函数：positive25、negative 函数：negative 日期函数1、UNIX 时间戳转日期函数：fom_unixtime2、获取当前 UNIX 时间戳函数：unix_timestamp3、日期转 UNIX 时间戳函数：unix_timestamp4、指定格式日期转 UNIX 时间戳函数：unix_timestamp5、日期时间转日期函数：to_date6、日期转年函数：year7、日期转月函数：month8、日期转天函数：day9、日期转小时函数：hour10、日期转分钟函数：minute11、日期转秒函数：second12、日期转周函数：weekofyear13、日期比较函数：datediff14、日期增加函数：date_add15、日期减少函数：date_sub 字符串函数1、字符串长度函数：length2、字符串反转函数：reverse3、字符串连接函数：concat4、带分隔符字符串连接函数：concat_ws5、字符串截取函数：substr | substring6、字符串截取函数：substr | substring7、字符串转大写函数：upper | ucase8、字符串转小写函数：lower | lcase9、去空格函数：trim10、左边去空格函数：ltrim11、右边去空格函数：rtrim12、正则表达式替换函数：regexp_replace13、正则表达式解析函数：regexp_extract14、URL 解析函数：parse_url15、JSON 解析函数：get_json_object16、空字符串函数：space17、重复字符串函数：repeat18、首字符 ASCII 函数：ascii19、左补足函数：lpad20、右补足函数：rpad21、分割字符串函数：split22、集合查找函数：find_in_set 聚合函数1、统计函数：count2、求和函数：sum3、平均值函数：avg4、最小值函数：min5、最大值函数：max6、总体方差函数：var_pop7、样本方差函数：var_samp8、总体标准差函数：stddev_pop9、样本标准差函数：stddev_samp10、百分位函数：percentile11、百分位函数：percentile12、近似百分位函数：percentile_approx13、近似百分位函数：percentile_approx14、直方图：histogram_numeric 前言 Hive 内部提供了很多函数给开发者使用，包括数学函数，类型转换函数，条件函数，字符函数，聚合函数，表生成函数等等，这些函数都统称为内置函数。
在 hive 中可通过以下命令查看函数信息：
--显示所有的可用函数，包括运算符、内置函数、自定义函数 show functions; --显示指定函数的描述信息 desc function trim; --显示指定函数的详细信息 desc function extended trim; 关系运算 1、等值比较：= 语法：A = B
操作类型：基本类型
描述：如果表达式 A 与表达式 B 相等，则为 TRUE；否则为 FALSE。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/86139ee120ce4076d0249c73689dbd12/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-17T08:42:03+08:00" />
<meta property="article:modified_time" content="2020-06-17T08:42:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hive 函数大全（吐血整理）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Hive 函数大全（吐血整理）</h4> 
 <ul><li><a href="#_2" rel="nofollow">前言</a></li><li><a href="#_19" rel="nofollow">关系运算</a></li><li><ul><li><a href="#1_21" rel="nofollow">1、等值比较：=</a></li><li><a href="#2_32" rel="nofollow">2、不等值比较：&lt;&gt;</a></li><li><a href="#3_43" rel="nofollow">3、小于比较：&lt;</a></li><li><a href="#4_54" rel="nofollow">4、小于等于比较：&lt;=</a></li><li><a href="#5_65" rel="nofollow">5、大于比较：&gt;</a></li><li><a href="#6_76" rel="nofollow">6、大于等于比较：&gt;</a></li><li><a href="#7IS_NULL_87" rel="nofollow">7、空值判断：IS NULL</a></li><li><a href="#8IS_NOT_NULL_98" rel="nofollow">8、非空判断：IS NOT NULL</a></li><li><a href="#9LIKE_LIKE_109" rel="nofollow">9、LIKE 比较：LIKE</a></li><li><a href="#10JAVA__LIKE_RLIKE_136" rel="nofollow">10、JAVA 的 LIKE 比较：RLIKE</a></li><li><a href="#11REGEXP_147" rel="nofollow">11、正则匹配：REGEXP</a></li></ul> 
  </li><li><a href="#_159" rel="nofollow">数学运算</a></li><li><ul><li><a href="#1_161" rel="nofollow">1、加法操作：+</a></li><li><a href="#2_178" rel="nofollow">2、减法操作：-</a></li><li><a href="#3_195" rel="nofollow">3、乘法操作：*</a></li><li><a href="#4_206" rel="nofollow">4、除法操作：/</a></li><li><a href="#5_218" rel="nofollow">5、取余操作：%</a></li><li><a href="#6_245" rel="nofollow">6、位与操作：&amp;</a></li><li><a href="#7_262" rel="nofollow">7、位或操作：|</a></li><li><a href="#8_279" rel="nofollow">8、位异或操作：^</a></li><li><a href="#9_296" rel="nofollow">9、按位取反操作：~</a></li></ul> 
  </li><li><a href="#_314" rel="nofollow">逻辑运算</a></li><li><ul><li><a href="#1AND_316" rel="nofollow">1、逻辑与操作：AND</a></li><li><a href="#2OR_327" rel="nofollow">2、逻辑与操作：OR</a></li><li><a href="#3NOT_338" rel="nofollow">3、逻辑非操作：NOT</a></li></ul> 
  </li><li><a href="#_350" rel="nofollow">条件运算</a></li><li><ul><li><a href="#1IF_IF_352" rel="nofollow">1、IF 函数：IF</a></li><li><a href="#2COALESCE_363" rel="nofollow">2、非空查找函数：COALESCE</a></li><li><a href="#3CASE_374" rel="nofollow">3、条件判断函数：CASE</a></li><li><a href="#4CASE_385" rel="nofollow">4、条件判断函数：CASE</a></li></ul> 
  </li><li><a href="#_397" rel="nofollow">数值计算</a></li><li><ul><li><a href="#1round_399" rel="nofollow">1、近似函数：round</a></li><li><a href="#2round_416" rel="nofollow">2、指定精度近似函数：round</a></li><li><a href="#3floor_427" rel="nofollow">3、向下取整函数：floor</a></li><li><a href="#4ceil_438" rel="nofollow">4、向上取整函数：ceil</a></li><li><a href="#5ceiling_449" rel="nofollow">5、向上取整函数：ceiling</a></li><li><a href="#6rand_460" rel="nofollow">6、取随机函数：rand</a></li><li><a href="#7exp_477" rel="nofollow">7、自然指数函数：exp</a></li><li><a href="#8_10_log10_488" rel="nofollow">8、以 10 为底的对数函数：log10</a></li><li><a href="#9_2_log2_499" rel="nofollow">9、以 2 为底的对数函数：log2</a></li><li><a href="#10log_510" rel="nofollow">10、对数函数：log</a></li><li><a href="#11pow_521" rel="nofollow">11、幂运算函数：pow</a></li><li><a href="#12power_532" rel="nofollow">12、幂运算函数：power</a></li><li><a href="#13sqrt_543" rel="nofollow">13、平方根函数：sqrt</a></li><li><a href="#14bin_554" rel="nofollow">14、二进制函数：bin</a></li><li><a href="#15hex_565" rel="nofollow">15、十六进制函数：hex</a></li><li><a href="#16unhex_582" rel="nofollow">16、反转十六进制函数：unhex</a></li><li><a href="#17conv_599" rel="nofollow">17、进制转换函数：conv</a></li><li><a href="#18abs_616" rel="nofollow">18、绝对值函数：abs</a></li><li><a href="#19pmod_633" rel="nofollow">19、正取余函数：pmod</a></li><li><a href="#20sin_650" rel="nofollow">20、正弦函数：sin</a></li><li><a href="#21asin_661" rel="nofollow">21、反正弦函数：asin</a></li><li><a href="#22cos_672" rel="nofollow">22、余弦函数：cos</a></li><li><a href="#23acos_683" rel="nofollow">23、反余弦函数：acos</a></li><li><a href="#24positive_positive_694" rel="nofollow">24、positive 函数：positive</a></li><li><a href="#25negative_negative_711" rel="nofollow">25、negative 函数：negative</a></li></ul> 
  </li><li><a href="#_729" rel="nofollow">日期函数</a></li><li><ul><li><a href="#1UNIX_fom_unixtime_730" rel="nofollow">1、UNIX 时间戳转日期函数：fom_unixtime</a></li><li><a href="#2_UNIX_unix_timestamp_742" rel="nofollow">2、获取当前 UNIX 时间戳函数：unix_timestamp</a></li><li><a href="#3_UNIX_unix_timestamp_754" rel="nofollow">3、日期转 UNIX 时间戳函数：unix_timestamp</a></li><li><a href="#4_UNIX_unix_timestamp_766" rel="nofollow">4、指定格式日期转 UNIX 时间戳函数：unix_timestamp</a></li><li><a href="#5to_date_778" rel="nofollow">5、日期时间转日期函数：to_date</a></li><li><a href="#6year_790" rel="nofollow">6、日期转年函数：year</a></li><li><a href="#7month_802" rel="nofollow">7、日期转月函数：month</a></li><li><a href="#8day_814" rel="nofollow">8、日期转天函数：day</a></li><li><a href="#9hour_826" rel="nofollow">9、日期转小时函数：hour</a></li><li><a href="#10minute_838" rel="nofollow">10、日期转分钟函数：minute</a></li><li><a href="#11second_850" rel="nofollow">11、日期转秒函数：second</a></li><li><a href="#12weekofyear_862" rel="nofollow">12、日期转周函数：weekofyear</a></li><li><a href="#13datediff_874" rel="nofollow">13、日期比较函数：datediff</a></li><li><a href="#14date_add_886" rel="nofollow">14、日期增加函数：date_add</a></li><li><a href="#15date_sub_898" rel="nofollow">15、日期减少函数：date_sub</a></li></ul> 
  </li><li><a href="#_911" rel="nofollow">字符串函数</a></li><li><ul><li><a href="#1length_913" rel="nofollow">1、字符串长度函数：length</a></li><li><a href="#2reverse_924" rel="nofollow">2、字符串反转函数：reverse</a></li><li><a href="#3concat_935" rel="nofollow">3、字符串连接函数：concat</a></li><li><a href="#4concat_ws_946" rel="nofollow">4、带分隔符字符串连接函数：concat_ws</a></li><li><a href="#5substr__substring_957" rel="nofollow">5、字符串截取函数：substr | substring</a></li><li><a href="#6substr__substring_974" rel="nofollow">6、字符串截取函数：substr | substring</a></li><li><a href="#7upper__ucase_991" rel="nofollow">7、字符串转大写函数：upper | ucase</a></li><li><a href="#8lower__lcase_1002" rel="nofollow">8、字符串转小写函数：lower | lcase</a></li><li><a href="#9trim_1013" rel="nofollow">9、去空格函数：trim</a></li><li><a href="#10ltrim_1024" rel="nofollow">10、左边去空格函数：ltrim</a></li><li><a href="#11rtrim_1035" rel="nofollow">11、右边去空格函数：rtrim</a></li><li><a href="#12regexp_replace_1046" rel="nofollow">12、正则表达式替换函数：regexp_replace</a></li><li><a href="#13regexp_extract_1057" rel="nofollow">13、正则表达式解析函数：regexp_extract</a></li><li><a href="#14URL_parse_url_1080" rel="nofollow">14、URL 解析函数：parse_url</a></li><li><a href="#15JSON_get_json_object_1097" rel="nofollow">15、JSON 解析函数：get_json_object</a></li><li><a href="#16space_1108" rel="nofollow">16、空字符串函数：space</a></li><li><a href="#17repeat_1119" rel="nofollow">17、重复字符串函数：repeat</a></li><li><a href="#18_ASCII_ascii_1130" rel="nofollow">18、首字符 ASCII 函数：ascii</a></li><li><a href="#19lpad_1141" rel="nofollow">19、左补足函数：lpad</a></li><li><a href="#20rpad_1152" rel="nofollow">20、右补足函数：rpad</a></li><li><a href="#21split_1163" rel="nofollow">21、分割字符串函数：split</a></li><li><a href="#22find_in_set_1174" rel="nofollow">22、集合查找函数：find_in_set</a></li></ul> 
  </li><li><a href="#_1186" rel="nofollow">聚合函数</a></li><li><ul><li><a href="#1count_1217" rel="nofollow">1、统计函数：count</a></li><li><a href="#2sum_1234" rel="nofollow">2、求和函数：sum</a></li><li><a href="#3avg_1251" rel="nofollow">3、平均值函数：avg</a></li><li><a href="#4min_1268" rel="nofollow">4、最小值函数：min</a></li><li><a href="#5max_1279" rel="nofollow">5、最大值函数：max</a></li><li><a href="#6var_pop_1290" rel="nofollow">6、总体方差函数：var_pop</a></li><li><a href="#7var_samp_1301" rel="nofollow">7、样本方差函数：var_samp</a></li><li><a href="#8stddev_pop_1312" rel="nofollow">8、总体标准差函数：stddev_pop</a></li><li><a href="#9stddev_samp_1323" rel="nofollow">9、样本标准差函数：stddev_samp</a></li><li><a href="#10percentile_1334" rel="nofollow">10、百分位函数：percentile</a></li><li><a href="#11percentile_1345" rel="nofollow">11、百分位函数：percentile</a></li><li><a href="#12percentile_approx_1356" rel="nofollow">12、近似百分位函数：percentile_approx</a></li><li><a href="#13percentile_approx_1367" rel="nofollow">13、近似百分位函数：percentile_approx</a></li><li><a href="#14histogram_numeric_1378" rel="nofollow">14、直方图：histogram_numeric</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>前言</h2> 
<p> <br> Hive 内部提供了很多函数给开发者使用，包括数学函数，类型转换函数，条件函数，字符函数，聚合函数，表生成函数等等，这些函数都统称为内置函数。</p> 
<p>在 hive 中可通过以下命令查看函数信息：</p> 
<pre><code class="prism language-sql"><span class="token comment">--显示所有的可用函数，包括运算符、内置函数、自定义函数</span>
<span class="token keyword">show</span> functions<span class="token punctuation">;</span>

<span class="token comment">--显示指定函数的描述信息</span>
<span class="token keyword">desc</span> <span class="token keyword">function</span> trim<span class="token punctuation">;</span>

<span class="token comment">--显示指定函数的详细信息</span>
<span class="token keyword">desc</span> <span class="token keyword">function</span> <span class="token keyword">extended</span> trim<span class="token punctuation">;</span>
</code></pre> 
<p> </p> 
<h2><a id="_19"></a>关系运算</h2> 
<p> </p> 
<h3><a id="1_21"></a>1、等值比较：=</h3> 
<p><strong>语法</strong>：A = B<br> <strong>操作类型</strong>：基本类型<br> <strong>描述</strong>：如果表达式 A 与表达式 B 相等，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="2_32"></a>2、不等值比较：&lt;&gt;</h3> 
<p><strong>语法</strong>：A &lt;&gt; B<br> <strong>操作类型</strong>：基本类型<br> <strong>描述</strong>：如果表达式 A 或表达式 B 为 NULL，则返回 NULL；如果表达式 A 与 表达式 B 不相等，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">&lt;&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="3_43"></a>3、小于比较：&lt;</h3> 
<p><strong>语法</strong>：A &lt; B<br> <strong>操作类型</strong>：基本类型<br> <strong>描述</strong>：如果表达式 A 或表达式 B 为 NULL，则返回 NULL；如果表达式 A 小于表达式 B，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="4_54"></a>4、小于等于比较：&lt;=</h3> 
<p><strong>语法</strong>：A &lt;= B<br> <strong>操作类型</strong>：基本类型<br> <strong>描述</strong>：如果表达式 A 或表达式 B 为 NULL，则返回 NULL；如果表达式 A 小于或者等于表达式 B，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="5_65"></a>5、大于比较：&gt;</h3> 
<p><strong>语法</strong>：A &gt; B<br> <strong>操作类型</strong>：基本类型<br> <strong>描述</strong>：如果表达式 A 或表达式 B 为 NULL，则返回 NULL；如果表达式 A 大于表达式 B，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">2</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="6_76"></a>6、大于等于比较：&gt;</h3> 
<p><strong>语法</strong>：A &gt;= B<br> <strong>操作类型</strong>：基本类型<br> <strong>描述</strong>：如果表达式 A 或表达式 B 为 NULL，则返回 NULL；如果表达式 A 大于或者等于表达式 B，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="7IS_NULL_87"></a>7、空值判断：IS NULL</h3> 
<p><strong>语法</strong>：A IS NULL<br> <strong>操作类型</strong>：所有类型<br> <strong>描述</strong>：如果表达式 A 的值为 NULL，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token boolean">null</span> <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="8IS_NOT_NULL_98"></a>8、非空判断：IS NOT NULL</h3> 
<p><strong>语法</strong>：A IS NOT NULL<br> <strong>操作类型</strong>：所有类型<br> <strong>描述</strong>：如果表达式 A 的值为 NULL，则为 FALSE；否则为 TRUE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="9LIKE_LIKE_109"></a>9、LIKE 比较：LIKE</h3> 
<p><strong>语法</strong>：A LIKE B<br> <strong>操作类型</strong>：字符类型<br> <strong>描述</strong>：如果字符串 A 或字符串 B 为 NULL，则返回 NULL；如果字符串 A 符合简单 SQL 正则表达式 B 的语法，则为 TRUE；否则为 FALSE。</p> 
<p>字符 ”_” 表示任意单个字符</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token string">'football'</span> <span class="token operator">like</span> <span class="token string">'foot____'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<p>字符 ”%” 表示任意数量的字符</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token string">'football'</span> <span class="token operator">like</span> <span class="token string">'foot%'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<p><strong>注意</strong>：否定比较时候用 NOT A LIKE B</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token string">'football'</span> <span class="token operator">like</span> <span class="token string">'fff%'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="10JAVA__LIKE_RLIKE_136"></a>10、JAVA 的 LIKE 比较：RLIKE</h3> 
<p><strong>语法</strong>：A RLIKE B<br> <strong>操作类型</strong>：字符类型<br> <strong>描述</strong>：如果字符串 A 或字符串 B 为 NULL，则返回 NULL；如果字符串 A 符合 JAVA 正则表达式 B 的正则语法，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token string">'football'</span> <span class="token operator">rlike</span> <span class="token string">'^f.*l$'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="11REGEXP_147"></a>11、正则匹配：REGEXP</h3> 
<p><strong>语法</strong>：A REGEXP B<br> <strong>操作类型</strong>：字符类型<br> <strong>描述</strong>：功能与 RLIKE 相同</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token string">'football'</span> <span class="token operator">regexp</span> <span class="token string">'^f.*l$'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<p> </p> 
<h2><a id="_159"></a>数学运算</h2> 
<p> </p> 
<h3><a id="1_161"></a>1、加法操作：+</h3> 
<p><strong>语法</strong>：A + B<br> <strong>操作类型</strong>：数值类型<br> <strong>说明</strong>：返回 A 与 B 相加的结果。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。比如，int + int 一般结果为 int 类型，而 int + double 一般结果为 double 类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1.5</span>
</code></pre> 
<h3><a id="2_178"></a>2、减法操作：-</h3> 
<p><strong>语法</strong>：A - B<br> <strong>操作类型</strong>：数值类型<br> <strong>说明</strong>：返回 A 与 B 相减的结果。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。比如，int - int 一般结果为 int 类型，而 int - double 一般结果为 double 类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">3</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1.5</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.5</span>
</code></pre> 
<h3><a id="3_195"></a>3、乘法操作：*</h3> 
<p><strong>语法</strong>：A * B<br> <strong>操作类型</strong>：数值类型<br> <strong>说明</strong>：返回 A 与 B 相乘的结果。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。注意，如果 A 乘以 B 的结果超过默认结果类型的数值范围，则需要通过 cast 将结果转换成范围更大的数值类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">24</span>
</code></pre> 
<h3><a id="4_206"></a>4、除法操作：/</h3> 
<p><strong>语法</strong>：A / B<br> <strong>操作类型</strong>：数值类型<br> <strong>说明</strong>：返回 A 除以 B 的结果。结果的数值类型为 double。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2.0</span>
</code></pre> 
<p><strong>注意</strong>：hive 中最高精度的数据类型是 double，只精确到小数点后16位，在做除法运算的时候要特别注意</p> 
<h3><a id="5_218"></a>5、取余操作：%</h3> 
<p><strong>语法</strong>：A % B<br> <strong>操作类型</strong>：数值类型<br> <strong>说明</strong>：返回 A 除以 B 的余数。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">5</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<p>若对浮点数求余，可能会出现如下结果</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">4.2</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.20000000000000018</span>
</code></pre> 
<p><strong>注意</strong>：精度在 hive 中是个很大的问题，类似这样的操作最好通过 round 指定精度</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">4.2</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.2</span>
</code></pre> 
<h3><a id="6_245"></a>6、位与操作：&amp;</h3> 
<p><strong>语法</strong>：A &amp; B<br> <strong>操作类型</strong>：整数类型<br> <strong>说明</strong>：返回 A 和 B 按位进行与操作的结果。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">4</span> <span class="token operator">&amp;</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">6</span> <span class="token operator">&amp;</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">4</span>
</code></pre> 
<h3><a id="7_262"></a>7、位或操作：|</h3> 
<p><strong>语法</strong>：A | B<br> <strong>操作类型</strong>：整数类型<br> <strong>说明</strong>：返回 A 和 B 按位进行或操作的结果。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">12</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">14</span>
</code></pre> 
<h3><a id="8_279"></a>8、位异或操作：^</h3> 
<p><strong>语法</strong>：A ^ B<br> <strong>操作类型</strong>：整数类型<br> <strong>说明</strong>：返回 A 和 B 按位进行异或操作的结果。结果的数值类型等于 A 的类型和 B 的类型的最小父类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">4</span> <span class="token operator">^</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">12</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">6</span> <span class="token operator">^</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2</span>
</code></pre> 
<h3><a id="9_296"></a>9、按位取反操作：~</h3> 
<p><strong>语法</strong>：~ A<br> <strong>操作类型</strong>：整数类型<br> <strong>说明</strong>：返回 A 按位取反操作的结果。结果的数值类型等于 A 的类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">~</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">5</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">~</span> <span class="token number">6</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">7</span>
</code></pre> 
<p> </p> 
<h2><a id="_314"></a>逻辑运算</h2> 
<p> </p> 
<h3><a id="1AND_316"></a>1、逻辑与操作：AND</h3> 
<p><strong>语法</strong>：A AND B<br> <strong>操作类型</strong>：boolean<br> <strong>说明</strong>：如果 A 或 B 为 NULL，则返回 NULL；如果 A 和 B 均为 TRUE，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="2OR_327"></a>2、逻辑与操作：OR</h3> 
<p><strong>语法</strong>：A OR B<br> <strong>操作类型</strong>：boolean<br> <strong>说明</strong>：如果 A 或 B 为 NULL，则返回 NULL；如果 A 或 B 有一个为 TRUE，则为 TRUE；否则为 FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">or</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<h3><a id="3NOT_338"></a>3、逻辑非操作：NOT</h3> 
<p><strong>语法</strong>：NOT A<br> <strong>操作类型</strong>：boolean<br> <strong>说明</strong>：如果 A 为 NULL，或者 A 为 FALSE，则为TRUE；否则为FALSE。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<p> </p> 
<h2><a id="_350"></a>条件运算</h2> 
<p> </p> 
<h3><a id="1IF_IF_352"></a>1、IF 函数：IF</h3> 
<p><strong>语法</strong>：IF(boolean testCondition, T valueTrue, T valueFalseOrNull)<br> <strong>返回类型</strong>：T<br> <strong>描述</strong>：当条件 testCondition 为 True 时，返回 valueTrue；否则返回 valueFalseOrNull。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">200</span>
</code></pre> 
<h3><a id="2COALESCE_363"></a>2、非空查找函数：COALESCE</h3> 
<p><strong>语法</strong>： COALESCE(T v1, T v2, …)<br> <strong>返回类型</strong>：T<br> <strong>描述</strong>：返回参数中的第一个非空值；如果所有值都为 NULL，那么返回NULL。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">coalesce</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'100'</span><span class="token punctuation">,</span> <span class="token string">'50'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">100</span>
</code></pre> 
<h3><a id="3CASE_374"></a>3、条件判断函数：CASE</h3> 
<p><strong>语法</strong>： CASE a WHEN b THEN c [WHEN d THEN e]* [ELSE f] END<br> <strong>返回类型</strong>：T<br> <strong>描述</strong>：如果 a 等于 b，那么返回 c；如果 a 等于 d，那么返回 e；否则返回 f。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">case</span> <span class="token number">100</span> <span class="token keyword">when</span> <span class="token number">50</span> <span class="token keyword">then</span> <span class="token string">'tom'</span> <span class="token keyword">when</span> <span class="token number">100</span> <span class="token keyword">then</span> <span class="token string">'jack'</span> <span class="token keyword">else</span> <span class="token string">'mary'</span> <span class="token keyword">end</span> 
</code></pre> 
<pre><code class="prism language-sql">jack
</code></pre> 
<h3><a id="4CASE_385"></a>4、条件判断函数：CASE</h3> 
<p><strong>语法</strong>： CASE WHEN a THEN b [WHEN c THEN d]* [ELSE e] END<br> <strong>返回类型</strong>：T<br> <strong>描述</strong>：如果 a 为 TRUE，则返回 b；如果 c 为 TRUE，则返回 d；否则返回 e。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'tom'</span> <span class="token keyword">when</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'jack'</span> <span class="token keyword">else</span> <span class="token string">'mary'</span> <span class="token keyword">end</span> 
</code></pre> 
<pre><code class="prism language-sql">jack
</code></pre> 
<p> </p> 
<h2><a id="_397"></a>数值计算</h2> 
<p> </p> 
<h3><a id="1round_399"></a>1、近似函数：round</h3> 
<p><strong>语法</strong>：round(double a)<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：返回 double 类型的整数值部分 （遵循四舍五入）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">4</span>
</code></pre> 
<h3><a id="2round_416"></a>2、指定精度近似函数：round</h3> 
<p><strong>语法</strong>：round(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回指定精度 d 的 double 类型</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3.1416</span>
</code></pre> 
<h3><a id="3floor_427"></a>3、向下取整函数：floor</h3> 
<p><strong>语法</strong>：floor(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回不大于 a 的最大整数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3</span>
</code></pre> 
<h3><a id="4ceil_438"></a>4、向上取整函数：ceil</h3> 
<p><strong>语法</strong>：ceil(double a)<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：返回不小于 a 的最小整数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">4</span>
</code></pre> 
<h3><a id="5ceiling_449"></a>5、向上取整函数：ceiling</h3> 
<p><strong>语法</strong>：ceiling(double a)<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：与 ceil 功能相同</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">4</span>
</code></pre> 
<h3><a id="6rand_460"></a>6、取随机函数：rand</h3> 
<p><strong>语法</strong>：rand()，rand(int seed)<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：返回一个 0 到 1 范围内的随机数。如果指定种子 seed，则会得到一个稳定的随机数序列。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.712311371683693</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.7308781907032909</span>
</code></pre> 
<h3><a id="7exp_477"></a>7、自然指数函数：exp</h3> 
<p><strong>语法</strong>：exp(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回自然对数 e 的 a 次方</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> exp<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">7.38905609893065</span>
</code></pre> 
<h3><a id="8_10_log10_488"></a>8、以 10 为底的对数函数：log10</h3> 
<p><strong>语法</strong>：log10(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回以 10 为底的 a 的对数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> log10<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2.0</span>
</code></pre> 
<h3><a id="9_2_log2_499"></a>9、以 2 为底的对数函数：log2</h3> 
<p><strong>语法</strong>：log2(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回以 2 为底的 a 的对数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> log2<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3.0</span>
</code></pre> 
<h3><a id="10log_510"></a>10、对数函数：log</h3> 
<p><strong>语法</strong>：log2(double base, double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回以 base 为底的 a 的对数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> log<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">10.0</span>
</code></pre> 
<h3><a id="11pow_521"></a>11、幂运算函数：pow</h3> 
<p><strong>语法</strong>：pow(double a, double p)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回以 a 的 p 次幂</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> pow<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">32.0</span>
</code></pre> 
<h3><a id="12power_532"></a>12、幂运算函数：power</h3> 
<p><strong>语法</strong>：power(double a, double p)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回以 a 的 p 次幂，与 pow 功能相同。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> pow<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1024.0</span>
</code></pre> 
<h3><a id="13sqrt_543"></a>13、平方根函数：sqrt</h3> 
<p><strong>语法</strong>：sqrt(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回 a 的 平方根</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sqrt<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">10.0</span>
</code></pre> 
<h3><a id="14bin_554"></a>14、二进制函数：bin</h3> 
<p><strong>语法</strong>：bin(bigint a)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：返回 a 的 二进制代码表示</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> bin<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">111</span>
</code></pre> 
<h3><a id="15hex_565"></a>15、十六进制函数：hex</h3> 
<p><strong>语法</strong>：hex(bigint a)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：如果变量是 int 类型，那么返回 a 的十六进制表示；如果变量是 string 类型，则返回该字符串的十六进制表示。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> hex<span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">11</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> hex<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">616263</span>
</code></pre> 
<h3><a id="16unhex_582"></a>16、反转十六进制函数：unhex</h3> 
<p><strong>语法</strong>：unhex(string a)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：返回该十六进制数或字符串所反转的字符串</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> unhex<span class="token punctuation">(</span><span class="token number">616263</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abc
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> unhex<span class="token punctuation">(</span><span class="token string">'616263'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abc
</code></pre> 
<h3><a id="17conv_599"></a>17、进制转换函数：conv</h3> 
<p><strong>语法</strong>：conv(bigint num, int from_base, int to_base)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：将数值 num 从 from_base 进制转化到 to_base 进制</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">10001</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">11</span>
</code></pre> 
<h3><a id="18abs_616"></a>18、绝对值函数：abs</h3> 
<p><strong>语法</strong>：abs(int a )，absdouble a)<br> <strong>返回类型</strong>：int double<br> <strong>说明</strong>：返回数值 a 的绝对值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> abs<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> abs<span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3.14</span>
</code></pre> 
<h3><a id="19pmod_633"></a>19、正取余函数：pmod</h3> 
<p><strong>语法</strong>：pmod(int a, int b)，pmod(double a, double b)<br> <strong>返回类型</strong>：int double<br> <strong>说明</strong>：返回正的 a 除以 b 的余数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> pmod<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> pmod<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3</span>
</code></pre> 
<h3><a id="20sin_650"></a>20、正弦函数：sin</h3> 
<p><strong>语法</strong>：sin(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回 a 的正弦值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sin<span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.7173560908995228</span>
</code></pre> 
<h3><a id="21asin_661"></a>21、反正弦函数：asin</h3> 
<p><strong>语法</strong>：asin(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回 a 的反正弦值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sin<span class="token punctuation">(</span><span class="token number">0.7173560908995228</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.8</span>
</code></pre> 
<h3><a id="22cos_672"></a>22、余弦函数：cos</h3> 
<p><strong>语法</strong>：cos(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回 a 的余弦值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> cos<span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.6967067093471654</span>
</code></pre> 
<h3><a id="23acos_683"></a>23、反余弦函数：acos</h3> 
<p><strong>语法</strong>：acos(double a)<br> <strong>返回类型</strong>：double<br> <strong>说明</strong>：返回 a 的反余弦值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> acos<span class="token punctuation">(</span><span class="token number">0.6967067093471654</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0.8</span>
</code></pre> 
<h3><a id="24positive_positive_694"></a>24、positive 函数：positive</h3> 
<p><strong>语法</strong>：positive(int a)，positive(double a)<br> <strong>返回类型</strong>：int double<br> <strong>说明</strong>：返回 a 自身</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> positive<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> positive<span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">3.14</span>
</code></pre> 
<h3><a id="25negative_negative_711"></a>25、negative 函数：negative</h3> 
<p><strong>语法</strong>：negative(int a)，negative(double a)<br> <strong>返回类型</strong>：int double<br> <strong>说明</strong>：返回 a 的相反数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> negative<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> negative<span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">3.14</span>
</code></pre> 
<p> </p> 
<h2><a id="_729"></a>日期函数</h2> 
<h3><a id="1UNIX_fom_unixtime_730"></a>1、UNIX 时间戳转日期函数：fom_unixtime</h3> 
<p> <br> <strong>语法</strong>：fom_unixtime(bigint unixtime[, string format])<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：转化 UNIX 时间戳（从1970-01-01 00:00:00 UTC 到指定时间的秒数）到当前时区的时间格式。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1590000000</span><span class="token punctuation">,</span> <span class="token string">'yyyy-MM-dd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2020</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>
</code></pre> 
<h3><a id="2_UNIX_unix_timestamp_742"></a>2、获取当前 UNIX 时间戳函数：unix_timestamp</h3> 
<p> <br> <strong>语法</strong>：unix_timestamp()<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：转获取当前时区的 UNIX 时间戳</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1592361030</span>
</code></pre> 
<h3><a id="3_UNIX_unix_timestamp_754"></a>3、日期转 UNIX 时间戳函数：unix_timestamp</h3> 
<p> <br> <strong>语法</strong>：unix_timestamp(string date)<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：转换格式为 “yyyy-MM-dd HH:mm:ss” 的日期到 UNIX 时间戳。如果转换失败，则返回 NULL。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1590000000</span>
</code></pre> 
<h3><a id="4_UNIX_unix_timestamp_766"></a>4、指定格式日期转 UNIX 时间戳函数：unix_timestamp</h3> 
<p> <br> <strong>语法</strong>：unix_timestamp(string date, string pattern)<br> <strong>返回类型</strong>：bigint<br> <strong>说明</strong>：转换 pattern 格式的日期到 UNIX 时间戳。如果转换失败，则返回 NULL。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'20200521 02:40:00'</span><span class="token punctuation">,</span> <span class="token string">'yyyyMMdd HH:mm:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">1590000000</span>
</code></pre> 
<h3><a id="5to_date_778"></a>5、日期时间转日期函数：to_date</h3> 
<p> <br> <strong>语法</strong>：to_date(string timestamp)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：返回日期时间字段中的日期部分。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2020</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>
</code></pre> 
<h3><a id="6year_790"></a>6、日期转年函数：year</h3> 
<p> <br> <strong>语法</strong>：year(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期中的年份。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2020</span>
</code></pre> 
<h3><a id="7month_802"></a>7、日期转月函数：month</h3> 
<p> <br> <strong>语法</strong>：month(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期中的月份。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">5</span>
</code></pre> 
<h3><a id="8day_814"></a>8、日期转天函数：day</h3> 
<p> <br> <strong>语法</strong>：day(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期中的天。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">21</span>
</code></pre> 
<h3><a id="9hour_826"></a>9、日期转小时函数：hour</h3> 
<p> <br> <strong>语法</strong>：hour(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期中的小时。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2</span>
</code></pre> 
<h3><a id="10minute_838"></a>10、日期转分钟函数：minute</h3> 
<p> <br> <strong>语法</strong>：minute(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期中的分钟。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">40</span>
</code></pre> 
<h3><a id="11second_850"></a>11、日期转秒函数：second</h3> 
<p> <br> <strong>语法</strong>：second(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期中的秒。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">second</span><span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">0</span>
</code></pre> 
<h3><a id="12weekofyear_862"></a>12、日期转周函数：weekofyear</h3> 
<p> <br> <strong>语法</strong>：weekofyear(string date)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回日期在该年的周数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> weekofyear<span class="token punctuation">(</span><span class="token string">'2020-05-21 02:40:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">21</span>
</code></pre> 
<h3><a id="13datediff_874"></a>13、日期比较函数：datediff</h3> 
<p> <br> <strong>语法</strong>：datediff(string enddate, string startdate)<br> <strong>返回类型</strong>：int<br> <strong>说明</strong>：返回结束日期减去开始日期的天数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2020-05-21'</span><span class="token punctuation">,</span> <span class="token string">'2020-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">141</span>
</code></pre> 
<h3><a id="14date_add_886"></a>14、日期增加函数：date_add</h3> 
<p> <br> <strong>语法</strong>：date_add(string startdate, int days)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：返回开始日期 startdate 增加 days 天后的日期。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token string">'2020-05-21'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2020</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">31</span>
</code></pre> 
<h3><a id="15date_sub_898"></a>15、日期减少函数：date_sub</h3> 
<p> <br> <strong>语法</strong>：date_sub(string startdate, int days)<br> <strong>返回类型</strong>：string<br> <strong>说明</strong>：返回开始日期 startdate 减少 days 天后的日期。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_sub<span class="token punctuation">(</span><span class="token string">'2020-05-21'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2020</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>
</code></pre> 
<p> </p> 
<h2><a id="_911"></a>字符串函数</h2> 
<p> </p> 
<h3><a id="1length_913"></a>1、字符串长度函数：length</h3> 
<p><strong>语法</strong>：length(string A)<br> <strong>操作类型</strong>：int<br> <strong>描述</strong>：返回字符串 A 的长度</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token string">'abcedfg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">7</span>
</code></pre> 
<h3><a id="2reverse_924"></a>2、字符串反转函数：reverse</h3> 
<p><strong>语法</strong>：reverse(string A)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回字符串 A 的反转结果</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> reverse<span class="token punctuation">(</span><span class="token string">'abcedfg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">gfdecba
</code></pre> 
<h3><a id="3concat_935"></a>3、字符串连接函数：concat</h3> 
<p><strong>语法</strong>：concat(string A, string B…)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回输入字符串连接后的结果，支持任意多个输入字符串。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>‘abc’<span class="token punctuation">,</span> <span class="token string">'def’, '</span>gh'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abcedfg
</code></pre> 
<h3><a id="4concat_ws_946"></a>4、带分隔符字符串连接函数：concat_ws</h3> 
<p><strong>语法</strong>：concat_ws(string SEP, string A, string B…)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回输入字符串连接后的结果，SEP 表示各个字符串间的分隔符。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'def'</span><span class="token punctuation">,</span> <span class="token string">'gh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abc<span class="token punctuation">,</span>def<span class="token punctuation">,</span>gh
</code></pre> 
<h3><a id="5substr__substring_957"></a>5、字符串截取函数：substr | substring</h3> 
<p><strong>语法</strong>：substr(string A, int start)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回字符串 A 从 start 位置到结尾的字符串。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">cde
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">e
</code></pre> 
<h3><a id="6substr__substring_974"></a>6、字符串截取函数：substr | substring</h3> 
<p><strong>语法</strong>：substr(string A, int start, int len)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回字符串 A 从 start 位置开始，长度为 len 的字符串。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">cd
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">de
</code></pre> 
<h3><a id="7upper__ucase_991"></a>7、字符串转大写函数：upper | ucase</h3> 
<p><strong>语法</strong>：upper(string A)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回字符串 A 的大写格式</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> upper<span class="token punctuation">(</span><span class="token string">'Apple'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">APPLE
</code></pre> 
<h3><a id="8lower__lcase_1002"></a>8、字符串转小写函数：lower | lcase</h3> 
<p><strong>语法</strong>：lower(string A)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回字符串 A 的小写格式</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> upper<span class="token punctuation">(</span><span class="token string">'Apple'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">apple
</code></pre> 
<h3><a id="9trim_1013"></a>9、去空格函数：trim</h3> 
<p><strong>语法</strong>：trim(string A)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：去除字符串两边的空格</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> trim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abc
</code></pre> 
<h3><a id="10ltrim_1024"></a>10、左边去空格函数：ltrim</h3> 
<p><strong>语法</strong>：ltrim(string A)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：去除字符串左边的空格</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> ltrim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abc<span class="token punctuation">[</span>空格<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="11rtrim_1035"></a>11、右边去空格函数：rtrim</h3> 
<p><strong>语法</strong>：rtrim(string A)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：去除字符串右边的空格</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rtrim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>空格<span class="token punctuation">]</span>abc
</code></pre> 
<h3><a id="12regexp_replace_1046"></a>12、正则表达式替换函数：regexp_replace</h3> 
<p><strong>语法</strong>：regexp_replace(string A, string B, string C)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：将字符串 A 中的符合 Java 正则表达式 B 的部分替换为 C</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> regexp_replace<span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">,</span> <span class="token string">'oo|ar'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">fb
</code></pre> 
<h3><a id="13regexp_extract_1057"></a>13、正则表达式解析函数：regexp_extract</h3> 
<p><strong>语法</strong>：regexp_extract(string subject, string pattern, int index)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：将字符串 subject 按照 pattern 正则表达式的规则拆分，返回 index 指定的字符。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">foothebar
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">the
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">bar
</code></pre> 
<h3><a id="14URL_parse_url_1080"></a>14、URL 解析函数：parse_url</h3> 
<p><strong>语法</strong>：parse_url(string urlString, string partToExtract [, string keyToExtract])<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回 URL 中指定的部分。partToExtract 的有效值为：HOST, PATH, QUERY, REF, PROTOCOL, AUTHORITY, FILE, and USERINFO.</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> parse_url<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/path/p.php?k1=v1&amp;k2=v2#ref1'</span><span class="token punctuation">,</span> <span class="token string">'HOST'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> parse_url<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/path/p.php?k1=v1&amp;k2=v2#ref1'</span><span class="token punctuation">,</span> <span class="token string">'QUERY'</span><span class="token punctuation">,</span> <span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">v1
</code></pre> 
<h3><a id="15JSON_get_json_object_1097"></a>15、JSON 解析函数：get_json_object</h3> 
<p><strong>语法</strong>：get_json_object(string json_string, string path)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：解析 json 的字符串 json_string，返回 path 指定的内容。如果输入的 json 字符串无效，那么返回 NULL。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> get_json_object<span class="token punctuation">(</span><span class="token string">'{"name":"zs","age":"25"}'</span><span class="token punctuation">,</span> <span class="token string">'$.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">zs
</code></pre> 
<h3><a id="16space_1108"></a>16、空字符串函数：space</h3> 
<p><strong>语法</strong>：space(int n)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回长度为 n 的字符串</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> space<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>空格<span class="token punctuation">]</span><span class="token punctuation">[</span>空格<span class="token punctuation">]</span><span class="token punctuation">[</span>空格<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="17repeat_1119"></a>17、重复字符串函数：repeat</h3> 
<p><strong>语法</strong>：repeat(string str, int n)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：返回重复 n 次后的 str 字符串</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">repeat</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abcabcabc
</code></pre> 
<h3><a id="18_ASCII_ascii_1130"></a>18、首字符 ASCII 函数：ascii</h3> 
<p><strong>语法</strong>：ascii(string str)<br> <strong>操作类型</strong>：int<br> <strong>描述</strong>：返回字符串 str 第一个字符的 ascii 码</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">97</span>
</code></pre> 
<h3><a id="19lpad_1141"></a>19、左补足函数：lpad</h3> 
<p><strong>语法</strong>：lpad(string str, int len, string pad)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：将 str 用 pad 进行左补足到 len 位</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> lpad<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">#######abc</span>
</code></pre> 
<h3><a id="20rpad_1152"></a>20、右补足函数：rpad</h3> 
<p><strong>语法</strong>：rpad(string str, int len, string pad)<br> <strong>操作类型</strong>：string<br> <strong>描述</strong>：将 str 用 pad 进行右补足到 len 位</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> rpad<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql">abc<span class="token comment">#######</span>
</code></pre> 
<h3><a id="21split_1163"></a>21、分割字符串函数：split</h3> 
<p><strong>语法</strong>：split(string str, string pat)<br> <strong>操作类型</strong>：array<br> <strong>描述</strong>：按照 pat 字符串分割 str，会返回分割后的字符串数组。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> split<span class="token punctuation">(</span><span class="token string">'ab,cd,ef'</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span><span class="token string">"ab"</span><span class="token punctuation">,</span><span class="token string">"cd"</span><span class="token punctuation">,</span><span class="token string">"ef"</span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="22find_in_set_1174"></a>22、集合查找函数：find_in_set</h3> 
<p><strong>语法</strong>：find_in_set(string str, string strList)<br> <strong>操作类型</strong>：int<br> <strong>描述</strong>：返回 str 在 strlist 第一次出现的位置，strlist 是用逗号分割的字符串。如果没有找到该 str 字符，则返回 0。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> find_in_set<span class="token punctuation">(</span><span class="token string">'cd'</span><span class="token punctuation">,</span><span class="token string">'{ab,cd,ef}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">2</span>
</code></pre> 
<p> </p> 
<h2><a id="_1186"></a>聚合函数</h2> 
<p> <br> <strong>创建 test 表</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> test<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> t <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>插入测试数据</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> test <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>查看表中数据</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token operator">+</span><span class="token comment">----------+---------+</span>
<span class="token operator">|</span> test<span class="token punctuation">.</span>id  <span class="token operator">|</span> test<span class="token punctuation">.</span>t  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+---------+</span>
<span class="token operator">|</span> <span class="token number">1</span>        <span class="token operator">|</span> <span class="token number">60</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2</span>        <span class="token operator">|</span> <span class="token number">30</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">3</span>        <span class="token operator">|</span> <span class="token number">80</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">4</span>        <span class="token operator">|</span> <span class="token number">40</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">5</span>        <span class="token operator">|</span> <span class="token number">60</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">6</span>        <span class="token operator">|</span> <span class="token number">50</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7</span>        <span class="token operator">|</span> <span class="token number">80</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">8</span>        <span class="token operator">|</span> <span class="token number">70</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">9</span>        <span class="token operator">|</span> <span class="token number">90</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span>       <span class="token operator">|</span> <span class="token number">100</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+---------+</span>
</code></pre> 
<h3><a id="1count_1217"></a>1、统计函数：count</h3> 
<p><strong>语法</strong>：count(<em>)，count(expr)，count(DISTINCT expr[, expr_.])<br> <strong>返回类型</strong>：int<br> <strong>描述</strong>：count(</em>) 统计检索出的行的个数，包括 NULL 值的行；count(expr) 返回指定字段的非空值的个数；count(DISTINCT expr[, expr_.]) 返回指定字段的不同的非空值的个数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">10</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">8</span>
</code></pre> 
<h3><a id="2sum_1234"></a>2、求和函数：sum</h3> 
<p><strong>语法</strong>：sum(col)，sum(DISTINCT col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：sum(col) 统计结果集中 col 的相加的结果；sum(DISTINCT col) 统计结果中 col 不同值相加的结果。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">660</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">520</span>
</code></pre> 
<h3><a id="3avg_1251"></a>3、平均值函数：avg</h3> 
<p><strong>语法</strong>：avg(col)，avg(DISTINCT col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：avg(col) 统计结果集中 col 的平均值；avg(DISTINCT col) 统计结果中 col 不同值相加的平均值。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">66.0</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">65</span>。<span class="token number">0</span>
</code></pre> 
<h3><a id="4min_1268"></a>4、最小值函数：min</h3> 
<p><strong>语法</strong>：min(col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：统计结果集中 col 字段的最小值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">30</span>
</code></pre> 
<h3><a id="5max_1279"></a>5、最大值函数：max</h3> 
<p><strong>语法</strong>：max(col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：统计结果集中 col 字段的最大值</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">100</span>
</code></pre> 
<h3><a id="6var_pop_1290"></a>6、总体方差函数：var_pop</h3> 
<p><strong>语法</strong>：var_pop(col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：统计结果集中 col 非空集合的总体变量（忽略 null）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span>var_pop<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">444.0</span>
</code></pre> 
<h3><a id="7var_samp_1301"></a>7、样本方差函数：var_samp</h3> 
<p><strong>语法</strong>：var_samp(col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：统计结果集中 col 非空集合的样本变量（忽略 null)</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span>var_samp<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">493.33</span>
</code></pre> 
<h3><a id="8stddev_pop_1312"></a>8、总体标准差函数：stddev_pop</h3> 
<p><strong>语法</strong>：stddev_pop(col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：该函数计算总体标准偏离，并返回总体变量的平方根，其返回值与 VAR_POP 函数的平方根相同。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span>stddev_pop<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">21.07</span>
</code></pre> 
<h3><a id="9stddev_samp_1323"></a>9、样本标准差函数：stddev_samp</h3> 
<p><strong>语法</strong>：stddev_samp(col)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：该函数计算样本标准偏离</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span>stddev_samp<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">22.21</span>
</code></pre> 
<h3><a id="10percentile_1334"></a>10、百分位函数：percentile</h3> 
<p><strong>语法</strong>：percentile(BIGINT col, p)<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：求准确的 p 对应的百分位数，p 必须介于 0 和 1 之间，返回类型为 double，但是 col 字段目前只支持整数，不支持浮点数类型。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> percentile<span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">65.0</span>
</code></pre> 
<h3><a id="11percentile_1345"></a>11、百分位函数：percentile</h3> 
<p><strong>语法</strong>： percentile(BIGINT col, array(p1 [, p2]…))<br> <strong>返回类型</strong>：array<br> <strong>描述</strong>：功能和上述类似，array 中可以输入多个百分位数，返回类型也为 array，其中为对应的百分位数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> percentile<span class="token punctuation">(</span>t<span class="token punctuation">,</span> array<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span><span class="token number">48.0</span><span class="token punctuation">,</span><span class="token number">57.0</span><span class="token punctuation">,</span><span class="token number">65.0</span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="12percentile_approx_1356"></a>12、近似百分位函数：percentile_approx</h3> 
<p><strong>语法</strong>：percentile_approx(BIGINT col, p [, B])<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：求近似的 p 对应的百分位数，p 必须介于 0 和 1 之间，返回类型为 double，col 字段支持浮点类型。参数 B 控制内存消耗的近似精度，B越大，结果的准确度越高。默认为10,000。当 col 字段中的 distinct 值的个数小于 B 时，结果为准确的百分位数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> percentile_approx<span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token number">58.888888888888886</span>
</code></pre> 
<h3><a id="13percentile_approx_1367"></a>13、近似百分位函数：percentile_approx</h3> 
<p><strong>语法</strong>：percentile_approx(BIGINT col, array(p1 [, p2]…) [, B])<br> <strong>返回类型</strong>：double<br> <strong>描述</strong>：功能和上述类似，array 中可以输入多个百分位数，返回类型也为 array，其中为对应的百分位数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> percentile_approx<span class="token punctuation">(</span>t<span class="token punctuation">,</span> array<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span><span class="token number">35.0</span><span class="token punctuation">,</span><span class="token number">50.0</span><span class="token punctuation">,</span><span class="token number">58.888888888888886</span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="14histogram_numeric_1378"></a>14、直方图：histogram_numeric</h3> 
<p><strong>语法</strong>：histogram_numeric(col, b)<br> <strong>返回类型</strong>：array&lt;struct {‘x’,‘y’}&gt;<br> <strong>描述</strong>：以 b 为基准计算 col 的直方图信息，得到的结果可用于作图。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> histogram_numeric<span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">30.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">1.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">40.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">1.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">50.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">1.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">60.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">2.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">70.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">1.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">80.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">2.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">90.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">1.0</span>}<span class="token punctuation">,</span>{<!-- --><span class="token string">"x"</span>:<span class="token number">100.0</span><span class="token punctuation">,</span><span class="token string">"y"</span>:<span class="token number">1.0</span>}<span class="token punctuation">]</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3aa9533c2062c9f528c0aaae7ad5c2e6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32CubeMX学习笔记五 《GPIO 外部中断》</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1d392230c88b0c0bf476ae1d1c0a9dec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">wireshark找不到接口的解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>