<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>超详细JavaWeb应用实例，无框架实现增删改查及分页 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="超详细JavaWeb应用实例，无框架实现增删改查及分页" />
<meta property="og:description" content="项目预览 实现代码 ①/day_0514_06/src/com/qst/util/DBUtil.java
package com.qst.util; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public class DBUtil { Connection conn = null; PreparedStatement pstmt = null; ResultSet rs = null; /** * 得到数据库连接 */ public Connection getConnection() { // 通过Config获取数据库配置信息 String driver = &#34;com.mysql.jdbc.Driver&#34;; String url = &#34;jdbc:mysql://39.105.54.45:3306/zhuxueliang?useUnicod=true&amp;characterEncoding=utf-8&#34;; String user =&#34;root&#34;; String pwd = &#34;123&#34;; try { // 指定驱动程序 Class.forName(driver); // 建立数据库连结 conn = DriverManager.getConnection(url, user, pwd); } catch (Exception e) { // 如果连接过程出现异常，抛出异常信息 //throw new SQLException(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b78febc4d7e44102c04af483cef9ebec/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-15T21:35:52+08:00" />
<meta property="article:modified_time" content="2018-05-15T21:35:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">超详细JavaWeb应用实例，无框架实现增删改查及分页</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>项目预览</h4> 
<img src="https://images2.imgbox.com/7e/df/4L5bUIfg_o.gif" alt=""> 
<h5></h5> 
<h4>实现代码</h4> 
<p>①/day_0514_06/src/com/qst/util/DBUtil.java</p> 
<pre><code class="language-java">package com.qst.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class DBUtil {
	Connection conn = null;
	PreparedStatement pstmt = null;
	ResultSet rs = null;

	/**
	 * 得到数据库连接
	 */
	public Connection getConnection()  {
		// 通过Config获取数据库配置信息
		String driver = "com.mysql.jdbc.Driver";
		String url = "jdbc:mysql://39.105.54.45:3306/zhuxueliang?useUnicod=true&amp;characterEncoding=utf-8";
		String user ="root";
		String pwd = "123";
		try {
			// 指定驱动程序
			Class.forName(driver);
			// 建立数据库连结
			conn = DriverManager.getConnection(url, user, pwd);
		} catch (Exception e) {
			// 如果连接过程出现异常，抛出异常信息
			//throw new SQLException("驱动错误或连接失败！");
			return null;
		}
		return conn;
		
	}

	/**
	 * 释放资源
	 */
	public void closeAll() {
		// 如果rs不空，关闭rs
		if (rs != null) {
			try {
				rs.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
		// 如果pstmt不空，关闭pstmt
		if (pstmt != null) {
			try {
				pstmt.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
		// 如果conn不空，关闭conn
		if (conn != null) {
			try {
				conn.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
	}

	/**
	 * 执行SQL语句，可以进行查询
	 */
	public ResultSet executeQuery(String preparedSql, Object[] param) {
		// 处理SQL,执行SQL
		try {
			// 得到PreparedStatement对象
			pstmt = conn.prepareStatement(preparedSql);
			if (param != null) {
				for (int i = 0; i &lt; param.length; i++) {
					// 为预编译sql设置参数
					pstmt.setObject(i + 1, param[i]);
				}
			}
			// 执行SQL语句
			rs = pstmt.executeQuery();
		} catch (SQLException e) {
			// 处理SQLException异常
			e.printStackTrace();
		}
		return rs;
	}

	/**
	 * 执行SQL语句，可以进行增、删、改的操作，不能执行查询
	 * @throws SQLException 
	 * @throws IllegalAccessException 
	 * @throws InstantiationException 
	 * @throws ClassNotFoundException 
	 */
	public int executeUpdate(String preparedSql, Object[] param) {

		int num = 0;
		// 处理SQL,执行SQL
		try {
			this.getConnection();
			// 得到PreparedStatement对象
			pstmt = conn.prepareStatement(preparedSql);
			if (param != null) {
				for (int i = 0; i &lt; param.length; i++) {
					// 为预编译sql设置参数
					pstmt.setObject(i + 1, param[i]);
				}
			}
			// 执行SQL语句
			num = pstmt.executeUpdate();
		} catch (SQLException e) {
			// 处理SQLException异常
			e.printStackTrace();
		}finally {
			this.closeAll();
		}
		return num;
	}
	public static void main(String[] args) {
		DBUtil dbUtil = new DBUtil();
		System.out.println(dbUtil.getConnection());
	}
}
</code></pre> 
<br> 
<p>②/day_0514_06/src/com/qst/pojos/User.java</p> 
<pre><code class="language-java">package com.qst.pojos;

public class User {
	// id,userName,userPwd,sex,age
	private int id;
	private String userName;
	private String userPwd;
	private String userRePwd;
	private String sex;
	private int age;

	public User() {
		super();
	}

	public User(String userName, String userPwd, String userRePwd, String sex, int age) {
		super();
		this.userName = userName;
		this.userPwd = userPwd;
		this.userRePwd = userRePwd;
		this.sex = sex;
		this.age = age;
	}

	public User(int id, String userName, String userPwd, String userRePwd, String sex, int age) {
		super();
		this.id = id;
		this.userName = userName;
		this.userPwd = userPwd;
		this.userRePwd = userRePwd;
		this.sex = sex;
		this.age = age;
	}

	public User(int id, String userName, String userPwd, String sex, int age) {
		super();
		this.id = id;
		this.userName = userName;
		this.userPwd = userPwd;
		this.sex = sex;
		this.age = age;
	}

	public int getId() {
		return id;
	}

	public void setId(int id) {
		this.id = id;
	}

	public String getUserName() {
		return userName;
	}

	public void setUserName(String userName) {
		this.userName = userName;
	}

	public String getUserPwd() {
		return userPwd;
	}

	public void setUserPwd(String userPwd) {
		this.userPwd = userPwd;
	}

	public String getSex() {
		return sex;
	}

	public void setSex(String sex) {
		this.sex = sex;
	}

	public int getAge() {
		return age;
	}

	public void setAge(int age) {
		this.age = age;
	}

	public String getUserRePwd() {
		return userRePwd;
	}

	public void setUserRePwd(String userRePwd) {
		this.userRePwd = userRePwd;
	}

	/**
	 * 重写toString方法
	 */
	public String toString() {
		StringBuilder sb = new StringBuilder();
		sb.append("用户Id：" + id + "； ");
		sb.append("用户名：" + userName + "； ");
		sb.append("密码：" + userPwd + "； ");
		sb.append("性别：" + (sex.equals("1")?'男':'女') + "； ");
		sb.append("年龄：" + age + "； ");
		sb.append("&lt;a href=\"${pageContext.request.contextPath}/UserAction?method=userList\"&gt;隐藏&lt;/a&gt;");
		return sb.toString();
	}

}
</code></pre> 
<br> 
<p>③/day_0514_06/src/com/qst/pojos/Page.java</p> 
<pre><code class="language-java">package com.qst.pojos;

import java.util.List;

public class Page&lt;T&gt; {
	private Integer pageNow;//当前页数
//	private Integer pageCount;总页数
	private Integer rowCount;//总行数
	private Integer pageSize;//每一页行数
	private List&lt;T&gt; pageRow;//当前页表格数据
	
	public Page() {
		super();
		// TODO Auto-generated constructor stub
	}
	
	public Page(Integer pageNow,Integer rowCount, Integer pageSize, List&lt;T&gt; pageRow) {
		super();
		this.pageNow = pageNow;
		this.rowCount = rowCount;
		this.pageSize = pageSize;
		this.pageRow = pageRow;
	}

	public Integer getPageNow() {
		return pageNow;
	}
	public void setPageNow(Integer pageNow) {
		this.pageNow = pageNow;
	}
	public Integer getPageCount() {
		Integer pageCount = rowCount%pageSize==0?rowCount/pageSize:(rowCount/pageSize+1);
		return pageCount;
	}
	/*public void setPageCount(Integer pageCount) {
		this.pageCount = pageCount;
	}*/
	public Integer getRowCount() {
		return rowCount;
	}
	public void setRowCount(Integer rowCount) {
		this.rowCount = rowCount;
	}
	public Integer getPageSize() {
		return pageSize;
	}
	public void setPageSize(Integer pageSize) {
		this.pageSize = pageSize;
	}
	public List&lt;T&gt; getpageRow() {
		return pageRow;
	}
	public void setpageRow(List&lt;T&gt; pageRow) {
		this.pageRow = pageRow;
	}
	
}
</code></pre> 
<br> 
<p>④/day_0514_06/src/com/qst/dao/UserDao.java</p> 
<pre><code class="language-java">package com.qst.dao;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import com.qst.pojos.Page;
import com.qst.pojos.User;
import com.qst.util.DBUtil;

public class UserDao {
	DBUtil dbUtil = null;

	public UserDao() {
		super();
		dbUtil = new DBUtil();
	}
	/**
	 * 添加方法
	 * @param user
	 * @return
	 */
	public int save(User user) {
		// id,userName,userPwd,sex,age
		String sql = "insert into t_User(userName,userPwd,sex,age) values(?,?,?,?)";
		Object[] param = { user.getUserName(), user.getUserPwd(), user.getSex(), user.getAge() };
		dbUtil.getConnection();
		int result = dbUtil.executeUpdate(sql, param);
		dbUtil.closeAll();
		return result;
	}

	/**
	 * 查询方法
	 * 
	 * @param userName
	 * @return User对象
	 */
	public User readUser(String userName) {
		User user = null;
		String sql = "select * from t_user where userName=?";
		Object[] param = { userName };
		dbUtil.getConnection();
		ResultSet rs = dbUtil.executeQuery(sql, param);
		try {
			if (rs.next()) {
				user = new User(rs.getInt("id"), rs.getString("userName"), rs.getString("userPwd"), rs.getString("sex"),
						rs.getInt("age"));
			}
		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			dbUtil.closeAll();
		}
		return user;
	}

	/**
	 * 修改方法
	 * 
	 * @param user
	 * @return result
	 */
	public int updateUser(User user) {
		// id,userName,userPwd,sex,age
		String sql = "update t_user set userPwd=?,sex=?,age=? where userName=?";
		Object[] param = { user.getUserPwd(), user.getSex(), user.getAge(), user.getUserName() };
		dbUtil.getConnection();
		int result = dbUtil.executeUpdate(sql, param);
		dbUtil.closeAll();
		return result;
	}

	/**
	 * 删除方法
	 * 
	 * @param id
	 *            userId
	 * @return result
	 */
	public int deleteUser(Integer id) {
		String sql = "delete from t_user where id=?";
		Object[] param = { id };
		dbUtil.getConnection();
		int result = dbUtil.executeUpdate(sql, param);
		dbUtil.closeAll();
		return result;
	}
	
	/**
	 * 分页方法
	 * @param pageSize 每一页的行数
	 * @param pageNow 当前页
	 * @return page
	 */
	public Page&lt;User&gt; queryPage(int pageSize, int pageNow) {
		Page&lt;User&gt; page = new Page&lt;User&gt;();
		page.setPageSize(pageSize);
		page.setPageNow(pageNow);
		String sql = "select count(*) from t_user";
		dbUtil.getConnection();
		ResultSet rs = dbUtil.executeQuery(sql, null);
		try {
			rs.next();
			Integer rowCount = rs.getInt(1);
			page.setRowCount(rowCount);
			List&lt;User&gt; pageRow = new ArrayList&lt;User&gt;();
			String preparedSql = "select * from t_user limit ?,?";
			Object[] param = { page.getPageSize() *( page.getPageNow() - 1), page.getPageSize() };
			ResultSet res = dbUtil.executeQuery(preparedSql, param);
			while (res.next()) {
				User user = new User(res.getInt("id"), res.getString("userName"), res.getString("userPwd"),
						res.getString("sex"), res.getInt("age"));
				pageRow.add(user);
			}
			page.setpageRow(pageRow);
		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			dbUtil.closeAll();
		}
		return page;
	}
}
</code></pre> 
<br> 
<p>⑤/day_0514_06/src/com/qst/service/UserService.java</p> 
<pre><code class="language-java">package com.qst.service;


import com.qst.dao.UserDao;
import com.qst.pojos.Page;
import com.qst.pojos.User;

public class UserService {
	UserDao userDao = null;

	public UserService() {
		super();
		this.userDao = new UserDao();
	}

	// 业务逻辑
	public boolean addUser(User user) {
		// 判断用户的年龄是否大于16周岁
		// 判断一下用户的密码是否包含特殊字符（汉子）
		// 判断用户的密码和确认密码相同
		// return userDao.save(user)&gt;0;
		int result = userDao.save(user);
		if (result &gt; 0) {
			return true;
		}
		return false;
	}

	public User readUser(String userName) {
		return userDao.readUser(userName);
	}
	
	public boolean updateUser(User user) {
		int result = userDao.updateUser(user);
		if (result &gt; 0) {
			return true;
		}
		return false;
	}

	public boolean deleteUser(Integer id) {
		int result = userDao.deleteUser(id);
		if (result &gt; 0) {
			return true;
		}
		return false;
	}
	
	public Page&lt;User&gt; queryPage(Integer pageSize, Integer pageNow) {
		return userDao.queryPage(pageSize, pageNow);
	}
	
}
</code></pre> 
<br> 
<p>⑥/day_0514_06/src/com/qst/action/UserAction.java</p> 
<pre><code class="language-java">package com.qst.action;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.qst.pojos.Page;
import com.qst.pojos.User;
import com.qst.service.UserService;

/**
 * @author ZhuXueLiang
 */
public class UserAction extends HttpServlet {
	private static final long serialVersionUID = 1L;

	public UserAction() {
		super();
	}

	protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		doPost(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		String method = request.getParameter("method");
		if ("addUser".equals(method)) {
			addUser(request, response);
		} else if ("userList".equals(method)) {
			showUserList(request, response);
		} else if ("readUser".equals(method)) {
			readUser(request, response);
		} else {
			deleteUser(request, response, method);
		}
	}
	
	/**
	 * 分页显示模块
	 */
	private void showUserList(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		UserService userService = new UserService();
		// List&lt;User&gt; userList = userService.getAllUserInfo();
		String pageNow = request.getParameter("pageNow");
		if (pageNow == null||pageNow.isEmpty()) {//如果当前页为空或者首次使用则pageNow=1
			Page&lt;User&gt; userList = userService.queryPage(5, 1);
			request.setAttribute("userList", userList);
		}else {
			Page&lt;User&gt; userList = userService.queryPage(5, Integer.parseInt(pageNow));
			request.setAttribute("userList", userList);
		}
		request.getRequestDispatcher("/userList.jsp").forward(request, response);
	}

	/**
	 * 添加和修改用户模块
	 */
	private void addUser(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		String userName = request.getParameter("userName");
		String userPwd = request.getParameter("userPwd");
		String userRePwd = request.getParameter("userRePwd");
		String ageStr = request.getParameter("age");
		String sex = request.getParameter("sex");
		if(userName==null||userPwd==null||!userPwd.equals(userRePwd)||ageStr==null||sex==null) {
			request.getSession().setAttribute("message", "更新失败，请重新填写！");
			response.sendRedirect(request.getContextPath()+"/addUser.jsp");
		}else {
			User user = new User(userName, userPwd, userRePwd, sex, Integer.parseInt(ageStr));
			UserService userService = new UserService();
			User users = userService.readUser(userName);
			if (users != null) {//判断用户（users）是否存在，若存在使用修改方法，若不存在则添加。
				userService.updateUser(user);
			} else {
				userService.addUser(user);
			}
			showUserList(request, response);
		}
	}

	/**
	 * 查询用户模块，哦，与上一模块有冗余
	 */
	private void readUser(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		UserService userService = new UserService();
		String userName = request.getParameter("usersName");
		User users = userService.readUser(userName);
		if (users != null)
		request.setAttribute("users", users.toString());
		showUserList(request, response);
	}

	/**
	 * 删除用户模块
	 */
	private void deleteUser(HttpServletRequest request, HttpServletResponse response, String method)
			throws ServletException, IOException {
		UserService userService = new UserService();
		Integer id = Integer.parseInt(method);
		userService.deleteUser(id);
		showUserList(request, response);
	}

}
</code></pre> 
<br> 
<p>⑦/day_0514_06/WebContent/WEB-INF/web.xml</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://xmlns.jcp.org/xml/ns/javaee"
	xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
	id="WebApp_ID" version="3.1"&gt;
	&lt;display-name&gt;day_0514_06&lt;/display-name&gt;
	&lt;welcome-file-list&gt;
		&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
		&lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;
		&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
		&lt;welcome-file&gt;default.html&lt;/welcome-file&gt;
		&lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;
		&lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;
	&lt;/welcome-file-list&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;UserAction&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.qst.action.UserAction&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;UserAction&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/UserAction&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre> 
<br> 
<p>⑧/day_0514_06/WebContent/addUser.jsp</p> 
<pre><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;更新页面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;font color="red"&gt;${message}&lt;/font&gt;
	&lt;form action="/day_0514_06/UserAction" method="post"&gt;
		&lt;table&gt;
			&lt;tr&gt;
				&lt;th colspan="2"&gt;更新用户界面&lt;/th&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;用户名&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="userName" placeholder="请输入用户名" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;密码&lt;/td&gt;
				&lt;td&gt;&lt;input type="password" name="userPwd" placeholder="请输入密码" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;确认密码&lt;/td&gt;
				&lt;td&gt;&lt;input type="password" name="userRePwd" placeholder="请输入密码" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;年龄&lt;/td&gt;
				&lt;td&gt;&lt;input type="number" name="age" min="16" max="100" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;性别&lt;/td&gt;
				&lt;td&gt;&lt;input type="radio" name="sex" value="1" /&gt;男 &lt;input
					type="radio" name="sex" value="" /&gt;女&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td colspan="2"&gt;&lt;input type="hidden" value="addUser"
					name="method" /&gt; &lt;input type="submit" value="更新数据" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<br> 
<p>⑨/day_0514_06/WebContent/userList.jsp</p> 
<pre><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
	import="com.qst.pojos.Page" pageEncoding="UTF-8"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;显示页面&lt;/title&gt;
&lt;style type="text/css"&gt;

body {
	text-align: center;
}

.numberPage {
	border: 1px solid #000;
	padding: 1px 7px;
	text-decoration: none;
}

table {
	width: 75%;
	border-collapse: collapse;
}

/* 参考：https://blog.csdn.net/LJXZDN/article/details/79575587 */
table tr:nth-child(odd) {
	background: #ccc;
}
&lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;
	&lt;!-- 查询模块 --&gt;
	&lt;form action="${pageContext.request.contextPath}/UserAction" method="post"&gt;
		用户名：&lt;input type="text" name="usersName" /&gt;
		&lt;input type="hidden" value="readUser" name="method"&gt;
		&lt;input type="submit" value="查询"&gt;
	&lt;/form&gt;
	${users}
	&lt;br /&gt;
	&lt;!-- 表格模块 --&gt;
	&lt;table border="1" align="center"&gt;
		&lt;tr&gt;
			&lt;th&gt;ID&lt;/th&gt;
			&lt;th&gt;用户名&lt;/th&gt;
			&lt;th&gt;密码&lt;/th&gt;
			&lt;th&gt;性别&lt;/th&gt;
			&lt;th&gt;年龄&lt;/th&gt;
			&lt;th&gt;更新&lt;/th&gt;
			&lt;th&gt;删除&lt;/th&gt;
		&lt;/tr&gt;
		&lt;c:forEach items="${userList.pageRow}" var="user"&gt;
			&lt;tr&gt;
				&lt;td&gt;${user.id }&lt;/td&gt;
				&lt;td&gt;${user.userName }&lt;/td&gt;
				&lt;td&gt;${user.userPwd }&lt;/td&gt;
				&lt;td&gt;${user.sex==0?'女':'男' }&lt;/td&gt;
				&lt;td&gt;${user.age }&lt;/td&gt;
				&lt;td&gt;&lt;a href="addUser.jsp"&gt;更新&lt;/a&gt;&lt;/td&gt;
				&lt;td&gt;&lt;a href="${pageContext.request.contextPath}/UserAction?method=${user.id }"&gt;删除&lt;/a&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/c:forEach&gt;
	&lt;/table&gt;
	&lt;br /&gt;
	&lt;!-- 分页模块=&gt;注意：判断是否头（begin）溢出和尾（end）溢出 --&gt;
	&lt;c:out value="第${userList.pageNow}页/共${userList.pageCount}页"&gt;&lt;/c:out&gt;
	&lt;c:if test="${userList.pageNow &gt; 1}"&gt;
		&lt;a href="&lt;c:url value="UserAction?method=userList&amp;pageNow=${1}" /&gt;" class="numberPage"&gt;首页&lt;/a&gt;
		&lt;a href="&lt;c:url value="UserAction?method=userList&amp;pageNow=${userList.pageNow-1}" /&gt;" class="numberPage"&gt;上一页&lt;/a&gt;
	&lt;/c:if&gt;
	&lt;!-- 
		总页数小于要显示的页数（5页）
			begin（起始页码） = 1；
			end（末尾页码） = ${userList.pageCount}；
		总页数大于要显示的页数（5页）
			begin = ${userList.pageNow - 2 }；
			end = ${userList.pageNow - 2 }；
	 --&gt;
	&lt;c:choose&gt;
		&lt;c:when test="${userList.pageCount &lt; userList.pageSize }"&gt;
			&lt;c:set var="begin" value="1" /&gt;
			&lt;c:set var="end" value="${userList.pageCount}" /&gt;
		&lt;/c:when&gt;
		&lt;c:otherwise&gt;
			&lt;c:set var="begin" value="${userList.pageNow - 2 }" /&gt;
			&lt;c:set var="end" value="${userList.pageNow + 2 }" /&gt;
			&lt;c:if test="${begin &lt; 1 }"&gt;
				&lt;c:set var="begin" value="${1}" /&gt;
				&lt;c:set var="end" value="${5}" /&gt;
			&lt;/c:if&gt;
			&lt;c:if test="${end &gt; userList.pageCount }"&gt;
				&lt;c:set var="begin" value="${userList.pageCount-4}" /&gt;
				&lt;c:set var="end" value="${userList.pageCount}" /&gt;
			&lt;/c:if&gt;
		&lt;/c:otherwise&gt;
	&lt;/c:choose&gt;
	&lt;%-- 循环打印页码（i），如果${i eq userList.pageNow }则取消超链接 --%&gt;
	&lt;c:forEach var="i" begin="${begin }" end="${end }"&gt;
		&lt;c:choose&gt;
			&lt;c:when test="${i eq userList.pageNow }"&gt;
				${i}
			&lt;/c:when&gt;
			&lt;c:otherwise&gt;
				&lt;a href="&lt;c:url value="UserAction?method=userList&amp;pageNow=${i}" /&gt;" class="numberPage"&gt;${i}&lt;/a&gt;
			&lt;/c:otherwise&gt;
		&lt;/c:choose&gt;
	&lt;/c:forEach&gt;
	&lt;c:if test="${userList.pageNow &lt; userList.pageCount}"&gt;
		&lt;a href="&lt;c:url value="UserAction?method=userList&amp;pageNow=${userList.pageNow+1}" /&gt;" class="numberPage"&gt;下一页&lt;/a&gt;
		&lt;a href="&lt;c:url value="UserAction?method=userList&amp;pageNow=${userList.pageCount}" /&gt;" class="numberPage"&gt;尾页&lt;/a&gt;
	&lt;/c:if&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<br> 
<p>⑩t_test.sql<br></p> 
<pre><code class="language-sql">1.创建一张表User(id,userName,userPwd,sex,age) id自增

CREATE TABLE `zhuxueliang`.`t_user`(  
  `id` INT NOT NULL AUTO_INCREMENT,
  `userName` VARCHAR(50),
  `userPwd` VARCHAR(50),
  `sex` VARCHAR(2),
  `age` INT,
  PRIMARY KEY (`id`)
);
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('25','wq6','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('26','wq7','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('27','wq8','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('28','wq9','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('29','wq10','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('30','wq11','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('31','wq12','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('32','wq13','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('33','wq14','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('34','wq15','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('35','wq16','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('36','wq17','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('37','wq18','ewqe','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('38','dsed','1234','','43');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('39','ewq','345','1','34');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('40','ew2q3','123','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('41','ew3','123','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('42','ew3e','321','1','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('43','fdsw','1234','','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('44','dwdw','123','1','43');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('45','swqw','dse','','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('46','qwe','qee','1','23');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('47','qw1','123','','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('48','qw3','123','','32');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('49','sswq','123','1','34');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('50','ww','234','1','22');
insert into `t_user` (`id`, `userName`, `userPwd`, `sex`, `age`) values('51','32','2332','1','43');</code></pre> 
<h4>运行结果</h4> 
<p><img src="https://images2.imgbox.com/11/a3/pgeSgcE3_o.gif" alt=""><br></p> 
<p><img src="https://images2.imgbox.com/a7/70/F0ebVayz_o.gif" alt=""><br></p> 
<p><img src="https://images2.imgbox.com/db/56/1CKlvlWk_o.gif" alt=""><br></p> 
<p><img src="https://images2.imgbox.com/d0/fb/315FcaEo_o.gif" alt=""><br></p> 
<p><img src="https://images2.imgbox.com/be/dc/krM6DT77_o.gif" alt=""><br></p> 
<p><img src="https://images2.imgbox.com/58/70/4TWLTQNa_o.gif" alt=""><br></p> 
<p><img src="https://images2.imgbox.com/e6/cf/1HJbk0FR_o.gif" alt=""><br></p> 
<p><br></p> 
<h4>说明</h4> 
<p>还是改进，运行上一篇博客里面的项目加载userList.jsp页面时特别卡，我还以为数据库服务器的原因呢，后来发现userList.jsp页面好多BUG，改完后一点也不卡了，我长舒一口气接着又长叹一口气，该好好复习一下Web基础了·····BUG实在太多，也让自己长记性，又重写这篇博客。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4585693c7dad61357b883a6e818f8bf6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">本地数据加载 Ajax</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a17681fc7fbc8084a0ee72b0c96079fa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言--函数指针的用法总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>