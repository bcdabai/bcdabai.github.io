<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>H264（9）---------h264面试题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="H264（9）---------h264面试题" />
<meta property="og:description" content="为什么要有YUV这种数据出来？（YUV相比RGB来说的优点）
1、yuv除了yuv444外，其他格式比如yuv422 yuv420 yuv411都要比rgb格式占的空间下。
Yuv444 和rgb占的空间一样大。
Yuv422 = y &#43; u&#43; v = y &#43; y/2 &#43; y/2 = 2y,比rgb小1/3
Yuv420 = y &#43; u &#43; v = y &#43; y/2/2 &#43; y /2/2 = 1.5y ,比rgb 小1/2
Yuv411 = y &#43; u &#43; v = y &#43; 1/4y &#43; 1/4y = 1.5y ,比rgb 小1/2
2、YUV（也称YCbCr）:Y标识明亮度，UV的作用是描述影像色彩及饱和度
Y是灰白
U绿色分量
V 红色分量
老的黑白电视机的数据只有一个Y分量，等到彩色电视剧出现的时候加入U和V分量。
H264/H265有什么区别？
宏块个数爆发式增加，宏块内容复杂度降低，运动失量大幅度增加。所以就诞生了H265.
H264宏块是16x16的，H265宏块会根据宏块的变化幅度来进行宏块划分。而H265的编码单位可以选择从最小的8x8到最大的64x64。
H265压缩率相对于H264压缩率理论上要少百分之50；
平常电视的帧率一般多少？30帧？高清一般需要60帧？
平常电视、动画是25帧/s,游戏是30帧/s。高清是清晰度，超过720p就是高清了。帧率和平滑度有关。
SPS有什么作用？
1、通过profile 我们知道视频的压缩级别，支持的特性" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bfae648dbc1f52458e3c709fa169fb87/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-13T14:27:55+08:00" />
<meta property="article:modified_time" content="2021-04-13T14:27:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">H264（9）---------h264面试题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:#f33b45;">为什么要有<strong>YUV</strong>这种数据出来？（<strong>YUV</strong>相比<strong>RGB</strong>来说的优点）</span></p> 
<p><strong>1</strong>、<strong>yuv</strong>除了<strong>yuv444</strong>外，其他格式比如<strong>yuv422 yuv420 yuv411</strong>都要比<strong>rgb</strong>格式占的空间下。</p> 
<p><strong>Yuv444 </strong>和<strong>rgb</strong>占的空间一样大。</p> 
<p><strong>Yuv422  = y + u+ v = y + y/2 + y/2 = 2y,</strong>比<strong>rgb</strong>小<strong>1/3</strong></p> 
<p><strong>Yuv420  = y + u + v = y + y/2/2 + y /2/2 = 1.5y ,</strong>比<strong>rgb </strong>小<strong>1/2</strong></p> 
<p><strong>Yuv411 = y + u + v = y +  1/4y + 1/4y = 1.5y ,</strong>比<strong>rgb </strong>小<strong>1/2</strong></p> 
<p><strong>2</strong>、YUV（也称YCbCr）:Y标识明亮度，UV的作用是描述影像色彩及饱和度</p> 
<p><strong>Y</strong>是灰白</p> 
<p><strong>U</strong>绿色分量</p> 
<p><strong>V </strong>红色分量</p> 
<p>老的黑白电视机的数据只有一个<strong>Y</strong>分量，等到彩色电视剧出现的时候加入<strong>U</strong>和<strong>V</strong>分量。</p> 
<p> </p> 
<p><span style="color:#f33b45;"><strong>H264/H265</strong>有什么区别？</span></p> 
<p>宏块个数爆发式增加，宏块内容复杂度降低，运动失量大幅度增加。所以就诞生了H265.</p> 
<p><strong>H264</strong>宏块是<strong>16x16</strong>的，<strong>H265</strong>宏块会根据宏块的变化幅度来进行宏块划分。而H265的编码单位可以选择从最小的8x8到最大的64x64。</p> 
<p>H265压缩率相对于H264压缩率理论上要少百分之50；</p> 
<p> </p> 
<p> </p> 
<p><span style="color:#f33b45;">平常电视的帧率一般多少？<strong>30</strong>帧？高清一般需要<strong>60</strong>帧？</span></p> 
<p>平常电视、动画是25帧/s,游戏是30帧/s。高清是清晰度，超过720p就是高清了。帧率和平滑度有关。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p><span style="color:#f33b45;">SPS有什么作用？</span></p> 
<p>1、通过profile 我们知道视频的压缩级别，支持的特性</p> 
<p>2、通过level 我们知道视频可以支持的分辨率和比特率</p> 
<p>3、我们可以通过pic_width_in_mbs_minus1 ，pic_heigh_in_mbs_minus1计算出视频的宽带和高度</p> 
<p>4、frame _mbs_only_flag 明白是场编码那个是帧编码</p> 
<p>5、log2_max_frame_num_minus4 获取得到GOP最大的帧数</p> 
<p>6、max_num_ref_frames 获取参考帧的帧数</p> 
<p>7、pic_order_cnt_type 计算帧的序号</p> 
<p>8、可以计算得出帧率</p> 
<p> </p> 
<p><span style="color:#f33b45;">PPS有什么作用？</span></p> 
<p>指定熵编码，图片的分片（通常每张图像是一片），是否开启权重预测</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p><span style="color:#f33b45;">Slice Header 有什么作用？</span></p> 
<p>定义了解码顺序，当前slice中包含的第一个宏块在整帧中的位置；分片的量化器的值。</p> 
<p>pic_parameter_set_id：当前slice所依赖的pps的id；</p> 
<p>colour_plane_id:当标识位separate_colour_plane_flag为true时，colour_plane_id表示当前的颜色分量，0、1、2分别表示Y、U、V分量。</p> 
<p>field_pic_flag:场编码标识位。当该标识位为1时表示当前slice按照场进行编码；该标识位为0时表示当前slice按照帧进行编码。</p> 
<p>bottom_field_flag:底场标识位。该标志位为1表示当前slice是某一帧的底场；为0表示当前slice为某一帧的顶场。</p> 
<p>idr_pic_id:表示IDR帧的序号。某一个IDR帧所属的所有slice，其idr_pic_id应保持一致。该值的取值范围为[0,65535]。</p> 
<p>pic_order_cnt_lsb:表示当前帧序号的另一种计量方式。</p> 
<p>delta_pic_order_cnt_bottom:表示顶场与底场POC差值的计算方法，不存在则默认为0；</p> 
<p> </p> 
<p><span style="color:#f33b45;">H264的编解码框架？</span></p> 
<p><img alt="" height="377" src="https://images2.imgbox.com/7a/57/5szAGaMN_o.png" width="881"></p> 
<p> 编码：</p> 
<p>档案帧Fn如果是I帧，那么就会选择帧内预测(Intra prediction),然后再生成和原始数据的残差值。经过变换，量化，重排序，熵编码形成所需要的数据。</p> 
<p>当前帧如果是P B 帧，和参考帧进行对比，经过Me（宏匹配）运动估计，然后再加上MC运动补偿然后再加上残差值，在进行变化，量化，重排序和熵编码形成所需要的数据。</p> 
<p> </p> 
<p>解码</p> 
<p>先经过熵编码的解压缩，再进行排序，逆量化，逆变换后，将残差值和预测值叠加形成没有滤波的帧，再经过滤波器重构出输出图像。</p> 
<p> </p> 
<p> </p> 
<p><span style="color:#f33b45;">H264的码流结构？</span></p> 
<p><img alt="" height="337" src="https://images2.imgbox.com/63/2e/JRXZYFPb_o.png" width="642"></p> 
<p> </p> 
<p> </p> 
<p>H264当中是一个一个NALU单元。</p> 
<p>NALU包含一个NALU Header和一个NALU Body</p> 
<p>NALU Header是一个字节，第一位是禁止位，第二三位是重要性标志位，数值越大越重要，第三到七位是NALU类型。</p> 
<p>NALU Body中是RBSP数据，RBSB 是按字节算的，SODB是原始bit数据，按位存储。为了便于后续处理，所以就在SODB后加上一个1，多个0。让数据按字节对齐形成了RBSP。</p> 
<p>SODB分为Slice Header Slice Data。</p> 
<p>SliceData当中存的是一个一个宏块。每个宏块又包含宏块类型，宏块预测，残差值。</p> 
<p> </p> 
<p><span style="color:#f33b45;">什么是<strong>PPI </strong>什么<strong>DPI?</strong></span></p> 
<p><strong>PPI </strong>每英存上拥有的像素数</p> 
<p><strong>DPI </strong>每英存上用用的点数。</p> 
<p>超过<strong>300PPi  </strong>就是视网膜屏幕了。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8ec4f3ab55c6742c3d35a66351680682/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue学习_使用vuecli创建项目（git bsah的使用）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2c3bcc0892e7f173a8f2886d979ca8ba/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hive中的replace</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>