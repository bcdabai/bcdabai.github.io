<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python（Web时代）—— Django的模板 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python（Web时代）—— Django的模板" />
<meta property="og:description" content="介绍 作为一个网络框架，Django 需要一种方便的方式来动态生成 HTML。最常见的方法是依靠模板。一个模板包含了所需 HTML 输出的静态部分，以及一些特殊的语法，描述了如何插入动态内容。目前流行的 Web 框架基本都采用 MVC 的架构，而 Django 在这个架构基础上做了一点改变，即 MTV 框架，这里的 T 就是今天我们要讲的 Django 的模板系统（ Template ）。
一个 Django 项目可以配置一个或多个模板引擎（如果你不使用模板，甚至可以不配置模板）。Django 默认内置了一个模板系统 DTL（ Django template language ）,在一般的项目开发中足够应用了
Django 模板是使用 Django 模板语言标记的一个文本文档或Python字符串。模板引擎可以识别和解释一些构造。主要是变量和标签。
模板主要包含两块内容： HTML的静态内容
动态插入的内容（Django 模板语言，简写 DTL，定义在 django.template 包中）
由 startproject 命令生成的 settings.py 定义关于模板的值：
DIRS 定义了一个目录列表，模板引擎按列表顺序搜索这些目录以查找模板源文件。
APP_DIRS 告诉模板引擎是否应该在每个已安装的应用中查找模板。
模板的使用 Django 模板系统其实是 Python 的一个库，使用模板通过以下两种方法 第一步：通过Template对象，传入一个字符串或者模板的文本文件
第二步：调用Template对象的 render() 方法，然后传入相应的动态变量
以下我们继续以之前的TestDjango项目下的 score应用为例，进入到score应用的 views.py文件中，修改如下
方式一：采用字符串模板
# score/views.py # 导入模板相关库 from django.template import Template, Context def index(request): # 定义模板 t = Template(&#39;你好&lt;h1 style=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/719ae5b2ebea9a2e9192cf8dda9c9cab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-11T10:14:30+08:00" />
<meta property="article:modified_time" content="2023-09-11T10:14:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python（Web时代）—— Django的模板</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><strong>介绍</strong></h3> 
<p>作为一个网络框架，Django 需要一种方便的方式来动态生成 HTML。最常见的方法是依靠模板。一个模板包含了所需 HTML 输出的静态部分，以及一些特殊的语法，描述了如何插入动态内容。目前流行的 Web 框架基本都采用 MVC 的架构，而 Django 在这个架构基础上做了一点改变，<strong>即 MTV 框架</strong>，这里的<strong> T</strong> 就是今天我们要讲的 Django 的模板系统（<strong> Template</strong> ）。</p> 
<p></p> 
<p>一个 Django 项目可以配置一个或多个模板引擎（如果你不使用模板，甚至可以不配置模板）。Django 默认内置了一个模板系统 DTL（ Django template language ）,在一般的项目开发中足够应用了</p> 
<p>Django 模板是使用 Django 模板语言标记的一个文本文档或Python字符串。模板引擎可以识别和解释一些构造。主要是变量和标签。</p> 
<p></p> 
<p></p> 
<h4><strong>模板主要包含两块内容：</strong></h4> 
<ul><li> <p>HTML的静态内容</p> </li><li> <p>动态插入的内容（Django 模板语言，简写 DTL，定义在 django.template 包中）</p> </li></ul> 
<p><strong>由 startproject 命令生成的 settings.py 定义关于模板的值：</strong></p> 
<ul><li> <p>DIRS 定义了一个目录列表，模板引擎按列表顺序搜索这些目录以查找模板源文件。</p> </li><li> <p>APP_DIRS 告诉模板引擎是否应该在每个已安装的应用中查找模板。</p> </li></ul> 
<p></p> 
<p></p> 
<h3><strong>模板的使用</strong></h3> 
<h4><strong>Django 模板系统其实是 Python 的一个库，使用模板通过以下两种方法</strong></h4> 
<ul><li> <p>第一步：通过<strong>Template对象</strong>，传入一个字符串或者模板的文本文件</p> </li><li> <p>第二步：调用<strong>Template对象的 render()</strong> 方法，然后传入相应的动态变量</p> </li></ul> 
<p>以下我们继续以之前的TestDjango项目下的 score应用为例，进入到score应用的 <strong>views.py</strong>文件中，修改如下</p> 
<p></p> 
<p><strong>方式一：采用字符串模板</strong></p> 
<pre><code class="language-python"># score/views.py

# 导入模板相关库
from django.template import Template, Context


def index(request):
    # 定义模板
    t = Template('你好&lt;h1 style="color:red"&gt; {<!-- -->{ name }}&lt;/h1&gt;, 这是一个评分系统')
    # 定义传入对象
    c = Context({'name': '张三'})
    # 返回渲染模板</code></pre> 
<p>修改完成后，通过命令 <strong>python manage.py runserver 127.0.0.1:8080</strong> 启动服务，然后访问该URL：<strong>http://127.0.0.1:8080/score/  </strong>，就能看到如下结果</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="303" src="https://images2.imgbox.com/f2/3f/hF5Qe8t4_o.png" width="619"></p> 
<p></p> 
<p><strong>方式二：使用模板文件(</strong>在应用的目录下创建 templates 目录，程序会自动在该目录下寻找模板。<strong>)</strong></p> 
<p><span style="color:#fe2c24;"><strong>注：添加完方法后，记得在urls.py中加上路径</strong></span></p> 
<p><strong>a.html 模板文件</strong></p> 
<pre><code class="language-python">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
你好&lt;h1 style="color:red"&gt; {<!-- -->{ name }}&lt;/h1&gt;, 这是一个评分系统
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>​​​​​​</p> 
<p><strong>目录结构</strong></p> 
<p></p> 
<p class="img-center"><img alt="图片" height="281" src="https://images2.imgbox.com/63/f1/j3N7nBAV_o.png" width="701"></p> 
<p></p> 
<p><strong><strong><strong>方式三：使用模板文件（</strong></strong></strong>在项目的根目录下创建 templates 目录，配置 DIRS 值<strong><strong>）</strong></strong></p> 
<p><strong><strong>第一步：在项目的根目录下创建 templates 目录</strong></strong></p> 
<p></p> 
<p class="img-center"><img alt="图片" height="321" src="https://images2.imgbox.com/64/b7/GFdguga5_o.png" width="1080"></p> 
<p><strong>第二步：修改项目目录下，TestProject/settings.py 配置文件，在配置文件找到 TEMPLATES 对象，并在修改其中 DIRS 的配置路径如下：</strong></p> 
<p></p> 
<p class="img-center"><img alt="图片" height="420" src="https://images2.imgbox.com/6b/18/7LrSO3Wj_o.png" width="1080"></p> 
<pre><code class="language-python"># 注：os 需要先导入才能使用
import os
'DIRS': [os.path.join(BASE_DIR, 'templates')],     # 修改模板配置路径,</code></pre> 
<p><strong>第三步：修改score下的views.py文件，添加方法，并在urls.py中添加相应路径</strong></p> 
<pre><code class="language-python">def template4(request):
    c = {'name': "张三"}
    return render(request, 'd.html', c)</code></pre> 
<p></p> 
<p></p> 
<p>​​​​​<strong style="color:#4d4d4d;font-size:16px;">最后访问页面</strong></p> 
<p></p> 
<p class="img-center"><img alt="图片" height="306" src="https://images2.imgbox.com/47/23/gT0kcgfO_o.png" width="748"></p> 
<p></p> 
<p></p> 
<p></p> 
<h3><strong>模板的语法</strong></h3> 
<h4><strong><strong>条件判断语法</strong></strong></h4> 
<pre><code class="language-python">{% if 条件 %}
 #   满足条件展示内容
 {% endif %}

 # 或者

 {% if 条件1 %}
 #   满足条件1展示
 {% elif 条件2 %}
 #   满足条件2展示
 {% else %}
 #   不满足条件1条件2的展示
 {% endif %}

  # 或者多条件判断
 {% if 变量1 and 变量2 %}
 {% endif %}

 {% if 变量1 or 变量2 %}
 {% endif %}</code></pre> 
<p><strong><strong>循环语法</strong></strong></p> 
<pre><code class="language-python"> {% for x in xx %}

 {% endfor %}</code></pre> 
<p><strong>比较语法</strong></p> 
<pre><code class="language-python"># ifequal/ifnotequal 语法用于更直接的比较两个变量是否相等
 {% ifequal user '张三' %}

 {% endifequal %}

 # 或者

 {% ifnotequal user '张三' %}

 {% endifnotequal %}</code></pre> 
<p></p> 
<p><strong>模板过滤器</strong></p> 
<p>过滤器使用管道字符 | 。另外过滤管道可以被套接，即一个过滤器管道的输出又可以作为下一个管道的输入</p> 
<pre><code class="language-python">{<!-- -->{ 变量 | 过滤器 }}</code></pre> 
<p><strong>示例</strong></p> 
<pre><code class="language-python"># 表示将变量 name 的值变为小写输出
{<!-- -->{ name|lower }}  

# 将变量第一个元素转化为大写字母
{<!-- -->{ name|first|upper }}</code></pre> 
<p><strong>模板继承</strong></p> 
<p>模板继承可以减少页面内容的重复定义，实现页面内容的重用。</p> 
<p>典型应用：网站的头部、尾部是一样的，这些内容可以定义在父模板中，子模板不需要重复定义</p> 
<p><strong>示例： 在templates中创建一个 common.html 文件用于复用</strong></p> 
<pre><code class="language-python">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;你好，这是公共部分&lt;/h1&gt;
    {% block mainbody %}

    {% endblock %}
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>再创建一个 b.html模板文件，继承common.html</p> 
<pre><code class="language-python">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;你好，这是公共部分&lt;/h1&gt;
    {% block mainbody %}

    {% endblock %}
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>最后修改score应用的views.py文件</p> 
<pre><code class="language-python"># score/views.py

def template3(request):
    c = {'name': "张三"}
    return render(request, 'b.html', c)</code></pre> 
<p>修改完成，最后通过访问 URL http://127.0.0.1:8080/score/template3 就能看到我们刚修改完的页面</p> 
<p></p> 
<p></p> 
<p class="img-center"><img alt="图片" height="335" src="https://images2.imgbox.com/b7/53/4QEX9pfW_o.png" width="764"></p> 
<p><span style="color:#fe2c24;">注：</span></p> 
<ul><li> <p><span style="color:#fe2c24;">block 标签：在父模板中预留区域，在子模板中填充</span></p> </li><li> <p><span style="color:#fe2c24;">extends 标签：在子模板中继承父模板，写在模板文件的第一行</span></p> </li></ul> 
<p></p> 
<p><strong>程序猿与投资生活实录已改名为  程序猿知秋，WX 公众号同款，欢迎关注！!</strong> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/258ba6bf01c0d92e2a871e4e0a6064e1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于nginx的tomcat负载均衡和集群(超简单)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/02769e66aab870088f323ffb0b5a90fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">FastChat工作原理解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>