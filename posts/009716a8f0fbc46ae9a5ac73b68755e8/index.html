<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Maven 最详细的settings.xml 配置文件解释 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Maven 最详细的settings.xml 配置文件解释" />
<meta property="og:description" content="Maven settings.xml详解 settings.xml maven的主配置文件缺省名称为 settings.xml 其完整结构如下(为了方便阅读，删除了注释部分)：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;settings xmlns=&#34;http://maven.apache.org/SETTINGS/1.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&#34;&gt; &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt; &lt;interactiveMode&gt;true&lt;/interactiveMode&gt; &lt;offline&gt;false&lt;/offline&gt; &lt;pluginGroups&gt; &lt;/pluginGroups&gt; &lt;proxies&gt; &lt;/proxies&gt; &lt;servers&gt; &lt;/servers&gt; &lt;mirrors&gt; &lt;/mirrors&gt; &lt;profiles&gt; &lt;/profiles&gt; &lt;activeProfiles&gt; &lt;/activeProfiles&gt; &lt;/settings&gt; conf 目录 和 .m2 目录 如果你是第一次安装maven，你能够在安装目录下的conf目录中找到settings.xml 配置文件，但如果你第一次使用maven进行项目构建后，你会发现在你的用户目录中，会出现一个.m2的隐藏(windows中非隐藏，. 前缀为linux内核操作系统中的隐藏文件前缀)目录。通常，我们会把 **conf目录 **中的settings.xml文件复制到 .m2目录中进行使用。实际上这是基于操作系统本身，相对于maven使用用户的一次分隔，不同的用户登录操作系统后将使用不同的settings.xml配置文件。如何达到这一目的，maven通过内置的settings.xml加载规则完成。
settings.xml加载规则 如上图所示，maven在构建项目获取配置文件时，首先会查找用户目录下的.m2目录，如果存在则使用，如果不存在再获取安装目录下conf目录中的配置文件，因此我们这样描述两个目录中配置文件的不同， .m2目录是用户级的配置，而conf目录是系统全局的配置。
**
注： 如果需要在项目构建时使用特定的配置文件，可以使用 **mvn -s 配置文件绝对路径 &#43; 构建命令** 完成构建
settings.xml 内容解析 1. settings settings.xml 除了默认的xml头之外，固定由一个 settings 标签包裹其他内容标签。用户通常不需要修改该标签内容
&lt;settings xmlns=&#34;http://maven.apache.org/SETTINGS/1.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&#34;&gt; &lt;!--Xml name space 的缩写，标识了该文档使用 http://maven." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/009716a8f0fbc46ae9a5ac73b68755e8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-01T10:01:11+08:00" />
<meta property="article:modified_time" content="2021-03-01T10:01:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Maven 最详细的settings.xml 配置文件解释</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Maven_settingsxml_0"></a>Maven settings.xml详解</h2> 
<h2><a id="settingsxml_2"></a>settings.xml</h2> 
<p>maven的主配置文件缺省名称为 settings.xml 其完整结构如下(为了方便阅读，删除了注释部分)：</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.0.0<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>/path/to/local/repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interactiveMode</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>interactiveMode</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>offline</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>offline</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxies</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="conf___m2__36"></a>conf 目录 和 .m2 目录</h4> 
<p>如果你是第一次安装maven，你能够在安装目录下的conf目录中找到settings.xml 配置文件，但如果你第一次使用maven进行项目构建后，你会发现在你的用户目录中，会出现一个.m2的隐藏(windows中非隐藏，. 前缀为linux内核操作系统中的隐藏文件前缀)目录。通常，我们会把 **conf目录 **中的settings.xml文件复制到 <strong>.m2目录</strong>中进行使用。实际上这是基于操作系统本身，相对于maven使用用户的一次分隔，不同的用户登录操作系统后将使用不同的settings.xml配置文件。如何达到这一目的，maven通过内置的settings.xml加载规则完成。</p> 
<h4><a id="settingsxml_38"></a>settings.xml加载规则</h4> 
<p><img src="https://images2.imgbox.com/79/60/wgWpX7kV_o.png" alt="在这里插入图片描述"></p> 
<p>如上图所示，maven在构建项目获取配置文件时，首先会查找用户目录下的.m2目录，如果存在则使用，如果不存在再获取安装目录下conf目录中的配置文件，因此我们这样描述两个目录中配置文件的不同， <strong>.m2目录是用户级的配置，而conf目录是系统全局的配置。</strong><br> **</p> 
<blockquote> 
 <p><strong>注： 如果需要在项目构建时使用特定的配置文件，可以使用 <strong><code>**mvn -s 配置文件绝对路径 + 构建命令**</code></strong> 完成构建</strong></p> 
</blockquote> 
<h2><a id="settingsxml__47"></a>settings.xml 内容解析</h2> 
<h4><a id="1__settings_48"></a>1. settings</h4> 
<p>settings.xml 除了默认的xml头之外，固定由一个 settings 标签包裹其他内容标签。用户通常不需要修改该标签内容</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.0.0<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--Xml name space 的缩写，标识了该文档使用 http://maven.apache.org/SETTINGS/1.0.0 的命名空间  --&gt;</span>
xmlns="http://maven.apache.org/SETTINGS/1.0.0"
<span class="token comment">&lt;!--标识xsd文件的命名空间，使用标准的http://www.w3.org/2001/XMLSchema-instance  --&gt;</span>
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
<span class="token comment">&lt;!--标识xsd(文档结构定义文件)的URI --&gt;</span>
xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"
<span class="token comment">&lt;!--如对该部分内容感兴趣，可以访问 https://blog.csdn.net/lengxiao1993/article/details/77914155  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="2_localRepository_65"></a>2. localRepository</h4> 
<p>输入内容：仓库目录的绝对路径<br> 默认值： <code>${user.home}/.m2/repository</code><br> 释义：配置maven 本地依赖仓库的绝对路径。也就是你通过pom.xml文件的dependencies定义的依赖，在maven构建(package 和 install 命令)时将被下载到这个本地仓库。</p> 
<blockquote> 
 <p>注：建议将仓库配置到系统运行盘以外的磁盘。</p> 
</blockquote> 
<h4><a id="3_interactiveMode_72"></a>3. interactiveMode</h4> 
<p>输入内容：true | false<br> 默认值： true<br> 释义：Maven在运行时是否需要和用户交互以获得输入。如果Maven需要和用户交互以获得输入，则设置成true，反之则应为false。默认为true。</p> 
<p>测试了一下，不知道这个交互体现在哪里，由于这个内容资料较少，且似乎没有太大的用处，因而这里不多讨论。</p> 
<h4><a id="4_offline_79"></a>4. offline</h4> 
<p>输入内容：true | false<br> 默认值： false<br> 释义： 是否脱机运行，默认时false，也就是在构建项目时链接网络，如果设置为true，可能在下载依赖或者远程部署时会发生错误，建议保持默认值</p> 
<h4><a id="5_pluginGroups_83"></a>5. pluginGroups</h4> 
<p>组成：pluginGroup<br> 释义： 常用插件组的定义，包含多个 pluginGroup 标签。<br> maven除了提供内置的clean，test，package，install，deploy等插件之外， 还支持引入第三方插件。<br> 在使用插件时，正式的命令是 <code>mvn 插件groupId:插件artifactId:插件目的goal</code> 例如 clean插件， <code>mvn org.apache.maven.plugins:maven-clean-plugin:clean</code> 。但如果你已经使用了一段时间maven，你会发生，更常使用的命令是<code>mvn clean:clean</code> 或者 <code>mvn clean</code>。为什么可以使用这些简写呢？正是由于pluginGroups和插件调用规则起的作用。<br> pluginGroups默认配置了 <code>org.apache.maven.plugins</code>和<code>org.codehaus.mojo</code> ；即如下所示</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroup</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroup</span><span class="token punctuation">&gt;</span></span>org.codehaus.mojo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>一旦在pluginGroups中配置了插件的GroupId之后，也就意味着该插件组是你的常用插件(个人理解)，你就可以不书写groupId， 直接通过书写插件的昵称进行调用。<br> 例如我在项目中引入mybatis-generator插件</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--注意，仅仅引入插件并不能完成自动生成工作，仍然需要引入相关的依赖包和配置文件 --&gt;</span>
<span class="token comment">&lt;!--如果想要了解mybatis包括其衍生框架的代码生成工具，
可以查阅https://blog.csdn.net/weixin_43740223/article/details/108283753 --&gt;</span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-generator-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configurationFile</span><span class="token punctuation">&gt;</span></span>${pom.basedir}/src/main/resources/maven-plugins-mybatis-generator-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configurationFile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>overwrite</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>overwrite</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在未进行配置时， 我需要键入完整的插件索引才能执行插件，<code>mvn org.mybatis.generator:mybatis-generator-maven-plugin:generate</code><br> <img src="https://images2.imgbox.com/de/b0/cVOu6utM_o.png" alt="在这里插入图片描述"></p> 
<p>而我们可以通过如下配置添加该插件组，此时我可以通过 <code>mvn mybatis-generator:generate</code> 直接进行插件的调用。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- pluginGroup
     | Specifies a further group identifier to use for plugin lookup.
    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;
    --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroup</span><span class="token punctuation">&gt;</span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<blockquote> 
 <p>注1：关于插件调用规则。有人注意到 mvn clean没有输入goal也能执行，那是因为当没有goal时，maven默认goal为 插件名 ，也就是你输入 mvn clean，实际上相当于 mvn clean:clean。例如有插件为 love 且其有goal设置为love， 我可以键入 mvn love:love，也可以直接键入 mvn love，<br> 因此，当插件的名称与goal不同名时，请注意正确使用方法。<br> 注2：pluginGroups 似乎仅在旧版本起作用，新版本测试时发现不需要配置也可以直接使用 mvn pluginName 进行调用。不求甚解，望众位有则告知。</p> 
</blockquote> 
<h4><a id="6_proxies_133"></a>6. proxies</h4> 
<p>组成：proxy<br> 释义：配置网络代理服务器，以用于部分或全部HTTP请求。通常用不到，国内访问远程仓库可以配置仓库镜像，如果需要通过代理访问网络的话，可以用proxies配置代理。</p> 
<h6><a id="proxy_136"></a>proxy</h6> 
<table><thead><tr><th align="center"><strong>属性</strong></th><th align="center"><strong>释义</strong></th></tr></thead><tbody><tr><td align="center">id</td><td align="center">代理的ID，默认default</td></tr><tr><td align="center">active</td><td align="center">是否激活该代理，默认true</td></tr><tr><td align="center">protocol</td><td align="center">代理服务器的协议，默认http</td></tr><tr><td align="center">host</td><td align="center">代理服务器的主机</td></tr><tr><td align="center">port</td><td align="center">代理服务器的端口，默认8080</td></tr><tr><td align="center">username</td><td align="center">代理服务器登录用户，仅在需要登录时配置</td></tr><tr><td align="center">password</td><td align="center">代理服务器登录密码，仅在需要登录时配置</td></tr><tr><td align="center">nonProxyHosts</td><td align="center">不使用该代理服务器的主机域名，多个域名使用</td></tr></tbody></table> 
<p>官方提供的配置示例</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxies</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxy</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>example-proxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>active</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>protocol</span><span class="token punctuation">&gt;</span></span>http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>protocol</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>proxy.example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>8080<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>proxyuser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>somepassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nonProxyHosts</span><span class="token punctuation">&gt;</span></span>www.google.com|*.example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nonProxyHosts</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxy</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxies</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="7_servers_163"></a>7. servers</h4> 
<p>组成：server<br> 释义：用于配置 依赖下载存储库 (POM中的repositories | pluginRepositories中定义的存储库 &amp;&amp; settings.xml 中 profile | mirror 中定义的存储库) 以及 发布工件的存储库(POM中的distributionManagement定义的发布仓库)的鉴权信息和权限设置。<br> 因为有些设置不适合和项目工件一同进行发布，例如服务器链接和密码，这将可能导致密码泄露。 因而可以在配置发布和依赖下载的仓库后，如果访问仓库需要进行鉴权，可以在settings.xml 中的servers块中进行定义，两者通过id进行关联。</p> 
<h6><a id="server_169"></a>server</h6> 
<table><thead><tr><th align="center"><strong>属性</strong></th><th align="center"><strong>释义</strong></th></tr></thead><tbody><tr><td align="center">id</td><td align="center">存储库的id，与POM中的repositories</td></tr><tr><td align="center">username</td><td align="center">访问存储库的用户名，当访问需要验证身份时，配置password填写验证信息</td></tr><tr><td align="center">password</td><td align="center">访问存储库的密码，当访问需要验证身份时，配置username填写验证信息</td></tr><tr><td align="center">privateKey</td><td align="center">访问存储库的ss密钥路径，如果访问需要遵守ssh安全协议且采用密钥认证的话。 默认在本地的 ${user.home}/.ssh/id_dsa 目录中</td></tr><tr><td align="center">passphrase</td><td align="center">访问存储库的ssh口令，如果访问需要遵守ssh安全协议且采用口令认证的话。</td></tr><tr><td align="center">filePermissions</td><td align="center">发布时创建的文件的访问权限，采用*nix文件权限格式，也就是我们常用的linux文件权限一样。例如775等</td></tr><tr><td align="center">directoryPermissions</td><td align="center">发布时创建的目录的访问权限，采用*nix文件权限格式，也就是我们常用的linux文件权限一样。例如775等</td></tr><tr><td align="center">configuration</td><td align="center">访问存储库的一些其他配置，只有在访问特定类型的存储库时才可能用到，本文不多讨论。详情参考官网http://maven.apache.org/guides/mini/guide-wagon-providers.html</td></tr></tbody></table> 
<p>上文中我们提到四种仓库 <strong>依赖仓库</strong>， <strong>插件仓库，</strong> 镜像仓库以及 <strong>发布仓库</strong>。实际上，这几种仓库本质上都是一种仓库， 无论插件，第三方jar包还是项目构建的包文件都以几种特定的类型(jar | pom )存储在maven仓库中。</p> 
<p>maven的仓库仅根据仓库的访问方式不同区分为 <strong>本地仓库</strong> ， <strong>远程仓库</strong>。</p> 
<p>本地仓库通过本机系统的文件服务器访问，</p> 
<p>远程仓库通过网络获取资源同步到本地仓库实现访问。</p> 
<p>其中远程仓库又分为 maven中央仓库， 私服(镜像)仓库， 其他仓库，之所以存在这些类型，是因为中央仓库的服务器资源有限，因而产生私服(镜像)仓库，私服(镜像)仓库将同步中央仓库的maven工件，用户在使用私服下载maven工件时通常更加高效。其他的仓库可能存储了一些特定的maven工件， 例如企业内部搭建的maven发布仓库，该企业自主研发的maven工件将存储在这些仓库中。</p> 
<p>之所以提到这些，是希望能了解 maven仓库的一些实质后，帮助我们更好的理解 server 标签的使用。我们现在就能够这样认为， <strong>只要你在maven项目中使用POM 或者 settings 配置了存储库（不管是发布工件的仓库，还是镜像仓库，或者一般的存储库，或者是插件仓库），如果这些存储库的访问需要验证，就可以使用 settings.xml 中的 server标签进行认证信息的设置，通过id进行关联。</strong></p> 
<blockquote> 
 <p>注：一些推论(验证教麻烦，后续补充)。<br> 这里还会有一个ID重复的问题， 如果你在POM 和 settings中配置了同样ID的存储库，那么根据配置文件的优先级<code>${PROJECT_HOME}/pom.xml &gt; ${USER_HOME}/.m2/settings.xml &gt; ${MAVEN_HOME}/conf/settings.xml</code> 应该是POM文件中的配置将生效</p> 
</blockquote> 
<h4><a id="_197"></a></h4> 
<h4><a id="8_mirrors_198"></a>8. mirrors</h4> 
<p>这一章部分内容与上一章 servers 相关，建议一起阅读<br> 组成：mirror<br> 释义：配置仓库的镜像地址，相当于仓库的拦截器。当用户需要下载依赖时，maven会首先搜索本地仓库，本地仓库找不到时则查找远程仓库，如果此时发现远程仓库有镜像，则转而从镜像仓库中下载相应的工件。</p> 
<blockquote> 
 <p>注：mirror的匹配规则：使用mirrorOf配置匹配仓库ID， 且MAVEN仅使用匹配到的第一个镜像，其余符合匹配条件的镜像将不起作用。也就是说，如果你的第一个仓库的mirrorOf 配置为 * ，则其余镜像配置将不起作用</p> 
</blockquote> 
<p><strong>mirror</strong></p> 
<table><thead><tr><th align="center"><strong>属性</strong></th><th align="center"><strong>释义</strong></th></tr></thead><tbody><tr><td align="center">id</td><td align="center">该仓库镜像的唯一标识，与其他 mirror块 不重名即可，如果访问该镜像需要验证信息，可以在server中进行配置，通过id关联。 注：注意是配置的id，不是仓库本身的id</td></tr><tr><td align="center">name</td><td align="center">该仓库镜像的名称，与其他mirror块 不重名即可</td></tr><tr><td align="center">url</td><td align="center">仓库镜像的访问地址，仅支持 http 协议 和 https 协议</td></tr><tr><td align="center">mirrorOf</td><td align="center">被镜像的仓库的id，允许使用通配符。如果访问的仓库的ID匹配该标签配置的内容，将采用该镜像代为执行其工作。mirrorOf支持基于字符串的统配匹配规则，具体使用可以查看官网 <a href="http://maven.apache.org/guides/mini/guide-mirror-settings.html" rel="nofollow">http://maven.apache.org/guides/mini/guide-mirror-settings.html</a> 。 通常使用id或者 * 号进行匹配即可。</td></tr></tbody></table> 
<p>仅靠上述的描述，似乎还不能够解决一些问题，如果有多个仓库配置， maven怎么确定现在要从哪个仓库中获取依赖呢？ 镜像是通过镜像ID匹配的，哪仓库的ID在哪里配置？ 一个新的maven项目没有配置过任何的仓库，为什么能够下载依赖？抱着这些问题，我们继续往下看。</p> 
<h5><a id="Maven____httpsblogcsdnnetfengdayuanarticledetails93089136httpsblogcsdnnetfengdayuanarticledetails93089136_217"></a>Maven 多仓库下的依赖搜索机制 转载自： <a href="https://blog.csdn.net/fengdayuan/article/details/93089136">https://blog.csdn.net/fengdayuan/article/details/93089136</a></h5> 
<p>maven多仓库查找依赖的顺序大致如下：</p> 
<ol><li>在本地仓库中寻找，如果没有则进入下一步。</li><li>在全局配置的私服仓库（settings.xml中配置的并有激活）中寻找，如果没有则进入下一步。</li><li>在项目自身配置的私服仓库（pom.xml）中寻找，如果没有则进入下一步。</li><li>在默认设置的中央仓库中(id:central, url:<a href="https://repo1.maven.org/maven2/" rel="nofollow">https://repo1.maven.org/maven2/</a>)寻找，如果没有则终止寻找。</li></ol> 
<p><img src="https://images2.imgbox.com/05/cc/tx7wUYHb_o.png" alt="在这里插入图片描述"><br> ————————————————<br> 版权声明：本文为CSDN博主「wolf_fdy」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：<a href="https://blog.csdn.net/fengdayuan/article/details/93089136">https://blog.csdn.net/fengdayuan/article/details/93089136</a></p> 
<blockquote> 
 <p>注：<br> 1、如果在找寻的过程中，如果发现该仓库有镜像设置，则用镜像的地址代替，例如现在进行到要在respository A仓库中查找某个依赖，但A仓库配置了mirror，则会转到从A的mirror中查找该依赖，不会再从A中查找。<br> 2、settings.xml中配置的profile（激活的）下的respository优先级高于项目中pom文件配置的respository。<br> 3、如果仓库的id设置成“central”，则该仓库会覆盖maven默认的中央仓库配置。</p> 
</blockquote> 
<h5><a id="_236"></a>配置仓库的镜像及镜像仓库的验证信息示例</h5> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>central-mirror<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 
个人MAVEN镜像
这里mirrorOf 配置的 central 表示该镜像是MAVEN中央仓库的镜像
因为个人搭建的nexus MAVEN 仓库没有开启匿名访问， 所以需要添加上述的server以验证访问，否则将出现401 Unauthorized错误
--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span> 
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>central-mirror<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://172.20.3.21:9876/repository/pm-public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_261"></a>配置仓库及其验证信息示例</h5> 
<h6><a id="1__264"></a>1. 全局仓库的配置</h6> 
<p>settings.xml</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>my-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 
如果你需要给自己配置的仓库配置镜像,如下所示。当然自己配的仓库一般也不需要再配置镜像了。
&lt;mirrors&gt;
  &lt;mirror&gt;
    &lt;id&gt;my-repo-mirrors&lt;/id&gt;
    &lt;url&gt;http://172.20.3.21:9876/repository/pm-public/&lt;/url&gt;
     &lt;mirrorOf&gt;my-repo&lt;/mirrorOf&gt;
  &lt;/mirror&gt;
&lt;/mirrors&gt;
--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 
profile 不仅能配置仓库，插件仓库，还能配置properties等信息。
如下配置了一个全局仓库，是一个代理ali新的public仓库的代理仓库。
因为个人搭建的nexus MAVEN 仓库没有开启匿名访问， 所以需要添加上述的server以验证访问，否则将出现401 Unauthorized错误

--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>my-repo-profile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>my-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://172.20.3.21:9876/repository/pm-alibaba-https/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- profiles中定义profile需要激活才能生效 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>my-repo-profile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h6><a id="2__314"></a>2. 项目仓库的配置</h6> 
<p>POM.xml 中配置仓库信息</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--这里定义的是一个发布仓库 --&gt;</span>    

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>distributionManagement</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--其他用户可以从该地址获取到发布的内容 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>downloadUrl</span><span class="token punctuation">&gt;</span></span>http://172.20.3.21:9876/repository/pm-release/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>downloadUrl</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>status</span><span class="token punctuation">&gt;</span></span>deployed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>status</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uniqueVersion</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uniqueVersion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>release-pub-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://172.20.3.21:9876/repository/pm-release/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>distributionManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>settings.xml 中使用server配置仓库访问认证信息</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 
因为个人搭建的nexus MAVEN 仓库没有开启匿名访问， 所以需要添加上述的server以验证访问，否则将出现401 Unauthorized错误.
注意：这里的ID与POM中发布仓库的ID保持一致
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>release-pub-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>上述列举的示例，希望能够加强对仓库repository、镜像mirror以及服务器认证信息server这些配置的记忆。</p> 
<h4><a id="9_profiles_347"></a>9. profiles</h4> 
<p>组成：profile {activation;repositories;pluginRepositories;properties}<br> 释义：settings.xml 中的 profiles 是 pom.xml 中的 profiles的精简版本，相对于pom中的profiles是项目中的配置文件，它是全局的配置文件。profiles能够完成 仓库配置 和 全局属性定义。每个配置存在于一个 标签中，注意该 profile 需要进行激活才能启用</p> 
<h6><a id="profile_350"></a>profile的三种激活方式</h6> 
<ol><li>通过activeProfile指定profile 的 id激活</li></ol> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 具体的一些配置--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--指定profile的id进行激活 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ol start="2"><li>通过activation匹配条件激活</li></ol> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--
如下是官网提供的示例，我加以解释。官网文档在有些地方的释义仍然不够清晰，因此我通过搜索和测试增加了说明。
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--是否默认激活--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>
      	<span class="token comment">&lt;!--JDK版本，符合1.5及其子版本，例如1.5.0_06 也符合条件--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdk</span><span class="token punctuation">&gt;</span></span>1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jdk</span><span class="token punctuation">&gt;</span></span>
      	<span class="token comment">&lt;!--操作系统条件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>os</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--操作系统名称 通过java函数 system.getProperty("os.name")获取 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Windows XP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--操作系统类别 Unix | Windows | Mac 不区分大小写 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>family</span><span class="token punctuation">&gt;</span></span>Windows<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>family</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--计算机CPU架构 通过java函数 system.getProperty("os.arch")获取 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arch</span><span class="token punctuation">&gt;</span></span>x86<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arch</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--操作系统版本号 通过java函数 system.getProperty("os.version")获取 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.2600<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>os</span><span class="token punctuation">&gt;</span></span>
      	<span class="token comment">&lt;!--Maven中定义的具体的某个属性值是否匹配, 官网中解释到：a value which can be dereferenced within the POM by ${name}
				也就是可以在POM中通过占位符${}引用到的值，那么JAVA系统变量的值(所有通过System.getProperty("propertyName")也可以都可以在此处被设置并判断，
				如果你在项目中有某些特殊的值需要借由MAVEN判断并以此激活某些profile，可以通过System.setProperties() 设置到环境变量中，也可以直接在POM中的&lt;properties&gt;标签中定义
				当然，在POM中直接定义有些情况下意味着你必须根据变化修改你的代码并重新编译。--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mavenVersion<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
      	<span class="token comment">&lt;!--根据文件是否存在判断激活 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--指定路径的文件是否存在 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exists</span><span class="token punctuation">&gt;</span></span>${basedir}/file2.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exists</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--指定路径的文件是否不存在 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>missing</span><span class="token punctuation">&gt;</span></span>${basedir}/file1.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>missing</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--配置仓库或者全局属性等 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
      ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
      ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>如上，当profile中activation的条件全部满足时，该profile将被激活，仓库和属性的配置将生效。当然，如果你配置 <code>&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</code> 后面的条件就不会被匹配，该配置将作为默认激活项激活。</p> 
<ol start="3"><li>通过命令行指令激活</li></ol> 
<p><code>mvn -P test</code> 通过<code>-P</code> 并指定 profile<code>id</code> 即可在运行构建时激活指定<code>id</code> 的profile</p> 
<h5><a id="Activation_423"></a>Activation</h5> 
<p>略。</p> 
<blockquote> 
 <p>参考<br> 9.&lt;/&gt;<br> profile的三种激活方式<br> 2.通过activation匹配条件激活</p> 
</blockquote> 
<h6><a id="Properties_432"></a>Properties</h6> 
<p>同pom.xml中properties标签的使用方式一致，相较于pom.xml是项目全局的属性配置 ，${user.home}/.m2/settings.xml中的properties是用户全局的属性配置。当然如果你是在 ${MAVEN_HOME}/conf/settings.xml 中配置的话就是系统全局的。</p> 
<p>示例如下</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      ...
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user.install</span><span class="token punctuation">&gt;</span></span>${user.home}/our-project<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user.install</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
      ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>如上示例，在maven中可以通过 ${user.install} 引用该属性定义。maven的全部属性定义都可以使用占位符进行引用</p> 
<h6><a id="Repositories__PluginRepositories_452"></a>Repositories &amp;&amp; PluginRepositories</h6> 
<p>仓库配置，上文中我们已经解释了maven多仓库时的搜索机制，这里就是我们定义全局仓库的地方。仓库和插件仓库的配置是一样的， 这里使用表格简单介绍一下必要的属性配置</p> 
<table><thead><tr><th align="center"><strong>属性</strong></th><th align="center"><strong>释义</strong></th></tr></thead><tbody><tr><td align="center">id</td><td align="center">仓库id，注意与其他仓库区分</td></tr><tr><td align="center">name</td><td align="center">仓库名称，方便用户的识别</td></tr><tr><td align="center">url</td><td align="center">仓库访问路径</td></tr><tr><td align="center">releases</td><td align="center">snapshot</td></tr><tr><td align="center">layout</td><td align="center">仓库的布局类型 default</td></tr></tbody></table> 
<p>首先，简单说明下<strong>maven的发布版本和快照版本</strong>。引用自：<a href="https://www.cnblogs.com/molao-doing/articles/6379216.html" rel="nofollow">https://www.cnblogs.com/molao-doing/articles/6379216.html</a><br> maven的工件分为release 和 snapshot 两种版本类型，release为稳定的发行版本，snapshot为不稳定版本，通常我们开发中都使用snapshot作为版本号。定义一个组件/模块为快照版本，只需要在pom文件中在该模块的版本号后加上**-SNAPSHOT**即可(注意这里必须是大写)。release版本不允许修改，每次进行release版本修改，发布必须提升版本号。而snapshot一般是开发过程中的迭代版本，snapshot更新后，引用的项目可以不修改版本号自动下载构建。同样的，maven中的仓库也依此分为两种，snapshot快照仓库和release发布仓库。snapshot快照仓库用于保存开发过程中的不稳定版本，release正式仓库则是用来保存稳定的发行版本。</p> 
<p>我们知道，maven的依赖管理是基于版本管理的，对于发布状态的artifact，如果版本号相同，即使我们内部的镜像服务器上的组件比本地新，maven也不会主动下载的。如果我们在开发阶段都是基于正式发布版本来做依赖管理，那么遇到这个问题，就需要升级组件的版本号，可这样就明显不 符合要求和实际情况了。但是，如果是基于快照版本，那么问题就自热而然的解决了，而maven已经为我们准备好了这一切。<br> maven2会根据模块的版本号(pom文件中的version)中是否带有-SNAPSHOT来判断是快照版本还是正式版本。如果是快照版本，那么在 mvn deploy时会自动发布到快照版本库中，而使用快照版本的模块，在不更改版本号的情况下，直接编译打包时，maven会自动从镜像服务器上下载最新的快照版本。如果是正式发布版本，那么在mvn deploy时会自动发布到正式版本库中，而使用正式版本的模块，在不更改版本号的情况下，编译打包时如果本地已经存在该版本的模块则不会主动去镜像服务 器上下载。</p> 
<p>所以，我们在开发阶段，可以将公用库的版本设置为快照版本，而被依赖组件则引用快照版本进行开发，在公用库的快照版本更新后，我们也不需要修改pom文件提示版本号来下载新的版本，直接mvn执行相关编译、打包命令即可重新下载最新的快照库了，从而也方便了我们进行开发，也不冲突MAVEN的版本管理原则。</p> 
<p>然后针对 <strong> 和 中的几个属性做下详细说明</strong>。<br> 属性：enabled<br> 键入： true | false<br> 释义：是否启用发布 | 快照版本。</p> 
<p>属性：updatePolicy<br> 键入：always | daily | interval:X | never<br> 释义：maven在构建时根据更新策略会比较本地仓库工件和远程仓库工件，如果发现远程仓库的工件有更新，将重新获取该工件。</p> 
<table><thead><tr><th align="center"><strong>键入值</strong></th><th align="center"><strong>释义</strong></th></tr></thead><tbody><tr><td align="center">always</td><td align="center">总是比较更新</td></tr><tr><td align="center">daily</td><td align="center">默认的更新策略，每天进行一次比较更新，取值为当地时间</td></tr><tr><td align="center">interval:X</td><td align="center">X为分钟的整数值，构建时发现已经间隔X分钟后进行比较更新</td></tr><tr><td align="center">never</td><td align="center">从不进行比较更新</td></tr></tbody></table> 
<blockquote> 
 <p>注：官网说明该更新仅支持快照版本，发行版本仍然是按照版本号获取的，一旦获取后将不进行比较更新。但是releases中仍然有该部分配置，因而是否是文档错误笔者未进行验证</p> 
</blockquote> 
<p>属性：checksumPolicy<br> 键入：ignore | fail | warn<br> 释义：比较工件校验和的策略。<br> 首先需要理解校验和， 校验和是对传输位数的累加，用于校验maven构件的完整性和准确性。在传输时，发送方和接收方通过校验和检测本次数据传输是否传输完整，接受顺序是否有误(如果数据过大，传输可能是建立在多次链接之上的)。可以查阅 <a href="https://my.oschina.net/donhui/blog/325868" rel="nofollow">https://my.oschina.net/donhui/blog/325868</a> 了解更多关于maven校验和的知识。<br> 我们重新回到校验和的策略 checksumPolicy ，通过表格比较一下几种策略的不同</p> 
<table><thead><tr><th align="center"><strong>键入值</strong></th><th align="center"><strong>释义</strong></th></tr></thead><tbody><tr><td align="center">ignore</td><td align="center">忽略校验和</td></tr><tr><td align="center">fail</td><td align="center">当maven发现校验和不一致时，将导致构建失败，并抛出异常</td></tr><tr><td align="center">warn</td><td align="center">当maven发现校验和不一致时，将输出警告信息，但不会导致构建失败</td></tr></tbody></table> 
<h4><a id="10_activeProfiles_508"></a>10. activeProfiles</h4> 
<p>组成：activeProfile<br> 释义：用于激活profile，上文中已有描述。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>test&lt;/ activeProfile&gt;
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>本文到此结束。感谢观看。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/878dd83fefebb1961b0c6090f929cefc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VS 2015用C&#43;&#43;项目生成dll并调用（2021.3.1）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e1835e3f772d5e60135ddd99c4272035/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">复习Vue3:列表渲染 v-for</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>