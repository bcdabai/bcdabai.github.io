<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Dockerå­¦ä¹ ï¼ˆä¸€ï¼‰åœ¨Dockerå®¹å™¨ä¸­éƒ¨ç½²ä¸€ä¸ªåŸºäºTCPçš„ç®€å•Javaåº”ç”¨â€”â€”Windows - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Dockerå­¦ä¹ ï¼ˆä¸€ï¼‰åœ¨Dockerå®¹å™¨ä¸­éƒ¨ç½²ä¸€ä¸ªåŸºäºTCPçš„ç®€å•Javaåº”ç”¨â€”â€”Windows" />
<meta property="og:description" content="Dockerå­¦ä¹ ï¼ˆä¸€ï¼‰Dockerå…¥é—¨ã€éƒ¨ç½²ä¸€ä¸ªç®€å•çš„åŸºäºTCPçš„Javaåº”ç”¨â€”â€”Windows ç›®å½•ç¯å¢ƒå‡†å¤‡å®‰è£…Dcokerè¿è¡Œhello-worldéƒ¨ç½²è‡ªå·±çš„javaåº”ç”¨å‡†å¤‡å¯è¿è¡ŒjaråŒ…ä¸ºDockerå®¹å™¨å‡†å¤‡javaç¯å¢ƒæ„å»ºé•œåƒå¹¶è¿è¡Œ é™„å½• ç›®å½• åœ¨ä¸Šäº‘è®¡ç®—è¿™é—¨è¯¾â€”â€”Dockeréƒ¨ç½²å®éªŒï¼Œå› ä¸ºè¦æ±‚æ˜¯éƒ¨ç½²è‡ªå·±çš„javaåº”ç”¨ï¼Œå°±åšä¸ªå¹³å¹³æ— å¥‡javaçš„TCPåº”ç”¨éƒ¨ç½²çš„ç¬”è®°å’Œåˆ†äº«ã€‚
ç¯å¢ƒå‡†å¤‡ æ“ä½œç³»ç»Ÿï¼šWindows10ä¸“ä¸šç‰ˆä½¿ç”¨è½¯ä»¶ï¼šDocker-for-windows 19.03.8ã€Eclipse photonï¼ˆå…¶ä»–java ideä¹Ÿå¯ä»¥ï¼‰ å®‰è£…Dcoker å®‰è£…è¿‡ç¨‹ä¸­å¿˜è®°æˆªå›¾äº†ï¼Œè¿™ç¯‡æ–‡ç« å†™å¾—å°±æŒºè¯¦ç»†çš„ï¼Œè·Ÿç€å®‰è£…åº”è¯¥ä¸ä¼šæœ‰å¤§é—®é¢˜: https://www.runoob.com/docker/windows-docker-install.html
æ³¨æ„äº‹é¡¹ï¼š
1ï¼‰ Windowså®¶åº­ç‰ˆéœ€è¦å…ˆå®‰è£…Docker ToolBoxã€‚é˜²æ­¢Windowsçš„å¹³å°è™šæ‹ŸåŒ–ä¸Docker ToolBoxäº’ç›¸å†²çªï¼šæ§åˆ¶é¢æ¿â€“&gt;ç¨‹åºå’ŒåŠŸèƒ½â€“&gt;å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½â€“&gt;WindowsåŠŸèƒ½â€“&gt;å…³é—­Virtual Machine Platformã€Windows Hyper-V platformã€‚
2ï¼‰ Windowsä¸“ä¸šç‰ˆåœ¨å®‰è£…ä¹‹å‰éœ€è¦åœ¨æœ¬åœ°å…ˆå¼€å¯Windowsè‡ªå¸¦çš„Hyper-VæœåŠ¡ï¼Œå¼€å¯åé‡å¯ç”µè„‘æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚
3ï¼‰ VMwareçš„è™šæ‹ŸæœºæœåŠ¡ä¸Hyper-Vä¸èƒ½å¹¶å­˜ï¼Œè¿™æ—¶å€™ä½ å¼€å¯è™šæ‹Ÿæœºä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™ã€‚è§£å†³åŠæ³•â€¦åç»­å°è¯•äº†å†è¡¥å……å§â€¦
è¡¥å……ï¼šç”±äºç›®å‰ç”¨çš„Hyper-Vå’ŒVMwareçš„è™šæ‹ŸåŒ–æŠ€æœ¯æ— æ³•å…¼å®¹ï¼Œè¿˜æ˜¯åˆ†å¼€ç”¨å§â€¦â€¦å…¶ä»–äººçš„ç­”æ¡ˆä¹Ÿæ˜¯å¯åŠ¨çš„æ—¶å€™é€‰æ‹©åŠ è½½Hyper-Vè¿˜æ˜¯VMwareï¼Œæ—¢ç„¶ä¸èƒ½åŒæ—¶ç”¨å°±éœ€è¦ç”¨è°å†å¼€å§ï¼Œä½†æ˜¯çœ‹åˆ°VMwareçš„20H1å¥½åƒæ”¯æŒåŒæ—¶ä½¿ç”¨ï¼ŒæœŸå¾…åé¢çš„ç‰ˆæœ¬å§ã€‚
Dcoker æˆåŠŸå®‰è£…åï¼Œä½¿ç”¨dcoker --versionæŸ¥çœ‹å¯å®‰è£…çš„Dcoekrç‰ˆæœ¬ï¼ŒéªŒè¯Dockeræ˜¯å¦æˆåŠŸå®‰è£…ï¼š
è¿è¡Œhello-world åœ¨CMDè¿è¡Œå‘½ä»¤docker run hello-world ï¼ŒæˆåŠŸè¿è¡Œçš„æƒ…å†µæˆªå›¾å¦‚ä¸‹ï¼š
å¦‚æœå‡ºç°æ‹‰å–è¶…æ—¶å¯¼è‡´å¤±è´¥çš„æƒ…å†µï¼Œä¸€èˆ¬æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå†æ¬¡è¿è¡Œè¯¥å‘½ä»¤å¯ä»¥æˆåŠŸï¼Œæˆ–è€…æœç´¢net/http: TLS handshake timeoutæ›´æ¢å›½å†…çš„é•œåƒæºï¼š
éƒ¨ç½²è‡ªå·±çš„javaåº”ç”¨ å‡†å¤‡å¯è¿è¡ŒjaråŒ… 1. é¡¹ç›®ç»“æ„
ç¼–å†™è‡ªå·±çš„javaåº”ç”¨ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„é¡¹ç›®(ä¹‹å‰å­¦javaå†™çš„ä»£ç é€»è¾‘å¯èƒ½ä¸å¤ªä¸¥è°¨å‡‘åˆç”¨å§)ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š
2. Server.java
package tcp; /* æœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„in.txtæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶å‘out.txtä¸­å†™å…¥ * å½“è¿æ¥æœåŠ¡å™¨çš„å®¢æˆ·ç«¯æ•°é‡è¾¾åˆ°5æ—¶ä¸å†æ¥å—è¿æ¥ï¼Œå…³é—­æœåŠ¡å™¨çš„socket */ import java.io.DataInputStream; import java.io.File; import java.io.FileOutputStream; import java.io.IOException; import java.io.InputStream; import java.net.ServerSocket; import java.net.Socket; import java.util.Scanner; public class Server { public static int client_num = 0;//åˆå§‹åŒ–å®¢æˆ·ç«¯è¿æ¥æ•°é‡ private static int MAX_NUM = 5;//å¯è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ä¸Šé™ä¸º5 public static boolean flag = true;//flagç”¨äºè¡¨ç¤ºæ˜¯å¦æ¥å—è¿æ¥ public static void main(String[] args) { ServerSocket server = null; try { server = new ServerSocket(6666); // ç›‘å¬6666ç«¯å£çš„æœåŠ¡å™¨Socket } catch (IOException e1) { System." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f32017a83c656e090cf9197e6513657f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-21T18:45:36+08:00" />
<meta property="article:modified_time" content="2020-04-21T18:45:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Dockerå­¦ä¹ ï¼ˆä¸€ï¼‰åœ¨Dockerå®¹å™¨ä¸­éƒ¨ç½²ä¸€ä¸ªåŸºäºTCPçš„ç®€å•Javaåº”ç”¨â€”â€”Windows</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Dockerå­¦ä¹ ï¼ˆä¸€ï¼‰Dockerå…¥é—¨ã€éƒ¨ç½²ä¸€ä¸ªç®€å•çš„åŸºäºTCPçš„Javaåº”ç”¨â€”â€”Windows</h4> 
 <ul><li><a href="#_1" rel="nofollow">ç›®å½•</a></li><li><ul><li><a href="#_5" rel="nofollow">ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#Dcoker_8" rel="nofollow">å®‰è£…Dcoker</a></li><li><a href="#helloworld_21" rel="nofollow">è¿è¡Œhello-world</a></li><li><a href="#java_26" rel="nofollow">éƒ¨ç½²è‡ªå·±çš„javaåº”ç”¨</a></li><li><ul><li><a href="#jar_28" rel="nofollow">å‡†å¤‡å¯è¿è¡ŒjaråŒ…</a></li><li><a href="#Dockerjava_205" rel="nofollow">ä¸ºDockerå®¹å™¨å‡†å¤‡javaç¯å¢ƒ</a></li><li><a href="#_210" rel="nofollow">æ„å»ºé•œåƒå¹¶è¿è¡Œ</a></li></ul> 
   </li><li><a href="#_244" rel="nofollow">é™„å½•</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>ç›®å½•</h2> 
<p>åœ¨ä¸Šäº‘è®¡ç®—è¿™é—¨è¯¾â€”â€”Dockeréƒ¨ç½²å®éªŒï¼Œå› ä¸ºè¦æ±‚æ˜¯éƒ¨ç½²è‡ªå·±çš„javaåº”ç”¨ï¼Œå°±åšä¸ª<strong>å¹³å¹³æ— å¥‡javaçš„TCPåº”ç”¨</strong>éƒ¨ç½²çš„ç¬”è®°å’Œåˆ†äº«ã€‚</p> 
<h3><a id="_5"></a>ç¯å¢ƒå‡†å¤‡</h3> 
<ol><li>æ“ä½œç³»ç»Ÿï¼šWindows10ä¸“ä¸šç‰ˆ</li><li>ä½¿ç”¨è½¯ä»¶ï¼šDocker-for-windows 19.03.8ã€Eclipse photonï¼ˆå…¶ä»–java ideä¹Ÿå¯ä»¥ï¼‰</li></ol> 
<h3><a id="Dcoker_8"></a>å®‰è£…Dcoker</h3> 
<ol><li> <p>å®‰è£…è¿‡ç¨‹ä¸­å¿˜è®°æˆªå›¾äº†ï¼Œè¿™ç¯‡æ–‡ç« å†™å¾—å°±æŒºè¯¦ç»†çš„ï¼Œè·Ÿç€å®‰è£…åº”è¯¥ä¸ä¼šæœ‰å¤§é—®é¢˜: <a href="https://www.runoob.com/docker/windows-docker-install.html" rel="nofollow">https://www.runoob.com/docker/windows-docker-install.html</a></p> </li><li> <p>æ³¨æ„äº‹é¡¹ï¼š<br> 1ï¼‰ Windowså®¶åº­ç‰ˆéœ€è¦å…ˆå®‰è£…Docker ToolBoxã€‚é˜²æ­¢Windowsçš„å¹³å°è™šæ‹ŸåŒ–ä¸Docker ToolBoxäº’ç›¸å†²çªï¼š<strong>æ§åˆ¶é¢æ¿â€“&gt;ç¨‹åºå’ŒåŠŸèƒ½â€“&gt;å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½â€“&gt;WindowsåŠŸèƒ½â€“&gt;å…³é—­Virtual Machine Platformã€Windows Hyper-V platform</strong>ã€‚<br> 2ï¼‰ Windowsä¸“ä¸šç‰ˆåœ¨å®‰è£…ä¹‹å‰éœ€è¦åœ¨æœ¬åœ°å…ˆå¼€å¯Windowsè‡ªå¸¦çš„Hyper-VæœåŠ¡ï¼Œå¼€å¯åé‡å¯ç”µè„‘æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚<br> 3ï¼‰ VMwareçš„è™šæ‹ŸæœºæœåŠ¡ä¸Hyper-Vä¸èƒ½å¹¶å­˜ï¼Œè¿™æ—¶å€™ä½ å¼€å¯è™šæ‹Ÿæœºä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™ã€‚è§£å†³åŠæ³•â€¦åç»­å°è¯•äº†å†è¡¥å……å§â€¦<br> è¡¥å……ï¼šç”±äºç›®å‰ç”¨çš„Hyper-Vå’ŒVMwareçš„è™šæ‹ŸåŒ–æŠ€æœ¯æ— æ³•å…¼å®¹ï¼Œè¿˜æ˜¯åˆ†å¼€ç”¨å§â€¦â€¦å…¶ä»–äººçš„ç­”æ¡ˆä¹Ÿæ˜¯å¯åŠ¨çš„æ—¶å€™é€‰æ‹©åŠ è½½Hyper-Vè¿˜æ˜¯VMwareï¼Œæ—¢ç„¶ä¸èƒ½åŒæ—¶ç”¨å°±éœ€è¦ç”¨è°å†å¼€å§ï¼Œä½†æ˜¯çœ‹åˆ°VMwareçš„<a href="https://blogs.vmware.com/workstation/2020/01/vmware-workstation-tech-preview-20h1.html" rel="nofollow">20H1</a>å¥½åƒæ”¯æŒåŒæ—¶ä½¿ç”¨ï¼ŒæœŸå¾…åé¢çš„ç‰ˆæœ¬å§ã€‚<br> <img src="https://images2.imgbox.com/f6/b3/OKKU7Bjd_o.png" alt="VMwareçš„æŠ¥é”™" width="400"><img src="https://images2.imgbox.com/24/98/tKdV4lZc_o.png" alt="VMware20H1" width="700"></p> </li><li> <p>Dcoker æˆåŠŸå®‰è£…åï¼Œä½¿ç”¨<code>dcoker --version</code>æŸ¥çœ‹å¯å®‰è£…çš„Dcoekrç‰ˆæœ¬ï¼ŒéªŒè¯Dockeræ˜¯å¦æˆåŠŸå®‰è£…ï¼š<br> <img src="https://images2.imgbox.com/d8/9f/osU6TdEu_o.png" alt="Dcockerå®‰è£…ç‰ˆæœ¬æµ‹è¯•" width="400"></p> </li></ol> 
<h3><a id="helloworld_21"></a>è¿è¡Œhello-world</h3> 
<ol><li>åœ¨CMDè¿è¡Œå‘½ä»¤<code>docker run hello-world</code> ï¼ŒæˆåŠŸè¿è¡Œçš„æƒ…å†µæˆªå›¾å¦‚ä¸‹ï¼š<br> <img src="https://images2.imgbox.com/a2/70/vPSTRlEc_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>å¦‚æœå‡ºç°æ‹‰å–è¶…æ—¶å¯¼è‡´å¤±è´¥çš„æƒ…å†µï¼Œä¸€èˆ¬æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå†æ¬¡è¿è¡Œè¯¥å‘½ä»¤å¯ä»¥æˆåŠŸï¼Œæˆ–è€…æœç´¢<strong>net/http: TLS handshake timeout</strong>æ›´æ¢å›½å†…çš„é•œåƒæºï¼š<br> <img src="https://images2.imgbox.com/cf/ea/c98eh7aW_o.png" alt="æ‹‰å–æŠ¥é”™"></li></ol> 
<h3><a id="java_26"></a>éƒ¨ç½²è‡ªå·±çš„javaåº”ç”¨</h3> 
<hr> 
<h4><a id="jar_28"></a>å‡†å¤‡å¯è¿è¡ŒjaråŒ…</h4> 
<p><strong>1. é¡¹ç›®ç»“æ„</strong><br> ç¼–å†™è‡ªå·±çš„javaåº”ç”¨ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„é¡¹ç›®(ä¹‹å‰å­¦javaå†™çš„ä»£ç é€»è¾‘å¯èƒ½ä¸å¤ªä¸¥è°¨å‡‘åˆç”¨å§)ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š<br> <img src="https://images2.imgbox.com/7f/5e/IfH9hZvB_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="300"><br> <strong>2. Server.java</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> tcp<span class="token punctuation">;</span>

<span class="token comment">/* æœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„in.txtæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶å‘out.txtä¸­å†™å…¥
 * å½“è¿æ¥æœåŠ¡å™¨çš„å®¢æˆ·ç«¯æ•°é‡è¾¾åˆ°5æ—¶ä¸å†æ¥å—è¿æ¥ï¼Œå…³é—­æœåŠ¡å™¨çš„socket */</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>DataInputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>File<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileOutputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>InputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>ServerSocket<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>Socket<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Scanner<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> client_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//åˆå§‹åŒ–å®¢æˆ·ç«¯è¿æ¥æ•°é‡</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> MAX_NUM <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">//å¯è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ä¸Šé™ä¸º5</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//flagç”¨äºè¡¨ç¤ºæ˜¯å¦æ¥å—è¿æ¥</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		
		ServerSocket server <span class="token operator">=</span> null<span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç›‘å¬6666ç«¯å£çš„æœåŠ¡å™¨Socket</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ERROR:In Server Socket Creation."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			e1<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Listening on port 6666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¾“å‡ºç›‘å¬ç«¯å£å·</span>

		<span class="token comment">/* è¾¾åˆ°ä¸€å®šæ•°é‡çš„å®¢æˆ·ç«¯è¿æ¥åæ‹’ç»è¿æ¥ï¼Œå¦åˆ™å§‹ç»ˆä¿æŒç›‘å¬è¿æ¥çŠ¶æ€ */</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 	
			<span class="token keyword">if</span> <span class="token punctuation">(</span>client_num <span class="token operator">==</span> MAX_NUM<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>		
				flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
				Socket socket <span class="token operator">=</span> null<span class="token punctuation">;</span>	<span class="token comment">// åˆ›å»ºæœåŠ¡äºå½“å‰è¿æ¥çš„socket</span>
				<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
					socket <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	 <span class="token comment">// æ¥å—ä¸€ä¸ªå®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span>
					client_num<span class="token operator">++</span><span class="token punctuation">;</span>
					
					System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Client "</span> <span class="token operator">+</span> client_num <span class="token operator">+</span> <span class="token string">" connected"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºè¿æ¥çš„å®¢æˆ·å·</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				serverThread thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">serverThread</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span>client_num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹è¿›è¡ŒæœåŠ¡</span>
				thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼€å¯æœåŠ¡çº¿ç¨‹</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">/*å…³é—­æœåŠ¡å™¨socketï¼Œä¸å†æ¥å—è¿æ¥è¯·æ±‚ï¼Œä½†æ˜¯è¿˜æœ‰æœªå®Œæˆå·¥ä½œçš„æœåŠ¡çº¿ç¨‹*/</span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// å½“è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡è¾¾åˆ°5æ—¶å…³é—­æ•´ä¸ªæœåŠ¡å™¨</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Max connection,server closed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">serverThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> client_num<span class="token punctuation">;</span><span class="token comment">// æ¯ä¸ªæœåŠ¡çº¿ç¨‹æ‰€æœåŠ¡çš„å®¢æˆ·åºå·</span>
	<span class="token keyword">private</span> Socket socket<span class="token punctuation">;</span><span class="token comment">// æ¯ä¸ªæœåŠ¡çº¿ç¨‹ç§æœ‰çš„socket</span>

	<span class="token keyword">public</span> <span class="token function">serverThread</span><span class="token punctuation">(</span>Socket socket<span class="token punctuation">,</span><span class="token keyword">int</span> client_num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>client_num <span class="token operator">=</span> client_num<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			String path <span class="token operator">=</span> <span class="token string">"out.txt"</span><span class="token punctuation">;</span>
			<span class="token keyword">byte</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			InputStream in <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¾“å…¥æ•°æ®æµ</span>
			DataInputStream dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span> 
			Scanner scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			File file2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å†™å…¥æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶</span>
	        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file2<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
	                file2<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	            <span class="token punctuation">}</span>
	        <span class="token punctuation">}</span>
	        FileOutputStream fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	        
	        <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>           
	        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
                fos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token punctuation">}</span>
	        
			<span class="token comment">//å†™å®Œæ•°æ®åå…³é—­ç›¸å…³çš„æµ</span>
			scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\tSocket "</span> <span class="token operator">+</span> client_num <span class="token operator">+</span> <span class="token string">" closed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span>  e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>3. Client.java</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> tcp<span class="token punctuation">;</span>
<span class="token comment">/*å®¢æˆ·ç«¯å‘6666å·ç«¯å£å‘èµ·è¿æ¥è¯·æ±‚ï¼Œä¼ è¾“in.txtæ–‡ä»¶å†…å®¹*/</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>BufferedInputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>ByteArrayOutputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileInputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>OutputStream<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>Socket<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Scanner<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		Socket socket <span class="token operator">=</span> null<span class="token punctuation">;</span>
		Scanner scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span> <span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//ç”¨äºè¯»å–æ–‡ä»¶æµä¸­çš„å†…å®¹   </span>
		String path <span class="token operator">=</span> <span class="token string">"in.txt"</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span><span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Conneted to server."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			
			OutputStream out  <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// å®¢æˆ·ç«¯çš„è¾“å‡ºæ•°æ®æµ</span>
			<span class="token comment">//æ–‡ä»¶--ã€‹ç¼“å†²--ã€‹å­—èŠ‚æµ--ã€‹å­—èŠ‚æ•°ç»„--ã€‹ç”±socketçš„è¾“å‡ºæµå‘é€</span>
			<span class="token comment">//ä»æ–‡ä»¶è¯»å–æ•°æ®ä¸ºå­—èŠ‚æµ</span>
			BufferedInputStream in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
	        ByteArrayOutputStream output <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
	     	     
	        <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      
	        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>size <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      
	            output<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>      
	        <span class="token punctuation">}</span>      
	        in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
	     
	        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> content <span class="token operator">=</span> output<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å°†è¯»å–çš„å­—èŠ‚æµè½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„      </span>
	        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Sent bytes :"</span> <span class="token operator">+</span> content<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>   
            
	        <span class="token comment">//å®¢æˆ·ç«¯è¾“å…¥writeä¹‹åå‘æœåŠ¡å™¨å‘é€æ•°æ®</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"write"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{<!-- --></span>
				out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å­—èŠ‚æ•°ç»„å†™åˆ°è¾“å‡ºæµä¸­è¿›è¡Œå‘é€</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">//å®¢æˆ·ç«¯è¾“å…¥endå…³é—­å½“å‰clientçš„socketè¿æ¥</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\tSocket closed."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>4. å°†æœåŠ¡ç«¯ä»£ç å¯¼å‡ºä¸ºå¯è¿è¡ŒjaråŒ…</strong></p> 
<ul><li>ç¼–è¯‘ä¸¤ä¸ªç±»å¹¶é¡ºåˆ©è¿è¡Œåå¯¼å‡ºï¼Œåœ¨Eclipseä¸­ï¼ŒæŒ‰ç…§<code>File--&gt;Export--&gt;è¾“å…¥jar--&gt;é€‰æ‹©Runnable JAR file--&gt;Next</code>çš„é¡ºåºï¼š<br> <img src="https://images2.imgbox.com/5d/66/PMby7Y9i_o.png" alt="å¯¼å‡ºå¯è¿è¡ŒjaråŒ…" width="600"></li><li>é€‰æ‹©ä½ è¦å¯¼å‡ºçš„ç±»å’Œä¿å­˜çš„ä½ç½®ï¼Œé€‰ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹æ–¹ä¾¿åé¢æ•´ç†Dockeréœ€è¦çš„æ–‡ä»¶ï¼Œä¸ºä½ å¯¼å‡ºçš„åŒ…è‡ªå®šä¹‰åå­—ï¼š<br> <img src="https://images2.imgbox.com/6f/40/09LJ37a1_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="600"></li><li>æç¤ºï¼šå¦‚æœæƒ³æµ‹è¯•å¯¼å‡ºjaråŒ…æ˜¯å¦æˆåŠŸï¼Œåˆ™åŒæ—¶å¯¼å‡ºclientçš„jaråŒ…ï¼Œåœ¨cmdä¸­ä½¿ç”¨<code>java -jar server-demo1.jar(ä½ çš„jaråŒ…åç§°)</code>ï¼ŒåŒæ—¶æ‰“å¼€å¦ä¸€ä¸ªcmdä½¿ç”¨<code>java -jar client-demo1.jar(ä½ çš„jaråŒ…åç§°)</code>æµ‹è¯•å¯¼å‡ºåçš„æƒ…å†µã€‚</li><li>åœ¨è¿è¡Œå®¢æˆ·ç«¯ä¹‹å‰è®°å¾—åˆ›å»ºè‡ªå·±çš„<code>in.txt</code>å†™å…¥å†…å®¹ï¼Œåœ¨eclipseé‡Œé¢å®¢æˆ·ç«¯è¿è¡Œçš„æƒ…å†µå’Œå®éªŒç”¨çš„in.txtå†…å®¹å¦‚ä¸‹:<br> <img src="https://images2.imgbox.com/fb/88/QXQSxjzn_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="500"></li></ul> 
<h4><a id="Dockerjava_205"></a>ä¸ºDockerå®¹å™¨å‡†å¤‡javaç¯å¢ƒ</h4> 
<ol><li>ç”±äºæœ¬é¡¹ç›®åªéœ€ä¸€ä¸ªå¯ä»¥è¿è¡Œjvmçš„ç¯å¢ƒï¼Œæ‰€ä»¥ç†è®ºä¸Šåªéœ€è¦jreçš„é•œåƒä¹Ÿèƒ½è¿è¡Œï¼Œä¸ºäº†åé¢çš„å¼€å‘æ–¹ä¾¿æˆ‘æ‹‰å–äº†ä¸€ä¸ªjdk8çš„é•œåƒï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠè‡ªå·±æœºå™¨ä¸Šçš„ç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒã€‚è¿è¡Œ<code>docker search jdk</code>å¯ä»¥çœ‹åˆ°ä¸€äº›åˆ«äººå·²ç»æ‰“åŒ…å¥½çš„é•œåƒï¼Œæˆ‘é€‰äº†Oracleçš„jdk8ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªåœ¨<strong>gmaslowski</strong>åº“é‡Œçš„ï¼š<br> <img src="https://images2.imgbox.com/72/2a/506JbcVo_o.png" alt="æœç´¢å¯ç”¨jdk" width="800"></li><li>ä½¿ç”¨<code>docker pull gmaslowski/jdk</code>æ‹‰å–åˆ°æœ¬åœ°ï¼Œ<code>docker images</code>æŸ¥çœ‹æœ¬åœ°ç°åœ¨æœ‰çš„é•œåƒï¼š<br> <img src="https://images2.imgbox.com/7c/0f/WGHsFf9m_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="600"></li></ol> 
<h4><a id="_210"></a>æ„å»ºé•œåƒå¹¶è¿è¡Œ</h4> 
<p><strong>1. ä¸ºé•œåƒåˆ›å»ºDockerfile</strong><br> åœ¨å¯¼å‡ºjaråŒ…çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªDcokerfile.txtï¼Œç”¨äºæ„å»ºé•œåƒï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-text">#æŒ‡å®šä»¥è¯¥jdkä¸ºåŸºç¡€é•œåƒæ¥æ„å»ºè¿™ä¸ªappçš„é•œåƒ
FROM gmaslowski/jdk

#WORKDIRç”¨äºæŒ‡å®šå®¹å™¨çš„çš„ä¸€ä¸ªç›®å½•ï¼Œå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ä¼šåœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œ
WORKDIR /

#å°†å½“å‰çš„æµ‹è¯•jarå¤åˆ¶åˆ°å®¹å™¨çš„æ ¹ç›®å½•ä¸‹
ADD . /

#æš´éœ²å®¹å™¨ç«¯å£ä¸º50051ï¼ŒDockeré•œåƒå‘ŠçŸ¥Dockerå®¿ä¸»æœºdockeré•œåƒç›‘å¬äº†50051ç«¯å£
EXPOSE 50051

#æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œçš„å‘½ä»¤
ENTRYPOINT ["java","-jar","server-demo1.jar"]
</code></pre> 
<p><strong>2.ä»Dcokerfileæ„å»ºé•œåƒ</strong></p> 
<ul><li>è¿›å…¥å­˜æœ‰Dockerfileçš„æ–‡ä»¶å¤¹ä¸­ï¼Œè¿è¡Œ<code>docker build -t server_demo1 -f ./Dockerfile.txt .</code>æ¥æ„å»ºé•œåƒï¼Œä¸è¦å¿˜è®°æœ€åçš„<code>.</code></li><li>å‘½ä»¤ä¸­<code>-t</code>å‚æ•°åé¢å†™ä½ è¦åˆ›å»ºçš„é•œåƒåç§°ï¼Œ<code>-f</code>åå†™Dockerfileï¼ŒDockerfileçš„ä½ç½®è¦ç›¸å¯¹äºä½ cmdå¯åŠ¨è·¯å¾„ã€‚<br> <img src="https://images2.imgbox.com/c7/99/ar6msY2n_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="600"></li><li>æ§åˆ¶å°è¾“å‡ºçš„éƒ½æ˜¯Dockerfileé‡Œè¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæœ€åå¯èƒ½ä¼šå‡ºç°å›¾ä¸­çš„<code>SECURITY WRNING</code>ï¼Œè¯´åœ¨windowsæ„å»ºé•œåƒæ—¶ç”¨äº†éwindowsçš„ä¸»æœºï¼Œåœ¨è¿™é‡Œå¹¶ä¸å½±å“è¿è¡Œï¼Œç•¥ã€‚</li></ul> 
<p><strong>3.è¿è¡Œå®¹å™¨</strong></p> 
<ul><li>ä½¿ç”¨<code>docker images</code>æŸ¥çœ‹é•œåƒï¼Œæ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„é•œåƒåç§°ï¼ˆæ²¡é”™çš„è¯å°±æ˜¯ä½ <code>-t</code>åé¢çš„åå­—â€¦ï¼‰</li><li>ä½¿ç”¨å‘½ä»¤<code>docker run -p 4000:6666 server_demo1</code>æ¥è¿è¡Œåˆ›å»ºå®¹å™¨å¹¶è¿è¡Œï¼Œ<code>-p</code>åšäº†ä¸€ä¸ªæŒ‡å®šçš„ç«¯å£æ˜ å°„ï¼Œå°†å¯¹å®¿ä¸»æœº<code>4000</code>å·ç«¯å£çš„è®¿é—®è½¬å‘åˆ°å®¹å™¨çš„<code>6666</code>å·ç«¯å£ã€‚è¿™é‡Œç«¯å£çš„é€‰å–æ˜¯å› ä¸ºå†™Serverç¨‹åºçš„æ—¶å€™å¼€å¯äº†6666å·ç«¯å£ï¼Œè€Œä¸»æœºçš„ç«¯å£åªè¦ä»65536ä¸ªé‡Œé€‰ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„ã€‚åˆ«å†™æˆå¤§å†™çš„Pï¼Œé‚£æ˜¯å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºç«¯å£ï¼Œå†™äº†çš„è¯å°±æ³¨æ„çœ‹æ˜ å°„åˆ°äº†å“ªä¸ªç«¯å£çµæ´»å¤„ç†ã€‚</li><li>é¦–å…ˆèµ·æœåŠ¡å™¨ï¼Œç„¶åç›´æ¥åœ¨Eclipseä¸­è¿è¡Œå®¢æˆ·ç«¯å°±è¡Œã€‚è¿™é‡Œæˆ‘ä¹‹å‰æƒ³å¾—å¤ªå¤æ‚ï¼Œè¿˜æƒ³åšä¸€ä¸ªå®¢æˆ·ç«¯çš„é•œåƒï¼Œç„¶åå°±é™·å…¥æ€ä¹ˆé€šä¿¡çš„é—®é¢˜ï¼ˆä¿®æ”¹å›ºå®šIPå’Œè‡ªå®šä¹‰æ¡¥æ¥ç½‘ç»œâ€¦â€¦ï¼‰ï¼Œå”‰ï¼Œè™½ç„¶èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œä½†è¿˜æ˜¯å­¦åˆ°äº†çŸ¥è¯†é¸­ï¼â€”â€”ä¸è¦åœ¨ddlå½“å¤©æ”¾é£è‡ªæˆ‘åœ°å‘æ•£ğŸ‘»ã€‚<br> <img src="https://images2.imgbox.com/15/93/W3jQFcC4_o.png" alt="è·‘ä¸€å“ˆï¼" width="600"></li><li>æ—¢ç„¶æˆ‘ä»¬åšäº†ç«¯å£æ˜ å°„ï¼Œå°±è¦æŠŠå®¢æˆ·ç«¯ä»£ç é‡Œè¿æ¥çš„æ—¶å€™ç«¯å£æ”¹æˆ<code>4000</code>ï¼Œè¿è¡Œæƒ…å†µå’Œå‰é¢æ‰“æˆjaråŒ…é‡Œè´´çš„ä¸€æ ·ã€‚</li><li>ä¸ºäº†æµ‹è¯•æ•°æ®æ˜¯å¦æˆåŠŸå‘é€ï¼Œè¿˜éœ€è¦æŸ¥çœ‹å®¹å™¨å†…éƒ¨æ–‡ä»¶çš„æ¥æ”¶æƒ…å†µã€‚è¿è¡Œå‘½ä»¤<code>docker ps -a</code>æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨è¿è¡Œæƒ…å†µï¼Œæ‰¾åˆ°<code>serve_demov1</code>çš„<code>å®¹å™¨ID</code>ï¼Œå†<code>docker exec -it å®¹å™¨ID /bin/sh</code>è¿›å…¥å®¹å™¨å†…éƒ¨ã€‚è¿™ä¸ªé—®é¢˜ä¸Šå¤§éƒ¨åˆ†äººä¼šè¯´ä½¿ç”¨â€œ<code>execâ€¦â€¦/bin/bash</code>â€,æˆ–è€…attachï¼Œä½†æ˜¯æˆ‘è¿™å°±æ— æ•ˆï¼Œåˆæ­¥äº†è§£æ˜¯ç”±äºé•œåƒæ˜¯åŸºäºalpineæ„å»ºçš„ï¼Œæ‰€ä»¥æ²¡æœ‰è¿™ä¸ªbashæ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯shï¼Ÿå¥½çš„ï¼Œå¦‚æœä½ ç”¨è¿™ä¸€æ¡æ‰¾ä¸åˆ°å°±æ¢<code>docker exec -it å®¹å™¨ID /bin/bash</code>ğŸ¤¥<br> <img src="https://images2.imgbox.com/e2/af/Zy0fdHML_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="600"><br> åˆ°è¿™é‡Œå°±åšå®Œäº†ï¼Œä¸‹æ¬¡è¿˜æ˜¯è¦åšå®¹å™¨é—´çš„é€šä¿¡ï¼</li></ul> 
<h3><a id="_244"></a>é™„å½•</h3> 
<ul><li>è¿‡ç¨‹ä¸­é¢‘ç¹ä½¿ç”¨åˆ°çš„åŸºæœ¬dockerå‘½ä»¤æœ‰ï¼š</li></ul> 
<ol><li><code>docker images</code>æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ</li><li><code>docker ps</code>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‘½ä»¤ä»…æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨</li><li><code>docker ps -a</code>æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨è¿è¡Œæƒ…å†µ</li><li><code>docker build -t é•œåƒåç§° -f åˆ›å»ºç”¨çš„Dockerfile .</code>ç”¨äºä»è¯¥Dockerfileæ„å»ºé•œåƒ</li><li><code>docker run -p ä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£ é•œåƒåç§°</code>é€šè¿‡ç«¯å£æ˜ å°„ï¼Œåœ¨è¿è¡Œé•œåƒçš„åŒæ—¶åˆ›å»ºåŒåå®¹å™¨å¹¶è¿è¡Œ</li><li><code>docker stop å®¹å™¨ID</code>åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå…ˆåœæ­¢æ‰èƒ½åˆ é™¤</li><li><code>docker start å®¹å™¨ID</code>é‡æ–°å¯åŠ¨å·²ç»åœæ­¢è¿è¡Œçš„å®¹å™¨</li><li><code>docker rm container å®¹å™¨ID</code>åˆ é™¤å®¹å™¨</li><li><code>docker rmi é•œåƒID</code>åˆ é™¤é•œåƒï¼Œåœ¨åˆ é™¤é•œåƒå‰è¦å…ˆåˆ é™¤æœ‰ä»¥æ¥çš„é•œåƒï¼Œä¸¾ä¾‹ï¼šå…ˆåˆ server_demo1å†åˆ jdk</li></ol> 
<ul><li>å­¦ä¹ å‚è€ƒ</li></ul> 
<ol><li><a href="https://docs.docker.com/engine/reference/run/" rel="nofollow">Dockerå®˜æ–¹æ–‡æ¡£</a></li><li><a href="http://www.dockerinfo.net/dockerfile%E4%BB%8B%E7%BB%8D" rel="nofollow">Dockerfileå­¦ä¹ </a></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d8e1c348e480e188e4bb5b30fd310c6/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">tf.estimator.Estimatorçš„ä½¿ç”¨</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/da524825dd40486eff01726cb123bfd1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Gitç®¡ç†é¡¹ç›®,gitçš„åŸºæœ¬æ“ä½œè¯­æ³•åŠ æ³¨é‡Š</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>