<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Allatori混淆SpringBoot项目代码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Allatori混淆SpringBoot项目代码" />
<meta property="og:description" content="Allatori简介 Allatori是一个Java 混淆器，它属于第二代混淆器，因此它能够全方位的保护你的知识产权。 Allatori具有以下几种保护方式：命名混淆，流混淆，调试信息混淆，字符串混淆，以及水印技术。对于教育和非商业项目来说这个混淆器是免费的。支持war和jar文件格式，并且允许对需要混淆代码的应用程序添加有效日期。 有项目需要对代码进行保护，比较初级的方案就是对代码进行混淆，打包之后的文件进行反编译后，就可以看到效果。
Allatori官方文档
springBoot中使用Allatori 项目环境
本项目为基于springBoot搭建的父子结构项目目标
对项目中的后台核心代码（java）尽可能地进行混淆，保护源代码，且不能影响服务的正常运行及使用需解决问题 因为项目是web项目，少不了的会有对象注入、方法调用、参数映射等。而混淆时会对类名、方法名、参数名等进行重命名，重命名后会影响对象在Spring容器中的注册、方法调用和参数映射的异常；项目是父子结构，因此 maven 打包时会将子项目打包为依赖的jar包进行依赖，怎么对依赖的jar进行混淆；混淆后的服务如何正常使用，以及错误的排查 使用 在pom文件中引入依赖 里边的配置我已经标了详细的注释，注意根据自己的具体环境做调整
&lt;!-- allatori 代码混淆 start --&gt; &lt;plugin&gt; &lt;!-- resouces拷贝文件插件 --&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;!-- 执行这个插件的时候执行申明的所有phase --&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;copy-and-filter-allatori-config&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;copy-resources&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;!-- 指明文件的输出路径 即混淆后的文件的输出路径 ${basedir}：是项目的根目录 即与src同级的目录 --&gt; &lt;outputDirectory&gt;${basedir}/target&lt;/outputDirectory&gt; &lt;resources&gt; &lt;resource&gt; &lt;!-- 项目的resources目录，一般用于存放配置文件 --&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;!-- 代码混淆时所依据的配置文件 可以看出，我放在了resources目录下 这个文件将会被拷贝到 ${basedir}/target 目录下--&gt; &lt;include&gt;allatori.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f7b82cc5b2eaf761a2bfea9363400bbb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-20T11:52:50+08:00" />
<meta property="article:modified_time" content="2021-03-20T11:52:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Allatori混淆SpringBoot项目代码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Allatori_0"></a>Allatori简介</h3> 
<p>Allatori是一个Java 混淆器，它属于第二代混淆器，因此它能够全方位的保护你的知识产权。 Allatori具有以下几种保护方式：<strong>命名混淆，流混淆，调试信息混淆，字符串混淆，以及水印技术</strong>。对于教育和非商业项目来说这个混淆器是免费的。支持war和jar文件格式，并且允许对需要混淆代码的应用程序添加有效日期。 有项目需要对代码进行保护，比较初级的方案就是对代码进行混淆，打包之后的文件进行反编译后，就可以看到效果。<br> <a href="http://www.allatori.com/doc.html" rel="nofollow">Allatori官方文档</a></p> 
<h3><a id="springBootAllatori_4"></a>springBoot中使用Allatori</h3> 
<ul><li>项目环境<br> 本项目为基于springBoot搭建的父子结构项目</li><li>目标<br> 对项目中的后台核心代码（java）尽可能地进行混淆，保护源代码，且不能影响服务的正常运行及使用</li><li>需解决问题</li></ul> 
<ol><li>因为项目是web项目，少不了的会有对象注入、方法调用、参数映射等。而混淆时会对类名、方法名、参数名等进行重命名，重命名后会影响对象在Spring容器中的注册、方法调用和参数映射的异常；</li><li>项目是父子结构，因此 maven 打包时会将子项目打包为依赖的jar包进行依赖，怎么对依赖的jar进行混淆；</li><li>混淆后的服务如何正常使用，以及错误的排查</li></ol> 
<h4><a id="_14"></a>使用</h4> 
<h5><a id="pom_15"></a>在pom文件中引入依赖</h5> 
<p>里边的配置我已经标了详细的注释，注意根据自己的具体环境做调整</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- allatori 代码混淆  start --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- resouces拷贝文件插件 --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-resources-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- 执行这个插件的时候执行申明的所有phase --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>copy-and-filter-allatori-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>copy-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                 <span class="token comment">&lt;!-- 指明文件的输出路径 即混淆后的文件的输出路径 ${basedir}：是项目的根目录 即与src同级的目录 --&gt;</span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>${basedir}/target<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                         <span class="token comment">&lt;!-- 项目的resources目录，一般用于存放配置文件 --&gt;</span>
                         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                             <span class="token comment">&lt;!-- 代码混淆时所依据的配置文件 可以看出，我放在了resources目录下   这个文件将会被拷贝到 ${basedir}/target 目录下--&gt;</span>
                             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>allatori.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
                         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- 代码混淆打包插件 --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.codehaus.mojo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>exec-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.6.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>run-allatori<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>exec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executable</span><span class="token punctuation">&gt;</span></span>java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executable</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arguments</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>-Xms128m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>-Xmx512m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>-jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
             <span class="token comment">&lt;!-- 指定引用的allatori的jar包位置，这里把jar包放在了根目录下的lib目录里 --&gt;</span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>${basedir}/lib/allatori.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
             <span class="token comment">&lt;!-- 指定代码混淆时的配置文件，因为是混淆指定的是jar包，jar包位置在target下,所以我们的allatori.xml也需要拷贝到该目录下（上面的拷贝文件插件已经帮我们做了这些事） --&gt;</span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>argument</span><span class="token punctuation">&gt;</span></span>${basedir}/target/allatori.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>argument</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arguments</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- allatori 代码混淆  end --&gt;</span>
</code></pre> 
<ul><li>jar包<br> 从上面可以看出，我们从外部引入了allatori.jar，注意路径为<code>${basedir}/lib/allatori.jar</code>在项目根目录,也就是与<code>src</code>同级别的目录下<br> <img src="https://images2.imgbox.com/b6/e5/QFNPK8GO_o.png" alt="在这里插入图片描述"><br> jar包可以从官网获取，也可以<a href="https://download.csdn.net/download/HELLOMRP/15972745">点这里一键获取</a></li><li>配置文件<br> 即上面提到的<code>allatori.xml</code>，下面是配置的详细内容</li></ul> 
<h5><a id="allatorixml__86"></a>allatori.xml 配置</h5> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>config</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定混淆的jar以及输出 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span><span class="token punctuation">&gt;</span></span>
    	<span class="token comment">&lt;!-- boo-admin.jar是要混淆的jar; boo-admin-obfuscated.jar是混淆之后的jar --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jar</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../target/boo-admin.jar<span class="token punctuation">"</span></span> <span class="token attr-name">out</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../target/boo-admin-obfuscated.jar<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
       	<span class="token comment">&lt;!-- 混淆指定的jar 可以多个 注意路径  这样就可以混淆依赖的jar了（子项目）--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jar</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../boo-system/target/boo-system-4.3.1.jar<span class="token punctuation">"</span></span>
             <span class="token attr-name">out</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../boo-system/target/boo-system-4.3.1-boo.jar<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> 

        <span class="token comment">&lt;!--&lt;dir in="in-dir" out="out-dir"/&gt;  混淆文件夹下的所有jar --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- 保持名称不被替换 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-names</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 所有方法名称不变  parameters="keep" 表示方法的形参也不变 方法形参混淆后会导致参数映射获取失败 --&gt;</span>
        <span class="token comment">&lt;!--&lt;method template="*(**)" parameters="keep" /&gt;--&gt;</span>
        <span class="token comment">&lt;!-- 控制层 方法名、方法、形参 不混淆 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class com.boo.*.controller.*<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>method</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>protected+ *(**)<span class="token punctuation">"</span></span> <span class="token attr-name">parameters</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>keep<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- 配置 访问修饰符为protected及以上的访问级别的类名 以及 类中的方法名、参数名不被混淆  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>protected+<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>protected+<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>method</span> <span class="token attr-name">access</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>protected+<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-names</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&lt;property name="log-file" value="../target/log.xml"/&gt;--&gt;</span>

	<span class="token comment">&lt;!-- 排除指定的类  不混淆 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ignore-classes</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 配置启动类不被混淆  保证springBoot可以正常启动 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *Application*<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!-- 第三方的 不需要混淆 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *springframework*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *shardingjdbc*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *jni*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *alibaba*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *persistence*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *apache*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class *mybatis*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!-- 排除如下包下的类--&gt;</span>
        <span class="token comment">&lt;!--&lt;class template="class com.boo.*.mapper.*" /&gt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class com.boo.*.domain.*<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>  <span class="token comment">&lt;!-- 实体类存在映射关系  混淆后会映射不上 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ignore-classes</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>watermark</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>secure-key-to-extract-watermark<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Customer: boo<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- 水印 --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>上面是一些基础而且常用的配置，其他还有很多功能的配置，根据自己的项目做调整；你也可以参考<a href="http://www.allatori.com/doc.html" rel="nofollow">Allatori官方文档</a>，最终还是以官方文档为准</p> 
<h5><a id="_144"></a>打包</h5> 
<p>maven打包命令<code>mvn clean package</code><br> 看到如下打印即说明混淆成功了<br> <img src="https://images2.imgbox.com/46/13/KaZNchLC_o.png" alt="在这里插入图片描述"><br> target目录下内容<br> <img src="https://images2.imgbox.com/d6/6c/9kfgKS7c_o.png" alt="在这里插入图片描述"><br> 混淆前后的代码内容大概就是这样婶儿的（举个柿子）：<br> <img src="https://images2.imgbox.com/59/1d/ffjDlz5r_o.png" alt="混淆前"><br> <img src="https://images2.imgbox.com/50/e8/qNzO0qk0_o.png" alt="混淆后"></p> 
<ul><li><strong>问题</strong><br> 因为是父子项目，混淆后的jar并不能直接运行，因为它只是一个子项目的打包结果，真正最终的jar为<code>boo-admin.jar</code>（可运行），但是<code>boo-admin.jar</code>中的内容并没有被混淆。</li><li><strong>解决</strong>：</li></ul> 
<ol><li>将<code>boo-admin.jar</code>与<code>boo-admin-obfuscated.jar</code>分别解压</li><li>用<code>boo-admin-obfuscated</code>中的文件（已混淆）覆盖<code>boo-admin</code>中的文件（未混淆）[注意目录对应]</li><li>然后再将<code>boo-admin</code>打包为jar （打包方式参考<code>jar包解压后再打包为jar</code>）,此时<code>boo-admin.jar</code>中的代码为混淆后的代码</li><li>类似的方式还可以替换<code>boo-admin</code>中依赖的jar包（子项目依赖）</li></ol> 
<p>此时<code>boo-admin.jar</code> 才是最终的经过混淆保护的jar,就可以拿去部署服务啦。</p> 
<h4><a id="_168"></a>拓展</h4> 
<ul><li>前端静态文件js、css的压缩<br> 这里使用的是 <strong>YUI Compressor Maven压缩插件</strong><br> 使用：<br> 在pom文件中引入这个插件，并进行相关的配置（参考），代码如下：</li></ul> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- YUI Compressor Maven 压缩插件  前端静态资源混淆压缩    start --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- YUI Compressor Maven压缩插件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.alchim31.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>yuicompressor-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>compress<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 读取js,css文件采用UTF-8编码 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 不显示js可能的错误 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jswarn</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jswarn</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 是否混淆 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nomunge</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nomunge</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 若存在已压缩的文件，会先对比源文件是否有改动  有改动便压缩，无改动就不压缩 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>force</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>force</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 在指定的列号后插入新行 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>linebreakpos</span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>linebreakpos</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 压缩之前先执行聚合文件操作 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preProcessAggregates</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>preProcessAggregates</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 压缩后保存文件后缀 无后缀 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nosuffix</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nosuffix</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 源目录，即需压缩的根目录 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sourceDirectory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sourceDirectory</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 输出目录，即压缩后的目录--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>target/classes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>force</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>force</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 压缩js和css文件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.js<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.css<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 以下目录和文件不会被压缩 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/*.min.js<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/*.min.css<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- YUI Compressor Maven 压缩插件  前端静态资源混淆压缩    end --&gt;</span>
</code></pre> 
<p>之后再进行maven + package打包<br> 出现类似下面的打印就说明静态文件已经被压缩了<br> <img src="https://images2.imgbox.com/cd/a6/WZVV0mor_o.png" alt="在这里插入图片描述"><br> <a href="https://blog.csdn.net/yanmh007/article/details/91444563">参考博客</a></p> 
<p><img src="https://images2.imgbox.com/3b/80/PZvpdung_o.png" alt="在这里插入图片描述"><br> 以上内容也是自己最近学习的结果，在此只给各位大佬一些参考，重在学习交流；<br> 若有什么不对的地方还请欢迎指正<br> 若有什么疑问或者想法，咱们评论区见</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aa25884dcfb7599f9c2eda78b9ed3862/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">matlab link offset,确定字段在结构体内的偏移量</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3dff476a4f430aaba1581023735bdef7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">php yield协程,PHP 协程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>