<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>redis学习之java类对redis库操作的简单封装 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="redis学习之java类对redis库操作的简单封装" />
<meta property="og:description" content="继上一篇安装好redis后，本篇将封装java类以方便对redis进行各种操作，因为我也是新手正在学习，只是很简单的封装。先贡献一张DB图，好让大家对各种DB整体有个了解。
通过上图知道，Redis与Memcache放在同一层级，说明他们之间有很多相似之处，另外redis在队列和栈上，数据持久化等个人觉得比MemCache优点多，两者之间的雷同网上很多学习资料，不再阐述。下面开始学习java类对Redis操作的简单封装：
一、准备工作
a.开启Redis服务(我的是在Ubuntu下)
执行命令redis-server成功开启服务（PS：执行redis-server &amp;命令可以后台运行服务，很多时候这点很必要）
b.测试连接
在Ubuntu上执行命令ifconfig查看服务IP，我的是192.168.161.130，如图：
测试连接：在ubuntu上可以ping通服务iP，现在我在Windows下看是否可ping通(redis服务的防火墙关掉)，如图：
确认可以ping通就可以开始下一步了
二、java封装工作
a、 先来看下java类整体目录结构
b、贴出代码：
接口类IRedis.java：
package redis; import java.util.List; import java.util.Map; import java.util.Set; public interface IRedis { //String void set(String key,String value) throws Exception;//添加 String get(String key) throws Exception;//获取 //set void sadd(String key,Set&lt;String&gt; value) throws Exception;//添加 void srem(String key,Set&lt;String&gt; value) throws Exception;//删除 Long scard(String key) throws Exception;//获取key对应的value总数 Set&lt;String&gt; smembers(String key) throws Exception;//获取key对应的所有value boolean sismember(String key,String value) throws Exception;//判断是否存在 String srandmember(String key) throws Exception;//随机获取数据 //map void hmset(String key,Map&lt;String,String&gt; map) throws Exception;//添加 Long hlen(String key) throws Exception;//mapkey个数 Set&lt;String&gt; hkeys(String key) throws Exception;//map中所有键值 List&lt;String&gt; hvals(String key) throws Exception;//map中所有value List&lt;String&gt; hmget(String key,String s1,String s2) throws Exception;//取出map中的name、password字段值 void hdel(String key,String s) throws Exception;//删除map中的某一个键值 password //list void lpush(String key,List&lt;String&gt; list) throws Exception;//添加 List&lt;String&gt; lrange(String key,Long start,Long end) throws Exception;//获取 void del(String key) throws Exception;//删除 //append void append(String key,String value) throws Exception;//追加 } 实现类：Redis." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8e953e4e65ca0cfc85a32c74bbba5c7b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-05-19T21:18:58+08:00" />
<meta property="article:modified_time" content="2016-05-19T21:18:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">redis学习之java类对redis库操作的简单封装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:14px">继上一篇安装好<span style="font-family:Calibri">redis</span>后，本篇将封装<span style="font-family:Calibri">java</span>类以方便对<span style="font-family:Calibri">redis</span>进行各种操作，因为我也是新手正在学习，只是很简单的封装。先贡献一张DB图，好让大家对各种DB整体有个了解。</span></p> 
<p><span style="font-size:14px"> <img alt="" src="https://images2.imgbox.com/1f/68/uAY0tJB4_o.png"></span></p> 
<p><span style="font-size:14px">通过上图知道，Redis与Memcache放在同一层级，说明他们之间有很多相似之处，另外redis在队列和栈上，数据持久化等个人觉得比MemCache优点多，两者之间的雷同网上很多学习资料，不再阐述。下面开始学习java类对Redis操作的简单封装：</span></p> 
<p><span style="font-size:14px; color:#ff0000"><strong>一、准备工作</strong></span></p> 
<p><span style="font-size:14px">       <strong>a.开启Redis服务(我的是在Ubuntu下)</strong></span></p> 
<p><span style="font-size:14px">         执行命令redis-server成功开启服务（<span style="color:#ff0000">PS：执行redis-server &amp;命令可以后台运行服务，很多时候这点很必要</span>）</span></p> 
<p><span style="font-size:14px">          <img alt="" src="https://images2.imgbox.com/01/6d/xpzIrb9W_o.png"></span></p> 
<p><span style="font-size:14px"> </span></p> 
<p><span style="font-size:14px">  <strong>b.测试连接</strong></span></p> 
<p><span style="font-size:14px">     在Ubuntu上执行命令ifconfig查看服务IP，我的是192.168.161.130，如图：</span></p> 
<p><span style="font-size:14px">      <img alt="" src="https://images2.imgbox.com/44/cc/fci9oZTy_o.png"></span></p> 
<p><span style="font-size:14px">  测试连接：在ubuntu上可以ping通服务iP，现在我在Windows下看是否可ping通(redis服务的防火墙关掉)，如图：</span></p> 
<p><span style="font-size:14px">    <img alt="" src="https://images2.imgbox.com/dd/56/lUiV2mrP_o.png"></span></p> 
<p><span style="font-size:14px">确认可以ping通就可以开始下一步了</span></p> 
<p><span style="font-size:14px; color:#ff0000"><strong></strong></span> </p> 
<p><span style="font-size:14px; color:#ff0000"><strong>二、java封装工作</strong></span></p> 
<p><span style="color:#ff0000"><span style="font-size:14px"><strong>  <span style="color:#000000">a、</span> <span style="color:#000000">先来看下java类整体目录结构</span></strong></span></span></p> 
<p><span style="font-size:14px">    <img alt="" src="https://images2.imgbox.com/0e/ad/qQ8b3jir_o.png"></span></p> 
<p><span style="font-size:14px"><strong>b、贴出代码：</strong></span></p> 
<p><span style="font-size:14px">     <strong>接口类IRedis.java</strong>：</span></p> 
<p><span style="font-size:14px">     </span></p> 
<pre><code class="language-java">package redis;

import java.util.List;
import java.util.Map;
import java.util.Set;

public interface IRedis {
	//String
	void set(String key,String value) throws Exception;//添加
	String get(String key) throws Exception;//获取
	//set
	void sadd(String key,Set&lt;String&gt; value) throws Exception;//添加
	void srem(String key,Set&lt;String&gt; value) throws Exception;//删除
	Long scard(String key) throws Exception;//获取key对应的value总数
	Set&lt;String&gt; smembers(String key) throws Exception;//获取key对应的所有value
	boolean sismember(String key,String value) throws Exception;//判断是否存在
	String srandmember(String key) throws Exception;//随机获取数据
	//map
	void hmset(String key,Map&lt;String,String&gt; map) throws Exception;//添加
	Long hlen(String key) throws Exception;//mapkey个数
	Set&lt;String&gt; hkeys(String key) throws Exception;//map中所有键值
	List&lt;String&gt; hvals(String key) throws Exception;//map中所有value
	List&lt;String&gt; hmget(String key,String s1,String s2) throws Exception;//取出map中的name、password字段值
	void hdel(String key,String s) throws Exception;//删除map中的某一个键值 password  
	//list
	void lpush(String key,List&lt;String&gt; list) throws Exception;//添加
	List&lt;String&gt; lrange(String key,Long start,Long end) throws Exception;//获取
	void del(String key) throws Exception;//删除
	
	//append
	void append(String key,String value) throws Exception;//追加
	
}
</code></pre> 
<p> </p> 
<p>    <strong>实现类：Redis.java</strong>:</p> 
<p>  </p> 
<pre><code class="language-java">package redis;

import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;

import redis.clients.jedis.Jedis;

public class Redis implements IRedis {

	@Override
	public void sadd(String key, Set&lt;String&gt; value) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		for(String str: value){
			jedis.sadd(key, str);
		}
//		Iterator&lt;String&gt; it = value.iterator();  
//		while (it.hasNext()) {  
//		 String str = it.next();
//		 System.out.println(str);
//		 jedis.sadd(key,str);  
//		}  

	}

	@Override
	public void set(String key, String value) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		jedis.set(key,value);
		
	}

	@Override
	public void srem(String key, Set&lt;String&gt; value) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		Iterator&lt;String&gt; it = value.iterator();
		while(it.hasNext()){
			String str = it.next();
			jedis.srem(key, str);
		}
	}

	@Override
	public String get(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.get(key);
	}

	@Override
	public Long scard(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.scard(key);
	}

	@Override
	public Set&lt;String&gt; smembers(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.smembers(key);
	}

	@Override
	public boolean sismember(String key, String value) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.sismember(key,value);
	}

	@Override
	public String srandmember(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.srandmember(key);
	}

	@Override
	public void hmset(String key, Map&lt;String, String&gt; map) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		jedis.hmset(key,map);
	}

	@Override
	public Long hlen(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.hlen(key);
	}

	@Override
	public Set&lt;String&gt; hkeys(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.hkeys(key);
	}

	@Override
	public List&lt;String&gt; hvals(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.hvals(key);
	}

	@Override
	public List&lt;String&gt; hmget(String key, String s1, String s2)
			throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.hmget(key,s1,s2);
	}

	@Override
	public void hdel(String key, String s) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		jedis.hdel(key,s);
	}

	@Override
	public void lpush(String key, List&lt;String&gt; list) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		for(String s: list){
			jedis.lpush(key,s);
		}
	}

	@Override
	public List&lt;String&gt; lrange(String key, Long start, Long end)
			throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		return jedis.lrange(key, start, end);
	}

	@Override
	public void del(String key) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		jedis.del(key);
	}

	@Override
	public void append(String key, String value) throws Exception {
		Utils f = Utils.createFactory();
		Jedis jedis = f.connection();
		jedis.append(key,value);
	}
	
}
</code></pre> 
<p>    <strong>工具类Factory.java</strong>：<br>     </p> 
<pre><code class="language-java">package redis;

import redis.clients.jedis.Jedis;

public class Utils {
	private static final String ip = "192.168.161.130";
	private static final Integer port = 6379;
	
	public  Jedis connection() throws Exception{
		Jedis jedis = new Jedis(ip,port);
		return jedis;
	}
	 
	public static Utils createFactory() throws Exception{
		return new Utils();
	}
}
</code></pre> 
<p> </p> 
<p><strong><span style="color:#ff0000">三、测试</span></strong></p> 
<p><span style="font-size:14px">   写了两个测试的方法，RedisTest.java:</span></p> 
<p><span style="font-size:14px">   </span></p> 
<pre><code class="language-java">package test;

import java.util.HashSet;
import java.util.Set;

import redis.Redis;

public class RedisTest {
	public static void main(String[] args) throws Exception {
//		append();
		sadd();
	}
	
	public static void append() throws Exception{
		Redis r = new Redis();
		r.set("z", "wb");
		String s = r.get("z");
		System.out.println(s);
	}
	
	public static void sadd() throws Exception{
		Redis r = new Redis();
		Set&lt;String&gt; set = new HashSet&lt;String&gt;();
		set.add("w");
		set.add("b");
		r.sadd("zsss",set);
		Set&lt;String&gt; t = r.smembers("zsss");
		System.out.println(t);
	}
	// ↑当测第二个方法时也是用的跟第一个一样的键“z”,报WRONGTYPE Operation against a key
	//holding the wrong kind of value,因为redis中已经存在了相同的key， 而且key对应的值类型并不是Set，
	//而是String,浪费好多时间，不过遇到bug正是学习提高的时候
}
</code></pre> 
<p><br> 测试结果：</p> 
<p>    <img alt="" src="https://images2.imgbox.com/52/07/mzN0vI6g_o.png"></p> 
<p>  <span style="font-size:14px">这篇先到这里，今天俺的发小大学毕业了，而我已经工作两年有余了，回顾自己的大学时光，更多的是遗憾，不过现在已经淡然了，有了爱学习的习惯，可能是上学时欠下的，话说我们学校旁边又多了几栋百度的大厦，百度一直是我梦寐以求的公司。加油吧，贴几张我们学校的图，以此激励自己。</span></p> 
<p>       </p> 
<p><span style="font-size:14px"></span>      <img src="https://images2.imgbox.com/77/cb/rlgZU77N_o.png" alt=""></p> 
<p><span style="font-size:14px"></span>     <img src="https://images2.imgbox.com/4a/84/z69zQp8i_o.png" alt=""></p> 
<p>    <img src="https://images2.imgbox.com/f3/63/ECoe4oou_o.png" alt=""></p> 
<p>         <img src="https://images2.imgbox.com/0f/8d/LLumhCnP_o.png" alt=""></p> 
<p>   <img src="https://images2.imgbox.com/2c/ce/ihnfoKQY_o.png" alt=""></p> 
<p> <img src="https://images2.imgbox.com/8b/1c/Sp5sQ9uG_o.jpg" alt=""></p> 
<p><span style="font-size:14px"></span> <img src="https://images2.imgbox.com/92/d0/cn2bxlxy_o.jpg" alt=""></p> 
<p><span style="font-size:14px"></span> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f0b671575385cc07daf0d84abfeb068/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">阀值与阈值的差别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fa06d8e45d057686488a3ad16c8b028a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IOS 如何通过浏览器打开App</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>