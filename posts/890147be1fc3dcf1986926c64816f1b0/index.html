<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Mybatis】Mybatis如何防止sql注入 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Mybatis】Mybatis如何防止sql注入" />
<meta property="og:description" content="🍎个人博客：个人主页
🏆个人专栏： Mybatis ⛳️ 功不唐捐，玉汝于成
目录
前言
正文
1、使用参数化的 SQL 语句：
2、使用动态 SQL 标签：
3、禁止拼接 SQL：
4、限制参数类型：
5、使用 MyBatis 的拦截器：
结语
我的其他博客
前言 在软件开发过程中，数据安全一直是至关重要的一环。SQL 注入攻击是一种常见而危险的威胁，攻击者通过恶意构造 SQL 语句，试图绕过应用程序的合法性检查，访问、修改或删除数据库中的数据。MyBatis 作为一款流行的持久层框架，提供了多种机制来防范 SQL 注入攻击，开发者应当充分利用这些机制，保障应用程序的数据安全性。
正文 MyBatis 是一种基于 Java 的持久层框架，它的设计目标之一是防止 SQL 注入攻击。以下是一些在 MyBatis 中防止 SQL 注入的常用方法：
1、使用参数化的 SQL 语句： 最有效的防范 SQL 注入的方式是使用参数化的 SQL 语句，而不是将参数直接拼接到 SQL 语句中。MyBatis 支持使用 #{} 占位符来引用参数，这样 MyBatis 将会在执行 SQL 语句时自动进行参数的安全处理。
&lt;!-- 使用 #{} 占位符 --&gt; &lt;select id=&#34;getUserById&#34; resultType=&#34;User&#34;&gt; SELECT * FROM user WHERE id = #{userId} &lt;/select&gt; 这样，MyBatis 会在执行时将 userId 参数安全地替换到 SQL 语句中。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/890147be1fc3dcf1986926c64816f1b0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T14:30:57+08:00" />
<meta property="article:modified_time" content="2024-01-03T14:30:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Mybatis】Mybatis如何防止sql注入</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="125" src="https://images2.imgbox.com/be/ec/evcFjKGI_o.png" width="152"></p> 
<p style="text-align:center;"><span style="color:#ed7976;">🍎</span><span style="color:#e6b223;"><strong>个人博客：</strong></span><span style="color:#ed7976;"><a href="https://blog.csdn.net/AliceNo?type=blog" title="个人主页">个人主页</a></span></p> 
<p style="text-align:center;">🏆<strong><span style="color:#9c8ec1;">个人专栏：</span></strong><strong> </strong><a href="https://blog.csdn.net/aliceno/category_12537770.html" title="Mybatis">Mybatis</a>   </p> 
<p style="text-align:center;"><span style="color:#ed7976;">⛳️  <strong>功不唐捐，玉汝于成</strong></span></p> 
<hr> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/66/73/eW3lyja2_o.jpg"></p> 
<p id="main-toc"></p> 
<hr id="hr-toc"> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:80px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E6%AD%A3%E6%96%87-toc" style="margin-left:80px;"><a href="#%E6%AD%A3%E6%96%87" rel="nofollow">正文</a></p> 
<p id="1%E3%80%81%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0%E5%8C%96%E7%9A%84%20SQL%20%E8%AF%AD%E5%8F%A5%EF%BC%9A-toc" style="margin-left:120px;"><a href="#1%E3%80%81%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0%E5%8C%96%E7%9A%84%20SQL%20%E8%AF%AD%E5%8F%A5%EF%BC%9A" rel="nofollow">1、使用参数化的 SQL 语句：</a></p> 
<p id="2%E3%80%81%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%20SQL%20%E6%A0%87%E7%AD%BE%EF%BC%9A-toc" style="margin-left:120px;"><a href="#2%E3%80%81%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%20SQL%20%E6%A0%87%E7%AD%BE%EF%BC%9A" rel="nofollow">2、使用动态 SQL 标签：</a></p> 
<p id="3%E3%80%81%E7%A6%81%E6%AD%A2%E6%8B%BC%E6%8E%A5%20SQL%EF%BC%9A-toc" style="margin-left:120px;"><a href="#3%E3%80%81%E7%A6%81%E6%AD%A2%E6%8B%BC%E6%8E%A5%20SQL%EF%BC%9A" rel="nofollow">3、禁止拼接 SQL：</a></p> 
<p id="4%E3%80%81%E9%99%90%E5%88%B6%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%EF%BC%9A-toc" style="margin-left:120px;"><a href="#4%E3%80%81%E9%99%90%E5%88%B6%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%EF%BC%9A" rel="nofollow">4、限制参数类型：</a></p> 
<p id="5%E3%80%81%E4%BD%BF%E7%94%A8%20MyBatis%20%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9A-toc" style="margin-left:120px;"><a href="#5%E3%80%81%E4%BD%BF%E7%94%A8%20MyBatis%20%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9A" rel="nofollow">5、使用 MyBatis 的拦截器：</a></p> 
<p id="%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7-toc" style="margin-left:120px;"></p> 
<p id="%E7%BB%93%E8%AF%AD-toc" style="margin-left:80px;"><a href="#%E7%BB%93%E8%AF%AD" rel="nofollow">结语</a></p> 
<p id="%E6%88%91%E7%9A%84%E5%85%B6%E4%BB%96%E5%8D%9A%E5%AE%A2-toc" style="margin-left:80px;"><a href="#%E6%88%91%E7%9A%84%E5%85%B6%E4%BB%96%E5%8D%9A%E5%AE%A2" rel="nofollow">我的其他博客</a></p> 
<hr> 
<p></p> 
<h4 id="%E5%89%8D%E8%A8%80"><a name="t0"></a>前言</h4> 
<blockquote> 
 <p>在软件开发过程中，数据安全一直是至关重要的一环。SQL 注入攻击是一种常见而危险的威胁，攻击者通过恶意构造 SQL 语句，试图绕过应用程序的合法性检查，访问、修改或删除数据库中的数据。MyBatis 作为一款流行的持久层框架，提供了多种机制来防范 SQL 注入攻击，开发者应当充分利用这些机制，保障应用程序的数据安全性。</p> 
</blockquote> 
<h4 id="%E6%AD%A3%E6%96%87"><a name="t1"></a>正文</h4> 
<p>MyBatis 是一种基于 Java 的持久层框架，它的设计目标之一是防止 SQL 注入攻击。以下是一些在 MyBatis 中防止 SQL 注入的常用方法：</p> 
<h5 id="1%E3%80%81%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0%E5%8C%96%E7%9A%84%20SQL%20%E8%AF%AD%E5%8F%A5%EF%BC%9A">1、<strong>使用参数化的 SQL 语句：</strong></h5> 
<p><strong>        </strong> 最有效的防范 SQL 注入的方式是使用参数化的 SQL 语句，而不是将参数直接拼接到 SQL 语句中。MyBatis 支持使用 <code>#{}</code> 占位符来引用参数，这样 MyBatis 将会在执行 SQL 语句时自动进行参数的安全处理。</p> 
<pre><code class="hljs">&lt;!-- 使用 #{} 占位符 --&gt;
&lt;select id="getUserById" resultType="User"&gt;
    SELECT * FROM user WHERE id = #{userId}
&lt;/select&gt;
</code></pre> 
<ol><li> <p>这样，MyBatis 会在执行时将 <code>userId</code> 参数安全地替换到 SQL 语句中。</p> </li></ol> 
<h5 id="2%E3%80%81%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%20SQL%20%E6%A0%87%E7%AD%BE%EF%BC%9A">2、<strong>使用动态 SQL 标签：</strong></h5> 
<p>        MyBatis 提供了动态 SQL 标签，如 <code>&lt;if&gt;</code>, <code>&lt;choose&gt;</code>, <code>&lt;when&gt;</code>, <code>&lt;otherwise&gt;</code> 等，可以根据条件动态生成 SQL 语句。在使用动态 SQL 时，也应该使用参数化的方式。</p> 
<pre><code class="hljs">&lt;select id="getUserByCondition" resultType="User"&gt;
    SELECT * FROM user
    &lt;where&gt;
        &lt;if test="username != null and username != ''"&gt;
            AND username = #{username}
        &lt;/if&gt;
        &lt;if test="email != null and email != ''"&gt;
            AND email = #{email}
        &lt;/if&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre> 
<p> 使用动态 SQL 标签可以根据不同的条件生成不同的 SQL 语句，而仍然保持参数的安全性。</p> 
<h5 id="3%E3%80%81%E7%A6%81%E6%AD%A2%E6%8B%BC%E6%8E%A5%20SQL%EF%BC%9A">3、<strong>禁止拼接 SQL：</strong></h5> 
<p>        避免在代码中手动拼接 SQL 语句，因为手动拼接容易导致 SQL 注入。推荐使用 MyBatis 提供的动态 SQL 和参数化的方式构建 SQL 语句。</p> 
<h5 id="4%E3%80%81%E9%99%90%E5%88%B6%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%EF%BC%9A">4、<strong>限制参数类型：</strong></h5> 
<p>        在验证和处理用户输入时，确保参数的类型是预期的类型。例如，如果一个参数应该是数字，那么在使用之前确保它是数字类型，这样可以防止一些类型转换的漏洞。</p> 
<h5 id="5%E3%80%81%E4%BD%BF%E7%94%A8%20MyBatis%20%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9A">5、<strong>使用 MyBatis 的拦截器：</strong></h5> 
<p><strong>        </strong> MyBatis 允许你定义拦截器（Interceptor）来在执行 SQL 语句之前或之后进行一些操作。你可以自定义一个拦截器，在执行 SQL 语句之前检查参数并进行必要的安全处理。</p> 
<p></p> 
<h5 id="%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><a name="t4"></a><a name="t2"></a></h5> 
<h4 id="%E7%BB%93%E8%AF%AD"><a name="t5"></a><a name="t9"></a><a name="t6"></a>结语</h4> 
<blockquote> 
 <p>          在应对 SQL 注入攻击时，MyBatis 的参数化 SQL 语句、动态 SQL 标签以及拦截器等功能为开发者提供了有力的支持。然而，安全不是一劳永逸的事情，团队应保持警惕，定期审查和更新应用程序的安全策略。通过良好的编程实践、对用户输入的合理验证和使用最新版本的框架，我们可以更好地防范 SQL 注入等安全威胁，确保应用程序的可靠性和稳健性。在开发的同时，始终将安全性作为设计的首要考虑，共同构建更加安全可信赖的软件系统。</p> 
</blockquote> 
<p></p> 
<h4 id="%E6%88%91%E7%9A%84%E5%85%B6%E4%BB%96%E5%8D%9A%E5%AE%A2"><a name="t10"></a><a name="t7"></a>我的其他博客</h4> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135315165?spm=1001.2014.3001.5502" title="【软件工程】走进敏捷开发：灵活、协作、迭代的软件工艺之旅-CSDN博客">【软件工程】走进敏捷开发：灵活、协作、迭代的软件工艺之旅-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135315133?spm=1001.2014.3001.5502" title="【软件工程】融通未来的工艺：深度解析统一过程在软件开发中的角色-CSDN博客">【软件工程】融通未来的工艺：深度解析统一过程在软件开发中的角色-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135299682?spm=1001.2014.3001.5502" title="【软件工程】走进瀑布模型：传统软件开发的经典之路-CSDN博客">【软件工程】走进瀑布模型：传统软件开发的经典之路-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135299820?spm=1001.2014.3001.5502" title="【软件工程】走近演化过程模型：软件开发的不断进化之路-CSDN博客">【软件工程】走近演化过程模型：软件开发的不断进化之路-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135299785?spm=1001.2014.3001.5502" title="【软件工程】漫谈增量过程模型：软件开发的逐步之道-CSDN博客">【软件工程】漫谈增量过程模型：软件开发的逐步之道-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135279635?spm=1001.2014.3001.5502" title="【Spring】理解IoC与AOP：构建灵活而模块化的软件架构-CSDN博客">【Spring】理解IoC与AOP：构建灵活而模块化的软件架构-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135279540?spm=1001.2014.3001.5502" title="【MySQL】数据库并发控制：悲观锁与乐观锁的深入解析-CSDN博客">【MySQL】数据库并发控制：悲观锁与乐观锁的深入解析-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135213034?spm=1001.2014.3001.5502" title="【MySQL】数据库规范化的三大法则 — 一探范式设计原则-CSDN博客">【MySQL】数据库规范化的三大法则 — 一探范式设计原则-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135212925?spm=1001.2014.3001.5502" title="【MySQL】数据库中为什么使用B+树不用B树-CSDN博客">【MySQL】数据库中为什么使用B+树不用B树-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135212722?spm=1001.2014.3001.5502" title="【MySQL】SQL优化-CSDN博客">【MySQL】SQL优化-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135210336?spm=1001.2014.3001.5502" title="【MySQL】脏读、不可重复读、幻读介绍及代码解释-CSDN博客">【MySQL】脏读、不可重复读、幻读介绍及代码解释-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135202428?spm=1001.2014.3001.5502" title="【MySQL】多表连接查询-CSDN博客">【MySQL】多表连接查询-CSDN博客</a></p> 
<p> <a href="https://blog.csdn.net/AliceNo/article/details/135192784?spm=1001.2014.3001.5502" title="【MySQL】数据库索引（简单明了）-CSDN博客">【MySQL】数据库索引（简单明了）-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135250363?spm=1001.2014.3001.5502" title="【Web开发】深度剖析RBAC：概念、实现方法、优势及在Web应用中的应用-CSDN博客">【Web开发】深度剖析RBAC：概念、实现方法、优势及在Web应用中的应用-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135237844?spm=1001.2014.3001.5502" title="【Mybatis】深入学习MyBatis：高级特性与Spring整合-CSDN博客">【Mybatis】深入学习MyBatis：高级特性与Spring整合-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135237223?spm=1001.2014.3001.5502" title="【Mybatis】深入学习MyBatis：CRUD操作与动态SQL实战指南-CSDN博客">【Mybatis】深入学习MyBatis：CRUD操作与动态SQL实战指南-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/AliceNo/article/details/135232627?spm=1001.2014.3001.5502" title="【MySQL】数据库索引（简单明了）-CSDN博客">【MySQL】数据库索引（简单明了）-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0d3088a614c0f10e10e8b3e7973f89de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nacos 持久化及集群的搭建【微服务】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5a53a5449b7648d7bfaf3b593c0a4c98/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android java.util.IllegalFormatConversionException: d != java.lang.Double</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>