<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu21.10升级22.04操作记录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu21.10升级22.04操作记录" />
<meta property="og:description" content="记录升级22.04版本过程
1 升级操作 首先，当前版本为21.10，在系统自动弹出的升级按钮中点击升级无反应。而后执行命令，重新在新的弹出框中升级。提示如下： (base) pang@pang-HP:~$ update-manager -c 正在检查新版 Ubuntu 不再提供您的 Ubuntu 版本的支持。 要获得关于升级的信息，请访问： http://www.ubuntu.com/releaseendoflife 请在升级前安装您的发行版所有可用更新。 (base) pang@pang-HP:~$ 其次，根据提示先升级当前系统 (base) pang@pang-HP:~$ sudo apt update 命中:1 https://dl.google.com/linux/chrome/deb stable InRelease 忽略:2 http://archive.ubuntu.com/ubuntu impish InRelease 命中:3 http://ppa.launchpad.net/gerardpuig/ppa/ubuntu impish InRelease 命中:4 https://linux.teamviewer.com/deb stable InRelease 忽略:5 https://deepin-wine.i-m.dev InRelease 忽略:6 http://archive.ubuntu.com/ubuntu impish-updates InRelease 命中:7 https://linux.teamviewer.com/deb preview InRelease 获取:8 https://deepin-wine.i-m.dev Release [1,611 B] 忽略:9 http://archive.ubuntu.com/ubuntu impish-backports InRelease 命中:10 http://ppa.launchpad.net/linrunner/tlp/ubuntu impish InRelease 忽略:11 https://deepin-wine.i-m.dev Release.gpg 忽略:12 http://archive.ubuntu.com/ubuntu impish-security InRelease 错误:13 http://archive." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/903135681e5ebd90720f75550fa9e91c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-31T12:50:05+08:00" />
<meta property="article:modified_time" content="2022-07-31T12:50:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu21.10升级22.04操作记录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>记录升级22.04版本过程</p> 
</blockquote> 
<h2><a id="1__2"></a>1 升级操作</h2> 
<ul><li>首先，当前版本为21.10，在系统自动弹出的升级按钮中点击升级无反应。而后执行命令，重新在新的弹出框中升级。提示如下：</li></ul> 
<pre><code>(base) pang@pang-HP:~$ update-manager -c
正在检查新版 Ubuntu
不再提供您的 Ubuntu 版本的支持。
要获得关于升级的信息，请访问：
http://www.ubuntu.com/releaseendoflife

请在升级前安装您的发行版所有可用更新。
(base) pang@pang-HP:~$ 
</code></pre> 
<ul><li>其次，根据提示先升级当前系统</li></ul> 
<pre><code>(base) pang@pang-HP:~$ sudo apt update
命中:1 https://dl.google.com/linux/chrome/deb stable InRelease
忽略:2 http://archive.ubuntu.com/ubuntu impish InRelease                                                                                             
命中:3 http://ppa.launchpad.net/gerardpuig/ppa/ubuntu impish InRelease                                                                               
命中:4 https://linux.teamviewer.com/deb stable InRelease                                                               
忽略:5 https://deepin-wine.i-m.dev  InRelease                                                                          
忽略:6 http://archive.ubuntu.com/ubuntu impish-updates InRelease                                                       
命中:7 https://linux.teamviewer.com/deb preview InRelease                                                              
获取:8 https://deepin-wine.i-m.dev  Release [1,611 B]                                                                  
忽略:9 http://archive.ubuntu.com/ubuntu impish-backports InRelease           
命中:10 http://ppa.launchpad.net/linrunner/tlp/ubuntu impish InRelease
忽略:11 https://deepin-wine.i-m.dev  Release.gpg
忽略:12 http://archive.ubuntu.com/ubuntu impish-security InRelease           
错误:13 http://archive.ubuntu.com/ubuntu impish Release                      
  404  Not Found [IP: 2620:2d:4000:1::19 80]
命中:14 http://ppa.launchpad.net/oibaf/graphics-drivers/ubuntu impish InRelease
错误:15 http://archive.ubuntu.com/ubuntu impish-updates Release              
  404  Not Found [IP: 2620:2d:4000:1::19 80]
错误:16 http://archive.ubuntu.com/ubuntu impish-backports Release            
  404  Not Found [IP: 2620:2d:4000:1::19 80]
命中:17 http://ppa.launchpad.net/ubuntudde-dev/stable/ubuntu impish InRelease
错误:18 http://archive.ubuntu.com/ubuntu impish-security Release
  404  Not Found [IP: 2620:2d:4000:1::19 80]
正在读取软件包列表... 完成
E: 仓库 “http://archive.ubuntu.com/ubuntu impish Release” 没有 Release 文件。
N: 无法安全地用该源进行更新，所以默认禁用该源。
N: 参见 apt-secure(8) 手册以了解仓库创建和用户配置方面的细节。
E: 仓库 “http://archive.ubuntu.com/ubuntu impish-updates Release” 没有 Release 文件。
N: 无法安全地用该源进行更新，所以默认禁用该源。
N: 参见 apt-secure(8) 手册以了解仓库创建和用户配置方面的细节。
E: 仓库 “http://archive.ubuntu.com/ubuntu impish-backports Release” 没有 Release 文件。
N: 无法安全地用该源进行更新，所以默认禁用该源。
</code></pre> 
<p>提示错误，无法升级。</p> 
<ul><li>手工修改apt源文件，将<code>impish</code>替换为<code>jammy</code></li></ul> 
<pre><code>sed -i 's/impish/jammy/g' /etc/apt/sources.list
sed -i 's/impish/jammy/g' /etc/apt/sources.list.d/*.list
</code></pre> 
<ul><li>再次执行更新系统：</li></ul> 
<pre><code>apt update
apt upgrade -y
apt dist-upgrade -y
</code></pre> 
<p>如果中间报错，则是因为使用了扩展项，因为22.04版本后，之前有些扩展已经不适用了，故而先禁止。或者使用命令<code>update-manager -c</code>打开软件更新器来手动更新。</p> 
<ul><li>更新完成后重启系统，检查版本信息</li></ul> 
<pre><code>(base) pang@pang-HP:~$ lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 22.04.1 LTS
Release:	22.04
Codename:	jammy
(base) pang@pang-HP:~$
</code></pre> 
<h2><a id="2_2204_73"></a>2 22.04版本问题</h2> 
<h3><a id="21_Dock_75"></a>2.1 Dock无法显示</h3> 
<p>整个桌面全屏，看不到Dock工具条，且扩展项中的<code>Dash to Dock</code>因版本问题无法使用。</p> 
<ul><li> <p>删除扩展中的<code>Dash to Dock</code></p> </li><li> <p>安装<code>Dash to Panel</code><br> <img src="https://images2.imgbox.com/9c/33/wF8RaD0k_o.png" alt="在这里插入图片描述"></p> </li><li> <p>注意修改两点，否则屏幕顶部行就没有了<br> <img src="https://images2.imgbox.com/1f/85/gpnK7zuF_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<p>并且只保留以下几个显示<br> <img src="https://images2.imgbox.com/c7/9d/fwILllA7_o.png" alt="在这里插入图片描述"></p> 
<p>结果如下：</p> 
<p><img src="https://images2.imgbox.com/b6/e5/34Y8zMQV_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_flameshot_94"></a>2.2 flameshot</h3> 
<p>出现flameshot截图工具无法使用的情况，重新安装。</p> 
<pre><code>(base) pang@pang-HP:~$ sudo apt-get autoremove flameshot
正在读取软件包列表... 完成
正在分析软件包的依赖关系树... 完成
正在读取状态信息... 完成                 
下列软件包将被【卸载】：
  flameshot
升级了 0 个软件包，新安装了 0 个软件包，要卸载 1 个软件包，有 31 个软件包未被升级。
有 1 个软件包没有被完全安装或卸载。
解压缩后将会空出 2,783 kB 的空间。
您希望继续执行吗？ [Y/n] y
(正在读取数据库 ... 系统当前共安装有 299117 个文件和目录。)
正在卸载 flameshot (11.0.rc1-1) ...
正在处理用于 desktop-file-utils (0.26-1ubuntu3) 的触发器 ...
正在处理用于 hicolor-icon-theme (0.17-2) 的触发器 ...
正在处理用于 gnome-menus (3.36.0-1ubuntu3) 的触发器 ...
正在处理用于 man-db (2.10.2-1) 的触发器 ...
正在处理用于 mailcap (3.70+nmu1ubuntu1) 的触发器 ...
正在处理用于 bamfdaemon (0.5.6+22.04.20220217-0ubuntu1) 的触发器 ...
Rebuilding /usr/share/applications/bamf-2.index...
(base) pang@pang-HP:~$ 
</code></pre> 
<p>重启系统，重新安装</p> 
<pre><code>(base) pang@pang-HP:~$ sudo apt install flameshot
[sudo] pang 的密码： 
正在读取软件包列表... 完成
正在分析软件包的依赖关系树... 完成
正在读取状态信息... 完成                 
flameshot 已经是最新版 (11.0.rc1-1)。
您也许需要运行“apt --fix-broken install”来修正上面的错误。
下列软件包有未满足的依赖关系：
 flameshot : 依赖: libqt5svg5 (&gt;= 5.9.0~) 但是它将不会被安装
             推荐: grim 但是它将不会被安装
E: 有未能满足的依赖关系。请尝试不指明软件包的名字来运行“apt --fix-broken install”(也可以指定一个解决办法)。
(base) pang@pang-HP:~$ sudo apt-get install libqt5svg5
正在读取软件包列表... 完成
正在分析软件包的依赖关系树... 完成
正在读取状态信息... 完成                 
下列【新】软件包将被安装：
  libqt5svg5
升级了 0 个软件包，新安装了 1 个软件包，要卸载 0 个软件包，有 31 个软件包未被升级。
有 1 个软件包没有被完全安装或卸载。
需要下载 0 B/149 kB 的归档。
解压缩后会消耗 509 kB 的额外空间。
正在选中未选择的软件包 libqt5svg5:amd64。
(正在读取数据库 ... 系统当前共安装有 299117 个文件和目录。)
准备解压 .../libqt5svg5_5.15.3-1_amd64.deb  ...
正在解压 libqt5svg5:amd64 (5.15.3-1) ...
正在设置 libqt5svg5:amd64 (5.15.3-1) ...
正在设置 flameshot (11.0.rc1-1) ...
正在处理用于 libc-bin (2.35-0ubuntu3) 的触发器 ...
(base) pang@pang-HP:~$ 
(base) pang@pang-HP:~$ 
(base) pang@pang-HP:~$ 
(base) pang@pang-HP:~$ sudo apt install flameshot
正在读取软件包列表... 完成
正在分析软件包的依赖关系树... 完成
正在读取状态信息... 完成                 
flameshot 已经是最新版 (11.0.rc1-1)。
升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 31 个软件包未被升级。
(base) pang@pang-HP:~$ 
</code></pre> 
<ul><li>执行命令正常打开</li></ul> 
<pre><code>(base) pang@pang-HP:~$ flameshot 
</code></pre> 
<h3><a id="23__164"></a>2.3 搜狗输入法无法使用</h3> 
<p>升级后，发现搜狗输入法无法使用，重新安装后因为不行，故而卸载搜狗输入法。</p> 
<h4><a id="231_sogou_168"></a>2.3.1 卸载sogou</h4> 
<ul><li> <p>首先，在输入法配置中删除此项<br> <img src="https://images2.imgbox.com/a8/d6/oUCzSWGV_o.png" alt="在这里插入图片描述"></p> </li><li> <p>其次，卸载</p> </li></ul> 
<pre><code>sudo apt autoremove sogoupinyin
</code></pre> 
<h4><a id="232_IBus_179"></a>2.3.2 安装IBus</h4> 
<p>参考：<a href="https://blog.csdn.net/qq_19331985/article/details/125998219">Ubuntu22.04-添加中文输入法</a>，唯一注意的就是安装后要重新启动下系统。</p> 
<h2><a id="3__185"></a>3 扩展工具</h2> 
<h3><a id="31_System_Monitor_187"></a>3.1 System Monitor</h3> 
<p>原21.10自带的System Monitor在22.04后就无法使用了，重新下载新的。</p> 
<p>https://extensions.gnome.org/extension/1064/system-monitor/</p> 
<p><img src="https://images2.imgbox.com/6e/6d/UNQgGr0Q_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7de45c29cb6d669c43effe34d5ff730c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">技能大赛训练题：域用户和组织单元的创建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fbe7f5fb6520a371c149f1bfff3d56dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言数组存储学生信息，并通过姓名获得该学生其他信息</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>