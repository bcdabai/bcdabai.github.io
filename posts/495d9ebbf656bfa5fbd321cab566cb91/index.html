<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pygame飞机大战 小游戏 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pygame飞机大战 小游戏" />
<meta property="og:description" content="运行效果 代码 # 先导入系统模块 import sys # 随机模块 import random # 再导入第三方模块 import pygame import pygame.locals # 背景图片路径 IMG_BACKGROUND = &#34;res/img_bg_level_1.jpg&#34; # 敌机图片路径 元组 IMG_ENEMYPLANE = (&#34;res/img-plane_1.png&#34;, &#34;res/img-plane_2.png&#34;, &#34;res/img-plane_3.png&#34;, &#34;res/img-plane_4.png&#34;, &#34;res/img-plane_5.png&#34;, &#34;res/img-plane_6.png&#34;, &#34;res/img-plane_7.png&#34;) # 玩家飞机图片路径 IMG_PLAYER_PLANE = &#34;res/hero2.png&#34; # 子弹图片 IMG_BULLET = &#34;res/bullet_13.png&#34; class Model(object): &#34;&#34;&#34;提供基础模型&#34;&#34;&#34; # 窗口对象 window = None def __init__(self, img_path, x, y): # 图片对象 self.img = pygame.image.load(img_path) # x坐标 self.x = x # y坐标 self.y = y def display(self): # 将要显示的对象添加到窗体中, 并指定其坐标 Model." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/495d9ebbf656bfa5fbd321cab566cb91/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-30T23:24:15+08:00" />
<meta property="article:modified_time" content="2020-07-30T23:24:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pygame飞机大战 小游戏</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>运行效果</h3> 
<p><img src="https://images2.imgbox.com/b1/28/TFCCA9UG_o.png" alt="飞机大战"></p> 
<h3><a id="_2"></a>代码</h3> 
<pre><code class="prism language-python"><span class="token comment"># 先导入系统模块</span>
<span class="token keyword">import</span> sys
<span class="token comment"># 随机模块</span>
<span class="token keyword">import</span> random

<span class="token comment"># 再导入第三方模块</span>
<span class="token keyword">import</span> pygame
<span class="token keyword">import</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span>


<span class="token comment"># 背景图片路径</span>
IMG_BACKGROUND <span class="token operator">=</span> <span class="token string">"res/img_bg_level_1.jpg"</span>
<span class="token comment"># 敌机图片路径 元组</span>
IMG_ENEMYPLANE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"res/img-plane_1.png"</span><span class="token punctuation">,</span> <span class="token string">"res/img-plane_2.png"</span><span class="token punctuation">,</span> <span class="token string">"res/img-plane_3.png"</span><span class="token punctuation">,</span> <span class="token string">"res/img-plane_4.png"</span><span class="token punctuation">,</span>
                  <span class="token string">"res/img-plane_5.png"</span><span class="token punctuation">,</span> <span class="token string">"res/img-plane_6.png"</span><span class="token punctuation">,</span> <span class="token string">"res/img-plane_7.png"</span><span class="token punctuation">)</span>
<span class="token comment"># 玩家飞机图片路径</span>
IMG_PLAYER_PLANE <span class="token operator">=</span> <span class="token string">"res/hero2.png"</span>
<span class="token comment"># 子弹图片</span>
IMG_BULLET <span class="token operator">=</span> <span class="token string">"res/bullet_13.png"</span>


<span class="token keyword">class</span> <span class="token class-name">Model</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""提供基础模型"""</span>
    <span class="token comment"># 窗口对象</span>
    window <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img_path<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 图片对象</span>
        self<span class="token punctuation">.</span>img <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span>img_path<span class="token punctuation">)</span>
        <span class="token comment"># x坐标</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        <span class="token comment"># y坐标</span>
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y

    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 将要显示的对象添加到窗体中, 并指定其坐标</span>
        Model<span class="token punctuation">.</span>window<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Game</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""游戏整体控制"""</span>
    <span class="token comment"># 窗口宽度</span>
    WINDOW_WIDTH <span class="token operator">=</span> <span class="token number">512</span>
    <span class="token comment"># 窗口高度</span>
    WINDOW_HEIGHT <span class="token operator">=</span> <span class="token number">768</span>
    <span class="token comment"># 窗体标题</span>
    WINDOW_TITLE <span class="token operator">=</span> <span class="token string">"Plane Battle v1.0"</span>
    <span class="token comment"># 小图标路径</span>
    APP_ICON <span class="token operator">=</span> <span class="token string">"res/app.ico"</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 窗体对象</span>
        self<span class="token punctuation">.</span>window <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token comment"># 背景对象</span>
        self<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token comment"># 敌机对象</span>
        self<span class="token punctuation">.</span>enemy_planes <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 玩家对象</span>
        self<span class="token punctuation">.</span>player_plane <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""运行入口, 整体游戏控制"""</span>
        <span class="token comment"># 框架初始化</span>
        self<span class="token punctuation">.</span>frame_init<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 模型初始化</span>
        self<span class="token punctuation">.</span>model_init<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 构造反复执行的机制, 刷新窗体、使窗体保持在屏幕上</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            <span class="token comment"># 背景移动</span>
            self<span class="token punctuation">.</span>background<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 显示背景</span>
            self<span class="token punctuation">.</span>background<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token keyword">for</span> enemy_plane <span class="token keyword">in</span> self<span class="token punctuation">.</span>enemy_planes<span class="token punctuation">:</span>
                <span class="token comment"># 敌机下降</span>
                enemy_plane<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 显示敌机(加载贴图)</span>
                enemy_plane<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment"># 显示玩家</span>
            self<span class="token punctuation">.</span>player_plane<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 把敌机列表传给玩家飞机, 好进行子弹与敌机的碰撞检测</span>
            self<span class="token punctuation">.</span>player_plane<span class="token punctuation">.</span>collision_checking<span class="token punctuation">(</span>self<span class="token punctuation">.</span>enemy_planes<span class="token punctuation">)</span>
            <span class="token comment"># 刷新窗体</span>
            pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 事件监听</span>
            self<span class="token punctuation">.</span>event_init<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">frame_init</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""窗体初始化"""</span>
        <span class="token comment"># 设置窗体对象</span>
        self<span class="token punctuation">.</span>window <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>WINDOW_WIDTH<span class="token punctuation">,</span> Game<span class="token punctuation">.</span>WINDOW_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 将窗口对象传给Model类属性</span>
        Model<span class="token punctuation">.</span>window <span class="token operator">=</span> self<span class="token punctuation">.</span>window
        <span class="token comment"># 左上小图标对象</span>
        app_img <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span>Game<span class="token punctuation">.</span>APP_ICON<span class="token punctuation">)</span>
        <span class="token comment"># 设置窗体图标</span>
        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_icon<span class="token punctuation">(</span>app_img<span class="token punctuation">)</span>
        <span class="token comment"># 设置窗体标题文本</span>
        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span>Game<span class="token punctuation">.</span>WINDOW_TITLE<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">model_init</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""初始化窗体中的对象"""</span>
        <span class="token comment"># 背景对象</span>
        self<span class="token punctuation">.</span>background <span class="token operator">=</span> Background<span class="token punctuation">(</span>IMG_BACKGROUND<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> _ <span class="token keyword">in</span> IMG_ENEMYPLANE<span class="token punctuation">:</span>
            <span class="token comment"># 加入多加敌机到 敌机列表中</span>
            self<span class="token punctuation">.</span>enemy_planes<span class="token punctuation">.</span>append<span class="token punctuation">(</span>EnemyPlane<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 玩家对象</span>
        self<span class="token punctuation">.</span>player_plane <span class="token operator">=</span> PlayerPlane<span class="token punctuation">(</span>IMG_PLAYER_PLANE<span class="token punctuation">,</span> PlayerPlane<span class="token punctuation">.</span>PLAYERPLANE_X<span class="token punctuation">,</span> PlayerPlane<span class="token punctuation">.</span>PLAYERPLANE_Y<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">event_init</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""事件监听"""</span>
        <span class="token comment"># 获取事件列表中的每一个事件</span>
        <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 判断事件类别是否为退出事件</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span><span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
                <span class="token comment"># 退出程序</span>
                sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 当事件类别是鼠标移动动作时</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span><span class="token punctuation">.</span>MOUSEMOTION<span class="token punctuation">:</span>
                <span class="token comment"># 获取鼠标坐标位置</span>
                position <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># 根据鼠标的位置设置玩家飞机的位置</span>
                self<span class="token punctuation">.</span>player_plane<span class="token punctuation">.</span>x <span class="token operator">=</span> position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> PlayerPlane<span class="token punctuation">.</span>PLAYERPLANE_WIDTH <span class="token operator">/</span> <span class="token number">2</span>
                self<span class="token punctuation">.</span>player_plane<span class="token punctuation">.</span>y <span class="token operator">=</span> position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> PlayerPlane<span class="token punctuation">.</span>PLAYERPLANE_HEIGHT <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">5</span>
        <span class="token comment"># 获取鼠标是否按下的状态</span>
        mouse_state <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pressed<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 判断是否按下鼠标左键</span>
        <span class="token keyword">if</span> mouse_state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token comment"># 获取鼠标坐标位置</span>
            position <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 初始化子弹位置</span>
            self<span class="token punctuation">.</span>player_plane<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>
                Bullet<span class="token punctuation">(</span>IMG_BULLET<span class="token punctuation">,</span> position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> Bullet<span class="token punctuation">.</span>BULLET_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
                       position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> Bullet<span class="token punctuation">.</span>BULLET_HEIGHT <span class="token operator">-</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment"># 当玩家按下鼠标左键时, 才开始游戏</span>
            self<span class="token punctuation">.</span>player_plane<span class="token punctuation">.</span>start_game <span class="token operator">=</span> <span class="token boolean">True</span>


<span class="token keyword">class</span> <span class="token class-name">Background</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""背景"""</span>
    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""装载上下两张图片到窗体中"""</span>
        <span class="token comment"># 将要显示的对象添加到窗体中, 并指定其坐标</span>
        Model<span class="token punctuation">.</span>window<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
        Model<span class="token punctuation">.</span>window<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y <span class="token operator">-</span> Game<span class="token punctuation">.</span>WINDOW_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""背景移动"""</span>
        <span class="token comment"># 当纵轴的值小于等于屏幕高度时:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> Game<span class="token punctuation">.</span>WINDOW_HEIGHT<span class="token punctuation">:</span>
            <span class="token comment"># 移动图片</span>
            self<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token comment"># 图片归位</span>
            self<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span>


<span class="token keyword">class</span> <span class="token class-name">PlayerPlane</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""玩家飞机"""</span>
    <span class="token comment"># 玩家飞机的宽度</span>
    PLAYERPLANE_WIDTH <span class="token operator">=</span> <span class="token number">120</span>
    <span class="token comment"># 玩家飞机的高度</span>
    PLAYERPLANE_HEIGHT <span class="token operator">=</span> <span class="token number">78</span>
    <span class="token comment"># 玩家飞机的初始位置</span>
    PLAYERPLANE_X <span class="token operator">=</span> <span class="token number">200</span>
    PLAYERPLANE_Y <span class="token operator">=</span> <span class="token number">500</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>img<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        <span class="token comment"># 子弹列表对象</span>
        self<span class="token punctuation">.</span>bullets <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 需要删除的子弹列表</span>
        self<span class="token punctuation">.</span>remove_bullets <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 玩家是否开始游戏标志</span>
        self<span class="token punctuation">.</span>start_game <span class="token operator">=</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">collision_checking</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> enemy_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""子弹的显示, 还有子弹与敌机的碰撞检测"""</span>
        <span class="token keyword">for</span> bullet <span class="token keyword">in</span> self<span class="token punctuation">.</span>bullets<span class="token punctuation">:</span>
            <span class="token comment"># 子弹移动</span>
            bullet<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 子弹显示</span>
            bullet<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># 当子弹飞出屏幕时:</span>
            <span class="token keyword">if</span> bullet<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token operator">-</span>Bullet<span class="token punctuation">.</span>BULLET_HEIGHT<span class="token punctuation">:</span>
                <span class="token comment"># 将这个子弹添加到待删除子弹的列表</span>
                self<span class="token punctuation">.</span>remove_bullets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>bullet<span class="token punctuation">)</span>
            <span class="token comment"># 子弹没有飞出屏幕</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 子弹矩形</span>
                bullet_rect <span class="token operator">=</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span><span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>bullet<span class="token punctuation">.</span>x<span class="token punctuation">,</span> bullet<span class="token punctuation">.</span>y<span class="token punctuation">,</span> Bullet<span class="token punctuation">.</span>BULLET_WIDTH<span class="token punctuation">,</span> Bullet<span class="token punctuation">.</span>BULLET_HEIGHT<span class="token punctuation">)</span>

                <span class="token keyword">for</span> enemy <span class="token keyword">in</span> enemy_list<span class="token punctuation">:</span>
                    <span class="token comment"># 敌机矩形</span>
                    enemy_rect <span class="token operator">=</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span><span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>enemy<span class="token punctuation">.</span>x<span class="token punctuation">,</span> enemy<span class="token punctuation">.</span>y<span class="token punctuation">,</span> EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_WIDTH<span class="token punctuation">,</span> EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_HEIGHT<span class="token punctuation">)</span>

                    <span class="token comment"># 两个矩形碰撞检测</span>
                    <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span>colliderect<span class="token punctuation">(</span>bullet_rect<span class="token punctuation">,</span> enemy_rect<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token comment"># 子弹碰撞敌机后, 敌机归位到屏幕上方</span>
                        enemy<span class="token punctuation">.</span>enemy_plane_init<span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token comment"># 子弹加入删除列表</span>
                        self<span class="token punctuation">.</span>remove_bullets<span class="token punctuation">.</span>append<span class="token punctuation">(</span>bullet<span class="token punctuation">)</span>
                        <span class="token comment"># 一颗子弹只能撞击 一架敌机, 退出for循环</span>
                        <span class="token keyword">break</span>
        <span class="token comment"># 玩家飞机矩形</span>
        player_rect <span class="token operator">=</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span><span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token punctuation">,</span> PlayerPlane<span class="token punctuation">.</span>PLAYERPLANE_WIDTH<span class="token punctuation">,</span>
                                         PlayerPlane<span class="token punctuation">.</span>PLAYERPLANE_HEIGHT<span class="token punctuation">)</span>

        <span class="token keyword">for</span> enemy <span class="token keyword">in</span> enemy_list<span class="token punctuation">:</span>
            <span class="token comment"># 敌机矩形</span>
            enemy_rect <span class="token operator">=</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span><span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>enemy<span class="token punctuation">.</span>x<span class="token punctuation">,</span> enemy<span class="token punctuation">.</span>y<span class="token punctuation">,</span> EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_WIDTH<span class="token punctuation">,</span>
                                            EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_HEIGHT<span class="token punctuation">)</span>
            <span class="token comment"># 玩家飞机与敌机碰撞检测</span>
            <span class="token keyword">if</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span>colliderect<span class="token punctuation">(</span>player_rect<span class="token punctuation">,</span> enemy_rect<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 一开始游戏时, 玩家按下鼠标左键, 才能判断玩家飞机与敌机碰撞检测, 再退出游戏</span>
                <span class="token keyword">if</span> self<span class="token punctuation">.</span>start_game<span class="token punctuation">:</span>
                    <span class="token comment"># 退出程序</span>
                    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 根据 待删除子弹的列表 删除子弹列表中的对象</span>
        <span class="token keyword">for</span> bullet <span class="token keyword">in</span> self<span class="token punctuation">.</span>remove_bullets<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>bullet<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token comment"># 删除完后, 需要将 待删除列表清空</span>
            self<span class="token punctuation">.</span>remove_bullets<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Bullet</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""子弹"""</span>
    <span class="token comment"># 子弹的宽度</span>
    BULLET_WIDTH <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token comment"># 子弹的高度</span>
    BULLET_HEIGHT <span class="token operator">=</span> <span class="token number">29</span>
    <span class="token comment"># 子弹间的移动速度</span>
    BULLET_SPEED <span class="token operator">=</span> <span class="token number">8</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""子弹移动"""</span>
        self<span class="token punctuation">.</span>y <span class="token operator">-=</span> Bullet<span class="token punctuation">.</span>BULLET_SPEED


<span class="token keyword">class</span> <span class="token class-name">EnemyPlane</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""敌机"""</span>
    <span class="token comment"># 敌机的宽度</span>
    ENEMYPLANE_WIDTH <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token comment"># 敌机的高度</span>
    ENEMYPLANE_HEIGHT <span class="token operator">=</span> <span class="token number">68</span>
    <span class="token comment"># 敌机移动速度</span>
    ENEMYPLANE_SPEED <span class="token operator">=</span> <span class="token number">4</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>enemy_plane_init<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">enemy_plane_init</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""初始化敌机"""</span>
        <span class="token comment"># 敌机归到窗口上方</span>
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_HEIGHT
        <span class="token comment"># 敌机横坐标随机出现</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Game<span class="token punctuation">.</span>WINDOW_WIDTH <span class="token operator">-</span> EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_WIDTH<span class="token punctuation">)</span>
        <span class="token comment"># 贴图随机</span>
        self<span class="token punctuation">.</span>img <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span>IMG_ENEMYPLANE<span class="token punctuation">[</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 当敌机没有下降出屏幕高度时</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> Game<span class="token punctuation">.</span>WINDOW_HEIGHT<span class="token punctuation">:</span>
            <span class="token comment"># 移动敌机</span>
            self<span class="token punctuation">.</span>y <span class="token operator">+=</span> EnemyPlane<span class="token punctuation">.</span>ENEMYPLANE_SPEED
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>enemy_plane_init<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    Game<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="exe_281"></a>打包成exe文章链接</h3> 
<p><a href="https://blog.csdn.net/u010684603/article/details/107702729">记一次pygame小程序打包成exe</a></p> 
<h3><a id="_283"></a>图片素材地址</h3> 
<p>链接: https://pan.baidu.com/s/1mMeJfSqEjSgMATxU6SXfZg<br> 提取码: 9cge</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d98511be1a37b15d4056d6f4f0fd9616/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BundleFusion那些事儿</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f4bc0a459f23c376d5eccae541aa10a8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue 在哪个生命周期进行数据请求</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>