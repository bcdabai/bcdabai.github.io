<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【附源码/完整教程】如何使用C语言打造人机对战版五子棋？ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【附源码/完整教程】如何使用C语言打造人机对战版五子棋？" />
<meta property="og:description" content="1.项目分析 2.项目目标 AI的基础应用算法的设计和实现C语言的图形界面程序开发 3.项目准备 VS/VC&#43;&#43;（任意版本）easyx图形库（直接双击即可安装）领取素材（图片、音效）传送门 4.创建项目 创建空项目。把素材拷贝到项目目录下 5.画棋盘 画棋盘，播放开局提示、播放背景音乐
#include &lt;graphics.h&gt; //easyx图像库的头文件
#include &lt;windows.h&gt;
#include &lt;mmsystem.h&gt; //播放音乐的头文件
#pragma comment(lib, &#34;winmm.lib&#34;)
void init() {
initgraph(897, 895);
loadimage(0, &#34;res/棋盘.jpg&#34;);
mciSendString(&#34;play res/start.wav&#34;, 0, 0, 0);
mciSendString(&#34;play res/bg.mp3 repeat&#34;, 0, 0, 0);
}
int main(void) {
init();
system(&#34;pause&#34;);
return 0;
}
6.画棋子 鼠标点击后，在点击位置画棋子
IMAGE chessBlackImg;
IMAGE chessWhiteImg;
const float BLOCK_SIZE = 67.4; // 格子的大小
void init() {
......
loadimage(&amp;chessBlackImg, &#34;res/black.png&#34;, BLOCK_SIZE, BLOCK_SIZE, true);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3d67e9a17e545f92b9dd5d814c4feb82/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-03T22:01:52+08:00" />
<meta property="article:modified_time" content="2021-11-03T22:01:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【附源码/完整教程】如何使用C语言打造人机对战版五子棋？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="text-align:justify;"><strong><strong><strong>1.项目分析</strong></strong></strong></h2> 
<p style="text-align:justify;"><img alt="" height="422" src="https://images2.imgbox.com/a0/8f/9ZhoN2fD_o.png" width="759"></p> 
<p> </p> 
<h2 style="text-align:justify;"><strong><strong><strong>2.项目目标</strong></strong></strong></h2> 
<ol><li style="text-align:justify;">AI的基础应用</li><li style="text-align:justify;">算法的设计和实现</li><li style="text-align:justify;">C语言的图形界面程序开发</li></ol> 
<p style="text-align:justify;"></p> 
<h2 style="text-align:justify;"><strong><strong><strong>3.项目准备</strong></strong></strong></h2> 
<ol><li style="text-align:justify;">VS/VC++（任意版本）</li><li style="text-align:justify;">easyx图形库（直接双击即可安装）</li><li style="text-align:justify;">领取素材（图片、音效）<strong><a class="link-info" href="https://jq.qq.com/?_wv=1027&amp;k=q4sYkBon" rel="nofollow">传送门</a></strong></li></ol> 
<p style="text-align:justify;"><img alt="" height="120" src="https://images2.imgbox.com/3e/9d/4hKWahkn_o.png" width="107"></p> 
<p> </p> 
<h2 style="text-align:justify;"><strong><strong><strong>4.创建项目</strong></strong></strong></h2> 
<ol><li style="text-align:justify;">创建空项目。</li><li style="text-align:justify;">把素材拷贝到项目目录下</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 style="text-align:justify;"><strong><strong><strong>5.画棋盘</strong></strong></strong></h2> 
<p style="margin-left:.0001pt;text-align:justify;">画棋盘，播放开局提示、播放背景音乐</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;graphics.h&gt;</span>   <span style="color:#008000;">//easyx图像库的头文件</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;windows.h&gt;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;mmsystem.h&gt;</span>   <span style="color:#008000;">//播放音乐的头文件</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#pragma</span> <span style="color:#808080;">comment</span><span style="color:#000000;">(</span><span style="color:#808080;">lib</span><span style="color:#000000;">, </span><span style="color:#a31515;">"winmm.lib"</span><span style="color:#000000;">)</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> init() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">initgraph(897, 895);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">loadimage(0, </span><span style="color:#a31515;">"res/棋盘.jpg"</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#6f008a;">mciSendString</span><span style="color:#000000;">(</span><span style="color:#a31515;">"play res/start.wav"</span><span style="color:#000000;">, 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#6f008a;">mciSendString</span><span style="color:#000000;">(</span><span style="color:#a31515;">"play res/bg.mp3 repeat"</span><span style="color:#000000;">, 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> main(</span><span style="color:#0000ff;">void</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">system(</span><span style="color:#a31515;">"pause"</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">return</span><span style="color:#000000;"> 0;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p></p> 
<h2 style="text-align:justify;"><strong><strong><strong>6.画棋子</strong></strong></strong></h2> 
<p style="margin-left:.0001pt;text-align:justify;">鼠标点击后，在点击位置画棋子</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">IMAGE chessBlackImg;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">IMAGE chessWhiteImg;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">const float BLOCK_SIZE = 67.4; // 格子的大小</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">void init() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">......</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">loadimage(&amp;chessBlackImg, "res/black.png", BLOCK_SIZE, BLOCK_SIZE, true);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">loadimage(&amp;chessWhiteImg, "res/white.png", BLOCK_SIZE, BLOCK_SIZE, true);</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">int main(void) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">while (1) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">MOUSEMSG msg = GetMouseMsg();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">if (msg.uMsg == WM_LBUTTONDOWN) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">putimage(msg.x, msg.y, &amp;chessBlackImg);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">system("pause");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">return 0;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#7f7f7f;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>效果：</strong></p> 
<p><img alt="" height="236" src="https://images2.imgbox.com/f4/d0/AE7lh40O_o.png" width="217"></p> 
<p style="margin-left:.0001pt;text-align:justify;">黑色区域，透明背景的PNG图片显示不了。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>解决方案：</strong></p> 
<ol><li style="text-align:justify;">导入工具库tools.h, tools.cpp</li><li style="text-align:justify;">修改代码</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">#include "tools.h"</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">int main(void) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">while (1) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">MOUSEMSG msg = GetMouseMsg();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">if (msg.uMsg == WM_LBUTTONDOWN) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><s><span style="color:#ff0000;"><s>//putimage(msg.x, msg.y, &amp;chessBlackImg);</s></span></s></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">drawPNG(&amp;chessBlackImg, msg.x, msg.y);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">system("pause");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">return 0;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#7f7f7f;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">效果：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="364" src="https://images2.imgbox.com/e5/16/y7e7lKo2_o.png" width="431"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">修改</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><s><span style="color:#ff0000;"><s>drawPNG(&amp;chessBlackImg, msg.x, msg.y);</s></span></s></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">drawPNG(&amp;chessBlackImg, msg.x - 0.5 * BLOCK_SIZE, msg.y - 0.5 * BLOCK_SIZE);</span></p> </td></tr></tbody></table> 
<p></p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/7f/88/QbdyDaUi_o.png" width="241"></p> 
<p> 看上去，很完美，但是有一个严重的BUG</p> 
<p><img alt="" height="219" src="https://images2.imgbox.com/9f/de/FGd2ngaX_o.png" width="218"></p> 
<p style="margin-left:.0001pt;text-align:justify;">当不在交叉点准确点击时，就会出现以上情况。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">解决方案：</p> 
<p style="margin-left:.0001pt;text-align:justify;">需要判断这个点击是否是合法未知的点击，并允许一定的偏差</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 style="text-align:justify;"><strong><strong><strong>7.判断有效的点击</strong></strong></strong></h2> 
<h3 style="text-align:justify;"><strong><strong><strong>定义数据模型</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">因为点击时，要判断是否在已经有棋子的位置上点击（不能在已经落子的位置点击）</p> 
<p style="margin-left:.0001pt;text-align:justify;">所以需要定义一个数据模型，来表示当前的所有棋子数据。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">【模块化开发思想】</p> 
<p style="margin-left:.0001pt;text-align:justify;">创建ChessData.h, 并把main.cpp中的与围棋相关的全局数据，剪贴到ChessData.h中</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.h</p> 
<p></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#d7d7d7;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#pragma</span> <span style="color:#808080;">once</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">const</span> <span style="color:#0000ff;">float</span><span style="color:#000000;"> BLOCK_SIZE = 67.4; </span><span style="color:#008000;">// 格子的大小</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">const</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> BOARD_GRAD_SIZE = 13; </span><span style="color:#008000;">//13x13棋盘大小</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">const</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> POS_OFFSET = BLOCK_SIZE * 0.4; </span><span style="color:#008000;">// 20 鼠标点击的模糊距离上限</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">struct</span>  <span style="color:#2b91af;">ChessData</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 存储当前游戏棋盘和棋子的情况,空白为0，黑子1，白子-1</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> chessMap[BOARD_GRAD_SIZE][BOARD_GRAD_SIZE];</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 存储各个点位的评分情况，作为AI下棋依据</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> scoreMap[BOARD_GRAD_SIZE][BOARD_GRAD_SIZE];</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 标示下棋方, true:黑棋方  false: AI 白棋方（AI方）</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">bool</span><span style="color:#000000;"> playerFlag;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">};</span></p> </td></tr></tbody></table> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;">在main.cpp中添加围棋数据变量game</p> 
<table border="1" cellspacing="0" style="margin-left:6.75pt;"><tbody><tr><td style="background-color:#d7d7d7;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">"ChessData.h"</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#2b91af;">ChessData</span><span style="color:#000000;"> game; </span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><strong><strong><strong>初始化数据模型</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.h</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> initChessData(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">*); </span><span style="color:#008000;">// 开始游戏</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> initChessData(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;"> *</span><span style="color:#808080;">data</span><span style="color:#000000;">)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">if</span><span style="color:#000000;"> (!</span><span style="color:#808080;">data</span><span style="color:#000000;">)</span><span style="color:#0000ff;">return</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    memset(</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap, 0, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    memset(</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap, 0, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap));</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;playerFlag = </span><span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">main.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> init() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">......</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">// 初始化游戏模型</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">initChessData(&amp;game);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><strong><strong><strong>判断有效点击</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">判断原理</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">先计算出绿点，然后分别计算出3个黑点位置，计算当前位置离4个点的位置。</p> 
<p style="margin-left:.0001pt;text-align:justify;">如果小于阈值（<span style="color:#000000;">POS_OFFSET</span><span style="color:#000000;">）</span>，就认为选择了哪个点。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="272" src="https://images2.imgbox.com/d3/99/6iUiakM7_o.png" width="280"></p> 
<p style="margin-left:.0001pt;text-align:justify;">在main.cpp中添加变量，存储有效点击的位置</p> 
<table border="1" cellspacing="0" style="margin-left:6.75pt;"><tbody><tr><td style="background-color:#d7d7d7;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> clickPosRow, clickPosCol; </span><span style="color:#008000;">// 存储点击的位置</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">判断是否是有效点击，如果是有效点击，返回true并把结果保存到全局变量<span style="color:#000000;">clickPosRow</span><span style="color:#000000;">、</span><span style="color:#000000;"> clickPosCol;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">ChessData.h</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">const</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> POS_OFFSET = BLOCK_SIZE * 0.4; </span><span style="color:#008000;">// 20 鼠标点击的模糊距离上限</span></p> </td></tr></tbody></table> 
<table border="1" cellspacing="0" style="margin-left:6.75pt;"><tbody><tr><td style="background-color:#d7d7d7;width:445pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">bool</span><span style="color:#000000;"> clickBoard(</span><span style="color:#2b91af;">MOUSEMSG</span> <span style="color:#808080;">msg</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> x = </span><span style="color:#808080;">msg</span><span style="color:#000000;">.x;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> y = </span><span style="color:#808080;">msg</span><span style="color:#000000;">.y;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> col = (x - margin_x) / BLOCK_SIZE;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> row = (y - margin_y) / BLOCK_SIZE;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> leftTopPosX = margin_x + BLOCK_SIZE * col;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> leftTopPosY = margin_y + BLOCK_SIZE * row;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> len;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> selectPos = </span><span style="color:#0000ff;">false</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">do</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">len = sqrt((x - leftTopPosX) * (x - leftTopPosX) + (y - leftTopPosY) * (y - leftTopPosY));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (len &lt; POS_OFFSET) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosRow = row;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosCol = col;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (game.chessMap[clickPosRow][clickPosCol] == 0) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">selectPos = </span><span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">// 距离右上角的距离</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">len = sqrt((x - leftTopPosX - BLOCK_SIZE) * (x - leftTopPosX - BLOCK_SIZE) + </span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">(y - leftTopPosY) * (y - leftTopPosY));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (len &lt; POS_OFFSET) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosRow = row;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosCol = col + 1;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (game.chessMap[clickPosRow][clickPosCol] == 0) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">selectPos = </span><span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">// 距离左下角的距离</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">len = sqrt((x - leftTopPosX) * (x - leftTopPosX) + </span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">(y - leftTopPosY - BLOCK_SIZE) * (y - leftTopPosY - BLOCK_SIZE));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (len &lt; POS_OFFSET) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosRow = row + 1;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosCol = col;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (game.chessMap[clickPosRow][clickPosCol] == 0) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">selectPos = </span><span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">// 距离右下角的距离</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">len = sqrt((x - leftTopPosX - BLOCK_SIZE) * (x - leftTopPosX - BLOCK_SIZE) + </span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">(y - leftTopPosY - BLOCK_SIZE) * (y - leftTopPosY - BLOCK_SIZE));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (len &lt; POS_OFFSET) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosRow = row + 1;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosCol = col + 1;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (game.chessMap[clickPosRow][clickPosCol] == 0) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">selectPos = </span><span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">} </span><span style="color:#0000ff;">while</span><span style="color:#000000;"> (0);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">return</span><span style="color:#000000;"> selectPos;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;">实现有效点击</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#d7d7d7;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">int main(void) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">while (1) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">MOUSEMSG msg = GetMouseMsg();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">if (msg.uMsg == WM_LBUTTONDOWN </span><span style="color:#ff0000;">&amp;&amp; clickBoard(msg)</span><span style="color:#7f7f7f;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><s><span style="color:#7f7f7f;"><s>//putimage(msg.x, msg.y, &amp;chessBlackImg);</s></span></s></p> <p style="margin-left:.0001pt;text-align:left;"><s><span style="color:#7f7f7f;"><s>//drawPNG(&amp;chessBlackImg, msg.x - 0.5 * BLOCK_SIZE, msg.y - 0.5 * BLOCK_SIZE);</s></span></s></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">int x = margin_x + clickPosCol * BLOCK_SIZE - 0.5 * BLOCK_SIZE;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">int y = margin_y + clickPosRow * BLOCK_SIZE - 0.5 * BLOCK_SIZE;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">drawPNG(&amp;chessBlackImg, x, y);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">system("pause");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">return 0;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#7f7f7f;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">测试效果：</p> 
<p></p> 
<p><img alt="" height="416" src="https://images2.imgbox.com/17/21/vhxC1zZQ_o.png" width="406"></p> 
<p></p> 
<h2 style="text-align:justify;"><strong><strong><strong>8.优化项目架构</strong></strong></strong></h2> 
<ol><li style="text-align:justify;"><strong><strong><strong>封装画棋子的代码</strong></strong></strong></li></ol> 
<ol><li style="text-align:justify;">在ChessData.h中添加棋子类型</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">typedef</span> <span style="color:#0000ff;">enum</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#2f4f4f;">CHESS_WHITE</span><span style="color:#000000;"> = -1,</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#2f4f4f;">CHESS_BLACK</span><span style="color:#000000;"> = 1</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">} </span><span style="color:#2b91af;">chess_kind_t</span><span style="color:#000000;">;</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">在main.cpp封装“落子”代码</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> chessDown(</span><span style="color:#0000ff;">int</span> <span style="color:#808080;">row</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">col</span><span style="color:#000000;">, </span><span style="color:#2b91af;">chess_kind_t</span> <span style="color:#808080;">kind</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#6f008a;">mciSendString</span><span style="color:#000000;">(</span><span style="color:#a31515;">"play res/down7.WAV"</span><span style="color:#000000;">, 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> x = margin_x + </span><span style="color:#808080;">col</span><span style="color:#000000;"> * BLOCK_SIZE - 0.5 * BLOCK_SIZE;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> y = margin_y + </span><span style="color:#808080;">row</span><span style="color:#000000;"> * BLOCK_SIZE - 0.5 * BLOCK_SIZE;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">kind</span><span style="color:#000000;"> == </span><span style="color:#2f4f4f;">CHESS_WHITE</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">drawPNG(&amp;chessWhiteImg, x, y);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">else</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">drawPNG(&amp;chessBlackImg, x, y);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">落子</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">int main(void) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">while (1) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">MOUSEMSG msg = GetMouseMsg();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">if (msg.uMsg == WM_LBUTTONDOWN &amp;&amp; clickBoard(msg)) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">chessDown(clickPosRow, clickPosCol, CHESS_BLACK);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">system("pause");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">return 0;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#7f7f7f;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;"><strong><strong><strong>2.优化项目架构</strong></strong></strong></p> 
<p style="text-align:justify;"></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#d7d7d7;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">bool checkOver() { // 检查游戏是否结束</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">return false;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">void AI_GO() {  //AI走棋</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">void manGo() { // 玩家走棋</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">chessDown(clickPosRow, clickPosCol, CHESS_BLACK);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> main(</span><span style="color:#0000ff;">void</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">while</span><span style="color:#000000;"> (1) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#2b91af;">MOUSEMSG</span><span style="color:#000000;"> msg = GetMouseMsg();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (msg.uMsg == </span><span style="color:#6f008a;">WM_LBUTTONDOWN</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">manGo();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">if (checkOver()) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">continue;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">AI_GO();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">if (checkOver()) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">init();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">continue;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">closegraph();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">return</span><span style="color:#000000;"> 0;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p></p> 
<h2 style="text-align:justify;"><strong><strong><strong>9.更新游戏数据</strong></strong></strong></h2> 
<p style="margin-left:.0001pt;text-align:justify;">人（黑方）落子后，还没有修改底层的游戏数据。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">在ChessDatat.h添加接口：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> updateGameMap(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">data</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">row</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">col</span><span style="color:#000000;">);</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">在ChessData.cpp中添加实现。</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> updateGameMap(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">data</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">row</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">col</span><span style="color:#000000;">)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (!</span><span style="color:#808080;">data</span><span style="color:#000000;">)</span><span style="color:#0000ff;">return</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;playerFlag)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;">] = 1;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">else</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;">] = -1;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;playerFlag = !</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;playerFlag; </span><span style="color:#008000;">// 换手</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">应用更新：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">void manGo() { // 玩家走棋</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">chessDown(clickPosRow, clickPosCol, CHESS_BLACK);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#c00000;">updateGameMap(&amp;game, clickPosRow, clickPosCol);</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#7f7f7f;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 style="text-align:justify;"><strong><strong><strong>10.实现AI走棋</strong></strong></strong></h2> 
<h3 style="text-align:justify;"><strong><strong><strong>五子棋入门</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">连2<img alt="" height="66" src="https://images2.imgbox.com/ff/43/xjnp3kiQ_o.png" width="88"><img alt="" height="64" src="https://images2.imgbox.com/29/b9/Pq1UBv5R_o.png" width="82"></p> 
<p> 活3<img alt="" height="98" src="https://images2.imgbox.com/cb/b2/T14jMarP_o.png" width="104"><img alt="" height="67" src="https://images2.imgbox.com/03/83/HHKQhRLn_o.png" width="111"></p> 
<p> 死3<img alt="" height="79" src="https://images2.imgbox.com/01/96/Xb3JXrtP_o.png" width="127"><img alt="" height="121" src="https://images2.imgbox.com/4d/97/8MxlalqI_o.png" width="119"></p> 
<p> </p> 
<p> 活4<img alt="" height="165" src="https://images2.imgbox.com/23/d3/G1vRBTHE_o.png" width="171"><img alt="" height="83" src="https://images2.imgbox.com/1f/f9/j9fE3NOj_o.png" width="156"></p> 
<p> </p> 
<p> 死4<img alt="" height="165" src="https://images2.imgbox.com/cd/0e/dKWCmOga_o.png" width="169"><img alt="" height="105" src="https://images2.imgbox.com/a3/ce/lk6jVMFZ_o.png" width="222"></p> 
<p> </p> 
<p> 连5（赢）<img alt="" height="90" src="https://images2.imgbox.com/5b/a0/HvXoQfgd_o.png" width="224"><img alt="" height="167" src="https://images2.imgbox.com/72/9d/9JTnU2a0_o.png" width="171"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<h3 style="text-align:justify;"><strong><strong><strong>AI走棋原理</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">计算每个合法的落子点的“权值”，然后再权值最大的点落子</p> 
<p style="margin-left:.0001pt;text-align:justify;">以后，可以在这个基础之上，实现多个层次的计算.</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">对于每个空白点，分别计算周围的八个方向</p> 
<p> <img alt="" height="307" src="https://images2.imgbox.com/7c/c0/FAD3Of4w_o.png" width="353"></p> 
<p> 因为在计算某个方向时，正向和反向需同时考虑，所以实际上只需计算4个方向即可：</p> 
<p><img alt="" height="314" src="https://images2.imgbox.com/87/9a/OjjseO4p_o.png" width="359"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">如果黑棋走这个点</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">产生效果</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">评分</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">连2</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">10</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">死3</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">30</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">活3</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">40</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">死4</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">60</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">活4</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">200</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">连5</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">20000</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">如果白棋AI走这个点</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">产生效果</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">评分</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">连1（普通）</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">5</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">连2</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">10</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">死3</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">25</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">活3</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">50</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">死4</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">55</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">活4</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">300</p> </td></tr><tr><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">连5</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">30000</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><strong><strong><strong>计算各点的“权值”</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">权值的计算，放在ChessData模块中。</p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.h</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> calculateScore(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">data</span><span style="color:#000000;">)</span><span style="color:#000000;">;</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:441.3pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;string.h&gt;</span><span style="color:#a31515;"> //memset函数</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">// 最关键的计算评分函数</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> calculateScore(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">data</span><span style="color:#000000;">)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">if</span><span style="color:#000000;"> (!</span><span style="color:#808080;">data</span><span style="color:#000000;">) </span><span style="color:#0000ff;">return</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 统计玩家或者电脑连成的子</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> personNum = 0; </span><span style="color:#008000;">// 玩家连成子的个数</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> botNum = 0; </span><span style="color:#008000;">// AI连成子的个数</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> emptyNum = 0; </span><span style="color:#008000;">// 各方向空白位的个数</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 清空评分数组</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    memset(</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap, 0, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap));</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> row = 0; row &lt; BOARD_GRAD_SIZE; row++)</span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> col = 0; col &lt; BOARD_GRAD_SIZE; col++) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#008000;">// 空白点就算</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row &gt;= 0 &amp;&amp; col &gt;= 0 &amp;&amp; </span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row][col] == 0)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">            {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                <span style="color:#008000;">// 遍历周围4个方向，分别计算正反两个方向</span></p> <p style="margin-left:.0001pt;text-align:left;">                <span style="color:#0000ff;">int</span><span style="color:#000000;"> directs[4][2] = { {1,0}, {1,1}, {0,1}, {-1,1 } };</span></p> <p style="margin-left:.0001pt;text-align:left;">                <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> k = 0; k &lt; 4; k++) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">int</span><span style="color:#000000;"> x = directs[k][0];</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">int</span><span style="color:#000000;"> y = directs[k][1];</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">// 重置</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    personNum = 0;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    botNum = 0;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    emptyNum = 0;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">// 对黑棋评分(正向）</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 1; i &lt;= 4; i++) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row + i * y &gt;= 0 &amp;&amp; row + i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col + i * x &gt;= 0 &amp;&amp; col + i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row + i * y][col + i * x] == 1) { </span><span style="color:#008000;">// 真人玩家的子</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            personNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        } </span><span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row + i * y &gt;= 0 &amp;&amp; row + i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col + i * x &gt;= 0 &amp;&amp; col + i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row + i * y][col + i * x] == 0) { </span><span style="color:#008000;">// 空白位</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            emptyNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;     </span><span style="color:#008000;">// 遇到空白位置，停止该方向的搜索</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        } </span><span style="color:#0000ff;">else</span>            <span style="color:#008000;">// 出边界，或者遇到白棋，就停止该方向的搜索</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">// 对黑棋评分(反向）</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 1; i &lt;= 4; i++) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row - i * y &gt;= 0 &amp;&amp; row - i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col - i * x &gt;= 0 &amp;&amp; col - i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row - i * y][col - i * x] == 1) { </span><span style="color:#008000;">// 玩家的子</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            personNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        }</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row - i * y &gt;= 0 &amp;&amp; row - i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col - i * x &gt;= 0 &amp;&amp; col - i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row - i * y][col - i * x] == 0) { </span><span style="color:#008000;">// 空白位</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            emptyNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        }  </span><span style="color:#0000ff;">else</span>            <span style="color:#008000;">// 出边界，或者有AI自己的棋子</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">if</span><span style="color:#000000;"> (personNum == 1)                      </span><span style="color:#008000;">// 杀二</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 10;</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (personNum == 2) {                </span><span style="color:#008000;">// 杀三</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 1)     </span><span style="color:#008000;">// 死三</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 30;    </span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 2) </span><span style="color:#008000;">// 活三</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 40;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    } </span><span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (personNum == 3) {              </span><span style="color:#008000;">// 杀四</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 1)    </span><span style="color:#008000;">//死四</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 60;</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 2) </span><span style="color:#008000;">//活四</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 200;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    }</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (personNum == 4)                 </span><span style="color:#008000;">// 杀五</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 20000;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">// 进行一次清空</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    emptyNum = 0;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">// 对白棋评分(正向）</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 1; i &lt;= 4; i++) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row + i * y &gt; 0 &amp;&amp; row + i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col + i * x &gt; 0 &amp;&amp; col + i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row + i * y][col + i * x] == -1) { </span><span style="color:#008000;">// 玩家的子</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            botNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        } </span><span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row + i * y &gt; 0 &amp;&amp; row + i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col + i * x &gt; 0 &amp;&amp; col + i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row + i * y][col + i * x] == 0)  { </span><span style="color:#008000;">// 空白位</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            emptyNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        } </span><span style="color:#0000ff;">else</span>          </p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">// 对白棋评分(反向）</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 1; i &lt;= 4; i++) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row - i * y &gt; 0 &amp;&amp; row - i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col - i * x &gt; 0 &amp;&amp; col - i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row - i * y][col - i * x] == -1) { </span><span style="color:#008000;">// AI的子</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            botNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        } </span><span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (row - i * y &gt; 0 &amp;&amp; row - i * y &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                                col - i * x &gt; 0 &amp;&amp; col - i * x &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">                                <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row - i * y][col - i * x] == 0) { </span><span style="color:#008000;">// 空白位</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                            emptyNum++;</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                        } </span><span style="color:#0000ff;">else</span>            <span style="color:#008000;">// 出边界</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#0000ff;">break</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">if</span><span style="color:#000000;"> (botNum == 0)                      </span><span style="color:#008000;">// 普通下子</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 5;</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (botNum == 1)                 </span><span style="color:#008000;">// 活二</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 10;</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (botNum == 2) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 1)                </span><span style="color:#008000;">// 死三</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 25;</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 2)</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 50;  </span><span style="color:#008000;">// 活三</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    } </span><span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (botNum == 3) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 1)                </span><span style="color:#008000;">// 死四</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 55;</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (emptyNum == 2)</span></p> <p style="margin-left:.0001pt;text-align:left;">                            <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 300; </span><span style="color:#008000;">// 活四</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    } </span><span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (botNum &gt;= 4)</span></p> <p style="margin-left:.0001pt;text-align:left;">                        <span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] += 30000;   </span><span style="color:#008000;">// 活五，应该具有最高优先级</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                }</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">            }</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">        }</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p></p> 
<p></p> 
<h3 style="text-align:justify;"><strong><strong><strong>AI思考落子点</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">在各落子点，找到分值最大的点。如果有多个分值相同的点，直接在其中取一个随机点。</p> 
<p style="margin-left:.0001pt;text-align:justify;">在ChesssData模块实现。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.h</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">typedef</span> <span style="color:#0000ff;">struct</span> <span style="color:#2b91af;">point</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> row;</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> col;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">} </span><span style="color:#2b91af;">point_t</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#2b91af;">point_t</span><span style="color:#000000;"> actionByAI(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">data</span><span style="color:#000000;">); </span><span style="color:#008000;">// 机器执行下棋</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;time.h&gt;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;stdlib.h&gt;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#2b91af;">point_t</span><span style="color:#000000;"> actionByAI(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;"> *</span><span style="color:#808080;">data</span><span style="color:#000000;">)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 计算评分</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    calculateScore(</span><span style="color:#808080;">data</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 从评分中找出最大分数的位置</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> maxScore = 0;</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">//std::vector&lt;std::pair&lt;int, int&gt;&gt; maxPoints;</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#2b91af;">point_t</span><span style="color:#000000;"> maxPoints[BOARD_GRAD_SIZE * BOARD_GRAD_SIZE] = { 0, };</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> k=0;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> row = 0; row &lt; BOARD_GRAD_SIZE; row++)</span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> col = 0; col &lt; BOARD_GRAD_SIZE; col++)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">        {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#008000;">// 前提是这个坐标是空的</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;chessMap[row][col] == 0)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">            {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] &gt; maxScore)          </span><span style="color:#008000;">// 找最大的数和坐标</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">//maxPoints.clear();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    memset(maxPoints, 0, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(maxPoints));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    k = 0;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    maxScore = </span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col];</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">//maxPoints.push_back(std::make_pair(row, col));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    maxPoints[k].row = row;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    maxPoints[k].col = col;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    k++;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                }</span></p> <p style="margin-left:.0001pt;text-align:left;">                <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">data</span><span style="color:#000000;">-&gt;scoreMap[row][col] == maxScore) {   </span><span style="color:#008000;">// 如果有多个最大的数，都存起来</span></p> <p style="margin-left:.0001pt;text-align:left;">                    <span style="color:#008000;">//maxPoints.push_back(std::make_pair(row, col));</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    maxPoints[k].row = row;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    maxPoints[k].col = col;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                    k++;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">                }</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">            }</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">        }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 随机落子，如果有多个点的话</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    srand((</span><span style="color:#0000ff;">unsigned</span><span style="color:#000000;">)time(0));</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> index = rand() % k;</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">return</span><span style="color:#000000;"> maxPoints[index];</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><strong><strong><strong>实现AI落子</strong></strong></strong></h3> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> AI_GO() {  </span><span style="color:#008000;">//AI走棋</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#2b91af;">point_t</span><span style="color:#000000;"> point = actionByAI(&amp;game);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosRow = point.row;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">clickPosCol = point.col;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Sleep(1000); </span><span style="color:#008000;">//AI计算的太快，此处以假装思考</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">chessDown(clickPosRow, clickPosCol, </span><span style="color:#2f4f4f;">CHESS_WHITE</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">updateGameMap(&amp;game, clickPosRow, clickPosCol);</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 style="text-align:justify;"><strong><strong><strong>11判断棋局是否结束</strong></strong></strong></h2> 
<h3 style="text-align:justify;"><strong><strong><strong>在ChessData模块定义判断输赢的接口</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">原理分析：</p> 
<p style="margin-left:.0001pt;text-align:justify;">在4个方向上搜索。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="323" src="https://images2.imgbox.com/37/60/Mx8wpplQ_o.png" width="361"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">以右下方向为例：（黑色棋子表示刚下的棋子）</p> 
<p style="margin-left:.0001pt;text-align:justify;">从当前棋子开始，向右下方数5个</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="148" src="https://images2.imgbox.com/b6/eb/4XhiBK1S_o.png" width="152"></p> 
<p> 从当前棋子的左上角开始，向右下方数5个</p> 
<p><img alt="" height="146" src="https://images2.imgbox.com/be/3c/pM5wNaAi_o.png" width="147"></p> 
<p style="margin-left:.0001pt;text-align:justify;">从当前棋子的左上第2个开始，向右下方数5个</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="154" src="https://images2.imgbox.com/55/31/U3ew30tM_o.png" width="157"></p> 
<p style="margin-left:.0001pt;text-align:justify;">从当前棋子的左上第3个开始，向右下方数5个</p> 
<p> <img alt="" height="149" src="https://images2.imgbox.com/ed/35/btiMAA6n_o.png" width="153"></p> 
<p> 从当前棋子的左上第4个开始，向右下方数5个</p> 
<p> <img alt="" height="149" src="https://images2.imgbox.com/be/05/myYHPu1G_o.png" width="151"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.h</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">bool</span><span style="color:#000000;"> checkWin(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">game</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">row</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">col</span><span style="color:#000000;">);</span><span style="color:#000000;"> //row,col表示当前落子</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">bool</span><span style="color:#000000;"> checkWin(</span><span style="color:#2b91af;">ChessData</span><span style="color:#000000;">* </span><span style="color:#808080;">game</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">row</span><span style="color:#000000;">, </span><span style="color:#0000ff;">int</span> <span style="color:#808080;">col</span><span style="color:#000000;">)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 横竖斜四种大情况，每种情况都根据当前落子往后遍历5个棋子，有一种符合就算赢</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 水平方向</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 0; i &lt; 5; i++)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#008000;">// 往左5个，往右匹配4个子，20种情况</span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i &gt;= 0 &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">col</span><span style="color:#000000;"> - i + 4 &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 1] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 2] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 3] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;">][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 4])</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// 竖直方向(上下延伸4个)</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 0; i &lt; 5; i++)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i &gt;= 0 &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">row</span><span style="color:#000000;"> - i + 4 &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;">] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 1][</span><span style="color:#808080;">col</span><span style="color:#000000;">] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;">] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 2][</span><span style="color:#808080;">col</span><span style="color:#000000;">] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;">] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 3][</span><span style="color:#808080;">col</span><span style="color:#000000;">] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;">] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 4][</span><span style="color:#808080;">col</span><span style="color:#000000;">])</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// “/"方向</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 0; i &lt; 5; i++)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">row</span><span style="color:#000000;"> + i - 4 &gt;= 0 &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">col</span><span style="color:#000000;"> - i &gt;= 0 &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">col</span><span style="color:#000000;"> - i + 4 &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#008000;">// 第[row+i]行，第[col-i]的棋子，与右上方连续4个棋子都相同</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i - 1][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 1] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i - 2][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 2] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i - 3][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 3] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> + i - 4][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 4])</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#008000;">// “\“ 方向</span></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">for</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">int</span><span style="color:#000000;"> i = 0; i &lt; 5; i++)</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#008000;">// 第[row+i]行，第[col-i]的棋子，与右下方连续4个棋子都相同</span></p> <p style="margin-left:.0001pt;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i &gt;= 0 &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">row</span><span style="color:#000000;"> - i + 4 &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">col</span><span style="color:#000000;"> - i &gt;= 0 &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">col</span><span style="color:#000000;"> - i + 4 &lt; BOARD_GRAD_SIZE &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 1][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 1] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 2][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 2] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 3][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 3] &amp;&amp;</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i] == </span><span style="color:#808080;">game</span><span style="color:#000000;">-&gt;chessMap[</span><span style="color:#808080;">row</span><span style="color:#000000;"> - i + 4][</span><span style="color:#808080;">col</span><span style="color:#000000;"> - i + 4])</span></p> <p style="margin-left:.0001pt;text-align:left;">            <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">    }</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;">    <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><strong><strong><strong>调用AI接口</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">main.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#include</span> <span style="color:#a31515;">&lt;stdio.h&gt;</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">bool</span><span style="color:#000000;"> checkOver() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (checkWin(&amp;game, clickPosRow, clickPosCol)) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Sleep(1500);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (game.playerFlag == </span><span style="color:#0000ff;">false</span><span style="color:#000000;">) {  </span><span style="color:#008000;">//黑棋赢（玩家赢）,此时标记已经反转，轮到白棋落子</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#6f008a;">mciSendString</span><span style="color:#000000;">(</span><span style="color:#a31515;">"play res/不错.mp3"</span><span style="color:#000000;">, 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">loadimage(0, </span><span style="color:#a31515;">"res/胜利.jpg"</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">} </span><span style="color:#0000ff;">else</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#6f008a;">mciSendString</span><span style="color:#000000;">(</span><span style="color:#a31515;">"play res/失败.mp3"</span><span style="color:#000000;">, 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">loadimage(0, </span><span style="color:#a31515;">"res/失败.jpg"</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">getch();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><strong><strong><strong>显示分数</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">在胜利窗口，或者失败窗口中，显示分数。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">main.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#808080;">#define</span> <span style="color:#6f008a;">INIT_SCORE</span><span style="color:#000000;">  1000</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0000ff;">int</span>  <span style="color:#000000;">score; </span>               <span style="color:#008000;">// 当前分数</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> initScore() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#008000;">// 显示分数的字体设置</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">settextcolor(</span><span style="color:#6f008a;">WHITE</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">settextstyle(50, 0, </span><span style="color:#a31515;">"微软雅黑"</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#2b91af;">FILE</span><span style="color:#000000;"> *fp = fopen(</span><span style="color:#a31515;">"score.data"</span><span style="color:#000000;">, </span><span style="color:#a31515;">"rb"</span><span style="color:#000000;">);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (fp == </span><span style="color:#6f008a;">NULL</span><span style="color:#000000;">) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">score = </span><span style="color:#6f008a;">INIT_SCORE</span><span style="color:#000000;">;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">} </span><span style="color:#0000ff;">else</span><span style="color:#000000;"> {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">fread(&amp;score, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(score), 1, fp);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">if</span><span style="color:#000000;"> (fp)fclose(fp);</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> init() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">......</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">initScore();</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">更新分数</p> 
<p style="margin-left:.0001pt;text-align:justify;">ChessData.cpp</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="background-color:#f1f1f1;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">bool checkOver() {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">if (checkWin(&amp;game, clickPosRow, clickPosCol)) {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">Sleep(1500);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">if (game.playerFlag == false) {  //黑棋赢（玩家赢）,此时标记已经反转，轮到白棋落子</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">mciSendString("play res/不错.mp3", 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">loadimage(0, "res/胜利.jpg");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">score += 100;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">else {<!-- --></span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">mciSendString("play res/失败.mp3", 0, 0, 0);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">loadimage(0, "res/失败.jpg");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">score -= 100;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">// 显示分数</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">char scoreText[64];</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">sprintf(scoreText, "当前分数 ：%d", score);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">outtextxy(310, 800, scoreText);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">// 记录分数</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">FILE* fp = fopen("score.data", "wb");</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">fwrite(&amp;score, sizeof(score), 1, fp);</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">fclose(fp);</span></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">getch();</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">return true;</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">}</span></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#7f7f7f;">return false;</span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#7f7f7f;">}</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;"><strong><strong><strong>12.项目迭代</strong></strong></strong></p> 
<p style="text-align:justify;"> 服务器端业务开发。</p> 
<p style="text-align:justify;"></p> 
<p style="text-align:justify;"><img alt="" height="239" src="https://images2.imgbox.com/93/dd/quVpfu2L_o.png" width="338"></p> 
<p> </p> 
<p style="text-align:justify;"><strong><strong><strong>3.AI迭代</strong></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">  使用搜索树，提高算度。</p> 
<p>C语言C++编程学习交流圈子，<strong>QQ群：1021486511</strong>【<strong><a href="https://link.zhihu.com/?target=https%3A//jq.qq.com/%3F_wv%3D1027%26k%3DbhZP1IOm" rel="nofollow" title="点击进入"></a></strong>】</p> 
<p>整理分享（多年学习的源码、项目实战视频、项目笔记，基础入门教程）</p> 
<p>欢迎转行和学习编程的伙伴，利用更多的资料学习成长比自己琢磨更快哦！</p> 
<p><strong>编程学习资料分享：</strong></p> 
<p><img alt="" height="606" src="https://images2.imgbox.com/53/6a/Vpb73gp8_o.jpg" width="1200"><img alt="" height="845" src="https://images2.imgbox.com/39/f7/7pLCLTa6_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2c654cc7756d74a7b923aac82a7e3067/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux如何查看端口</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ff2715fe3822c9e75d1fdeb016c38ac5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue使用element ui实现下拉列表分页的功能！！！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>