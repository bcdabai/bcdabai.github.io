<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>systemctl配置redis服务的2种方式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="systemctl配置redis服务的2种方式" />
<meta property="og:description" content="1、使用fork方式，后台进程：
redis配置文件要改成daemonize yes
bind 127.0.0.1 10.21.108.175 protected-mode no port 6381 tcp-backlog 10240 timeout 0 tcp-keepalive 300 daemonize yes supervised no pidfile &#34;/var/run/redis_6381.pid&#34; loglevel notice logfile &#34;/data/redis_6381/log/redis_6381.log&#34; databases 16 save 900 1 save 300 10 save 60 10000 maxmemory 100000 stop-writes-on-bgsave-error yes rdbcompression yes rdbchecksum yes dbfilename &#34;dump_6381.rdb&#34; dir &#34;/data/redis_6381&#34; slave-serve-stale-data yes slave-read-only yes repl-diskless-sync no repl-diskless-sync-delay 5 repl-disable-tcp-nodelay no slave-priority 100 maxmemory-policy volatile-lru appendonly no appendfilename &#34;appendonly.aof&#34; appendfsync everysec no-appendfsync-on-rewrite no auto-aof-rewrite-percentage 100 auto-aof-rewrite-min-size 64mb aof-load-truncated yes lua-time-limit 5000 slowlog-log-slower-than 10000 slowlog-max-len 128 latency-monitor-threshold 0 notify-keyspace-events &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/76fdf8b4e56c48ca4186bc356c024bbd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-08T08:30:16+08:00" />
<meta property="article:modified_time" content="2023-06-08T08:30:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">systemctl配置redis服务的2种方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1、使用fork方式，后台进程：</p> 
<p>redis配置文件要改成daemonize yes</p> 
<pre><code class="hljs">bind 127.0.0.1 10.21.108.175
protected-mode no
port 6381
tcp-backlog 10240
timeout 0
tcp-keepalive 300
daemonize yes
supervised no
pidfile "/var/run/redis_6381.pid"
loglevel notice
logfile "/data/redis_6381/log/redis_6381.log"
databases 16
save 900 1
save 300 10
save 60 10000
maxmemory 100000
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes
dbfilename "dump_6381.rdb"
dir "/data/redis_6381"
slave-serve-stale-data yes
slave-read-only yes
repl-diskless-sync no
repl-diskless-sync-delay 5
repl-disable-tcp-nodelay no
slave-priority 100
maxmemory-policy volatile-lru
appendonly no
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
aof-load-truncated yes
lua-time-limit 5000
slowlog-log-slower-than 10000
slowlog-max-len 128
latency-monitor-threshold 0
notify-keyspace-events ""
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64
hll-sparse-max-bytes 3000
activerehashing yes
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit slave 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60
hz 10
aof-rewrite-incremental-fsync yes</code></pre> 
<p>服务配置文件：/usr/lib/systemd/system/redis-6381.service</p> 
<blockquote> 
 <p>[Unit]<br> Description=redis-6381 Service<br> After=network.target<br>  <br> [Service]<br> Type=fork<br> User=root<br> Restart=always<br> RestartSec=5s<br> ExecStart=/usr/bin/redis-server  /data/redis_6381/redis_6381.conf<br> ExecStop=/bin/kill -s QUIT $MAINPID <br> ExecReload=/bin/kill -s HUP $MAINPID<br>  <br> [Install]<br> WantedBy=multi-user.target</p> 
</blockquote> 
<p> systemctl daemon-reload</p> 
<p>systemctl  start redis-6381</p> 
<p>2、使用simple方式，前台进程：</p> 
<p>redis配置文件要改成daemonize no</p> 
<blockquote> 
 <p>[Unit]<br> Description=redis-6381 Service<br> After=network.target<br>  <br> [Service]<br> Type=simple<br> User=root<br> Restart=always<br> RestartSec=5s<br> ExecStart=/usr/bin/redis-server  /data/redis_6381/redis_6381.conf<br> ExecStop=/bin/kill -s QUIT $MAINPID <br> ExecReload=/bin/kill -s HUP $MAINPID<br>  <br> [Install]<br> WantedBy=multi-user.target</p> 
</blockquote> 
<p> systemctl daemon-reload</p> 
<p>systemctl  start redis-6381</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/effc65f26b043c4fd80566e91ca7a721/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vim的入门使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dea892c61c334b0db873352f9dc4a35f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java 面试题大全（整理版）1000&#43; 面试题附答案详解最全面看完稳了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>