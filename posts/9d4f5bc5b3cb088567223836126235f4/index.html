<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>（超详细）Python柱状图的实现 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="（超详细）Python柱状图的实现" />
<meta property="og:description" content="1.通过Bar来构建基础柱状图：（如以下代码）
from pyecharts.charts import Bar from pyecharts.options import * # 构建柱状图对象 bar = Bar() # 添加x轴数据 bar.add_xaxis([&#34;中国&#34;, &#34;美国&#34;, &#34;英国&#34;]) # 添加y轴数据 bar.add_yaxis([&#34;GDP&#34;,[30, 20, 10]]) # 绘图 bar.render(&#34;基础柱状图.html&#34;) 运行结果：
从以上代码中可得出要构建一个基础的柱状图首先要导入pyecharts中的bar模块，接着是构建柱状图的对象，然后再分别给x和y轴添加上数据，最后再绘图即可。使用bar.reversal_axis()就可以实现x和y轴的反转了，因为我们这个柱状图不是从下往上去看的，而是从左往右去看的。然后反转之后可以通过使用labelOpts模块去把数据（10，20，30）放到最右边。
2.基础的时间配置动态图表：
（1）Time line()-时间线：时间线就是创建一个x轴，轴上每一个点就是一个图表对象。如下面的图所示：
它是由点1变动到点2的，并以此来实现动态的图表。
from pyecharts.charts import Bar, Timeline from pyecharts.options import LabelOpts # 构建柱状图对象 bar1 = Bar() # 添加x轴数据 bar1.add_xaxis([&#34;中国&#34;, &#34;美国&#34;, &#34;英国&#34;]) # 添加y轴数据 bar1.add_yaxis(&#34;GDP&#34;, [10, 20, 10], label_opts=LabelOpts(position=&#34;right&#34;)) # 反转x和y的轴 bar1.reversal_axis() bar2 = Bar() bar2.add_xaxis([&#34;中国&#34;, &#34;美国&#34;, &#34;英国&#34;]) bar2.add_yaxis(&#34;GDP&#34;, [30, 20, 10], label_opts=LabelOpts(position=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9d4f5bc5b3cb088567223836126235f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-21T10:49:57+08:00" />
<meta property="article:modified_time" content="2023-11-21T10:49:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">（超详细）Python柱状图的实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1.通过Bar来构建基础柱状图：（如以下代码）</p> 
<pre><code>from pyecharts.charts import Bar
from pyecharts.options import *
# 构建柱状图对象
bar = Bar()
# 添加x轴数据
bar.add_xaxis(["中国", "美国", "英国"])
# 添加y轴数据
bar.add_yaxis(["GDP",[30, 20, 10]])
# 绘图
bar.render("基础柱状图.html")

</code></pre> 
<p>运行结果：</p> 
<p><img src="https://images2.imgbox.com/33/ef/e5drRG2i_o.png" alt="image.png"> 从以上代码中可得出要构建一个基础的柱状图首先要导入pyecharts中的bar模块，接着是构建柱状图的对象，然后再分别给x和y轴添加上数据，最后再绘图即可。使用bar.reversal_axis()就可以实现x和y轴的反转了，因为我们这个柱状图不是从下往上去看的，而是从左往右去看的。然后反转之后可以通过使用labelOpts模块去把数据（10，20，30）放到最右边。</p> 
<p>2.基础的时间配置动态图表：</p> 
<p>（1）Time line()-时间线：时间线就是创建一个x轴，轴上每一个点就是一个图表对象。如下面的图所示：</p> 
<p><img src="https://images2.imgbox.com/7c/f4/sLa2yKbo_o.png" alt="Screenshot_20231106_185533.jpg"> 它是由点1变动到点2的，并以此来实现动态的图表。</p> 
<pre><code>from pyecharts.charts import Bar, Timeline
from pyecharts.options import LabelOpts
# 构建柱状图对象
bar1 = Bar()
# 添加x轴数据
bar1.add_xaxis(["中国", "美国", "英国"])
# 添加y轴数据
bar1.add_yaxis("GDP", [10, 20, 10], label_opts=LabelOpts(position="right"))
# 反转x和y的轴
bar1.reversal_axis()
bar2 = Bar()
bar2.add_xaxis(["中国", "美国", "英国"])
bar2.add_yaxis("GDP", [30, 20, 10], label_opts=LabelOpts(position="right"))
bar2.reversal_axis()
bar3 = Bar()
bar3.add_xaxis(["中国", "美国", "英国"])
bar3.add_yaxis("GDP", [50, 40, 80], label_opts=LabelOpts(position="right"))
bar3.reversal_axis()
bar4 = Bar()
bar4.add_xaxis(["中国", "美国", "英国"])
bar4.add_yaxis("GDP", [70, 60, 60], label_opts=LabelOpts(position="right"))
bar4.reversal_axis()
bar5 = Bar()
bar5.add_xaxis(["中国", "美国", "英国"])
bar5.add_yaxis("GDP", [90, 80, 50], label_opts=LabelOpts(position="right"))
bar5.reversal_axis()
bar6 = Bar()
bar6.add_xaxis(["中国", "美国", "英国"])
bar6.add_yaxis("GDP", [100, 55, 10], label_opts=LabelOpts(position="right"))
bar6.reversal_axis()
# 构建时间对象
timeline = Timeline()
# 在时间轴上添加点
timeline.add(bar1, "点1")
timeline.add(bar2, "点2")
timeline.add(bar3, "点3")
timeline.add(bar4, "点4")
timeline.add(bar5, "点5")
timeline.add(bar6, "点6")
# 用时间对象来绘图而不是用bar对象来绘图了
timeline.render("基础柱状图.html")

</code></pre> 
<p>从上面的代码中我们可以得知要创建一个时间轴首先要导入Timeline模块，然后也是构建一个时间对象，接着把创建的所有点（即这里的bar1,bar2,bar3等）逐个添加到时间轴上。最后用时间对象来绘图而不是bar对象，因为如果你用bar对象来绘图的话就只能绘出一个柱状图了，而这里的每一个点就是一个柱状图。</p> 
<p>（2）数据的自动播放：</p> 
<p><img src="https://images2.imgbox.com/b6/fa/mxu1Mqtn_o.png" alt="Screenshot_20231106_193457_edit_800146858024461.jpg"> 我们可以通过增加一个schema的方法去设置播放。如上表中。</p> 
<p>3.动态柱状图的绘制： （1）列表的sort方法并配合lambda匿名函数完成列表排序 在之后的数据处理中，需要对列表进行排序，并指定排序规则。</p> 
<pre><code># 如下嵌套列表，要求对外层列表进行排序，排序的一居室内层列表的第二个元素数字
# 在这里我们以前学的sorted函数就无法适用了，可以使用列表的sort方法
# 准备一个列表
my_list = [["a", 33], ["b", 55], ["c", 11]]
#定义排序方法
def choose_sort_key(element):
    return element[1]
# 将列表中的元素转入choose_sort_key函数中，用来确定按索引来排序
my_list.sort(key=choose_sort_key,reverse=True)
print(my_list)

</code></pre> 
<p>从上面的代码中我们可以知道列表sort的使用方法：列表名.sort(key=可依据的函数名，reverse=True/Flase 第七行的参数key是要求传入一个函数，表示将列表的每一个元素都传入函数中，返回排序的依据；而参数reverse，指的是是否反转排序结果，True表示降序，False表示升序。</p> 
<p>配合lambda匿名函数：使用方法：列表名.sort(key=lambad 函数当中的形参：函数当中的形参[下标], reverse=True/False。</p> 
<p>（2）所以要构建一个动态的数据首先要准备好需要的json模块的数据，然后以只读方式打开数据文件接着把数据存放到字典中里面可嵌套列表，接着按照某个特定的元素下标去把数据进行排序（使用sort方法），然后创建时间线对象和设置时间线自动播放，最后绘图即可。 如以下动态柱状图代码：</p> 
<pre><code>from pyecharts.options import *
from pyecharts.globals import *
# 打开文件，注意encoding的数据类型有可能不一定是UTF-8
f = open("1960-2019全球GDP数据。text", "r", encoding="UTF-8")
# 由于数据是按行分布的，所以要用readlines来按行读取
data_lines = f.readlines()
f.close()
# 由于第一行数据是没有用的，所以利用pop来进行将其删除
data.lines.pop(0)
timeline = Timeline({"theme": ThemeType.LIGHT})     # 设置动态图的主题
# 创建一个空的字典
data_dict = {}
# 对每一个key值的字典赋空
for i in list(range(1960,2020)):
    data_dict[i] = []
# 按行来对数据进行处理
for line in data_lines:
    year = int(line.split(",")[0])      # 读取的出来year是字符串格式，需要将其转化为整数格式
    country = line.split(",")[1]        # 取出国家
    gdp = float(line.split(",")[2])     # 有的GDP数据是以科学计数法的形式出现的，为了统一全部转化为浮点型
    # 这里是排除异常的操作
    try:
        data_dict[year].append([country, gdp])
    except KeyError:
        data_dict[year] = []
        data_dict[year].append([country, gdp])
sorted_year_list = sorted(data_dict.keys())     # 取出字典所有的key值，按照升序排序，keys()可完成这项操作
# 按照1960年份来用for循环来取出每年的GDP前八的国家
for year in sorted_year_list:
    data_dict[year].sort(key=lambad element:element[1], reverse = True)         # sort函数的使用，配合匿名函数lambad
    year_data = data_dicted[year][0:8]      # 列表的切片处理
    # 创建存储x, y轴数据的列表
    x_data = []
    y_data = []
    for country_gdp in year_data:
        x_data.append(country_gdp[0])
        y_data.append(country_gdp[1]/1000000)
    bar = Bar       # 创建柱状图对象
    # 为了使GDP高的国家排在最上面，直接将输入的数据反转
    x_data.reverse()
    y_data.reverse()
    bar.add_xaxis(x_data)
    bar.add._yaxis("GDP", y_data, label_opts = LabelOpts(position = "right"))
    bar,reversal_axis()     # 将柱状图横过来
# 全局选项，设置标题
    bar.set_global_opts(
        title_opts = TitleOpts(title = f"{year}年全球前八GDP数据")
    )
# 添加时间线
timeline.add_schema(
play_interval=1000,               # 自动播放时间间隔，单位为毫秒，这里就是1秒
    is_timeline_show=True,            # 是否在播放的时候显示时间线
    is_auto_play=True,                # 是否自动播放
    is_loop_play=True                 # 是否循环播放
)
timeline.render("1960-2019全球GDP前八的国家.html")


</code></pre> 
<p>如运行结果：</p> 
<p><img src="https://images2.imgbox.com/0f/b7/zMDpiRjm_o.png" alt="Screenshot_20231108_222301_edit_911599667026411.jpg"></p> 
<center> 
 <b>---------------------------END--------------------------- </b> 
</center> 
<h3><a id="_174"></a>题外话</h3> 
<p><img src="https://images2.imgbox.com/6f/b1/uIKGWk9R_o.jpg" alt="在这里插入图片描述"></p> 
<p><font face="幼圆" size="4" color="red">感兴趣的小伙伴，赠送全套Python学习资料，包含面试题、简历资料等具体看下方。<br> </font></p> 
<p>👉<font color="red">CSDN大礼包🎁：</font><a href="https://blog.csdn.net/weixin_68789096/article/details/132275547?spm=1001.2014.3001.5502">全网最全《Python学习资料》免费赠送🆓！</a><font color="#66cc66">（安全链接，放心点击）</font></p> 
<p><strong>一、Python所有方向的学习路线</strong></p> 
<p>Python所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照下面的知识点去找对应的学习资源，保证自己学得较为全面。</p> 
<p><img src="https://images2.imgbox.com/ff/7f/4aQTXTTy_o.png" alt="img"></p> 
<p><strong>二、Python兼职渠道推荐</strong>*</p> 
<p>学的同时助你创收，每天花1-2小时兼职，轻松稿定生活费.<br> <img src="https://images2.imgbox.com/72/e0/MnEvGWx3_o.png" alt="在这里插入图片描述"></p> 
<p><strong>三、最新Python学习笔记</strong></p> 
<p>当我学到一定基础，有自己的理解能力的时候，会去阅读一些前辈整理的书籍或者手写的笔记资料，这些笔记详细记载了他们对一些技术点的理解，这些理解是比较独到，可以学到不一样的思路。</p> 
<p><img src="https://images2.imgbox.com/99/2d/QLdz4gra_o.png" alt="img"></p> 
<p><strong>四、实战案例</strong></p> 
<p>纸上得来终觉浅，要学会跟着视频一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。</p> 
<p><img src="https://images2.imgbox.com/b8/6c/MSmb4r6H_o.png" alt="img"></p> 
<p>👉<font color="red">CSDN大礼包🎁：</font><a href="https://blog.csdn.net/weixin_68789096/article/details/132275547?spm=1001.2014.3001.5502">全网最全《Python学习资料》免费赠送🆓！</a><font color="#66cc66">（安全链接，放心点击）</font></p> 
<p>若有侵权，请联系删除</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ded9aad03db4204f89edb1becfcb6e7d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Cocos Creator游戏开发基础入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0da847a948789c7e4566516828023076/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux CentOS7 安装git 配置秘钥公钥克隆代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>