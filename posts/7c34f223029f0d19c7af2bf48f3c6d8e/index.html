<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL如何找到使用的是哪个配置文件？ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL如何找到使用的是哪个配置文件？" />
<meta property="og:description" content="点击上方蓝字关注我
一个正在运行的MySQL实例，如何查看对应的配置文件用的是哪一个？如果存在多个文件，生效的顺序是怎么样的？
1. 方法一
首先可以先选择查看MySQL进程信息来判断使用了哪个配置文件,例如：
ps -aux|grep mysqld root 25628 0.0 0.0 112828 988 pts/0 S&#43; 19:13 0:00 grep --color=auto mysqld root 27503 0.0 0.0 113416 1660 ? S 2023 0:00 /bin/sh /usr/local/mysql5.7/bin/mysqld_safe --defaults-file=/data/mysql/mysql3306/etc/my.cnf mysql 28697 0.1 38.3 6168644 689056 ? Sl 2023 120:07 /usr/local/mysql5.7/bin/mysqld --defaults-file=/data/mysql/mysql3306/etc/my.cnf --basedir=/usr/local/mysql5.7 --datadir=/data/mysql/mysql3306/data --plugin-dir=/usr/local/mysql5.7/lib/mysql/plugin --user=mysql --log-error=/data/mysql/mysql3306/logs/mysqld.error --open-files-limit=65535 --pid-file=/data/mysql/mysql3306/tmp/mysqld.pid --socket=/data/mysql/mysql3306/tmp/mysql.sock --port=3306 结果中有--defaults-file=/data/mysql/mysql3306/etc/my.cnf，即该实例所使用的配置文件信息。
2. 方法二
有的时候，如果不是不带defaults-file参数启动数据库时，查看进程信息的结果中是没有对应的配置文件信息。例如：
ps -aux|grep mysqld mysql 1891850 1.2 2.2 2308948 366080 ? Ssl 2023 1355:28 /usr/sbin/mysqld root 3183979 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7c34f223029f0d19c7af2bf48f3c6d8e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-16T19:44:10+08:00" />
<meta property="article:modified_time" content="2024-01-16T19:44:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL如何找到使用的是哪个配置文件？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align:center;">点击上方蓝字关注我</p> 
 <p><img src="https://images2.imgbox.com/43/ff/IzmMOeDY_o.png" alt="9542438dd432db0f3422082e07985edb.png"></p> 
 <p>    一个正在运行的MySQL实例，如何查看对应的配置文件用的是哪一个？如果存在多个文件，生效的顺序是怎么样的？</p> 
 <p style="text-align:justify;"><strong>1.  方法一</strong></p> 
 <p style="text-align:justify;">首先可以先选择查看MySQL进程信息来判断使用了哪个配置文件,例如：<br></p> 
 <pre class="has"><code class="language-javascript">ps -aux|grep mysqld
root     25628  0.0  0.0 112828   988 pts/0    S+   19:13   0:00 grep --color=auto mysqld
root     27503  0.0  0.0 113416  1660 ?        S     2023   0:00 /bin/sh /usr/local/mysql5.7/bin/mysqld_safe --defaults-file=/data/mysql/mysql3306/etc/my.cnf
mysql    28697  0.1 38.3 6168644 689056 ?      Sl    2023 120:07 /usr/local/mysql5.7/bin/mysqld --defaults-file=/data/mysql/mysql3306/etc/my.cnf --basedir=/usr/local/mysql5.7 --datadir=/data/mysql/mysql3306/data --plugin-dir=/usr/local/mysql5.7/lib/mysql/plugin --user=mysql --log-error=/data/mysql/mysql3306/logs/mysqld.error --open-files-limit=65535 --pid-file=/data/mysql/mysql3306/tmp/mysqld.pid --socket=/data/mysql/mysql3306/tmp/mysql.sock --port=3306</code></pre> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/08/6a/GCgu3mE0_o.png" alt="d6d8fb1e250dc222a500d40bd3aaf6b5.png"></p> 
 <p style="text-align:justify;">结果中有--defaults-file=/data/mysql/mysql3306/etc/my.cnf，即该实例所使用的配置文件信息。<br></p> 
 <p style="text-align:justify;"><strong>2.  方法二</strong><strong><br></strong></p> 
 <p style="text-align:justify;">有的时候，如果不是不带defaults-file参数启动数据库时，查看进程信息的结果中是没有对应的配置文件信息。例如：<br></p> 
 <pre class="has"><code class="language-properties">ps -aux|grep mysqld
mysql    1891850  1.2  2.2 2308948 366080 ?      Ssl   2023 1355:28 /usr/sbin/mysqld
root     3183979  0.0  0.0  12316  2272 pts/9    S+   19:09   0:00 grep --color=auto mysqld</code></pre> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/d4/12/TGoxuLOk_o.png" alt="0bc457f44c4c84a2f1ea37c0a9a958a9.png"></p> 
 <p style="text-align:justify;">此时，如果使用的是MySQL8.0，可以登录到数据库后，通过查询对应视图performance_schema.variables_info来查看。例如:<br></p> 
 <pre class="has"><code class="language-ruby">mysql&gt; SELECT  variable_path,COUNT(*) FROM performance_schema.variables_info WHERE variable_path&lt;&gt;''  GROUP BY variable_path;
+------------------------------------+----------+
| variable_path                      | COUNT(*) |
+------------------------------------+----------+
| /etc/mysql/mysql.conf.d/mysqld.cnf |        6 |
+------------------------------------+----------+</code></pre> 
 <p style="text-align:left;"><img src="https://images2.imgbox.com/43/ba/CYUsNKpL_o.png" alt="4878b98f081388abec7348b9047f47f3.png">此时可以确定其配置文件信息。</p> 
 <p style="text-align:left;">PS：有时会查询到多个配置文件，可以思考一下为何如此设计。<br></p> 
 <p style="text-align:left;">如果使用的是MySQL8.0之前的版本，需要在下一步的顺序中寻找<br></p> 
 <p style="text-align:justify;"><strong>3. 配置文件生效顺序</strong></p> 
 <p style="text-align:justify;">如果存在多个配置文件，它们通常是以下的优先级顺序生效：<br><br><strong>系统级配置文件：</strong>位于 /etc/my.cnf 或 C:\Program、Data\MySQL\MySQL Server x.x\my.ini。这是默认的主配置文件，包含全局设置。<br><strong>配置文件目录中的其他文件：</strong>MySQL配置文件目录中的其他文件，通常在 /etc/mysql/conf.d/ 或 C:\ProgramData\MySQL\MySQL Server x.x\conf.d\。<br>这些文件允许模块化配置，会按照文件名的字母顺序合并。<br><strong>用户级配置文件：</strong>位于用户的主目录，如 ~/.my.cnf 或 %APPDATA%\MySQL\.my.cnf。这里的配置会覆盖系统级配置。<br><strong>命令行参数：</strong>在启动数据库实例时可以指定defaults-file或者指定对应的datadir等参数，这些将覆盖之前的所有配置，优先级最高</p> 
 <p><img src="https://images2.imgbox.com/22/ad/xKlQq8Fl_o.png" alt="f729bfff42eb79b40e356aadfc462bf5.png"></p> 
 <p>往期精彩回顾</p> 
 <p>1.  <a href="" rel="nofollow">MySQL高可用之MHA集群部署</a></p> 
 <h3>2.  <a href="" rel="nofollow">mysql8.0新增用户及加密规则修改的那些事</a></h3> 
 <h3>3.  比hive快10倍的大数据查询利器-- presto</h3> 
 <p><a href="" rel="nofollow">4.  监控利器出鞘：Prometheus+Grafana监控MySQL、Redis数据库</a></p> 
 <p>5.  PostgreSQL主从复制--物理复制</p> 
 <p>6.  MySQL传统点位复制在线转为GTID模式复制<br></p> 
 <p>7<a href="" rel="nofollow">.  MySQL敏感数据加密及解密</a></p> 
 <p>8<a href="" rel="nofollow">.  MySQL数据备份及还原（一）</a></p> 
 <p>9<a href="" rel="nofollow">.  MySQL数据备份及还原（二）</a></p> 
 <p><img src="https://images2.imgbox.com/bd/4c/vbrniZWJ_o.png" alt="b763b9be306fd81bd2c9ac8fd7747441.png"></p> 
 <p style="text-align:center;">扫码关注     <br></p> 
 <p><img title="" src="https://images2.imgbox.com/d9/a7/P3JDqrya_o.jpg" alt="93d1727f4b0832f532d85855f23f145d.jpeg"></p> 
 <p><img src="https://images2.imgbox.com/b0/9e/i1vAxU75_o.png" alt="443cd19a924118e23128145d2fe26a68.png"></p> 
 <p><img src="https://images2.imgbox.com/b3/93/GMOhReTi_o.png" alt="11a1db330d80487d6aae1412f569642d.png"></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/57e72f2e1779071fd2b33d866f753565/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Kafka-生产者</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9db0c692999c1bfc875d2db94735d9d9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CA证书--基础--02--使用openssl生成CA认证文件并为服务器和客户端颁发CA签名证书</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>