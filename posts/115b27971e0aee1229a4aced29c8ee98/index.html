<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux   FTP服务器  VSFTPD配置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux   FTP服务器  VSFTPD配置" />
<meta property="og:description" content="VSFTPD配置 Vsftpd的文件结构很简洁，主要包括：
（1）/etc/vsftpd/vsftpd.conf——主配置文件
（2）/etc/vsftpd/ftpusers——禁止使用vsftpd的用户列表文件
（3）/etc/vsftpd/user_list——禁止或允许使用vsftpd的用户列表文件。
（4）/var/ftp——匿名用户主目录
（5）/var/ftp/pub——匿名用户的下载目录
（6）/etc/logrotate.d/vsftpd.log——vsftpd的日志文件
1． 匿名服务器的连接（独立的服务器）
在/etc/vsftpd/vsftpd.conf配置文件中添加如下几项：
Anonymous_enable=no (允许匿名登陆)
Dirmessage_enable=yes （切换目录时，显示目录下.message的内容）
/var/ftp/创建一个文件,名为.message,该文件为欢迎信息的文件
cal_umask=022 (FTP上本地的文件权限，默认是077)
Connect_form_port_20=yes （启用FTP数据端口的数据连接）*
Xferlog_enable=yes （激活上传和下传的日志）
Xferlog_std_format=yes (使用标准的日志格式)
Ftpd_banner=XXXXX （欢迎信息）
Pam_service_name=vsftpd （验证方式）*
Listen=yes （独立的VSFTPD服务器）*
功能：只能连接FTP服务器，不能上传和下传
注：其中所有和日志欢迎信息相关连的都是可选项,打了星号的无论什么帐户都要添加，是属于FTP的基本选项
2． 开启匿名FTP服务器上传权限
在配置文件中添加以下的信息即可：
Anon_upload_enable=yes (开放上传权限)
Anon_mkdir_write_enable=yes （可创建目录的同时可以在此目录中上传文件）
Write_enable=yes (开放本地用户写的权限)
Anon_other_write_enable=yes (匿名帐号可以有删除的权限)
3． 开启匿名服务器下传的权限
在配置文件中添加如下信息即可：
Anon_world_readable_only=no
注：要注意文件夹的属性，匿名帐户是其它（other）用户要开启它的读写执行的权限
（R）读-----下传 （W）写----上传 （X）执行----如果不开FTP的目录都进不去
4．普通用户FTP服务器的连接（独立服务器）
在配置文件中添加如下信息即可：
Local_enble=yes （本地帐户能够登陆）
Local_root= /home/private
定义所有本地用户的根目录。当本地用户登入时，将被更换到此目录下。默认值为无。
Write_enable=yes 功能：可以用本地帐户登陆vsftpd服务器，有下载上传的权限
注：在禁止匿名登陆的信息后匿名服务器照样可以登陆但不可以上传下传
5． 用户登陆限制进其它的目录，只能进它的主目录
设置所有的本地用户都执行chroot
Chroot_local_user=yes （本地所有帐户都只能在自家目录）
设置指定用户执行chroot
Chroot_list_enable=yes （文件中的名单可以调用）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/115b27971e0aee1229a4aced29c8ee98/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-13T10:42:23+08:00" />
<meta property="article:modified_time" content="2020-09-13T10:42:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux   FTP服务器  VSFTPD配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <h2 style="margin-left:0cm;"><span style="color:#000000;"><strong>VSFTPD</strong><strong>配置</strong></span></h2> 
 <p style="margin-left:0cm;"><span style="color:#000000;">Vsftpd</span><span style="color:#000000;">的文件结构很简洁，主要包括：</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">1</span><span style="color:#000000;">）</span><span style="color:#000000;">/etc/vsftpd/vsftpd.conf</span><span style="color:#000000;">——主配置文件</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">2</span><span style="color:#000000;">）</span><span style="color:#000000;">/etc/vsftpd/ftpusers</span><span style="color:#000000;">——禁止使用</span><span style="color:#000000;">vsftpd</span><span style="color:#000000;">的用户列表文件</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">3</span><span style="color:#000000;">）</span><span style="color:#000000;">/etc/vsftpd/user_list</span><span style="color:#000000;">——禁止或允许使用</span><span style="color:#000000;">vsftpd</span><span style="color:#000000;">的用户列表文件。</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">4</span><span style="color:#000000;">）</span><span style="color:#000000;">/var/ftp</span><span style="color:#000000;">——匿名用户主目录</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">5</span><span style="color:#000000;">）</span><span style="color:#000000;">/var/ftp/pub</span><span style="color:#000000;">——匿名用户的下载目录</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">6</span><span style="color:#000000;">）</span><span style="color:#000000;">/etc/logrotate.d/vsftpd.log</span><span style="color:#000000;">——</span><span style="color:#000000;">vsftpd</span><span style="color:#000000;">的日志文件</span></p> 
 <p style="margin-left:0cm;"><br><span style="color:#000000;">1</span><span style="color:#000000;">．</span> <span style="color:#000000;">匿名服务器的连接（独立的服务器）</span><br><span style="color:#000000;">在</span><span style="color:#000000;">/etc/vsftpd/vsftpd.conf</span><span style="color:#000000;">配置文件中添加如下几项：</span><br><span style="color:#000000;">Anonymous_enable=no (</span><span style="color:#000000;">允许匿名登陆</span><span style="color:#000000;">)<br> Dirmessage_enable=yes </span><span style="color:#000000;">（切换目录时，显示目录下</span><span style="color:#000000;">.message</span><span style="color:#000000;">的内容）</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">/var/ftp/</span><span style="color:#000000;">创建一个文件</span><span style="color:#000000;">,</span><span style="color:#000000;">名为</span><span style="color:#000000;">.message,</span><span style="color:#000000;">该文件为欢迎信息的文件</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">cal_umask=022 (FTP</span><span style="color:#000000;">上本地的文件权限，默认是</span><span style="color:#000000;">077)<br> Connect_form_port_20=yes </span><span style="color:#000000;">（启用</span><span style="color:#000000;">FTP</span><span style="color:#000000;">数据端口的数据连接）</span><span style="color:#000000;">*<br> Xferlog_enable=yes </span><span style="color:#000000;">（激活上传和下传的日志）</span><br><span style="color:#000000;">Xferlog_std_format=yes (</span><span style="color:#000000;">使用标准的日志格式</span><span style="color:#000000;">)<br> Ftpd_banner=XXXXX </span><span style="color:#000000;">（欢迎信息）</span><br><span style="color:#000000;">Pam_service_name=vsftpd </span><span style="color:#000000;">（验证方式）</span><span style="color:#000000;">*<br> Listen=yes </span><span style="color:#000000;">（独立的</span><span style="color:#000000;">VSFTPD</span><span style="color:#000000;">服务器）</span><span style="color:#000000;">*</span><br><span style="color:#000000;">功能：只能连接</span><span style="color:#000000;">FTP</span><span style="color:#000000;">服务器，不能上传和下传</span><br><span style="color:#000000;">注：其中所有和日志欢迎信息相关连的都是可选项</span><span style="color:#000000;">,</span><span style="color:#000000;">打了星号的无论什么帐户都要添加，是属于</span><span style="color:#000000;">FTP</span><span style="color:#000000;">的基本选项</span><br><br><span style="color:#000000;">2</span><span style="color:#000000;">．</span> <span style="color:#000000;">开启匿名</span><span style="color:#000000;">FTP</span><span style="color:#000000;">服务器上传权限</span><br><span style="color:#000000;">在配置文件中添加以下的信息即可：</span><br><span style="color:#000000;">Anon_upload_enable=yes (</span><span style="color:#000000;">开放上传权限</span><span style="color:#000000;">)<br> Anon_mkdir_write_enable=yes </span><span style="color:#000000;">（可创建目录的同时可以在此目录中上传文件）</span><br><span style="color:#000000;">Write_enable=yes (</span><span style="color:#000000;">开放本地用户写的权限</span><span style="color:#000000;">)<br> Anon_other_write_enable=yes (</span><span style="color:#000000;">匿名帐号可以有删除的权限</span><span style="color:#000000;">)<br><br> 3</span><span style="color:#000000;">．</span> <span style="color:#000000;">开启匿名服务器下传的权限</span><br><span style="color:#000000;">在配置文件中添加如下信息即可：</span><br><span style="color:#000000;">Anon_world_readable_only=no</span><br><span style="color:#000000;">注：要注意文件夹的属性，匿名帐户是其它（</span><span style="color:#000000;">other</span><span style="color:#000000;">）用户要开启它的读写执行的权限</span><br><span style="color:#000000;">（</span><span style="color:#000000;">R</span><span style="color:#000000;">）读</span><span style="color:#000000;">-----</span><span style="color:#000000;">下传</span> <span style="color:#000000;">（</span><span style="color:#000000;">W</span><span style="color:#000000;">）写</span><span style="color:#000000;">----</span><span style="color:#000000;">上传</span> <span style="color:#000000;">（</span><span style="color:#000000;">X</span><span style="color:#000000;">）执行</span><span style="color:#000000;">----</span><span style="color:#000000;">如果不开</span><span style="color:#000000;">FTP</span><span style="color:#000000;">的目录都进不去</span><br><span style="color:#000000;">4</span><span style="color:#000000;">．普通用户</span><span style="color:#000000;">FTP</span><span style="color:#000000;">服务器的连接（独立服务器）</span><br><span style="color:#000000;">在配置文件中添加如下信息即可：</span><br><span style="color:#000000;">Local_enble=yes </span><span style="color:#000000;">（本地帐户能够登陆）</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">Local_root= /home/private</span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">定义所有本地用户的根目录。当本地用户登入时，将被更换到此目录下。默认值为无。</span><br><span style="color:#000000;">Write_enable=yes </span></p> 
 <p style="margin-left:0cm;"><span style="color:#000000;">功能：可以用本地帐户登陆</span><span style="color:#000000;">vsftpd</span><span style="color:#000000;">服务器，有下载上传的权限</span><br><span style="color:#000000;">注：在禁止匿名登陆的信息后匿名服务器照样可以登陆但不可以上传下传</span><br><span style="color:#000000;">5</span><span style="color:#000000;">．</span> <span style="color:#000000;">用户登陆限制进其它的目录，只能进它的主目录</span><br><span style="color:#000000;">设置所有的本地用户都执行</span><span style="color:#000000;">chroot<br> Chroot_local_user=yes </span><span style="color:#000000;">（本地所有帐户都只能在自家目录）</span><br><span style="color:#000000;">设置指定用户执行</span><span style="color:#000000;">chroot<br> Chroot_list_enable=yes </span><span style="color:#000000;">（文件中的名单可以调用）</span><br><span style="color:#000000;">Chroot_list_file=/</span><span style="color:#000000;">任意指定的路径</span><span style="color:#000000;">/vsftpd.chroot_list</span><br><span style="color:#000000;">注意：</span><span style="color:#000000;">vsftpd.chroot_list </span><span style="color:#000000;">是没有创建的需要自己添加，要想控制帐号就直接在文件中加帐号即可</span></p> 
 <p><span style="color:#000000;">6</span><span style="color:#000000;">．</span> <span style="color:#000000;">限制本地用户访问</span><span style="color:#000000;">FTP<br> Userlist_enable=yes (</span><span style="color:#000000;">用</span><span style="color:#000000;">userlist</span><span style="color:#000000;">来限制用户访问</span><span style="color:#000000;">)<br> Userlist_deny=yes (</span><span style="color:#000000;">名单中的人不允许访问</span><span style="color:#000000;">)<br> Userlist_file=/</span><span style="color:#000000;">指定文件存放的路径</span><span style="color:#000000;">/ </span><span style="color:#000000;">（文件放置的路径）</span><br><span style="color:#000000;">注：开启</span><span style="color:#000000;">userlist_enable=yes</span><span style="color:#000000;">匿名帐号不能登陆</span><br><br><span style="color:#000000;">7</span><span style="color:#000000;">．</span> <span style="color:#000000;">安全选项</span><br><span style="color:#000000;">Idle_session_timeout=600(</span><span style="color:#000000;">秒</span><span style="color:#000000;">) </span><span style="color:#000000;">（用户会话空闲后</span><span style="color:#000000;">10</span><span style="color:#000000;">分钟）</span><br><span style="color:#000000;">Data_connection_timeout=120</span><span style="color:#000000;">（秒）</span> <span style="color:#000000;">（将数据连接空闲</span><span style="color:#000000;">2</span><span style="color:#000000;">分钟断）</span><br><span style="color:#000000;">Accept_timeout=60</span><span style="color:#000000;">（秒）</span> <span style="color:#000000;">（客户端空闲</span><span style="color:#000000;">1</span><span style="color:#000000;">分钟后断）</span><br><span style="color:#000000;">Connect_timeout=60</span><span style="color:#000000;">（秒）</span> <span style="color:#000000;">（中断</span><span style="color:#000000;">1</span><span style="color:#000000;">分钟后又重新连接）</span><br><span style="color:#000000;">Local_max_rate=50000</span><span style="color:#000000;">（</span><span style="color:#000000;">bit</span><span style="color:#000000;">）</span> <span style="color:#000000;">（本地用户传输率</span><span style="color:#000000;">50K</span><span style="color:#000000;">）</span><br><span style="color:#000000;">Anon_max_rate=30000</span><span style="color:#000000;">（</span><span style="color:#000000;">bit</span><span style="color:#000000;">）</span> <span style="color:#000000;">（匿名用户传输率</span><span style="color:#000000;">30K</span><span style="color:#000000;">）</span><br><span style="color:#000000;">Pasv_min_port=50000 </span><span style="color:#000000;">（将客户端的数据连接端口改在</span><br><span style="color:#000000;">Pasv_max_port=60000 50000</span><span style="color:#000000;">—</span><span style="color:#000000;">60000</span><span style="color:#000000;">之间）</span><br><span style="color:#000000;">Max_clients=200 </span><span style="color:#000000;">（</span><span style="color:#000000;">FTP</span><span style="color:#000000;">的最大连接数）</span><br><span style="color:#000000;">Max_per_ip=4 </span><span style="color:#000000;">（每</span><span style="color:#000000;">IP</span><span style="color:#000000;">的最大连接数）</span><br><span style="color:#000000;">Listen_port=5555 </span><span style="color:#000000;">（从</span><span style="color:#000000;">5555</span><span style="color:#000000;">端口进行数据连接）</span><br>  </p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3b1836c284070c6814a920e1fcc795f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【JavaWeb】Filter验证是否登录案例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/65b662f6a56f1c7ebc122448e55c0224/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在C/C&#43;&#43;代码中使用SSE等指令集的指令(5)SSE进行加法运算简单的性能测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>