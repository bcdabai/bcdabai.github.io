<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Centos7/8 Oracle11g R2 图形化部署 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Centos7/8 Oracle11g R2 图形化部署" />
<meta property="og:description" content="文章目录 前言一、部署所需二、环境配置三、部署流程1.环境配置2.图形化部署3.数据库初始化 前言 博主全程root用户操作，不是root请加sudo
一、部署所需 1.Oracle 11g R2安装包（百度云，提取码：q61i ）
2.java（教程）
二、环境配置 systemctl disable --now firewalld # 防火墙关闭，如果是云服务器安全组记得放行 setenforce 0 # selinux关闭 sed -i &#39;s#SELINUX=enforcing#SELINUX=disabled#g&#39; /etc/sysconfig/selinux sed -i &#39;s#SELINUX=enforcing#SELINUX=disabled#g&#39; /etc/selinux/config yum install wget tar vim net-tools curl -y # 常用插件安装 三、部署流程 1.环境配置 安装oracle所需依赖项：
yum -y install binutils* compat-libcap1* compat-libstdc&#43;&#43;* gcc* gcc-c&#43;&#43;* glibc* glibc-devel* ksh* libaio* libaio-devel* libgcc* libstdc&#43;&#43;* libstdc&#43;&#43;-devel* libXi* libXtst* make* sysstat* elfutils* unixODBC* 新建组和用户：
groupadd oinstall groupadd dba useradd -g oinstall -g dba -m oracle passwd oracle 新建数据库存放目录：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/26640149525ebe223480b8ba4ce5d979/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-08T18:37:23+08:00" />
<meta property="article:modified_time" content="2020-12-08T18:37:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Centos7/8 Oracle11g R2 图形化部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_6" rel="nofollow">前言</a></li><li><a href="#_12" rel="nofollow">一、部署所需</a></li><li><a href="#_16" rel="nofollow">二、环境配置</a></li><li><a href="#_28" rel="nofollow">三、部署流程</a></li><li><ul><li><a href="#1_29" rel="nofollow">1.环境配置</a></li><li><a href="#2_111" rel="nofollow">2.图形化部署</a></li><li><a href="#3_155" rel="nofollow">3.数据库初始化</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr color="#000000" size='1"'> 
<h2><a id="_6"></a>前言</h2> 
<p><font color="#999AAA">博主全程root用户操作，不是root请加sudo</font></p> 
<hr color="#000000" size='1"'> 
<h2><a id="_12"></a>一、部署所需</h2> 
<p><font color="#999AAA">1.Oracle 11g R2安装包（<a href="https://pan.baidu.com/s/1I8jzapLOA_ATNFBl5iA0Dg" rel="nofollow">百度云</a>，提取码：q61i ）<br> 2.java（<a href="https://blog.csdn.net/weixin_42366275/article/details/110873891">教程</a>）</font></p> 
<h2><a id="_16"></a>二、环境配置</h2> 
<pre><code class="prism language-bash">systemctl disable --now firewalld  <span class="token comment"># 防火墙关闭，如果是云服务器安全组记得放行</span>

setenforce 0  <span class="token comment"># selinux关闭</span>
<span class="token function">sed</span> -i <span class="token string">'s#SELINUX=enforcing#SELINUX=disabled#g'</span> /etc/sysconfig/selinux
<span class="token function">sed</span> -i <span class="token string">'s#SELINUX=enforcing#SELINUX=disabled#g'</span> /etc/selinux/config

yum <span class="token function">install</span> <span class="token function">wget</span> <span class="token function">tar</span> vim net-tools <span class="token function">curl</span> -y    <span class="token comment"># 常用插件安装</span>
</code></pre> 
<h2><a id="_28"></a>三、部署流程</h2> 
<h3><a id="1_29"></a>1.环境配置</h3> 
<p><font color="#999AAA">安装oracle所需依赖项：</font></p> 
<pre><code class="prism language-powershell">yum <span class="token operator">-</span>y install binutils<span class="token operator">*</span> compat<span class="token operator">-</span>libcap1<span class="token operator">*</span> compat<span class="token operator">-</span>libstdc+<span class="token operator">+</span><span class="token operator">*</span> gcc<span class="token operator">*</span> gcc<span class="token operator">-</span>c+<span class="token operator">+</span><span class="token operator">*</span> glibc<span class="token operator">*</span> glibc<span class="token operator">-</span>devel<span class="token operator">*</span> ksh<span class="token operator">*</span> libaio<span class="token operator">*</span> libaio<span class="token operator">-</span>devel<span class="token operator">*</span> libgcc<span class="token operator">*</span> libstdc+<span class="token operator">+</span><span class="token operator">*</span> libstdc+<span class="token operator">+</span><span class="token operator">-</span>devel<span class="token operator">*</span> libXi<span class="token operator">*</span> libXtst<span class="token operator">*</span> make<span class="token operator">*</span> sysstat<span class="token operator">*</span> elfutils<span class="token operator">*</span> unixODBC<span class="token operator">*</span>
</code></pre> 
<p><font color="#999AAA">新建组和用户：</font></p> 
<pre><code class="prism language-powershell">groupadd oinstall
groupadd dba
useradd <span class="token operator">-</span>g oinstall <span class="token operator">-</span>g dba <span class="token operator">-</span>m oracle
passwd oracle
</code></pre> 
<p><font color="#999AAA">新建数据库存放目录：</font></p> 
<pre><code class="prism language-powershell">mkdir <span class="token operator">-</span>p <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oracle  <span class="token comment">#安装目录</span>
mkdir <span class="token operator">-</span>p <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oraInventory  <span class="token comment">#配置文件存放目录</span>
mkdir <span class="token operator">-</span>p <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>database   <span class="token comment">#解压目录</span>
chown <span class="token operator">-</span>R oracle:oinstall <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oracle
chown <span class="token operator">-</span>R oracle:oinstall <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oraInventory
chown <span class="token operator">-</span>R oracle:oinstall <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>database
</code></pre> 
<p><font color="#999AAA">修改内核参数(博主用的虚拟机是4g的，参数这样改，如果非4g，请百度其他配置):</font></p> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>etc<span class="token operator">/</span>sysctl<span class="token punctuation">.</span>conf
net<span class="token punctuation">.</span>ipv4<span class="token punctuation">.</span>icmp_echo_ignore_broadcasts = 1
net<span class="token punctuation">.</span>ipv4<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>all<span class="token punctuation">.</span>rp_filter = 1
fs<span class="token punctuation">.</span>file<span class="token operator">-</span>max = 6815744
fs<span class="token punctuation">.</span>aio<span class="token operator">-</span>max<span class="token operator">-</span>nr = 1048576
kernel<span class="token punctuation">.</span>shmall = 2097152
kernel<span class="token punctuation">.</span>shmmax = 2147483648
kernel<span class="token punctuation">.</span>shmmni = 4096
kernel<span class="token punctuation">.</span>sem = 250 32000 100 128
net<span class="token punctuation">.</span>ipv4<span class="token punctuation">.</span>ip_local_port_range = 9000 65500
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>rmem_default = 262144
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>rmem_max= 4194304
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>wmem_default= 262144
net<span class="token punctuation">.</span>core<span class="token punctuation">.</span>wmem_max= 1048576
</code></pre> 
<p><font color="#999AAA">使参数生效：</font></p> 
<pre><code class="prism language-powershell">sysctl <span class="token operator">-</span>p
</code></pre> 
<p><font color="#999AAA">对oracle用户设置限制，提高软件运行性能：</font></p> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>etc<span class="token operator">/</span>security<span class="token operator">/</span>limits<span class="token punctuation">.</span>conf
<span class="token comment">#在End of file上方添加</span>
oracle soft nproc 2047
oracle hard nproc 16384
oracle soft nofile 1024
oracle hard nofile 65536
</code></pre> 
<p><font color="#999AAA">配置oracle用户环境变量：</font></p> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>home<span class="token operator">/</span>oracle<span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
<span class="token comment">#在最下面添加</span>
export ORACLE_BASE=<span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oracle
export ORACLE_HOME=<span class="token variable">$ORACLE_BASE</span><span class="token operator">/</span>product<span class="token operator">/</span>11<span class="token punctuation">.</span>2<span class="token punctuation">.</span>0<span class="token operator">/</span>db_1
export ORACLE_SID=orcl
export ORACLE_UNQNAME=orcl
export ORACLE_TERM=xterm
export PATH=<span class="token variable">$ORACLE_HOME</span><span class="token operator">/</span>bin:<span class="token operator">/</span>usr<span class="token operator">/</span>sbin:<span class="token variable">$PATH</span>
export LD_LIBRARY_PATH=<span class="token variable">$ORACLE_HOME</span><span class="token operator">/</span>lib:<span class="token operator">/</span>lib:<span class="token operator">/</span>usr<span class="token operator">/</span>lib
export LANG=C
export NLS_LANG=AMERICAN_AMERICA<span class="token punctuation">.</span>ZHS16GBK
</code></pre> 
<p><font color="#999AAA">使环境变量生效：</font></p> 
<pre><code class="prism language-powershell">source <span class="token operator">/</span>home<span class="token operator">/</span>oracle<span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
</code></pre> 
<p><font color="#999AAA">使用sftp工具将两个oracle安装包随便拉到一个目录下，切换到oracle用户进行解压：</font></p> 
<pre><code class="prism language-powershell">su <span class="token operator">-</span> oracle
unzip linux<span class="token punctuation">.</span>x64_11gR2_database_1of2<span class="token punctuation">.</span>zip <span class="token operator">-</span>d <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>database<span class="token operator">/</span>
unzip linux<span class="token punctuation">.</span>x64_11gR2_database_2of2<span class="token punctuation">.</span>zip <span class="token operator">-</span>d <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>database<span class="token operator">/</span>
<span class="token function">rm</span> <span class="token operator">-</span>rf linux<span class="token punctuation">.</span>x64_11gR2_database_1of2<span class="token punctuation">.</span>zip
<span class="token function">rm</span> <span class="token operator">-</span>rf linux<span class="token punctuation">.</span>x64_11gR2_database_2of2<span class="token punctuation">.</span>zip
</code></pre> 
<p><font color="#999AAA">切换到root权限</font></p> 
<pre><code class="prism language-powershell">su root
chown <span class="token operator">-</span>R oracle:oinstall <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>database<span class="token operator">/</span>database<span class="token operator">/</span>
</code></pre> 
<h3><a id="2_111"></a>2.图形化部署</h3> 
<p><font color="#999AAA">运行安装程序：</font></p> 
<pre><code class="prism language-powershell">su <span class="token operator">-</span> oracle
<span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>database<span class="token operator">/</span>database<span class="token operator">/</span>runInstaller <span class="token operator">-</span>jreLoc <span class="token operator">/</span>etc<span class="token operator">/</span>alternatives<span class="token operator">/</span>jre_1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0
</code></pre> 
<p><font color="#999AAA">弹出图形化界面（除了下面其他全部默认）：</font></p> 
<p>Configure Security Updates：去掉 I wish to receive security updates via My Oracle Support<br> Installation Option:Create and configure a database<br> System class:Server class<br> Grid Options:Single instance database installation<br> Install Type:Advanced Install<br> Database Edition:企业版第一个<br> Configuration Options:Character Sets:第二项，Sample Schemas:打勾Create database with<br> Schema Passwords:第二项设置密码（密码必须包含大小写字母，8位数）<br> Prepequisite Checks:勾选ignore all（因为版本问题才会产生的依赖错误，无视即可）<br> Install Product:会报两个错误<br> 修改文件/data/oracle/product/11.2.0/db_1/ctx/lib/ins_ctx.mk和/data/oracle/product/11.2.0/db_1/sysman/lib/ins_emagent.mk：</p> 
<pre><code class="prism language-c">vim <span class="token operator">/</span>data<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">11.2</span><span class="token number">.0</span><span class="token operator">/</span>db_1<span class="token operator">/</span>ctx<span class="token operator">/</span>lib<span class="token operator">/</span>ins_ctx<span class="token punctuation">.</span>mk  #修改的时候空格很重要，不能少
ctxhx<span class="token punctuation">:</span> $<span class="token punctuation">(</span>CTXHXOBJ<span class="token punctuation">)</span>
        $<span class="token punctuation">(</span>LINK_CTXHX<span class="token punctuation">)</span> $<span class="token punctuation">(</span>CTXHXOBJ<span class="token punctuation">)</span> $<span class="token punctuation">(</span>INSO_LINK<span class="token punctuation">)</span>
修改为：
ctxhx<span class="token punctuation">:</span> $<span class="token punctuation">(</span>CTXHXOBJ<span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token keyword">static</span> $<span class="token punctuation">(</span>LINK_CTXHX<span class="token punctuation">)</span> $<span class="token punctuation">(</span>CTXHXOBJ<span class="token punctuation">)</span> $<span class="token punctuation">(</span>INSO_LINK<span class="token punctuation">)</span> <span class="token operator">/</span>usr<span class="token operator">/</span>lib64<span class="token operator">/</span>libc<span class="token punctuation">.</span>a
vim <span class="token operator">/</span>data<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">11.2</span><span class="token number">.0</span><span class="token operator">/</span>db_1<span class="token operator">/</span>sysman<span class="token operator">/</span>lib<span class="token operator">/</span>ins_emagent<span class="token punctuation">.</span>mk
 $<span class="token punctuation">(</span>MK_EMAGENT_NMECTL<span class="token punctuation">)</span>
 修改为：
 $<span class="token punctuation">(</span>MK_EMAGENT_NMECTL<span class="token punctuation">)</span> <span class="token operator">-</span>lnnz11
</code></pre> 
<p>点击Retry继续安装</p> 
<p>过段时间会出现一个很小的框，是在安装，等待就好了，期间会弹出窗口Database Configuration Assistant，点击"Password management…"，将对话框拉大，给SYS、System、Scoot、SH设置密码。<br> <img src="https://images2.imgbox.com/f7/61/LpF7OGy3_o.png" alt="在这里插入图片描述"><br> 点击ok，等待安装完成，切换到root用户，执行两个shell脚本：</p> 
<pre><code class="prism language-c">sh <span class="token operator">/</span>data<span class="token operator">/</span>oraInventory<span class="token operator">/</span>orainstRoot<span class="token punctuation">.</span>sh
sh <span class="token operator">/</span>data<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">11.2</span><span class="token number">.0</span><span class="token operator">/</span>db_1<span class="token operator">/</span>root<span class="token punctuation">.</span>sh   #直接回车即可
</code></pre> 
<h3><a id="3_155"></a>3.数据库初始化</h3> 
<p><font color="#999AAA">创建用户，赋予用户创建表格，允许连接权限：</font></p> 
<pre><code class="prism language-powershell">su <span class="token operator">-</span> oracle
sqlplus <span class="token operator">/</span>nolog    <span class="token comment">#进入数据库</span>
conn <span class="token operator">/</span>as sysdba   <span class="token comment">#连接数据库</span>
startup           <span class="token comment">#启动数据库</span>
alter user system identified by system<span class="token punctuation">;</span>
alter user sys identified by sys<span class="token punctuation">;</span>
create user TEST identified by TEST<span class="token punctuation">;</span>   <span class="token comment">#创建用户</span>
grant connect<span class="token punctuation">,</span>resource<span class="token punctuation">,</span>dba to TEST<span class="token punctuation">;</span>    <span class="token comment">#赋予权限</span>
<span class="token keyword">exit</span>  <span class="token comment">#退出</span>
lsnrctl <span class="token function">start</span>  <span class="token comment">#开启监听端口</span>
</code></pre> 
<p><font color="#999AAA">连接：<br> <img src="https://images2.imgbox.com/75/41/ToLNbrZ6_o.png" alt="在这里插入图片描述"></font></p> 
<p><font color="#999AAA">时区修改为北京时间：</font></p> 
<pre><code class="prism language-powershell">su <span class="token operator">-</span> oracle
sqlplus <span class="token operator">/</span>nolog
conn <span class="token operator">/</span>as sysdba
alter table oe<span class="token punctuation">.</span>orders drop column order_date<span class="token punctuation">;</span>
alter table oe<span class="token punctuation">.</span>orders add order_date date<span class="token punctuation">;</span>
commit<span class="token punctuation">;</span>
alter database <span class="token function">set</span> time_zone=<span class="token string">'+8:00'</span><span class="token punctuation">;</span>
shutdown immediate<span class="token punctuation">;</span>  <span class="token comment">#重启生效</span>
startup
<span class="token function">select</span> dbtimezone <span class="token keyword">from</span> dual<span class="token punctuation">;</span>   <span class="token comment">#查看是否生效</span>
<span class="token function">select</span> current_timestamp <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/410e50ab9a8d266adb936cd6eca36b1d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GB9706.1-2007名词解释：电气间隙、爬电距离，绝缘、接地等</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dd2132063336ee41fcda3c1a8106537e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">接口怎么分批量同步数据_SaasS系统接口同步三方平台的优化方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>