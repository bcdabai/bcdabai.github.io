<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>count(*)、count(1)、count(id)、count(字段)的区别与性能分析 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="count(*)、count(1)、count(id)、count(字段)的区别与性能分析" />
<meta property="og:description" content="目录
一、查询规则
二、总结
三、百万条数据SQL测试
一、查询规则 count(*)：获取表的行数
count(1)：所有行进行统计，包括NULL行
count(id)：count(*)查询的是总条数，count(id)查询的是id非null的条数，带索引。
count(不带索引字段)：获取某一字段值不为null的数据条数，就是说当某一条或者多条记录的那个字段为null的时候，这时并不会算进总条数中。
二、总结 300万条数据做的测试~
count(可空字段) ≈ count(不带索引) &lt; count(主键 id-带索引的) &lt; count(1) ≈ count(*)
查询行的&gt;查询带索引的字段&gt;不带索引的字段
1）count(*)与count(1)：
都是扫描全表，但不取值，包括了所有的列，相当于行数，在统计结果的时候，不会忽略NULL。count(1)包括了忽略所有列，用1代表代码行。
执行结果几乎是是一样的。
2）count(1)与count(字段)：
count(1) 会统计表中的所有的记录数，包含字段为null 的记录。
count(字段) 会统计该字段在表中出现的次数，忽略字段为null 的情况。即不统计字段为null 的记录。
所以count(1) 更快
3）count(id)与count(非空字段)：
索引有三种：唯一索引、主键索引和聚集索引，主键索引是唯一索引的特定类型。
该索引要求主键中的每个值都唯一。当在查询中使用主键索引时，它还允许对数据的快速访问。
三、百万条数据SQL测试 Navicat存储过程批量生成测试数据
SELECT count(*) FROM `city` SELECT count(0) FROM `city` SELECT count(1) FROM `city` SELECT count(id) FROM `city` SELECT count(name) FROM `city` SELECT count(state) FROM `city` sql结果耗时count(*)30120480.846scount(1)30120480.850scount(id)30120480.974scount(name)30120001.032scount(state)30120001.027s 有用请点赞，养成良好习惯！
疑问交流鼓励请留言！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/57f25d24921c5fdc4457ccad116333b2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-11T20:17:59+08:00" />
<meta property="article:modified_time" content="2019-08-11T20:17:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">count(*)、count(1)、count(id)、count(字段)的区别与性能分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p id="main-toc"><strong>目录</strong></p> 
 <p id="%E4%B8%80%E3%80%81%E6%9F%A5%E8%AF%A2%E8%A7%84%E5%88%99-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E6%9F%A5%E8%AF%A2%E8%A7%84%E5%88%99" rel="nofollow">一、查询规则</a></p> 
 <p id="%E4%BA%8C%E3%80%81%E7%BB%93%E8%AE%BA-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E7%BB%93%E8%AE%BA" rel="nofollow">二、总结</a></p> 
 <p id="%E4%B8%89%E3%80%81%E7%99%BE%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AESQL%E6%B5%8B%E8%AF%95-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E7%99%BE%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AESQL%E6%B5%8B%E8%AF%95" rel="nofollow">三、百万条数据SQL测试</a></p> 
 <h3 id="%E4%B8%80%E3%80%81%E6%9F%A5%E8%AF%A2%E8%A7%84%E5%88%99">一、查询规则</h3> 
 <p>count(*)：获取表的行数</p> 
 <p>count(1)：所有行进行统计，包括NULL行</p> 
 <p>count(id)：count(*)查询的是总条数，count(id)查询的是id非null的条数，带索引。</p> 
 <p>count(不带索引字段)：获取某一字段值不为null的数据条数，就是说当某一条或者多条记录的那个字段为null的时候，这时并不会算进总条数中。</p> 
 <h3 id="%E4%BA%8C%E3%80%81%E7%BB%93%E8%AE%BA">二、总结</h3> 
 <p>300万条数据做的测试~</p> 
 <p><span style="color:#ff9900;"><strong>count(可空字段) ≈ count(不带索引) &lt; count(主键 id-带索引的) &lt; count(1) ≈ count(*)</strong></span></p> 
 <p>查询行的&gt;查询带索引的字段&gt;不带索引的字段</p> 
 <p><strong>1）count(*)与count(1)：</strong></p> 
 <p>都是扫描全表，但不取值，包括了所有的列，相当于行数，在统计结果的时候，不会忽略NULL。count(1)包括了忽略所有列，用1代表代码行。</p> 
 <p>执行结果几乎是是一样的。</p> 
 <p><img alt="" height="225" src="https://images2.imgbox.com/b7/dc/WvjC8IIH_o.png" width="305"></p> 
 <p> <strong>2）count(1)与count(字段)：</strong><br> count(1) 会统计表中的所有的记录数，包含字段为null 的记录。<br> count(字段) 会统计该字段在表中出现的次数，忽略字段为null 的情况。即不统计字段为null 的记录。</p> 
 <p>所以<strong>count(1) </strong>更快</p> 
 <p><img alt="" height="226" src="https://images2.imgbox.com/12/fe/lDA9hQpO_o.png" width="281"></p> 
 <p> <strong>3）count(id)与count(非空字段)：</strong></p> 
 <p>索引有三种：唯一索引、主键索引和聚集索引，主键索引是唯一索引的特定类型。</p> 
 <p>该索引要求主键中的每个值都唯一。当在查询中使用主键索引时，它还允许对数据的快速访问。</p> 
 <p><img alt="" height="217" src="https://images2.imgbox.com/c9/50/FTOBe9Gz_o.png" width="310"></p> 
 <h3> 三、百万条数据SQL测试</h3> 
 <p><strong><a href="https://libusi.blog.csdn.net/article/details/120063145" rel="nofollow">Navicat存储过程批量生成测试数据</a></strong></p> 
 <pre><code class="language-sql">SELECT count(*) FROM `city`
SELECT count(0) FROM `city`
SELECT count(1) FROM `city`
SELECT count(id) FROM `city`
SELECT count(name) FROM `city`
SELECT count(state) FROM `city`</code></pre> 
 <table align="center" border="1" cellpadding="1" cellspacing="1" style="width:600px;"><tbody><tr><td style="width:136px;"><strong>sql</strong></td><td style="width:184px;"><strong>结果</strong></td><td style="width:479px;"><strong>耗时</strong></td></tr><tr><td style="width:136px;">count(*)</td><td style="width:184px;">3012048</td><td style="width:479px;">0.846s</td></tr><tr><td style="width:136px;">count(1)</td><td style="width:184px;">3012048</td><td style="width:479px;">0.850s</td></tr><tr><td style="width:136px;">count(id)</td><td style="width:184px;">3012048</td><td style="width:479px;">0.974s</td></tr><tr><td style="width:136px;">count(name)</td><td style="width:184px;">3012000</td><td style="width:479px;">1.032s</td></tr><tr><td style="width:136px;">count(state)</td><td style="width:184px;">3012000</td><td style="width:479px;">1.027s</td></tr></tbody></table> 
 <p><span style="color:#ff9900;"><strong>有用请点赞，养成良好习惯！</strong></span></p> 
 <p><span style="color:#ff9900;"><strong>疑问交流鼓励请留言！</strong></span></p> 
</blockquote> 
<hr id="hr-toc">
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84b9d58fa590524232af3d1ad76d1666/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">flutter 解决webview关闭页面后仍然播放声音的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/74a4954518b920b96154204b9dd68fd0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot整合FTP文件服务器--图片上传到FTP图片服务器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>