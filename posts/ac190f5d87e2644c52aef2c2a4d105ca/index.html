<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nodejs学习 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nodejs学习" />
<meta property="og:description" content="node概念 前端运行环境（浏览器） 后端的运行环境（Node.js） nodejs是一个基于chrome V8引擎的的运行环境
终端常用 FS文件系统模块 提供一系列方法和属性来满足用户对文件的操作需求。
使用时需要导入
const fs=require(&#39;fs&#39;) //类似头文件
1、fs.readFile()读取文件 fs.readFile ( path ，options , callback（ err, dataStr） )
参数1：必选参数，字符串表示文件路径
参数2：可选参数，表示读取文件的编码格式
参数3：必选参数，读取成功后通过回调来拿读取结果（读取成功 err=null , 读取失败err为错误对象，dataStr为undefined）
2、fs.writeFile()写入文件 fs.writeFile ( path ，data ，options , callback（ err） )
参数1：必选参数，字符串表示文件路径
参数2：必选参数，写入内容
参数3：可选参数，以什么格式写入
参数3：必选参数，读取成功后通过回调来拿读取结果（写入成功 err=null , 写入失败err为错误对象）
path路径模块 1、path.join()：把多个路径片段拼接为完整路径 2、path.basename()：从路径中获取文件名 第一个参数：必选路径名
第二个参数：要删除的文件扩展名
3、path.extname()：获取路径中的文件扩展名 http模块 在网络节点中，负责消费资源的电脑叫做客户端，负责对外提供网络资源的电脑叫做服务器。
http模块，可以用来创建web服务器，把一台电脑变为web服务器，向外部提供web服务。
1、创建web服务器 1、导入http模块
2、创建web服务器实例
3、为服务器实例绑定request事件，监听客户端请求
4、启动服务器
2、req请求对象（客户端相关） 3、res响应对象（服务端相关） 4、根据url响应不同的html 1、获取请求的url地址
2、设置默认的相应内容为404
3、判断用户请求的是否为/或/index.html首页
4、判断用户请求的是否为/about.html关于页面
5、设置content-type响应头，防止乱码
6、使用res.end()把内容相应给客户端
模块化 优点 提高代码复用性提高代码可维护性实现按需加载 分类 内置模块 node提供的，包裹fs，path，http等自定义模块 用户自己定义的js文件第三方模块 需要下载的模块集合 ps：使用require加载模块，加载过程会执行模块中的代码" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ac190f5d87e2644c52aef2c2a4d105ca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-24T14:01:24+08:00" />
<meta property="article:modified_time" content="2022-07-24T14:01:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nodejs学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>node概念</h2> 
<h4>前端运行环境（浏览器）</h4> 
<p><img alt="" height="237" src="https://images2.imgbox.com/14/ca/nWw5WXt9_o.png" width="437"></p> 
<h4>后端的运行环境（Node.js）</h4> 
<p>nodejs是一个基于chrome V8引擎的的<span style="color:#fe2c24;">运行环境</span></p> 
<p><img alt="" height="261" src="https://images2.imgbox.com/41/96/cEhdSRAG_o.png" width="438"></p> 
<h2> <img alt="" height="62" src="https://images2.imgbox.com/3d/f2/f8kbXvDH_o.png" width="631"></h2> 
<p></p> 
<hr> 
<h2>终端常用</h2> 
<p><img alt="" height="130" src="https://images2.imgbox.com/5f/cd/xKQliqK2_o.png" width="314"></p> 
<hr> 
<h2>FS文件系统模块</h2> 
<p>提供一系列方法和属性来满足用户对文件的操作需求。</p> 
<p>使用时需要导入</p> 
<blockquote> 
 <p>const fs=require('fs')      //类似头文件</p> 
</blockquote> 
<h4>1、fs.readFile()读取文件</h4> 
<blockquote> 
 <p>fs.readFile ( path ，options , callback（ err, dataStr） )</p> 
</blockquote> 
<p>参数1：必选参数，字符串表示文件路径</p> 
<p>参数2：可选参数，表示读取文件的编码格式</p> 
<p>参数3：必选参数，读取成功后通过回调来拿读取结果（读取成功 err=null , 读取失败err为错误对象，dataStr为undefined）</p> 
<p><img alt="" height="266" src="https://images2.imgbox.com/61/0d/W1CVlK7o_o.png" width="863"></p> 
<h4> 2、fs.writeFile()写入文件</h4> 
<blockquote> 
 <p>fs.writeFile ( path ，data ，options , callback（ err） )</p> 
</blockquote> 
<p>参数1：必选参数，字符串表示文件路径</p> 
<p>参数2：必选参数，写入内容</p> 
<p>参数3：可选参数，以什么格式写入</p> 
<p>参数3：必选参数，读取成功后通过回调来拿读取结果（写入成功 err=null , 写入失败err为错误对象）</p> 
<p><img alt="" height="201" src="https://images2.imgbox.com/7e/b9/8wixJIbk_o.png" width="932"></p> 
<hr> 
<h2>path路径模块</h2> 
<h4>1、path.join()：把多个路径片段拼接为完整路径</h4> 
<p><img alt="" height="130" src="https://images2.imgbox.com/a6/3d/oajZHCoZ_o.png" width="389"></p> 
<h4> 2、path.basename()：从路径中获取文件名</h4> 
<p>第一个参数：必选路径名</p> 
<p>第二个参数：要删除的文件扩展名</p> 
<p><img alt="" height="56" src="https://images2.imgbox.com/ec/6a/5pHpdikw_o.png" width="354"></p> 
<h4> 3、path.extname()：获取路径中的文件扩展名</h4> 
<p> <img alt="" height="125" src="https://images2.imgbox.com/f7/8a/sfRwsF22_o.png" width="264"></p> 
<p></p> 
<hr> 
<h2>http模块 </h2> 
<p>在网络节点中，负责消费资源的电脑叫做客户端，负责对外提供网络资源的电脑叫做服务器。</p> 
<p>http模块，可以用来创建<span style="color:#fe2c24;">web服务器</span>，把一台电脑变为web服务器，向外部提供web服务。</p> 
<h4> 1、创建web服务器</h4> 
<p>1、导入http模块</p> 
<p><img alt="" height="92" src="https://images2.imgbox.com/9d/bb/xEGrm2ea_o.png" width="983"></p> 
<p>2、创建web服务器实例</p> 
<p><img alt="" height="93" src="https://images2.imgbox.com/0f/8b/Ka2NSjvY_o.png" width="782"></p> 
<p>3、为服务器实例绑定request事件，监听客户端请求</p> 
<p><img alt="" height="240" src="https://images2.imgbox.com/5f/ed/qfSzY4G6_o.png" width="989"></p> 
<p>4、启动服务器</p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/6b/41/KSaE6eUw_o.png" width="825"></p> 
<h4> 2、req请求对象（客户端相关）</h4> 
<p><img alt="" height="522" src="https://images2.imgbox.com/a6/2b/SOxXaSxS_o.png" width="1137"></p> 
<h4> 3、res响应对象（服务端相关）</h4> 
<p><img alt="" height="333" src="https://images2.imgbox.com/a6/f3/y2ioLNxh_o.png" width="982"></p> 
<h4>4、根据url响应不同的html</h4> 
<p>1、获取请求的url地址</p> 
<p>2、设置默认的相应内容为404</p> 
<p>3、判断用户请求的是否为/或/index.html首页</p> 
<p>4、判断用户请求的是否为/about.html关于页面</p> 
<p>5、设置content-type响应头，防止乱码</p> 
<p>6、使用res.end()把内容相应给客户端</p> 
<p><img alt="" height="459" src="https://images2.imgbox.com/36/8b/y2Ms46O2_o.png" width="1180"></p> 
<hr> 
<h2>模块化</h2> 
<h3>优点</h3> 
<ol><li>提高代码复用性</li><li>提高代码可维护性</li><li>实现按需加载</li></ol> 
<h3>分类</h3> 
<ol><li>内置模块 
  <ol><li>node提供的，包裹fs，path，http等</li></ol></li><li>自定义模块 
  <ol><li>用户自己定义的js文件</li></ol></li><li>第三方模块 
  <ol><li>需要下载的模块集合 </li></ol></li></ol> 
<p>ps：使用require加载模块，加载过程会执行模块中的代码</p> 
<h3>共享模块作用域中的成员（暴露）</h3> 
<p><strong>module对象</strong>：每个自定义模块中都有一个module对象，存储了和当前模块有关的信息。</p> 
<p><strong>module.exports对象</strong>：将模块的成员共享出去，使用require引入模块时得到的时module。exports所指定的对象。</p> 
<p><strong>exports对象</strong>：是module.exports的简化写法</p> 
<p><span style="color:#fe2c24;">require得到的永远是<strong>module.exports指向的对象</strong></span></p> 
<p><img alt="" height="261" src="https://images2.imgbox.com/db/7c/wUtjblJh_o.png" width="1074"></p> 
<hr> 
<h2>npm与包</h2> 
<p> 第三方模块又叫做包。</p> 
<p>npm：包管理工具，用于下载管理包</p> 
<h3>npm使用</h3> 
<h4><strong>1、安装</strong></h4> 
<p>npm i 完整的包名</p> 
<p>安装完成后，项目下会多了node_modules的文件夹和package-lock.json配置文件</p> 
<p><span style="color:#fe2c24;"><strong>node_modules</strong></span>：存放所有已安装到项目中的包</p> 
<p><span style="color:#fe2c24;"><strong>package-lock.json</strong></span>：记录node_module目录下每一个包的下载信息。</p> 
<h4>2、卸载</h4> 
<p>npm unistall 包名</p> 
<p>卸载的同时package.json中会同步消失</p> 
<h4>3、包管理配置文件</h4> 
<p>由于node_module太大，不适合git管理，因此不上传node_module,而是用package.json来记录用了那些包，这时使用npm i可以下载所有依赖</p> 
<p><span style="color:#fe2c24;">package.json：</span>包管理配置文件，用来记录与项目有关的一些配置信息</p> 
<p>项目的名称，版本，描述</p> 
<p>项目都用到了那些包</p> 
<h4>4、创建package.json这个包管理配置文件</h4> 
<p>npm init -y</p> 
<h3>5、devDependecies（开发依赖包）与dependecies（核心依赖包）</h3> 
<p>某些包只在开发阶段会用到，在项目上线后不会用到，可以将其放在devDepencies中</p> 
<p>npm i 包名 -D</p> 
<h3>6、镜像</h3> 
<p>直接下载外国服务器很慢，因此可以用淘宝镜像服务器下载。</p> 
<p>镜像：一种资源的完全复制</p> 
<p><strong>使用镜像源</strong></p> 
<p>npm config get registry :查看服务器地址</p> 
<p>npm config set registry=https://registry.npm.taobao.org/</p> 
<hr> 
<h2>模块的加载机制</h2> 
<p>模块在第一次加载后会缓存，加载后再次使用不会重复执行。</p> 
<h4>自定义模块的加载机制</h4> 
<p><img alt="" height="160" src="https://images2.imgbox.com/7f/03/808mMUdz_o.png" width="281"></p> 
<h4> 第三方模块的加载</h4> 
<p>若require（）的模块不是一个内置模块，也没有以路径开头。Node.js会从当前模块的父目录开始尝试从/node_module中加载</p> 
<hr> 
<h2>express</h2> 
<p>本质是一个第三方包，是http模块的扩展</p> 
<h3>创建基本的web服务器</h3> 
<p>1、导入express</p> 
<p>2、创建web服务器</p> 
<p>3、调用app.lisite（端口号，启动成功后的回调），启动服务器</p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/7e/2a/et4T4foi_o.png" width="510"></p> 
<h4> 监听get请求</h4> 
<p><img alt="" height="139" src="https://images2.imgbox.com/82/26/ffy74AwM_o.png" width="516"></p> 
<h4> 监听post请求</h4> 
<p><img alt="" height="169" src="https://images2.imgbox.com/0c/2a/WbY9qpMK_o.png" width="524"></p> 
<h4> 响应客户端</h4> 
<p><img alt="" height="209" src="https://images2.imgbox.com/a5/69/mtN8B66R_o.png" width="457"></p> 
<h4> 获取url中携带的query参数</h4> 
<p><img alt="" height="184" src="https://images2.imgbox.com/73/9e/bVYuXYyY_o.png" width="512"></p> 
<h4> 获取url中的动态参数</h4> 
<p><img alt="" height="155" src="https://images2.imgbox.com/0a/5a/jdJ1rXFP_o.png" width="477"></p> 
<h4> 托管静态资源</h4> 
<p>express.static()，可以创建一个静态资源服务器</p> 
<blockquote> 
 <p>app.use(express.static(  "public " ))</p> 
</blockquote> 
<p>通过以上代码可以将public下的文件对外开放了</p> 
<p><img alt="" height="108" src="https://images2.imgbox.com/62/50/pPtvpnwg_o.png" width="704"></p> 
<blockquote> 
 <p>app.use( '/public' , express.static( "public" ) )  //加了访问前缀</p> 
</blockquote> 
<hr> 
<h2>nodemon</h2> 
<p>动态监听 node变化，自动重启，不必要每次都重启</p> 
<h2>Express路由</h2> 
<p>在Express，路由指的是客户端的请求与服务器处理函数之间的映射关系</p> 
<p>Expresss中的路由有三部分组成，分别是<span style="color:#fe2c24;">请求的类型</span>，<span style="color:#fe2c24;">请求的url地址</span>，<span style="color:#fe2c24;">处理函数</span></p> 
<p><img alt="" height="419" src="https://images2.imgbox.com/45/32/hBCIUp4s_o.png" width="669"></p> 
<h2> 模块化路由</h2> 
<ol><li>将路由抽离为单独模块</li><li>创建路由模块对应的js文件</li><li>调用express.router创建路由对象</li><li>想路由对象上挂在具体的路由</li><li>使用module.exports向外共享路由对象</li><li>使用app.use()函数注册路由模块</li></ol> 
<p><img alt="" height="495" src="https://images2.imgbox.com/27/76/XsMvkpAJ_o.png" width="896"></p> 
<p> 使用</p> 
<p>1、导入路由模块</p> 
<p>2、使用app.use注册路由模块 </p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/e4/2e/2TaTC5yS_o.png" width="910"></p> 
<hr> 
<h2>中间件</h2> 
<p>有输入输出的中间处理环节，类似一个过滤的管道</p> 
<h3>express中间件的调用流程</h3> 
<p>当请求到达express的服务器之后，可以连续调用多个中间件，从而对这次请求进行预处理 </p> 
<h2> <img alt="" height="459" src="https://images2.imgbox.com/41/db/OeTei6zM_o.png" width="859"></h2> 
<h3> 中间件的格式</h3> 
<p><img alt="" height="506" src="https://images2.imgbox.com/d2/69/rG5NQEKp_o.png" width="1051"></p> 
<p><strong>next函数： 调用next()向后流转</strong></p> 
<h3>定义一个全局中间件</h3> 
<p><img alt="" height="328" src="https://images2.imgbox.com/2a/3c/gfu8UZDt_o.png" width="732"></p> 
<h3> 定义多个</h3> 
<p>多次使用app.use()</p> 
<p><img alt="" height="415" src="https://images2.imgbox.com/d8/16/LLzsah6a_o.png" width="759"></p> 
<h3>定义局部生效的中间件</h3> 
<h3>不使用app.use()定义，在app.get中间增加参数</h3> 
<p><img alt="" height="415" src="https://images2.imgbox.com/ed/73/VSbctv6O_o.png" width="812"></p> 
<h3> 定义多个<img alt="" height="313" src="https://images2.imgbox.com/4e/6d/fD5s335Z_o.png" width="1071"></h3> 
<h2> 小TIPS</h2> 
<ol><li><span style="color:#fe2c24;">中间件要在路由之前</span></li><li>客户端发送过来的请求，可以连续调用多个中间件进行处理、</li><li>执行完中间件的业务之后，不要忘记调用next</li><li>防止代码混乱，next后不要再写其他</li><li>多个中间件共享res，req对象</li></ol> 
<h2>中间件分类</h2> 
<p><strong>应用级别的中间件</strong></p> 
<p><strong>        通过app.use或者app.get绑定在app上的中间件</strong></p> 
<p><strong>路由级别的中间件</strong></p> 
<p><strong>        绑定在express.Router上的中间件</strong></p> 
<p><strong>错误级别的中间件</strong></p> 
<p><strong>        用于捕获错误，function包含四个参数，（err,req,res,next）</strong></p> 
<p><strong>       </strong><span style="color:#fe2c24;"> 先有抛出错误，后又错误中间件捕获错误</span></p> 
<p><img alt="" height="334" src="https://images2.imgbox.com/f3/95/k75yz3bV_o.png" width="849"></p> 
<p><strong>express内置中间件</strong></p> 
<p><strong>        例子</strong></p> 
<p><strong>        express.static：托管静态资源</strong></p> 
<p><strong>        express.json：解析json格式的数据请求</strong></p> 
<p><strong>        express.urlencoded： 解析url-encoded格式的请求体数据</strong></p> 
<p><strong>       </strong><img alt="" height="197" src="https://images2.imgbox.com/d9/61/ZZuCBlBD_o.png" width="807"></p> 
<p></p> 
<p><strong>第三方的中间件</strong></p> 
<p>        第三方开发的中间件，例如body-parser，使用步骤如下</p> 
<p>        1、npm i body-parser</p> 
<p>        2、使用require导入中间件</p> 
<p>        3、使用app.use()注册并使用中间件</p> 
<p>        <img alt="" height="266" src="https://images2.imgbox.com/26/f4/JltsILA9_o.png" width="529"></p> 
<p></p> 
<hr> 
<h2>Cors</h2> 
<h3>使用cors中间件解决跨域问题</h3> 
<p>1、npm i cors</p> 
<p>2、const cors = require( " cors " )//导入中间件</p> 
<p>3、在路由之前调用app.use( cors )//配置中间件</p> 
<h3>什么是cors</h3> 
<p>跨域资源共享，有一些列HTTP响应头组成，这些HTTP响应头决定浏览器是否能阻止前端js代码跨域获取资源。<span style="color:#fe2c24;">配置了CORS相关的HTTP响应头就可以解决跨域限制。</span></p> 
<p><strong><span style="color:#0d0016;">Access-Control-Allow-</span><span style="color:#fe2c24;">Origin</span></strong></p> 
<p><img alt="" height="66" src="https://images2.imgbox.com/eb/66/MCE6Dr7z_o.png" width="356"></p> 
<p>origin指定了允许访问该资源的url ，那些网页可以访问资源</p> 
<p><strong><span style="color:#0d0016;">Access-Control-Allow-</span><span style="color:#fe2c24;">Headers</span></strong></p> 
<p>cors仅支持9个请求头，<span style="color:#0d0016;">Access-Control-Allow-</span><span style="color:#fe2c24;">Headers</span><span style="color:#0d0016;">允许对额外的请求头声明</span></p> 
<p><img alt="" height="170" src="https://images2.imgbox.com/61/c6/KwEoAoCb_o.png" width="998"></p> 
<p><strong><span style="color:#0d0016;">Access-Control-Allow-</span><span style="color:#fe2c24;">Methods</span></strong></p> 
<p>默认情况，cors仅支持客户端发起GET、POST、HEAD请求</p> 
<p>若希望发起PUT、DDELETE等请求，需要<span style="color:#0d0016;">Access-Control-Allow-</span><span style="color:#fe2c24;">Methods</span>设置支持的方法</p> 
<p><img alt="" height="109" src="https://images2.imgbox.com/b8/dd/McjfaVYU_o.png" width="502"></p> 
<h3> cors的两种请求</h3> 
<h4>简单请求</h4> 
<p>1、get 、head、post之一</p> 
<p>2、头信息不得超过九种字段。。。。</p> 
<h4>预检请求</h4> 
<p>1、请求为get、head、post之外</p> 
<p>2、超出九种字段，包含自定义字段</p> 
<p>3、发送了application/json格式的数据</p> 
<p>发送请求前，浏览器会发送option进行预检，以获知服务器是否允许请求。请求通过后才发送真正的请求。</p> 
<hr> 
<h2>数据库</h2> 
<h4>数据组织机构</h4> 
<p><strong>数据库、数据表、数据行、字段</strong></p> 
<p><img alt="" height="532" src="https://images2.imgbox.com/31/da/z5WVjHfU_o.png" width="1200"></p> 
<p>1、每个项目都有对应的单独数据库</p> 
<p>2、不同的数据，存储在数据库的不同表中，例如用户存储到users表中，图书存储在books表中</p> 
<p>3、每个表中存储那些信息由字段决定，例如user中由id 、name、password</p> 
<p>4、表中的行代表每一条具体的数据</p> 
<h2>字段属性</h2> 
<p>PK（Primary Key）：主键唯一标识</p> 
<p>NN（Not Null）：值不为空</p> 
<p>UQ（Unique）：值唯一</p> 
<p>AI（Auto Increment）：值自动增长</p> 
<h3>在项目中使用mySQL</h3> 
<p>1、安装mysql模块</p> 
<p>2、通过mysql连接MySql数据库</p> 
<p>3、通过mysql模块执行SQL语句</p> 
<p><img alt="" height="414" src="https://images2.imgbox.com/b6/c0/uBekdKjs_o.png" width="875"></p> 
<h3> 如何使用</h3> 
<h3>增</h3> 
<p>1、用？占位符，紧接在语句之后加入数组</p> 
<p>2、通过res的对象affectedRows可判断是否成功</p> 
<p><img alt="" height="408" src="https://images2.imgbox.com/a4/1c/cHIZyZql_o.png" width="923"></p> 
<h4> 简化写法</h4> 
<p><img alt="" height="427" src="https://images2.imgbox.com/04/20/blkMOLN3_o.png" width="922"></p> 
<h3>删</h3> 
<h3><img alt="" height="410" src="https://images2.imgbox.com/3f/ec/PBTKWAR6_o.png" width="901"></h3> 
<p></p> 
<h3>改</h3> 
<h3><img alt="" height="402" src="https://images2.imgbox.com/26/ae/UK09vsch_o.png" width="939"></h3> 
<h4> 简化</h4> 
<p><img alt="" height="426" src="https://images2.imgbox.com/3b/db/C3Rev5Bh_o.png" width="914"></p> 
<p></p> 
<h3>查<img alt="" height="304" src="https://images2.imgbox.com/7d/3c/paaZtUTk_o.png" width="954"></h3> 
<hr> 
<p></p> 
<p></p> 
<h2>身份认证</h2> 
<p><strong>服务端渲染，推荐使用session认证</strong></p> 
<p><strong>对于前后端分离，推荐使用JWT认证机制</strong></p> 
<h3><strong>Session认证（非跨域）</strong></h3> 
<p><img alt="" height="552" src="https://images2.imgbox.com/22/63/rrcfxfZi_o.png" width="1069"></p> 
<p><span style="color:#fe2c24;"> 将用户信息存储在服务器内存中，同时生成对应的cookie。发送给浏览器，浏览器再次发送时携带cookie。</span></p> 
<h3><strong>cookie</strong></h3> 
<p>cookie是存储在用户浏览器中一段不超过4kb的字符串，它由Name，Value何以他控制字段组成。</p> 
<p>每个域名的cookie各自独立。每当发起请求会将当前域名未过期的cookie全部发送。</p> 
<p><img alt="" height="588" src="https://images2.imgbox.com/6a/4e/hlkaoSky_o.png" width="1200"></p> 
<h4>在Express中使用Session验证 </h4> 
<p><img alt="" height="405" src="https://images2.imgbox.com/bf/62/SmiEKemk_o.png" width="899"></p> 
<p>配置成功后可以通过req.session来访问和使用session对象，从而存储用户的关键信息。</p> 
<hr> 
<h2>JWT认证机制（跨域）</h2> 
<p><img alt="" height="519" src="https://images2.imgbox.com/18/f5/K9e81qug_o.png" width="918"></p> 
<p> 服务器将用户信息加密为token返回给客户端，客户端再次发送时将Authorization字段发送给服务其，服务器解密在认证</p> 
<h3>jwt组成部分</h3> 
<p>Header：安全性，</p> 
<p>Payload：用户信息加密后的字符串，</p> 
<p>Signature：安全性</p> 
<h2>Express中使用JWT</h2> 
<h3>导入包</h3> 
<p>jsonwebtoken：生成jwt字符串</p> 
<p>express-jwt：将jwt字符串解析为json字符串</p> 
<h3>登录成功后发送token</h3> 
<p>sign():三个参数</p> 
<p>1、用户的信息对象</p> 
<p>2、加密的密钥（任意字符串）</p> 
<p>3、配置对象，配置当前token的有效期</p> 
<p><img alt="" height="552" src="https://images2.imgbox.com/ae/d4/Mr5puzRW_o.png" width="1145"></p> 
<h3>将jwt字符串返回为json对象</h3> 
<p><img alt="" height="242" src="https://images2.imgbox.com/28/aa/dvxjdj70_o.png" width="1013"></p> 
<h4> 使用user获取用户信息<img alt="" height="525" src="https://images2.imgbox.com/1b/a0/XJzEtBJV_o.png" width="1200"></h4> 
<h2> 捕获解析失败的错误</h2> 
<p>通过错误中间件捕获错误 </p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/f9/e9/GKl3n9mW_o.png" width="828"></p> 
<ul><li> <h2>中间件顺序中，错误中间件为倒数第一位，路由中间件为倒数第二位。其他随意，因为路由中间件要使用其他中间件添加的对象，错误中间件要捕获所有的错误。</h2> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3cd897a33156495903e4d0aa8bb3ed17/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">射频单位解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/00e496a30bc116136c7eb7148989466a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java 自定义比较器用法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>