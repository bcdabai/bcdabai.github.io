<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Linux】linux_mysql8.0_安装配置，以及忘记密码重置密码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Linux】linux_mysql8.0_安装配置，以及忘记密码重置密码" />
<meta property="og:description" content="注意：mysql8.0及以上版本如果要设置忽略大小写，必须要在数据库初始化之前加上忽略的配置，安装完成之后再去改配置行不通，会导致无法启动
删除自带的数据库 rpm -qa |grep mysql rpm -qa |grep mariadb rpm -e --nodeps mariadb-libs-5.5.68-1.el7.x86_64 开始安装 1）、将安装包上传至服务器并解压：
tar -xvf mysql-8.0.13-linux-glibc2.12-x86_64.tar.xz 2）、将解压后的文件夹重名名为“mysql”，并将其移动到 /usr/local/src目录下面
mv mysql-8.0.13-linux-glibc2.12-x86_64 mysql mv ./mysql/ /usr/local/src/ 3）、切换目录到usr/local/src下，并使用命令创建用户组和用户
cd /usr/local/src/ groupadd mysql useradd -r -g mysql mysql 4）、为/usr/local/src/mysql/目录下所有文件授权
5）、在/usr/local/src/mysql/目录下新建一个文件夹data
mkdir data 6）、修改/usr/local/src/mysql/当前目录的用户
执行命令时可以看到本目录下所有的文件夹和文件的拥有者发生了变化（变更前拥有者是mysql，变更后拥有者是root)
命令：
chown -R root:root ./ chown -R mysql:mysql data 7）、进入support-files目录，并在该目录下新建一个文件，文件名为my-default.cnf，并赋所有权限。再把该文件复制到/etc目录下，并将文件重命名为my.cnf
创建文件：
touch my-default.cnf 赋权限：
chmod 777 ./my-default.cnf 复制文件到/etc目录下并重命名为my.cnf：
cp /usr/local/src/mysql/support-files/my-default.cnf /etc/my.cnf 8）、打开/etc/my.cnf文件，并将配置写入该文件并保存。
文件内容：
[mysqld] # Remove leading # and set to the amount of RAM for the most important data # cache in MySQL." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cc27d9c6347504fc40be433d297db8fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-14T13:32:56+08:00" />
<meta property="article:modified_time" content="2022-09-14T13:32:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Linux】linux_mysql8.0_安装配置，以及忘记密码重置密码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>注意</strong>：<em>mysql8.0及以上版本如果要设置忽略大小写，必须要在数据库初始化之前加上忽略的配置，安装完成之后再去改配置行不通，会导致无法启动</em></p> 
<h3><a id="_2"></a>删除自带的数据库</h3> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -qa <span class="token operator">|</span><span class="token function">grep</span> mysql
<span class="token function">rpm</span> -qa <span class="token operator">|</span><span class="token function">grep</span> mariadb
</code></pre> 
<p><img src="https://images2.imgbox.com/96/9c/lh71N2eb_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"> <span class="token function">rpm</span> -e --nodeps mariadb-libs-5.5.68-1.el7.x86_64
</code></pre> 
<h3><a id="_15"></a>开始安装</h3> 
<p>1）、将安装包上传至服务器并解压：</p> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -xvf mysql-8.0.13-linux-glibc2.12-x86_64.tar.xz
</code></pre> 
<p>2）、将解压后的文件夹重名名为“mysql”，并将其移动到 /usr/local/src目录下面</p> 
<pre><code class="prism language-bash"><span class="token function">mv</span> mysql-8.0.13-linux-glibc2.12-x86_64 mysql
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">mv</span> ./mysql/ /usr/local/src/
</code></pre> 
<p>3）、切换目录到usr/local/src下，并使用命令创建用户组和用户</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /usr/local/src/
<span class="token function">groupadd</span> mysql
<span class="token function">useradd</span> -r -g mysql mysql
</code></pre> 
<p>4）、为/usr/local/src/mysql/目录下所有文件授权<br> <img src="https://images2.imgbox.com/0e/fd/jdVKjpom_o.png" alt="在这里插入图片描述"></p> 
<p>5）、在/usr/local/src/mysql/目录下新建一个文件夹data</p> 
<p><img src="https://images2.imgbox.com/70/36/XNcjWLir_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token function">mkdir</span> data
</code></pre> 
<p>6）、修改/usr/local/src/mysql/当前目录的用户</p> 
<p>执行命令时可以看到本目录下所有的文件夹和文件的拥有者发生了变化（变更前拥有者是mysql，变更后拥有者是root)<br> 命令：</p> 
<pre><code class="prism language-bash"><span class="token function">chown</span> -R root:root ./
<span class="token function">chown</span> -R mysql:mysql data
</code></pre> 
<p><img src="https://images2.imgbox.com/49/26/ybfjGpIW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/97/91/QMw70QWq_o.png" alt="在这里插入图片描述"></p> 
<p>7）、进入support-files目录，并在该目录下新建一个文件，文件名为my-default.cnf，并赋所有权限。再把该文件复制到/etc目录下，并将文件重命名为my.cnf<br> 创建文件：</p> 
<pre><code class="prism language-bash"><span class="token function">touch</span> my-default.cnf
</code></pre> 
<p>赋权限：</p> 
<pre><code class="prism language-bash"><span class="token function">chmod</span> <span class="token number">777</span> ./my-default.cnf
</code></pre> 
<p>复制文件到/etc目录下并重命名为my.cnf：</p> 
<pre><code class="prism language-bash"><span class="token function">cp</span> /usr/local/src/mysql/support-files/my-default.cnf /etc/my.cnf
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/30/jFdAQ6fF_o.png" alt="在这里插入图片描述"></p> 
<p>8）、打开/etc/my.cnf文件，并将配置写入该文件并保存。<br> 文件内容：</p> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">mysqld</span><span class="token punctuation">]</span></span>
<span class="token punctuation">#</span> <span class="token variable">Remove</span> <span class="token variable">leading</span> <span class="token punctuation">#</span> <span class="token variable">and</span> <span class="token variable">set</span> <span class="token variable">to</span> <span class="token variable">the</span> <span class="token variable">amount</span> <span class="token variable">of</span> <span class="token variable">RAM</span> <span class="token variable">for</span> <span class="token variable">the</span> <span class="token variable">most</span> <span class="token variable">important</span> <span class="token variable">data</span>
<span class="token punctuation">#</span> <span class="token variable">cache</span> <span class="token variable">in</span> <span class="token variable">MySQL</span><span class="token punctuation">.</span> <span class="token variable">Start</span> <span class="token variable">at</span> <span class="token number">70</span><span class="token punctuation">%</span> <span class="token variable">of</span> <span class="token variable">total</span> <span class="token variable">RAM</span> <span class="token variable">for</span> <span class="token variable">dedicated</span> <span class="token variable">server</span><span class="token punctuation">,</span> <span class="token variable">else</span> <span class="token number">10</span><span class="token punctuation">%</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">innodb_buffer_pool_size</span> <span class="token punctuation">=</span> <span class="token number">128</span><span class="token variable">M</span>
<span class="token punctuation">#</span> <span class="token variable">Remove</span> <span class="token variable">leading</span> <span class="token punctuation">#</span> <span class="token variable">to</span> <span class="token variable">turn</span> <span class="token variable">on</span> <span class="token variable">a</span> <span class="token variable">very</span> <span class="token variable">important</span> <span class="token variable">data</span> <span class="token variable">integrity</span> <span class="token variable">option</span><span class="token punctuation">:</span> <span class="token variable">logging</span>
<span class="token punctuation">#</span> <span class="token variable">changes</span> <span class="token variable">to</span> <span class="token variable">the</span> <span class="token variable">binary</span> <span class="token variable">log</span> <span class="token variable">between</span> <span class="token variable">backups</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">log_bin</span>
<span class="token punctuation">#</span> <span class="token variable">These</span> <span class="token variable">are</span> <span class="token variable">commonly</span> <span class="token variable">set</span><span class="token punctuation">,</span> <span class="token variable">remove</span> <span class="token variable">the</span> <span class="token punctuation">#</span> <span class="token variable">and</span> <span class="token variable">set</span> <span class="token variable">as</span> <span class="token variable">required</span><span class="token punctuation">.</span>

<span class="token variable">basedir</span> <span class="token punctuation">=</span> <span class="token punctuation">/</span><span class="token variable">usr</span><span class="token punctuation">/</span><span class="token variable">local</span><span class="token punctuation">/</span><span class="token variable">src</span><span class="token punctuation">/</span><span class="token variable">mysql</span>
<span class="token punctuation">#</span><span class="token variable">MySQL的安装路径</span>

<span class="token variable">datadir</span> <span class="token punctuation">=</span> <span class="token punctuation">/</span><span class="token variable">usr</span><span class="token punctuation">/</span><span class="token variable">local</span><span class="token punctuation">/</span><span class="token variable">src</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">/</span><span class="token variable">data</span>
<span class="token punctuation">#</span><span class="token variable">MySQL数据库文件存放路径</span>

<span class="token variable">socket</span> <span class="token punctuation">=</span> <span class="token punctuation">/</span><span class="token variable">tmp</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">.</span><span class="token variable">sock</span>

<span class="token punctuation">#</span><span class="token variable">skip-grant-tables</span>
<span class="token punctuation">#</span><span class="token variable">该参数可以让MYSQL服务器不加载权限判断，任何用户都能访问数据库。也就是说，启用这个参数之后，数据库的安全性会降低</span>

<span class="token variable">log-error</span> <span class="token punctuation">=</span> <span class="token punctuation">/</span><span class="token variable">usr</span><span class="token punctuation">/</span><span class="token variable">local</span><span class="token punctuation">/</span><span class="token variable">src</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">/</span><span class="token variable">data</span><span class="token punctuation">/</span><span class="token variable">error</span><span class="token punctuation">.</span><span class="token variable">log</span>
<span class="token punctuation">#</span><span class="token variable">报错日志存放路径</span>

<span class="token variable">pid-file</span> <span class="token punctuation">=</span> <span class="token punctuation">/</span><span class="token variable">usr</span><span class="token punctuation">/</span><span class="token variable">local</span><span class="token punctuation">/</span><span class="token variable">src</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">/</span><span class="token variable">data</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">.</span><span class="token variable">pid</span>

<span class="token punctuation">#</span><span class="token variable">此目录被MySQL用来保存临时文件</span><span class="token punctuation">.</span><span class="token variable">例如</span><span class="token punctuation">,</span><span class="token variable">它被用来处理基于磁盘的大型排序</span><span class="token punctuation">,</span><span class="token variable">和内部排序一样</span><span class="token punctuation">.</span><span class="token variable">以及简单的临时表</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">如果你不创建非常大的临时文件</span><span class="token punctuation">,</span><span class="token variable">将其放置到</span> <span class="token variable">swapfs</span><span class="token punctuation">/</span><span class="token variable">tmpfs</span> <span class="token variable">文件系统上也许比较好</span><span class="token punctuation">.</span><span class="token variable">另一种选择是你也可以将其放置在独立的磁盘上</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">你可以使用”</span><span class="token punctuation">;</span><span class="token variable">”来放置多个路径</span><span class="token punctuation">,</span><span class="token variable">他们会按照roud-robin方法被轮询使用</span><span class="token punctuation">.</span>
<span class="token variable">tmpdir</span> <span class="token punctuation">=</span> <span class="token punctuation">/</span><span class="token variable">tmp</span>

<span class="token variable">port</span> <span class="token punctuation">=</span> <span class="token number">3306</span>
<span class="token block keyword">#MySQL端口（默认是</span><span class="token number">3306</span><span class="token variable">）</span>

<span class="token variable">lower_case_table_names</span> <span class="token punctuation">=</span> <span class="token number">1</span>
<span class="token block keyword">#不区分大小写(</span><span class="token number">1</span><span class="token variable">是不区分大小写，</span><span class="token number">0</span><span class="token variable">是区分大小写</span><span class="token punctuation">)</span>

<span class="token punctuation">#</span> <span class="token variable">server_id</span> <span class="token punctuation">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">socket</span> <span class="token punctuation">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span><span class="token variable">lower_case_table_names</span> <span class="token punctuation">=</span> <span class="token number">1</span>
<span class="token variable">max_allowed_packet</span><span class="token punctuation">=</span><span class="token number">32</span><span class="token variable">M</span>
<span class="token variable">default-authentication-plugin</span> <span class="token punctuation">=</span> <span class="token variable">mysql_native_password</span>
<span class="token punctuation">#</span><span class="token variable">lower_case_file_system</span> <span class="token punctuation">=</span> <span class="token variable">on</span>
<span class="token punctuation">#</span><span class="token variable">lower_case_table_names</span> <span class="token punctuation">=</span> <span class="token number">1</span>
<span class="token variable">log_bin_trust_function_creators</span> <span class="token punctuation">=</span> <span class="token variable">ON</span>
<span class="token punctuation">#</span> <span class="token variable">Remove</span> <span class="token variable">leading</span> <span class="token punctuation">#</span> <span class="token variable">to</span> <span class="token variable">set</span> <span class="token variable">options</span> <span class="token variable">mainly</span> <span class="token variable">useful</span> <span class="token variable">for</span> <span class="token variable">reporting</span> <span class="token variable">servers</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">The</span> <span class="token variable">server</span> <span class="token variable">defaults</span> <span class="token variable">are</span> <span class="token variable">faster</span> <span class="token variable">for</span> <span class="token variable">transactions</span> <span class="token variable">and</span> <span class="token variable">fast</span> <span class="token variable">SELECTs</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">Adjust</span> <span class="token variable">sizes</span> <span class="token variable">as</span> <span class="token variable">needed</span><span class="token punctuation">,</span> <span class="token variable">experiment</span> <span class="token variable">to</span> <span class="token variable">find</span> <span class="token variable">the</span> <span class="token variable">optimal</span> <span class="token variable">values</span><span class="token punctuation">.</span>
<span class="token punctuation">#</span> <span class="token variable">join_buffer_size</span> <span class="token punctuation">=</span> <span class="token number">128</span><span class="token variable">M</span>
<span class="token punctuation">#</span> <span class="token variable">sort_buffer_size</span> <span class="token punctuation">=</span> <span class="token number">2</span><span class="token variable">M</span>
<span class="token punctuation">#</span> <span class="token variable">read_rnd_buffer_size</span> <span class="token punctuation">=</span> <span class="token number">2</span><span class="token variable">M</span> 
<span class="token variable">sql_mode</span><span class="token punctuation">=</span><span class="token variable">NO_ENGINE_SUBSTITUTION</span><span class="token punctuation">,</span><span class="token variable">STRICT_TRANS_TABLES</span>

<span class="token variable">skip-name-resolve</span>
<span class="token punctuation">#</span><span class="token variable">该选项禁用DNS解析</span><span class="token punctuation">,</span><span class="token variable">解决mysql在远程访问时非常慢的问题。不过，这样的话就不能在MySQL的授权表中使用主机名了而只能用ip格式。</span>
</code></pre> 
<p>9）、初始化数据库，并会自动生成随机密码，记下等下登陆要用<br> 初始化命令：</p> 
<pre><code class="prism language-bash">/usr/local/src/mysql/bin/mysqld --initialize --user<span class="token operator">=</span>mysql --basedir<span class="token operator">=</span>/usr/local/src/mysql --datadir<span class="token operator">=</span>/usr/local/src/mysql/data
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/e2/XpMOsaXt_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>初始化完成后可以看到data目录下出现了一些文件<br> 如果需要重新初始化可以把这些文件删除，重新执行初始化语句<img src="https://images2.imgbox.com/fc/83/eQVUHd7z_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><strong>正常情况下：</strong><br> 可以看到初始密码是：wyZ,0JN+e#S-<br> <img src="https://images2.imgbox.com/6f/a3/JZFRw4ci_o.png" alt="在这里插入图片描述"><br> <strong>但是我初始化的时候并没有看到这些信息：</strong><br> 我发现在data目录下有个error.log可以查看到初始密码<br> <img src="https://images2.imgbox.com/d7/5a/qt4KIltJ_o.png" alt="在这里插入图片描述"></p> 
<p>10）设置开机自动启动mysql的功能<br> 1、切换目录：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /usr/local/src/mysql/support-files
</code></pre> 
<p>2、 将当前目录下的mysql.server文件拷贝到/etc/init.d/目录下，并将文件重命名为mysql，</p> 
<pre><code class="prism language-bash"><span class="token function">cp</span> mysql.server /etc/init.d/mysql
</code></pre> 
<p>3、给/etc/init.d/mysql文件赋予可执行权限：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /etc/rc.d/init.d/
<span class="token function">chmod</span> +x mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/df/fa/U73KbNQr_o.png" alt="在这里插入图片描述"></p> 
<p>11）、为了开机能自动启动，需要向linux系统注册服务，命令是：</p> 
<pre><code class="prism language-bash"><span class="token function">chkconfig</span> --add mysql
</code></pre> 
<p>如果该命令执行报错，请看这篇文章的第11点进行解决：https://blog.csdn.net/weixin_42109071/article/details/89375748<br> 并使用命令</p> 
<pre><code class="prism language-bash"><span class="token function">chkconfig</span> --list mysql
</code></pre> 
<p>查看是否成功，只要有信息展示说明就是成功了<br> <img src="https://images2.imgbox.com/61/55/AFnhWIjx_o.png" alt="在这里插入图片描述"></p> 
<p>12）、打开/etc/ld.so.conf文件，并把路径“ mysql安装路径/lib ”添加到该文件中，不然会报错。（注意，etc目录下有一个跟该文件同名的文件夹，但我们此处要编辑的是文件而不是文件夹，不要搞错了。）<br> <img src="https://images2.imgbox.com/6f/e3/m51D6oqN_o.png" alt="在这里插入图片描述"></p> 
<p>13）、配置环境变量<br> 1、将“ /usr/local/src/mysql/bin” 和“ /usr/local/src/mysql/lib ”的路径添加到/etc/profile文件的export PATH=$PATH: 冒号后面并保存该文件（如果有多个环境变量，需使用英文冒号分隔开）</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/profile
</code></pre> 
<p>环境变量一、/usr/local/src/mysql/bin<br> 环境变量二、/usr/local/src/mysql/lib<br> 两个环境变量之间使用英文冒号隔开</p> 
<pre><code class="prism language-handlebars"><span class="token variable">export</span> <span class="token variable">PATH</span><span class="token punctuation">=</span><span class="token variable">$PATH</span><span class="token punctuation">:</span><span class="token punctuation">/</span><span class="token variable">usr</span><span class="token punctuation">/</span><span class="token variable">local</span><span class="token punctuation">/</span><span class="token variable">src</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">/</span><span class="token variable">bin</span><span class="token punctuation">:</span><span class="token punctuation">/</span><span class="token variable">usr</span><span class="token punctuation">/</span><span class="token variable">local</span><span class="token punctuation">/</span><span class="token variable">src</span><span class="token punctuation">/</span><span class="token variable">mysql</span><span class="token punctuation">/</span><span class="token variable">lib</span>
</code></pre> 
<p>2、为了在不重启的前提下可以让环境变量立即生效，需执行命令：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<ol start="14"><li>启动mysql服务：</li></ol> 
<pre><code class="prism language-bash"><span class="token function">service</span> mysql start
</code></pre> 
<p>15）、使用mysql -uroot -p登录mysql，并输入随机生成的密码。<br> 这是刚刚生成的随机密码</p> 
<pre><code class="prism language-bash"><span class="token operator">!</span>dGlnxo.c5<span class="token punctuation">)</span>L
</code></pre> 
<h4><a id="_244"></a>可能遇到的问题：找不到初始密码，或者以后忘记密码了</h4> 
<h5><a id="_246"></a>免密码登陆</h5> 
<p>1：免密码登陆<br> 找到mysql配置文件:my.cnf，<br> 在【mysqld】模块添加：</p> 
<pre><code class="prism language-handlebars"><span class="token variable">skip-grant-tables</span>
</code></pre> 
<p>保存退出；</p> 
<p>2：//使配置生效<br> 重启mysql服务：</p> 
<pre><code class="prism language-bash"><span class="token function">service</span> mysql restart
</code></pre> 
<p>3：//将旧密码置空</p> 
<pre><code class="prism language-bash">mysql -u root -p    //提示输入密码时直接敲回车。
//选择数据库
use mysql
//将密码置空
update user <span class="token builtin class-name">set</span> authentication_string <span class="token operator">=</span> <span class="token string">''</span> where user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>
//退出
quit
</code></pre> 
<p>4:去除免密码登陆<br> 删掉步骤1的语句</p> 
<pre><code class="prism language-handlebars"><span class="token variable">skip-grant-tables</span>
</code></pre> 
<p>重启服务</p> 
<pre><code class="prism language-bash"><span class="token function">service</span> mysqld restart
</code></pre> 
<p>5：//修改密码</p> 
<pre><code class="prism language-bash">mysql -u root -p  //提示输入密码时直接敲回车，刚刚已经将密码置空了
ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'abc123@xxx'</span><span class="token punctuation">;</span>//<span class="token string">'abc123@xxx'</span>  密码形式过于简单则会报错
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/3c/fBB7zZM5_o.png" alt="在这里插入图片描述"></p> 
<p>如果报错 ERROR 2002，提示因丢失了套接字文件导致不能连接mysql<br> 解决：通过reboot命令重启一下服务器可以解决该问题</p> 
<h4><a id="_304"></a>修改初始密码</h4> 
<p>再次进入mysql，并输入初始密码（随机生成），同时把初始密码修改为自己想要的密码，<br> 命令为：</p> 
<pre><code class="prism language-bash">ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'新密码'</span><span class="token punctuation">;</span>  <span class="token comment">#(密码设置的过于简单可能报错)</span>
FLUSH PRIVILEGES<span class="token punctuation">;</span> <span class="token comment">#立即生效</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/54/ef/KwyRjB3c_o.png" alt="在这里插入图片描述"><br> 16）、开启远程连接：</p> 
<pre><code class="prism language-bash">use mysql<span class="token punctuation">;</span> <span class="token comment">#使用该命令进入“mysql”这个自带的库</span>
<span class="token keyword">select</span> host, user, authentication_string, plugin from user<span class="token punctuation">;</span> <span class="token comment"># 查看用户信息</span>
update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">"%"</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">;</span> <span class="token comment"># 任意ip都可访问（允许远程连接数据库）</span>
flush privileges<span class="token punctuation">;</span> <span class="token comment">#立即生效</span>
quit<span class="token punctuation">;</span> <span class="token comment">#退出登录</span>
</code></pre> 
<h4><a id="_324"></a>可能遇到的问题</h4> 
<p>注意：在user mysql时可能报错</p> 
<pre><code class="prism language-handlebars"><span class="token variable">“</span> <span class="token variable">ERROR</span> <span class="token number">1820</span> <span class="token punctuation">(</span><span class="token variable">HY000</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token variable">You</span> <span class="token variable">must</span> <span class="token variable">reset</span> <span class="token variable">your</span> <span class="token variable">password</span> <span class="token variable">using</span> <span class="token variable">ALTER</span> <span class="token variable">USER</span> <span class="token variable">statement</span> <span class="token variable">before</span> <span class="token variable">executing</span> <span class="token variable">this</span> <span class="token variable">statement</span><span class="token punctuation">.</span> <span class="token variable">”</span>
</code></pre> 
<p>此时执行如下SQL语句可解决：</p> 
<pre><code class="prism language-bash">ALTER <span class="token environment constant">USER</span> <span class="token environment constant">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> IDENTIFIED BY <span class="token string">'root'</span>
</code></pre> 
<p>17）、在使用navicat连接mysql的时候，可能会发现很慢，不只是连接。打开库、表、执行查询时都有可能存在该问题。那么可能是由于mysql在安装时配置文件中没有加一个参数，只需要把该配置项加入，重启mysql即可解决该问题。<br> 直接打开 /etc/my.cnf/文件，在文件中加入：</p> 
<pre><code class="prism language-bash">skip-name-resolve
</code></pre> 
<p>保存文件，重启mysql即可。<br> <img src="https://images2.imgbox.com/ab/7f/9bjxgbNY_o.png" alt="在这里插入图片描述"></p> 
<p>18）使用navicat测试一下，看看是否可以正常连接使用</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69061dd586c5cf6b2b9d16154cf8e4a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【H3C】pc&#43;交换机&#43;路由器&#43;连外网</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0d02f7146451b131b7ce658f469a387c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python抓取7日内天气并发送飞书机器人消息</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>