<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c语言宏定义详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="c语言宏定义详解" />
<meta property="og:description" content="注：本文并不是完全转载，增加了部分自己的理解 &lt;script type=&#34;text/javascript&#34;&gt; document.body.oncopy = function () { if (window.clipboardData) { setTimeout(function () { var text = clipboardData.getData(&#34;text&#34;); if (text &amp;&amp; text.length &gt; 300) { text = text &#43; &#34;\r\n\n本文来自CSDN博客，转载请标明出处：&#34; &#43; location.href; clipboardData.setData(&#34;text&#34;, text); } }, 100); } } &lt;/script&gt; &lt;script type=&#34;text/javascript&#34;&gt; function StorePage() { d = document; t = d.selection ? (d.selection.type != &#39;None&#39; ? d.selection.createRange().text : &#39;&#39;) : (d.getSelection ? d.getSelection() : &#39;&#39;); void (keyit = window.open(&#39;http://www.365key.com/storeit.aspx?t=&#39; &#43; escape(d." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3301c3246026501cd838b8885ff55973/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-10T10:24:42+08:00" />
<meta property="article:modified_time" content="2017-04-10T10:24:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c语言宏定义详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    注：本文并不是完全转载，增加了部分自己的理解 
<br> 
<h2 class="title_txt"><cite class="fav_csdnstylebykimi"> </cite> </h2> 
<div class="blogstory">
  &lt;script type="text/javascript"&gt; document.body.oncopy = function () { if (window.clipboardData) { setTimeout(function () { var text = clipboardData.getData("text"); if (text &amp;&amp; text.length &gt; 300) { text = text + "\r\n\n本文来自CSDN博客，转载请标明出处：" + location.href; clipboardData.setData("text", text); } }, 100); } } &lt;/script&gt; &lt;script type="text/javascript"&gt; function StorePage() { d = document; t = d.selection ? (d.selection.type != 'None' ? d.selection.createRange().text : '') : (d.getSelection ? d.getSelection() : ''); void (keyit = window.open('http://www.365key.com/storeit.aspx?t=' + escape(d.title) + '&amp;u=' + escape(d.location.href) + '&amp;c=' + escape(t), 'keyit', 'scrollbars=no,width=475,height=575,left=75,top=20,status=no,resizable=yes')); keyit.focus(); }&lt;/script&gt; 
 <p><span style="font-size: 9pt; color: black;"></span></p> 
 <p><span style="font-size: 9pt; color: black;"></span></p> 
 <div> 
  <span style="font-size: 9pt; color: black;"><font size="2">1,</font></span> 
  <font size="2"><span style="font-size: 9pt; color: black;">防止一个头文件被重复包含 <br><br>#</span><span style="font-size: 9pt; color: black;">ifndef</span></font> 
  <span style="font-size: 9pt; color: black;"><font size="2"> COMDEF_H <br><br>#define COMDEF_H <br><br>  //</font></span> 
  <font size="2"><span style="font-size: 9pt; color: black;">头文件内容 <br><br>#</span><span style="font-size: 9pt; color: black;">endif</span></font> 
  <span style="font-size: 9pt; color: black;"><font size="2"> <br><br>2,</font></span> 
  <font size="2"><span style="font-size: 9pt; color: black;">重新定义一些类型,防止由于各种平台和编译器的不同,而产生的类型字节数 差异,方便移植。 <br><br></span><span style="font-size: 9pt; color: black;">typedef  unsigned</span><span style="font-size: 9pt; color: black;"> char      </span><span style="font-size: 9pt; color: black;">boolean</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">;     /* Boolean value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span><span style="font-size: 9pt; color: black;">  unsigned long </span><span style="font-size: 9pt; color: black;">int</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">  uint32;      /* Unsigned 32 bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">  unsigned short     uint16;      /* Unsigned 16 bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">  unsigned char      uint8;       /* Unsigned 8  bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span><span style="font-size: 9pt; color: black;">  signed long </span><span style="font-size: 9pt; color: black;">int</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">    int32;       /* Signed 32 bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">  signed short       int16;       /* Signed 16 bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <span style="font-size: 9pt; color: black;"><font size="2">  signed char        int8;        /* Signed 8  bit value */ <br><br>//</font></span> 
  <font size="2"><span style="font-size: 9pt; color: black;">下面的不建议使用 <br><br></span><span style="font-size: 9pt; color: black;">typedef</span><span style="font-size: 9pt; color: black;">  unsigned char     byte;         /* Unsigned 8</span><span style="font-size: 9pt; color: black;">  bit</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  unsigned</span><span style="font-size: 9pt; color: black;"> short    word;         /* </span><span style="font-size: 9pt; color: black;">Unsinged</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> 16 bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  unsigned</span><span style="font-size: 9pt; color: black;"> long     </span><span style="font-size: 9pt; color: black;">dword</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">;        /* Unsigned 32 bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  unsigned</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> char     uint1;        /* Unsigned 8  bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  unsigned</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> short    uint2;        /* Unsigned 16 bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  unsigned</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> long     uint4;        /* Unsigned 32 bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  signed</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> char       int1;         /* Signed 8  bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  signed</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;"> short      int2;         /* Signed 16 bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef  long</span> <span style="font-size: 9pt; color: black;">int</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">          int4;         /* Signed 32 bit value type. */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">  signed long       sint31;       /* Signed 32 bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">  signed short      sint15;       /* Signed 16 bit value */ <br><br></span><span style="font-size: 9pt; color: black;">typedef</span></font> 
  <span style="font-size: 9pt; color: black;"><font size="2">  signed char       sint7;        /* Signed 8  bit value */ <br><br>3,</font></span> 
  <font size="2"><span style="font-size: 9pt; color: black;">得到指定地址上的一个字节或字 <br><br>#define  MEM_B( x )  ( *( (byte *) (x) ) ) <br><br>#define  MEM_W( x )  ( *( (word *) (x) ) ) <br><br>4,求最大值和最小值 <br><br>   #define  MAX( x, y ) ( ((x) &gt; (y)) ? (x) : (y) ) <br><br>   #define  MIN( x, y ) ( ((x) &lt; (y)) ? (x) : (y) ) <br><br>5, 得到一个field在结构体(</span><span style="font-size: 9pt; color: black;">struct</span><span style="font-size: 9pt; color: black;">)</span></font> 
  <font size="2"><span style="font-size: 9pt; color: black;">中的偏移量 <br><br>#define FPOS( type, field ) \ <br><br>/*lint -e545 */ ( (</span><span style="font-size: 9pt; color: black;">dword</span></font> 
  <span style="font-size: 9pt; color: black;"><font size="2">) &amp;(( type *) 0)-&gt; field ) /*lint +e545 */ <br><br>分析：<br></font></span>#include 
   
   <br> typedef struct person { 
   <br>     int num; 
   <br>     int age; 
   <br>     char name[20]; 
   <br> }person; 
   <br> #define FPOS(type,field) sizeof(((type *)0)-&gt;field) 
   <br> main() 
   <br> { 
   <br>     printf("%d\n",FPOS(person,name)); 
   <br> } 
   <br> ^_^[sunny@localhost ~]52$ ./a.out 
   <br> 20 
   <br> 
   <p style="text-indent: 2em;"><font color="#000000">#define OFFSETOF(type, field) ((size_t)&amp;(((type *)0)-&gt;field))</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">(type *)0：把0地址当成type类型的指针。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">((type *)0)-&gt;field：对应域的变量。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">&amp;((type *)0)-&gt;field:取该变量的地址，其实就等于该域相对于0地址的偏移量。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">(size_t)&amp;(((type *)0)-&gt;field)：将该地址（偏移量）转化为size_t型数据。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">ANSI C标准允许任何值为0的常量被强制转换成任何一种类型的指针，并且转换结果是一个NULL指针，因此((s*)0)的结果就是一个类型为s*的NULL指 针。如果利用这个NULL指针来访问s的成员当然是非法的，但&amp;(((s*)0)-&gt;m)的意图并非想存取s字段内容，而仅仅是计算当结构 体实例的首址为((s*)0)时m字段的地址。聪明的编译器根本就不生成访问m的代码，而仅仅是根据s的内存布局和结构体实例首址在编译期计算这个(常 量)地址，这样就完全避免了通过NULL指针访问内存的问题。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">有人这样表达：</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">#define OFFSETOF(type, field) ((size_t) \</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">               ((char *)&amp;((type *)0)-&gt;field - (char *)(type *)0))</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">我认为效果是一样的，多增加的那部分就是0地 址，相减后就是偏移量。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">为什么要增加size_t呢？</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">首先size_t的定义是什么呢，在文件 stddef.h中可以找到答案。</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">typedef unsigned int size_t;                      /*mine is 32bit machine*/</font></p> 
   <p style="text-indent: 2em;"><font color="#000000">可见就是将偏移量转化为无符整型，其实32位 机器的地址就是无符号的32位整数。一般情况下，不进行size_t类型转化也是没有问题的（后面的实验可证）。我认为，只有偏移量足够大，当大于 0x80000000时才有影响，因为这时候的偏移量最高位是1，机器默认为是负数了。似乎上面宏定义OFFSETOF中更能说明这个问题，因为这个宏定 义是一个差值，最高位是1就肯定是负数了。使用printf("%d", &amp;var);打印一个变量的地址就是个负数。这只是我的看法，网上基本没有什么人分析为什么添加size_t的强制类型转化。因为系统对数组长度 的大小是有限制的，所以也不能实验得到数据。</font></p> 
   <br> 
   <span style="font-size: 9pt; color: black;"><font size="2"><br>6,</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black;">得到一个结构体中field所占用的字 节数 <br><br>#define FSIZ( type, field ) </span><span style="font-size: 9pt; color: black;">sizeof</span></font> 
   <span style="font-size: 9pt; color: black;"><font size="2">( ((type *) 0)-&gt;field ) <br><br>7,</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black;">按照LSB格式把两个字节转化为一个 Word <br><br>#define  FLIPW( ray ) ( (((word) (ray)[0]) * 256) + (ray)[1] ) <br><br>8,按照LSB格式把一个Word转化为两个字节 <br><br>#define  FLOPW( ray, </span><span style="font-size: 9pt; color: black;">val</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;"> ) \ <br><br>  (ray)[0] = ((</span><span style="font-size: 9pt; color: black;">val</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">) / 256); \ <br><br>  (ray)[1] = ((</span><span style="font-size: 9pt; color: black;">val</span></font> 
   <span style="font-size: 9pt; color: black;"><font size="2">) &amp; 0xFF) <br><br>9,</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black;">得到一个变量的地址（word宽度） <br><br>#define  B_PTR( </span><span style="font-size: 9pt; color: black;">var</span><span style="font-size: 9pt; color: black;"> )  ( (byte *) (void *) &amp;(</span><span style="font-size: 9pt; color: black;">var</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">) ) <br><br>#define  W_PTR( </span><span style="font-size: 9pt; color: black;">var</span><span style="font-size: 9pt; color: black;"> )  ( (word *) (void *) &amp;(</span><span style="font-size: 9pt; color: black;">var</span></font> 
   <span style="font-size: 9pt; color: black;"><font size="2">) ) <br><br>10,</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black;">得到一个字的高位和低位字节 <br><br>#define  WORD_LO(xxx)  ((byte) ((word)(xxx) &amp; 255)) <br><br>#define  WORD_HI(xxx)  ((byte) ((word)(xxx) &gt;&gt; 8)) <br><br>11, 返回一个比X大的最接近的8的倍数 <br><br>#define RND8( x )       ((((x) + 7) / 8 ) * 8 ) <br><br>12,将一个字母转换为大写 <br><br>#define  UPCASE( c ) ( ((c) &gt;= ''a'' &amp;&amp; (c) &lt;= ''z'') ? ((c) - 0x20) : (c) ) <br><br>13,判断字符是不是10</span><span style="font-size: 9pt; color: black;">进 值的</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">数字 <br><br>#define  DECCHK( c ) ((c) &gt;= ''0'' &amp;&amp; (c) &lt;= ''9'') <br><br>14,判断字符是不是16</span><span style="font-size: 9pt; color: black;">进 值的</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">数字 <br><br>#define  HEXCHK( c ) ( ((c) &gt;= ''0'' &amp;&amp; (c) &lt;= ''9'') ||\ <br><br>                       ((c) &gt;= ''A'' &amp;&amp; (c) &lt;= ''F'') ||\ <br><br>((c) &gt;= ''a'' &amp;&amp; (c) &lt;= ''f'') ) <br><br>15,防止溢出的 一个方法 <br><br>#define  INC_SAT( </span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;"> )  (</span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;"> = ((</span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">)+1 &gt; (</span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">)) ? (</span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">)+1 : (</span><span style="font-size: 9pt; color: black;">val</span></font> 
   <span style="font-size: 9pt; color: black;"><font size="2">)) <br><br>16,</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black;">返回数组元素的个数 <br><br>#define  ARR_SIZE( a )  ( </span><span style="font-size: 9pt; color: black;">sizeof</span><span style="font-size: 9pt; color: black;">( (a) ) / </span><span style="font-size: 9pt; color: black;">sizeof</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">( (a[0]) ) ) <br><br>17,</span><span style="font-size: 9pt; color: black;">返回一个无符号数n尾的值MOD_BY_POWER_OF_TWO(</span><span style="font-size: 9pt; color: black;">X,n</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">)=X%(2^n) <br><br>#define MOD_BY_POWER_OF_TWO( </span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">, </span><span style="font-size: 9pt; color: black;">mod_by</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;"> ) \ <br><br>           ( (</span><span style="font-size: 9pt; color: black;">dword</span><span style="font-size: 9pt; color: black;">)(</span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">) &amp; (</span><span style="font-size: 9pt; color: black;">dword</span><span style="font-size: 9pt; color: black;">)((</span><span style="font-size: 9pt; color: black;">mod_by</span></font> 
   <span style="font-size: 9pt; color: black;"><font size="2">)-1) ) <br><br>18,</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black;">对于IO空间映射在存储空间的结构,输入 输出处理 <br><br>  #define </span><span style="font-size: 9pt; color: black;">inp</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">(port)         (*((volatile byte *) (port))) <br><br>  #define </span><span style="font-size: 9pt; color: black;">inpw</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">(port)        (*((volatile word *) (port))) <br><br>  #define </span><span style="font-size: 9pt; color: black;">inpdw</span><span style="font-size: 9pt; color: black;">(port)       (*((volatile </span><span style="font-size: 9pt; color: black;">dword</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;"> *)(port))) <br><br>  #define </span><span style="font-size: 9pt; color: black;">outp</span><span style="font-size: 9pt; color: black;">(port, </span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">)   (*((volatile byte *) (port)) = ((byte) (</span><span style="font-size: 9pt; color: black;">val</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">))) <br><br>  #define </span><span style="font-size: 9pt; color: black;">outpw</span><span style="font-size: 9pt; color: black;">(port, </span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">)  (*((volatile word *) (port)) = ((word) (</span><span style="font-size: 9pt; color: black;">val</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">))) <br><br>  #define </span><span style="font-size: 9pt; color: black;">outpdw</span><span style="font-size: 9pt; color: black;">(port, </span><span style="font-size: 9pt; color: black;">val</span><span style="font-size: 9pt; color: black;">) (*((volatile </span><span style="font-size: 9pt; color: black;">dword</span><span style="font-size: 9pt; color: black;"> *) (port)) = ((</span><span style="font-size: 9pt; color: black;">dword</span><span style="font-size: 9pt; color: black;">) (</span><span style="font-size: 9pt; color: black;">val</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black;">))) <br><br></span> <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">19,</span><span style="font-size: 9pt; color: black; font-family: 宋体;">使用</span><span style="font-size: 9pt; color: black; font-family: 宋体;">一些宏</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">跟 踪调试</font><font size="2"><span lang="EN-US"> <br><br>A N S I</span>标准说明了 五个预定义的宏名。它们是：</font><font size="2"><span lang="EN-US"> <br><br>_ L I N E _ <br><br>_ F I L E _ <br><br>_ D A T E _ <br><br>_ T I M E _ <br><br>_ S T D C _ <br><br></span>如果编译不是标准的<span lang="EN-US">,</span>则可能仅支持以上宏名中的几个<span lang="EN-US">,</span>或根本不支持。记住编译程序</font><font size="2"><span lang="EN-US"> <br><br></span>也许还提供其它预定义的宏名。</font><font size="2"><span lang="EN-US"> <br><br>_ L I N E _</span>及<span lang="EN-US">_ F I L E _</span>宏 指令在有关<span lang="EN-US"># l </span></font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">i</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> n e</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">的 部分中已讨论<span lang="EN-US">,</span>这里讨论其余的宏名。</font><font size="2"><span lang="EN-US"> <br><br>_ D AT E _</span>宏指令含有形式为月<span lang="EN-US">/</span>日<span lang="EN-US">/</span>年的串<span lang="EN-US">,</span>表示源文件被翻译到代码时的日期。</font><font size="2"><span lang="EN-US"> <br><br></span>源代码翻译到目标代码的时间作为串包含在<span lang="EN-US">_ T I M E _</span>中。</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">串形式</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">为 时：分：秒。</font><font size="2"><span lang="EN-US"> <br><br></span>如果实现是标准的<span lang="EN-US">,</span>则宏<span lang="EN-US">_ S T D C _</span>含有十进制常量<span lang="EN-US">1</span>。如果它含有任何其它数<span lang="EN-US">,</span>则实现是</font><font size="2"><span lang="EN-US"> <br><br></span>非标准的。</font><font size="2"><span lang="EN-US"> <br><br></span>可以定义宏<span lang="EN-US">,</span>例如</font><font size="2"><span lang="EN-US">: <br><br></span>当定义了<span lang="EN-US">_DEBUG,</span>输 出数据信息和所在文件所在行</font><span lang="EN-US"><font size="2"> <br><br>#</font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">ifdef</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> _DEBUG <br><br>#define DEBUGMSG(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">msg,date</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">msg</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">);</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(</span><span style="font-size: 9pt; color: black; font-family: 宋体;">“<span lang="EN-US">%</span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">d%d%d</span><span style="font-size: 9pt; color: black; font-family: 宋体;">”<span lang="EN-US">,date,_LINE_,_FILE</span></span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">_) <br><br>#else <br><br>      #define DEBUGMSG(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">msg,date</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">)  <br><br>#</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">endif</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2"> <br><br><br>20,</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">宏定义防止使用是错误</font><font size="2"><span lang="EN-US"> <br><br></span>用小括号包含。</font><font size="2"><span lang="EN-US"> <br><br></span>例如：<span lang="EN-US">#define ADD(</span></font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) </span><span style="font-size: 9pt; color: black; font-family: 宋体;">（</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a+b</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">）</font><font size="2"><span lang="EN-US"> <br><br></span>用<span lang="EN-US">do{}while(0)</span>语 句包含多语句防止错误</font><font size="2"><span lang="EN-US"> <br><br></span>例如：<span lang="EN-US">#</span></font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">difne</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> DO(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a+b</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">;\ <br><br>                   a++; <br><br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">应 用时：<span lang="EN-US">if(</span>…</font><span lang="EN-US"><font size="2">.) <br><br>          DO(</font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">); //</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">产 生错误</font><font size="2"><span lang="EN-US"> <br><br>        else <br><br></span>解 决方法<span lang="EN-US">: #</span></font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">difne</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> DO(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) do{<!-- --></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a+b</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">;\ <br><br>                   a++;}while(0) 
     </font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">宏 中<span lang="EN-US">"#"</span>和<span lang="EN-US">"##"</span>的用法</font><font size="2"><span lang="EN-US"> <br></span>一、一般用法</font><font size="2"><span lang="EN-US"> <br></span>我们使用<span lang="EN-US">#</span>把宏参数变为一个字符串<span lang="EN-US">,</span>用<span lang="EN-US">##</span>把两个宏参数贴合在一起</font><font size="2"><span lang="EN-US">. <br></span>用法</font><span lang="EN-US"><font size="2">: <br>#include&lt;</font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">cstdio</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">&gt; <br>#include&lt;</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">climits</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">&gt; <br>using namespace std; <br><br>#define STR(s)     #s <br>#define CONS(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">)  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a##e##b</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) <br><br></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> main() <br>{ <br>    </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(STR(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">vck</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">));           // </span><span style="font-size: 9pt; color: black; font-family: 宋体;">输出字符串<span lang="EN-US">"</span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">vck</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">" <br>    </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("%d\n", CONS(2,3));  // 2e3 </span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">输 出</font><font size="2"><span lang="EN-US">:2000 <br>    return 0; <br>} <br><br></span>二、 当宏参数是另一个宏的时候</font><font size="2"><span lang="EN-US"> <br></span>需要注意的是凡 宏定义里有用<span lang="EN-US">''#''</span>或<span lang="EN-US">''##''</span>的地 方宏参数是不会再展开</font><font size="2"><span lang="EN-US">. <br><br>1, </span>非<span lang="EN-US">''#''</span>和<span lang="EN-US">''##''</span>的情况</font><span lang="EN-US"><font size="2"> <br>#define TOW      (2) <br>#define MUL(</font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">a,b</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) (a*b) <br><br></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("%d*%d=%d\n", TOW, TOW, MUL(TOW,TOW)); <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;">这行的</span><span style="font-size: 9pt; color: black; font-family: 宋体;">宏会被展开</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">为：</font><span lang="EN-US"><font size="2"> <br></font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">printf</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("%d*%d=%d\n", (2), (2), ((2)*(2))); <br>MUL</span><span style="font-size: 9pt; color: black; font-family: 宋体;">里的参数<span lang="EN-US">TOW</span>会</span><span style="font-size: 9pt; color: black; font-family: 宋体;">被展开</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">为</font><font size="2"><span lang="EN-US">(2). <br><br>2, </span>当有<span lang="EN-US">''#''</span>或<span lang="EN-US">''##''</span>的时候</font><span lang="EN-US"><font size="2"> <br>#define A          (2) <br>#define STR(s)     #s <br>#define CONS(</font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">)  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a##e##b</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) <br><br></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> max: %s\n",  STR(INT_MAX));    // INT_MAX #include&lt;</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">climits</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">&gt; <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;">这行会</span><span style="font-size: 9pt; color: black; font-family: 宋体;">被展开</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">为：</font><span lang="EN-US"><font size="2"> <br></font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> max: %s\n", "INT_MAX"); <br><br></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">("%s\n", CONS(A, A));               // compile error  <br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">这 一行则是：</font><span lang="EN-US"><font size="2"> <br></font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("%s\n", </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">AeA</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">)); <br><br>INT_MAX</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">和<span lang="EN-US">A</span>都 不会再被展开<span lang="EN-US">, </span>然而解决这个问题的方法很简单<span lang="EN-US">. </span>加 多一层中间转换宏</font><font size="2"><span lang="EN-US">. <br></span>加这层宏的用意是把所 有宏的参数在这层里全部展开<span lang="EN-US">, </span>那么在转换宏里的那一个宏<span lang="EN-US">(_STR)</span>就 能得到正确的宏参数</font><font size="2"><span lang="EN-US">. <br><br>#define A           (2) <br>#define _STR(s)     #s <br>#define STR(s)      _STR(s)          // </span>转 换宏</font><span lang="EN-US"><font size="2"> <br>#define _CONS(</font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">)  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a##e##b</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">) <br>#define CONS(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">)   _CONS(</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">a,b</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">)       // </span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">转 换宏</font><span lang="EN-US"><font size="2"> <br><br></font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">printf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">("</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> max: %s\n", STR(INT_MAX));          // </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">INT_MAX,int</span><span style="font-size: 9pt; color: black; font-family: 宋体;">型的最大值<span lang="EN-US">,</span>为一个变量<span lang="EN-US"> #include&lt;</span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">climits</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">&gt; <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;">输出为<span lang="EN-US">: </span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2"> max: 0x7fffffff <br>STR(INT_MAX) --&gt;  _STR(0x7fffffff) </font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">然 后再转换成字符串</font><span lang="EN-US"><font size="2">; <br><br></font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">printf</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">("%d\n", CONS(A, A)); <br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">输 出为：</font><span lang="EN-US"><font size="2">200 <br>CONS(A, A)  --&gt;  _CONS((2), (2))  --&gt; </font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">int</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">((2)e(2)) <br><br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">三、<span lang="EN-US">''#''</span>和<span lang="EN-US">''##''</span>的一些应用特例</font><font size="2"><span lang="EN-US"> <br>1</span>、合并匿名变量名</font><span lang="EN-US"><font size="2"> <br>#define  ___ANONYMOUS1(type, </font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">var</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">, line)  type  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">var##line</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> <br>#define  __ANONYMOUS0(type, line)  ___ANONYMOUS1(type, _anonymous, line) <br>#define  ANONYMOUS(type)  __ANONYMOUS0(type, __LINE__) <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;">例：<span lang="EN-US">ANONYMOUS(static </span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">);  </span><span style="font-size: 9pt; color: black; font-family: 宋体;">即<span lang="EN-US">: static </span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> _anonymous70;  70</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">表 示该行行号</font><font size="2"><span lang="EN-US">; <br></span>第一层：<span lang="EN-US">ANONYMOUS(static </span></font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">);  --&gt;  __ANONYMOUS0(static </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">, __LINE__); <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;">第二层：<span lang="EN-US">                        --&gt;  ___ANONYMOUS1(static </span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">, _anonymous, 70); <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;">第三层：<span lang="EN-US">                        --&gt;  static </span></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">int</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">  _anonymous70; <br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">即每次只能解开当前层的宏<span lang="EN-US">,</span>所以<span lang="EN-US">__LINE__</span>在第二层才能被解开</font><font size="2"><span lang="EN-US">; <br><br>2</span>、填充结构</font><span lang="EN-US"><font size="2"> <br>#define  FILL(a)   {a, #a} <br><br></font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">enum</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> IDD{OPEN, CLOSE}; <br></span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">typedef</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">struct</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> MSG{ <br>  IDD id; <br>  const char * </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">msg</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">; <br>}MSG; <br><br>MSG _</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">msg</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">[] = {FILL(OPEN), FILL(CLOSE)}; <br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">相当 于：</font><span lang="EN-US"><font size="2"> <br>MSG _</font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">msg</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">[] = {<!-- -->{OPEN, "OPEN"}, <br>              {CLOSE, "CLOSE"}}; <br><br>3</font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">、记录文件名</font><font size="2"><span lang="EN-US"> <br>#define  _GET_FILE_NAME(f)   #f <br>#define  GET_FILE_NAME(f)    _GET_FILE_NAME(f) <br>static char  FILE_NAME[] = GET_FILE_NAME(__FILE__); <br><br>4</span>、 得到一个数值类型所对应的字符串缓冲大小</font><span lang="EN-US"><font size="2"> <br>#define  _TYPE_BUF_SIZE(type)  </font></span></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2">sizeof</font></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"> #type <br>#define  TYPE_BUF_SIZE(type)   _TYPE_BUF_SIZE(type) <br>char  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">buf</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">[TYPE_BUF_SIZE(INT_MAX)]; <br>     --&gt;  char  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">buf</span></font> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">[_TYPE_BUF_SIZE(0x7fffffff)]; <br>     --&gt;  char  </span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">buf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">[</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">sizeof</span></font> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US"><font size="2"> "0x7fffffff"]; <br></font></span> 
   <span style="font-size: 9pt; color: black; font-family: 宋体;"><font size="2">这里相当于：</font><span lang="EN-US"><font size="2"> <br>char  </font></span></span> 
   <font size="2"><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">buf</span><span style="font-size: 9pt; color: black; font-family: 宋体;" lang="EN-US">[11]; </span><br> </font> 
   
 </div> 
</div> 
<br> 
<br> 
 
<div class="Blog_con2_1 Blog_con3_2"> 
 <div> 
   
   
  <div class="bdsharebuttonbox"> 
   <a class="bds_more" href="#"></a> 
   <a class="bds_qzone" title="分享到QQ空间" href="#"></a> 
   <a class="bds_tsina" title="分享到新浪微博" href="#"></a> 
   <a class="bds_tqq" title="分享到腾讯微博" href="#"></a> 
   <a class="bds_renren" title="分享到人人网" href="#"></a> 
   <a class="bds_weixin" title="分享到微信" href="#"></a> 
  </div> &lt;script&gt;window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];&lt;/script&gt; 
   
 </div> 阅读(30998) | 评论(0) | 转发(3) | 
 <div class="HT_line3"></div> 
</div> 
<div class="Blog_con3_3"> 
 <div> 
  <span id="digg_num">1</span> 
  <a rel="nofollow" id="digg"></a> 
 </div> 
 <p>上一篇：<a href="/uid-22566367-id-381994.html" rel="nofollow">fgets()读取一行数据</a></p> 
 <p>下一篇：<a href="/uid-22566367-id-381996.html" rel="nofollow">linx学习路线</a></p> 
</div> 
<div class="Blog_con3_4"> 
 <div class="Blog_tit2 Blog_tit6">
   相关热门文章 
 </div> 
 <ul class="Blog_ul7"><li><span class="Blog_span7"></span><a href="/uid-26615473-id-3056538.html" rel="nofollow noopener noreferrer" title="test123" target="blank">test123</a></li><li><span class="Blog_span7"></span><a href="/uid-23629988-id-3018793.html" rel="nofollow noopener noreferrer" title="编写安全代码——小心有符号数的右移操作" target="blank">编写安全代码——小心有符号数...</a></li><li><span class="Blog_span7"></span><a href="/uid-22889411-id-59688.html" rel="nofollow noopener noreferrer" title="彻底搞定C语言指针详解-完整版-时候初学者-必备" target="blank">彻底搞定C语言指针详解-完整版...</a></li><li><span class="Blog_span7"></span><a href="/uid-233938-id-162619.html" rel="nofollow noopener noreferrer" title="使用openssl api进行加密解密" target="blank">使用openssl api进行加密解密...</a></li><li><span class="Blog_span7"></span><a href="/uid-233938-id-162628.html" rel="nofollow noopener noreferrer" title="一段自己打印自己的c程序" target="blank">一段自己打印自己的c程序...</a></li></ul> 
 <ul class="Blog_ul7"><li><span class="Blog_span6"></span><a href="http://ask.chinaunix.net/question/785970" rel="nofollow noopener noreferrer" title="linux dhcp  peizhi roc" target="blank">linux dhcp peizhi roc</a></li><li><span class="Blog_span6"></span><a href="http://ask.chinaunix.net/question/785964" rel="nofollow noopener noreferrer" title="关于Unix文件的软链接" target="blank">关于Unix文件的软链接</a></li><li><span class="Blog_span6"></span><a href="http://ask.chinaunix.net/question/785935" rel="nofollow noopener noreferrer" title="求教这个命令什么意思，我是新手，刚刚学习solaris" target="blank">求教这个命令什么意思，我是新...</a></li><li><span class="Blog_span6"></span><a href="http://ask.chinaunix.net/question/785919" rel="nofollow noopener noreferrer" title='sed -e "/grep/d" 是什么意思？谢谢' target="blank">sed -e "/grep/d" 是什么意思...</a></li><li><span class="Blog_span6"></span><a href="http://ask.chinaunix.net/question/785702" rel="nofollow noopener noreferrer" title="谁能够帮我解决LINUX  2.6  10版本驱动" target="blank">谁能够帮我解决LINUX 2.6 10...</a></li></ul> 
 <div class="clear"></div> 
</div> 
 
<div class="Blog_right1_7" id="replyList"> 
 <div class="Blog_tit3">
   给主人留下些什么吧！~~ 
 </div> 
  
  
 <div class="Blog_right1_6 Blog_right1_12"> 
 </div> 
  
 <div class="Blog_right1_10"> 
  <div class="Blog_tit3">
    评论热议 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fac8ead2ae69c1fff67ba6a6b116f8c7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一道面试 数字转大写 java版</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e1c05b920b13385f383d3d306f6c2ca/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MAC 下  defaults  命令详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>