<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Studio基于zxing的第三方库zxing-android-embedded实现生成二维码与扫描二维码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android Studio基于zxing的第三方库zxing-android-embedded实现生成二维码与扫描二维码" />
<meta property="og:description" content="为了在APP中添加扫码功能，需要用到相关的开源库，最常见的是zxing库和zbar库，zbar很多年前就已经不再维护了，xing还在维护，但是使用起来比较复杂。为了使用起来更方便，于是选择基于zxing集成的第三方库zxing-android-embedded。主要参考了第三方ZXing库zxing-android-embedded使用及自定义与安卓Zxing的简单使用-（生成二维码与扫一扫)这两篇博客，以及android和该库的官方文档。
步骤 配置依赖生成二维码步骤简单实践 扫描二维码自定义扫描二维码先给出结果自定义部分：横屏与竖屏（扫码）设置自定义部分：扫码框大小的设置自定义部分：其他（未实践） 分析与总结（很啰嗦） 配置依赖 在app/build.gradle中添加如下 dependencies { ...... implementation &#39;com.journeyapps:zxing-android-embedded:3.6.0&#39; ...... } 点击如下图所示的 Sync Now,完成配置依赖。
生成二维码 步骤 生成二维码步骤如下：
申明一个QRCodeWriter对象QRCodeWriter类文档QRCodeWriter的encode方法（提供长、宽等参数，其余参数不太理解）,返回一个BitMatrix对象。循环遍历BitMatrix对象，将其存储到矩阵中。（在上面的文档中可以看到Bitmatrix的get(i,j)方法中,i: 列,j：行）。为了将图像能够显示出来，需要转换成Bitmap对象, 调用Bitmap的createBitmap方法，将其转化成Bitmap对象。Bitmap类文档通过ImageView控件的setImageBitmap方法，显示二维码。 简单实践 在activity_main.xml添加布局 &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:orientation=&#34;vertical&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34;&gt; &lt;EditText android:id=&#34;@&#43;id/edit_input_string&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:hint=&#34;输入需要转换的字符串&#34;/&gt; &lt;Button android:id=&#34;@&#43;id/button_generate_QRcode&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;生成二维码&#34;/&gt; &lt;ImageView android:id=&#34;@&#43;id/imageview_QRcode&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;250dp&#34; /&gt; &lt;/LinearLayout&gt; 效果如下：
在活动MainActivity.java中添加逻辑，其中generate_QRCode_Bitmap方法对应上述的步骤。 package com.example.myqrtest; import androidx.appcompat.app.AppCompatActivity; import android.content.Intent; import android.graphics.Bitmap; import android.media.Image; import android.os.Bundle; import android.text.TextUtils; import android.view.View; import android.widget.Button; import android." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/66c2ae7afea311efaf0d1a988e7de9ab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-20T11:13:31+08:00" />
<meta property="article:modified_time" content="2020-06-20T11:13:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Studio基于zxing的第三方库zxing-android-embedded实现生成二维码与扫描二维码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>为了在APP中添加扫码功能，需要用到相关的开源库，最常见的是zxing库和zbar库，zbar很多年前就已经不再维护了，xing还在维护，但是使用起来比较复杂。为了使用起来更方便，于是选择基于zxing集成的第三方库<a href="https://github.com/journeyapps/zxing-android-embedded">zxing-android-embedded</a>。主要参考了<a href="https://blog.csdn.net/u010618194/article/details/77891313">第三方ZXing库zxing-android-embedded使用及自定义</a>与<a href="https://blog.csdn.net/qq_34536167/article/details/80874205">安卓Zxing的简单使用-（生成二维码与扫一扫)</a>这两篇博客，以及android和该库的官方文档。<br> </p> 
<div class="toc"> 
 <h4>步骤</h4> 
 <ul><li><a href="#_2" rel="nofollow">配置依赖</a></li><li><a href="#_13" rel="nofollow">生成二维码</a></li><li><ul><li><a href="#_14" rel="nofollow">步骤</a></li><li><a href="#_21" rel="nofollow">简单实践</a></li></ul> 
  </li><li><a href="#_138" rel="nofollow">扫描二维码</a></li><li><a href="#_168" rel="nofollow">自定义扫描二维码</a></li><li><ul><li><a href="#_169" rel="nofollow">先给出结果</a></li><li><ul><li><a href="#_172" rel="nofollow">自定义部分：横屏与竖屏（扫码）设置</a></li><li><a href="#_190" rel="nofollow">自定义部分：扫码框大小的设置</a></li><li><a href="#_225" rel="nofollow">自定义部分：其他（未实践）</a></li></ul> 
   </li><li><a href="#_228" rel="nofollow">分析与总结（很啰嗦）</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>配置依赖</h2> 
<ol><li>在app/build.gradle中添加如下</li></ol> 
<pre><code class="prism language-xml">dependencies {
	......
	implementation 'com.journeyapps:zxing-android-embedded:3.6.0'
	......
}
</code></pre> 
<ol start="2"><li>点击如下图所示的 <code>Sync Now</code>,完成配置依赖。<br> <img src="https://images2.imgbox.com/fd/0f/v5yF7iZ0_o.png" alt="在这里插入图片描述"></li></ol> 
<h2><a id="_13"></a>生成二维码</h2> 
<h3><a id="_14"></a>步骤</h3> 
<p>生成二维码步骤如下：</p> 
<ol><li>申明一个QRCodeWriter对象<a href="https://zxing.github.io/zxing/apidocs/com/google/zxing/qrcode/QRCodeWriter.html" rel="nofollow">QRCodeWriter类文档</a></li><li>QRCodeWriter的encode方法（提供长、宽等参数，其余参数不太理解）,返回一个BitMatrix对象。</li><li>循环遍历BitMatrix对象，将其存储到矩阵中。（在上面的文档中可以看到Bitmatrix的get(i,j)方法中,i: 列,j：行）。</li><li>为了将图像能够显示出来，需要转换成Bitmap对象, 调用Bitmap的createBitmap方法，将其转化成Bitmap对象。<a href="https://www.android-doc.com/reference/android/graphics/Bitmap.Config.html" rel="nofollow">Bitmap类文档</a></li><li>通过ImageView控件的setImageBitmap方法，显示二维码。</li></ol> 
<h3><a id="_21"></a>简单实践</h3> 
<ol><li>在activity_main.xml添加布局</li></ol> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/edit_input_string<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>输入需要转换的字符串<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/button_generate_QRcode<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>生成二维码<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/imageview_QRcode<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>250dp<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>效果如下：<img src="https://images2.imgbox.com/7b/3b/8D780iQ2_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>在活动MainActivity.java中添加逻辑，其中<code>generate_QRCode_Bitmap</code>方法对应上述的步骤。</li></ol> 
<pre><code class="prism language-MainActivity.java">package com.example.myqrtest;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.graphics.Bitmap;
import android.media.Image;
import android.os.Bundle;
import android.text.TextUtils;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.WriterException;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.integration.android.IntentIntegrator;
import com.google.zxing.integration.android.IntentResult;
import com.google.zxing.qrcode.QRCodeWriter;

import java.util.HashMap;
import java.util.Map;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {

    private TextView textView;

    private ImageView imageView;

    private Button button_gerate_QRCode;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        
        textView = (TextView) findViewById(R.id.edit_input_string);
        button_gerate_QRCode = (Button) findViewById(R.id.button_generate_QRcode);
        imageView = (ImageView) findViewById(R.id.imageview_QRcode);

        button_gerate_QRCode.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()){
            case R.id.button_generate_QRcode:
                String input_string = textView.getText().toString().trim();
                if(!TextUtils.isEmpty(input_string)){
                    imageView.setImageBitmap(generate_QRCode_Bitmap(input_string,600,600));
                }
            default:
        }
    }

    private Bitmap generate_QRCode_Bitmap(String content,int width,int height){
        QRCodeWriter qrCodeWriter = new QRCodeWriter();
        Map&lt;EncodeHintType, String&gt; hints = new HashMap&lt;&gt;();
        hints.put(EncodeHintType.CHARACTER_SET, "utf-8");
        try {
            BitMatrix encode = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, width, height, hints);
            int[] pixels = new int[width * height];
            for (int i = 0; i &lt; height; i++) {
                for (int j = 0; j &lt; width; j++) {
                    if (encode.get(j, i)) {
                        pixels[i * width + j] = 0x000000;
                    } else {
                        pixels[i * width + j] = 0xffffff;
                    }
                }
            }
            return Bitmap.createBitmap(pixels, 0, width, width, height, Bitmap.Config.RGB_565);
            //根据官方文档显示stride：Number of colors in the array between rows (must be &gt;= width or &lt;= -width).
            // 即Bitmap.createBitmap方法中第三个参数需要大于width。
        } catch (WriterException e) {
            e.printStackTrace();
        }
        return null;
    }
}
</code></pre> 
<ol start="3"><li>运行一下，看看效果<br> <img src="https://images2.imgbox.com/5b/3d/3RmeeTPA_o.png" alt="在这里插入图片描述"></li></ol> 
<h2><a id="_138"></a>扫描二维码</h2> 
<ol><li>在zxing-android-embedded中，已经为我们默认写了一些界面，我们可以直接调用写好的类快速实现扫码功能。</li><li>在Activity中直接添加下列代码可以直接实现扫码功能。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">new</span> <span class="token class-name">IntentIntegrator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDesiredBarcodeFormats</span><span class="token punctuation">(</span>IntentIntegrator<span class="token punctuation">.</span>ONE_D_CODE_TYPES<span class="token punctuation">)</span><span class="token comment">// 扫码的类型,一维码，二维码，一/二维码，默认为一/二维码</span>
        <span class="token punctuation">.</span><span class="token function">setPrompt</span><span class="token punctuation">(</span><span class="token string">"请对准二维码"</span><span class="token punctuation">)</span><span class="token comment">// 设置提示语</span>
        <span class="token punctuation">.</span><span class="token function">setCameraId</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">// 选择摄像头,可使用前置或者后置</span>
        <span class="token punctuation">.</span><span class="token function">setBeepEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment">// 是否开启声音,扫完码之后会"哔"的一声</span>
        <span class="token punctuation">.</span><span class="token function">initiateScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 初始化扫码</span>
</code></pre> 
<ol start="3"><li>在上述代码中，我们为了得到intent的回调结果，需要重载onActivityResultfang方法，代码如下。</li></ol> 
<pre><code class="prism language-java"> <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token keyword">int</span> resultCode<span class="token punctuation">,</span> Intent data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        IntentResult result <span class="token operator">=</span> IntentIntegrator<span class="token punctuation">.</span><span class="token function">parseActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">getContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Cancelled"</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Scanned: "</span> <span class="token operator">+</span> result<span class="token punctuation">.</span><span class="token function">getContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>运行一下，可以看到<br> <img src="https://images2.imgbox.com/b5/87/0tmqVbMo_o.png" alt="在这里插入图片描述"><br> 注意：</p> 
<ul><li>该部分代码在生成二维码代码之后添加进行直接测试（最后再添加其他控件点击扫码），可以看到，直接打开应用就是一个扫码界面。</li><li>对于使用相机，需要动态申请权限，这里我们什么都没有写，说明该第三方库已经帮我们封装好了。</li></ul> 
<h2><a id="_168"></a>自定义扫描二维码</h2> 
<h3><a id="_169"></a>先给出结果</h3> 
<p>对于IntentIntegrator对象，参考可以配置其属性，其中有一项为：setCaptureActivity方法，参数为我们给出的一个Activity类。默认为Activity.java。我们需要给出一个Activity类，来改变横屏与竖屏。扫描框的大小则需要我们给出一个布局文件。下面给出代码。</p> 
<h4><a id="_172"></a>自定义部分：横屏与竖屏（扫码）设置</h4> 
<ol><li>修改<code>MainActivity.java</code>中的如下内容，注意`setCaptureActivity(CaptureActivity.class)``这一行</li></ol> 
<pre><code class="prism language-MainActivity">new IntentIntegrator(this)
	//.setDesiredBarcodeFormats(IntentIntegrator.ONE_D_CODE_TYPES)// 扫码的类型,可选：一维码，二维码，一/二维码
	.setPrompt("请对准二维码")// 设置提示语
	.setCameraId(0)// 选择摄像头,可使用前置或者后置
	.setBeepEnabled(false)// 是否开启声音,扫完码之后会"哔"的一声
	//.setBarcodeImageEnabled(true)// 扫完码之后生成二维码的图片
	.setCaptureActivity(CaptureActivity.class)
	.initiateScan();// 初始化扫码
</code></pre> 
<ol start="3"><li> <p>要得到库里的<code>Activity</code>文件，有很多种方法，比如github源码中，或者在编辑器内敲出来<code>Activity</code>，然后<code>ctrl +鼠标左键</code> 直接进入该文件。</p> </li><li> <p>获取Activity文件，复制其内容到如下路径中。注意导入的包要自己调一下。（自己创建一个Activity文件再复制其内容，否则需要自己手动进入<code>AndroidManifest.xml</code>中注册活动）<br> <img src="https://images2.imgbox.com/94/9c/DQUzIXv1_o.png" alt="在这里插入图片描述"></p> </li><li> <p>运行一下，如图，可以发现已经变为竖屏了。<br> <img src="https://images2.imgbox.com/3e/51/maH8RKdd_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h4><a id="_190"></a>自定义部分：扫码框大小的设置</h4> 
<ol><li>我们 添加一个layout布局文件去覆盖掉原来自动导入的布局文件，和源码中的命名一样。<br> <img src="https://images2.imgbox.com/6b/b0/VLZ502cQ_o.png" alt="在这里插入图片描述"></li></ol> 
<pre><code class="prism language-zxing_barcode_scanner.xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;merge xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"&gt;

    &lt;com.journeyapps.barcodescanner.BarcodeView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/zxing_barcode_surface"
        app:zxing_framing_rect_width="250dp"
        app:zxing_framing_rect_height="50dp"/&gt;

    &lt;com.journeyapps.barcodescanner.ViewfinderView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/zxing_viewfinder_view"/&gt;

    &lt;TextView android:id="@+id/zxing_status_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:background="@color/zxing_transparent"
        android:text="@string/zxing_msg_default_status"
        android:textColor="@color/zxing_status_text"/&gt;
&lt;/merge&gt;
</code></pre> 
<ol start="2"><li>注意，上述代码中的下面两行，是扫码框的大小,如下图箭头所指。</li></ol> 
<pre><code class="prism language-片段">app:zxing_framing_rect_width="250dp"
app:zxing_framing_rect_height="50dp"
</code></pre> 
<p><img src="https://images2.imgbox.com/46/01/IV2lX0IU_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_225"></a>自定义部分：其他（未实践）</h4> 
<p>在运行<a href="https://github.com/journeyapps/zxing-android-embedded">源码Demo</a>的时候看到一些自定义样例，自己没进行调试了，以后再说。。。。（官网demo不知道为啥一运行就特别卡，最重要的是还占了好大的空间= =）<br> <img src="https://images2.imgbox.com/29/fb/i58viKeM_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_228"></a>分析与总结（很啰嗦）</h3> 
<p>在自定义的过程中，可以看到源码中的setCaptureActivity默认了参数captureActivity。完全可以自己写一个Activity作为参数。（取其他名字更安全些）。<br> <img src="https://images2.imgbox.com/5a/b1/Jn9eUeVH_o.png" alt="在这里插入图片描述"><br> 之所以自己写一个Activity作为参数就可以改为竖屏是因为源码中(见下图)，因此我们自己创建的Activity可以根据需要自己添加属性！<br> <img src="https://images2.imgbox.com/74/0f/X0h8TEFS_o.png" alt="在这里插入图片描述"><br> 打开源码CaptureActivity文件<br> <img src="https://images2.imgbox.com/34/ca/utitvjI1_o.png" alt="在这里插入图片描述"><br> 对于上述文件,参考这篇博客<a href="https://blog.csdn.net/u010618194/article/details/77891313">第三方ZXing库zxing-android-embedded使用及自定义</a>写的。如下截图。对于BarcodeView与ViewfinderView的说法我觉得不对，其一是在调试的过程中尝试改变布局的长宽属性可以否定，其二在查看源码时发现扫描框的配置实际上是在BarcodeView中配置的，而背景颜色是在BarcodeView中，正好相反。但是当把BarcodeView长款调为0整个界面又没了。。。。所以不好说具体的对应关系。晕。。。。。。。<br> <img src="https://images2.imgbox.com/3f/25/uOYYQURO_o.png" alt="在这里插入图片描述"><br> 源码看的还有很多想法，但是理解太浅了，还要多学习，废话有点多，就写到这里结束吧。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a73b49056b6bd353b4d9cf524f5ca334/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis基本原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/644eff2c9996f2393bb6e2085769f2a5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">产品经理之产品类题目</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>