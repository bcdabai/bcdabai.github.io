<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>windows编译poco c&#43;&#43;库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="windows编译poco c&#43;&#43;库" />
<meta property="og:description" content="背景 最近有了解到poco c&#43;&#43;库，这里记录下编译及使用过程。
最开始使用的vs studio 2022 和 poco 1.12.4版本编译，不管openssl 使用哪种版本，都会编译报错，最后妥协了。
参考：https://www.bilibili.com/read/cv14165658/
工具：vs studio 2019
一、VS Studio 2019安装 下载地址，选择相应的版本，安装过程这里不赘述。
二、openssl 安装 说明：openssl有两种安装方式：
下载源码包，手动编译安装，过程比较麻烦，这里选择第二种；下载地址，当前最新版本是v3.1.1。一路向下即可。 安装完成，默认安装路径：C:\Program Files (x86)\OpenSSL-Win32
三、poco 下载 Github地址，下载完解压。准备进行如下操作：
3.1 修改poco目录下的 buildwin.cmd 文件，加入上面你安装的openssl的路径 set POCO_BASE=%CD% set PATH=%POCO_BASE%\bin64;%POCO_BASE%\bin;%PATH% set OPENSSL_DIR=C:\Program Files (x86)\OpenSSL-Win32 set OPENSSL_INCLUDE=C:\Program Files (x86)\OpenSSL-Win32\include set OPENSSL_LIB=C:\Program Files (x86)\OpenSSL-Win32\lib;C:\Program Files (x86)\OpenSSL-Win32\lib\VC;C:\Program Files (x86)\OpenSSL-Win32\lib\VC\static set INCLUDE=%INCLUDE%;%OPENSSL_INCLUDE% set LIB=%LIB%;%OPENSSL_LIB% rem VS_VERSION {140 | 150 | 160} if &#34;%1&#34;==&#34;&#34; goto usage 3.2 修改poco目录下的components 文件 去掉MYSQL 及 postgreSQL，默认会编译对应模块，如果没有安装对应模块会报错。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b1a913ab424e086d1fcf9a8626763ea4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-13T20:24:27+08:00" />
<meta property="article:modified_time" content="2023-07-13T20:24:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">windows编译poco c&#43;&#43;库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>背景</h3> 
<p>最近有了解到poco c++库，这里记录下编译及使用过程。</p> 
<p>最开始使用的vs studio 2022 和 poco 1.12.4版本编译，不管openssl 使用哪种版本，都会编译报错，最后妥协了。</p> 
<p>参考：https://www.bilibili.com/read/cv14165658/</p> 
<p>工具：vs studio 2019</p> 
<h3><a id="VS_Studio_2019_9"></a>一、VS Studio 2019安装</h3> 
<p><a href="https://learn.microsoft.com/zh-cn/visualstudio/releases/2019/release-notes" rel="nofollow">下载地址</a>，选择相应的版本，安装过程这里不赘述。<br> <img src="https://images2.imgbox.com/bb/05/NeGj59Vx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="openssl__12"></a>二、openssl 安装</h3> 
<p>说明：openssl有两种安装方式：</p> 
<ol><li>下载源码包，手动编译安装，过程比较麻烦，这里选择第二种；</li><li><a href="https://slproweb.com/products/Win32OpenSSL.html" rel="nofollow">下载地址</a>，当前最新版本是v3.1.1。一路向下即可。</li></ol> 
<p><img src="https://images2.imgbox.com/67/5e/awIidTz3_o.png" alt="在这里插入图片描述"><br> 安装完成，默认安装路径：C:\Program Files (x86)\OpenSSL-Win32<br> <img src="https://images2.imgbox.com/49/06/4SJBxj2d_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="poco__22"></a>三、poco 下载</h3> 
<p><a href="https://github.com/pocoproject/poco">Github地址</a>，下载完解压。准备进行如下操作：<br> <img src="https://images2.imgbox.com/65/4b/kEoquQvY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/91/BCNNQ1yM_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="31_poco_buildwincmd_openssl_27"></a>3.1 修改poco目录下的 buildwin.cmd 文件，加入上面你安装的openssl的路径</h5> 
<pre><code class="prism language-bash"><span class="token builtin class-name">set</span> <span class="token assign-left variable">POCO_BASE</span><span class="token operator">=</span>%CD%
<span class="token builtin class-name">set</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>%POCO_BASE%<span class="token punctuation">\</span>bin64<span class="token punctuation">;</span>%POCO_BASE%<span class="token punctuation">\</span>bin<span class="token punctuation">;</span>%<span class="token environment constant">PATH</span>%

<span class="token builtin class-name">set</span> <span class="token assign-left variable">OPENSSL_DIR</span><span class="token operator">=</span>C:<span class="token punctuation">\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\</span>OpenSSL-Win32
<span class="token builtin class-name">set</span> <span class="token assign-left variable">OPENSSL_INCLUDE</span><span class="token operator">=</span>C:<span class="token punctuation">\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\</span>OpenSSL-Win32<span class="token punctuation">\</span>include
<span class="token builtin class-name">set</span> <span class="token assign-left variable">OPENSSL_LIB</span><span class="token operator">=</span>C:<span class="token punctuation">\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\</span>OpenSSL-Win32<span class="token punctuation">\</span>lib<span class="token punctuation">;</span>C:<span class="token punctuation">\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\</span>OpenSSL-Win32<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>VC<span class="token punctuation">;</span>C:<span class="token punctuation">\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\</span>OpenSSL-Win32<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>static
<span class="token builtin class-name">set</span> <span class="token assign-left variable">INCLUDE</span><span class="token operator">=</span>%INCLUDE%<span class="token punctuation">;</span>%OPENSSL_INCLUDE%
<span class="token builtin class-name">set</span> <span class="token assign-left variable">LIB</span><span class="token operator">=</span>%LIB%<span class="token punctuation">;</span>%OPENSSL_LIB%

rem VS_VERSION <span class="token punctuation">{<!-- --></span><span class="token number">140</span> <span class="token operator">|</span> <span class="token number">150</span> <span class="token operator">|</span> <span class="token number">160</span><span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token string">"%1"</span><span class="token operator">==</span><span class="token string">""</span> goto usage
</code></pre> 
<h5><a id="32_pococomponents__42"></a>3.2 修改poco目录下的components 文件</h5> 
<p><img src="https://images2.imgbox.com/fd/84/KKFVhmUg_o.png" alt="在这里插入图片描述"><br> 去掉MYSQL 及 postgreSQL，默认会编译对应模块，如果没有安装对应模块会报错。</p> 
<h5><a id="33__46"></a>3.3 编译安装</h5> 
<p><img src="https://images2.imgbox.com/8d/9c/eP0OxFfw_o.png" alt="在这里插入图片描述"><br> 打开vs studio 2019，在工具栏选择“视图”–&gt;“终端”，进入到解压后的poco目录，vs 2019 对应build_vs160.cmd脚本。<br> <img src="https://images2.imgbox.com/0e/76/GT2YwNTj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/10/71/xC8iEWHT_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="331__52"></a>3.3.1 编译报错</h6> 
<p>（1）xxx sdk 8.1 xxx 解决办法：进如Foundation目录，打开如下项目。</p> 
<p><img src="https://images2.imgbox.com/d4/3e/VaDV9B8v_o.png" alt="在这里插入图片描述"><br> 右击“属性” --&gt; “常规”–"Windows SDK 版本选择最新 "即可。注意四个项目都需要做同样的修改。最后关闭项目，点击保存即可。<br> <img src="https://images2.imgbox.com/8f/5a/EecoNvN0_o.png" alt="在这里插入图片描述"><br> （2）can’t openssl/ec.h no Such file,没有配置openssl路径。</p> 
<h5><a id="34__59"></a>3.4 等待编译完成</h5> 
<p><img src="https://images2.imgbox.com/12/34/34Wml6Q8_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/25/f8/mFRsZb6e_o.png" alt="在这里插入图片描述"><br> 会在poco目录下生成bin和lib文件夹。其中bin目录下是动态库，lib目录下是静态库。<br> <img src="https://images2.imgbox.com/97/f4/JhkfSI6C_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/f3/7c/2NusXPat_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="poco_67"></a>四、poco测试</h3> 
<p>工具栏“文件”–&gt;“新建”–&gt;“项目” --&gt; “空项目” ，在源文件中新建main.cpp。注意，需要在项目的属性中加入刚才编译出的poco的头文件的路径和依赖库的路径。<br> <img src="https://images2.imgbox.com/0f/db/iGEIwhMC_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Poco/Thread.h&gt;</span> </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Poco/Runnable.h&gt;</span> </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span> </span>
<span class="token keyword">class</span> <span class="token class-name">HelloRunnable</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> Poco<span class="token double-colon punctuation">::</span><span class="token class-name">Runnable</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello, world!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    HelloRunnable runnable<span class="token punctuation">;</span>
    Poco<span class="token double-colon punctuation">::</span>Thread thread<span class="token punctuation">;</span>
    thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">;</span>
    thread<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/b0/N8ox9eJi_o.png" alt="在这里插入图片描述"><br> 如果在运行后提示找不到，PocoFoundationd.dll 库，找到该动态库文件，放入执行程序的同一目录下即可。<br> <img src="https://images2.imgbox.com/1d/2f/CTGhgVcc_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d66f6996f9d5eee7f2de9cca50746495/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css 绘制直角梯形 和 平行四边形</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5aa9837dbade6ade6fef459bf494db23/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在Linux中配置静态ip地址</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>