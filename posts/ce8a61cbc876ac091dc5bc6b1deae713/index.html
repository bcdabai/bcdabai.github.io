<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GithubAction的使用-简单易懂 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GithubAction的使用-简单易懂" />
<meta property="og:description" content="一、Github Action简介 github Action （工作流），简单理解就是自动化部署、测试。也就是之前人工手动部署变为现在由机器（服务器）自动部署、测试了。
二、对github Action（工作流）的使用 首先需要有个人令牌，
教程：github个人令牌生成
将令牌配置到仓库
点击Actions
创建秘钥
配置秘钥
下图秘钥是配置个人令牌，这就是上面教程生成的个人令牌
效果如下：
它们之间的关联
github action工作流配置 name: docs on: # 每当 push 到 main 分支时触发部署 push: branches: - develop # 手动触发部署 workflow_dispatch: jobs: docs: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 with: # “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录 fetch-depth: 0 - name: Setup Node.js uses: actions/setup-node@v1 with: # 选择要使用的 node 版本 node-version: &#39;16&#39; # 缓存 node_modules - name: Cache dependencies uses: actions/cache@v2 id: yarn-cache with: path: | **/node_modules key: ${{ runner." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ce8a61cbc876ac091dc5bc6b1deae713/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-11T22:31:01+08:00" />
<meta property="article:modified_time" content="2022-10-11T22:31:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GithubAction的使用-简单易懂</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Github_Action_0"></a>一、Github Action简介</h2> 
<p>github Action （工作流），简单理解就是自动化部署、测试。也就是之前人工手动部署变为现在由机器（服务器）自动部署、测试了。</p> 
<h2><a id="github_Action_3"></a>二、对github Action（工作流）的使用</h2> 
<p>首先需要有个人令牌，<br> 教程：<a href="https://blog.csdn.net/nxg0916/article/details/127271906">github个人令牌生成</a></p> 
<p>将令牌配置到仓库<br> <img src="https://images2.imgbox.com/02/c9/KKLWf9dD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2f/2c/oZaVAJaq_o.png" alt="在这里插入图片描述"><br> 点击Actions<br> <img src="https://images2.imgbox.com/ab/ba/3XMrAaoi_o.png" alt="在这里插入图片描述"><br> 创建秘钥<br> <img src="https://images2.imgbox.com/39/df/FpWoAyYH_o.png" alt="在这里插入图片描述"><br> 配置秘钥<br> 下图秘钥是配置个人令牌，这就是上面教程生成的个人令牌<br> <img src="https://images2.imgbox.com/1f/d6/P9yWS480_o.png" alt="在这里插入图片描述"><br> 效果如下：<br> <img src="https://images2.imgbox.com/f7/ee/lgQ6bqNf_o.png" alt="在这里插入图片描述"></p> 
<p>它们之间的关联<br> <img src="https://images2.imgbox.com/3e/1c/ijQhGU2n_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="github_action_28"></a>github action工作流配置</h3> 
<pre><code>name: docs

on:
  # 每当 push 到 main 分支时触发部署
  push:
    branches: 
      - develop
  # 手动触发部署
  workflow_dispatch:

jobs:
  docs:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          # “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v1
        with:
          # 选择要使用的 node 版本
          node-version: '16'

      # 缓存 node_modules
      - name: Cache dependencies
        uses: actions/cache@v2
        id: yarn-cache
        with:
          path: |
            **/node_modules
          key: ${<!-- -->{ runner.os }}-yarn-${<!-- -->{ hashFiles('**/yarn.lock') }}
          restore-keys: |
            ${<!-- -->{ runner.os }}-yarn-

      # 如果缓存没有命中，安装依赖
      - name: Install dependencies
        if: steps.yarn-cache.outputs.cache-hit != 'true'
        run: yarn --frozen-lockfile

      # 运行构建脚本
      - name: Build VuePress site
        run: yarn docs:build

      # 查看 workflow 的文档来获取更多信息
      # @see https://github.com/crazy-max/ghaction-github-pages
      - name: Deploy to GitHub Pages
        uses: crazy-max/ghaction-github-pages@v2
        with:
          # 将要部署资产的 GitHub 存储库（默认$GITHUB_REPOSITORY）
          repo: 用户名/仓库名
          # 部署到 gh-pages 分支
          target_branch: gh-pages
          # 部署目录为 VuePress 的默认输出目录
          build_dir: dist
        env:
          # @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret
          GITHUB_TOKEN: ${<!-- -->{ secrets.PRESS_TOKEN }}

</code></pre> 
<p>比如创建了一个仓库<strong>abc</strong>，用户名为<strong>xiaoli</strong></p> 
<p><img src="https://images2.imgbox.com/05/d2/Dd1jpPqi_o.png" alt="在这里插入图片描述"><br> 你想使用github action 工作流，在同一个用户下，从abc仓库中构建的代码部署到自己新建的 defg 仓库中，<br> 此时你就可以看看下图：</p> 
<p><img src="https://images2.imgbox.com/4e/09/1dB8Zoum_o.png" alt="在这里插入图片描述"><br> 该配置和源代码在<strong>abc</strong>仓库中，运行在工作流就会将该仓库构建好的静态资源部署到<strong>defg</strong>仓库中。<br> 同样你想将github代码部署到gitee仓库中，则使用下面的配置：</p> 
<pre><code>jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Sync to Gitee
        uses: wearerequired/git-mirror-action@master
        env:
          # 在 Settings-&gt;Secrets
          SSH_PRIVATE_KEY: ${<!-- -->{ secrets.GITEE_PRIVATE_KEY }}
        with:
          # GitHub 源仓库地址
          source-repo: git@github.com:xiaoli/abc.git
          # Gitee 目标仓库地址
          destination-repo: git@gitee.com:xiaoli/defg.git

      # - name: Build Gitee Pages # 部署 gitee pages 因为已经部署了github所以就没必要了
      #   uses: yanglbme/gitee-pages-action@master
      #   with:
      #     # 注意替换为你的 Gitee 用户名
      #     gitee-username: huangwantong
      #     # 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD
      #     gitee-password: ${<!-- -->{ secrets.GITEE_PASSWORD }}
      #     # 注意替换为你的 Gitee 仓库
      #     gitee-repo: vue3-vite-vant-h5-template
      #     branch: gh-pages

</code></pre> 
<p>如果是在abc仓库下执行下图文件，就使用下面的方式就可以了<br> <img src="https://images2.imgbox.com/6e/23/iQUvKiHW_o.png" alt="在这里插入图片描述"></p> 
<pre><code>
name: Deploy Docs

on:
  push:
    branches:
      - main

jobs:
  deploy-gh-pages:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          # if your docs needs submodules, uncomment the following line
          # submodules: true


      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 7
          run_install: true


      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 16
          cache: pnpm

      - name: Install Deps
        run: pnpm install --frozen-lockfile

      - name: Build Docs
        env:
          NODE_OPTIONS: --max_old_space_size=8192
        run: |-
          pnpm run docs:build
          &gt; docs/.vuepress/dist/.nojekyll

      - name: Deploy Docs
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages
          folder: dist


</code></pre> 
<h2><a id="_187"></a>总结</h2> 
<p>总之，学习使用工作流，查找过很多资料、看官方文档，入了个门，会使用一些部署方式，这也是自己多次的尝试才有了现在的结果。</p> 
<h2><a id="_190"></a>附件</h2> 
<p>官方文档github action配置：<a href="https://github.com/crazy-max/ghaction-github-pages">https://github.com/crazy-max/ghaction-github-pages</a><br> github创建个人令牌：<a href="https://docs.github.com/cn/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" rel="nofollow">https://docs.github.com/cn/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token</a></p> 
<p>记录with配置信息：<br> <img src="https://images2.imgbox.com/4f/4b/5CMpZKk8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/09/8b/MQ6yQfKw_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23c7f4ca0524d6f9ba923aaeed220826/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">求树的重心(链式前向星，vector存边)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/04452c3c8966b032003ad7e361975793/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Java】统计字符出现次数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>