<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue 发送数据请求 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue 发送数据请求" />
<meta property="og:description" content="这边是将我之前开发的一个项目开发记录进行分享一下吧，可能写的不是很好，毕竟还只是一个在校生。只能说还是一个新手小白的开发记录吧。
有需要的可以借鉴一下，有问题哈哈 也欢迎指出，毕竟发现问题才能更好的进步
Vue 发送数据请求 首先，我们需要在终端 安装axios
npm install axios --save
这时候就可以在任何地方进行引用
需要用到的时候就在该地方输入
import axios from &#39;axios&#39;
原先书写的方式 axios.post( &#34;http://127.0.0.1:8000/axios-server&#34;, { account: document.getElementById(&#34;account&#34;).value, pwd: document.getElementById(&#34;psd&#34;).value, }, { //url params: { account: document.getElementById(&#34;account&#34;).value, pwd: document.getElementById(&#34;psd&#34;).value, }, //请求头参数 // headers: { // height: 180, // weight: 180, // }, // 设置请求体 } ) .then((value) =&gt; { console.log(value); }); 每个页面单写接口 不方便统一修改管理 且重复过多
于是我们创建api页面 整个数据请求由api 页面进行发送
import axios from &#39;axios&#39; const mytry2 = function (data) { axios." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c404dfd1179dee8304b8cabbf0e60f70/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-21T12:04:31+08:00" />
<meta property="article:modified_time" content="2022-07-21T12:04:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue 发送数据请求</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3></h3> 
<p>这边是将我之前开发的一个项目开发记录进行分享一下吧，可能写的不是很好，毕竟还只是一个在校生。只能说还是一个新手小白的开发记录吧。</p> 
<p>有需要的可以借鉴一下，有问题哈哈 也欢迎指出，毕竟发现问题才能更好的进步</p> 
<p></p> 
<h3 id="vue-%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82">Vue 发送数据请求</h3> 
<p>首先，我们需要在终端 安装axios</p> 
<blockquote> 
 <p>npm install axios --save<br> 这时候就可以在任何地方进行引用</p> 
</blockquote> 
<p>需要用到的时候就在该地方输入</p> 
<blockquote> 
 <p>import axios from 'axios'</p> 
</blockquote> 
<p></p> 
<h4 id="%E5%8E%9F%E5%85%88%E4%B9%A6%E5%86%99%E7%9A%84%E6%96%B9%E5%BC%8F">原先书写的方式</h4> 
<p></p> 
<pre>      axios.post(
          "http://127.0.0.1:8000/axios-server",
          {
            account: document.getElementById("account").value,
            pwd: document.getElementById("psd").value,
          },
          {
            //url
            params: {
              account: document.getElementById("account").value,
              pwd: document.getElementById("psd").value,
            },
            //请求头参数
            // headers: {
            //     height: 180,
            //     weight: 180,
            // },
            // 设置请求体
          }
        )
        .then((value) =&gt; {
          console.log(value);
        });
</pre> 
<p>每个页面单写接口 不方便统一修改管理 且重复过多</p> 
<p><strong>于是我们创建api页面 整个数据请求由api 页面进行发送</strong></p> 
<p></p> 
<pre>import axios from 'axios'
const mytry2 = function (data) {
    axios.post(
        "http://127.0.0.1:8000/axios-server",
        {
            id: data
        },
        {
            //url
            params: {
                id: data
            },
            //请求头参数
            // headers: {
            //     height: 180,
            //     weight: 180,
            // },
            // 设置请求体
        }
    )
        .then((value) =&gt; {
            console.log(value);
        });

    if (pwd.value == 123 &amp;&amp; account.value == "root") {
        // window.location.href = "";
    } else {
        alert("账号密码错误！");
    }
}
// 这里再统一导出
export default {
    mytry,
}
</pre> 
<p>但是这样依旧也是太长了</p> 
<p></p> 
<h4 id="%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81">我的代码</h4> 
<p></p> 
<pre>import axios from 'axios'
// 一个方法封装 一次
export function mytry(data){
    const url =`http://127.0.0.1:8000/axios-server` //要发送的路径
    const mydata = `stuId=${data}`
    return axios.post(url,mydata)
}

// //只获取 信息 url 可以拼接 可以定义
// export function getStuInfo(){
//     const url=`/user/getInfo`
//     return $http.post(url)
// }

// 这里再统一导出 就算前面用的是export 依旧还是得统一导出
export default {
    mytry,
    // mytry2
}
</pre> 
<p></p> 
<h3 id="%E5%AF%B9%E4%BA%8E%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E7%9A%84%E6%A0%BC%E5%BC%8F">对于数据传输的格式</h3> 
<p></p> 
<pre>// API中
import axios from 'axios'

// 一个方法封装 一次  可以选择在页面定义好data 进行拼接好 或者直接使用字符串拼接的方式发送
export function mytry(data){
    const url =`http://127.0.0.1:8000/axios-server`
    // 字符串拼接 数据拼接的方式发送
    const mydata = `adminAccount=${data.adminAccount}&amp;adminPassword=${data.adminPassword}`
    return axios.post(url,mydata)
}
export function mytry2(data){
    const url =`http://127.0.0.1:8000/axios-server`
    // 整个数据发送
    return axios.post(url,data)
}
// 这里再统一导出 就算前面用的是export 依旧还是得统一导出
export default {
    mytry,
    mytry2
}

</pre> 
<p></p> 
<pre>// 对应的vue 页面中

  // 整个对象进行传输 
  var mydata ={
    // 以下是已经获取定义好的 account psd， 直接使用键值对的形式
    adminAccount:account,
    adminPassword:psd
  }
  
      api.mytry2(mydata).then(res=&gt;{
        if (1) {
        // window.location.href = "";
      } else {
        alert("账号密码错误！");
      }
        console.log(res);
      }).catch(res=&gt;{
        // 如果请求失败
        console.log(res)
        alert("数据问题，请咨询管理员！")
      })
</pre> 
<p></p> 
<h3 id="%E7%88%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92">父向子组件传递</h3> 
<blockquote> 
 <p>父组件关键语句：</p> 
</blockquote> 
<p></p> 
<pre><code>  &lt;top v-bind:cmovies="movies" :cmessage="message"&gt;&lt;/top&gt;
  这里  是通过 v-bind 传递给子组件
   cmovies  和 message  是在父组件中定义的数据

</code></pre> 
<blockquote> 
 <p>这里是父组件 的数据存放的地方**记得data(){} 里头一定要包含return{} 数据写在return{} 里</p> 
</blockquote> 
<p></p> 
<pre>   data() {
    //  data 是一个实例 必须要有返回实例
    return {
      message: "hello world！",
      movies: ["海王", "海贼王", "海尔兄弟"],
    };
  },
</pre> 
<blockquote> 
 <p>子组件关键语句</p> 
</blockquote> 
<p></p> 
<pre>  // props: 是用来接受 父组件传递过来的数据的 
  props: ["cmovies", "cmessage"],
</pre> 
<blockquote> 
 <p>子组件的使用</p> 
</blockquote> 
<p></p> 
<pre>//数据都拿到了 想怎么用不是都可以 最贱单的直接输出效果展示
{<!-- -->{cmovies}}
</pre> 
<p></p> 
<h3 id="%E5%85%B3%E4%BA%8E%E5%AD%90%E7%BB%84%E4%BB%B6%E6%8B%BF%E7%88%B6%E7%BB%84%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98">关于子组件拿父组件的数据实时更新问题</h3> 
<p>开发过程中 子组件会需要用到父组件传递过来的数据，但是单单只是通过设置 父向子组件传递，子组件接受还是不够的，会出现 能接受到数据，但是数据并不会跟随父组件的数据变化而变化的情况。</p> 
<blockquote> 
 <p>这时候就要用到watch 方法</p> 
</blockquote> 
<p></p> 
<pre>data(){
  return {
    // mydataMsg: ''
    mydataMsg: this.dataMsg,
  },
},
props:{
  dataMsg: {
   type: String, // 这里写你接收的值是什么类型，什么类型就写什么类型
   default:'' //这是设置接受的默认值， 如果没有接受到 就会使用这个默认值 如果是数组就写[] ,对象就写{}
 }
},
watch:{
  dataMsg(newVal,oldVal){
    //newVal 是新值，oldVal 是旧值
    this.mydataMsg= newVal
  }
}

</pre> 
<p>通过子组件调用 watch 的方式，就能够实时获取到父组件传递过来的实时更新的数据了</p> 
<hr> 
<p style="text-align:center;">又是一个样式 一搓头发的一天</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ec/c9/Em9mhzQF_o.jpg"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/163fbcacb08cf76b46a770beed4c40e1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nacos的简单使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53e6995c0500ddd898848b9f5c2530b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【前端性能优化】前端懒加载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>