<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>docker部署rocketmq(亲测有效) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="docker部署rocketmq(亲测有效)" />
<meta property="og:description" content="1.docker 安装rocketmq #拉取镜像 docker pull foxiswho/rocketmq:server-4.7.0 docker pull foxiswho/rocketmq:broker-4.7.0 2.创建server和broker目录，并创建broker.conf #创建目录 mkdir /opt/rocketmq-server mkdir /opt/rocketmq-broker/conf -p [root@localhost opt]# cat /opt/rocketmq-broker/conf/broker.conf namesrvAddr=192.168.1.200:9876 brokerClusterName = DefaultCluster brokerName = broker-a brokerId = 0 deleteWhen = 04 fileReservedTime = 48 brokerRole = ASYNC_MASTER flushDiskType = ASYNC_FLUSH brokerIP1 = 192.168.1.200 listenPort=10911 3.启动容器 #启动rocketmq-server docker run -d \ --restart=always \ --name rmqnamesrv \ -p 9876:9876 \ -v /opt/rocketmq-server/logs:/root/logs \ -v /opt/rocketmq-server/store:/root/store \ -e &#34;MAX_POSSIBLE_HEAP=100000000&#34; \ foxiswho/rocketmq:4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/932d74334bd76c70cd5525ba3b9f0c5e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-06T15:35:50+08:00" />
<meta property="article:modified_time" content="2022-07-06T15:35:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">docker部署rocketmq(亲测有效)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1docker_rocketmq_0"></a>1.docker 安装rocketmq</h3> 
<pre><code class="prism language-powershell"><span class="token comment">#拉取镜像 </span>
docker pull foxiswho/rocketmq:server-4<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0
docker pull foxiswho/rocketmq:broker-4<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0
</code></pre> 
<h3><a id="2serverbrokerbrokerconf_8"></a>2.创建server和broker目录，并创建broker.conf</h3> 
<pre><code class="prism language-powershell"><span class="token comment">#创建目录</span>
mkdir <span class="token operator">/</span>opt/rocketmq-server
mkdir <span class="token operator">/</span>opt/rocketmq-broker/conf <span class="token operator">-</span>p
<span class="token namespace">[root@localhost opt]</span><span class="token comment"># cat /opt/rocketmq-broker/conf/broker.conf </span>
namesrvAddr=192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>200:9876
brokerClusterName = DefaultCluster
brokerName = broker-a
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH
brokerIP1 = 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>200
listenPort=10911
</code></pre> 
<h3><a id="3_27"></a>3.启动容器</h3> 
<pre><code class="prism language-powershell"><span class="token comment">#启动rocketmq-server</span>
docker run <span class="token operator">-</span>d \
<span class="token operator">--</span>restart=always \
<span class="token operator">--</span>name rmqnamesrv \
<span class="token operator">-</span>p 9876:9876 \
<span class="token operator">-</span>v <span class="token operator">/</span>opt/rocketmq-server/logs:<span class="token operator">/</span>root/logs \
<span class="token operator">-</span>v <span class="token operator">/</span>opt/rocketmq-server/store:<span class="token operator">/</span>root/store \
<span class="token operator">-</span>e <span class="token string">"MAX_POSSIBLE_HEAP=100000000"</span> \
foxiswho/rocketmq:4<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0 \
sh mqnamesrv

<span class="token comment">#启动rocketmq-broker</span>
docker run <span class="token operator">-</span>d  \
<span class="token operator">--</span>restart=always \
<span class="token operator">--</span>name rmqbroker \
<span class="token operator">--</span>link rmqnamesrv:namesrv \
<span class="token operator">-</span>p 10911:10911 \
<span class="token operator">-</span>p 10909:10909 \
<span class="token operator">-</span>v  <span class="token operator">/</span>opt/rocketmq-broker/logs:<span class="token operator">/</span>root/logs \
<span class="token operator">-</span>v  <span class="token operator">/</span>opt/rocketmq-broker/store:<span class="token operator">/</span>root/store \
<span class="token operator">-</span>v <span class="token operator">/</span>opt/rocketmq-broker/conf/broker<span class="token punctuation">.</span>conf:<span class="token operator">/</span>opt/rocketmq-4<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0/conf/broker<span class="token punctuation">.</span>conf \
<span class="token operator">-</span>e <span class="token string">"NAMESRV_ADDR=namesrv:9876"</span> \
<span class="token operator">-</span>e <span class="token string">"MAX_POSSIBLE_HEAP=200000000"</span> \
<span class="token operator">-</span>e <span class="token string">"autoCreateTopicEnable=true"</span> \
foxiswho/rocketmq:4<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0 \
sh mqbroker <span class="token operator">-</span>c <span class="token operator">/</span>opt/rocketmq-4<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0/conf/broker<span class="token punctuation">.</span>conf


<span class="token comment">#启动RocketMQ的管理工具rocketmq-console</span>
docker run <span class="token operator">-</span>itd <span class="token operator">-</span>e <span class="token string">"JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.1.200:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false"</span> <span class="token operator">-</span>p 8082:8080 <span class="token operator">-</span>t styletang/rocketmq-console-ng:latest
</code></pre> 
<h3><a id="4console_62"></a>4.测试访问console控制台</h3> 
<p>浏览器输入：192.168.1.200:8082</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3244732b2c04a34aa2fb70b5795fcd10/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Oracle数据库常用的11条操作指令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d1c2e5a81f0a685aaf69a726d0ff6080/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">划水第一篇 QCM6125 AndroidR 代码下载与编译</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>