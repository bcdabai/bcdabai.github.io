<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于git的问题：error: src refspec main does not match any - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于git的问题：error: src refspec main does not match any" />
<meta property="og:description" content="刚开始使用github和git时，你可能会按以下（错误）步骤操作： 创建一个仓库，命名，描述，然后添加README和license。
这里我们注意最后一句话：
github告诉我们它将会为我们的新仓库创建main作为默认的branch。
然后我们的新仓库就创建好了，同时，我们希望在本地也创建一个文件夹与这个仓库建立联系，这样我们就可以在本机的command使用git直接向远程仓库commit我们的代码，而不用打开github。
这里我在d盘创建了一个example文件夹作为本地仓库的载体（默认git已经安装并配置好了），
执行 git init 指令在这个文件夹创建了一个仓库。
随后我在example文件夹中创建一个新文件hello world.txt，现在我希望commit本次更改到我刚刚创建好的github仓库，首先我复制了我远程仓库的地址：
执行git remote add ... ......指令与远程仓库的建立连接：
然后git add .提交到缓冲区，git commit -m &#34;...&#34;提交commit，一切看起来那么顺利，只需最后git push 就愉快的结束了。
这里我们还记得github为我们创建的默认分支main，我们push到这个分支。
糟糕的部分来了：
error: src refspec main does not match any 接下来我们分析上面步骤错误的原因： mian 和 master
你可能已经注意到了，在我们每次使用git指令时，git都在一直用蓝色的字提示我们当前处在一个叫master的分支：
这是git为我们创建的默认分支，而在上述过程中我们完全无视了这一点，我们只关心github上的那个main分支，至于为什么它们的默认分支不同，github给出的解释是：
GitHub is working on replacing the term “master” on its service with a neutral term like “main” to avoid any unnecessary references to slavery
github觉得master有点slavery那味。
所以原因就是github的仓库中没有master这个分支，我们本地的仓库没有main分支，那好办，我们将本地仓库的master分支改名为main分支，它们不就统一了？
执行git branch -m master main，可以看到master已经被成功改为main了，如此，我们继续push就不会有什么问题了吧？" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5c2e0f99f0e4473d311593fbdf4b6a4b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-20T18:39:30+08:00" />
<meta property="article:modified_time" content="2021-03-20T18:39:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于git的问题：error: src refspec main does not match any</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="githubgit_1"></a>刚开始使用github和git时，你可能会按以下（错误）步骤操作：</h3> 
<p>创建一个仓库，命名，描述，然后添加README和license。</p> 
<p><img src="https://images2.imgbox.com/92/18/b64dFQZr_o.png" alt="在这里插入图片描述"></p> 
<p><u>这里我们注意最后一句话</u>：</p> 
<p><img src="https://images2.imgbox.com/ca/1d/dYv40aMe_o.png" alt="在这里插入图片描述"></p> 
<p>github告诉我们它将会为我们的新仓库创建<strong>main</strong>作为默认的branch。</p> 
<p>然后我们的新仓库就创建好了，同时，我们希望在本地也创建一个文件夹与这个仓库建立联系，这样我们就可以在本机的command使用git直接向远程仓库commit我们的代码，而不用打开github。</p> 
<p><img src="https://images2.imgbox.com/bd/9f/j0M3Qhpm_o.png" alt="在这里插入图片描述"></p> 
<p>这里我在d盘创建了一个example文件夹作为本地仓库的载体（默认git已经安装并配置好了），</p> 
<p><img src="https://images2.imgbox.com/74/01/1cfULC0q_o.png" alt="在这里插入图片描述"></p> 
<p>执行 <code>git init</code> 指令在这个文件夹创建了一个仓库。</p> 
<p><img src="https://images2.imgbox.com/a9/f2/NqmhfzQr_o.png" alt="在这里插入图片描述"></p> 
<p>随后我在example文件夹中创建一个新文件hello world.txt，现在我希望commit本次更改到我刚刚创建好的github仓库，首先我复制了我远程仓库的地址：</p> 
<p><img src="https://images2.imgbox.com/b5/7a/SycUtueB_o.png" alt="在这里插入图片描述"></p> 
<p>执行<code>git remote add ... ......</code>指令与远程仓库的建立连接：</p> 
<p><img src="https://images2.imgbox.com/07/b1/SxTqLJJ9_o.png" alt="在这里插入图片描述"></p> 
<p>然后<code>git add .</code>提交到缓冲区，<code>git commit -m "..."</code>提交commit，一切<strong>看起来那么顺利</strong>，只需最后<strong>git push</strong> 就愉快的结束了。</p> 
<p><img src="https://images2.imgbox.com/c8/98/TErS3gVk_o.png" alt="在这里插入图片描述"></p> 
<p>这里我们还记得github为我们创建的默认分支<strong>main</strong>，我们push到这个分支。</p> 
<p>糟糕的部分来了：</p> 
<pre><code>error: src refspec main does not match any
</code></pre> 
<p><img src="https://images2.imgbox.com/55/64/jX4iyX6a_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_56"></a>接下来我们分析上面步骤错误的原因：</h3> 
<ol><li> <p><strong>mian</strong> 和 <strong>master</strong></p> <p>你可能已经注意到了，在我们每次使用git指令时，git都在一直用蓝色的字提示我们当前处在一个叫<strong>master</strong>的分支：</p> </li></ol> 
<p><img src="https://images2.imgbox.com/2f/2b/M7GGx4ID_o.png" alt="在这里插入图片描述"></p> 
<p>这是git为我们创建的默认分支，而在上述过程中我们完全无视了这一点，我们只关心github上的那个<strong>main</strong>分支，至于为什么它们的默认分支不同，github给出的解释是：</p> 
<blockquote> 
 <p>GitHub is working on replacing the term “master” on its service with a neutral term like “main” to avoid any unnecessary references to slavery</p> 
</blockquote> 
<p>github觉得<strong>master</strong>有点slavery那味。</p> 
<p>所以原因就是github的仓库中没有<strong>master</strong>这个分支，我们本地的仓库没有<strong>main</strong>分支，那好办，我们将本地仓库的<strong>master</strong>分支改名为<strong>main</strong>分支，它们不就统一了？</p> 
<p><img src="https://images2.imgbox.com/0d/69/rPEquqBK_o.png" alt="在这里插入图片描述"></p> 
<p>执行<code>git branch -m master main</code>，可以看到<strong>master</strong>已经被成功改为<strong>main</strong>了，如此，我们继续push就不会有什么问题了吧？</p> 
<p><img src="https://images2.imgbox.com/7e/d5/rQfBRgZa_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li><strong>! [rejected] main -&gt; main (non-fast-forward)</strong></li></ol> 
<p>这个问题解释起来很简单，还记得我们创建仓库时添加到README和license吗？<u>在github仓库的<strong>main</strong>分支中有这两个文件，而在我们本地的仓库并没有这两个文件</u>，如果我们执行这次commit，那么可能导致这两个文件丢失。</p> 
<p>接下来你有以下几个解决方案：<strong>下列代码中的example为远程仓库名称</strong></p> 
<ol><li> <p>无视警告，README和license我不要了。</p> <pre><code>git push --force
</code></pre> <p>执行以上指令强行提交。</p> </li><li> <p>试着获取远程仓库的初始提交( initial commit)，就是README和license这两个文件的commit，在此基础上 rebase commit。但是这种方法可能有点棘手，不如暴力提交简单。</p> <pre><code>git fetch example //获取初始提交
git rebase example/mian 
</code></pre> </li><li> <p>试着合并初始提交与你的提交,这也是我<strong>最推荐的方法</strong>：</p> <pre><code>git fetch example
git merge --allow-unrelated-histories example/main
</code></pre> <p>首先执行<code>git fetch example</code> 获取初始提交</p> </li></ol> 
<p><img src="https://images2.imgbox.com/8e/8e/TvVr7lFi_o.png" alt="在这里插入图片描述"></p> 
<p>然后执行<code>git merge --allow-unrelated-histories example/main</code>合并，之后会进入这样一个文件，提示我们为本次提交加一些信息备注，我们很清楚我们在做什么，所以按两下ESC键，输入**:wq**（注意有冒号，这是UNIX保存的命令），回车</p> 
<p><img src="https://images2.imgbox.com/43/06/jbp5OIrM_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到本地的git仓库已经与远程仓库合并了，README和license也可以在本地仓库找到了。</p> 
<p><img src="https://images2.imgbox.com/17/ff/JcsnM324_o.png" alt="在这里插入图片描述"></p> 
<p>最后我们<code>git push example main</code></p> 
<p><img src="https://images2.imgbox.com/44/2f/u5cd1KJ5_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b9/01/3CsJfkbG_o.png" alt="在这里插入图片描述"></p> 
<p>终于提交成功了，泪目！！！！</p> 
<h3><a id="github_132"></a>补充一下，与github仓库建立连接的正确方式：</h3> 
<p>在github创建仓库后，在本地文件夹使用git clone指令将远程仓库clone到本地，就不会出现上述的问题了。</p> 
<h3><a id="_134"></a>参考文章：</h3> 
<blockquote> 
 <p>https://stackoverflow.com/questions/65173291/git-push-error-src-refspec-main-does-not-match-any-on-linux</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5774d10752f741d08efaaaf161a6872f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">typescript 中的 Mvvm 框架底层原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/067ebda844407cd027ff3d69b8e137f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">请教如何保存matlab仿真出来的图,如何保存Matlab绘制出来的图像</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>