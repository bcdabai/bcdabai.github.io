<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Bean 的生命周期 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Bean 的生命周期" />
<meta property="og:description" content="观前提示:本篇博客演示使用的 IDEA 版本为2021.3.3版本,使用的是Java8(又名jdk1.8)
电脑使用的操作系统版本为 Windows 10
目录
Spring 的执行流程
1. 启动容器
2. 根据配置完成 Bean 的初始化
3. 注册 Bean 对象到容器中
4. 装配 Bean 的属性
Bean 的生命周期
Bean 的生命周期代码演示
Spring 的执行流程 在看 Bean 的生命周期之前需要先简单了解一下 Spring 的执行流程
1. 启动容器 ApplicationContext 启动容器
2. 根据配置完成 Bean 的初始化 加载配置文件:类加载路径下的 Beans.xml 3. 注册 Bean 对象到容器中 扫描 org.example 包. 扫描有没有五大类注解, 只有在包扫描的路径上的类, 且使用 Spring 的注解才可以被注册到容器中. 4. 装配 Bean 的属性 如果 Bean 对象需要使用其他 Bean 对象作为属性, 可以使用注解 @Autowired 和 @Resource" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f86b78ce6efa99428bf997c33c548fd1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-15T23:08:42+08:00" />
<meta property="article:modified_time" content="2023-06-15T23:08:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Bean 的生命周期</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:#ff9900;">观前提示:本篇博客演示使用的 IDEA 版本为2021.3.3版本,使用的是Java8(又名jdk1.8)</span></p> 
<p><span style="color:#ff9900;">电脑使用的操作系统版本为 Windows 10</span></p> 
<hr> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="Spring%20%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B-toc" style="margin-left:0px;"><a href="#Spring%20%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B" rel="nofollow">Spring 的执行流程</a></p> 
<p id="1.%20%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8-toc" style="margin-left:40px;"><a href="#1.%20%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8" rel="nofollow">1. 启动容器</a></p> 
<p id="2.%20%E6%A0%B9%E6%8D%AE%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%20Bean%20%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96-toc" style="margin-left:40px;"><a href="#2.%20%E6%A0%B9%E6%8D%AE%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%20Bean%20%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96" rel="nofollow">2. 根据配置完成 Bean 的初始化</a></p> 
<p id="3.%20%E6%B3%A8%E5%86%8C%20Bean%20%E5%AF%B9%E8%B1%A1%E5%88%B0%E5%AE%B9%E5%99%A8%E4%B8%AD-toc" style="margin-left:40px;"><a href="#3.%20%E6%B3%A8%E5%86%8C%20Bean%20%E5%AF%B9%E8%B1%A1%E5%88%B0%E5%AE%B9%E5%99%A8%E4%B8%AD" rel="nofollow">3. 注册 Bean 对象到容器中</a></p> 
<p id="4.%20%E8%A3%85%E9%85%8D%20Bean%20%E7%9A%84%E5%B1%9E%E6%80%A7-toc" style="margin-left:40px;"><a href="#4.%20%E8%A3%85%E9%85%8D%20Bean%20%E7%9A%84%E5%B1%9E%E6%80%A7" rel="nofollow">4. 装配 Bean 的属性</a></p> 
<p id="Bean%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-toc" style="margin-left:0px;"><a href="#Bean%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" rel="nofollow">Bean 的生命周期</a></p> 
<p id="Bean%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA-toc" style="margin-left:40px;"><a href="#Bean%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA" rel="nofollow">Bean 的生命周期代码演示</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="Spring%20%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B">Spring 的执行流程</h2> 
<p>在看 Bean 的生命周期之前需要先简单了解一下 Spring 的执行流程</p> 
<h3 id="1.%20%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8">1. 启动容器</h3> 
<p><img alt="" height="367" src="https://images2.imgbox.com/aa/18/w2YrNFUM_o.png" width="1200"></p> 
<p></p> 
<p>ApplicationContext 启动容器</p> 
<p></p> 
<h3 id="2.%20%E6%A0%B9%E6%8D%AE%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%20Bean%20%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96">2. 根据配置完成 Bean 的初始化</h3> 
<p><img alt="" height="406" src="https://images2.imgbox.com/90/14/0LxshJO8_o.png" width="968"></p> 
<p> </p> 
<p>加载配置文件:类加载路径下的 Beans.xml </p> 
<p></p> 
<h3 id="3.%20%E6%B3%A8%E5%86%8C%20Bean%20%E5%AF%B9%E8%B1%A1%E5%88%B0%E5%AE%B9%E5%99%A8%E4%B8%AD">3. 注册 Bean 对象到容器中</h3> 
<p><img alt="" height="239" src="https://images2.imgbox.com/1b/14/ZxkPtBNR_o.png" width="741"></p> 
<p><img alt="" height="264" src="https://images2.imgbox.com/24/68/jEyllV3N_o.png" width="613"> </p> 
<p></p> 
<p>扫描 org.example 包. 扫描有没有五大类注解, 只有在包扫描的路径上的类, 且使用 Spring 的注解才可以被注册到容器中. </p> 
<p></p> 
<h3 id="4.%20%E8%A3%85%E9%85%8D%20Bean%20%E7%9A%84%E5%B1%9E%E6%80%A7">4. 装配 Bean 的属性</h3> 
<p><img alt="" height="406" src="https://images2.imgbox.com/92/e0/DkIRYdAn_o.png" width="841"></p> 
<p> </p> 
<p>如果 Bean 对象需要使用其他 Bean 对象作为属性, 可以使用注解 @Autowired 和 @Resource</p> 
<p></p> 
<h2 id="Bean%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Bean 的生命周期</h2> 
<p><span style="color:#1a439c;">⽣命周期指的是⼀个对象从诞⽣到销毁的整个⽣命过程，我们把这个过程就叫做⼀个对象的⽣命周期。</span></p> 
<p><span style="color:#fe2c24;">Bean 的⽣命周期分为以下 5 ⼤部分：</span></p> 
<p><span style="color:#fe2c24;"><strong>1. 开辟内存空间: 实例化 ≠ 初始化</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>2. 设置属性 (注入属性)</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>3. 初始化</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>    3.1 各种通知</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>    3.2 初始化前置方法</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>    3.3 初始化方法(两种实现方式: xml 方式, 注解方式)</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>    3.4 初始化后置方法</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>4. 使用 Bean</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>5. 销毁对象</strong></span></p> 
<p></p> 
<p><img alt="" height="1147" src="https://images2.imgbox.com/6b/67/1qO9Davc_o.png" width="1200"></p> 
<p> </p> 
<p></p> 
<h3 id="Bean%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA">Bean 的生命周期代码演示</h3> 
<p><strong>初始化方法演示</strong></p> 
<p>先在 com.java.demo.component 创建一个类, 叫做 BeanComponent, 然后再 spring-config.xml 里面设置 Bean</p> 
<pre><code class="hljs">&lt;bean id="beanComponent" class="com.java.demo.component.BeanComponent" &gt;&lt;/bean&gt;</code></pre> 
<p></p> 
<p><span style="color:#fe2c24;">这步是初始化的通知</span></p> 
<p>BeanComponent 实现接口 BeanNameAware ,就可以操作下面的 @Override 里面的内容, 比如打印 Bean的名字</p> 
<pre><code class="hljs">package com.java.demo.component;

import org.springframework.beans.factory.BeanNameAware;

public class BeanComponent implements BeanNameAware {
    @Override
    public void setBeanName(String s) {
        System.out.println("执行了通知 BeanName -&gt; " + s);
    }
}
</code></pre> 
<p></p> 
<p><span style="color:#fe2c24;">因为初始化方法用得少.所以这步演示前置初始化方法的 xml 方式</span></p> 
<p>在 spring-config.xml 里面写 init-method</p> 
<p>可以看到他有很多方法</p> 
<p><img alt="" height="479" src="https://images2.imgbox.com/97/c7/m4VGu1c9_o.png" width="1200"></p> 
<p> <img alt="" height="471" src="https://images2.imgbox.com/a5/67/2RsPHT07_o.png" width="1200"></p> 
<p> </p> 
<p>这里只需要 init-method </p> 
<pre><code class="hljs">&lt;bean id="beanComponent" class="com.java.demo.component.BeanComponent" init-method="myInit"&gt;&lt;/bean&gt;</code></pre> 
<p></p> 
<p>再回到 BeanComponent 写 myInit 方法, 注意名字保持一致</p> 
<pre><code class="hljs">package com.java.demo.component;

import org.springframework.beans.factory.BeanNameAware;

import javax.annotation.PostConstruct;

public class BeanComponent implements BeanNameAware {
    @Override
    public void setBeanName(String s) {
        System.out.println("执行了通知 BeanName -&gt; " + s);
    }

    // xml 方式的初始化方法
    public void myInit(){
        System.out.println("xml 方式的初始化方法");
    }

    // 注解方式的初始化方法
    @PostConstruct
    public void doPostConstruct(){
        System.out.println("注解方式的初始化方法");
    }

    //使用 Bean
    public void sayHi(){
        System.out.println("执行 sayHi()");
    }
}
</code></pre> 
<p>到此初始化方法全部执行完,也可以加上销毁</p> 
<p></p> 
<p>注解的方式执行销毁</p> 
<pre><code class="hljs">@PreDestroy
    public void doPreDestroy(){
        System.out.println("doPreDestroy");
    }</code></pre> 
<p></p> 
<p>回到 APP 里面执行</p> 
<pre><code class="hljs">import com.java.demo.component.BeanComponent;
import com.java.demo.controller.UserController;
import com.java.demo.controller.UserController2;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {
    public static void main(String[] args) {
        //不使用 ApplicationContext 而使用 ClassPathXmlApplicationContext
        //因为 ApplicationContext 没有销毁方法, 而 ClassPathXmlApplicationContext 有销毁方法
        ClassPathXmlApplicationContext context =
                new ClassPathXmlApplicationContext("spring-config.xml");
        BeanComponent component = context.getBean("beanComponent", BeanComponent.class);
        //使用 Bean
        component.sayHi();
        //销毁 Bean
        context.destroy();
    }
}
</code></pre> 
<p><img alt="" height="368" src="https://images2.imgbox.com/99/95/aQ9Aabwr_o.png" width="939"></p> 
<p></p> 
<p>符合预期</p> 
<p><strong>注意: 注解方式的初始化方法优先级比 xml 的初始化方法优先级高,因为主流是 注解</strong></p> 
<p>如果,注释掉 </p> 
<pre><code class="hljs">context.destroy();</code></pre> 
<p>最后的  doPreDestroy, 就不会执行</p> 
<p></p> 
<hr> 
<p><span style="color:#ff9900;">本文完,感谢观看,不足之处请在评论区指出 !</span></p> 
<p style="text-align:center;"><span style="color:#ff9900;"><img alt="" src="https://images2.imgbox.com/54/69/0l9mMiiN_o.jpg"></span></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5b18c85f3154211a8e1aaf3d2f311ab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">r2pm -ci r2ghidra 时报错：checking pkg-config flags for r_core... no</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58e9331bda4279ffecb0a13efde1b841/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DOM与JS动态生成抓取，2023必备指南！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>