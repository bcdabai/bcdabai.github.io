<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# 二维码生成 ( QRCoder ) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C# 二维码生成 ( QRCoder )" />
<meta property="og:description" content="二维码 1.前言 seaconch 最近在搞二维码方面的一些东西，所以接触了一些二维码相关，那么既然用过了就要有用过了的样子
其实关于二维码的文章真的多的数不胜数，有很多写的很认真，很好，但这就像是学习一样，别人会不代表自己就没有学习和记录的价值，所以说学习不在早晚
引入包 1.通过NuGet引入QRCoder a)首先，我们新建一个 类库 项目，seaconch这里命名为 chestnut_qrcode b)之后通过 NuGet 引入 QRCoder 包
c)见图操作
d)安装成功后，项目引用中就会出现 QRCoder 的引用
e)这时候引入工作已经完成，不过可以顺手创建一个 Encoder.cs 静态公共类
二维码生成类 1.前期准备 这里先说一下生成二维码需要的三个类：
QRCodeGeneratorQRCodeDataQRCode 他们的 职责 分别是什么呢？
QRCodeGenerator ：用来通过指定的方式生成二维码存储的数据对象，也就是 QRCodeData 二维码中间的 Matrix，之后 QRCode 得到 QRCodeData 并生成二维码
2.编码 Encoder.cs 全部代码如下：
using System.Drawing; namespace chestnut_qrcode { /// &lt;summary&gt; /// 二维码编码器 /// &lt;/summary&gt; public static class Encoder { /// &lt;summary&gt; /// 生成二维码 /// &lt;/summary&gt; /// &lt;param name=&#34;msg&#34;&gt;信息&lt;/param&gt; /// &lt;param name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/90c1e71b529b6d603c1b73e6ba015520/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-18T00:43:57+08:00" />
<meta property="article:modified_time" content="2018-07-18T00:43:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# 二维码生成 ( QRCoder )</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="二维码">二维码</h2> 
<h3 id="1前言">1.前言</h3> 
<p>seaconch 最近在搞二维码方面的一些东西，所以接触了一些二维码相关，那么既然用过了就要有用过了的样子</p> 
<p>其实关于二维码的文章真的多的数不胜数，有很多写的很认真，很好，但这就像是学习一样，别人会不代表自己就没有学习和记录的价值，所以说学习不在早晚</p> 
<h2 id="引入包">引入包</h2> 
<h3 id="1通过nuget引入qrcoder">1.通过NuGet引入QRCoder</h3> 
<p>a)首先，我们新建一个 <strong>类库</strong> 项目，seaconch这里命名为 <strong>chestnut_qrcode</strong> </p> 
<p>b)之后通过 <strong>NuGet</strong> 引入 <strong>QRCoder</strong> 包</p> 
<p>c)见图操作</p> 
<p><img src="https://images2.imgbox.com/b8/ed/xc1ylCmI_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/0c/e3/lJ8liGvN_o.png" alt="这里写图片描述" title=""></p> 
<p>d)安装成功后，项目引用中就会出现 <strong>QRCoder</strong> 的引用</p> 
<p>e)这时候引入工作已经完成，不过可以顺手创建一个 <strong>Encoder.cs</strong> <code>静态公共类</code></p> 
<h2 id="二维码生成类">二维码生成类</h2> 
<h3 id="1前期准备">1.前期准备</h3> 
<p>这里先说一下生成二维码需要的三个类：</p> 
<ul><li>QRCodeGenerator</li><li>QRCodeData</li><li>QRCode</li></ul> 
<p>他们的 <strong>职责</strong> 分别是什么呢？</p> 
<p><strong>QRCodeGenerator</strong> ：用来通过指定的方式生成二维码存储的数据对象，也就是 <strong>QRCodeData</strong> 二维码中间的 <strong>Matrix</strong>，之后 <strong>QRCode</strong> 得到 <strong>QRCodeData</strong> 并生成二维码</p> 
<h3 id="2编码">2.编码</h3> 
<p><strong>Encoder.cs</strong> 全部代码如下：</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">using</span> System.Drawing;

namespace chestnut_qrcode
{
    <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> 二维码编码器</span>
    <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> Encoder
    {
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> 生成二维码</span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="msg"&gt;</span>信息<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="version"&gt;</span>版本 1 ~ 40<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="pixel"&gt;</span>像素点大小<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="icon_path"&gt;</span>图标路径<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="icon_size"&gt;</span>图标尺寸<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="icon_border"&gt;</span>图标边框厚度<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;param name="white_edge"&gt;</span>二维码白边<span class="hljs-xmlDocTag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-xmlDocTag">///</span> <span class="hljs-xmlDocTag">&lt;returns&gt;</span>位图<span class="hljs-xmlDocTag">&lt;/returns&gt;</span></span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Bitmap <span class="hljs-title">code</span>(<span class="hljs-keyword">string</span> msg, <span class="hljs-keyword">int</span> version, <span class="hljs-keyword">int</span> pixel, <span class="hljs-keyword">string</span> icon_path, <span class="hljs-keyword">int</span> icon_size, <span class="hljs-keyword">int</span> icon_border, <span class="hljs-keyword">bool</span> white_edge)
        {

            QRCoder.QRCodeGenerator code_generator = <span class="hljs-keyword">new</span> QRCoder.QRCodeGenerator();

            QRCoder.QRCodeData code_data = code_generator.CreateQrCode(msg, QRCoder.QRCodeGenerator.ECCLevel.M<span class="hljs-comment">/* 这里设置容错率的一个级别 */</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>, QRCoder.QRCodeGenerator.EciMode.Utf8, version);

            QRCoder.QRCode code = <span class="hljs-keyword">new</span> QRCoder.QRCode(code_data);

            Bitmap icon = <span class="hljs-keyword">new</span> Bitmap(icon_path);

            Bitmap bmp = code.GetGraphic(pixel, Color.Black, Color.White, icon, icon_size, icon_border, white_edge);

            <span class="hljs-keyword">return</span> bmp;

        }
    }
}
</code></pre> 
<p>容错率与 version 之间的参数都与编码格式有关系，有些格式是不支持中文的哦</p> 
<h2 id="准备form">准备Form</h2> 
<h3 id="1外观">1.外观</h3> 
<p>这里seaconch使用的是 <strong>winform</strong> 项目，直接截个图吧</p> 
<p><img src="https://images2.imgbox.com/ff/b4/qy4dYhtB_o.png" alt="这里写图片描述" title=""></p> 
<h3 id="2代码">2.代码</h3> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Drawing;
<span class="hljs-keyword">using</span> System.Windows.Forms;

namespace chestnut_form
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> frm_qrcode : Form
    {
        <span class="hljs-keyword">public</span> <span class="hljs-title">frm_qrcode</span>()
        {
            InitializeComponent();
        }

        <span class="hljs-comment">// 窗体加载</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">frm_qrcode_Load</span>(<span class="hljs-keyword">object</span> sender, EventArgs e)
        {
            cb_version.SelectedIndex = <span class="hljs-number">1</span>;

            cb_pixel.SelectedIndex = <span class="hljs-number">0</span>;

            cb_icon_size.SelectedIndex = <span class="hljs-number">0</span>;

            cb_icon_border.SelectedIndex = <span class="hljs-number">1</span>;
        }

        <span class="hljs-comment">// 编码</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">btn_encode_Click</span>(<span class="hljs-keyword">object</span> sender, EventArgs e)
        {
            <span class="hljs-keyword">int</span> version = Convert.ToInt16(cb_version.Text);

            <span class="hljs-keyword">int</span> pixel = Convert.ToInt16(cb_pixel.Text);

            <span class="hljs-keyword">string</span> str_msg = tb_msg.Text;

            <span class="hljs-keyword">int</span> int_icon_size = Convert.ToInt16(cb_icon_size.Text);

            <span class="hljs-keyword">int</span> int_icon_border = Convert.ToInt16(cb_icon_border.Text);

            <span class="hljs-keyword">bool</span> b_we = rb_we_y.Checked ? <span class="hljs-keyword">true</span> : <span class="hljs-keyword">false</span>;

            Bitmap bmp = chestnut_qrcode.Encoder.code(str_msg, version, pixel, <span class="hljs-string">"E:/seaconch/git/1.jpg"</span>, int_icon_size, int_icon_border, b_we);

            pb_qrcode.Image = bmp;
        }

        <span class="hljs-comment">// 保存</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">btn_save_Click</span>(<span class="hljs-keyword">object</span> sender, EventArgs e)
        {
            <span class="hljs-keyword">if</span> (pb_qrcode.Image != <span class="hljs-keyword">null</span>)

                <span class="hljs-keyword">using</span> (SaveFileDialog sfd = <span class="hljs-keyword">new</span> SaveFileDialog())
                {
                    sfd.Filter = <span class="hljs-string">"(*.png)|*.png|(*.bmp)|*.bmp"</span>;

                    <span class="hljs-keyword">if</span> (sfd.ShowDialog() == DialogResult.OK) pb_qrcode.Image.Save(sfd.FileName);

                }
        }
    }
}
</code></pre> 
<h2 id="效果">效果</h2> 
<p><img src="https://images2.imgbox.com/1a/c7/aS0gi0ji_o.png" alt="这里写图片描述" title=""> <br> 那么seaconch在这里<code>向大家送上祝福</code> <br> <img src="https://images2.imgbox.com/d1/47/p77T8hkr_o.png" alt="这里写图片描述" title=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/513cb06338d36912a0262069c447b96a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot简单项目搭建，从数据读取数据展示到页面</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64849624cc7e9dc910f469aa5e2c487c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">逻辑智力测试题内附详细答案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>