<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ä»£ç åœ¨çº¿ç¼–è¾‘codemirroråœ¨Reactä¸­ä½¿ç”¨ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ä»£ç åœ¨çº¿ç¼–è¾‘codemirroråœ¨Reactä¸­ä½¿ç”¨" />
<meta property="og:description" content="åˆæ¬¡å­¦ä¹ codemirrorç¬”è®°ï¼Œä¸‹é™„å®Œæ•´ä»£ç 
æˆæœå›¾
å®‰è£…
yarn add codemirror å¼•å…¥
import CodeMirror from &#39;codemirror&#39;; import &#39;codemirror/lib/codemirror.css&#39; optionsé…ç½® 1.è¡Œå· lineNumbers:true//æ˜¯å¦æ˜¾ç¤ºå·¦ä¾§è¡Œå· firstLineNumber: 1//ä»å“ªä¸ªæ•°å­—å¼€å§‹è®¡æ•°è¡Œã€‚é»˜è®¤å€¼ä¸º 1ã€‚ 2.ç¼–ç æ¨¡å¼
æ¨¡å¼å¯æŸ¥çœ‹Â https://codemirror.net/mode/
import &#34;codemirror/mode/python/python.js&#34;; mode: &#34;python&#34;, // è¦ä½¿ç”¨çš„æ¨¡å¼//https://codemirror.net/mode/ 3.æ»šåŠ¨å’Œæ¢è¡Œ
lineWrapping: true,//æ»šåŠ¨æˆ–æ¢è¡Œ scrollbarStyle: null,//æ»šåŠ¨æ¡æ ·å¼ï¼Œä¸ºnullæ—¶éšè—æ»šåŠ¨æ¡ 4.ä¸»é¢˜
//å¼•å…¥ä¸»é¢˜æ–‡ä»¶ï¼ˆå¯é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ï¼‰ import &#39;codemirror/theme/material.css&#39;; import &#39;codemirror/theme/solarized.css&#39; //optionsä¸­é…ç½® theme: &#39;material&#39;,//ä¸»é¢˜ 5.ä»£ç æŠ˜å 
// å¼•å…¥ import &#39;codemirror/addon/fold/foldgutter.css&#39;; import &#39;codemirror/addon/fold/foldcode.js&#39;; import &#39;codemirror/addon/fold/foldgutter.js&#39;; import &#39;codemirror/addon/fold/brace-fold.js&#39;; import &#39;codemirror/addon/fold/comment-fold.js&#39;; import &#39;codemirror/addon/fold/indent-fold.js&#39;; //optionsä¸­é…ç½® // åœ¨è¡Œæ§½ä¸­æ·»åŠ è¡Œå·æ˜¾ç¤ºå™¨ã€æŠ˜å å™¨ã€è¯­æ³•æ£€æµ‹å™¨ gutters: [&#34;CodeMirror-linenumbers&#34;, &#34;CodeMirror-foldgutter&#34;, &#34;CodeMirror-lint-markers&#34;], foldGutter: true, // å¯ç”¨è¡Œæ§½ä¸­çš„ä»£ç æŠ˜å  6.ç¼©è¿›" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8a2be4b152352c1fdc215b5d069b477c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-29T10:27:11+08:00" />
<meta property="article:modified_time" content="2021-09-29T10:27:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ä»£ç åœ¨çº¿ç¼–è¾‘codemirroråœ¨Reactä¸­ä½¿ç”¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>åˆæ¬¡å­¦ä¹ codemirrorç¬”è®°ï¼Œä¸‹é™„å®Œæ•´ä»£ç </strong></p> 
<p><strong>æˆæœå›¾</strong></p> 
<p style="text-align:center;"><strong><img alt="" height="640" src="https://images2.imgbox.com/b0/15/7ZFI3trm_o.png" width="1009"></strong></p> 
<p><strong>å®‰è£…</strong></p> 
<pre><code class="language-javascript">yarn add codemirror</code></pre> 
<p><strong>Â å¼•å…¥</strong></p> 
<pre><code>import CodeMirror from 'codemirror';
import 'codemirror/lib/codemirror.css'</code></pre> 
<p>Â </p> 
<h3><strong>optionsé…ç½®</strong></h3> 
<h4>1.è¡Œå·</h4> 
<pre><code>lineNumbers:true//æ˜¯å¦æ˜¾ç¤ºå·¦ä¾§è¡Œå·
firstLineNumber: 1//ä»å“ªä¸ªæ•°å­—å¼€å§‹è®¡æ•°è¡Œã€‚é»˜è®¤å€¼ä¸º 1ã€‚
</code></pre> 
<p><strong>2.ç¼–ç æ¨¡å¼</strong></p> 
<p>Â  æ¨¡å¼å¯æŸ¥çœ‹Â  https://codemirror.net/mode/</p> 
<pre><code>import "codemirror/mode/python/python.js";
 
mode: "python", // è¦ä½¿ç”¨çš„æ¨¡å¼//https://codemirror.net/mode/</code></pre> 
<p><strong>3.æ»šåŠ¨å’Œæ¢è¡Œ</strong></p> 
<pre><code> lineWrapping: true,//æ»šåŠ¨æˆ–æ¢è¡Œ
 scrollbarStyle: null,//æ»šåŠ¨æ¡æ ·å¼ï¼Œä¸ºnullæ—¶éšè—æ»šåŠ¨æ¡</code></pre> 
<p><strong>4.ä¸»é¢˜</strong></p> 
<pre><code>//å¼•å…¥ä¸»é¢˜æ–‡ä»¶ï¼ˆå¯é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ï¼‰
import 'codemirror/theme/material.css';
import 'codemirror/theme/solarized.css'

//optionsä¸­é…ç½®
theme: 'material',//ä¸»é¢˜</code></pre> 
<p><strong>Â 5.ä»£ç æŠ˜å </strong></p> 
<pre><code>// å¼•å…¥
import 'codemirror/addon/fold/foldgutter.css';
import 'codemirror/addon/fold/foldcode.js';
import 'codemirror/addon/fold/foldgutter.js';
import 'codemirror/addon/fold/brace-fold.js';
import 'codemirror/addon/fold/comment-fold.js';
import 'codemirror/addon/fold/indent-fold.js';

//optionsä¸­é…ç½®
// åœ¨è¡Œæ§½ä¸­æ·»åŠ è¡Œå·æ˜¾ç¤ºå™¨ã€æŠ˜å å™¨ã€è¯­æ³•æ£€æµ‹å™¨
gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter", "CodeMirror-lint-markers"],
foldGutter: true, // å¯ç”¨è¡Œæ§½ä¸­çš„ä»£ç æŠ˜å </code></pre> 
<p><strong>6.ç¼©è¿›</strong></p> 
<pre><code>tabSize: 2, //tabé”®ç¼©è¿›,é»˜è®¤4
smartIndent: true, // æ™ºèƒ½ç¼©è¿›
indentUnit: 2, // æ™ºèƒ½ç¼©è¿›å•ä½ä¸º2ä¸ªç©ºæ ¼é•¿åº¦
indentWithTabs: true//Whether, when indenting, the first N*tabSize spaces should be replaced by N tabs. Default is false.æ²¡çœ‹æ˜ç™½ğŸ˜…</code></pre> 
<p><strong>7.é€‰ä¸­è¡Œé«˜äº®</strong></p> 
<pre><code>//å¼•å…¥
import "codemirror/addon/selection/active-line.js";

optionsä¸­é…ç½®
styleActiveLine: true, // æ˜¾ç¤ºé€‰ä¸­è¡Œçš„æ ·å¼</code></pre> 
<p><strong>8.æ‹¬å·åŒ¹é…ä»¥åŠè‡ªåŠ¨è¡¥å…¨</strong></p> 
<pre><code>// æ‹¬å·åŒ¹é…
import "codemirror/addon/edit/closebrackets.js";
import "codemirror/addon/edit/matchbrackets.js";

//optionsä¸­é…ç½®
matchBrackets: true,	//æ‹¬å·åŒ¹é…
autoCloseBrackets: true,//æ‹¬å·è‡ªåŠ¨è¡¥å…¨</code></pre> 
<p><strong>Â 9.ä»£ç æç¤ºçº§è‡ªåŠ¨è¡¥å…¨</strong></p> 
<pre><code>// ä»£ç æç¤º
import 'codemirror/addon/hint/show-hint.css'; //
import 'codemirror/addon/hint/show-hint.js';
import 'codemirror/addon/hint/anyword-hint.js'; // ç®€å•æç¤ºï¼ŒæŒ‰éœ€å¼•å…¥ï¼Œsplå¯å¼•å…¥sql-hint.js

//ä»£ç æç¤ºè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½
myCodeMirror.on("keypress", function () {//ä»£ç è¡¥å…¨åŠŸèƒ½
   myCodeMirror.showHint();
});

//å¦‚æœæœªé€‰æ‹©æç¤ºä»£ç ï¼Œä¼šé»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªè¡¥å…¨ä»£ç ï¼Œemmmm.....
//å¯åœ¨optionsä¸­é…ç½®ä»¥ä¸‹ä»£ç ï¼Œé»˜è®¤ä¸è¡¥å…¨ï¼Œåªæç¤º
hintOptions: {
   completeSingle: false//ä»£ç è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ä¸é»˜è®¤è¡¥å……
},</code></pre> 
<hr> 
<p><strong>å®Œæ•´ä»£ç </strong></p> 
<pre><code>import React, { useEffect, useState } from 'react'
import axios from 'axios';

import CodeMirror from 'codemirror';
import 'codemirror/lib/codemirror.css'
//ä¸»é¢˜
import 'codemirror/theme/material.css';
import 'codemirror/theme/solarized.css'
// æŠ˜å ä»£ç 
import 'codemirror/addon/fold/foldgutter.css';
import 'codemirror/addon/fold/foldcode.js';
import 'codemirror/addon/fold/foldgutter.js';
import 'codemirror/addon/fold/brace-fold.js';
import 'codemirror/addon/fold/comment-fold.js';
import 'codemirror/addon/fold/indent-fold.js';

// ä»£ç æç¤º
import 'codemirror/addon/hint/show-hint.css'; //
import 'codemirror/addon/hint/show-hint.js';
import 'codemirror/addon/hint/anyword-hint.js'; // ç®€å•æç¤ºï¼ŒæŒ‰éœ€å¼•å…¥ï¼Œsplå¯å¼•å…¥sql-hint.js

import "codemirror/addon/comment/comment.js";
// é«˜äº®
import "codemirror/addon/selection/active-line.js";

// pythonè¯­è¨€
import "codemirror/mode/python/python.js";

// æ‹¬å·åŒ¹é…
import "codemirror/addon/edit/closebrackets.js";
import "codemirror/addon/edit/matchbrackets.js";

import 'codemirror/addon/lint/lint.js'
import 'codemirror/addon/lint/javascript-lint.js'

import Style from './OnlineEdit.module.css'
import { Button } from 'antd';

let myCodeMirror;
export default function OnlineEdit() {
    const [submitResult, setSubmitResult] = useState('')
    // åˆå§‹åŒ–ç¼–è¾‘å™¨
    useEffect(() =&gt; {
        const textArea = document.getElementById("editor");
        myCodeMirror = CodeMirror.fromTextArea(textArea, {
            theme: 'material',//ä¸»é¢˜
            lineNumbers: true,//æ˜¾ç¤ºè¡Œå·
            firstLineNumber: 1,//è¡Œå·ä»å‡ å¼€å§‹ï¼Œé»˜è®¤1
            lineWrapping: true,//æ»šåŠ¨æˆ–æ¢è¡Œ
            scrollbarStyle: null,//éšè—æ»šåŠ¨æ¡æ ·å¼
            tabSize: 2, //tabé”®ç¼©è¿›,é»˜è®¤4
            smartIndent: true, // æ™ºèƒ½ç¼©è¿›
            indentUnit: 2, // æ™ºèƒ½ç¼©è¿›å•ä½ä¸º2ä¸ªç©ºæ ¼é•¿åº¦
            indentWithTabs: true, // ä½¿ç”¨åˆ¶è¡¨ç¬¦è¿›è¡Œæ™ºèƒ½ç¼©è¿›
            autofocus: true,//è‡ªåŠ¨è·å–ç„¦ç‚¹
            // åœ¨è¡Œæ§½ä¸­æ·»åŠ è¡Œå·æ˜¾ç¤ºå™¨ã€æŠ˜å å™¨ã€è¯­æ³•æ£€æµ‹å™¨
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter", "CodeMirror-lint-markers"],
            foldGutter: true, // å¯ç”¨è¡Œæ§½ä¸­çš„ä»£ç æŠ˜å 
            mode: "python", // è¦ä½¿ç”¨çš„æ¨¡å¼//https://codemirror.net/mode/
            styleActiveLine: true, // æ˜¾ç¤ºé€‰ä¸­è¡Œçš„æ ·å¼
            matchBrackets: true,	//æ‹¬å·åŒ¹é…
            autoCloseBrackets: true,//æ‹¬å·è‡ªåŠ¨è¡¥å…¨ï¼Œ()[]{}''""
            hintOptions: {
                completeSingle: false//ä»£ç è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ä¸é»˜è®¤è¡¥å……
            },
        });
        myCodeMirror.setOption("value", 'print("hello word")');//åˆå§‹å€¼
        myCodeMirror.on("keypress", function () {//ä»£ç è¡¥å…¨åŠŸèƒ½
            myCodeMirror.showHint();
        });
        myCodeMirror.setSize('40vw', '50vh');//ç¼–è¾‘æ¡†å¤§å°(å®½ï¼Œé«˜)
    }, [])

    // å°†å€¼ä¼ ç»™åç«¯ï¼Œåç«¯è¿”å›è¿è¡Œç»“æœ
    function runFunction() {
        axios({
            method: 'post',
            url: 'http://192.168.2.139:7000/edit_api/edit',
            params: {
                code: myCodeMirror.getValue()
            },
            // timeout: 5000,
        }).then(function (res) {
            console.log('3:', res)
            if (res.data.code === 0) {
                setSubmitResult(res.data.data.output)
            }
        }).catch(function (error) {
            console.log(error);
        })
    }

    return (
        &lt;div className={Style.mainWrapper}&gt;
            &lt;div className={Style.leftWrapper}&gt;
                &lt;div className={Style.codeTop}&gt;
                    &lt;Button onClick={runFunction} type='primary' &gt;è¿è¡Œ&lt;/Button&gt;
                &lt;/div&gt;
                &lt;textarea id="editor"&gt;&lt;/textarea&gt;
            &lt;/div&gt;
            &lt;div className={Style.rightWrapper}&gt;
                &lt;div className={Style.codeTop}&gt;
                    &lt;p&gt;è¿è¡Œç»“æœ&lt;/p&gt;
                &lt;/div&gt;
                &lt;div className={Style.codeResult}&gt;
                    &lt;div&gt;{submitResult}&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    )
}

</code></pre> 
<p>cssæ ·å¼</p> 
<pre><code>.mainWrapper {
    height: 100vh;
    width: 100vw;
    padding: 0px 10vw;
    display: flex;
    /* justify-content: center; */
    align-items: center;
}

.leftWrapper {
    width: 40vw;
    height: 55vh;
}

.rightWrapper {
    width: 40vw;
    height: 55vh;
}

.codeTop {
    height: 5vh;
}

.codeTop p {
    font-weight: 600;
    font-size: 2vh;
}

.codeResult {
    height: 50vh;
    background-color: #263238;
    border-left: 1px solid white;
    /* è¯†åˆ«\næ¢è¡Œ */
    white-space: pre-line;
    padding: 2vh 2vw;
    overflow-y: auto;
    color: white;
}</code></pre> 
<hr> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ba386a7e5e8fdb54051628f38e843f94/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Windows RPC åˆä½“éªŒ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a0de5143d093b6b677dac0a9b383ffc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Verilogç®€ä»‹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>