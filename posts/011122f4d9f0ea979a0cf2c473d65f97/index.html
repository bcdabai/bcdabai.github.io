<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>动态规划：完全背包问题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="动态规划：完全背包问题" />
<meta property="og:description" content="本题力扣上没有，是刷的卡码网第52题52. 携带研究材料感兴趣的小伙伴可以去刷一下，是ACM模式。
题目： 题目描述：
小明是一位科学家，他需要参加一场重要的国际科学大会，以展示自己的最新研究成果。他需要带一些研究材料，但是他的行李箱空间有限。这些研究材料包括实验设备、文献资料和实验样本等等，它们各自占据不同的空间，并且具有不同的价值。
小明的行李空间为 N，问小明应该如何抉择，才能携带最大价值的研究材料，每种研究材料可以选择无数次，并且可以重复选择。
输入描述：
第一行包含两个整数，N，V，分别表示研究材料的种类和行李空间
接下来包含 N 行，每行两个整数 wi 和 vi，代表第 i 种研究材料的重量和价值
输出描述：
输出一个整数，表示最大价值。
输入示例：
4 5
1 2
2 4
3 4
4 5
输出示例：
10
提示信息：
第一种材料选择五次，可以达到最大值。
数据范围：
1 &lt;= N &lt;= 10000;
1 &lt;= V &lt;= 10000;
1 &lt;= wi, vi &lt;= 10^9.
思路： 完全背包 有N件物品和一个最多能背重量为W的背包。第i件物品的重量是weight[i]，得到的价值是value[i] 。每件物品都有无限个（也就是可以放入背包多次），求解将哪些物品装入背包里物品价值总和最大。
完全背包和01背包问题唯一不同的地方就是，每种物品有无限件。
在下面的讲解中，依然举这个例子：
背包最大重量为4。
物品为：
重量价值物品0115物品1320物品2430 每件商品都有无限个！
问背包能背的物品最大价值是多少？
01背包和完全背包唯一不同就是体现在遍历顺序上，所以本篇博客就不去做动规五部曲了，我们直接针对遍历顺序经行分析！（要先掌握01背包）
01背包问题详细请见动态规划：01背包问题(二)
首先再回顾一下01背包的核心代码：
for i in range(bag_nums): # 遍历每个物品 for j in range(bag_weight, weight[i] - 1, -1): # 从后往前遍历背包重量 dp[j] = max(dp[j], dp[j - weight[i]] &#43; value[i]) # 更新当前背包重量对应的最大价值 我们知道01背包内层循环是从大到小遍历，为了保证每个物品仅被添加一次。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/011122f4d9f0ea979a0cf2c473d65f97/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-20T22:19:46+08:00" />
<meta property="article:modified_time" content="2024-01-20T22:19:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">动态规划：完全背包问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本题力扣上没有，是刷的卡码网第52题<a href="https://kamacoder.com/problempage.php?pid=1052" rel="nofollow">52. 携带研究材料</a>感兴趣的小伙伴可以去刷一下，是ACM模式。</p> 
<h2><a id="_1"></a>题目：</h2> 
<p>题目描述：</p> 
<blockquote> 
 <p>小明是一位科学家，他需要参加一场重要的国际科学大会，以展示自己的最新研究成果。他需要带一些研究材料，但是他的行李箱空间有限。这些研究材料包括实验设备、文献资料和实验样本等等，它们各自占据不同的空间，并且具有不同的价值。</p> 
 <p>小明的行李空间为 N，问小明应该如何抉择，才能携带最大价值的研究材料，每种研究材料可以选择无数次，并且可以重复选择。</p> 
</blockquote> 
<p>输入描述：</p> 
<blockquote> 
 <p>第一行包含两个整数，N，V，分别表示研究材料的种类和行李空间</p> 
 <p>接下来包含 N 行，每行两个整数 wi 和 vi，代表第 i 种研究材料的重量和价值</p> 
</blockquote> 
<p>输出描述：</p> 
<blockquote> 
 <p>输出一个整数，表示最大价值。</p> 
</blockquote> 
<p>输入示例：</p> 
<blockquote> 
 <p>4 5<br> 1 2<br> 2 4<br> 3 4<br> 4 5</p> 
</blockquote> 
<p>输出示例：</p> 
<blockquote> 
 <p>10</p> 
</blockquote> 
<p>提示信息：</p> 
<blockquote> 
 <p>第一种材料选择五次，可以达到最大值。</p> 
</blockquote> 
<p>数据范围：</p> 
<blockquote> 
 <p>1 &lt;= N &lt;= 10000;<br> 1 &lt;= V &lt;= 10000;<br> 1 &lt;= wi, vi &lt;= 10^9.</p> 
</blockquote> 
<h2><a id="_39"></a>思路：</h2> 
<h3><a id="_40"></a>完全背包</h3> 
<p>有N件物品和一个最多能背重量为W的背包。第i件物品的重量是weight[i]，得到的价值是value[i] 。<strong>每件物品都有无限个（也就是可以放入背包多次）</strong>，求解将哪些物品装入背包里物品价值总和最大。</p> 
<p><strong>完全背包和01背包问题唯一不同的地方就是，每种物品有无限件。</strong></p> 
<p>在下面的讲解中，依然举这个例子：</p> 
<p>背包最大重量为4。</p> 
<p>物品为：</p> 
<table><thead><tr><th></th><th>重量</th><th>价值</th></tr></thead><tbody><tr><td>物品0</td><td>1</td><td>15</td></tr><tr><td>物品1</td><td>3</td><td>20</td></tr><tr><td>物品2</td><td>4</td><td>30</td></tr></tbody></table> 
<p><strong>每件商品都有无限个！</strong></p> 
<p>问背包能背的物品最大价值是多少？</p> 
<p>01背包和完全背包唯一不同就是体现在遍历顺序上，所以本篇博客就不去做动规五部曲了，我们直接针对遍历顺序经行分析！（要先掌握01背包）<br> 01背包问题详细请见<a href="http://t.csdnimg.cn/4Zspy" rel="nofollow">动态规划：01背包问题(二)</a></p> 
<p>首先再回顾一下01背包的核心代码：</p> 
<pre><code class="prism language-python">    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bag_nums<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 遍历每个物品</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bag_weight<span class="token punctuation">,</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 从后往前遍历背包重量</span>
            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 更新当前背包重量对应的最大价值</span>

</code></pre> 
<p>我们知道01背包内层循环是从大到小遍历，为了保证每个物品仅被添加一次。</p> 
<p>而完全背包的物品是可以添加多次的，所以要从小到大去遍历，即：</p> 
<pre><code class="prism language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bag_nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 从weight[i]到bag_weight遍历，更新dp数组</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> bag_weight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 更新dp[j]的值</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>具体原因01背包中都有讲过</p> 
<p><strong>还有一个很重要的问题，为什么遍历物品在外层循环，遍历背包容量在内层循环？</strong></p> 
<p>01背包中二维dp数组的两个for遍历的先后循序是可以颠倒了，一维dp数组的两个for循环先后循序一定是先遍历物品，再遍历背包容量。</p> 
<p><strong>在完全背包中，对于一维dp数组来说，其实两个for循环嵌套顺序是无所谓的！</strong></p> 
<p>因为dp[j] 是根据 下标j之前所对应的dp[j]计算出来的。 只要保证下标j之前的dp[j]都是经过计算的就可以了。</p> 
<p>遍历物品在外层循环，遍历背包容量在内层循环，状态如图：</p> 
<p><img src="https://images2.imgbox.com/94/b3/SdAkB2jT_o.png" alt="在这里插入图片描述"><br> 遍历背包容量在外层循环，遍历物品在内层循环，状态如图：</p> 
<p><img src="https://images2.imgbox.com/14/dd/YezzsoGj_o.png" alt="在这里插入图片描述"><br> 看了这两个图，大家就会理解，完全背包中，两个for循环的先后循序，都不影响计算dp[j]所需要的值（这个值就是下标j之前所对应的dp[j]）。</p> 
<p>注意，这里先后循环顺序可以颠倒指的是纯完全背包问题，如果结合具体题目可能就不能颠倒。</p> 
<h2><a id="_103"></a>代码及详细注释：</h2> 
<pre><code class="prism language-python"><span class="token comment"># 读取输入</span>
N <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
bag_nums <span class="token operator">=</span> N<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 物品的数量</span>
bag_weight <span class="token operator">=</span> N<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 背包的容量</span>
weight <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 物品的重量</span>
value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 物品的价值</span>
<span class="token comment"># 读取每个物品的重量和价值</span>
<span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bag_nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    weight<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    value<span class="token punctuation">.</span>append<span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token comment"># 创建一个长度为bag_weight+1的数组dp，用于记录背包容量为j时的最大总价值</span>
dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>bag_weight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># 遍历每个物品</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bag_nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 从weight[i]到bag_weight遍历，更新dp数组</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> bag_weight <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 更新dp[j]的值</span>
        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j <span class="token operator">-</span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 输出背包容量为bag_weight时的最大总价值</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>bag_weight<span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f10b9586e83eec243d7f72f6e73b281/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Tailor the Quick Access Toolbar</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/12d85f2fa518a9382e4cb09be628a698/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">供应链安全项目in-toto开源框架详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>