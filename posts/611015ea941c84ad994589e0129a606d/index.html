<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot、springcloud之静态资源路径的配置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot、springcloud之静态资源路径的配置" />
<meta property="og:description" content="静态资源路径是指系统可以直接访问的路径，且路径下的所有文件均可被用户直接读取。 在Springboot中默认的静态资源路径有：classpath:/METAINF/resources/，classpath:/resources/，classpath:/static/，
classpath:/public/，从这里可以看出这里的静态资源路径都是在classpath中（也就是在项目路径下指定的这几个文件夹）
试想这样一种情况：一个网站有文件上传文件的功能，如果被上传的文件放在上述的那些文件夹中会有怎样的后果？
网站数据与程序代码不能有效分离；当项目被打包成一个.jar文件部署时，再将上传的文件放到这个.jar文件中是有多么低的效率；网站数据的备份将会很痛苦。 此时可能最佳的解决办法是将静态资源路径设置到磁盘的基本个目录。
在Springboot中可以直接在配置文件中覆盖默认的静态资源路径的配置信息：
application.properties配置文件如下： server.port=1122 web.upload-path=D:/temp/study13/ spring.mvc.static-path-pattern=/** spring.resources.static-locations=classpath:/META-INF/resources/,classpath:/resources/,\ classpath:/static/,classpath:/public/,file:${web.upload-path} 注意：web.upload-path这个属于自定义的属性，指定了一个路径，注意要以/结尾；
spring.mvc.static-path-pattern=/**表示所有的访问都经过静态资源路径；
spring.resources.static-locations在这里配置静态资源路径，前面说了这里的配置是覆盖默认配置，所以需要将默认的也加上否则static、public等这些路径将不能被当作静态资源路径，在这个最末尾的file:${web.upload-path}之所有要加file:是因为指定的是一个具体的硬盘路径，其他的使用classpath指的是系统环境变量
编写测试类上传文件 package com.zslin; import org.junit.Test; import org.junit.runner.RunWith; import org.springframework.beans.factory.annotation.Value; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.test.context.junit4.SpringRunner; import org.springframework.util.FileCopyUtils; import java.io.File; /** * Created by 钟述林 393156105@qq.com on 2016/10/24 0:44. */ @SpringBootTest @RunWith(SpringRunner.class) public class FileTest { @Value(&#34;${web.upload-path}&#34;) private String path; /** 文件上传测试 */ @Test public void uploadTest() throws Exception { File f = new File(&#34;D:/pic.jpg&#34;); FileCopyUtils.copy(f, new File(path&#43;&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/611015ea941c84ad994589e0129a606d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-06-30T13:54:30+08:00" />
<meta property="article:modified_time" content="2017-06-30T13:54:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot、springcloud之静态资源路径的配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 class="title" style='margin:20px 0px 0px; padding:0px; font-family:"microsoft yahei"; line-height:1.3; word-break:break-word'> <span style="font-size:14px; color:#ff0000">静态资源路径<span style="line-height:1.7">是指系统可以直接访问的路径，且路径下的所有文件均可被用户直接读取</span><span style="line-height:1.7">。</span></span></h2> 
<div class="show-content" style='font-family:"microsoft yahei"; line-height:1.7'> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 在Springboot中默认的静态资源路径有：<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>classpath:/METAINF/resources/</code>，<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>classpath:/resources/</code>，<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>classpath:/static/</code>，</p> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> <code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>classpath:/public/</code>，从这里可以看出这里的静态资源路径都是在<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>classpath</code>中（也就是在项目路径下指定的这几个文件夹）</p> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 试想这样一种情况：一个网站有文件上传文件的功能，如果被上传的文件放在上述的那些文件夹中会有怎样的后果？</p> 
 <ul style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:20px; padding:0px; word-break:break-word; margin-left:22px"><li style="line-height:30px; margin-bottom:10px">网站数据与程序代码不能有效分离；</li><li style="line-height:30px; margin-bottom:10px">当项目被打包成一个<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>.jar</code>文件部署时，再将上传的文件放到这个<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>.jar</code>文件中是有多么低的效率；</li><li style="line-height:30px; margin-bottom:10px">网站数据的备份将会很痛苦。</li></ul> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 此时可能最佳的解决办法是将静态资源路径设置到磁盘的基本个目录。</p> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 在<a target="_blank" href="http://www.zslin.com/?cateId=3" rel="nofollow noopener noreferrer" style="color:rgb(49,148,208); background-color:transparent">Springboot</a>中可以直接在配置文件中覆盖默认的静态资源路径的配置信息：</p> 
 <ul style="font-size:16px; margin-top:0px; margin-bottom:20px; padding:0px; word-break:break-word; margin-left:22px"><li style="line-height:30px; margin-bottom:10px"><span style="color:#ff0000"><code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>application.properties</code>配置文件如下：</span></li></ul> 
 <pre class="hljs aspectj" name="code" style='color: rgb(101, 123, 131); font-size: 13px; white-space: pre-wrap; word-wrap: normal; padding: 15px; background: rgb(246, 246, 246); overflow: auto; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; margin-top: 0px; margin-bottom: 20px; line-height: 1.42857; word-break: break-all; border: 1px solid rgb(204, 204, 204);'><code class="aspectj" style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; padding: 0px; border: none; background-color: transparent;'>server.port=<span class="hljs-number" style="color: rgb(42, 161, 152);">1122</span>

web.upload-path=D:/temp/study13/

spring.mvc.<span class="hljs-keyword" style="color: rgb(133, 153, 0);">static</span>-path-pattern=/**
spring.resources.<span class="hljs-keyword" style="color: rgb(133, 153, 0);">static</span>-locations=classpath:/META-INF/resources/,classpath:/resources/,\
  classpath:/<span class="hljs-keyword" style="color: rgb(133, 153, 0);">static</span>/,classpath:/<span class="hljs-keyword" style="color: rgb(133, 153, 0);">public</span>/,file:${web.upload-path}</code></pre> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> <span style="font-weight:700">注意：</span><code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>web.upload-path</code>这个属于自定义的属性，指定了一个路径，注意要以<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>/</code>结尾；</p> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> <code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'><a target="_blank" href="http://lib.csdn.net/base/javaee" rel="nofollow noopener noreferrer" class="replace_word" title="Java EE知识库" style="color:rgb(223,52,52); font-weight:bold">spring</a>.mvc.static-path-pattern=/**</code>表示所有的访问都经过静态资源路径；</p> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> <code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>spring.resources.static-locations</code>在这里配置静态资源路径，前面说了这里的配置是覆盖默认配置，所以需要将默认的也加上否则<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>static</code>、<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>public</code>等这些路径将不能被当作静态资源路径，在这个最末尾的<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>file:${web.upload-path}</code>之所有要加<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>file:</code>是因为指定的是一个具体的硬盘路径，其他的使用<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>classpath</code>指的是系统环境变量</p> 
 <ul style="font-size:16px; margin-top:0px; margin-bottom:20px; padding:0px; word-break:break-word; margin-left:22px"><li style="line-height:30px; margin-bottom:10px"><span style="color:#ff0000">编写测试类上传文件</span></li></ul> 
 <pre><code class="language-java"><code class="java" style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; padding: 0px; border: none; background-color: transparent;'><span class="hljs-keyword" style="color: rgb(133, 153, 0);">package</span> com.zslin;

<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> org.junit.Test;
<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> org.junit.runner.RunWith;
<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> org.springframework.boot.test.context.SpringBootTest;
<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> org.springframework.test.context.junit4.SpringRunner;
<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> org.springframework.util.FileCopyUtils;

<span class="hljs-keyword" style="color: rgb(133, 153, 0);">import</span> java.io.File;

<span class="hljs-comment" style="color: rgb(147, 161, 161);">/**
 * Created by 钟述林 393156105@qq.com on 2016/10/24 0:44.
 */</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@RunWith</span>(SpringRunner.class)
<span class="hljs-keyword" style="color: rgb(133, 153, 0);">public</span> <span class="hljs-class"><span class="hljs-keyword" style="color: rgb(133, 153, 0);">class</span> <span class="hljs-title" style="color: rgb(181, 137, 0);">FileTest</span> </span>{

    <span class="hljs-meta">@Value</span>(<span class="hljs-string" style="color: rgb(42, 161, 152);">"${web.upload-path}"</span>)
    <span class="hljs-keyword" style="color: rgb(133, 153, 0);">private</span> String path;

    <span class="hljs-comment" style="color: rgb(147, 161, 161);">/** 文件上传测试 */</span>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword" style="color: rgb(133, 153, 0);">public</span> <span class="hljs-keyword" style="color: rgb(133, 153, 0);">void</span> <span class="hljs-title" style="color: rgb(38, 139, 210);">uploadTest</span><span class="hljs-params" style="color: rgb(102, 0, 102);">()</span> <span class="hljs-keyword" style="color: rgb(133, 153, 0);">throws</span> Exception </span>{
        File f = <span class="hljs-keyword" style="color: rgb(133, 153, 0);">new</span> File(<span class="hljs-string" style="color: rgb(42, 161, 152);">"D:/pic.jpg"</span>);
        FileCopyUtils.copy(f, <span class="hljs-keyword" style="color: rgb(133, 153, 0);">new</span> File(path+<span class="hljs-string" style="color: rgb(42, 161, 152);">"/1.jpg"</span>));
    }
}</code></code></pre> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> <span style="font-weight:700">注意：</span>这里将<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>D:/pic.jpg</code>上传到配置的静态资源路径下，下面再写一个<a target="_blank" href="http://lib.csdn.net/base/softwaretest" rel="nofollow noopener noreferrer" class="replace_word" title="软件测试知识库" style="color:rgb(223,52,52); font-weight:bold">测试</a>方法来遍历此路径下的所有文件。</p> 
 <pre><code class="language-java"><code class="java" style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; padding: 0px; border: none; background-color: transparent;'><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword" style="color: rgb(133, 153, 0);">public</span> <span class="hljs-keyword" style="color: rgb(133, 153, 0);">void</span> <span class="hljs-title" style="color: rgb(38, 139, 210);">listFilesTest</span><span class="hljs-params" style="color: rgb(102, 0, 102);">()</span> </span>{
    File file = <span class="hljs-keyword" style="color: rgb(133, 153, 0);">new</span> File(path);
    <span class="hljs-keyword" style="color: rgb(133, 153, 0);">for</span>(File f : file.listFiles()) {
        System.out.println(<span class="hljs-string" style="color: rgb(42, 161, 152);">"fileName : "</span>+f.getName());
    }
}</code></code></pre> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 可以到得结果：</p> 
 <pre class="hljs ada" name="code" style='color: rgb(101, 123, 131); font-size: 13px; white-space: pre-wrap; word-wrap: normal; padding: 15px; background: rgb(246, 246, 246); overflow: auto; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; margin-top: 0px; margin-bottom: 20px; line-height: 1.42857; word-break: break-all; border: 1px solid rgb(204, 204, 204);'><code class="ada" style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; padding: 0px; border: none; background-color: transparent;'>fileName : 1.<span class="hljs-type" style="color: rgb(181, 137, 0);">jpg</span></code></pre> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 说明文件已上传成功，静态资源路径也配置成功。</p> 
 <ul style="font-size:16px; margin-top:0px; margin-bottom:20px; padding:0px; word-break:break-word; margin-left:22px"><li style="line-height:30px; margin-bottom:10px"><span style="color:#ff0000">浏览器方式验证</span></li></ul> 
 <p style="color:rgb(47,47,47); font-size:16px; margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> 由于前面已经在静态资源路径中上传了一个名为<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>1.jpg</code>的图片，也使用<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>server.port=1122</code>设置了端口号为<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>1122</code>，所以可以通过浏览器打开：<code style='font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:12px; color:rgb(101,123,131); padding:2px 4px; border:none; white-space:pre-wrap; background-color:rgb(246,246,246)'>http://localhost:1122/1.jpg</code>访问到刚刚上传的图片。</p> 
 <p style="margin-top:0px; margin-bottom:25px; padding-top:0px; padding-bottom:0px; word-break:break-word"> </p> 
 <h2 class="title" style='margin:20px 0px 0px; padding:0px; font-family:"microsoft yahei"; line-height:1.3; word-break:break-word'> <span style="line-height:1.7"><a target="_blank" href="http://blog.csdn.net/kilua_way/article/details/54601195" rel="noopener noreferrer"><span style="font-size:14px; font-weight:normal"><span style="color:#666666">转载地址：http://blog.csdn.net/kilua_way/article/details/54601195</span></span></a></span></h2> 
 <br> 
 <p></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bb4c83b9d574fc1c4d8629d8a507a50c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mtk6589显示子系统笔记（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48ef299ad8d25c36c32cde412e96860c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Relative path in absolute URI: ${system:java.io.tmpdir%7D/$%7Bhive.session.id%7D_resources</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>