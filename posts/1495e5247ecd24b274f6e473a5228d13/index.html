<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python编程从入门到实践练习12-5 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python编程从入门到实践练习12-5" />
<meta property="og:description" content="#main.py import pygame import sys from ship import Ship import game_functions as gf from settings import Settings from pygame.sprite import Group def run_game(): &#34;&#34;&#34;飞机位于屏幕左边&#34;&#34;&#34; pygame.init() ai_settings = Settings() screen = pygame.display.set_mode((ai_settings.screen_width, ai_settings.screen_height)) ship = Ship(screen) bullets = Group() pygame.display.set_caption(&#34;Alien Invasion&#34;) while True: gf.check_events(ship, ai_settings, bullets, screen) ship.update(ship) bullets.update() for bullet in bullets.copy(): if bullet.rect.left &gt; ai_settings.screen_width: bullets.remove(bullet) #print(len(bullets)) gf.update_screen(screen, ai_settings, ship, bullets) run_game() #ship.py &#34;&#34;&#34;为方便起见,将子弹类和飞船类都写在这里&#34;&#34;&#34; import pygame from pygame.sprite import Sprite class Ship(): &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1495e5247ecd24b274f6e473a5228d13/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-24T00:00:14+08:00" />
<meta property="article:modified_time" content="2018-04-24T00:00:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python编程从入门到实践练习12-5</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment">#main.py</span>
<span class="hljs-keyword">import</span> pygame
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">from</span> ship <span class="hljs-keyword">import</span> Ship
<span class="hljs-keyword">import</span> game_functions <span class="hljs-keyword">as</span> gf
<span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Settings
<span class="hljs-keyword">from</span> pygame.sprite <span class="hljs-keyword">import</span> Group

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_game</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-string">"""飞机位于屏幕左边"""</span>
    pygame.init()
    ai_settings = Settings()
    screen = pygame.display.set_mode((ai_settings.screen_width,
                                      ai_settings.screen_height))
    ship = Ship(screen)
    bullets = Group()
    pygame.display.set_caption(<span class="hljs-string">"Alien Invasion"</span>)

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>:
        gf.check_events(ship, ai_settings, bullets, screen)

        ship.update(ship)
        bullets.update()
        <span class="hljs-keyword">for</span> bullet <span class="hljs-keyword">in</span> bullets.copy():
            <span class="hljs-keyword">if</span> bullet.rect.left &gt; ai_settings.screen_width:
                bullets.remove(bullet)
        <span class="hljs-comment">#print(len(bullets))</span>
        gf.update_screen(screen, ai_settings, ship, bullets)

run_game()</code></pre> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment">#ship.py</span>
<span class="hljs-string">"""为方便起见,将子弹类和飞船类都写在这里"""</span>
<span class="hljs-keyword">import</span> pygame
<span class="hljs-keyword">from</span> pygame.sprite <span class="hljs-keyword">import</span> Sprite

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ship</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-string">"""飞船类"""</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, screen)</span>:</span>
        self.screen = screen
        self.image = pygame.image.load(<span class="hljs-string">'ship.jpg'</span>)
        self.rect = self.image.get_rect()
        self.screen_rect = self.screen.get_rect()

        self.moving_up = <span class="hljs-keyword">False</span>
        self.moving_down = <span class="hljs-keyword">False</span>

        <span class="hljs-comment">#将飞船放在指定位置</span>
        self.rect.centery = self.screen_rect.centery

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span><span class="hljs-params">(self, ship)</span>:</span>
        <span class="hljs-keyword">if</span> ship.moving_up:
            ship.rect.y -= <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> ship.moving_down:
            ship.rect.y += <span class="hljs-number">1</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">blitme</span><span class="hljs-params">(self)</span>:</span>
        self.screen.blit(self.image, self.rect)


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bullet</span><span class="hljs-params">(Sprite)</span>:</span>
    <span class="hljs-string">"""表示子弹的类"""</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, screen, ai_setting, ship)</span>:</span>
        super(Bullet, self).__init__()
        self.screen = screen

        <span class="hljs-comment">#在(0,0)处创建一个表示子弹的矩形,在设置正确的位置</span>
        self.rect = pygame.Rect(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,ai_setting.bullet_width,ai_setting.bullet_height)
        self.rect.centery = ship.rect.centery
        self.rect.right = ship.rect.right

        self.x = float(self.rect.x)
        self.color = ai_setting.bullet_color
        self.speed_factor = ai_setting.bullet_speed_factor

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">draw_bullet</span><span class="hljs-params">(self)</span>:</span>
        pygame.draw.rect(self.screen, self.color, self.rect)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span><span class="hljs-params">(self)</span>:</span>
        self.x += self.speed_factor
        self.rect.x = self.x
</code></pre> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment">#settingspy</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Settings</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self)</span>:</span>
        self.bg_color = (<span class="hljs-number">230</span>, <span class="hljs-number">230</span>, <span class="hljs-number">230</span>)
        self.screen_width = <span class="hljs-number">1200</span>
        self.screen_height = <span class="hljs-number">600</span>


        <span class="hljs-comment">#设置子弹的属性</span>
        self.bullet_width = <span class="hljs-number">15</span>
        self.bullet_height = <span class="hljs-number">3</span>
        self.bullet_color = (<span class="hljs-number">60</span>,<span class="hljs-number">60</span>,<span class="hljs-number">60</span>)
        self.bullet_speed_factor = <span class="hljs-number">1</span></code></pre> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment">#game_functions.py</span>
<span class="hljs-keyword">import</span> pygame

<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">from</span> ship <span class="hljs-keyword">import</span> Bullet

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">check_events</span><span class="hljs-params">(ship, ai_settings, bullets, screen)</span>:</span>
    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():
        <span class="hljs-keyword">if</span> event.type == pygame.QUIT:
            sys.exit()
        <span class="hljs-keyword">if</span> event.type == pygame.KEYDOWN:
            <span class="hljs-keyword">if</span> event.key == pygame.K_UP:
                ship.moving_up = <span class="hljs-keyword">True</span>
            <span class="hljs-keyword">elif</span> event.key == pygame.K_DOWN:
                ship.moving_down = <span class="hljs-keyword">True</span>
            <span class="hljs-keyword">elif</span> event.key == pygame.K_SPACE:
                fire_bullet(ship,ai_settings, bullets, screen)

        <span class="hljs-keyword">if</span> event.type == pygame.KEYUP:
            <span class="hljs-keyword">if</span> event.key == pygame.K_UP:
                ship.moving_up = <span class="hljs-keyword">False</span>
            <span class="hljs-keyword">elif</span> event.key == pygame.K_DOWN:
                ship.moving_down = <span class="hljs-keyword">False</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fire_bullet</span><span class="hljs-params">(ship, ai_settings, bullets, screen)</span>:</span>
    new_bullet = Bullet(screen, ai_settings, ship)
    bullets.add(new_bullet)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_screen</span><span class="hljs-params">(screen, ai_settings, ship, bullets)</span>:</span>
    screen.fill(ai_settings.bg_color)
    <span class="hljs-keyword">for</span> bullet <span class="hljs-keyword">in</span> bullets.sprites():
        bullet.draw_bullet()

    ship.blitme()
    pygame.display.flip()</code></pre> 
<p>这是python编程从入门到实践练习12-5的答案,鉴于水平有限,没有实现的功能如下:</p> 
<ol><li>未能阻挡飞船移出屏幕.</li><li>没有重构,重构好麻烦,天啊噜!!!</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fa7c95f02420a1cd9f774bd08f623f9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">项目总结（关于fixed/absolute固定的底部按钮被input输入框的键盘顶上去的问题一般安卓手机会出现这种问题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/781a801131165578dfbbd01d4697201a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">面试题（一）——互联网公司面试题整理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>