<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MATLAB函数-MATLAB编程第二版读书笔记 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MATLAB函数-MATLAB编程第二版读书笔记" />
<meta property="og:description" content="Chap 5 MATLAB函数 5.1 函数简介 一个典型的MATLAB函数如下：
function f = fact(n) % H1 Comment Line % Other Comment Line1 % Other Comment Line... f = prod(1:n); end function关键字标志着函数的开始，=左边是输出列表，=右边是函数名，紧跟函数名的是输入列表。
function下的第一个行注释称为H1注释行，应当是对本函数功能的总结，可以通过lookfor命令搜索到。
从H1注释行到第一个空行或者第一个可执行语句间的注释可以通过help命令搜索到。
lookfor fact; help fact; function 关键字（必需）对关键字使用小写字符。输出参数（可选）如果您的函数返回一个输出，则您可以在 function 关键字后面指定输出名称。function myOutput = myFunction(x)如果您的函数返回多个输出，请将输出名称括在方括号中。function [one,two,three] = myFunction(x)如果没有输出，您可以将其忽略。function myFunction(x)您也可以使用空的方括号。function [] = myFunction(x)函数名称（必需）有效的函数名字遵守与变量名称相同的规则。它们必须以字母开头，可以包含字母、数字或下划线。注意为避免混淆，对函数文件及函数文件内的第一个函数使用相同名称。MATLAB 将您的程序与文件名而不是函数名称相关联。脚本文件不能与文件中的函数具有相同的名称。输入参数（可选）如果您的函数接受任何输入，请在函数名称之后将输入名称括在圆括号中。用逗号将各个输入隔开。function y = myFunction(one,two,three)如果没有输入，可以忽略圆括号。 函数以end语句、文件末尾或局部函数的定义行结束。虽然end有时不是必须的，但一般都会加上end提高代码可读性。
5.2 按值传递变量 MATLAB函数的参数传递的机制是按值传递，但其实MATLAB会分析传入的参数是否在函数内被修改了，如果没有修改就不会对参数进行复制，而是使用外面的变量；如果修改了复制操作才会执行。
5.3 选择性参数 许多MATLAB函数支持选择性输入参数和输出参数，比如对于plot函数来说，既可以输入两个参数，也可以输入八个参数，对于max的输出，可以选择输出一个，也可以输出两个。
MATLAB中有专门的函数用于 获取选择性参数的信息 和 报告其错误：
NameFunctionnargin实际输入参数的个数nargout实际输出参数的个数nargchk如果调用参数过多或过少会返回一个标准错误信息error显示错误信息，并中止函数以免产生这个错误warning显示警告信息，并继续执行函数inputname返回对特定参数个数的实际变量名 注意：inputname返回的是***函数传入参数的工作区变量的名称***，如果输入参数是数字、表达式或索引表达式而不是变量，则它没有名称。要用inputname(n)来获取某个参数的名称，例如打印输入参数的变量名：
function argTest(arg1, arg2, arg3) % disp every arg in narginchk(1, 3); % use modern usage above instead of below % message = nargchk(minargs, maxargs, nargin); % error(message); for i = 1 : nargin disp(inputname(i)); end end 以前一般是将nrgchk和error结合着用，但现在MATLAB推荐使用narginchk和nargoutchk来代替,如果输入参数过多或过少，matlab会有报错：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/94a60af346a3dab46303a314a02578b7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-02T17:13:13+08:00" />
<meta property="article:modified_time" content="2022-03-02T17:13:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MATLAB函数-MATLAB编程第二版读书笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Chap_5_MATLAB_0"></a>Chap 5 MATLAB函数</h3> 
<h4><a id="51__2"></a>5.1 函数简介</h4> 
<p>一个典型的MATLAB函数如下：</p> 
<pre><code class="prism language-matlab">function f = fact(n)
% H1 Comment Line
% Other Comment Line1
% Other Comment Line...
    f = prod(1:n);
end
</code></pre> 
<p><code>function</code>关键字标志着函数的开始，<code>=</code>左边是输出列表，<code>=</code>右边是函数名，紧跟函数名的是输入列表。</p> 
<p><code>function</code>下的第一个行注释称为<code>H1注释行</code>，应当是对本函数功能的总结，可以通过<code>lookfor</code>命令搜索到。</p> 
<p>从<code>H1注释行</code>到第一个空行或者第一个可执行语句间的注释可以通过<code>help</code>命令搜索到。</p> 
<pre><code class="prism language-matlab">lookfor fact;
help fact;
</code></pre> 
<table><thead><tr><th><code>function</code> 关键字（必需）</th><th>对关键字使用小写字符。</th></tr></thead><tbody><tr><td>输出参数（可选）</td><td>如果您的函数返回一个输出，则您可以在 <code>function</code> 关键字后面指定输出名称。<code>function myOutput = myFunction(x)</code>如果您的函数返回多个输出，请将输出名称括在方括号中。<code>function [one,two,three] = myFunction(x)</code>如果没有输出，您可以将其忽略。<code>function myFunction(x)</code>您也可以使用空的方括号。<code>function [] = myFunction(x)</code></td></tr><tr><td>函数名称（必需）</td><td>有效的函数名字遵守与变量名称相同的规则。它们必须以字母开头，可以包含字母、数字或下划线。<strong>注意</strong>为避免混淆，对函数文件及函数文件内的第一个函数使用相同名称。MATLAB 将您的程序与<em>文件</em>名而不是函数名称相关联。脚本文件不能与文件中的函数具有相同的名称。</td></tr><tr><td>输入参数（可选）</td><td>如果您的函数接受任何输入，请在函数名称之后将输入名称括在圆括号中。用逗号将各个输入隔开。<code>function y = myFunction(one,two,three)</code>如果没有输入，可以忽略圆括号。</td></tr></tbody></table> 
<p>函数以<code>end</code>语句、文件末尾或局部函数的定义行结束。虽然<code>end</code>有时不是必须的，但一般都会加上<code>end</code>提高代码可读性。</p> 
<h4><a id="52__36"></a>5.2 按值传递变量</h4> 
<p>MATLAB函数的参数传递的机制是<strong>按值传递</strong>，但其实MATLAB会分析传入的参数是否在函数内被修改了，如果没有修改就不会对参数进行复制，而是使用外面的变量；如果修改了复制操作才会执行。</p> 
<h4><a id="53__40"></a>5.3 选择性参数</h4> 
<p>许多MATLAB函数支持选择性输入参数和输出参数，比如对于<code>plot</code>函数来说，既可以输入两个参数，也可以输入八个参数，对于<code>max</code>的输出，可以选择输出一个，也可以输出两个。</p> 
<p>MATLAB中有专门的函数用于 <strong>获取选择性参数的信息</strong> 和 <strong>报告其错误</strong>：</p> 
<table><thead><tr><th>Name</th><th>Function</th></tr></thead><tbody><tr><td>nargin</td><td>实际输入参数的个数</td></tr><tr><td>nargout</td><td>实际输出参数的个数</td></tr><tr><td>nargchk</td><td>如果调用参数过多或过少会返回一个标准错误信息</td></tr><tr><td>error</td><td>显示错误信息，并中止函数以免产生这个错误</td></tr><tr><td>warning</td><td>显示警告信息，并继续执行函数</td></tr><tr><td>inputname</td><td>返回对特定参数个数的实际变量名</td></tr></tbody></table> 
<p>注意：<code>inputname</code>返回的是***函数传入参数的工作区变量的名称***，如果输入参数是数字、表达式或索引表达式而不是变量，则它没有名称。要用<code>inputname(n)</code>来获取某个参数的名称，例如打印输入参数的变量名：</p> 
<pre><code class="prism language-matlab">function argTest(arg1, arg2, arg3)
% disp every arg in
narginchk(1, 3);
% use modern usage above instead of below
% message = nargchk(minargs, maxargs, nargin);
% error(message);
for i = 1 : nargin
    disp(inputname(i));
end
end
</code></pre> 
<p>以前一般是将<code>nrgchk</code>和<code>error</code>结合着用，但现在<strong>MATLAB推荐使用</strong><code>narginchk</code>和<code>nargoutchk</code>来代替,如果输入参数过多或过少，matlab会有报错：</p> 
<pre><code class="prism language-matlab">错误使用 argTest (第 2 行)
输入参数的数目不足。
</code></pre> 
<h4><a id="54__77"></a>5.4 全局变量</h4> 
<p>将变量声明为全局变量的关键字是<code>global</code>：</p> 
<pre><code class="prism language-matlab">% fun1.mat
global x;
x = 5;

% fun2.mat
global x;
disp(x); 
</code></pre> 
<p><strong>全局变量占用的是全局内存</strong>，而非本地工作区，如果多个函数都将特定的变量名称声明为 <code>global</code>，则它们都共享该变量的一个副本。</p> 
<p><strong>好的编程习惯：</strong></p> 
<ul><li>将全局变量声明在函数的开头，有助于区分本地变量</li><li>使用全局变量前需要先声明</li><li>利用全局变量进行大规模数据的交换</li></ul> 
<p>**注意：**如果首次发出 <code>global</code> 语句时尚不存在全局变量，则此语句初始化为空 <code>0x0</code> 矩阵。</p> 
<p><strong>全局变量的清除：</strong></p> 
<ul><li>要从所有工作区中清除全局变量，请使用 <code>clear global</code> <code>variable</code>。</li><li>要从当前工作区而不从其他工作区中清除全局变量，请使用 <code>clear</code> <code>variable</code>。</li></ul> 
<h4><a id="55__106"></a>5.5 持久变量</h4> 
<p>持久变量是函数内的局部变量，但调用完之后值不会被清除，而是保留了下来。声明持久变量的关键字是<code>persistent</code>。</p> 
<p>当 MATLAB 首次遇到特定 <code>persistent</code> 语句时，它将持久变量初始化为空矩阵 (<code>[]</code>)。通常函数会检查持久变量是否为空，如果是，则初始化该持久变量:</p> 
<pre><code class="prism language-matlab">function myFun()
    persistent n
    if isempty(n)
        n = 0;
    end
    n = n+1;
end

% 持久变量也会被清除
clear myFun
</code></pre> 
<p><strong>注意：</strong></p> 
<ul><li>持久变量需要先声明再引用</li><li>要清除持久变量，请使用<code>clear</code>清楚变量所在的函数。</li></ul> 
<h4><a id="56_function_functions_130"></a>5.6 函数的函数(function functions)</h4> 
<p>函数的函数指的是函数的输入参数中还有其他的函数。</p> 
<p>例如<code>fzero()</code>函数用于找到传递给它的函数值为0的自变量，如：</p> 
<pre><code class="prism language-matlab">fzero('cos', [0 pi]) % ans=1.5708
</code></pre> 
<p><code>eval(expression)</code>函数可以对一个表达式求值，指定为字符向量或字符串标量。如：</p> 
<pre><code class="prism language-matlab">eval('cos(pi)') %ans =-1
</code></pre> 
<p><code>feval()</code>函数使用函数名称对输入求值，<code>feval()</code>的作用等效为<strong>函数句柄</strong>。</p> 
<pre><code class="prism language-matlab">y = feval('round',pi)
</code></pre> 
<p>更多类似的函数有：</p> 
<table><thead><tr><th>Function</th><th>Describe</th></tr></thead><tbody><tr><td><code>fminbnd(fun, x1, x2)</code></td><td>查找单变量函数在给定区间内的最小值</td></tr><tr><td><code>quad(fun, x1, x2)</code></td><td>求函数在给定区间内的数值积分，推荐使用<code>integral</code>代替</td></tr><tr><td><code>ezplot(fun, x1, x2)</code></td><td>画出函数在给定区间内的图像, 更推荐使用<code>fplot</code></td></tr><tr><td><code>fplot(fun, [x1, x2])</code></td><td>画出函数在给定区间内的图像,默认区间是[-5, 5]</td></tr></tbody></table> 
<h4><a id="57__161"></a>5.7 局部函数、嵌套函数和私有函数</h4> 
<h5><a id="571__163"></a>5.7.1 局部函数</h5> 
<p>MATLAB函数文件可以包含多个函数。<strong>在函数文件中，第一个函数称为主函数</strong>。此函数对其他文件中的函数可见。而<strong>文件中的其他函数称为局部函数</strong>，它们可以任意顺序出现在主函数后面。<em>局部函数仅对同一文件中的其他函数可见</em>。它们等效于其他编程语言的子例程，有时被称为子函数。</p> 
<pre><code class="prism language-matlab">function [avg, med] = mystats(x)
n = length(x);
avg = mymean(x,n);
med = mymedian(x,n);
end

function a = mymean(v,n)
% MYMEAN Example of a local function.

a = sum(v)/n;
end

function m = mymedian(v,n)
% MYMEDIAN Another example of a local function.

w = sort(v);
if rem(n,2) == 1
    m = w((n + 1)/2);
else
    m = (w(n/2) + w(n/2 + 1))/2;
end
end
</code></pre> 
<h5><a id="572__192"></a>5.7.2 嵌套函数</h5> 
<p>嵌套函数是完全包含在父函数内的函数：</p> 
<pre><code class="prism language-matlab">function parent
disp('This is the parent function')
nestedfx

   function nestedfx
      disp('This is the nested function')
   end

end
</code></pre> 
<p>嵌套函数与其他类型的函数的主要区别是，<strong>嵌套函数可以访问和修改在其父函数中定义的变量</strong>。</p> 
<p>注意：</p> 
<ul><li>不能在任何 MATLAB® 程序控制语句内定义嵌套函数，例如 <code>if/elseif/else</code>、<code>switch/case</code>、<code>for</code>、<code>while</code> 或 <code>try/catch</code>。</li></ul> 
<p><strong>嵌套函数的可见性</strong>：</p> 
<p>每个函数都有特定的<em>作用域</em>，即可以看到该函数的一组其他函数。嵌套函数在以下位置可用：</p> 
<ul><li>高级别的函数能调用只低一级的嵌套函数。（在下面的代码中，函数 <code>A</code> 可以调用 <code>B</code> 或 <code>D</code>，但不能调用 <code>C</code> 或 <code>E</code>。）</li><li>同级别的嵌套函数可以相互调用。（函数 <code>B</code> 可以调用 <code>D</code>，而 <code>D</code> 可以调用 <code>B</code>。）</li><li>低级别的嵌套函数可以调用高级别的函数。（函数 <code>C</code> 可以调用 <code>B</code> 或 <code>D</code>，但不能调用 <code>E</code>。）</li></ul> 
<pre><code class="prism language-matlab">function A(x, y)              % Main function
B(x,y)
D(y)

   function B(x,y)            % Nested in A
   C(x)
   D(y)

      function C(x)           % Nested in B
      D(x)
      end
   end

   function D(x)              % Nested in A
   E(x)

      function E(x)           % Nested in D
      disp(x)
      end
   end
end
</code></pre> 
<h5><a id="573__246"></a>5.7.3 私有函数</h5> 
<p>可以将函数存储在名称为 <code>private</code> 的子文件夹中，这样该函数就指定为了私有函数。这样，仅 <code>private</code> 子文件夹<strong>紧邻的上一级文件夹</strong>中的函数和脚本可使用该函数。即使MATLAB强调不要将<code>private</code>文件夹添加到路径中，但即使添加到路径中，非<code>private</code>紧邻的上一级文件夹仍然调用不了私有函数。</p> 
<p>虽然不能从命令行或 <code>private</code> 文件夹父级外部的函数中调用私有函数，但可以访问它的帮助：</p> 
<pre><code class="prism language-matlab">help private/findme
</code></pre> 
<h5><a id="574__256"></a>5.7.4 <strong>函数的调用顺序</strong></h5> 
<ol><li>变量。如果有与函数同名的变量则会隐藏该函数</li><li>当前函数内的嵌套函数</li><li>当前文件内的局部函数</li><li>私有函数</li><li>当前文件夹中的函数</li><li>路径中其他位置的函数</li></ol> 
<p>参考资料：</p> 
<p>[1] <strong>Matlab programming for engineers second edition</strong>, Stephen J.Chapman著，邢军树、郑碧波译</p> 
<p>[2] <strong><a href="https://ww2.mathworks.cn/help/matlab/functions.html?s_tid=CRUX_lftnav" rel="nofollow">MATLAB官方文档</a></strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5accc818130adb7487377980e5deef7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Synchronized锁的升级过程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69fcd883252c3cf90c10eba276b8a59b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网络单位转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>