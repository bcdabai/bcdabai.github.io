<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>谷歌的导航抽屉NavigationView、DrawerLayout的去掉默认的图标颜色和选中颜色 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="谷歌的导航抽屉NavigationView、DrawerLayout的去掉默认的图标颜色和选中颜色" />
<meta property="og:description" content="谷歌的导航抽屉NavigationView、DrawerLayout的去掉默认的图标颜色和选中颜色 谷歌的抽屉导航还是挺好用的,但是总感觉封装过度了,很多东西不能改 能修改的东西也就这些,但是如果要修改更多似乎有点无能为力了
&lt;attr name=&#34;android:background&#34;/&gt; &lt;attr name=&#34;android:fitsSystemWindows&#34;/&gt; &lt;attr name=&#34;android:maxWidth&#34;/&gt; &lt;attr name=&#34;elevation&#34;/&gt; &lt;attr name=&#34;menu&#34; format=&#34;reference&#34;/&gt; &lt;attr name=&#34;itemIconTint&#34; format=&#34;color&#34;/&gt; &lt;attr name=&#34;itemTextColor&#34; format=&#34;color&#34;/&gt; &lt;attr name=&#34;itemBackground&#34; format=&#34;reference&#34;/&gt; &lt;attr name=&#34;itemTextAppearance&#34; format=&#34;reference&#34;/&gt; &lt;attr name=&#34;headerLayout&#34; format=&#34;reference&#34;/&gt; 不能修改图标的选中颜色或者默认颜色,甚至图标都不能正常显示 看了一下源代码:
final ColorStateList itemIconTint; if (a.hasValue(android.support.design.R.styleable.NavigationView_itemIconTint)) { itemIconTint = a.getColorStateList( android.support.design.R.styleable.NavigationView_itemIconTint); } else { itemIconTint = createDefaultColorStateList(android.R.attr.textColorSecondary); } 这里会根据主题和设置的颜色自动改变选中状态的颜色
还有一个问题,那就是使用menu菜单的话自定义程度也是很低的,比如我想要一个菜单包含一个组的名字,我又想把背景设置成黑色,这时候你发现改不了组的名称字体颜色
&lt;item android:id=&#34;@&#43;id/nav_music_source&#34; android:title=&#34;Music Source&#34;&gt; &lt;menu&gt; &lt;item android:id=&#34;@&#43;id/nav_my_favorite&#34; android:checkable=&#34;true&#34; android:icon=&#34;@drawable/icon_drawer_menu_favorite&#34; android:title=&#34;My Favorite&#34;&gt; &lt;/item&gt; &lt;item android:id=&#34;@&#43;id/nav_local_music&#34; android:checkable=&#34;true&#34; android:icon=&#34;@drawable/ic_drawer_collect&#34; android:title=&#34;Local Music&#34;&gt; &lt;/item&gt; &lt;item android:id=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8ba56954605a3554c8279bf85fe1ec70/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-03T10:59:48+08:00" />
<meta property="article:modified_time" content="2015-12-03T10:59:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">谷歌的导航抽屉NavigationView、DrawerLayout的去掉默认的图标颜色和选中颜色</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5 id="谷歌的导航抽屉navigationviewdrawerlayout的去掉默认的图标颜色和选中颜色">谷歌的导航抽屉NavigationView、DrawerLayout的去掉默认的图标颜色和选中颜色</h5> 
<p>谷歌的抽屉导航还是挺好用的,但是总感觉封装过度了,很多东西不能改 <br> 能修改的东西也就这些,但是如果要修改更多似乎有点无能为力了</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"android:background"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"android:fitsSystemWindows"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"android:maxWidth"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"elevation"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"menu"</span> <span class="hljs-attribute">format</span>=<span class="hljs-value">"reference"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"itemIconTint"</span> <span class="hljs-attribute">format</span>=<span class="hljs-value">"color"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"itemTextColor"</span> <span class="hljs-attribute">format</span>=<span class="hljs-value">"color"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"itemBackground"</span> <span class="hljs-attribute">format</span>=<span class="hljs-value">"reference"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"itemTextAppearance"</span> <span class="hljs-attribute">format</span>=<span class="hljs-value">"reference"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">attr</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"headerLayout"</span> <span class="hljs-attribute">format</span>=<span class="hljs-value">"reference"</span>/&gt;</span></code></pre> 
<p>不能修改图标的选中颜色或者默认颜色,甚至图标都不能正常显示 <br> 看了一下源代码:</p> 
<pre class="prettyprint"><code class=" hljs avrasm">
        final ColorStateList itemIconTint<span class="hljs-comment">;</span>
        if (a<span class="hljs-preprocessor">.hasValue</span>(android<span class="hljs-preprocessor">.support</span><span class="hljs-preprocessor">.design</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.styleable</span><span class="hljs-preprocessor">.NavigationView</span>_itemIconTint)) {
            itemIconTint = a<span class="hljs-preprocessor">.getColorStateList</span>(
                    android<span class="hljs-preprocessor">.support</span><span class="hljs-preprocessor">.design</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.styleable</span><span class="hljs-preprocessor">.NavigationView</span>_itemIconTint)<span class="hljs-comment">;</span>
        } else {
            itemIconTint = createDefaultColorStateList(android<span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.attr</span><span class="hljs-preprocessor">.textColorSecondary</span>)<span class="hljs-comment">;</span>
        }
</code></pre> 
<p>这里会根据主题和设置的颜色自动改变选中状态的颜色</p> 
<hr> 
<p>还有一个问题,那就是使用menu菜单的话自定义程度也是很低的,比如我想要一个菜单包含一个组的名字,我又想把背景设置成黑色,这时候你发现改不了组的名称字体颜色</p> 
<pre class="prettyprint"><code class=" hljs applescript">  &lt;<span class="hljs-property">item</span>
        android:<span class="hljs-property">id</span>=<span class="hljs-string">"@+id/nav_music_source"</span>
        android:title=<span class="hljs-string">"Music Source"</span>&gt;
        &lt;menu&gt;
            &lt;<span class="hljs-property">item</span>
                android:<span class="hljs-property">id</span>=<span class="hljs-string">"@+id/nav_my_favorite"</span>
                android:checkable=<span class="hljs-string">"true"</span>
                android:icon=<span class="hljs-string">"@drawable/icon_drawer_menu_favorite"</span>
                android:title=<span class="hljs-string">"My Favorite"</span>&gt;
            &lt;/<span class="hljs-property">item</span>&gt;
            &lt;<span class="hljs-property">item</span>
                android:<span class="hljs-property">id</span>=<span class="hljs-string">"@+id/nav_local_music"</span>
                android:checkable=<span class="hljs-string">"true"</span>
                android:icon=<span class="hljs-string">"@drawable/ic_drawer_collect"</span>
                android:title=<span class="hljs-string">"Local Music"</span>&gt;
            &lt;/<span class="hljs-property">item</span>&gt;
            &lt;<span class="hljs-property">item</span>
                android:<span class="hljs-property">id</span>=<span class="hljs-string">"@+id/nav_xiami_music"</span>
                android:checkable=<span class="hljs-string">"true"</span>
                android:icon=<span class="hljs-string">"@drawable/icon_drawer_menu_xiami"</span>
                android:title=<span class="hljs-string">"Xiami FM"</span>/&gt;
            &lt;<span class="hljs-property">item</span>
                android:<span class="hljs-property">id</span>=<span class="hljs-string">"@+id/nav_ximalaya_fm"</span>
                android:checkable=<span class="hljs-string">"true"</span>
                android:icon=<span class="hljs-string">"@drawable/icon_drawer_menu_xmly"</span>
                android:title=<span class="hljs-string">"Ximalaya_FM"</span>/&gt;
            &lt;<span class="hljs-property">item</span>
                android:<span class="hljs-property">id</span>=<span class="hljs-string">"@+id/nav_spotify"</span>
                android:checkable=<span class="hljs-string">"true"</span>
                android:icon=<span class="hljs-string">"@mipmap/ic_launcher"</span>
                android:title=<span class="hljs-string">"Spotify"</span>/&gt;
        &lt;/menu&gt;
    &lt;/<span class="hljs-property">item</span>&gt;</code></pre> 
<p>这个是菜单,如果主题设置成黑色背景,那么你会发现Music Source显示不了,因为都是黑色的.</p> 
<hr> 
<p>第一个问题:要是我想修改默认的选中颜色或者我的图标怎样才能显示呢?怎么办呢?我的方法是重写NavigetionView,</p> 
<pre class="prettyprint"><code class=" hljs avrasm">if (a<span class="hljs-preprocessor">.hasValue</span>(android<span class="hljs-preprocessor">.support</span><span class="hljs-preprocessor">.design</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.styleable</span><span class="hljs-preprocessor">.NavigationView</span>_itemIconTint)) {
            itemIconTint = a<span class="hljs-preprocessor">.getColorStateList</span>(
                    android<span class="hljs-preprocessor">.support</span><span class="hljs-preprocessor">.design</span><span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.styleable</span><span class="hljs-preprocessor">.NavigationView</span>_itemIconTint)<span class="hljs-comment">;</span>
        } else {
            itemIconTint = createDefaultColorStateList(android<span class="hljs-preprocessor">.R</span><span class="hljs-preprocessor">.attr</span><span class="hljs-preprocessor">.textColorSecondary</span>)<span class="hljs-comment">;</span>
        }</code></pre> 
<p>把上面的代码和 mPresenter.setItemIconTintList(itemIconTint);注释掉 <br> 这样就能显示自己的图标了,想要让选中状态的图标和默认图标不同,可以使用select选择器,里面的属性用android:state_activated</p> 
<hr> 
<p>第二个问题,那就是自定义菜单组,我的方法是用recycleview,当然Listview或者其他布局也可以 <br> 直接上代码吧</p> 
<hr> 
<p><img src="https://images2.imgbox.com/f0/d0/nyT1BX0H_o.png" alt="这里写图片描述" title=""></p> 
<hr> 
<p><a href="http://pan.baidu.com/s/1qWMRW1A" rel="nofollow"><strong>Demo下载</strong></a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6818ffe61b398927c522edbb405a08e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32F407的ADC单次转换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b78169a3230f545016afa86442dab126/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">android实现手机端控制电脑PPT播放的APP（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>