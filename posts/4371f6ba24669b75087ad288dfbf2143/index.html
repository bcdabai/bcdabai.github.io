<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€C&#43;&#43;ã€‘-8.2- stringã€”stringç±»æ¨¡æ‹Ÿå®ç°ã€• - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ã€C&#43;&#43;ã€‘-8.2- stringã€”stringç±»æ¨¡æ‹Ÿå®ç°ã€•" />
<meta property="og:description" content="æ–‡ç« ç›®å½• //æ¨¡æ‹Ÿå®ç°stringç±»ï¼Œå¹¶å®Œæˆæµ‹è¯•â€¢ stringç±»çš„åŸºæœ¬ç»“æ„â€¢ Destructorâ€¢ Constructã€”æ„é€ å‡½æ•°ã€•â€¹ æ— å‚æ„é€  â€ºâ€¹ å•å‚æ•°æ„é€  â€ºâ€¹ å…¨ç¼ºçœå‚æ•°æ„é€  â€º ã€”æ‹·è´æ„é€ ã€• â€¢ operator= èµ‹å€¼é‡è½½â€¢ Element accessï¼ˆoperator[]ï¼‰è¡¥å……ï¼šconst å˜é‡çš„åœºæ™¯â€¢ Iteratorâ€¢ Relational Operatorsï¼ˆæ¯”è¾ƒå¤§å°ï¼‰â€¢ Capacityã€”sizeã€•&amp;ã€”capacityã€•&amp;ã€”emptyã€•ã€”reserveã€•ã€”resizeã€• â€¢ Modifyã€”push_backã€•&amp;ã€”appendã€•ã€”&#43;=ã€•ã€”swapã€•ã€”clearã€•&amp; ã€”c_strã€• â€¢ ã€Œinsertã€åœ¨ pos ä½ç½®æ’å…¥å­—ç¬¦æˆ–å­—ç¬¦ä¸²â€¢ ã€Œeraseã€ä» pos ä½ç½®åˆ é™¤ len ä¸ªå­—ç¬¦æ³¨ï¼šnposçš„å£°æ˜å’Œå®šä¹‰â€¢ ã€Œfindã€â€¢ ã€Œæµæ’å…¥&lt;&lt;ã€æµæå–&gt;&gt;ã€â€¹ æµæ’å…¥ â€ºâ€¹ æµæå– â€º //æ¨¡æ‹Ÿå®ç°stringç±»ï¼Œå¹¶å®Œæˆæµ‹è¯• å¤´æ–‡ä»¶å£°æ˜ï¼š
//anolog_string.h #pragma once #include &lt;iostream&gt; namespace RoundBottle//ä¸åº“é‡Œé¢çš„stringç±»åšåŒºåˆ† { class string { public: typedef char* iterator; typedef const char* const_iterator; //å…¨ç¼ºçœæ„é€  string(const char* str = &#34;&#34;); //æ‹·è´æ„é€  string(const string&amp; s); //èµ‹å€¼é‡è½½æ˜¯å…³äºä¸¤ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ string&amp; operator=(const string&amp; s); ~string(); / // access char&amp; operator[](size_t index); const char&amp; operator[](size_t index)const; // // iterator iterator begin(); iterator end(); const_iterator begin()const; const_iterator end()const; / // modify void push_back(char c); string&amp; operator&#43;=(char c); void append(const char* str); string&amp; operator&#43;=(const char* str); void clear(); void swap(string&amp; s); const char* c_str()const; / // capacity size_t size()const; size_t capacity()const; bool empty()const; void resize(size_t n, char c = &#39;\0&#39;); void reserve(size_t n); / //relational operators bool operator&lt;(const string&amp; s); bool operator&lt;=(const string&amp; s); bool operator&gt;(const string&amp; s); bool operator&gt;=(const string&amp; s); bool operator==(const string&amp; s); bool operator!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4371f6ba24669b75087ad288dfbf2143/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-21T17:38:17+08:00" />
<meta property="article:modified_time" content="2023-06-21T17:38:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€C&#43;&#43;ã€‘-8.2- stringã€”stringç±»æ¨¡æ‹Ÿå®ç°ã€•</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><a href="#string_2" rel="nofollow">//æ¨¡æ‹Ÿå®ç°stringç±»ï¼Œå¹¶å®Œæˆæµ‹è¯•</a></li><li><a href="#_string_121" rel="nofollow">â€¢ stringç±»çš„åŸºæœ¬ç»“æ„</a></li><li><a href="#_Destructor_131" rel="nofollow">â€¢ Destructor</a></li><li><a href="#_Construct_142" rel="nofollow">â€¢ Construct</a></li><li><ul><li><a href="#_143" rel="nofollow">ã€”æ„é€ å‡½æ•°ã€•</a></li><li><ul><li><a href="#___144" rel="nofollow">â€¹ æ— å‚æ„é€  â€º</a></li><li><a href="#___185" rel="nofollow">â€¹ å•å‚æ•°æ„é€  â€º</a></li><li><a href="#___211" rel="nofollow">â€¹ å…¨ç¼ºçœå‚æ•°æ„é€  â€º</a></li></ul> 
   </li><li><a href="#_227" rel="nofollow">ã€”æ‹·è´æ„é€ ã€•</a></li></ul> 
  </li><li><a href="#_operator__240" rel="nofollow">â€¢ operator= èµ‹å€¼é‡è½½</a></li><li><a href="#_Element_accessoperator_272" rel="nofollow">â€¢ Element accessï¼ˆoperator[]ï¼‰</a></li><li><a href="#const__286" rel="nofollow">è¡¥å……ï¼šconst å˜é‡çš„åœºæ™¯</a></li><li><a href="#_Iterator_309" rel="nofollow">â€¢ Iterator</a></li><li><a href="#_Relational_Operators_364" rel="nofollow">â€¢ Relational Operatorsï¼ˆæ¯”è¾ƒå¤§å°ï¼‰</a></li><li><a href="#_Capacity_393" rel="nofollow">â€¢ Capacity</a></li><li><ul><li><a href="#sizecapacityempty_394" rel="nofollow">ã€”sizeã€•&amp;ã€”capacityã€•&amp;ã€”emptyã€•</a></li><li><a href="#reserve_410" rel="nofollow">ã€”reserveã€•</a></li><li><a href="#resize_433" rel="nofollow">ã€”resizeã€•</a></li></ul> 
  </li><li><a href="#_Modify_463" rel="nofollow">â€¢ Modify</a></li><li><ul><li><a href="#push_backappend_464" rel="nofollow">ã€”push_backã€•&amp;ã€”appendã€•</a></li><li><a href="#_497" rel="nofollow">ã€”+=ã€•</a></li><li><a href="#swap_515" rel="nofollow">ã€”swapã€•</a></li><li><a href="#clear_c_str_538" rel="nofollow">ã€”clearã€•&amp; ã€”c_strã€•</a></li></ul> 
  </li><li><a href="#_insert_pos__553" rel="nofollow">â€¢ ã€Œinsertã€åœ¨ pos ä½ç½®æ’å…¥å­—ç¬¦æˆ–å­—ç¬¦ä¸²</a></li><li><a href="#_erase_pos__len__610" rel="nofollow">â€¢ ã€Œeraseã€ä» pos ä½ç½®åˆ é™¤ len ä¸ªå­—ç¬¦</a></li><li><a href="#npos_637" rel="nofollow">æ³¨ï¼šnposçš„å£°æ˜å’Œå®šä¹‰</a></li><li><a href="#_find_662" rel="nofollow">â€¢ ã€Œfindã€</a></li><li><a href="#__695" rel="nofollow">â€¢ ã€Œæµæ’å…¥&lt;&lt;ã€æµæå–&gt;&gt;ã€</a></li><li><ul><li><a href="#___697" rel="nofollow">â€¹ æµæ’å…¥ â€º</a></li><li><a href="#___710" rel="nofollow">â€¹ æµæå– â€º</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="string_2"></a>//æ¨¡æ‹Ÿå®ç°stringç±»ï¼Œå¹¶å®Œæˆæµ‹è¯•</h2> 
<p>å¤´æ–‡ä»¶å£°æ˜ï¼š</p> 
<pre><code class="prism language-cpp"><span class="token comment">//anolog_string.h</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">namespace</span> RoundBottle<span class="token comment">//ä¸åº“é‡Œé¢çš„stringç±»åšåŒºåˆ†</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">class</span> <span class="token class-name">string</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">typedef</span> <span class="token keyword">char</span><span class="token operator">*</span> iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> const_iterator<span class="token punctuation">;</span>

		<span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//æ‹·è´æ„é€ </span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//èµ‹å€¼é‡è½½æ˜¯å…³äºä¸¤ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">/</span>

		<span class="token comment">// access</span>
		<span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t index<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t index<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>

		<span class="token comment">//</span>

		<span class="token comment">// iterator</span>
		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
		const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>

		<span class="token comment">/</span>

		<span class="token comment">// modify</span>
		<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>

		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>

		<span class="token comment">/</span>

		<span class="token comment">// capacity</span>
		size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
		size_t <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">/</span>

		<span class="token comment">//relational operators</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// è¿”å›cåœ¨stringä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span>
		size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

		<span class="token comment">// è¿”å›å­ä¸²såœ¨stringä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span>
		size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

		<span class="token comment">// åœ¨posä½ç½®ä¸Šæ’å…¥å­—ç¬¦c/å­—ç¬¦ä¸²strï¼Œå¹¶è¿”å›è¯¥å­—ç¬¦çš„ä½ç½®</span>
		string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// åˆ é™¤posä½ç½®ä¸Šçš„å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span>
		string<span class="token operator">&amp;</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
		size_t _capacity<span class="token punctuation">;</span>
		size_t _size<span class="token punctuation">;</span>
		<span class="token keyword">static</span> size_t npos<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	size_t string<span class="token double-colon punctuation">::</span>npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>ostream<span class="token operator">&amp;</span> _cout<span class="token punctuation">,</span> <span class="token keyword">const</span> RoundBottle<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> _cin<span class="token punctuation">,</span> RoundBottle<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//æµ‹è¯•</span>
	<span class="token keyword">void</span> <span class="token function">string_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//test.cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"analog_string.h"</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">try</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token class-name">RoundBottle</span><span class="token double-colon punctuation">::</span><span class="token function">string_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_string_121"></a>â€¢ stringç±»çš„åŸºæœ¬ç»“æ„</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
	size_t _capacity<span class="token punctuation">;</span>
	size_t _size<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5d/39/eAuuU1Py_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="_Destructor_131"></a>â€¢ Destructor</h2> 
<pre><code class="prism language-cpp"><span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span>_str<span class="token punctuation">;</span>
	_str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
	_size <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_Construct_142"></a>â€¢ Construct</h2> 
<h3><a id="_143"></a>ã€”æ„é€ å‡½æ•°ã€•</h3> 
<h4><a id="___144"></a>â€¹ æ— å‚æ„é€  â€º</h4> 
<ul><li><strong>æ–¹å¼ä¸€</strong>ï¼š<code>_str ç½®ç©ºæŒ‡é’ˆ</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>//cout è‡ªåŠ¨è¯†åˆ«ç±»å‹ï¼Œ<em>å¯¹äºæŒ‡é’ˆï¼Œä¼šè¿›è¡Œè§£å¼•ç”¨ï¼</em><br> <br> <code>cout &lt;&lt; s.c_str() &lt;&lt;endl;</code> ğŸ‘‰ s.c_str()æˆå‘˜å‡½æ•° ä¼šè¿”å›å¯¹è±¡ s ä¸­çš„æˆå‘˜å˜é‡ _strï¼Œè‹¥ _str==nullptr åˆ™ <strong>cout ä¼šå¯¹ç©ºæŒ‡é’ˆè¿›è¡Œè§£å¼•ç”¨ï¼</strong></p> 
<ul><li><strong>æ–¹å¼äºŒ</strong>ï¼šç»™_stræ‰€æŒ‡å‘çš„ç©ºé—´å¼€æ–°ç©ºé—´â€”â€”<code>new char</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>//ææ„å‡½æ•°æ‰§è¡Œçš„è¯­å¥æ˜¯ï¼š<strong><mark>delete []</mark> _str;</strong> ä¸ new ä¸åŒ¹é…ï¼ˆå…³äºnewå’Œdeleteè¯¦è§æ–‡ç« <a href="http://t.csdn.cn/oimr5" rel="nofollow">C++ -5- å†…å­˜ç®¡ç†</a>ï¼‰</p> 
<ul><li><strong>æ–¹å¼ä¸‰</strong>ï¼š<code>_str = new char [1]</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">char</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_str<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h4><a id="___185"></a>â€¹ å•å‚æ•°æ„é€  â€º</h4> 
<ul><li>æ–¹å¼ä¸€ï¼šç›´æ¥èµ‹å€¼</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">_str</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token comment">//æƒé™æ”¾å¤§</span>
	<span class="token punctuation">,</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>å°† str ä¸­çš„åœ°å€èµ‹å€¼ç»™ _str å¾ˆæ˜æ˜¾æ˜¯æƒé™æ”¾å¤§ï¼Œå¦‚ä¸‹å›¾ï¼š<br> <img src="https://images2.imgbox.com/b5/8a/AxT8n6cz_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ul><li>æ–¹å¼äºŒï¼š</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_capacity <span class="token operator">=</span> _size<span class="token punctuation">;</span>
	_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>å…³äº capacityï¼š 
  <ul><li>èƒ½å­˜å¤šå°‘ä¸ª<strong>æœ‰æ•ˆæ•°æ®</strong>ï¼ˆä¸åŒ…æ‹¬â€™\0â€™ï¼‰â†’ æ‰€ä»¥å¼€ç©ºé—´è¦å¤šå¼€ä¸€ä¸ªç•™ç»™â€™\0â€™</li><li>å°½é‡ä¸è¦å†åˆå§‹åŒ–åˆ—è¡¨é‡Œé¢ç”¨ size æ¥åˆå§‹åŒ– capacityï¼Œå› ä¸ºåˆå§‹åŒ–çš„é¡ºåºæ˜¯å˜é‡å£°æ˜çš„é¡ºåºï¼Œå˜é‡å£°æ˜é¡ºåºæ›´æ”¹ä¼šå½±å“åˆå§‹åŒ–çš„ç»“æœã€‚</li></ul> </li></ul> 
<h4><a id="___211"></a>â€¹ å…¨ç¼ºçœå‚æ•°æ„é€  â€º</h4> 
<p>æ— å‚æ„é€ å’Œå•å‚æ•°æ„é€ å¯ä»¥åˆæˆä¸€ä¸ªå…¨ç¼ºçœå‚æ•°æ„é€ </p> 
<pre><code class="prism language-cpp"><span class="token comment">//å…¨ç¼ºçœæ„é€ </span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_capacity <span class="token operator">=</span> _size<span class="token punctuation">;</span>
	_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>""</code> å¸¸é‡å­—ç¬¦ä¸²é»˜è®¤ä»¥ â€˜\0â€™ ç»“æŸ ï¼ˆå­—ç¬¦ä¸²ä¸ºä¸ä¸ºç©ºéƒ½æ˜¯å¦‚æ­¤ï¼‰</li><li><code>const char* str = '\0'</code> ä¸å¯ä»¥ï¼ â€˜\0â€™ åªæ˜¯ä¸€ä¸ª char ç±»å‹çš„å­—ç¬¦ï¼Œå°† char ç±»å‹çš„æ•°æ®èµ‹å€¼ç»™ const char* ç±»å‹ä¸åŒ¹é…ï¼Œä¼šå‘ç”Ÿ<strong>ç±»å‹è½¬æ¢ï¼Œchar ç±»å‹è½¬åŒ–ä¸º int ç±»å‹</strong>ï¼Œç±»å‹ä»ç„¶ä¸åŒ¹é…ï¼Œåˆ™ str ä¼šè¢«èµ‹å€¼ä¸º<strong>ç©ºæŒ‡é’ˆ</strong>ã€‚</li><li><code>â€œ\0â€</code>æ‰æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²</li><li><code>const char* str = ""</code> == <code>const char* str = "\0"</code></li></ul> 
<h3><a id="_227"></a>ã€”æ‹·è´æ„é€ ã€•</h3> 
<p>å¼€æ–°ç©ºé—´ + æ‹·è´æ•°æ®</p> 
<pre><code class="prism language-cpp"><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	_size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
	_capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
	<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_operator__240"></a>â€¢ operator= èµ‹å€¼é‡è½½</h2> 
<ul><li><strong><code>delete</code> åŸç©ºé—´</strong> 
  <ul><li>è‡ªå·±èµ‹å€¼ç»™è‡ªå·±ï¼ˆ s = s ï¼‰ï¼Ÿ<strong>è‡ªå·±ç»™è‡ªå·± delete ä¹‹åå°±ä»€ä¹ˆéƒ½æ²¡äº†</strong>~ï¼Œæ‰€ä»¥å¦‚æœæ˜¯è‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼Œè¿™é‡Œéœ€è¦åˆ¤æ–­ä¸€ä¸‹ï¼Œä»€ä¹ˆä¹Ÿä¸æ‰§è¡Œå°±è¡Œäº†ã€‚</li></ul> </li><li><strong><code>new</code> æ–°ç©ºé—´</strong> 
  <ul><li>ä¸ºäº†é˜²æ­¢å¼€ç©ºé—´å¤±è´¥ï¼Œè¿™ä¸ªå¯ä»¥å…ˆåˆ›å»ºä¸´æ—¶å˜é‡</li></ul> </li><li><code>strcpy</code> å†…å®¹åˆ°æ–°ç©ºé—´</li><li>ä¿®æ”¹ <code>size</code> å’Œ <code>capacity</code></li></ul> 
<p>â—â—èµ‹å€¼é‡è½½æ˜¯å…³äºä¸¤ä¸ª<strong>å·²ç»å­˜åœ¨</strong>çš„å¯¹è±¡</p> 
<pre><code class="prism language-cpp">string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//é˜²æ­¢å¼€ç©ºé—´å¤±è´¥</span>
		<span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//</span>

		<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span>_str<span class="token punctuation">;</span><span class="token comment">//é”€æ¯åŸç©ºé—´</span>
		_str <span class="token operator">=</span> tmp<span class="token punctuation">;</span><span class="token comment">//æ‹·è´æ•°æ®</span>
		_size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_Element_accessoperator_272"></a>â€¢ Element accessï¼ˆoperator[]ï¼‰</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t index<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>index <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> _str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t index<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>index <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> _str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="const__286"></a>è¡¥å……ï¼šconst å˜é‡çš„åœºæ™¯</h2> 
<blockquote> 
 <p><strong>const å˜é‡ä¸å¯ä»¥è°ƒç”¨é const æˆå‘˜å‡½æ•°</strong>ï¼Œä¸ä¿®æ”¹æˆå‘˜å‡½æ•°å˜é‡æ•°æ®çš„å‡½æ•°æœ€å¥½éƒ½åŠ  const<br> ä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼šå‚æ•°ä¸º const string ç±»å‹</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t index<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>index <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> _str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token comment">//size()</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment">//[]æ“ä½œç¬¦é‡è½½</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_Iterator_309"></a>â€¢ Iterator</h2> 
<p>è¿™é‡Œç”¨æŒ‡é’ˆæ¥æ¨¡æ‹Ÿå®ç°è¿­ä»£å™¨ï¼Œä½†åº“ä¸­çš„è¿­ä»£å™¨ä¸ä¸€å®šéƒ½æ˜¯ç”¨æŒ‡é’ˆå®ç°çš„ã€‚<br> <br> å¦å¤–ï¼Œbegin() å’Œ end() éµå¾ª <strong>â€œå·¦é—­å³å¼€â€</strong> çš„åŸåˆ™ã€‚<br> <img src="https://images2.imgbox.com/7f/d2/emXFnaLl_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">char</span><span class="token operator">*</span> iterator<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> const_iterator<span class="token punctuation">;</span>

<span class="token comment">// iterator</span>
iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å®ç°äº†è¿­ä»£å™¨ä¹‹åï¼ŒèŒƒå›´forä¹Ÿå¯ä»¥ç”¨ã€‚</p> 
<p>åº”ç”¨ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">string_test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	string <span class="token function">s</span><span class="token punctuation">(</span><span class="token string">"abcdefghijklm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	string<span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>	
		cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> e <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_Relational_Operators_364"></a>â€¢ Relational Operatorsï¼ˆæ¯”è¾ƒå¤§å°ï¼‰</h2> 
<p>æ¯”è¾ƒASCIIç å€¼çš„å¤§å°ï¼Œå¤ç”¨ <code>strcmp</code></p> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;=</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_Capacity_393"></a>â€¢ Capacity</h2> 
<h3><a id="sizecapacityempty_394"></a>ã€”sizeã€•&amp;ã€”capacityã€•&amp;ã€”emptyã€•</h3> 
<pre><code class="prism language-cpp">size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
size_t <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="reserve_410"></a>ã€”reserveã€•</h3> 
<ul><li>reverse æ˜¯ç®¡ç†å®¹é‡çš„å‡½æ•°</li><li><strong>ä¸ç¼©å®¹</strong>åŸåˆ™ï¼Œå¦‚æœè¦æ›´æ”¹çš„å®¹é‡å¤§å°å°äºåŸå®¹é‡å¤§å°åˆ™ä¸æ‰§è¡Œæ“ä½œ</li><li>å®ç°æ€è·¯ï¼š 
  <ul><li>æŒ‰æŒ‡å®šå®¹é‡å¤§å°<strong>å¼€æ–°ç©ºé—´</strong>ï¼ˆæ°¸è¿œå¤šå¼€ä¸€ä¸ªä½ç½®ç»™â€™\0â€™ï¼‰</li><li><strong>æ‹·è´æ•°æ®</strong>åˆ°æ–°ç©ºé—´</li><li><strong>é‡Šæ”¾</strong>åŸç©ºé—´</li><li>æ–°ç©ºé—´åœ°å€èµ‹å€¼ç»™ _str</li><li>ä¿®æ”¹å®¹é‡å¤§å°</li></ul> </li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span>_str<span class="token punctuation">;</span>
		_str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="resize_433"></a>ã€”resizeã€•</h3> 
<ul><li>resize ï¼šå¼€ç©ºé—´ï¼ˆsize_t nï¼‰ + åˆå§‹åŒ–ï¼ˆchar cï¼‰</li><li><code>if (n &lt;= _size)</code> å®¹é‡ä¸ç¼©ï¼Œåªä¿ç•™å‰ n ä¸ªæ•°æ®</li><li><code>if (n &gt; _capacity)</code> æ‰©å®¹</li><li>ps. size &gt;= capacity</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_str<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
		_size <span class="token operator">=</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">reserve</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">int</span> cout <span class="token operator">=</span> n <span class="token operator">-</span> _size<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cout<span class="token operator">--</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
			<span class="token operator">++</span>_size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_Modify_463"></a>â€¢ Modify</h2> 
<h3><a id="push_backappend_464"></a>ã€”push_backã€•&amp;ã€”appendã€•</h3> 
<p>æ’å…¥æ•°æ®å°±è¦è€ƒè™‘å®¹é‡é—®é¢˜ï¼ŒåŠ¿å¿…è¦è¿›è¡Œæ‰©å®¹ï¼Œç”±äºåŸæœ¬çš„ç©ºé—´å°±æ˜¯ new å‡ºæ¥çš„ï¼Œæ‰©å®¹è‚¯å®šä¸èƒ½ç”¨ realloc ç›´æ¥æ‰©å®¹ï¼Œæ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬é€‰æ‹©æ‰‹åŠ¨æ‰©å®¹ â†’ è°ƒç”¨ reserve å‡½æ•°<br> <img src="https://images2.imgbox.com/fc/aa/7h1HdscH_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ•´ä½“æ€è·¯ï¼š</p> 
<ul><li>æ£€æŸ¥å®¹é‡</li><li>æ’å…¥æ•°æ®</li><li>ä¿®æ”¹ _size</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//æ‰©å®¹</span>
		<span class="token keyword">int</span> new_capacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">7</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>new_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
	<span class="token operator">++</span>_size<span class="token punctuation">;</span>
	_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> len <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	_size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="_497"></a>ã€”+=ã€•</h3> 
<p>å¤ç”¨ push_back å’Œ append</p> 
<pre><code class="prism language-cpp">string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">push_back</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="swap_515"></a>ã€”swapã€•</h3> 
<p>å¯ä»¥å¤ç”¨ std åº“é‡Œçš„ swap å‡½æ•°</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">/*char* ptmp = _str;
	_str = s._str;
	s._str = _str;

	char size = _size;
	_size = s._size;
	s._size = _size;

	char capacity = _capacity;
	_capacity = s._capacity;
	s._capacity = _capacity;*/</span>

	std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="clear_c_str_538"></a>ã€”clearã€•&amp; ã€”c_strã€•</h3> 
<p>clear ï¼šæ¸…ç©ºæ•°æ®</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_insert_pos__553"></a>â€¢ ã€Œinsertã€åœ¨ pos ä½ç½®æ’å…¥å­—ç¬¦æˆ–å­—ç¬¦ä¸²</h2> 
<blockquote> 
 <p>æ’å…¥å­—ç¬¦å°±ç›¸å½“äºæ’å…¥åªæœ‰å•ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¿™é‡Œè¯¦ç»†åˆ†ææ’å…¥å­—ç¬¦ä¸²æ—¶çš„æƒ…å†µï¼Œæ’å…¥å­—ç¬¦çš„æ€è·¯ä¸ä¹‹ç±»ä¼¼ã€‚</p> 
</blockquote> 
<p>åŸºæœ¬æ€è·¯ï¼šâ‘ æ£€æŸ¥å®¹é‡ï¼›â‘¡æŒªåŠ¨æ•°æ®ï¼ˆstrncpyï¼‰ï¼›â‘¢æ’å…¥æ•°æ®ã€‚ï¼ˆæ³¨æ„æ£€æŸ¥ pos ä½ç½®çš„æœ‰æ•ˆæ€§ï¼‰</p> 
<p>å¦‚ä¸‹å›¾ï¼Œåœ¨ pos ä½ç½®æ’å…¥é•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²ï¼šåˆ™æˆ‘ä»¬éœ€è¦æŠŠ <strong>çº¢è‰²åŒºåŸŸ çš„æ•°æ®</strong>å¾€å<strong>æŒªåŠ¨ lenä¸ªå•ä½é•¿åº¦</strong>ï¼Œå†å°†è¦æ’å…¥çš„æ•°æ®ä»åŸ pos ä½ç½®å¾€åä¾æ­¤æ’å…¥ã€‚<br> <img src="https://images2.imgbox.com/85/27/nlEryLfA_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ul><li><strong>å¯ä»¥é€‰æ‹© index ä» size ä½ç½®å¼€å§‹å—ï¼Ÿï¼ŸğŸ‘‰ä¸å¯ä»¥</strong><br> å½“ pos == 0 æ—¶æƒ…å†µå¦‚ä¸‹ï¼š<br> <img src="https://images2.imgbox.com/1d/f7/zJx3DarE_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> â‘ <code>size_t index</code> æ˜¯<strong>æ— ç¬¦å·æ•´å‹ï¼Œ-1å³ä¸ºæ•´å‹çš„æœ€å¤§å€¼</strong>ï¼Œä»¥ index &gt;= pos ä½œä¸ºå¾ªç¯åˆ¤æ–­æ¡ä»¶ï¼Œåœ¨ pos ==0 çš„æƒ…å†µä¸‹å°†è¿›å…¥æ­»å¾ªç¯ï¼›<br> â‘¡è‹¥å£°æ˜ <code>int index</code>ï¼Œä»ä»¥ index &gt;= pos ä½œä¸ºå¾ªç¯åˆ¤æ–­æ¡ä»¶ï¼Œ&gt;=<strong>æ“ä½œç¬¦å·¦å³å˜é‡çš„ç±»å‹ä¸åŒï¼Œä¼šå‘ç”Ÿç±»å‹è½¬æ¢</strong>ï¼Œé€šå¸¸æ˜¯æ¯”è¾ƒèŒƒå›´å°çš„å‘èŒƒå›´å¤§çš„è½¬æ¢ï¼Œå³åœ¨è¯¥æƒ…å†µä¸‹ï¼Œæœ‰ç¬¦å·æ•´å‹ä¸€èˆ¬è½¬åŒ–ä¸ºæ— ç¬¦å·æ•´å‹ã€‚</li></ul> 
<p>ç®€å•è¯´æ˜ä¸€ä¸‹strnpyå‡½æ•°ï¼šstrncpy( dst-copyåˆ°å“ª , scr-ä»å“ªcopy , ä»scr copy å¤šå°‘ä¸ª)</p> 
<pre><code class="prism language-cpp">string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>pos <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span><span class="token comment">//æ‰©å®¹</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> new_capacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">7</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>new_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t index <span class="token operator">=</span> _size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation">)</span><span class="token comment">//æŒªåŠ¨æ•°æ®</span>
	<span class="token punctuation">{<!-- --></span>
		_str<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	_str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
	<span class="token operator">++</span>_size<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>pos <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> len <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span><span class="token comment">//æ‰©å®¹</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> new_capacity <span class="token operator">=</span> _size <span class="token operator">+</span> len<span class="token punctuation">;</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>new_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> _size <span class="token operator">+</span> len<span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> pos <span class="token operator">+</span> len<span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation">)</span><span class="token comment">//æŒªåŠ¨æ•°æ®</span>
	<span class="token punctuation">{<!-- --></span>
		_str<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>index <span class="token operator">-</span> len<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">strncpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
	_size <span class="token operator">+=</span> len<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_erase_pos__len__610"></a>â€¢ ã€Œeraseã€ä» pos ä½ç½®åˆ é™¤ len ä¸ªå­—ç¬¦</h2> 
<ol><li>pos å¾€åè¿˜æœ‰ &gt;= len ä¸ªé•¿åº¦çš„å­—ç¬¦ï¼šæŒªåŠ¨è¦†ç›–æ•°æ®ï¼ˆmemmove/strcpyï¼‰</li><li>pos å¾€åä¸è¶³ len ä¸ªé•¿åº¦çš„å­—ç¬¦ï¼šä» pos å¾€åå…¨éƒ¨åˆ é™¤ï¼ˆåŒ…æ‹¬ pos ä½ç½®çš„æ•°æ®ï¼‰</li></ol> 
<p>æ³¨æ„ï¼š<code>pos + len &gt;= _size || len == npos</code> len == nposå¿…é¡»å•ç‹¬åˆ¤æ–­ï¼Œnpos å·²ç»æ˜¯æ•´å‹çš„æœ€å¤§å€¼ã€‚</p> 
<pre><code class="prism language-cpp">string<span class="token operator">&amp;</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">+</span> len <span class="token operator">&gt;=</span> _size <span class="token operator">||</span> len <span class="token operator">==</span> npos<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_size <span class="token operator">=</span> pos<span class="token punctuation">;</span>
		_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t index <span class="token operator">=</span> pos <span class="token operator">+</span> len<span class="token punctuation">;</span> index <span class="token operator">&lt;=</span> _size<span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_str<span class="token punctuation">[</span>index <span class="token operator">-</span> len<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//strcpy(_str+pos,_str+pos+len)</span>
		_size <span class="token operator">-=</span> len<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="npos_637"></a>æ³¨ï¼šnposçš„å£°æ˜å’Œå®šä¹‰</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">string</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
		size_t _capacity<span class="token punctuation">;</span>
		size_t _size<span class="token punctuation">;</span>
		<span class="token keyword">static</span> size_t npos<span class="token punctuation">;</span>
		<span class="token comment">//static size_t npos = -1;error</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
size_t string<span class="token double-colon punctuation">::</span>npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>é™æ€æˆå‘˜å˜é‡ï¼šç±»å†…å£°æ˜ï¼Œç±»å¤–å®šä¹‰ã€‚</strong><br> ï¼ˆps. C++ä¸­åŠ  const çš„é™æ€æˆå‘˜å˜é‡å¯ä»¥ç»™ç¼ºçœå€¼ï¼Œä½†æ˜¯åªé’ˆå¯¹æ•´å‹å˜é‡ï¼‰ï¼ˆæœ€å¥½ä¸è¦è¿™ä¹ˆç”¨ï¼‰</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">string</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">const</span> <span class="token keyword">static</span> size_t npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h2><a id="_find_662"></a>â€¢ ã€Œfindã€</h2> 
<ul><li>æ‰¾å­—ç¬¦ï¼šæ‰¾åˆ°å°±è¿”å›è¯¥å­—ç¬¦ä¸‹æ ‡ï¼Œæ²¡æœ‰æ‰¾åˆ°è¿”å› npos</li><li>æ‰¾å­—ä¸²ï¼šstrstrå‡½æ•°æš´åŠ›åŒ¹é… 
  <ul><li>ä¸º nullptr å³æ²¡æ‰¾åˆ°</li><li>æ‰¾åˆ°è¿”å›å­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„åœ°å€ ğŸ‘‰ <strong>åœ°å€ - åœ°å€ = ä¸‹æ ‡</strong></li></ul> </li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//æ‰¾å­—ç¬¦c</span>
size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> npos<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ‰¾å­—ä¸²s</span>
size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> npos<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>p <span class="token operator">-</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="__695"></a>â€¢ ã€Œæµæ’å…¥&lt;&lt;ã€æµæå–&gt;&gt;ã€</h2> 
<p>è‚¯å®šä¸èƒ½å†™æˆæˆå‘˜å‡½æ•°ï¼Œå¯ä»¥ç”¨å‹å…ƒå‡½æ•°ï¼Œä½†ä¹Ÿä¸ä¸€å®šè¦å†™æˆå‹å…ƒå‡½æ•°ã€‚</p> 
<h3><a id="___697"></a>â€¹ æµæ’å…¥ â€º</h3> 
<ul><li>æµæ’å…¥é‡è½½è¦<strong>æ ¹æ® size æ‰“å°</strong>ï¼Œå³ä½¿å­—ç¬¦ä¸²é—´å¤¹æ‚ç€ â€˜\0â€™</li><li>ä¸èƒ½ç›´æ¥è®¿é—®æˆå‘˜å˜é‡ï¼Œå¯ä»¥<strong>é€šè¿‡æˆå‘˜å‡½æ•°é—´æ¥è®¿é—®</strong>ã€‚ï¼ˆ iterator / èŒƒå›´for / [ä¸‹æ ‡] ï¼‰</li></ul> 
<pre><code class="prism language-cpp">std<span class="token double-colon punctuation">::</span>ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>ostream<span class="token operator">&amp;</span> _cout<span class="token punctuation">,</span> <span class="token keyword">const</span> RoundBottle<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> _cout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="___710"></a>â€¹ æµæå– â€º</h3> 
<p>cin å’Œ scanf å¯¹äºç©ºæ ¼å’Œæ¢è¡Œä¸è¯†åˆ« ğŸ‘‰ é‡‡ç”¨ <strong>istream çš„æˆå‘˜å‡½æ•°</strong> <code>get() </code></p> 
<p>ä¼˜åŒ–ï¼šä¸æ–­è¾“å…¥å­—ç¬¦ä¼šå¯¼è‡´é¢‘ç¹çš„æ‰©å®¹ï¼Œè¿™é‡Œå¯ä»¥ç”¨ä¸€ä¸ªä¸´æ—¶æ•°ç»„å‚¨å­˜è¾“å…¥å­—ç¬¦ï¼Œä¸´æ—¶æ•°ç»„æ¯æ»¡ä¸€æ¬¡å°±è¿½åŠ åˆ° string s ä¸­ï¼ŒçŸ¥é“è¾“å…¥ç»“æŸåï¼Œå°†ä¸´æ—¶æ•°ç»„é‡Œå‰©ä¸‹çš„å­—ç¬¦å†è¿½åŠ åˆ° string s ä¸­ã€‚</p> 
<pre><code class="prism language-cpp">std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> _cin<span class="token punctuation">,</span> RoundBottle<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> tmp<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> c <span class="token operator">=</span> _cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>c <span class="token operator">!=</span> <span class="token char">'\0'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tmp<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
		<span class="token operator">++</span>index<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">127</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			tmp<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
			s <span class="token operator">+=</span> tmp<span class="token punctuation">;</span>
			index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		c <span class="token operator">=</span> _cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tmp<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
		s <span class="token operator">+=</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> _cin<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p>END</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f3c077b779a01174448319222e96e7a6/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">CC2530åŸºç¡€å®éªŒï¼š(8)ä¸²å£é€šè®¯-å‘é€å­—ç¬¦ä¸²æ§åˆ¶LED</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f34f26133f3774e8949198ecf0cc9c58/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ã€Dockerã€‘è¿›å…¥dockerä¸‹çš„mysql</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>