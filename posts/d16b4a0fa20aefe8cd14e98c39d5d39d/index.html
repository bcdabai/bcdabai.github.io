<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>javax.script详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="javax.script详解" />
<meta property="og:description" content="接口 Bindings A mapping of key/value pairs, all of whose keys are Strings. Compilable The optional interface implemented by ScriptEngines whose methods compile scripts to a form that can be executed repeatedly without recompilation. Invocable The optional interface implemented by ScriptEngines whose methods allow the invocation of procedures in scripts that have previously been executed. ScriptContext The interface whose implementing classes are used to connect Script Engines with objects, such as scoped Bindings, in hosting applications." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d16b4a0fa20aefe8cd14e98c39d5d39d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-11T22:52:03+08:00" />
<meta property="article:modified_time" content="2017-12-11T22:52:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">javax.script详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="2841-1512917507996" style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-size:28px; font-family:SimSun,STSong"><strong>接口</strong></span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <a target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/script/Bindings.html" rel="nofollow noopener noreferrer"><span style="font-family:SimSun,STSong; color:rgb(71,71,71)">Bindings</span></a> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(71,71,71)">A mapping of key/value pairs, all of whose keys are Strings.</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <a target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/script/Compilable.html" rel="nofollow noopener noreferrer"><span style="font-family:SimSun,STSong; color:rgb(71,71,71)">Compilable</span></a> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(71,71,71)">The optional interface implemented by ScriptEngines whose methods compile scripts to a form that can be executed repeatedly without recompilation.</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <a target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/script/Invocable.html" rel="nofollow noopener noreferrer"><span style="font-family:SimSun,STSong; color:rgb(71,71,71)">Invocable</span></a> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(71,71,71)">The optional interface implemented by ScriptEngines whose methods allow the invocation of procedures in scripts that have previously been executed.</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <a target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/script/ScriptContext.html" rel="nofollow noopener noreferrer"><span style="font-family:SimSun,STSong; color:rgb(71,71,71)">ScriptContext</span></a> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(71,71,71)">The interface whose implementing classes are used to connect Script Engines with objects, such as scoped Bindings, in hosting applications.</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <a target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/script/ScriptEngine.html" rel="nofollow noopener noreferrer"><span style="font-family:SimSun,STSong; color:rgb(71,71,71)">ScriptEngine</span></a> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(71,71,71)">ScriptEngine is the fundamental interface whose methods must be fully functional in every implementation of this specification.</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <a target="_blank" href="https://docs.oracle.com/javase/8/docs/api/javax/script/ScriptEngineFactory.html" rel="nofollow noopener noreferrer"><span style="font-family:SimSun,STSong; color:rgb(71,71,71)">ScriptEngineFactory</span></a> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(71,71,71)">ScriptEngineFactory is used to describe and instantiate ScriptEngines.</span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong; color:rgb(51,51,51)">ScriptEngineManager是ScriptEngine的工厂，实例化该工厂的时候会加载可用的所有脚本引擎。从工厂中创建ScriptEngine可以使用getEngineByName、getEngineByExtension或 getEngineByMimeType来得到，只要参数名字能对上。执行脚本调用eval方法即可（效果等同于javascript中的eval）。</span> 
</div> 
<div id="3259-1512917866857" style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-size:28px; font-family:SimSun,STSong"><strong>使用Java Scripting API的步骤</strong></span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong">创建一个 ScriptEngineManager 对象.</span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong">从管理器对象中获取 ScriptEngine 对象</span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong">使用脚本引擎的 eval() 方法来执行脚本</span> 
</div> 
<div id="0086-1512918005536" style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-size:28px; font-family:SimSun,STSong"><strong>作用域</strong></span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong">单一的作用域是 javax.script.Bindings 接口的实例。这个接口继承自 java.util.Map&lt;String,Object&gt; 接口。一个作用域相当于是成对的名称和值的列表，其中名称不能为空。javax.script.ScriptContext 接口通过为每个作用域关联一个 Bindings 对象来实现对多个作用域的支持。默认情况下，每个脚本应用有自己独立的上下文。默认的脚本上下文至少有一个作用域，这是通过静态属性 ENGINE_SCOPE 来定义的。脚本上下文可以通过 getScopes() 方法来实现对不同作用域的支持。</span> 
</div> 
<div id="6752-1512918878272" style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-size:28px; font-family:SimSun,STSong"><strong>传递变量</strong></span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0)'>// create a script engine manager</span> 
 <span style='font-size:12px; font-family:"Courier New"'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>ScriptEngineManager factory = </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>new</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> ScriptEngineManager();  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0)'>// create a JavaScript engine</span> 
 <span style='font-size:12px; font-family:"Courier New"'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>ScriptEngine engine = factory.getEngineByName(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"JavaScript"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>engine.put(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255)'>"a"</span> 
 <span style='font-size:12px; font-family:"Courier New"'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0)'>4</span> 
 <span style='font-size:12px; font-family:"Courier New"'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>engine.put(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"b"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0); background-color:rgb(248,248,248)'>6</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>try</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    Object maxNum = engine  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>            .eval(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255)'>"function max_num(a,b){return (a&gt;b)?a:b;}max_num(a,b);"</span> 
 <span style='font-size:12px; font-family:"Courier New"'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    System.out.println(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"max_num:"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> + maxNum);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>} </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>catch</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> (Exception e) {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    e.printStackTrace();  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>}  </span> 
</div> 
<div id="2590-1512918013996" style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-size:28px; font-family:SimSun,STSong"><strong>动态调用</strong></span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong">通过Invocable接口来多次调用脚本库中的函数，Invocable接口是 ScriptEngine可选实现的接口。</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>ScriptEngineManager factory = </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>new</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> ScriptEngineManager();  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0)'>// create a JavaScript engine</span> 
 <span style='font-size:12px; font-family:"Courier New"'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>ScriptEngine engine = factory.getEngineByName(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"JavaScript"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>try</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    engine.eval(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"function max_num(a,b){return (a&gt;b)?a:b;}"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    Invocable invoke = (Invocable) engine;  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    Object maxNum = invoke.invokeFunction(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"max_num"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0); background-color:rgb(248,248,248)'>4</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0); background-color:rgb(248,248,248)'>6</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    System.out.println(maxNum);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    maxNum = invoke.invokeFunction(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"max_num"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0); background-color:rgb(248,248,248)'>7</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0); background-color:rgb(248,248,248)'>6</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    System.out.println(maxNum);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>} </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>catch</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> (Exception e) {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0)'>// TODO: handle exception</span> 
 <span style='font-size:12px; font-family:"Courier New"'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>}  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-family:SimSun,STSong">动态实现接口，调用Java Interface实例</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>public</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>interface</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> JSLib {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>public</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>int</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> max_num(</span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>int</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> a, </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>int</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> b);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>}</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0)'>// create a script engine manager</span> 
 <span style='font-size:12px; font-family:"Courier New"'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>ScriptEngineManager factory = </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>new</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'> ScriptEngineManager();  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0)'>// create a JavaScript engine</span> 
 <span style='font-size:12px; font-family:"Courier New"'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>ScriptEngine engine = factory.getEngineByName(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"JavaScript"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>try</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    engine.eval(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"function max_num(a,b){return (a&gt;b)?a:b;}"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    Invocable invoke = (Invocable) engine;  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    JSLib jslib = invoke.getInterface(JSLib.</span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153); background-color:rgb(248,248,248)'><strong>class</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>int</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> maxNum = jslib.max_num(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0)'>4</span> 
 <span style='font-size:12px; font-family:"Courier New"'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0)'>6</span> 
 <span style='font-size:12px; font-family:"Courier New"'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    System.out.println(maxNum);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>} </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>catch</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> (Exception e) {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,130,0); background-color:rgb(248,248,248)'>// TODO: handle exception</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>}  </span> 
</div> 
<div id="9196-1512919960439" style="white-space:pre-wrap; line-height:1.75; font-size:14px"> 
 <span style="font-size:28px; font-family:SimSun,STSong"><strong>编译执行</strong></span> 
</div> 
<div style="white-space:pre-wrap; text-indent:28px; line-height:1.75; font-size:14px"> 
 <span style="font-family:Arial; color:rgb(51,51,51)">脚本引擎默认是解释执行的，如果需要反复执行脚本，可以使用它的可选接口Compilable来编译执行脚本，以获得更好的性能。</span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>try</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    Compilable compEngine = (Compilable) engine;  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    CompiledScript script = compEngine  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>            .compile(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255); background-color:rgb(248,248,248)'>"function max_num(a,b){return (a&gt;b)?a:b;}"</span> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    script.eval();  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    Invocable invoke = (Invocable) engine;  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>    Object maxNum = invoke.invokeFunction(</span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(0,0,255)'>"max_num"</span> 
 <span style='font-size:12px; font-family:"Courier New"'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0)'>4</span> 
 <span style='font-size:12px; font-family:"Courier New"'>, </span> 
 <span style='font-size:12px; font-family:"Courier New"; color:rgb(192,0,0)'>6</span> 
 <span style='font-size:12px; font-family:"Courier New"'>);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    System.out.println(maxNum);  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>} </span> 
 <span style='font-family:"Courier New"; color:rgb(0,102,153)'><strong>catch</strong></span> 
 <span style='font-size:12px; font-family:"Courier New"'> (Exception e) {  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"; background-color:rgb(248,248,248)'>    e.printStackTrace();  </span> 
</div> 
<div style="white-space:pre-wrap; line-height:1.5; font-size:14px"> 
 <span style='font-size:12px; font-family:"Courier New"'>}  </span> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1d34bbde60b5eb8beed17cbb21e1ccab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">安装API网关kong遇到的一些坑及解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b077f7a19d8372b666cadcc4bce00a33/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">异步上传图片-ajaxSubmit提交-Poison</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>