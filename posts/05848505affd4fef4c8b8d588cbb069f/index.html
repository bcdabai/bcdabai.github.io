<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>keras安装gpu环境搭建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="keras安装gpu环境搭建" />
<meta property="og:description" content="深度学习越来越火了，伴随着的是对python的学习和使用。其中python函数keras函数算是被经常提到的一个了，但是要使用它就要费点功夫，特别是gpu环境的搭建问题。以下是我搭建数次gpu环境 得出的总结。
keras backend我看好多使用的是theano 但是theano 麻烦而且效率不高网上好多都是指导theano为backend的安装
下面我以cntk为backend说一下（tensorflow也不错但最好不要用theano）
需要材料：visual studio(2013/2015) cuda(8.0) cudnn(6.0) python(3.6) window(8.0/10)
其对应的下载地址，及其安装
visual studio(2013/2015)https://www.visualstudio.com/zh-hans/downloads/
最好注册一个账号这样可以‘’使用你的权益‘’
然后直接搜索visual studio 2015
在安装时其中&#39;&#39;用于c&#43;&#43;的microsoft&#39;&#39;选项一定要选择，这个好像是为cuda 的编译工具
cuda(8.0) https://developer.nvidia.com/cuda-80-ga2-download-archive
下载完成后选择自定义安装，不然会有一些安装包会被漏掉。
安装完成之后打开cmd 直接输入nvcc -V 如果出现cuda的版本信息说明安装成功
anaconda ：https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/
anaconda安装很简单我就不多重复了（别忘勾选添加环境变量的选项）
cudnn 地址：https://developer.nvidia.com/rdp/form/cudnn-download-survey
cudnn需要注册账号才能下载，记得要要下载6.0版本的
下载完成之后解压出来是三个文件包lib bin include 把他们复制到cuda安装的C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0目录下
python 的keras包安装
打开cmd 输入conda install -c anaconda mingw libpython
完成之后把D:\Anaconda3\MinGW\bin添加到环境变量path的值下文件路径是自己安装的对应路径
再安装theano
conda install theano 安装后引入可能出现版本问题只要添加环境变量就能解决
变量名为MKL_THREADING_LAYER变量值为GNU.
然后安装tensorflow,可能也会出现版本问题我安装的方法是pip install tensorflow-gpu==1.3
接着安装cntk下载2.0 gpu版本的cntk地址https://www.nuget.org/packages/CNTK.GPU/2.0.0
用本地安装的方法 pip install cntk文件路径/cntk文件全名
最后安装keras pip install keras 其中可能会遇到spyder 打不开的问题那是版本冲突把spyder卸了重装就好（更新到最新版本）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/05848505affd4fef4c8b8d588cbb069f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-01T17:21:07+08:00" />
<meta property="article:modified_time" content="2018-04-01T17:21:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">keras安装gpu环境搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>          深度学习越来越火了，伴随着的是对python的学习和使用。其中python函数keras函数算是被经常提到的一个了，但是要使用它就要费点功夫，特别是gpu环境的搭建问题。以下是我搭建数次gpu环境 得出的总结。</p> 
<p>keras backend我看好多使用的是theano 但是theano 麻烦而且效率不高网上好多都是指导theano为backend的安装</p> 
<p>下面我以cntk为backend说一下（tensorflow也不错但最好不要用theano）</p> 
<p>需要材料：visual studio(2013/2015) cuda(8.0)   cudnn(6.0)  python(3.6)  window(8.0/10)</p> 
<p>其对应的下载地址，及其安装</p> 
<p> visual studio(2013/2015)https://www.visualstudio.com/zh-hans/downloads/</p> 
<p>最好注册一个账号这样可以‘’使用你的权益‘’</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/6a/12/ol72sEXB_o.png"></p> 
<p>然后直接搜索visual studio 2015</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/dd/b3/STzVFRKN_o.png"></p> 
<p>在安装时其中''用于c++的microsoft''选项一定要选择，这个好像是为cuda 的编译工具</p> 
<p>cuda(8.0) https://developer.nvidia.com/cuda-80-ga2-download-archive</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/57/80/UfR71uPJ_o.png"></p> 
<p>下载完成后选择自定义安装，不然会有一些安装包会被漏掉。</p> 
<p>安装完成之后打开cmd 直接输入nvcc -V 如果出现cuda的版本信息说明安装成功</p> 
<p>anaconda ：https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</p> 
<p>anaconda安装很简单我就不多重复了（别忘勾选添加环境变量的选项）</p> 
<p>cudnn 地址：https://developer.nvidia.com/rdp/form/cudnn-download-survey</p> 
<p>cudnn需要注册账号才能下载，记得要要下载6.0版本的</p> 
<p>下载完成之后解压出来是三个文件包lib bin include 把他们复制到cuda安装的C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0目录下</p> 
<p>python 的keras包安装</p> 
<p>打开cmd 输入conda install -c anaconda mingw libpython</p> 
<p>完成之后把D:\Anaconda3\MinGW\bin添加到环境变量path的值下文件路径是自己安装的对应路径</p> 
<p>再安装theano</p> 
<p>conda install theano </p> 
<p>安装后引入可能出现版本问题只要添加环境变量就能解决</p> 
<p>变量名为MKL_THREADING_LAYER变量值为GNU.</p> 
<p>然后安装tensorflow,可能也会出现版本问题我安装的方法是pip install tensorflow-gpu==1.3</p> 
<p>接着安装cntk下载2.0 gpu版本的cntk地址https://www.nuget.org/packages/CNTK.GPU/2.0.0</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/53/4a/cryFnqMZ_o.png"></p> 
<p>用本地安装的方法 pip install cntk文件路径/cntk文件全名</p> 
<p>最后安装keras pip install keras </p> 
<p>其中可能会遇到spyder 打不开的问题那是版本冲突把spyder卸了重装就好（更新到最新版本）</p> 
<p>pip uninstall spyder</p> 
<p>pip install spyder</p> 
<p>numpy也可能会有版本问题降到numpy=1.13 </p> 
<p>执行pip install numpy==1.13</p> 
<p>matplotlib也会有版本问题，使用旧版本pip install matplotlib==2.2.0就行</p> 
<p>最后修改keras 的backend 先在python 环境 import keras 会出'use tensorflow backend'但是这样检测不出用没用gpu</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/e3/4d/vKwl1xRl_o.png"></p> 
<p> </p> 
<p>打开文件修改</p> 
<p>{<!-- --></p> 
<p>    "floatx": "float32",<br>     "epsilon": 1e-07,<br>     "backend": "cntk",</p> 
<p>    "image_data_format": "channels_last"</p> 
<p>}</p> 
<p> </p> 
<p>修改完事之后 再次cmd进入python 环境import keras 会出现</p> 
<p>Using CNTK backend</p> 
<p>Selected GPU[0] GeForce GT 750M as the process wide default device.</p> 
<p>说明使用了gpu</p> 
<p>或者下载一个gpu--Z也行，在训练网络时会发现gpu load 和gpu温度增加 </p> 
<p>也可以说明正在使用gpu</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae17c2b196abfaf4673851f104455354/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">谈谈 Event Loop（事件循环）机制</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/968bf616f9ba68cabfa40eae2cfb353c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">新版vue-cli模板下本地开发环境使用node服务器跨域</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>