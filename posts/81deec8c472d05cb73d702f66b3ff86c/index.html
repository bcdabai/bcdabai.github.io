<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LDPC编译码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LDPC编译码" />
<meta property="og:description" content="LDPC编译码 文章目录 LDPC编译码前言一、码字1.校验矩阵a.适用于matlab的校验矩阵b.适用于 C的校验矩阵c.适用于python的校验矩阵 2.生成矩阵a.基于matlab的生成矩阵构造b.基于python的生成矩阵读取c.基于python的随机码字生成 前言 低密度奇偶校验（LDPC）码是目前5G通信常用的信道编码码字的一种，其具有接近香农极限的编译码性能。本文主要记录对LDPC码研究时常用的一些网站以及便捷的一些代码介绍，如有错误欢迎指出，大家一起学习。
PS：硕士期间有幸跟随导师了解这一领域，并进行了相关的研究，故借此进行记录。
一、码字 LDPC码的编码方式有很多种，本节主要介绍实验过程中常用的一些码字。
1.校验矩阵 详情可以从ldpc码校验矩阵获取。
a.适用于matlab的校验矩阵 使用matlab进行译码的校验矩阵要求是位置索引需要从1开始，或者为完整0，1矩阵。此处给出一份python的转换代码，将位置索引从0开始的转换为从1开的。注：从上面网址中下载的校验矩阵的位置索引是从1开始的。
def gen_m_mtx(file_path,dec_path): new_mtx = [] with open(file_path,&#39;r&#39;) as fp: lines = tuple(line for line in fp if len(line.split()) &gt; 0) max_ind = max(tuple(max(map(int, line.split())) for line in lines)) min_ind = min(tuple(min(map(int, line.split())) for line in lines)) if min_ind not in [0, 1]: raise Exception(&#39;Minimum index is not 0 or 1.&#39;) mtx = np.zeros((len(lines), max_ind &#43; (0 if min_ind == 1 or str(max_ind) in file_path else 1)), int) if max_ind&#43;1 == mtx." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/81deec8c472d05cb73d702f66b3ff86c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-04T20:23:50+08:00" />
<meta property="article:modified_time" content="2022-05-04T20:23:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LDPC编译码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="LDPC_0"></a>LDPC编译码</h2> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#LDPC_0" rel="nofollow">LDPC编译码</a></li><li><a href="#_10" rel="nofollow">前言</a></li><li><a href="#_15" rel="nofollow">一、码字</a></li><li><ul><li><a href="#1_17" rel="nofollow">1.校验矩阵</a></li><li><ul><li><a href="#amatlab_19" rel="nofollow">a.适用于matlab的校验矩阵</a></li><li><a href="#b_C_41" rel="nofollow">b.适用于 C的校验矩阵</a></li><li><a href="#cpython_63" rel="nofollow">c.适用于python的校验矩阵</a></li></ul> 
   </li><li><a href="#2_96" rel="nofollow">2.生成矩阵</a></li><li><ul><li><a href="#amatlab_98" rel="nofollow">a.基于matlab的生成矩阵构造</a></li><li><a href="#bpython_187" rel="nofollow">b.基于python的生成矩阵读取</a></li><li><a href="#cpython_204" rel="nofollow">c.基于python的随机码字生成</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_10"></a>前言</h2> 
<hr> 
<p>低密度奇偶校验（LDPC）码是目前5G通信常用的信道编码码字的一种，其具有接近香农极限的编译码性能。本文主要记录对LDPC码研究时常用的一些网站以及便捷的一些代码介绍，如有错误欢迎指出，大家一起学习。<br> <code>PS：硕士期间有幸跟随导师了解这一领域，并进行了相关的研究，故借此进行记录。</code></p> 
<h2><a id="_15"></a>一、码字</h2> 
<p>LDPC码的编码方式有很多种，本节主要介绍实验过程中常用的一些码字。</p> 
<h3><a id="1_17"></a>1.校验矩阵</h3> 
<p>详情可以从<a href="https://www.uni-kl.de/en/channel-codes/channel-codes-database/non-binary-ldpc/" rel="nofollow">ldpc码校验矩阵</a>获取。</p> 
<h4><a id="amatlab_19"></a>a.适用于matlab的校验矩阵</h4> 
<p>使用matlab进行译码的校验矩阵要求是位置索引需要从1开始，或者为完整0，1矩阵。此处给出一份python的转换代码，将位置索引从0开始的转换为从1开的。注：从上面网址中下载的校验矩阵的位置索引是从1开始的。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">gen_m_mtx</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span>dec_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_mtx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        lines <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>line <span class="token keyword">for</span> line <span class="token keyword">in</span> fp <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        max_ind <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">)</span><span class="token punctuation">)</span>
        min_ind <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> min_ind <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'Minimum index is not 0 or 1.'</span><span class="token punctuation">)</span>
        mtx <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">,</span> max_ind <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token keyword">if</span> min_ind <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> <span class="token builtin">str</span><span class="token punctuation">(</span>max_ind<span class="token punctuation">)</span> <span class="token keyword">in</span> file_path  <span class="token keyword">else</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> max_ind<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> mtx<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
                sdataa <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
                data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token keyword">for</span> sdata <span class="token keyword">in</span> sdataa<span class="token punctuation">:</span>
                    data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>sdata<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
                new_mtx<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>dec_path<span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> nfp<span class="token punctuation">:</span>
            nfp<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>new_mtx<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'], '</span><span class="token punctuation">,</span><span class="token string">' \n'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">']]'</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'['</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="b_C_41"></a>b.适用于 C的校验矩阵</h4> 
<p>由于C语言数据存储位置索引默认都是从0开始的，因此对于C的译码程序来说，校验矩阵中1的位置索引需要从0开始，相同的，此处给出对应位置索引从1转换到0的代码。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">gen_c_mtx</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span>dec_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_mtx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        lines <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>line <span class="token keyword">for</span> line <span class="token keyword">in</span> fp <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        max_ind <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">)</span><span class="token punctuation">)</span>
        min_ind <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> min_ind <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'Minimum index is not 0 or 1.'</span><span class="token punctuation">)</span>
        mtx <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">,</span> max_ind <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token keyword">if</span> min_ind <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> <span class="token builtin">str</span><span class="token punctuation">(</span>max_ind<span class="token punctuation">)</span> <span class="token keyword">in</span> file_path  <span class="token keyword">else</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> max_ind <span class="token operator">==</span> mtx<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
                sdataa <span class="token operator">=</span> line<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'_0'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
                data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token keyword">for</span> sdata <span class="token keyword">in</span> sdataa<span class="token punctuation">:</span>
                    data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>sdata<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                new_mtx<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>dec_path<span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> nfp<span class="token punctuation">:</span>
            nfp<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>new_mtx<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'], '</span><span class="token punctuation">,</span><span class="token string">' \n'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">']]'</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'['</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="cpython_63"></a>c.适用于python的校验矩阵</h4> 
<p>前面给出的两份代码都是基于python做的矩阵文本转换，因此，在python中读取矩阵会十分简单，并且可以根据相关条件做到自动识别，因此针对python给出针对按照校验矩阵行数读取校验矩阵的代码。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">load_parity_mtx</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        lines <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span>line <span class="token keyword">for</span> line <span class="token keyword">in</span> fp <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        max_ind <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">)</span><span class="token punctuation">)</span>
        min_ind <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> min_ind <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'Minimum index is not 0 or 1.'</span><span class="token punctuation">)</span>
        mtx <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">,</span> max_ind <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token keyword">if</span> min_ind <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> <span class="token builtin">str</span><span class="token punctuation">(</span>max_ind<span class="token punctuation">)</span> <span class="token keyword">in</span> file_path  <span class="token keyword">else</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
        chk_num <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
            <span class="token keyword">for</span> var_num <span class="token keyword">in</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> max_ind <span class="token operator">==</span> mtx<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    mtx<span class="token punctuation">[</span>chk_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> var_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    mtx<span class="token punctuation">[</span>chk_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> var_num<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>               
            chk_num <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> max_ind <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            mtx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                list_value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token keyword">for</span> data <span class="token keyword">in</span> line<span class="token punctuation">:</span>
                    data <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                    list_value<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                mtx<span class="token punctuation">.</span>append<span class="token punctuation">(</span>list_value<span class="token punctuation">)</span>
            mtx <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>mtx<span class="token punctuation">)</span>
        <span class="token keyword">return</span> mtx
</code></pre> 
<h3><a id="2_96"></a>2.生成矩阵</h3> 
<p>上面的网址中，有些码字是给出了其对应的生成矩阵的，但也有很多的码字只给出了校验矩阵，因此，在有些情况下需要测试随机码字的译码性能就需要有生成矩阵的支持。</p> 
<h4><a id="amatlab_98"></a>a.基于matlab的生成矩阵构造</h4> 
<p>校验矩阵与生成矩阵的关系为两者的矩阵乘的模二和为0。根据这个关系可以由校验矩阵得到生成矩阵。代码如下：</p> 
<pre><code class="prism language-python"><span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>
function H <span class="token operator">=</span> GenHirr<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span>col<span class="token punctuation">)</span>
 <span class="token operator">%</span>A<span class="token operator">=</span>dlmread<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 A<span class="token operator">=</span>dlmread<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">[</span>A_row<span class="token punctuation">,</span>A_col<span class="token punctuation">]</span> <span class="token operator">=</span> size<span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
 H <span class="token operator">=</span> zeros<span class="token punctuation">(</span>A_row<span class="token punctuation">,</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span>
 zeroStart <span class="token operator">=</span> find<span class="token punctuation">(</span>A<span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">:</span>A_row
     <span class="token keyword">for</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">:</span>A_col
         <span class="token keyword">if</span><span class="token punctuation">(</span>A<span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">~</span><span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
             <span class="token keyword">if</span><span class="token punctuation">(</span>zeroStart<span class="token punctuation">)</span>
                H<span class="token punctuation">(</span>i<span class="token punctuation">,</span>A<span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
             <span class="token keyword">else</span>
                H<span class="token punctuation">(</span>i<span class="token punctuation">,</span>A<span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
             end
         elseif<span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
             H<span class="token punctuation">(</span>i<span class="token punctuation">,</span>A<span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
         end
     end
 end
end
<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>

<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>
function H1 <span class="token operator">=</span> makeHStdForm<span class="token punctuation">(</span>H<span class="token punctuation">)</span>
rows <span class="token operator">=</span> size<span class="token punctuation">(</span>H<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cols <span class="token operator">=</span> size<span class="token punctuation">(</span>H<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> c <span class="token operator">=</span> cols <span class="token operator">-</span> rows <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span>cols
    <span class="token keyword">if</span> H<span class="token punctuation">(</span>r<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>
        <span class="token operator">%</span> Swap needed
        <span class="token keyword">for</span> r2 <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span>rows
            <span class="token keyword">if</span> H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token operator">~</span><span class="token operator">=</span> <span class="token number">0</span>
                tmp <span class="token operator">=</span> H<span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                H<span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
            end
        end

        <span class="token operator">%</span> Ups<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">if</span> H<span class="token punctuation">(</span>r<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>
            error<span class="token punctuation">(</span><span class="token string">'H is singular'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        end
    end

    <span class="token operator">%</span> Forward substitute
    <span class="token keyword">for</span> r2 <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span>rows
        <span class="token keyword">if</span> H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span>
            H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> xor<span class="token punctuation">(</span>H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">,</span> H<span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        end
    end

    <span class="token operator">%</span> Back Substitution
    <span class="token keyword">for</span> r2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>r <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">if</span> H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span>
            H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> xor<span class="token punctuation">(</span>H<span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">,</span> H<span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        end
    end

    <span class="token operator">%</span> Next row
    r <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
end
H1 <span class="token operator">=</span> H<span class="token punctuation">;</span>
end
<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>

<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>
function G <span class="token operator">=</span> hMat2GMat<span class="token punctuation">(</span>H<span class="token punctuation">)</span>
H1 <span class="token operator">=</span> makeHStdForm<span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token punctuation">;</span>
G <span class="token operator">=</span> gen2par<span class="token punctuation">(</span>H1<span class="token punctuation">)</span><span class="token punctuation">;</span>
end
<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>


<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>
<span class="token operator">//</span>产生生成示例，生成矩阵为<span class="token number">0</span>，<span class="token number">1</span>构成的矩阵
H <span class="token operator">=</span> GenHirr<span class="token punctuation">(</span><span class="token string">'720_400.txt'</span><span class="token punctuation">,</span><span class="token number">720</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>hRow<span class="token punctuation">,</span>hCol<span class="token punctuation">]</span> <span class="token operator">=</span> size<span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token punctuation">;</span>
G <span class="token operator">=</span> hMat2GMat<span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token punctuation">;</span>
fid <span class="token operator">=</span> fopen<span class="token punctuation">(</span><span class="token string">'720_400_G.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fprintf<span class="token punctuation">(</span>fid<span class="token punctuation">,</span><span class="token punctuation">[</span>repmat<span class="token punctuation">(</span><span class="token string">'%d '</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> size<span class="token punctuation">(</span>G<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> G'<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token operator">//=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">//</span>
</code></pre> 
<h4><a id="bpython_187"></a>b.基于python的生成矩阵读取</h4> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">load_gen_mtx</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        gens <span class="token operator">=</span> fp<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
        mtx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> g <span class="token keyword">in</span> gens<span class="token punctuation">:</span>
            g <span class="token operator">=</span> g<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
            g <span class="token operator">=</span> g<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            ber <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> tmp_float <span class="token keyword">in</span> g<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                ber<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>tmp_float<span class="token punctuation">)</span><span class="token punctuation">)</span>
            mtx<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ber<span class="token punctuation">)</span>
        <span class="token keyword">return</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>mtx<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="cpython_204"></a>c.基于python的随机码字生成</h4> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Code</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> gen_mtx<span class="token punctuation">,</span> parity_mtx<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>gen_mtx<span class="token punctuation">,</span> self<span class="token punctuation">.</span>parity_mtx <span class="token operator">=</span> gen_mtx<span class="token punctuation">,</span> parity_mtx

        <span class="token keyword">if</span> gen_mtx <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            k<span class="token punctuation">,</span> n <span class="token operator">=</span> gen_mtx<span class="token punctuation">.</span>shape
            <span class="token comment">#messages = mu.binary_vectors(k)</span>
            <span class="token comment">#print(np.random.randint(0,2,size=k))</span>
            messages <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">#print(messages)</span>
            self<span class="token punctuation">.</span>cb <span class="token operator">=</span> <span class="token punctuation">(</span>messages @ gen_mtx<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span>

            <span class="token comment"># check if GH^T = 0</span>
            <span class="token comment">#print(np.sum((self.cb @ parity_mtx.T) % 2))</span>
            <span class="token keyword">assert</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>cb @ parity_mtx<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">#assert (self.cb[0].sum() == 0)  # all zeros cw</span>
            <span class="token comment">#assert (self.cb[-1].sum() == n)  # all ones cw</span>

    <span class="token keyword">def</span> <span class="token function">get_k</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_n<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>parity_mtx<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">get_n</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">return</span> self<span class="token punctuation">.</span>parity_mtx<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">get_random_code</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>batchsize<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>seed <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        k<span class="token punctuation">,</span> n <span class="token operator">=</span> self<span class="token punctuation">.</span>gen_mtx<span class="token punctuation">.</span>shape
        <span class="token keyword">if</span> seed <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
        messages <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span>batchsize<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>cb <span class="token operator">=</span> <span class="token punctuation">(</span>messages @ self<span class="token punctuation">.</span>gen_mtx<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span>
        <span class="token keyword">assert</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>cb @ self<span class="token punctuation">.</span>parity_mtx<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>cb

    <span class="token keyword">def</span> <span class="token function">save_random_c</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>path<span class="token punctuation">,</span>batchsize<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>seed <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        k<span class="token punctuation">,</span> n <span class="token operator">=</span> self<span class="token punctuation">.</span>gen_mtx<span class="token punctuation">.</span>shape
        <span class="token keyword">if</span> seed <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
        messages <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span>batchsize<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
        c_code <span class="token operator">=</span> <span class="token punctuation">(</span>messages @ self<span class="token punctuation">.</span>gen_mtx<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span>
        <span class="token keyword">assert</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c_code @ self<span class="token punctuation">.</span>parity_mtx<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        np<span class="token punctuation">.</span>set_printoptions<span class="token punctuation">(</span>threshold<span class="token operator">=</span>np<span class="token punctuation">.</span>inf<span class="token punctuation">)</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>c_code<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'['</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">']'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#生成示例</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    code <span class="token operator">=</span> Code<span class="token punctuation">(</span>gmtx<span class="token punctuation">,</span>Hmtx<span class="token punctuation">)</span>
    code<span class="token punctuation">.</span>save_random_c<span class="token punctuation">(</span>dec_path<span class="token operator">+</span><span class="token string">'codeword_rand.txt'</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f0de678fb80a425edbbdadd3c3d7c72a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2的次方对照表（作为工具用电科）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/75c661299e47612009b9cfb155c332ee/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构与算法：快速幂——求幂运算 O(logN)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>