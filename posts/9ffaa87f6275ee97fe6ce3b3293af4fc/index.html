<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt 5.15.2 (MSVC 2019）编译 QWT 6.2.0 : 编译MingW或MSVC遇到的坑 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt 5.15.2 (MSVC 2019）编译 QWT 6.2.0 : 编译MingW或MSVC遇到的坑" />
<meta property="og:description" content="MingW下编译QWt 6.2.0 下载qwt最新版本，用git工具 git clone下载源码
git clone https://git.code.sf.net/p/qwt/git qwt-git
或者使用我下载的 qwt 2.6.0
链接：https://pan.baidu.com/s/1KZI-L10N90TJobeqqPYBqw?pwd=pq1o
提取码：pq1o
下载安装Qt 5.15.2
链接：https://pan.baidu.com/s/1mpcVYjzjL0udYAh0TGjtrA?pwd=2sz5
提取码：2sz5
用Qt 5.15.2 自带的Qt Creator 5.0.2打开qwt.pro文件
编译前的参数修改（网上一找一大把）
打开QMAKE_RPATHDIR *=$${QWT_INSTALL_LIBS}
注释掉src/qwtbuild下的qwtbuild.pri里的CONFIG &#43;= debug_and_release
因为你的工程要链接的第三方库肯定是release版本的库了
classinclude下的qwtbuil下的qwtbuild.pri里的 CONFIG &#43;= debug_and_release也是要注释掉#
编译MSVC会编译不通过的原因，本质原因应该不是修改一个安装目录就可以了（以后来研究），把qwtconfig.pri下的QWT_INSTALL_PREFIX路径修改成自己Qt安装使用的编译器下的路径里的include里新建自己的qwt头文件目录（qwtbuld.pri和qwtconfig.pro虽然有多个，其实点进去就知道都是同一个，修改一处就都修改了）
编译的顺序是先【执行qmake】，然后开始【构建】
需要选择release版本，在构建里选择Release
qmake完成，及构建完成后，会在构建目录下生成编译文件xx.dll和xx.a文件
将qwt.dll和qwtd.dll放到本地的Qt 5.12.12安装目录的库目录中，这样基于Qt 5.12.12的自己的应用就可以使用qwt开发了，因为安装了qwt库
qwt的编译里还生成了designer.dll，如果将该designer.dll放到本地Qt 5.12.12的安装目录的designer插件中，那么在Qt开发中的designer里可以直接拖动使用qwt控件，那也是非常方便的。
放到本地Qt的designer插件目录中
用Qt Creator新建自己的应用程序，用Qt Designer打开mainwindow.ui
在Qt设计师中左侧控件拉到最下面看到qwt控件，此处你可以兴奋一分钟，将qwt控件拖动到右边，然后保存，然后qmake你的工程，构建并运行，就把qwt安装并运行到了你的个人Qt工程中了
MSVC 下编译QWT 6.2.0 说实话在MingW下载编译qwt是比较智障无难度的，因为Qt的安装过程中会把MingW编译器一起安装了，所以在Qt构建工具中MingW编译器的选择也十分简单，一般不会出错，但是MSVC编译器是随着Visual Studio (VS2022 VS2017)安装的，所以Qt的构建工具中经常是默认的MSVC版本的项目构建是黄色感叹号，没法直接使用其新建Qt MSVC工程，所以如果你的Qt工具里Qt MSVC构建都还没有配置好，然后你用Qt Creator打开qwt.pro去编译MSVC版本的库，会遇到编译问题，所以先解决Qt构建问题。
我安装的是VS2022，所以编译器是MSVC2017，但是Qt构建里默认MSVC2017无法使用，cmake也是无法使用。
我的图片中MSVC2015 64bit编译可以构建那个纯粹是扯淡，因为我清楚我的本机是VS2022 MSVC2017不可能是MSVC2015，即便选择了MSVC2015，最后工程还是带黄色感叹哈，所以在编译器里进行配置这个克隆的方法也是网上一抓一大把，其实原因很明显我就死死咬住我是MSVC2017就不会出错了
如果你选择C&#43;&#43;里或C里列出的C&#43;&#43; Complier或C Complier会出问题，因为其实他们是MSVC2005，错得离谱，所以选中一个编译器然后点击右边的克隆
ABI里面选择自定义，然后MSVC2005就可以选择了，肯定是果断选择自己VS对应的编译器，我的是MSVC2017
确定OK之后，在Qt Creator新建项目，选择克隆的编译器的构建就可以创建你本机的MSVC版本Qt项目了。回到编译qwt的MSVC版本，在构建的过程中可以看到是否是真正使用自己的编译器进行构建
像我的构建里是MSVC 64bit，所以qmake和构建就没有再报错。MSVC2017里把qwt的库，放到本地对应目录中" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9ffaa87f6275ee97fe6ce3b3293af4fc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-20T19:51:32+08:00" />
<meta property="article:modified_time" content="2024-01-20T19:51:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt 5.15.2 (MSVC 2019）编译 QWT 6.2.0 : 编译MingW或MSVC遇到的坑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MingWQWt_620_0"></a>MingW下编译QWt 6.2.0</h2> 
<ol><li> <p>下载qwt最新版本，用git工具 git clone下载源码<br> git clone https://git.code.sf.net/p/qwt/git qwt-git<br> 或者使用我下载的 qwt 2.6.0<br> 链接：https://pan.baidu.com/s/1KZI-L10N90TJobeqqPYBqw?pwd=pq1o<br> 提取码：pq1o</p> </li><li> <p>下载安装Qt 5.15.2<br> 链接：https://pan.baidu.com/s/1mpcVYjzjL0udYAh0TGjtrA?pwd=2sz5<br> 提取码：2sz5</p> </li><li> <p>用Qt 5.15.2 自带的Qt Creator 5.0.2打开qwt.pro文件<br> <img src="https://images2.imgbox.com/06/55/fIeS6Q6c_o.png" alt="在这里插入图片描述"></p> </li><li> <p>编译前的参数修改（网上一找一大把）<br> 打开QMAKE_RPATHDIR *=$${QWT_INSTALL_LIBS}<br> <img src="https://images2.imgbox.com/44/a0/g86SCu7o_o.png" alt="在这里插入图片描述"><br> 注释掉src/qwtbuild下的qwtbuild.pri里的CONFIG += debug_and_release<br> 因为你的工程要链接的第三方库肯定是release版本的库了<br> <img src="https://images2.imgbox.com/70/5f/Q0nWqTFs_o.png" alt="在这里插入图片描述"><br> classinclude下的qwtbuil下的qwtbuild.pri里的 CONFIG += debug_and_release也是要注释掉#<br> <img src="https://images2.imgbox.com/75/b3/wEgYpvyH_o.png" alt="在这里插入图片描述"><br> 编译MSVC会编译不通过的原因，本质原因应该不是修改一个安装目录就可以了（以后来研究），把qwtconfig.pri下的QWT_INSTALL_PREFIX路径修改成自己Qt安装使用的编译器下的路径里的include里新建自己的qwt头文件目录（qwtbuld.pri和qwtconfig.pro虽然有多个，其实点进去就知道都是同一个，修改一处就都修改了）<br> <img src="https://images2.imgbox.com/16/14/fhcx4NxV_o.png" alt="在这里插入图片描述"></p> </li><li> <p>编译的顺序是先【执行qmake】，然后开始【构建】<br> 需要选择release版本，在构建里选择Release<br> <img src="https://images2.imgbox.com/a3/78/bqxwwjg0_o.png" alt="在这里插入图片描述"></p> </li><li> <p>qmake完成，及构建完成后，会在构建目录下生成编译文件xx.dll和xx.a文件<br> <img src="https://images2.imgbox.com/c3/34/E8CpDmTa_o.png" alt="7."></p> </li><li> <p>将qwt.dll和qwtd.dll放到本地的Qt 5.12.12安装目录的库目录中，这样基于Qt 5.12.12的自己的应用就可以使用qwt开发了，因为安装了qwt库<br> <img src="https://images2.imgbox.com/f6/c2/l1GkLob5_o.png" alt="在这里插入图片描述"></p> </li><li> <p>qwt的编译里还生成了designer.dll，如果将该designer.dll放到本地Qt 5.12.12的安装目录的designer插件中，那么在Qt开发中的designer里可以直接拖动使用qwt控件，那也是非常方便的。<br> <img src="https://images2.imgbox.com/41/1a/vHtDDnQw_o.png" alt="在这里插入图片描述"><br> 放到本地Qt的designer插件目录中<br> <img src="https://images2.imgbox.com/83/a9/kcGrLwiX_o.png" alt="在这里插入图片描述"></p> </li><li> <p>用Qt Creator新建自己的应用程序，用Qt Designer打开mainwindow.ui</p> </li></ol> 
<p><img src="https://images2.imgbox.com/2e/91/0B8qIqRv_o.png" alt="在这里插入图片描述"><br> 在Qt设计师中左侧控件拉到最下面看到qwt控件，此处你可以兴奋一分钟，将qwt控件拖动到右边，然后保存，然后qmake你的工程，构建并运行，就把qwt安装并运行到了你的个人Qt工程中了<br> <img src="https://images2.imgbox.com/73/1a/IkubrLaA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a8/dc/GT5EcgWr_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="MSVC_QWT_620_40"></a>MSVC 下编译QWT 6.2.0</h2> 
<p>说实话在MingW下载编译qwt是比较智障无难度的，因为Qt的安装过程中会把MingW编译器一起安装了，所以在Qt构建工具中MingW编译器的选择也十分简单，一般不会出错，但是MSVC编译器是随着Visual Studio (VS2022 VS2017)安装的，所以Qt的构建工具中经常是默认的MSVC版本的项目构建是黄色感叹号，没法直接使用其新建Qt MSVC工程，所以如果你的Qt工具里Qt MSVC构建都还没有配置好，然后你用Qt Creator打开qwt.pro去编译MSVC版本的库，会遇到编译问题，所以先解决Qt构建问题。</p> 
<ol><li>我安装的是VS2022，所以编译器是MSVC2017，但是Qt构建里默认MSVC2017无法使用，cmake也是无法使用。<br> <img src="https://images2.imgbox.com/56/a2/LygTDnt8_o.png" alt="在这里插入图片描述"><br> 我的图片中MSVC2015 64bit编译可以构建那个纯粹是扯淡，因为我清楚我的本机是VS2022 MSVC2017不可能是MSVC2015，即便选择了MSVC2015，最后工程还是带黄色感叹哈，所以在编译器里进行配置</li><li>这个克隆的方法也是网上一抓一大把，其实原因很明显我就死死咬住我是MSVC2017就不会出错了<br> <img src="https://images2.imgbox.com/f2/ef/kHEAMH9T_o.png" alt="在这里插入图片描述"><br> 如果你选择C++里或C里列出的C++ Complier或C Complier会出问题，因为其实他们是MSVC2005，错得离谱，所以选中一个编译器然后点击右边的克隆<br> <img src="https://images2.imgbox.com/b7/95/5BpfyjBh_o.png" alt="在这里插入图片描述"><br> ABI里面选择自定义，然后MSVC2005就可以选择了，肯定是果断选择自己VS对应的编译器，我的是MSVC2017<br> <img src="https://images2.imgbox.com/0b/f3/M9y765Gv_o.png" alt="在这里插入图片描述"><br> 确定OK之后，在Qt Creator新建项目，选择克隆的编译器的构建就可以创建你本机的MSVC版本Qt项目了。</li><li>回到编译qwt的MSVC版本，在构建的过程中可以看到是否是真正使用自己的编译器进行构建<br> <img src="https://images2.imgbox.com/aa/e0/qfBUoU8D_o.png" alt="在这里插入图片描述"><br> 像我的构建里是MSVC 64bit，所以qmake和构建就没有再报错。</li><li>MSVC2017里把qwt的库，放到本地对应目录中<br> <img src="https://images2.imgbox.com/00/91/Ek5sR1Pu_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/15/5d/IOYzMKb0_o.png" alt="在这里插入图片描述"><br> 放到本机MSVC的库目录中，说到这里不得不为Qt的设计点赞，这种用动态库dll扩展插件，来扩展功能，确实就是牛逼Plus。<br> <img src="https://images2.imgbox.com/63/5c/sSw6xbg5_o.png" alt="在这里插入图片描述"><br> 把两个对应的lib文件放到Qt本地lib安装目录下<br> <img src="https://images2.imgbox.com/ee/28/VSG6hSE7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/35/75/t1oXX9iZ_o.png" alt="在这里插入图片描述"></li></ol> 
<p>把designer下的qwt的designer插件也放到本地qt的designer设计师插件目录下<br> <img src="https://images2.imgbox.com/47/9a/pUeZJcmW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2b/8c/irb9Ykt9_o.png" alt="在这里插入图片描述"><br> 5. 新建Qt MSVC工程</p> 
<p><img src="https://images2.imgbox.com/80/4a/6RcEYnLF_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/56/6c/c4D9QCeB_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp"># <span class="token punctuation">.</span>pro里添加 qwt的配置
CONFIG <span class="token operator">+=</span> qwt
DEFINES <span class="token operator">+=</span> QT_DLL QWT_DLL
LIBS <span class="token operator">+=</span> <span class="token operator">-</span>L<span class="token string">"C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\lib"</span> <span class="token operator">-</span>lqwtd
LIBS <span class="token operator">+=</span> <span class="token operator">-</span>L<span class="token string">"C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\lib"</span> <span class="token operator">-</span>lqwt
INCLUDEPATH <span class="token operator">+=</span> D<span class="token operator">:</span>\develop\qwt\qwt<span class="token operator">-</span>git\src
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/e1/yVPZMlB0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/80/bf/iCcnUquL_o.png" alt="在这里插入图片描述"><br> 6. 其实到这里很多时候已经完成了，但是这里很倔强，跟我开了个玩笑<br> <img src="https://images2.imgbox.com/2a/87/OJi1yKS6_o.png" alt="在这里插入图片描述"><br> <code>: static_assert failed "Error in C++ Standard Library usage."</code><br> 但是程序员天生就是对Bug兴奋，那就老套路了，挨字分析error总能找出问题所在<br> <img src="https://images2.imgbox.com/6b/02/giwbMbOl_o.png" alt="在这里插入图片描述"><br> 就是VS的编译器版本的问题，始终如一地选择自己本地自己确认的编译器版本，就不会有问题了</p> 
<p>-------------------------2024-1-20---------------------------<br> <img src="https://images2.imgbox.com/bf/4d/xYcHBdD1_o.png" alt="在这里插入图片描述"><br> 看到clang的编译器错误，肯定是不合理的，我的就是MSVC2017，所以针对项目选了过来<br> <img src="https://images2.imgbox.com/c9/73/1kifo2ol_o.png" alt="在这里插入图片描述"><br> 新建了一个项目用msvc2017克隆版本编译器。<br> <img src="https://images2.imgbox.com/4d/76/cHorT09n_o.png" alt="在这里插入图片描述"><br> 跟前面一样把ui用designer打开，然后拖几个qwt控件。我的qwt的头文件即src文件的目录修改了，所以最开始编译还报错找不到文件，然后改成了真实路径。<br> <img src="https://images2.imgbox.com/0c/53/alB7jVgz_o.png" alt="在这里插入图片描述"></p> 
<p><font color="blue" size="4">到这里所有问题都已经解决了。但是留下一个问题，我要把qwt的库及头文件打包我的个人项目3rdparty中，如何让cmake找到我的qwt package，程序员就是永远走在解决一个问题又开始下一个问题的路上。</font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/104c4563153a6f4fc299a462db63f846/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">24岁总结和展望</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/884c65808f24447f63045761a8f980a2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android逆向之实战逆向APP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>