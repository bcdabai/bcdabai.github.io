<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>记录Unity和C#遇到的坑(持续更新) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="记录Unity和C#遇到的坑(持续更新)" />
<meta property="og:description" content="UI图是完整的, 但导入Unity后UI图残缺了 把MeshType改成Full Rect
美术只给了左边一半UI, 用2张图在Unity里拼, 然后发现中间有缝 把 Filter Mode 改成 Point(no filter)
MeshType 也要改成 Full Rect
改特效的startLifetime 特效是沿直线发射粒子, 需求是用startLifetime控制特效的长度
这样, 长度不是瞬间达到目标长度, 而是会缓慢变化到目标长度 eff.main.startLifetime = 10 所以要将特效的时间前进1秒, 使其立即突变为目标长度 eff:Simulate(1) eff:Play() 关闭多点触控 Input.multiTouchEnabled = false; 关闭之后Input.touches[n]就不好用了
Editor扩展UI面板 [CustomEditor(typeof(Transform), true)] -- 行 [CustomEditor(typeof(Text), true)] -- 不行 解决方法:
自己写个脚本MyText继承Text, 然后再扩展
using UnityEditor; using UnityEngine; using UnityEngine.UI; [CustomEditor(typeof(MyText), true)] [CanEditMultipleObjects] public class AdaptiveTextEditor : UnityEditor.UI.TextEditor { Text txt; protected override void OnEnable() { base." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/242e15c8b238b3f7baf699357e7349b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-30T18:03:21+08:00" />
<meta property="article:modified_time" content="2023-10-30T18:03:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">记录Unity和C#遇到的坑(持续更新)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="UI_UnityUI_0"></a>UI图是完整的, 但导入Unity后UI图残缺了</h3> 
<p><img src="https://images2.imgbox.com/f6/32/ra9ttbZV_o.png" alt="在这里插入图片描述"><br> 把MeshType改成Full Rect</p> 
<h3><a id="UI_2Unity__4"></a>美术只给了左边一半UI, 用2张图在Unity里拼, 然后发现中间有缝</h3> 
<p><img src="https://images2.imgbox.com/36/34/8RK1Hnox_o.png" alt="在这里插入图片描述"><br> 把 Filter Mode 改成 Point(no filter)<br> MeshType 也要改成 Full Rect</p> 
<h3><a id="startLifetime_8"></a>改特效的startLifetime</h3> 
<p>特效是沿直线发射粒子, 需求是用startLifetime控制特效的长度</p> 
<pre><code class="prism language-csharp">这样<span class="token punctuation">,</span> 长度不是瞬间达到目标长度<span class="token punctuation">,</span> 而是会缓慢变化到目标长度
eff<span class="token punctuation">.</span>main<span class="token punctuation">.</span>startLifetime <span class="token operator">=</span> <span class="token number">10</span>

所以要将特效的时间前进<span class="token number">1</span>秒<span class="token punctuation">,</span> 使其立即突变为目标长度
eff<span class="token punctuation">:</span><span class="token function">Simulate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
eff<span class="token punctuation">:</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_19"></a>关闭多点触控</h3> 
<pre><code class="prism language-csharp">Input<span class="token punctuation">.</span>multiTouchEnabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre> 
<p>关闭之后Input.touches[n]就不好用了</p> 
<h3><a id="EditorUI_25"></a>Editor扩展UI面板</h3> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Transform</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token operator">--</span> 行
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Text</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token operator">--</span> 不行
</code></pre> 
<p>解决方法:<br> 自己写个脚本MyText继承Text, 然后再扩展</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEditor</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyText</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CanEditMultipleObjects</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdaptiveTextEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UnityEditor<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>TextEditor</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Text</span> txt<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        txt <span class="token operator">=</span> target <span class="token keyword">as</span> <span class="token class-name">Text</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        serializedObject<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serializedObject<span class="token punctuation">.</span><span class="token function">ApplyModifiedProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        GUILayout<span class="token punctuation">.</span><span class="token function">BeginHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            txt<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">"逼傻是念着倒"</span><span class="token punctuation">;</span>
            txt<span class="token punctuation">.</span>alignment <span class="token operator">=</span> TextAnchor<span class="token punctuation">.</span>MiddleCenter<span class="token punctuation">;</span>
            txt<span class="token punctuation">.</span>raycastTarget <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">EndHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="ref__out__in_69"></a>ref 和 out 和 in</h3> 
<p>in传入参数, out传出参数, ref传入传出参数</p> 
<p>ref与out 都是为了让函数有多个返回值</p> 
<p>ref 必须在方法外赋值<br> out 必须在方法内赋值<br> in 必须在方法外赋值, 在方法内不可写入</p> 
<h3><a id="_78"></a>手机游戏画面轻微抖动</h3> 
<p>开发安卓游戏, 用<strong>小米10</strong>做测试机, 拖拽大地图的时候, 画面轻微抖动<br> 查了半天代码, 没找到原因<br> 然后换了台<strong>小米8</strong>测试, 不抖了<br> 之所以为什么会这样的原因竟然是因为<strong>屏幕刷新率</strong>的问题!<br> <strong>小米10</strong>的屏幕刷新率是<strong>90赫兹</strong>, 改为<strong>60赫兹</strong>, 就不抖了</p> 
<h3><a id="__85"></a>数据结构: 跳表</h3> 
<p>构建:<br> 把原始链表每间隔1个数据拿出来, 形成第一级索引表<br> 把第一级索引表间隔1个数据拿出来, 形成第二级索引表<br> 依次形成多级索引表, 最后形成树状结构</p> 
<p>优点:<br> 空间换时间, 二分查找, 速度快, 时间复杂度为O(logn)<br> <img src="https://images2.imgbox.com/bf/b7/Vkyu9jlY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_95"></a>遍历一个枚举</h3> 
<p>用Enum.GetValues()</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">panelsDef</span> panel <span class="token keyword">in</span> Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">panelsDef</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">DoSomething</span><span class="token punctuation">(</span>panel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="SVN_11_106"></a>SVN提交原则: 1次只提交1个功能!</h3> 
<p>一旦你同时提了多个功能, 然后又想分离出来, 会超级麻烦<br> 所以<br> 要分别改, 分开提, 不要同时提</p> 
<h3><a id="_111"></a>设计模式的六大原则:</h3> 
<p>开闭原则：实现热插拔，提高扩展性。<br> 里氏代换原则：实现抽象的规范，实现子父类互相替换；<br> 依赖倒转原则：针对接口编程，实现开闭原则的基础；<br> 接口隔离原则：降低耦合度，接口单独设计，互相隔离；<br> 迪米特法则，又称不知道原则：功能模块尽量独立；<br> 合成复用原则：尽量使用聚合，组合，而不是继承；<br> 摘自: <a href="https://www.runoob.com/design-pattern/design-pattern-intro.html" rel="nofollow">https://www.runoob.com/design-pattern/design-pattern-intro.html</a></p> 
<h3><a id="C_120"></a>一些C#效率</h3> 
<p>if elseif会执行多次判断<br> switch只判断一次，效率较高</p> 
<p>foreach写起来比for方便<br> foreach是只读的, 不能增删改<br> foreach效率比for要高 (因为for要检查index是否有效)<br> 但是foreach会产生更多GC (每遍历过一个元素就释放它)</p> 
<p>ToUpper()和ToLower()会创建一个新的字符串<br> bool.Parse()和Compare(), 是忽略大小写的比较</p> 
<h3><a id="_132"></a>手机语言</h3> 
<p>众所周知: zh是中文, en是英文</p> 
<p>下面这些你可能不知道:<br> zh-Hans 全宇宙通用简体中文<br> zh-Hans-CN 大陆简体中文<br> zh-Hans-TW 台湾简体中文</p> 
<p>zh-Hant 全宇宙通用繁體中文<br> zh-Hant-CN 大陸繁體中文<br> zh-Hant-TW 臺灣繁體中文</p> 
<p>为了区分是简体还是繁体, 会用到Hans或Hant</p> 
<h3><a id="__146"></a>空字符判断 的效率</h3> 
<pre><code class="prism language-csharp">str<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> 速度最快<span class="token punctuation">,</span> 但是要求str必不能为<span class="token keyword">null</span>
str <span class="token operator">==</span> String<span class="token punctuation">.</span>Empty<span class="token punctuation">;</span> String<span class="token punctuation">.</span>Empty的内部也是个<span class="token string">""</span>
str <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">;</span> 速度最慢<span class="token punctuation">,</span> 因为要新创建一个<span class="token string">""</span><span class="token punctuation">,</span> 再做对比
</code></pre> 
<h3><a id="InputGetMouseButton0_153"></a>安卓Input.GetMouseButton(0)</h3> 
<p>在安卓平台上也可以使用Input.GetMouseButton(0)来接收手指的点击事件<br> 不过只能接收一个点击<br> 如果你用多个手指点击的话, 会取多指之间的中点作为Input.mousePosition</p> 
<h3><a id="C_158"></a>C#列表深拷贝</h3> 
<p>列表的深拷贝可以用:<br> 1.反射<br> 2.先ToArray(), 再把这个array作为参数传入一个new List<br> 3.ForEach()一个一个赋值到新列表</p> 
<h3><a id="Vector3right__Z__angle_164"></a>将Vector3.right 饶Z轴 旋转angle度</h3> 
<pre><code class="prism language-csharp"> <span class="token class-name">Vector3</span> dir <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> angle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Vector3<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_169"></a>帧数限制</h3> 
<p>计算量很少, 渲染量也很少<br> 但是, 帧数很低, WaitForTargetFPS开销很大<br> 原因: 看你是不是设置了帧数: Application.targetFrameRate</p> 
<h3><a id="Trail_Renderer_174"></a>拖尾Trail Renderer改颜色</h3> 
<p>Trail Renderer 在unity编辑器里可以动态修改材质球的颜色<br> 但打包成安卓就不行了<br> 解决方法:<br> 写个可变色的shader, 改shader的颜色</p> 
<h3><a id="_180"></a>一些优化</h3> 
<p>不透明的东西, 不要用带透明通道的着色器<br> 不需要写入的时候, 关闭纹理的"可写"选项<br> 2D游戏里, 用不到mipmap, 3D游戏里大部分也用不到, mipmap和LOD一样是用内存换渲染</p> 
<p>小音频用Decompress On Load, 在内存中不压缩, 快, 但是占内存多<br> 大音频用Compressed In Memory, 在内存中压缩, 占内存小, 但是慢(因为需要一个解压的过程)<br> Streaming是I/O操作, 不占内存, 如果你项目中的音频占很多内存, 就用这个</p> 
<h3><a id="_189"></a>关于接口的坑</h3> 
<p>先定义个接口</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITest</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果, 既要静态方法又想要动态方法, 像这样↓写是不行的</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ITest</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"动态 A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"静态 A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↑这样写的话, 以下2种调用方式都会报错:<br> 调用不明确(你有2个AFun()方法, 我不知道调用哪一个)</p> 
<pre><code class="prism language-csharp">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">TestInterface</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        TestInterface<span class="token punctuation">.</span><span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>所以应该怎么写呢? 嗯, ↓要这样写才行</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">TestInterface</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ITest</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//注意这里不能写public, 因为接口本来就是public</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> ITest<span class="token punctuation">.</span><span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"动态 A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"静态 A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>调用的时候这样调↓</p> 
<pre><code class="prism language-csharp">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">TestInterface</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//这里需要强转</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span>ITest<span class="token punctuation">)</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        TestInterface<span class="token punctuation">.</span><span class="token function">AFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_251"></a>构造函数的特殊用法</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Structure</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token function">Structure</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{<!-- --></span> num <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">Structure</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> nums<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"不管你传参是int还是int[], 都走这个方法, 参数为: "</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_265"></a>垃圾回收的3种方式</h3> 
<ol><li>计数法, 添加引用+1, 销毁引用-1, 完事把标记为0的内存释放掉, 缺点: 互相引用无法被释放, 计数的储存</li><li>标记法, 遍历内存, 有引用的就做标记, 完事把没有标记释放掉, 缺点: 遍历开销, 需要暂停, 释放内存造成不连续</li><li>复制法, 只遍历在用的内存, 把这些内存复制到新的区域, 内存连续, 缺点: 复制开销, 需要保留区域用来复制</li></ol> 
<h3><a id="where_270"></a>where</h3> 
<p>where字句后面有new()约束的话，T类型必须有public且没有参数的构造函数。</p> 
<h3><a id="_273"></a>长度和占位</h3> 
<p>bit: 位, 即0或1<br> byte: 字节, 1个字节是8位, 即2^8, 即[0-255], 因为要分正负号, 就得再除以2, 即[-128, 127]<br> bool: 占1位<br> char: 占1个字节<br> short: 占2个字节, 即16位<br> int: 占4个字节, 即32位, 即2^32, 即[-2147483648, 2147483647]</p> 
<p>(为什么负数比正数多一位呢, 因为多一个负0<br> 正0的2进制为: 0000 0000 0000 0000<br> 负0的2进制为: 1000 0000 0000 0000, 就用来表示-2147483648了</p> 
<hr> 
<p>float是32位, int也是32位, 但float只能保证6-7位有效数字, 为什么:</p> 
<pre><code class="prism language-csharp">1bit（符号位） 8bits（指数位） 23bits（尾数位）
精度是由尾数的位数来决定的
<span class="token number">2</span><span class="token operator">^</span><span class="token number">23</span> <span class="token operator">=</span> <span class="token number">8388608</span>，一共七位
这意味着最多能有<span class="token number">7</span>位有效数字，第<span class="token number">7</span>位是<span class="token number">8</span><span class="token punctuation">,</span> 保证不了<span class="token punctuation">,</span> 所以绝对能保证的为<span class="token number">6</span>位
所以<span class="token keyword">float</span>的精度为<span class="token number">6</span><span class="token operator">~</span><span class="token number">7</span>位有效数字；
</code></pre> 
<p>C#里的long和Int64一样</p> 
<h3><a id="_296"></a>分辨率</h3> 
<p>我们说的视频1080p, 是指视频长宽1920×1080 = 2073600个像素, 也就是我们常说的: 手机拍照200万像素<br> 2k 是 2560x1440<br> 4k 是 3840x2160<br> 注意: 以上, 表示在16:9的宽高比时的数值</p> 
<h3><a id="bpsBps_302"></a>bps和Bps</h3> 
<p>bps: bits per second, 传的是bit, 就是位, 就是0101010111<br> 注意: 在计算传输速率时是以1000进的, 即1M bps = 1000K bps</p> 
<p>Bps: Byte per second, 字节, 1M Bps = 1024K Bps<br> 2个G的葫芦娃动画片, 就是2G Byte</p> 
<p>你家的网速是10M<br> 10M就是说10 000 000位每秒, 而1个字节是8位, 10 000 000 ÷ 8 = 1 250 000字节<br> 所以实际下载速度仅仅是每秒1.25M</p> 
<p>那个10M是唬你的, 是10101000111000的传输速度<br> 你真正关心的是2个多G的葫芦娃要下载多久, 这里的每秒1.25M才是你需要的</p> 
<h3><a id="K_M_G_T__316"></a>K M G T …</h3> 
<p>1KB (Kilobyte 千字节)=1024B，<br> 1MB (Megabyte 兆字节 简称“兆”)=1024KB，<br> 1GB (Gigabyte 吉字节 又称“千兆”)=1024MB，<br> 1TB (Trillionbyte 万亿字节 太字节)=1024GB，其中1024=2^10 ( 2 的10次方)，<br> 1PB（Petabyte 千万亿字节 拍字节）=1024TB，<br> 1EB（Exabyte 百亿亿字节 艾字节）=1024PB，<br> 1ZB (Zettabyte 十万亿亿字节 泽字节)= 1024 EB,<br> 1YB (Jottabyte 一亿亿亿字节 尧字节)= 1024 ZB,<br> 1BB (Brontobyte 一千亿亿亿字节)= 1024 YB.<br> 抄自: <a href="https://xuexi.zqnf.com/844056.html" rel="nofollow">https://xuexi.zqnf.com/844056.html</a></p> 
<h3><a id="const__readonly_328"></a>const 和 readonly的区别</h3> 
<p>readonly可以用构造函数赋值</p> 
<h3><a id="url_331"></a>拼url</h3> 
<p>string str = “戴拿”;<br> string.Format(“{0}”, str);<br> 那如果我想拼一个"{“进去呢, 会报错怎么办?<br> 那就得打上”{<!-- -->{", 就表示{<!-- --></p> 
<p>空格表示为%20, 双引号表示为%22<br> <a href="https://blog.csdn.net/superit401/article/details/78052965">https://blog.csdn.net/superit401/article/details/78052965</a></p> 
<h3><a id="IListList_340"></a>IList和List的区别:</h3> 
<p>List, 她里面有Sort, CopyTo, FindIndex, Reverse, Contains, ForEach, Add等等一堆方法</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IList<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IList</span><span class="token punctuation">,</span> <span class="token class-name">ICollection</span><span class="token punctuation">,</span> <span class="token class-name">IEnumerable</span></span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//(方法太多就不贴了, 想看? 在List身上按F12进去看)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>而IList, 她只有以下功能</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IList<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICollection<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IEnumerable</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token return-type class-name">T</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">IndexOf</span><span class="token punctuation">(</span><span class="token class-name">T</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">,</span> <span class="token class-name">T</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RemoveAt</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>人家List会的本领: 排序, 翻转, 复制, 判断包含等, IList全都不会, 她只能用来存放数组, 只是一个可怜的容器<br> 既然IList远不如List强大, 那什么情况下用IList而不用List呢?<br> 答: 需要节省的时候</p> 
<h3><a id="UI_362"></a>极端的UI优化</h3> 
<p>用全屏UI时, 禁用世界相机<br> 非全屏UI时, 用世界相机截屏, 把截图铺在UI底下做背景, 然后禁用世界相机<br> (我记得生化危机5里, 一章结束后, 画面会定格, 然后出结算界面, 估计就是这样弄的)</p> 
<p>不需要进行点击交互的组件，取消勾选Raycast Target</p> 
<p>CullTransparentMesh: 新版本勾上这个, 图片的Alpha为0时不会Overdraw (比如做"点击屏幕任意位置"的时候)</p> 
<h3><a id="StaticClear_371"></a>Static的列表不用的时候记得Clear()</h3> 
<p>一直占内存<br> 你下次用的时候, 里面存的东西还在里面躺着</p> 
<h3><a id="Json_375"></a>Json的读取和保存</h3> 
<p>方法非常多<br> 1.用JsonUtility<br> 注意!<br> 要用[System.Serializable]特性, 序列化才能转成Json;<br> 因为是轻量型, 不能读存多维数组<br> 用法: JsonUtility.FromJson();</p> 
<p>2.用Newtonsoft.Json;<br> 要下载dll<br> 可解析多维数组, 形如<code>List&lt;List&lt;int&gt;&gt;</code></p> 
<pre><code class="prism language-csharp">	<span class="token keyword">using</span> <span class="token namespace">Newtonsoft<span class="token punctuation">.</span>Json</span><span class="token punctuation">;</span>
	<span class="token comment">//类存为Json</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SaveJson</span><span class="token punctuation">(</span><span class="token class-name">MapData</span> mapData<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>File<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span><span class="token function">JsonPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            File<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token function">JsonPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name"><span class="token keyword">string</span></span> json <span class="token operator">=</span> JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span>mapData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        File<span class="token punctuation">.</span><span class="token function">WriteAllText</span><span class="token punctuation">(</span><span class="token function">JsonPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Debug.Log("保存成功");</span>
    <span class="token punctuation">}</span>
    
	<span class="token comment">//读取Json</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">MapData</span> <span class="token function">ReadJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>File<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span><span class="token function">JsonPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"文件不存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name"><span class="token keyword">string</span></span> json <span class="token operator">=</span> File<span class="token punctuation">.</span><span class="token function">ReadAllText</span><span class="token punctuation">(</span><span class="token function">JsonPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MapData</span> mapData <span class="token operator">=</span> JsonConvert<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeserializeObject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MapData<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> mapData<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2D_Sprite_417"></a>改变2D Sprite的颜色</h3> 
<pre><code class="prism language-csharp">block<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SpriteRenderer<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>color <span class="token operator">=</span> Color<span class="token punctuation">.</span>red<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_422"></a>物体从相机中消失了</h3> 
<p>看相机的Layer有没有取消勾选<br> 看相机有没有勾选OcclusionCulling(遮挡剔除)</p> 
<h3><a id="yield_426"></a>自定义yield</h3> 
<p>很好的文章:<br> <a href="https://blog.csdn.net/qq_31967569/article/details/83305415">https://blog.csdn.net/qq_31967569/article/details/83305415</a></p> 
<h3><a id="0__4_430"></a>一个方法0个引用, 但是在执行, 有4种情况</h3> 
<p>0 是生命周期方法<br> 1 用了Invoke(“方法名”, 1f); 这时候Ctrl＋F搜一下方法名就行了<br> 2 直接把方法挂在物体上了, 找吧<br> 3 方法挂在了动画的Event上, 今天遇到这个坑, 这时候Animation就变成了ReadOnly, 但是Event仍然可以在模型上找到那个动画的Event来改</p> 
<h3><a id="_436"></a>代码调整画质</h3> 
<pre><code class="prism language-csharp"><span class="token comment">//设置画质</span>
<span class="token class-name"><span class="token keyword">int</span></span> qualityLevel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//即Very Low</span>
QualitySettings<span class="token punctuation">.</span><span class="token function">SetQualityLevel</span><span class="token punctuation">(</span>qualityLevel<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Get画质</span>
QualitySettings<span class="token punctuation">.</span><span class="token function">GetQualityLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="Hierarchy_ListGameObject_445"></a>在Hierarchy面板中, 给一个List添加多个GameObject</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> equips<span class="token punctuation">;</span>
</code></pre> 
<p>Hierarchy面板中就会显示这个list</p> 
<p>你的做法: 在Size输入10, 然后把10个物体一个一个依次拖进来, 对吧?<br> 简单方法: 先锁住这个Hierarchy, 直接选中多个物体, 一次性拖进list中</p> 
<h3><a id="Switch__454"></a>Switch 我赌很多人不知道这个</h3> 
<pre><code class="prism language-csharp">		<span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
            	<span class="token comment">//这里不写break;</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token comment">//0和1都会执行Do();</span>
                <span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="ApplicationOpenURL__472"></a>Application.OpenURL( );</h3> 
<p>↓打开浏览器并打开百度页, 这个↓"http://"加不加都行</p> 
<pre><code class="prism language-csharp">Application<span class="token punctuation">.</span><span class="token function">OpenURL</span><span class="token punctuation">(</span><span class="token string">"http://www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>↓打开E盘</p> 
<pre><code class="prism language-csharp">Application<span class="token punctuation">.</span><span class="token function">OpenURL</span><span class="token punctuation">(</span>@"file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>E<span class="token punctuation">:</span>\"<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>↓打开手机微信</p> 
<pre><code class="prism language-csharp">Application<span class="token punctuation">.</span><span class="token function">OpenURL</span><span class="token punctuation">(</span><span class="token string">"weixin://"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_487"></a>实现相机拍照的几种思路</h3> 
<p>鼠标点击, 射线检测<br> OnVisible(); 判断是否在视野中<br> Vector3.Diatance(); 判断距离<br> Vector3.Angle(); 判断角度<br> Physics.BoxCastAll(); 发一个方形射线, 在打到的数组里遍历查找</p> 
<h3><a id="2_1_2_494"></a>一个方法里打了2个断点, 结果第1个走了, 第2个竟然没走</h3> 
<p>你第2个断点打到 if 里去了, 而它走的 else</p> 
<h3><a id="2_497"></a>有个办法可以让你敲代码的速度提升2%</h3> 
<p>扣掉键盘上的"Caps Lock"和"Insert"键</p> 
<h3><a id="struct_500"></a>struct是值类型</h3> 
<p>由于是存在栈中, 所以比class快<br> 小体积的玩意就用struct<br> 比如Vector3就是个struct</p> 
<h3><a id="static__const_505"></a>static 和 const</h3> 
<p>static: 静态变量, 永久占内存, 存的数据可改<br> const: 常亮, 不可改</p> 
<h3><a id="mono_509"></a>继承mono</h3> 
<p>只有继承mono, 才能挂在场景里的物体上;<br> 继承mono, 就不能用构造函数了;<br> 为了性能, 能不继承就不继承;<br> 继承mono的类, 类名 和 文件名 要同名<br> (比如, 你有一个Mgr.cs文件, 里面必须要写有 class Mgr : MonoBehaviour{})</p> 
<p>什么时候需要继承:<br> 需要用到Awake Update OnEnable OnTriggerEnter等方法时;</p> 
<h3><a id="_519"></a>录制包含子物体的动画</h3> 
<p>如果想录的动画包括子物体的移动旋转等, 要确保这个子物体身上没有Animator</p> 
<h3><a id="_522"></a>正则</h3> 
<p>把所有 “不是数字的字符” 都换成 “.”</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">"1,2,的撒发三份122,提问2,4,为前提"</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> result <span class="token operator">=</span> Regex<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">@"[^0-9]+"</span><span class="token punctuation">,</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出1.2.122.2.4</span>
</code></pre> 
<h3><a id="_531"></a>我竟然不知道这些方法???</h3> 
<pre><code class="prism language-csharp">transform<span class="token punctuation">.</span><span class="token function">SetPositionAndRotation</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">,</span> Quaternion<span class="token punctuation">)</span><span class="token punctuation">;</span>
dotween<span class="token punctuation">.</span><span class="token function">SetDelay</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
transform<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Undo<span class="token punctuation">.</span><span class="token function">RecordObject</span><span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Editor</span>
list<span class="token punctuation">.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span><span class="token class-name">T</span> item<span class="token punctuation">)</span>
Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传一个欧拉角进去</span>
Physics2D<span class="token punctuation">.</span>queriesStartInColliders <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//2D射线不检测自身</span>
<span class="token comment">//还有, 2D射线不需要Ray</span>
dotween<span class="token punctuation">.</span><span class="token function">SetUpdate</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使DOTween不受TimeScale的影响</span>
dotween<span class="token punctuation">.</span><span class="token function">OnUpdate</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//tween过程中每帧执行DoSomething();</span>
CustomYieldInstruction <span class="token comment">//继承此类能实现自定义的yield</span>
list<span class="token punctuation">.</span><span class="token function">TrueForAll</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回bool</span>
</code></pre> 
<h3><a id="_547"></a>类型转化</h3> 
<p>↓类型一致的转化, 比如数值 float, int, double, enum等, 也就是"强制转换"</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">float</span></span> f <span class="token operator">=</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>f<span class="token punctuation">;</span><span class="token comment">//截取整数部分</span>
</code></pre> 
<p>↓类型不同的转化, 得用方法</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//基本上什么类型都能转成int</span>
<span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只能把string转成int</span>
</code></pre> 
<h3><a id="int__int__float_560"></a>int 除 int 怎么得到一个 float</h3> 
<pre><code class="prism language-csharp"><span class="token comment">//↓像这样, 把其中一个数字强转成float就行啦</span>
<span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span>
<span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token number">2</span>

<span class="token comment">//↓没必要2个数字都转</span>
<span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token number">2</span>
</code></pre> 
<p>注意: 1f和1.0f都是float, 而1.0是double, 不是float,</p> 
<h3><a id="ArrayConvertAll__571"></a>Array.ConvertAll, 数组批量操作</h3> 
<p>比for简洁</p> 
<p>↓把string数组转化为int数组</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> strings <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"   2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> ints <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">ConvertAll</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span>Parse<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>↓所有string, Trim();一下</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> strings <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"   2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
strings <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">ConvertAll</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="Generate_Mip_Maps_586"></a>纹理图片勾选Generate Mip Maps</h3> 
<p>会有类似LOD的效果, 离远了就看不到纹理了<br> 内存会增加约1/3<br> 为什么是1/3呢, 看这个视频, 第47分钟:<br> <a href="https://www.bilibili.com/video/BV1X7411F744?p=9" rel="nofollow">现代计算机图形学入门</a></p> 
<h3><a id="Grid_592"></a>不同宽度的Grid子物体</h3> 
<p>项目要求是ABCD(可能还有EF)答题选项, 动态加载<br> ↓要是都是这样的题型就简单了</p> 
<pre><code class="prism language-csharp">口 A<span class="token punctuation">.</span>我是选项A
口 B<span class="token punctuation">.</span>我是选项B
口 C<span class="token punctuation">.</span>我是选项C
口 D<span class="token punctuation">.</span>我是选项D
</code></pre> 
<p>先制作宽度一行的Toggle预制体</p> 
<pre><code class="prism language-csharp">口 A<span class="token punctuation">.</span>我是选项A
</code></pre> 
<p>再弄个ScrollView在Content上挂上ContentSizeFitter以适应ABCD(EF), 再挂上VerticalLayoutGroup均匀排布就行了</p> 
<p>↓但是题型有这样的</p> 
<pre><code class="prism language-csharp">口 A<span class="token punctuation">.</span>我是选项A
口 B<span class="token punctuation">.</span>我是选项B<span class="token punctuation">,</span> 我就是要比别的选项长<span class="token punctuation">,</span> 别的选项只占一行<span class="token punctuation">,</span> 而我就是要占好几行<span class="token punctuation">,</span>
哎<span class="token punctuation">,</span> 我就是特立独行<span class="token punctuation">,</span> 我就是格外一个样<span class="token punctuation">,</span> 你的VerticalLayoutGroup失效了<span class="token punctuation">,</span>
你能拿我怎么办<span class="token punctuation">,</span> 我就是我是颜色不一样的烟火
口 C<span class="token punctuation">.</span>我是选项C
口 D<span class="token punctuation">.</span>我是选项D
</code></pre> 
<p>众所周知, LayoutGroup的子物体挂上ContentSizeFitter是不生效的<br> 所以权宜之计是将Toggle预制体宽度调宽</p> 
<pre><code class="prism language-csharp">口 A<span class="token punctuation">.</span>我是选项A


</code></pre> 
<p>效果如下, 很不好看</p> 
<pre><code class="prism language-csharp">口 A<span class="token punctuation">.</span>我是选项A


口 B<span class="token punctuation">.</span>我是选项B<span class="token punctuation">,</span> 我就是要比别的选项长<span class="token punctuation">,</span> 别的选项只占一行<span class="token punctuation">,</span> 而我就是要占好几行<span class="token punctuation">,</span>
哎<span class="token punctuation">,</span> 我就是特立独行<span class="token punctuation">,</span> 我就是格外一个样<span class="token punctuation">,</span> 你的VerticalLayoutGroup失效了<span class="token punctuation">,</span>
你能拿我怎么办<span class="token punctuation">,</span> 我就是我是颜色不一样的烟火
口 C<span class="token punctuation">.</span>我是选项C


口 D<span class="token punctuation">.</span>我是选项D


</code></pre> 
<p>解决方法:<br> 把Toggle预制体挂在一个Text下, 然后把这个Text作为预制体, Text上挂ContentSizeFitter是不会失效的<br> 这个Text呢, 就用来取代Toggle中Label, 但是Label不要删, 只把字删掉就好<br> 要是删了的话, 点击Toggle的文字部分就无效了, 只有点它前面的小方框才有效</p> 
<h3><a id="GetComponentsInChildrenTrue_643"></a>GetComponentsInChildren(True);</h3> 
<p>子物体必须是活着的, 不然get不到<br> 除非, 在参数里面加上 (true)</p> 
<pre><code class="prism language-csharp"><span class="token generic-method"><span class="token function">GetComponentsInChildren</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="JSON_650"></a>JSON数组</h3> 
<p>最后一个元素后面 <strong><strong>不 ! 加 ! 逗 ! 号 !</strong></strong></p> 
<h3><a id="_Hierarchy_653"></a>总是不小心点到场景的一棵树上, 点出一大长串的Hierarchy?</h3> 
<p><s>把这个脚本, 挂在场景的最高父物体上<br> 不论是点到了窗子还是桌子, 选中的都是场景的最高父物体</s></p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SelectionBase</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IAmAncestor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> 
<p>↑上面的方法, 不行, 下面的方法, 行↓<br> <img src="https://images2.imgbox.com/8e/c6/TTdZcLBM_o.png" alt="在这里插入图片描述"><br> 给所有不想点的东西(树啊房子啊)的layer设置成XXX<br> 然后点开图中这个Layers<br> 再点XXX后面的小锁<br> 这样就再也点不到场景中的树和房子了</p> 
<h3><a id="_671"></a>手性翻转(镜像)模型</h3> 
<p>改变模型的Scale X Y Z的其中一个为负数就行了</p> 
<h3><a id="_674"></a>协程非正常停止</h3> 
<p>带有协程的脚本.enabled = false; 协程会照常运行<br> 带有协程脚本的gameObject.SetActive(false); 协程全部停止，即使再激活, 协程也不会继续执行</p> 
<h3><a id="C_678"></a>C#方法传入多个参数</h3> 
<p>用params关键字</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Speak</span><span class="token punctuation">(</span><span class="token keyword">params</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
		persons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">DoAnim</span><span class="token punctuation">(</span><span class="token string">"Speak"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//用的时候:</span>
<span class="token function">Speak</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Speak</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="Action__693"></a>判断空Action 及其简化</h3> 
<p>↓这样写, 如果你没传参数进来, 会报空</p> 
<pre><code class="prism language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DontCheckNull</span><span class="token punctuation">(</span><span class="token class-name">Action</span> action <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↓所以需要判断一下空</p> 
<pre><code class="prism language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoCheckNull</span><span class="token punctuation">(</span><span class="token class-name">Action</span> action <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以简化为↓ (C#6可以, C#4不行)</p> 
<pre><code class="prism language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoCheckNull</span><span class="token punctuation">(</span><span class="token class-name">Action</span> action <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	action<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>后来我发现几乎所有的判空都能这样写: 加个问号</p> 
<h3><a id="_720"></a>数值型不能为空</h3> 
<p>因为它在栈上, 怎么会空呢, 除非…<br> 在声明的时候这样写:</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> a<span class="token punctuation">;</span>
</code></pre> 
<p>int? 表示可空类型，就是一种特殊的值类型，它的值可以为null<br> 用于给变量设初值得时候，给变量（int类型）赋值为null，而不是0<br> int?? 用于判断并赋值，先判断当前变量是否为null，如果是就可以赋个新值，否则跳过</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>原文地址: <a href="https://www.cnblogs.com/firstcsharp/archive/2011/12/11/2283797.html" rel="nofollow">https://www.cnblogs.com/firstcsharp/archive/2011/12/11/2283797.html</a></p> 
<h3><a id="UI3D_738"></a>鼠标点在UI上还是3D物体上</h3> 
<p>用EventSystem.current.IsPointerOverGameObject()</p> 
<pre><code class="prism language-csharp"><span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>EventSystem<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">IsPointerOverGameObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//点在物体上了</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> EventSystem<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">IsPointerOverGameObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//点在UI上了</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_751"></a>给按钮添加一次性委托</h3> 
<p>需求:<br> 一个小弹窗, 它的固有点击事件为: 自身窗体消失, 还可能有别的点击事件, 且这些点击事件仅生效一次</p> 
<p>开搞:<br> ↓一开始我是这样写的, 很蠢, 不管有没有委托, 都全部移除, 再添加上消失事件和自定义的委托</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowTip</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> tipText<span class="token punctuation">,</span> <span class="token class-name">Action</span> action <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    textTip<span class="token punctuation">.</span>text <span class="token operator">=</span> tipText<span class="token punctuation">;</span>
    panelTip<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    btnTip<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">RemoveAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btnTip<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> panelTip<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        btnTip<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↓改进了一下, 用了EventTrigger, 但是还是很蠢</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowTip</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> tipText<span class="token punctuation">,</span> <span class="token class-name">Action</span> action <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    textTip<span class="token punctuation">.</span>text <span class="token operator">=</span> tipText<span class="token punctuation">;</span>
    panelTip<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        btn<span class="token punctuation">.</span>MyBtnClick <span class="token operator">+=</span> action<span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span>MyBtnClick <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> btn<span class="token punctuation">.</span>MyBtnClick <span class="token operator">-=</span> action<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↓其实明明可以更简单的</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowTip</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> tipText<span class="token punctuation">,</span> <span class="token class-name">Action</span> action <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    textTip<span class="token punctuation">.</span>text <span class="token operator">=</span> tipText<span class="token punctuation">;</span>
    panelTip<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    btn<span class="token punctuation">.</span>MyBtnClick <span class="token operator">=</span> action<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_799"></a>判断物体是否在视野内</h3> 
<p>注意1 : 在Game面板中可见, 或在Scene面板中可见, 都会触发本方法<br> 注意2 : 即使把Mash Fitter设置为None, 使之不可见, 仍会触发本方法</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">bool</span></span> isVisiable<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnBecameVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    isVisiable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_810"></a>相机穿模</h3> 
<p>方法1: 调小相机的Near Clip Plane<br> 方法2: 如果是自己手里的枪穿模, 那就另开一个相机, 只看枪, 相机的Clear Flags改为Depth only<br> 方法3: 在相机上添加碰撞体</p> 
<h3><a id="_815"></a>获取当前场景的名字</h3> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span></span> sceneName <span class="token operator">=</span> SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_820"></a>生命周期</h3> 
<p>刚才犯了一个很傻逼的问题:<br> 在Start里声明, 在OnEnable里调用, 结果报空了;<br> 生命周期啊生命周期, 先OnEnable再Start;</p> 
<p>注意:<br> 在同一个类里, 是先OnEnable再Start;<br> 但是在不同类里, 顺序是不确定的, 举个例子:<br> 触发顺序可能为:<br> A类的OnEnable, B类的OnEnable, A类的Start, B类的Start<br> 也可能为:<br> A类的OnEnable, A类的Start, B类的OnEnable, B类的Start<br> (A的Start可能会排在B的OnEnable前面)</p> 
<h3><a id="Canvas__Space_Camera_834"></a>Canvas - Space Camera</h3> 
<p>实现拖拽功能, 让ret跟着鼠标走, 遇到的坑:</p> 
<pre><code class="prism language-csharp">ret<span class="token punctuation">.</span>position <span class="token operator">=</span> Input<span class="token punctuation">.</span>mousePosition<span class="token punctuation">;</span>
</code></pre> 
<p>↑这样不行, ret的移动幅度特别大.</p> 
<pre><code class="prism language-csharp">ret<span class="token punctuation">.</span>parent <span class="token operator">=</span> mother<span class="token punctuation">;</span><span class="token comment">//mother是一个点,锚点在左下角</span>
ret<span class="token punctuation">.</span>localPosition <span class="token operator">=</span> Input<span class="token punctuation">.</span>mousePosition<span class="token punctuation">;</span>
</code></pre> 
<p>↑这样才行<br> 960 540(适配分辨率), 能完美运行<br> 切换成1920 1080的时候, 鼠标在左下角, ret也在左下角, 此时没错<br> 但当鼠标移动到屏幕中间时, ret已经跑到右上角去了, ret的移动距离是鼠标的2倍<br> 解决方法:</p> 
<pre><code class="prism language-csharp">ret<span class="token punctuation">.</span>localPosition <span class="token operator">=</span> Input<span class="token punctuation">.</span>mousePosition <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">540f</span> <span class="token operator">/</span> Screen<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>乘以(除以)屏幕的放大(缩小)比例, 就行了</p> 
<h3><a id="_854"></a>映射</h3> 
<p>项目要求是15个模块, 不同的场景, 不同的人物, 不同的剧情, 相同点都是对话和播动画. 我的思路是做3个类</p> 
<p>1.Data类存数据;<br> 2.SceneModel存放场景里的人物和物品和基本方法;<br> 3.SceneControl主控制器, 控制事件流程; 然后分15个子类</p> 
<p>15个子类, 分别是Scene0Control, Scene1Control, Scene2Control…Scene14Control; 然后用映射方法, 通过不同的类名, 挂到不同的场景中</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> State <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name">SceneControl</span> sceneControl <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SceneControl<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> ctrlClassName <span class="token operator">=</span> <span class="token string">"Scene"</span> <span class="token operator">+</span> State<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"Control"</span><span class="token punctuation">;</span>
sceneControl <span class="token operator">=</span> Activator<span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span>Type<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span>ctrlClassName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">SceneControl</span><span class="token punctuation">;</span>
</code></pre> 
<p>呃, 失败了…还是 Switch 吧<br> 有空再研究…</p> 
<hr> 
<p>我研究回来了<br> 因为脚本是挂在物体上的, 不需要用Activator.CreateInstance, 只要拿到Type就行了</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">ProcessMgr</span> <span class="token function">CreateByName</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> module<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">Type</span> type <span class="token operator">=</span> Type<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token string">"ProcessMgr"</span> <span class="token operator">+</span> module<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">(</span><span class="token string">"ProcessMgr"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddComponent</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">ProcessMgr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Editor_883"></a>Editor文件夹</h3> 
<p>不需要打包的脚本放入名字是Editor的文件夹下, Editor文件夹放哪都行, 有很多叫做Editor的文件夹也行</p> 
<h3><a id="foreach_886"></a>foreach</h3> 
<p>只能读, 不能改, 而且会产生垃圾, (理论上应该尽可能的少用)</p> 
<h3><a id="Unity_889"></a>Unity的输入框打不了字</h3> 
<p>有可能是它不能输入全角字符<br> 也有可能是发布的WebGL版, 是打不了中文的<br> 还有WebGL版要把字体全部改为中文字体, 不然字体不显示</p> 
<h3><a id="Text_894"></a>Text我不想换行但它自己换行了</h3> 
<p>因为你打半角空格的时候, Unity以为你打的是英语单词, 为了不让单词从中间切开, 它就自动换行了;<br> 改成全角空格就好了;</p> 
<h3><a id="OnMouseEnter_898"></a>OnMouseEnter被挡住</h3> 
<p>项目需求是"光线"照射到"物体A"的时候, “物体A"显示出来, 然后再对"物体A"进行操作;<br> 所以我用了OnTriggerEnter和OnTriggerExit;<br> 以上都正常, 然后我在物体A上用OnMouseEnter, 方法没有用, 因为"物体A"被"光线"遮住了;<br> 解决方法, 把"光线"的Layer改成"IngoneRayCast”;</p> 
<h3><a id="_904"></a>字符串比较(忽略大小写)</h3> 
<p>s1.Equals(s2, StringComparison.OrdinalIgnoreCase)</p> 
<h3><a id="_907"></a>单例</h3> 
<p>不要在一个单例的Awake里使用另一个单例.<br> 比如:<br> 在A单例的Awake中使用B单例. 但是B还没Awake, 此时B单例为null, 报空;<br> 解决方法:</p> 
<ol><li>B在Awake时初始化. A在Start里使用B.instance;</li><li>单例管理, 注意Awake的顺序;</li><li>不滥用单例, 单例是全局的, 使用过多的单例不利于解耦</li></ol> 
<h3><a id="forAddListener_916"></a>在for里AddListener</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↑这样btns里的每个btn打印出来都是"10";</p> 
<pre><code class="prism language-csharp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name"><span class="token keyword">int</span></span> temp <span class="token operator">=</span> i<span class="token punctuation">;</span>
	btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">print</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↑这样打印出来才是想要的0,1,2,3,4,5,6,7,8,9</p> 
<hr> 
<p>额, 这里有个很奇怪的地方我一直想不通, 哪位胸大的来分析一下:<br> ↓在C#里这样写输出3 3 3</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	    <span class="token class-name">List<span class="token punctuation">&lt;</span>Action<span class="token punctuation">&gt;</span></span> actions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Action<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    
	    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{<!-- --></span>
	        actions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	    
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> actions<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{<!-- --></span>
	        actions<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↓而在Lua里同样写法, 输出的却是1 2 3</p> 
<pre><code class="prism language-lua">actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span>
    actions<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">#</span>actions <span class="token keyword">do</span>
   actions<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre> 
<p>妈呀, 没想到, 1年之后, 我被↑这个问题坑到了<br> 我是这样写的↓, 以为会输出123, 没想到输出333</p> 
<pre><code class="prism language-lua">actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">do</span>
    a <span class="token operator">=</span> i
    actions<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">#</span>actions <span class="token keyword">do</span>
   actions<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre> 
<h3><a id="VSstring_992"></a>VS的中文string输出成乱码���</h3> 
<p>工具 &gt; 自定义 &gt; 命令 &gt; 添加命令 &gt; 文件 &gt; 高级保存选项;<br> <img src="https://images2.imgbox.com/ec/92/MWmJfjFN_o.png" alt="高级保存选项"><br> 然后关闭, 再点击高级保存选项, 把编码改成UTF-8(无签名)<br> <img src="https://images2.imgbox.com/3a/61/ygW717JK_o.png" alt="UTF-8"></p> 
<h3><a id="txt_997"></a>txt中用的空格</h3> 
<p>不间断空格\u00A0 让一个单词在结尾处不会换行显示<br> 半角空格(英文符号)\u0020<br> 全角空格(中文符号)\u3000</p> 
<h3><a id="mp3WebGL_1002"></a>.mp3格式打包WebGL不能播放</h3> 
<p>不知道为什么, 有的mp3能播, 有的mp3不能播, 可能是mp3的问题(怀疑是假mp3格式)<br> <s>方法就是转换成wav格式</s><br> 正确方法是要在Unity里调mp3的WebGl设置</p> 
<h3><a id="CameraSpaceUI_1007"></a>CameraSpaceUI</h3> 
<p>记得给物体用特定的layer<br> 相机只看这个layer, 别的不看</p> 
<h3><a id="_1011"></a>录音</h3> 
<pre><code class="prism language-csharp">audioClip <span class="token operator">=</span> Microphone<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> RECORD_TIME<span class="token punctuation">,</span> RECORD_RATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>RECORD_TIME: 录音时长<br> RECORD_RATE: 录音的采样率, 填8000 - 44100</p> 
<h3><a id="string_1017"></a>常用string方法</h3> 
<pre><code class="prism language-csharp"><span class="token comment">//取前 i个字符</span>
str<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> str<span class="token punctuation">.</span>Length <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//去除所有的空格</span>
str<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//去除头尾的空格和类空格字符</span>
str<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//去除回车</span>
str<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span><span class="token string">"\r"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>↓正则表达式↓ 不用记忆这些东西, 肯定忘, 用的时候再看就行<br> <a href="https://www.runoob.com/csharp/csharp-regular-expressions.html" rel="nofollow">https://www.runoob.com/csharp/csharp-regular-expressions.html</a></p> 
<h3><a id="_1032"></a>加特性[]</h3> 
<p>↓给本物体添加AudioSource组件, 省的你忘了挂上</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequireComponent</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span><span class="token type-expression class-name">AudioSource</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre> 
<p>↓提示本方法已过时, 但方法依然可以用</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Obsolete</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"已过时, 请使用NewMethod"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre> 
<p>↓true表示已弃用, 方法不能用了</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Obsolete</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"已弃用, 请使用NewMethod"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre> 
<p>↓这样一来这个方法就不跑了, 除非在最上面(using XXX上面)写上:#define IsTest;</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Conditional</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"IsTest"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre> 
<p>↓只能挂一个本脚本, 不允许挂多个</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DisallowMultipleComponent</span></span><span class="token punctuation">]</span>
</code></pre> 
<p>↓会出现在菜单栏的Component &gt; Test</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AddComponentMenu</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Test"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="Unity_1062"></a>Unity打包路径里面不要有中文!</h3> 
<p>否则报错</p> 
<h3><a id="_1065"></a>时间格式</h3> 
<p>正确格式: <strong>yyyy-MM-dd HH-mm-ss-ffff</strong></p> 
<pre><code class="prism language-csharp">System<span class="token punctuation">.</span>DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-ddHH-mm-ss-ffff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>Y按星期算年, 会不准, 原因我忘了<br> M是月, m是分钟, 这个没有大小写的转换<br> d是当月的天数(2月1日), D是一年中的天数(32天)<br> H是24小时制, h是12小时制<br> s是秒, S是毫秒</p> 
<p>另外的还有w之类的, 和星期相关的, 对咱们用处不大, 估计对老外有用, 比如母亲节是:五月的第二个星期天</p> 
<h3><a id="FBX_1078"></a>导入的FBX人物动画双脚乱动</h3> 
<p>因为unity把动画压缩了<br> 解决方法:Animation:Anim.Compression改成off (不压缩动画)<br> 或者下面3个error改小</p> 
<h3><a id="UI_1083"></a>所有的UI按钮失灵</h3> 
<p>不要慌, 可能只是因为你的场景里没有EventSystem.<br> 遇到好几次了, 我怎么就记不住呢?<br> 还有别的可能:<br> 1.被另一个透明panel覆盖住了<br> 2.你Canvas上没挂Graphic Raycaster(毕竟Unity的UI本来就用的是射线检测)<br> 3.你用射线检测写的按钮按下, 但按钮上没挂Collider<br> 4.你用的Space World模式的Canvas, 摄像机的Tag层不是Main Camera</p> 
<h3><a id="UI_1092"></a>更换UI的图片</h3> 
<pre><code class="prism language-csharp"><span class="token class-name">Sprite</span> sp <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">"Die"</span><span class="token punctuation">,</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span><span class="token type-expression class-name">Sprite</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">Sprite</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>sprite<span class="token operator">=</span>sp<span class="token punctuation">;</span>
</code></pre> 
<p>图片的载入一定要加上typeof (Sprite), 不然没有用</p> 
<h3><a id="OnDisable_1099"></a>OnDisable()</h3> 
<p>不要像下面这样, 在OnDisable()中给子物体换爸妈, 会报错</p> 
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> transform<span class="token punctuation">.</span>childCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            transform<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetParent</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="UGUIHeight_Width_1111"></a>拿到一个UGUI的Height 或者Width</h3> 
<p>这样是没用的:</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">float</span></span> x <span class="token operator">=</span> joy<span class="token punctuation">.</span>localScale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
</code></pre> 
<p>这样才行:(仅锚点不分开的时候)</p> 
<pre><code class="prism language-csharp"><span class="token class-name">RectTransform</span> rtf <span class="token operator">=</span> joy<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RectTransform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">float</span></span> x <span class="token operator">=</span> rtf<span class="token punctuation">.</span>sizeDelta<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
</code></pre> 
<p>这样也行:(锚点分开也行)</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">float</span></span> x <span class="token operator">=</span> rtf<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">float</span></span> y <span class="token operator">=</span> rtf<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
</code></pre> 
<p>设置UI的宽:</p> 
<pre><code class="prism language-csharp">rtf<span class="token punctuation">.</span><span class="token function">SetSizeWithCurrentAnchors</span><span class="token punctuation">(</span>RectTransform<span class="token punctuation">.</span>Axis<span class="token punctuation">.</span>Horizontal<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>得到中心点:</p> 
<pre><code class="prism language-csharp"><span class="token class-name">Vector2</span> pivot <span class="token operator">=</span> rtf<span class="token punctuation">.</span>pivot<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="UI_1134"></a>UI中用到的富文本</h3> 
<p>要勾选Text组件的"Rich Text"选项:</p> 
<pre><code class="prism language-csharp"><span class="token comment">//将"奥特曼"粗体显示</span>
我是<span class="token operator">&lt;</span>b<span class="token operator">&gt;</span>奥特曼<span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">&gt;</span>
<span class="token comment">//斜体</span>
我是<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>奥特曼<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
<span class="token comment">//字体大小</span>
我是<span class="token operator">&lt;</span>size<span class="token operator">=</span><span class="token number">14</span><span class="token operator">&gt;</span>奥特曼<span class="token operator">&lt;</span><span class="token operator">/</span>size<span class="token operator">&gt;</span>
<span class="token comment">//字体颜色</span>
我是<span class="token operator">&lt;</span>color<span class="token operator">=</span>red<span class="token operator">&gt;</span>奥特曼<span class="token operator">&lt;</span><span class="token operator">/</span>color<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="DOTween_1147"></a>DOTween的坑</h3> 
<p>tw.PlayBackwards(); 并不会触发tw.OnComplete();</p> 
<p>UI.DOMove()<br> 项目需求: UI移动到指定位置, 而且需要能够切换窗口和全屏模式:<br> 常用的UI.DOMove(), 移动到new Vector3(1,1,1)就不行了, 因为屏幕分辨率变了之后, Vector3(1,1,1)并不会去自适应屏幕位置;<br> 移动到Scene.height+UI自身长度也不行, 因为屏幕一变, 自身长度也是变的;<br> 所以我放了一些空点在UI里, 这些点是有屏幕适配的, 直接DOMove移动到该点的坐标就行了<br> 这里的坑是: 点的pivot要和被移动的UI的pivot一致才行, 锚点定位是没关系的, 上下左右定哪都行不影响, 但pivot一定要一毛一样;</p> 
<h3><a id="2List_1157"></a>比较2个List</h3> 
<p>内容一样, 顺序也一样:</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span><span class="token function">SequenceEqual</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>内容一样, 顺序可以不一样:</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>Count <span class="token operator">==</span> list2<span class="token punctuation">.</span>Count <span class="token operator">&amp;&amp;</span> list1<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> <span class="token operator">!</span>list2<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="Unitytxt_1169"></a>Unity读取.txt文件</h3> 
<p>.txt文件要另存为utf-8格式;</p> 
<pre><code class="prism language-csharp"><span class="token comment">// 将txt中的内容加载进TextAsset中</span>
<span class="token class-name">TextAsset</span> txt <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">"txt"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">TextAsset</span><span class="token punctuation">;</span>
<span class="token comment">// 以换行符作为分割点，保存数组, 最后记得Trim()一下, 去掉多余的空格换行符什么的</span>
<span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> strs <span class="token operator">=</span> txt<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token char">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_1178"></a>枚举</h3> 
<pre><code class="prism language-csharp"><span class="token comment">//正确的枚举是这样是</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Character</span>
<span class="token punctuation">{<!-- --></span>
    A<span class="token punctuation">,</span>
    B<span class="token punctuation">,</span>
    C<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//而不是下面这样, 再用个类把枚举包起来</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharacterEnum</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Character</span>
    <span class="token punctuation">{<!-- --></span>
      A<span class="token punctuation">,</span>
      B<span class="token punctuation">,</span>
      C<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>枚举是值类型</p> 
<h3><a id="_1200"></a>异步加载</h3> 
<pre><code class="prism language-csharp"><span class="token return-type class-name">IEnumerator</span> <span class="token function">LoadAsyncScene</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sceneName<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">AsyncOperation</span> asyncLoad <span class="token operator">=</span> SceneManager<span class="token punctuation">.</span><span class="token function">LoadSceneAsync</span><span class="token punctuation">(</span>sceneName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//只要没加载完, 就一直返回空</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>asyncLoad<span class="token punctuation">.</span>isDone<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
    	<span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//加载完了</span>
    <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>↓你还可以把下面这个玩意↓设为false, 等你的进度条加完了, 再设为true;</p> 
<pre><code class="prism language-csharp">asyncLoad<span class="token punctuation">.</span>allowSceneActivation<span class="token punctuation">;</span>
</code></pre> 
<p>↓带进度条的异步加载↓以及适配WebGL<br> <a href="https://blog.csdn.net/weixin_43994445/article/details/106231953">https://blog.csdn.net/weixin_43994445/article/details/106231953</a></p> 
<h3><a id="_1221"></a>有几个插件找不到?</h3> 
<p>Cinemachine, ADS等Unity内置插件在商店是找不到的, 他们在这:<br> Windows → Package Manager</p> 
<p>TimeLine在:<br> Windows → Sequencing</p> 
<p>2018里好像没有<br> 也可能是下架了, 没了<br> 也可能是暂时下架了, 过几天就有了</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c84621efe4c684446013b25b61d62e3a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue3 &#43; elememt-plus 表单生成器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1b32fdcb2ba9ff1e1be61f25e2dd655f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【聚类笔记】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>