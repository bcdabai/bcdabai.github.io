<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【图文教程】jenkins - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【图文教程】jenkins" />
<meta property="og:description" content="jenkins 1. jenkins介绍2. jenkins安装3. jenkins相关文件解析4. 通过jenkins发布php代码5. jenkins邮件配置6. 插件email-ext7. 破解管理员密码8. 部署java项目-创建私有仓库9. 部署java项目-下载zrlog源码10. 安装tomcat 1. jenkins介绍 持续集成是什么 互联网软件的开发和发布，已经形成了一套标准流程，最重要的组成部分就是持续集成（Continuous integration，简称CI）。 持续集成指的是，频繁地（一天多次）将代码集成到主干 它的好处主要有两个
1. 快速发现错误。每完成一点更新，就集成到主干，可以快速发现错误，定位错误也比较容易。 2. 防止分支大幅偏离主干。如果不是经常集成，主干又在不断更新，会导致以后集成的难度变大，甚至难以集成。 持续集成的目的，就是让产品可以快速迭代，同时还能保持高质量。它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。 Martin Fowler说过，&#34;持续集成并不能消除Bug，而是让它们非常容易发现和改正。&#34; 与持续集成相关的，还有两个概念，分别是持续交付和持续部署。 持续交付 持续交付（Continuous delivery）指的是，频繁地将软件的新版本，交付给质量团队或者用户，以供评审。如果评审通过，代码就进入生产阶段。 持续交付可以看作持续集成的下一步。它强调的是，不管怎么更新，软件是随时随地可以交付的。 持续部署 持续部署（continuous deployment）是持续交付的下一步，指的是代码通过评审以后，自动部署到生产环境。 持续部署的目标是，代码在任何时刻都是可部署的，可以进入生产阶段。 持续部署的前提是能自动化完成测试、构建、部署等步骤。它与持续交付的区别，可以参考下图。 参考链接： http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html 2. jenkins安装 jenkins的官方文档地址 https://www.jenkins.io/zh/
安装jenkins的最低配置： 不少于256M内存，不低于1G磁盘，jdk版本&gt;=8，如果只需要java的运行环境的话，用yum安装个openjdk就可以了，安装命令如下 yum install -y java-1.8.0-openjdk #系统自带安装 官网下载安装jdk1.8 1. tar zxvf jdk-8u101-linux-x64.tar.gz #解压包 2. mv jdk1.8.0_101/ /usr/local/jdk1.8 #移动并改名 下载jenkins的yum源 wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo 安装jenkins.io.key rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key yum安装jenkins yum install -y jenkins 修改jenkins配置文件 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ff6b27823e1c3e5572e37251f2cbc214/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-02T07:58:15+08:00" />
<meta property="article:modified_time" content="2020-12-02T07:58:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【图文教程】jenkins</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>jenkins</h4> 
 <ul><li><a href="#1_jenkins_2" rel="nofollow">1. jenkins介绍</a></li><li><a href="#2_jenkins_60" rel="nofollow">2. jenkins安装</a></li><li><a href="#3_jenkins_163" rel="nofollow">3. jenkins相关文件解析</a></li><li><a href="#4_jenkinsphp_180" rel="nofollow">4. 通过jenkins发布php代码</a></li><li><a href="#5__jenkins_294" rel="nofollow">5. jenkins邮件配置</a></li><li><a href="#6_emailext_296" rel="nofollow">6. 插件email-ext</a></li><li><a href="#7__298" rel="nofollow">7. 破解管理员密码</a></li><li><a href="#8_java_315" rel="nofollow">8. 部署java项目-创建私有仓库</a></li><li><a href="#9_javazrlog_372" rel="nofollow">9. 部署java项目-下载zrlog源码</a></li><li><a href="#10_tomcat_408" rel="nofollow">10. 安装tomcat</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_jenkins_2"></a>1. jenkins介绍</h2> 
<ul><li>持续集成是什么</li></ul> 
<pre><code class="prism language-javascript">互联网软件的开发和发布，已经形成了一套标准流程，最重要的组成部分就是持续集成（Continuous integration，简称<span class="token constant">CI</span>）。
</code></pre> 
<p><img src="https://images2.imgbox.com/36/8a/HDo2zdFe_o.png" alt="在这里插入图片描述"></p> 
<ul><li>持续集成指的是，频繁地（一天多次）将代码集成到主干</li></ul> 
<blockquote> 
 <p>它的好处主要有两个</p> 
</blockquote> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> 快速发现错误。每完成一点更新，就集成到主干，可以快速发现错误，定位错误也比较容易。

<span class="token number">2.</span> 防止分支大幅偏离主干。如果不是经常集成，主干又在不断更新，会导致以后集成的难度变大，甚至难以集成。


持续集成的目的，就是让产品可以快速迭代，同时还能保持高质量。它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。

Martin Fowler说过，<span class="token string">"持续集成并不能消除Bug，而是让它们非常容易发现和改正。"</span>

与持续集成相关的，还有两个概念，分别是持续交付和持续部署。
</code></pre> 
<ul><li>持续交付</li></ul> 
<pre><code class="prism language-javascript">持续交付（Continuous delivery）指的是，频繁地将软件的新版本，交付给质量团队或者用户，以供评审。如果评审通过，代码就进入生产阶段。

持续交付可以看作持续集成的下一步。它强调的是，不管怎么更新，软件是随时随地可以交付的。
</code></pre> 
<ul><li>持续部署</li></ul> 
<pre><code class="prism language-javascript">持续部署（continuous deployment）是持续交付的下一步，指的是代码通过评审以后，自动部署到生产环境。

持续部署的目标是，代码在任何时刻都是可部署的，可以进入生产阶段。

持续部署的前提是能自动化完成测试、构建、部署等步骤。它与持续交付的区别，可以参考下图。
</code></pre> 
<p><img src="https://images2.imgbox.com/95/e9/9ZbkusBw_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript">参考链接：

http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>ruanyifeng<span class="token punctuation">.</span>com<span class="token operator">/</span>blog<span class="token operator">/</span><span class="token number">2015</span><span class="token operator">/</span><span class="token number">09</span><span class="token operator">/</span>continuous<span class="token operator">-</span>integration<span class="token punctuation">.</span>html
</code></pre> 
<h2><a id="2_jenkins_60"></a>2. jenkins安装</h2> 
<ul><li>jenkins的官方文档地址</li></ul> 
<blockquote> 
 <p>https://www.jenkins.io/zh/</p> 
</blockquote> 
<ul><li>安装jenkins的最低配置： 不少于256M内存，不低于1G磁盘，jdk版本&gt;=8，如果只需要java的运行环境的话，用yum安装个openjdk就可以了，安装命令如下</li></ul> 
<pre><code class="prism language-javascript">yum install <span class="token operator">-</span>y java<span class="token operator">-</span><span class="token number">1.8</span><span class="token number">.0</span><span class="token operator">-</span>openjdk          #系统自带安装
</code></pre> 
<ul><li>官网下载安装jdk1.8</li></ul> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> tar zxvf jdk<span class="token operator">-</span><span class="token number">8</span>u101<span class="token operator">-</span>linux<span class="token operator">-</span>x64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz     #解压包


<span class="token number">2.</span> mv jdk1<span class="token punctuation">.</span><span class="token number">8.0</span>_101<span class="token operator">/</span> <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8</span>      #移动并改名
</code></pre> 
<ul><li>下载jenkins的yum源</li></ul> 
<pre><code class="prism language-javascript">wget <span class="token operator">-</span><span class="token constant">O</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>repo https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>pkg<span class="token punctuation">.</span>jenkins<span class="token punctuation">.</span>io<span class="token operator">/</span>redhat<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>repo
</code></pre> 
<ul><li>安装jenkins.io.key</li></ul> 
<pre><code class="prism language-javascript">rpm <span class="token operator">--</span><span class="token keyword">import</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>pkg<span class="token punctuation">.</span>jenkins<span class="token punctuation">.</span>io<span class="token operator">/</span>redhat<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>io<span class="token punctuation">.</span>key
</code></pre> 
<ul><li>yum安装jenkins</li></ul> 
<pre><code class="prism language-javascript">yum install <span class="token operator">-</span>y jenkins
</code></pre> 
<ul><li>修改jenkins配置文件</li></ul> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> which java                              #查看java安装路径


<span class="token number">2.</span> vi <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>jenkins                  #编辑jenkins配置文件


<span class="token number">3.</span>candidates<span class="token operator">=</span>"
<span class="token operator">/</span>etc<span class="token operator">/</span>alternatives<span class="token operator">/</span>java
<span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>jvm<span class="token operator">/</span>java<span class="token operator">-</span><span class="token number">1.8</span><span class="token number">.0</span><span class="token operator">/</span>bin<span class="token operator">/</span>java
<span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>jvm<span class="token operator">/</span>jre<span class="token operator">-</span><span class="token number">1.8</span><span class="token number">.0</span><span class="token operator">/</span>bin<span class="token operator">/</span>java
<span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>jvm<span class="token operator">/</span>java<span class="token operator">-</span><span class="token number">11.0</span><span class="token operator">/</span>bin<span class="token operator">/</span>java
<span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>jvm<span class="token operator">/</span>jre<span class="token operator">-</span><span class="token number">11.0</span><span class="token operator">/</span>bin<span class="token operator">/</span>java
<span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>jvm<span class="token operator">/</span>java<span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span>openjdk<span class="token operator">-</span>amd64
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8</span><span class="token operator">/</span>bin<span class="token operator">/</span>java                #这一行修改为java安装路径，保存退出就可以了
</code></pre> 
<ul><li>安装完之后启动jenkins服务</li></ul> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> <span class="token punctuation">[</span>root@test01 <span class="token operator">~</span><span class="token punctuation">]</span># service jenkins start
Starting <span class="token function">jenkins</span> <span class="token punctuation">(</span>via systemctl<span class="token punctuation">)</span><span class="token punctuation">:</span>  Warning<span class="token punctuation">:</span> jenkins<span class="token punctuation">.</span>service changed on disk<span class="token punctuation">.</span> Run <span class="token string">'systemctl daemon-reload'</span> to reload units<span class="token punctuation">.</span>
                                                           <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>


<span class="token number">2.</span> <span class="token punctuation">[</span>root@test01 <span class="token operator">~</span><span class="token punctuation">]</span># ps aux <span class="token operator">|</span>grep jenkins
jenkins   <span class="token number">13366</span> <span class="token number">14.6</span> <span class="token number">16.7</span> <span class="token number">2353816</span> <span class="token number">166508</span> <span class="token operator">?</span>      Ssl  <span class="token number">11</span><span class="token punctuation">:</span><span class="token number">02</span>   <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">05</span> <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8</span><span class="token operator">/</span>bin<span class="token operator">/</span>java <span class="token operator">-</span>Dcom<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>akuma<span class="token punctuation">.</span>Daemon<span class="token operator">=</span>daemonized <span class="token operator">-</span>Djava<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span><span class="token constant">DJENKINS_HOME</span><span class="token operator">=</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>jenkins <span class="token operator">-</span>jar <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>jenkins<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>war <span class="token operator">--</span>logfile<span class="token operator">=</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>jenkins<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>log <span class="token operator">--</span>webroot<span class="token operator">=</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>cache<span class="token operator">/</span>jenkins<span class="token operator">/</span>war <span class="token operator">--</span>daemon <span class="token operator">--</span>httpPort<span class="token operator">=</span><span class="token number">8080</span> <span class="token operator">--</span>debug<span class="token operator">=</span><span class="token number">5</span> <span class="token operator">--</span>handlerCountMax<span class="token operator">=</span><span class="token number">100</span> <span class="token operator">--</span>handlerCountMaxIdle<span class="token operator">=</span><span class="token number">20</span>
root      <span class="token number">13428</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span> <span class="token number">112816</span>   <span class="token number">976</span> pts<span class="token operator">/</span><span class="token number">1</span>    <span class="token constant">R</span><span class="token operator">+</span>   <span class="token number">11</span><span class="token punctuation">:</span><span class="token number">03</span>   <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">00</span> grep <span class="token operator">--</span>color<span class="token operator">=</span>auto jenkins


<span class="token number">3.</span> <span class="token punctuation">[</span>root@test01 <span class="token operator">~</span><span class="token punctuation">]</span># netstat <span class="token operator">-</span>lntp <span class="token operator">|</span>grep <span class="token number">8080</span>
tcp6       <span class="token number">0</span>      <span class="token number">0</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">8080</span>                 <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">*</span>                    <span class="token constant">LISTEN</span>      <span class="token number">13366</span><span class="token operator">/</span>java          
</code></pre> 
<ul><li>查看 jenkins 的日志，找到初始化安装需要用到的密码</li></ul> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@test01 <span class="token operator">~</span><span class="token punctuation">]</span># less <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>jenkins<span class="token operator">/</span>jenkins<span class="token punctuation">.</span>log 


Jenkins initial setup is required<span class="token punctuation">.</span> An admin user has been created and a password generated<span class="token punctuation">.</span>
Please use the following password to proceed to installation<span class="token punctuation">:</span>

<span class="token number">294</span>ee38a8c974a2a85620db2e8c7877a                   #找到初始化安装需要用到的密码
</code></pre> 
<ul><li>接着就可以在windows上的浏览器里，访问你Linux的8080端口，进行 Jenkins 的安装</li></ul> 
<blockquote> 
 <p><font color="red">记住把防火墙关闭</font></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/54/09/opk8T6IQ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/65/f6/gOg9AzhA_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/0b/fe/DucJcOj0_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/70/4e/9sQo5FqQ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/eb/e1/Inf41o2E_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3_jenkins_163"></a>3. jenkins相关文件解析</h2> 
<table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>/etc/sysconfig/jenkins</td><td>配置文件所在路径</td></tr><tr><td>/var/lib/jenkins/</td><td>程序文件主目录</td></tr><tr><td>jobs</td><td>项目的配置保存目录</td></tr><tr><td>logs</td><td>日志目录</td></tr><tr><td>nodes</td><td>是一些节点管理的信息，Jenkins配置主从之后会在这里记录</td></tr><tr><td>plugins</td><td>插件所在目录</td></tr><tr><td>secrets</td><td>密码密钥相关的目录</td></tr><tr><td>updates</td><td>升级相关的文件</td></tr><tr><td>userContent</td><td>游客测试目录</td></tr><tr><td>users</td><td>所有用户信息都在这里保存</td></tr><tr><td>workflow-libs</td><td>库相关信息</td></tr></tbody></table> 
<h2><a id="4_jenkinsphp_180"></a>4. 通过jenkins发布php代码</h2> 
<ul><li>通过jenkins发布php代码</li></ul> 
<pre><code class="prism language-javascript">我们都知道Jenkins是一个用于持续集成的工具，所以本文简单介绍一下如何通过Jenkins来发布php代码到远程的机器上，实验环境如下：

两台机器，一台安装了Jenkins作为Jenkins服务器，一台作为远程的服务器：

test02   <span class="token number">192.168</span><span class="token number">.72</span><span class="token number">.135</span>   Jenkins服务器
test03   <span class="token number">192.168</span><span class="token number">.72</span><span class="token number">.136</span>   远程服务器

一个远程的公开的git仓库（php代码在这个仓库里）

如果没有安装过Jenkins的话，可以参考安装Jenkins的方法

“系统管理” → “管理插件” → “已安装”

在通过Jenkins发布php代码之前，我们首先需要在Jenkins服务的web页面上检查一下 “Git plugin” 和 “Publish Over <span class="token constant">SSH</span>” 两个插件是否已安装：
</code></pre> 
<ul><li>显示 “Git plugin” 已经安装了</li></ul> 
<p><img src="https://images2.imgbox.com/e6/75/jZwqNxzR_o.png" alt="在这里插入图片描述"></p> 
<ul><li>安装 “Publish Over SSH”，显示安装成功</li></ul> 
<p><img src="https://images2.imgbox.com/96/6e/TYKdG2Kp_o.png" alt="在这里插入图片描述"></p> 
<ul><li>确保两个插件都安装好后，点击“系统管理” → “系统设置”，下拉页面，大概在网页的最下面可以找到 “Publish Over SSH”</li></ul> 
<p><img src="https://images2.imgbox.com/29/3a/AQ0G3hlp_o.png" alt="在这里插入图片描述"></p> 
<ul><li>在 test02 jenkins服务器上，生成密钥对</li></ul> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> <span class="token punctuation">[</span>root@test02 jenkins<span class="token punctuation">]</span># ssh<span class="token operator">-</span>keygen
Generating <span class="token keyword">public</span><span class="token operator">/</span><span class="token keyword">private</span> rsa key pair<span class="token punctuation">.</span>
Enter file <span class="token keyword">in</span> which to save the <span class="token function">key</span> <span class="token punctuation">(</span><span class="token regex">/root/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">)</span><span class="token punctuation">:</span> 
Enter <span class="token function">passphrase</span> <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span><span class="token punctuation">:</span> 
Enter same passphrase again<span class="token punctuation">:</span> 
Your identification has been saved <span class="token keyword">in</span> <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">.</span>
Your <span class="token keyword">public</span> key has been saved <span class="token keyword">in</span> <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">.</span>pub<span class="token punctuation">.</span>
The key fingerprint is<span class="token punctuation">:</span>
<span class="token constant">SHA256</span><span class="token punctuation">:</span>Qb4M14Vm67xzz0YDwqZFYYlVSQYNcbSUfKJ3yGqiT8U root@test02
The key's randomart image is<span class="token punctuation">:</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token constant">RSA</span> <span class="token number">2048</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span>        <span class="token punctuation">.</span>oB<span class="token operator">&amp;</span>Oo   <span class="token operator">|</span>
<span class="token operator">|</span>       o<span class="token punctuation">.</span>o<span class="token operator">*=</span><span class="token operator">*</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token punctuation">.</span> <span class="token operator">+=</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">.</span><span class="token operator">+</span>   <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token operator">+</span> <span class="token operator">+</span><span class="token constant">B</span> <span class="token operator">=</span> <span class="token punctuation">.</span>  <span class="token operator">|</span>
<span class="token operator">|</span>        <span class="token constant">S</span><span class="token operator">*</span><span class="token constant">E</span><span class="token operator">+</span> o   <span class="token operator">|</span>
<span class="token operator">|</span>        o<span class="token punctuation">.</span><span class="token operator">=</span>   o  <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token punctuation">.</span><span class="token punctuation">.</span>o <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token punctuation">.</span><span class="token punctuation">.</span>  o <span class="token operator">...</span>  <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token punctuation">.</span><span class="token punctuation">.</span>  o oo  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token punctuation">[</span><span class="token constant">SHA256</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
</code></pre> 
<ul><li>生成密钥对后，把 test02 公钥拷贝到 test03 .ssh/authorized_keys 文件里上去</li></ul> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> <span class="token punctuation">[</span>root@test03 <span class="token operator">~</span><span class="token punctuation">]</span># vim <span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys

##############
ssh<span class="token operator">-</span>rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDmv3lI9tM3N<span class="token operator">+</span>xCCoNTi<span class="token operator">/</span>GUgZgP9aofUXUy9rHk9k0i0n5LpxR0qXywBlXXXxuOISzg0mW<span class="token operator">+</span><span class="token number">7</span>AsxmL97vdM3ThbBprXSjDtQK7pT5wOil<span class="token operator">/</span>q785SnNqGzBA2XKtR3fBbWPdM6hYL2Ex7ZNrzJtHOx45Uz7FEwP42B6j742Y7Vrkb5P870aeJdY<span class="token operator">/</span>pwabhKlz0KcTCaDs0tJtxQH2KhrlAAIFtmqVlTJjH<span class="token operator">/</span>p6xpFqa8w1W2mjj2lTspaagKcnpU3Ku39dVkKp1WZjD0jvEUMUsBkog7ICoxQep9yFWMUuTenuKNm9lkBetuHF<span class="token operator">/</span><span class="token number">80974</span>gDxFqxEmxpmJJECQ2lvCibFztKmz root@test02


<span class="token number">2.</span> <span class="token punctuation">[</span>root@test02 <span class="token operator">~</span><span class="token punctuation">]</span># ssh <span class="token number">192.168</span><span class="token number">.72</span><span class="token number">.136</span>
Last login<span class="token punctuation">:</span> Thu Nov <span class="token number">26</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">56</span><span class="token punctuation">:</span><span class="token number">19</span> <span class="token number">2020</span> <span class="token keyword">from</span> <span class="token number">192.168</span><span class="token number">.72</span><span class="token number">.1</span>
<span class="token punctuation">[</span>root@test03 <span class="token operator">~</span><span class="token punctuation">]</span>#

#能正常登录则代表没有问题，如果出现让你出入用户密码的情况则是密钥没有配置成功，配置成功的情况下登录是不需要密码的。
</code></pre> 
<ul><li>完成测试确保能够正常通过ssh登录远程机器后，接着就是把test02de 私钥粘贴到 “Key” 这一栏里</li></ul> 
<p><img src="https://images2.imgbox.com/04/88/aRudBGag_o.png" alt="在这里插入图片描述"></p> 
<ul><li>以上我们配置完了插件以及远程机器，现在就可以开始新建任务了</li></ul> 
<p><img src="https://images2.imgbox.com/28/81/zs8dYr3Q_o.png" alt="请添加图片描述"></p> 
<p><img src="https://images2.imgbox.com/14/b5/BmI4HJBY_o.png" alt="请添加图片描述"></p> 
<p><img src="https://images2.imgbox.com/76/b4/tawXk3Ul_o.png" alt="在这里插入图片描述"></p> 
<p>配置项目名称与描述</p> 
<p><img src="https://images2.imgbox.com/03/9d/TZ3ItXUP_o.png" alt="在这里插入图片描述"></p> 
<ul><li>构建触发器，以及构建环境都不需要配置，因为我们发布的是php代码</li></ul> 
<p><img src="https://images2.imgbox.com/5b/82/UytcUQC1_o.png" alt="在这里插入图片描述"></p> 
<ul><li>最后就是 “构建” ，最核心的一步，选择 “Send files or execute commands over SSH”</li></ul> 
<p><img src="https://images2.imgbox.com/c4/c8/YOpqGFjY_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>简单说明：<br> SSH Server，Name 选择对应的服务器，Transfers, Source files填写**/**，表示全部文件<br> Remove prefix可以指定截掉的前缀目录，这里留空即可，Remote directory指定远程服务器上代码存放路径，比如/data/wwwroot/www.aaa.com，Exec command为文件传输完成后要执行的命令，比如可以是更改文件权限的命令，设置完成后点击 “Add Transfer Set”，如果还有另外的机器，可以点击 “Add Server”重复以上操作</p> 
</blockquote> 
<ul><li>完成以上操作后，就可以使用这个刚刚创建的任务去工作了，点击左面的 “立即构建” ，就能把git上的代码发布到指定的服务器上</li></ul> 
<p><img src="https://images2.imgbox.com/c3/df/gi63ZBCb_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/4a/2e/DodkVVxM_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/fd/31/EfiHP3Qa_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="5__jenkins_294"></a>5. jenkins邮件配置</h2> 
<h2><a id="6_emailext_296"></a>6. 插件email-ext</h2> 
<h2><a id="7__298"></a>7. 破解管理员密码</h2> 
<pre><code class="prism language-javascript">cd <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>jenkins<span class="token operator">/</span>users<span class="token operator">/</span>admin

vim config<span class="token punctuation">.</span>xml<span class="token comment">//定位到&lt;passwordHash&gt;那一行</span>

删除改行，改为
<span class="token operator">&lt;</span>passwordHash<span class="token operator">&gt;</span>#jbcrypt<span class="token punctuation">:</span>$<span class="token number">2</span>a$<span class="token number">10</span>$pre7I4liZFdF6ZE05QntTOoKoKa5pCUumaFO<span class="token operator">/</span>mMzMoH09bNBzyj6O<span class="token operator">&lt;</span><span class="token operator">/</span>passwordHash<span class="token operator">&gt;</span>

重启一下jenkins

新密码为aminglinux<span class="token punctuation">.</span>com
</code></pre> 
<h2><a id="8_java_315"></a>8. 部署java项目-创建私有仓库</h2> 
<blockquote> 
 <p><font color="red">项目的线上服务器，具有JDK1.8+Tomcat8.5环境 192.168.72.134这台服务器</font></p> 
</blockquote> 
<pre><code class="prism language-javascript">Jenkins大多数情况下都是用来部署Java项目，Java项目有一个特点是需要编译和打包的，一般情况下编译和打包都是用maven完成，所以系统环境中需要安装maven。

本次实验，我们采用git私有仓库的形式，涉及到配置密钥，以zrlog来作为本次实验需要部署的java项目。

实验环境：

<span class="token number">192.168</span><span class="token number">.72</span><span class="token number">.134</span> 作为项目的线上服务器，具有<span class="token constant">JDK1</span><span class="token number">.8</span><span class="token operator">+</span>Tomcat8<span class="token punctuation">.</span><span class="token number">5</span>环境
<span class="token number">192.168</span><span class="token number">.72</span><span class="token number">.135</span> Jenkins服务器

准备工作：

自行在免费的代码托管平台申请一个私有的git仓库，我这里使用的是国内的一个免费托管平台：github
生成密钥对，把公钥放到git服务端，也就是配置仓库的密钥认证，请查看github博客
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/d5/3EVVXBs1_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> makdir <span class="token operator">/</span>tmp<span class="token operator">/</span>tew


<span class="token number">2.</span> cd <span class="token operator">/</span>tmp<span class="token operator">/</span>tew


<span class="token number">3.</span> echo <span class="token string">"# The-experimental-warehouse"</span> <span class="token operator">&gt;&gt;</span> <span class="token constant">README</span><span class="token punctuation">.</span>md


<span class="token number">4.</span> git add <span class="token constant">README</span><span class="token punctuation">.</span>md


<span class="token number">5.</span> git commit <span class="token operator">-</span>m <span class="token string">"ch README.md"</span>


<span class="token number">6.</span> git branch <span class="token operator">-</span><span class="token constant">M</span> main


<span class="token number">7.</span> git remote add origin https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">2584765560</span><span class="token operator">/</span>The<span class="token operator">-</span>experimental<span class="token operator">-</span>warehouse<span class="token punctuation">.</span>git


<span class="token number">8.</span> <span class="token punctuation">[</span>root@test01 tew<span class="token punctuation">]</span># git push <span class="token operator">-</span>u origin main
Username <span class="token keyword">for</span> <span class="token string">'https://github.com'</span><span class="token punctuation">:</span> <span class="token number">2584765560</span>    #输入用户名
Password <span class="token keyword">for</span> <span class="token string">'https://2584765560@github.com'</span><span class="token punctuation">:</span>    #输入用户密码
Counting objects<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> done<span class="token punctuation">.</span>
Writing objects<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">227</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes<span class="token operator">/</span>s<span class="token punctuation">,</span> done<span class="token punctuation">.</span>
Total <span class="token number">3</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
To https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">2584765560</span><span class="token operator">/</span>The<span class="token operator">-</span>experimental<span class="token operator">-</span>warehouse<span class="token punctuation">.</span>git
 <span class="token operator">*</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">branch</span><span class="token punctuation">]</span>      main <span class="token operator">-</span><span class="token operator">&gt;</span> main
</code></pre> 
<p><img src="https://images2.imgbox.com/95/22/T5E8M10T_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="9_javazrlog_372"></a>9. 部署java项目-下载zrlog源码</h2> 
<blockquote> 
 <p><font color="red">项目的线上服务器，具有JDK1.8+Tomcat8.5环境 192.168.72.134这台服务器</font></p> 
</blockquote> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> wget https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>codeload<span class="token punctuation">.</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token number">94</span>fzb<span class="token operator">/</span>zrlog<span class="token operator">/</span>zip<span class="token operator">/</span>master  #下载zrlog压缩包，zip格式的


<span class="token number">2.</span> du <span class="token operator">-</span>sh master 
<span class="token number">2.8</span>M	master


<span class="token number">3.</span> unzip master    #安装 unzip 并解压master


<span class="token number">4.</span> mv zrlog<span class="token operator">-</span>master<span class="token comment">/* -t /tmp/tew/   #把zrlog-master目录下移动到新建的仓库目录下


5. cd !$


6. ls
admin-frontend  common  doc               LICENSE  mvnw.cmd  README.en-us.md  service
bin             data    install-frontend  mvnw     pom.xml   README.md        web


7. git add .   


8. git commit -m "add zrlog"


9. git push
</span></code></pre> 
<p><img src="https://images2.imgbox.com/80/4b/WK5Vmw4Q_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="10_tomcat_408"></a>10. 安装tomcat</h2> 
<blockquote> 
 <p><font color="red">项目的线上服务器，具有JDK1.8+Tomcat8.5环境 192.168.72.134这台服务器</font></p> 
</blockquote> 
<blockquote> 
 <p>在线上服务器上需要安装好jdk + tomcat，其中jdk最好不要使用openjdk，使用openjdk容易出问题，我这里使用的jdk版本为1.8，tomcat版本则为8.23</p> 
</blockquote> 
<ul><li>准备好JDK+Tomcat环境并且Tomcat能够正常服务后，还需要配置Tomcat的用户文件</li></ul> 
<pre><code class="prism language-javascript"><span class="token number">1.</span> vim <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>tomcat<span class="token operator">/</span>conf<span class="token operator">/</span>tomcat<span class="token operator">-</span>users<span class="token punctuation">.</span>xml

shift<span class="token operator">+</span>g 切换到最下面，在<span class="token operator">&lt;</span><span class="token operator">/</span>tomcat<span class="token operator">-</span>users<span class="token operator">&gt;</span>前插入以下内容：

<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"admin"</span><span class="token operator">/</span><span class="token operator">&gt;</span>     #role配置角色
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"admin-gui"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"admin-script"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"manager"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"manager-gui"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"manager-script"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"manager-jmx"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>role rolename<span class="token operator">=</span><span class="token string">"manager-status"</span><span class="token operator">/</span><span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span>user name<span class="token operator">=</span><span class="token string">"admin"</span> password<span class="token operator">=</span><span class="token string">"your_password"</span> roles<span class="token operator">=</span><span class="token string">"admin,manager,admin-gui,admin-script,manager-gui,manager-script,manager-jmx,manager-status"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>    
#需要 name<span class="token operator">=</span><span class="token string">"admin"</span>  password<span class="token operator">=</span><span class="token string">"123"</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab4857ff5353d8f6dc5bd9291e369cbc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【图文教程】代码管理平台 git</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eef739917e8a21acece90cfff68d7116/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux如何查进程、杀进程，重启进程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>