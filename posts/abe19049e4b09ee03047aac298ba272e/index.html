<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>第三章. Pandas入门—索引设置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="第三章. Pandas入门—索引设置" />
<meta property="og:description" content="第三章. Pandas入门
3.8 索引设置 1. 索引的作用： 1).更方便的查询数据 2).使用索引可以提升查询性能 · 如果索引是唯一的，Pandas会使用哈希表优化，查找数据的时间复杂度为O(1) · 如果索引不是唯一的，但是有序，Pandas会使用二分查找算法，查找数据的时间复杂度为O(logN) · 如果索引是完全随机的，那么每次查找数据都需要扫描数据表，时间复杂度是O(N) 3).强大的数据结构 2. 重新设置索引： 1).函数格式： DataFrame.reindex（(labels=None, index=None, columns=None, axis=None, method=None, copy=True, level=None, fill_value=nan, limit=None, tolerance=None)） 参数说明:
labels:可以是数组
index:行索引
columns:列索引
axis:0:表示行 1：表示列
method:重新设置索引时，选择的差值方式：None，bfill(向后填充),ffill(向前填充)
fill_value：缺失值填充的数据
2)对Series对象重新设置索引： import pandas as pd # 对Series对象重新设置索引 s1 = pd.Series([100, 110, 120], index=[1, 2, 3]) print(s1) print(&#39;*&#39; * 50) s2 = s1.reindex(index=[1, 2, 3, &#39;s1&#39;, &#39;s2&#39;], fill_value=0) print(s2) print(&#39;*&#39; * 50) s3 = s1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/abe19049e4b09ee03047aac298ba272e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-09T14:33:17+08:00" />
<meta property="article:modified_time" content="2022-11-09T14:33:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">第三章. Pandas入门—索引设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><font face="等线" color="#00000" size="6"> <strong>第三章. Pandas入门</strong></font></p> 
<h2><a id="font_face_color00000_size5__38_font_1"></a><font face="等线" color="#00000" size="5"> 3.8 索引设置</font></h2> 
<h3><a id="font_face_color00000_size4_1font_face_colorB22222_size4_font_face_color00000_size4_2"></a><font face="仿宋" color="#00000" size="4"> 1.<font face="仿宋" color="#B22222" size="4"> 索引的作用：<font face="仿宋" color="#00000" size="4"></font></font></font></h3> 
<h4><a id="font_face_color00000_size3_3"></a><font face="仿宋" color="#00000" size="3"></font></h4> 
<pre><code>  1).更方便的查询数据
  2).使用索引可以提升查询性能
     · 如果索引是唯一的，Pandas会使用哈希表优化，查找数据的时间复杂度为O(1)
     · 如果索引不是唯一的，但是有序，Pandas会使用二分查找算法，查找数据的时间复杂度为O(logN)
     · 如果索引是完全随机的，那么每次查找数据都需要扫描数据表，时间复杂度是O(N)
  3).强大的数据结构
</code></pre> 
<h3><a id="font_face_color00000_size4_2font_face_colorB22222_size4__11"></a><font face="仿宋" color="#00000" size="4"> 2.<font face="仿宋" color="#B22222" size="4"> 重新设置索引：</font></font></h3> 
<h4><a id="font_face_color00000_size3_1_12"></a><font face="仿宋" color="#00000" size="3"> 1).函数格式：</font></h4> 
<pre><code class="prism language-python">DataFrame<span class="token punctuation">.</span>reindex（<span class="token punctuation">(</span>labels<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> copy<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> level<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fill_value<span class="token operator">=</span>nan<span class="token punctuation">,</span> limit<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> tolerance<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>）
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">参数说明:<br> <font face="仿宋" color="#00000" size="2">labels:可以是数组<br> index:行索引<br> columns:列索引<br> axis:0:表示行 1：表示列<br> method:重新设置索引时，选择的差值方式：None，bfill(向后填充),ffill(向前填充)<br> fill_value：缺失值填充的数据</font></font></p> 
<h4><a id="font_face_color00000_size3_2Series_24"></a><font face="仿宋" color="#00000" size="3"> 2)对Series对象重新设置索引：</font></h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token comment"># 对Series对象重新设置索引</span>
s1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span>reindex<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'s1'</span><span class="token punctuation">,</span> <span class="token string">'s2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fill_value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
s3 <span class="token operator">=</span> s1<span class="token punctuation">.</span>reindex<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'ffill'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
s4 <span class="token operator">=</span> s1<span class="token punctuation">.</span>reindex<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'bfill'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">结果展示:<br> <img src="https://images2.imgbox.com/d3/e5/Qjfu6sSt_o.png" alt="在这里插入图片描述"></font></p> 
<h4><a id="font_face_color00000_size3_3DataFrame_46"></a><font face="仿宋" color="#00000" size="3"> 3).对DataFrame对象重新设置索引：</font></h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 对DataFrame对象重新设置索引</span>
pd<span class="token punctuation">.</span>set_option<span class="token punctuation">(</span><span class="token string">'display.unicode.east_asian_width'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'xiaoming'</span><span class="token punctuation">,</span> <span class="token string">'xiaomei'</span><span class="token punctuation">,</span> <span class="token string">'xiaoqiang'</span><span class="token punctuation">]</span>
column <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'yuwen'</span><span class="token punctuation">,</span> <span class="token string">'shuxue'</span><span class="token punctuation">,</span> <span class="token string">'yingyu'</span><span class="token punctuation">]</span>
s1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">,</span> index<span class="token operator">=</span>index<span class="token punctuation">,</span> columns<span class="token operator">=</span>column<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>

s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span>reindex<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'xiaoming'</span><span class="token punctuation">,</span> <span class="token string">'xiaomei'</span><span class="token punctuation">,</span> <span class="token string">'xiaoqiang'</span><span class="token punctuation">,</span><span class="token string">'小明'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'yuwen'</span><span class="token punctuation">,</span> <span class="token string">'shuxue'</span><span class="token punctuation">,</span> <span class="token string">'yingyu'</span><span class="token punctuation">,</span> <span class="token string">'化学'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fill_value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">结果展示:<br> <img src="https://images2.imgbox.com/5f/c2/vXRFCkEx_o.png" alt="在这里插入图片描述"></font></p> 
<h3><a id="font_face_color00000_size4_3font_face_colorB22222_size4_69"></a><font face="仿宋" color="#00000" size="4"> 3.<font face="仿宋" color="#B22222" size="4">设置某列为行索引：</font></font></h3> 
<h4><a id="font_face_color00000_size3_DataFrameset_index_70"></a><font face="仿宋" color="#00000" size="3"> 主要使用DataFrame对象中的set_index方法，语法如下:</font></h4> 
<pre><code class="prism language-python">DataFrame<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span>keys<span class="token punctuation">,</span> drop<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> append<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> verify_integrity<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">参数说明:<br> <font face="仿宋" color="#00000" size="2">keys.列标签或列标签/数组列表 需要设置为索引的列<br> drop.默认为True 删除用作新索引的列<br> append.是否将列附加到现有索引 默认为False<br> inplace.布尔类型 表示当前操作是否对原数据生效 默认为False<br> verify_integrity.检查新索引的副本 将其设置为False将提高该方法的性能 默认为false</font></font></p> 
<h5><a id="font_face_color00000_size3_1_81"></a><font face="仿宋" color="#00000" size="3"> 1).设某列为行索引：</font></h5> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

pd<span class="token punctuation">.</span>set_option<span class="token punctuation">(</span><span class="token string">"display.unicode.east_asian_width"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'D:\\MTF_data.xlsx'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>

<span class="token comment"># 设某列为行索引</span>
df1 <span class="token operator">=</span> df<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'SFR'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">结果展示:<br> <img src="https://images2.imgbox.com/0b/cf/22dBBED6_o.png" alt="在这里插入图片描述"></font></p> 
<h5><a id="font_face_color00000_size3_2_98"></a><font face="仿宋" color="#00000" size="3"> 2).数据清洗或删除后重新设置连续的行索引：</font></h5> 
<pre><code class="prism language-python">DataFrame<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>level<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> drop<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> inpalce<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> col_level<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> col_fill<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">参数说明:<br> <font face="仿宋" color="#00000" size="2">level.数值类型 int、str、tuple或list 默认无 删除所有级别的索引,指定level 删除指定级别<br> drop.当指定 drop=False 时，则索引列会被还原为普通列；否则，经设置后的新索引值被会丢弃 默认为False<br> inplace.布尔类型 是否修改原始数据框 默认False<br> col_level.数值类型 int、str 默认值为0,如果列有多个级别，则确定将标签插入到哪个级别。默认情况下，它将插入到第一级。指定重置后的级别）<br> col_fill.object 默认‘’，如果列有多个级别，则确定其他级别的命名方式。如果没有，则重复索引名。</font></font></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

pd<span class="token punctuation">.</span>set_option<span class="token punctuation">(</span><span class="token string">"display.unicode.east_asian_width"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'D:\\MTF_data.xlsx'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>

<span class="token comment">#数据重洗后重新设置连续的行索引</span>
df1 <span class="token operator">=</span> df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'*'</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre> 
<p><font face="仿宋" color="#B2222" size="2">结果展示:<br> <img src="https://images2.imgbox.com/1d/d1/y8Q8soQI_o.png" alt="在这里插入图片描述"></font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/558fb200860db38f8c15383847335f04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【RHCE】作业：ansible playbook中结合yaml运用各种模块</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f65f366c7f6e50e71cec8d9a569eef0b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【JAVA】对树形结构进行模糊查询（含分页）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>