<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Android Gradle系列】如何生成正式签名的APK文件【强推荐】 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Android Gradle系列】如何生成正式签名的APK文件【强推荐】" />
<meta property="og:description" content="在本篇文章您将了解到两种生成正式签名的APK文件，当然还会了解到gradle build 与 gradle assemble的区别。
通过 Android Studio 生成使用 Gradle 生成 文章目录 前言使用Android Studio生成正式签名的APK文件使用Gradle生成正式签名的APK文件 前言 首先需要了解的是并不是所有的APK文件都能成功安装在手机上，能够安装在Android手机上的应用都是带有签名的。可能有小伙伴有疑惑了：为什么通过Android Studio运行生成的应用程序好像没有进行过签名啊？那是因为，Android Studio 使用了一个默认的 keystore文件帮我们自动进行了签名，可以在 Android Studio 中看到：
Gradle 面板——Tasks——android——signingReport，双击 signingReport，在控制台可以看到keystore 信息。
这就说明我们通过 Android Studio 运行的程序使用的都是这个 debug.keystore 文件来进行签名。
如果要想上架到应用商店，需要生成正式签名的 APK，那么问题来了，如何生成正式签名的APK 呢？本文将分享两种方法：
使用Android Studio生成正式签名的APK文件 点击 Android Studio 导航栏上的 Build——Generate signed APK ——选择APK——填写如下内容。如果没有 jks 文件的话，点击 Create new 即可生成新的。
其中 Validity(years)代表的是有效时长。具体信息可以添加如下内容
配置好信息之后，点击下一步选择release即可。
当点击Create后，右下角会有一个提示框：APK(s) generated successfully。当我们运行demo生成release版本时，该demo就是一个带有正式签名的APK文件。
使用Gradle生成正式签名的APK文件 在 testapp2 项目下的 build.gradle 文件中添加signingconfigs闭包，并在release闭包中使用。signingconfigs闭包中添加了一个config闭包，其中配置了keystore文件的各种信息，其中，storeFile 用于指定keystore文件的位置（文件必须已存在）；storePassword用于指定密码，keyAlias用于指定别名，keyPassword用于指定别名密码。
android { namespace &#39;com.example.testapp2&#39; compileSdk 34 defaultConfig { # 此处省略 } signingConfigs { config { storeFile file(&#39;/Users/zeng/zeng." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/582f2d54428667dd5564105cea26bab9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T13:17:49+08:00" />
<meta property="article:modified_time" content="2024-01-10T13:17:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Android Gradle系列】如何生成正式签名的APK文件【强推荐】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在本篇文章您将了解到两种生成正式签名的APK文件，当然还会了解到<code>gradle build</code> 与 <code>gradle assemble</code>的区别。</p> 
<ul><li>通过 Android Studio 生成</li><li>使用 Gradle 生成</li></ul> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_6" rel="nofollow">前言</a></li><li><a href="#Android_StudioAPK_12" rel="nofollow">使用Android Studio生成正式签名的APK文件</a></li><li><a href="#GradleAPK_21" rel="nofollow">使用Gradle生成正式签名的APK文件</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_6"></a>前言</h3> 
<p><strong>首先需要了解的是并不是所有的APK文件都能成功安装在手机上</strong>，能够安装在Android手机上的应用都是带有签名的。可能有小伙伴有疑惑了：为什么通过Android Studio运行生成的应用程序好像没有进行过签名啊？那是因为，Android Studio 使用了一个默认的 <code>keystore</code>文件帮我们自动进行了签名，可以在 Android Studio 中看到：<br> Gradle 面板——Tasks——android——signingReport，双击 signingReport，在控制台可以看到keystore 信息。<br> <img src="https://images2.imgbox.com/2a/dc/yZDt5bgg_o.png" alt="在这里插入图片描述"><br> 这就说明我们通过 Android Studio 运行的程序使用的都是这个 debug.keystore 文件来进行签名。<br> 如果要想上架到应用商店，需要生成正式签名的 APK，那么问题来了，如何生成正式签名的APK 呢？本文将分享两种方法：</p> 
<h3><a id="Android_StudioAPK_12"></a>使用Android Studio生成正式签名的APK文件</h3> 
<p>点击 Android Studio 导航栏上的 Build——Generate signed APK ——选择APK——填写如下内容。如果没有 jks 文件的话，点击 Create new 即可生成新的。<br> <img src="https://images2.imgbox.com/92/53/U6Qh8xbn_o.png" alt="在这里插入图片描述"><br> 其中 Validity(years)代表的是有效时长。具体信息可以添加如下内容<br> <img src="https://images2.imgbox.com/4c/b6/KZgoU3Pm_o.png" alt="在这里插入图片描述"><br> 配置好信息之后，点击下一步选择release即可。<br> <img src="https://images2.imgbox.com/29/04/lQaJ1c1O_o.png" alt="在这里插入图片描述"><br> 当点击Create后，右下角会有一个提示框：APK(s) generated successfully。当我们运行demo生成release版本时，该demo就是一个带有正式签名的APK文件。</p> 
<h3><a id="GradleAPK_21"></a>使用Gradle生成正式签名的APK文件</h3> 
<p>在 testapp2 项目下的 <code>build.gradle</code> 文件中添加<code>signingconfigs闭包</code>，并在release闭包中使用。signingconfigs闭包中添加了一个<code>config闭包</code>，其中配置了<code>keystore</code>文件的各种信息，其中，<code>storeFile</code> 用于指定keystore文件的位置（文件必须已存在）；<code>storePassword</code>用于指定密码，<code>keyAlias</code>用于指定别名，<code>keyPassword</code>用于指定别名密码。</p> 
<pre><code class="prism language-bash">android <span class="token punctuation">{<!-- --></span>
    namespace <span class="token string">'com.example.testapp2'</span>
    compileSdk <span class="token number">34</span>
    defaultConfig <span class="token punctuation">{<!-- --></span>
       <span class="token comment"># 此处省略</span>
    <span class="token punctuation">}</span>
    signingConfigs <span class="token punctuation">{<!-- --></span>
        config <span class="token punctuation">{<!-- --></span>
            storeFile file<span class="token punctuation">(</span><span class="token string">'/Users/zeng/zeng.jks'</span><span class="token punctuation">)</span>
            storePassword <span class="token string">'123456'</span>
            keyAlias <span class="token string">'Zeng'</span>
            keyPassword <span class="token string">'123456'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    buildTypes <span class="token punctuation">{<!-- --></span>
        release <span class="token punctuation">{<!-- --></span>
            minifyEnabled <span class="token boolean">false</span>
            proguardFiles getDefaultProguardFile<span class="token punctuation">(</span><span class="token string">'proguard-android-optimize.txt'</span><span class="token punctuation">)</span>, <span class="token string">'proguard-rules.pro'</span>
            signingConfig signingConfigs.config
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>因为我们在 buildTypes下面的 release 闭包中应用了添加的签名配置，这样当生成正式版APK文件的时候就会自动使用配置的签名信息来进行签名。赶紧生成一个带有签名的 APK 试试吧。运行下面的命令生成 apk。</p> 
<pre><code class="prism language-bash">gradlew :testapp2:assembleRelease
<span class="token comment">#或者</span>
gradlew :testapp2:build
<span class="token comment">#或者</span>
gradlew :testapp2:assemble
</code></pre> 
<hr> 
<p><strong>可能小伙伴又有疑问了？<code>gradlew build</code> 与 <code>gradlew assemble</code>有什么区别。</strong><br> <strong>相同点：</strong><br> 两者在执行命令后，都会生成debug和release包。<br> <strong>不同点：</strong></p> 
<ul><li><code>gradlew build</code> ：是一个通用的构建命令，将执行项目的整体构建过程。会编译源代码，运行单元测试，处理器资源文件，最终生成可运行的应用程序包。</li><li><code>gradlew assemble</code>: 用于执行构建过程的部分步骤，主要是打包生成可执行文件（如APK）。与 gradlew build 不同，gradlew assemble只执行构建过程的部分流程，跳过了编译源代码和运行单元测试等步骤。它可以指定特定的构建变体，例如 gradlew assembleDebug 或 gradlew assembleRelease ，来单独构建指定的变体而非构建所有变体。</li></ul> 
<blockquote> 
 <p>别忘记一键三连哦</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/550209144ba341447532576a2c34cf87/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Kali Linux配置记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ea820f60ffd34cbab1c089062ba9e0b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在一张图里同时显示两个三维图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>