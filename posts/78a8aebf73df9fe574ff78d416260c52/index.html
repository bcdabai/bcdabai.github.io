<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaEE-微服务-Vuex - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaEE-微服务-Vuex" />
<meta property="og:description" content="Vuex 2.1 什么是Vuex Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。
Vuex在组件之间共享数据。
2.2 使用 vue cli 构建项目
2.3 入门案例 2.3.1 定义数据 export default new Vuex.Store({ state: { // 状态区域（定义变量区域） user: &#39;&#39;, token: &#39;&#39; }, mutations: { //修改变量 setUser(state, value) { state.user = value }, setToken(state, value){ state.token = value } }, 2.3.2 调用数据 获得数据：调用state区域，和计算属性结合，使数据可以实时更新 &lt;template&gt; &lt;div&gt; {{token}} &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { computed: { // 计算属性 token() { return this.$store.state.token } }, } &lt;/script&gt; &lt;style&gt; &lt;/style&gt; 设置数据：调用mutations区域 &lt;template&gt; &lt;div&gt; {{token}} &lt;br/&gt; &lt;input type=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/78a8aebf73df9fe574ff78d416260c52/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-23T20:07:15+08:00" />
<meta property="article:modified_time" content="2024-01-23T20:07:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaEE-微服务-Vuex</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Vuex_0"></a>Vuex</h2> 
<h3><a id="21__Vuex_2"></a>2.1 什么是Vuex</h3> 
<ul><li> <p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。</p> </li><li> <p>Vuex在组件之间共享数据。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/61/2d/PPr1aayt_o.png" alt="在这里插入图片描述"><br> 2.2 使用 vue cli 构建项目<br> <img src="https://images2.imgbox.com/d5/2a/A9JLNORz_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23___11"></a>2.3 入门案例</h3> 
<h4><a id="231___13"></a>2.3.1 定义数据</h4> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
 <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 状态区域（定义变量区域）</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">''</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>

 <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//修改变量</span>
  <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   state<span class="token punctuation">.</span>user <span class="token operator">=</span> value
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setToken</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   state<span class="token punctuation">.</span>token <span class="token operator">=</span> value
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/df/6f/MAbeXPhD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="232___34"></a>2.3.2 调用数据</h4> 
<ul><li>获得数据：调用state区域，和计算属性结合，使数据可以实时更新</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div&gt;
   {<!-- -->{token}}
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  computed: { // 计算属性
     token() {
       return this.$store.state.token
     }
  },
}

&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;
</code></pre> 
<ul><li>设置数据：调用mutations区域</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div&gt;
   {<!-- -->{token}} &lt;br/&gt;
   &lt;input type="button" value="切换数据" @click="setToken('tom')"&gt;
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  computed: { // 计算属性
     token() {
       return this.$store.state.token
     }
  },
  methods: {
     setToken(value) {
       this.$store.commit('setToken',value)
     }
  },
}
&lt;/script&gt;

&lt;style&gt;

&lt;/style&gt;
</code></pre> 
<h3><a id="24___92"></a>2.4 总结</h3> 
<table><thead><tr><th><strong>属性</strong></th><th><strong>描述</strong></th><th><strong>实例</strong></th></tr></thead><tbody><tr><td>state</td><td>用于定义对象的状态 （需要共享的数据）<br>获得方式： <br>this.$store.state.username</td><td>state: {<!-- --><br> username: ‘jack’, <br> password: ‘6666’ <br> }</td></tr><tr><td>getters</td><td>vuex的计算属性，获得依赖的缓存数据，只有依赖的值发生改变，才重新计算 <br>获得方式： <br>this.$store.getters.getUsername</td><td>getters: {<!-- --><br> getUsername(state) {<!-- --><br> return state.username<br> } <br>}</td></tr><tr><td>mutations</td><td>唯一可以修改对象状态的方式 <br>修改方式 <br>this.$store.commit(‘setUsername’,‘肉丝’)</td><td>mutations: {<!-- --><br> setUsername(state,value){<!-- --><br> state.username = value<br> } <br>}</td></tr><tr><td>actions</td><td>可以执行mutations，action运行有异步操作 <br>执行方式： <br>this.$store.dispatch(‘uesrnameAction’,‘肉丝666’)</td><td>actions: { //事件区域<br> uesrnameAction(context,value){<!-- --><br>context.commit(‘setUsername’,value) } <br>}</td></tr><tr><td>module</td><td>vuex的模块，允许有独立的以上4个属性</td><td></td></tr></tbody></table> 
<h3><a id="25___106"></a>2.5 高级：全局引用(映射)</h3> 
<ul><li>在vuex中提供一组map用于简化vuex的操作</li></ul> 
<h4><a id="251___112"></a>2.5.1 入门</h4> 
<ul><li>步骤一：导入对应map</li></ul> 
<pre><code class="prism language-js"><span class="token comment">//1 导入需要map</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>mapState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
</code></pre> 
<ul><li>步骤二：获得数据</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div&gt;
   {<!-- -->{token}} &lt;br/&gt;
   {<!-- -->{user}} &lt;br/&gt;
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
//1 导入需要map
import {mapState} from 'vuex'
/*
 1. mapState() vuex中定义函数
 2. 通过数组参数，确定从vuex中获得哪些变量的值
   mapState(['token','user'])
   此函数返回如下：
   {
     token() {
       return this.$store.state.token
     },
     user() {
       return this.$store.state.user
     }
   }
 3. { { } } 此语法是错误，需要将 mapState函数 返回对象抽取，即只要内容
   ...mapState(['token','user'])
   返回的内容如下：
   token() {
     return this.$store.state.token
   },
   user() {
     return this.$store.state.user
   }
*/
export default {
  computed: {
     ...mapState(['token','user'])
  },
}
&lt;/script&gt;

&lt;style&gt;

&lt;/style&gt;
</code></pre> 
<ul><li>步骤三：设置数据</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div&gt;
   {<!-- -->{token}} &lt;br/&gt;
   {<!-- -->{user}} &lt;br/&gt;
   &lt;input type="button" value="切换数据" @click="setToken('tom')"&gt;
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
//1 导入需要map
import {mapState,mapMutations} from 'vuex'
export default {
  computed: {
     ...mapState(['token','user'])
  },
  methods: {
     ...mapMutations(['setToken'])
  },
}

&lt;/script&gt;

&lt;style&gt;

&lt;/style&gt;
</code></pre> 
<h4><a id="252___205"></a>2.5.2 完整参考</h4> 
<ul><li>编写store.js</li></ul> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
 <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>        <span class="token comment">//存储数据</span>
  <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'jack'</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>      <span class="token comment">//修改数据</span>
  <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   state<span class="token punctuation">.</span>name <span class="token operator">=</span> value
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>       <span class="token comment">//触发mutation</span>
  <span class="token function">changeNameFn</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   content<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"changeName"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>

 <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>        <span class="token comment">//获得数据</span>
  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
  <span class="token function-variable function">getNameLen</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getters<span class="token punctuation">.</span>getName<span class="token punctuation">.</span>length
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>About.vue</li></ul> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="about"&gt;
  	&lt;h1&gt;This is an about page&lt;/h1&gt;
  	&lt;!-- 1.4 显示改变后的数据 --&gt;
  	{<!-- -->{showName}} &lt;br/&gt;
  	&lt;!-- 2.2 显示计算属性映射到的“属性别名” --&gt;
  	{<!-- -->{showName2}} &lt;br/&gt;
  	&lt;!-- 3.2 显示计算属性映射到的“默认属性别名” --&gt;
  	{<!-- -->{name}} &lt;br/&gt;
  	&lt;input type="text" placeholder="请输入存储的数据" v-model="username" value="" &gt;&lt;br/&gt;
  	&lt;input type="button" value="点击切换" @click="nameclick" &gt;
 &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;

import {mapState,mapMutations,mapActions,mapGetters} from 'vuex'
export default {
 data() {
  return {
   username : ""     //绑定数据
  }
 },

 methods: {
  nameclick(){
   //this.$store.commit("changeName", this.username );  //提交数据，用于修改vuex中的数据
   //this.$store.dispatch("changeNameFn" , this.username);
   this.changeName(this.username);  //1.2 执行映射后的新函数 this.changeName()
   console.info(this.$store.getters.getName)
  },
  ...mapMutations(['changeName'])   //1.1 将 `this.changeName()` 映射为 `this.$store.commit('changeName')`
 },

 computed: {
  showName(){
   return this.$store.state.name;   //1.3 显示vuex中的数据，通过“计算属性”实时显示
  },
  ...mapState({
   showName2 : state =&gt; state.name  //2.1 将 `this.showName2` 映射为 `this.$store.state.name`
  }),
  ...mapState(['name']) ,        //3.1 将 `this.name` 映射为 `this.$store.state.name`
  ...mapGetters(['getName'])      //4.1 将 `this.getName` 映射为 `this.$store.getters.getName`

 },

}

&lt;/script&gt;
</code></pre> 
<h3><a id="26___297"></a>2.6 流程总结</h3> 
<ul><li> <p>步骤一：package.json 确定vuex版本 （自动生成）</p> <pre><code class="prism language-js"><span class="token string-property property">"vuex"</span><span class="token operator">:</span> <span class="token string">"^3.0.1"</span>
</code></pre> </li></ul> 
<p><img src="https://images2.imgbox.com/28/d2/iPhvYnVT_o.png" alt="在这里插入图片描述"><br> 步骤二：vuex配置文件（src/store.js） （自动生成）</p> 
<p><img src="https://images2.imgbox.com/70/06/v7myB7F0_o.png" alt="在这里插入图片描述"></p> 
<ul><li></ul> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
 <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>           <span class="token comment">//数据存储区域</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>

 <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>         <span class="token comment">//函数声明区域（修改数据）</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>

 <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>          <span class="token comment">//事件区域（执行函数）</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>步骤三：main.js中配置vuex （自动生成）<br> <img src="https://images2.imgbox.com/e4/f7/nNXysjWO_o.png" alt="在这里插入图片描述"></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/71ad7f30fd080545f3aca3ef6f2cc770/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows c&#43;&#43;qt获取本机网卡信息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/02c2bfcd35aace53f977cf52770d34ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java高级实战--高级开发和架构师的秘籍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>