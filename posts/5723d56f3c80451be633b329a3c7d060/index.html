<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>阿里云OSS对象存储上传文件（二）C&#43;&#43;上传（含代码） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="阿里云OSS对象存储上传文件（二）C&#43;&#43;上传（含代码）" />
<meta property="og:description" content="因为实际项目需求，需要使用阿里云oss的对象存储来上传文件。本篇将讲述个人代码使用上的经验，不代表适用所有人，仅供参考。
代码尝试前，请先确保SDK安装和lib文件编译等预备工作，详细可查看上一篇文章：
阿里云OSS对象存储上传文件（一）SDK安装
环境是windows系统，vs2017&#43;qt5.14（vs2015&#43;qt5.6也尝试过，效果都一样）
官方示例代码：官方文档：C&#43;&#43;上传文件
一、核心需求
简单查看官方文档后，会发现它具备了好几种上传方法，包括简单上传，追加上传，断点续传上传，分片上传，等。因为我的项目核心需求是同时上传单个文件，所以过程中尝试了简单上传和分片上传，其他未做尝试，有兴趣可自行实现。
另一要求则是过程中需要给出进度条的ui提示，这需要获取oss的进度条反馈信息，这部分sdk也是有实现的。
以下先简单讲述以下简单上传和分片上传的优缺点。
（1）简单上传
即直接单次提交整个文件，只要不超过5GB即可。这种方法步骤比较简单，但同时没有办法实现中途中断功能（有人实现了可在评论区告知），并可能因为文件过大，而导致上传过程阻塞过久，往往可能一两分钟，又没办法停止，体验一般。
（2）分片上传
即把文件分成若干片段，分别上传。这种适合大文件的上传，最大不超过48.8TB。当然，几十MB大小的文件也同样可以上传，这个都没有问题。相较于简单上传，分片上传的灵活性显然提高了许多。如果想要实现停止上传，只要完成当前分片的上传把并退出上传循环即可。因为没有到最终的整合分片环节，所以云上的文件并不会最终生成（有没有缓存文件不知道）。
特别说明：
（1）值得一提的是，官方示例中的分片大小是100k，这会造成分片数量太过庞大，导致循环上传中各种初始化资源大量重复。比如上传一个100M的视频文件，用简单上传来整个文件上传，以及使用分片上传，按照100k分片，循环上传1000次，耗时上是有显著增加的。经过尝试，我认为控制在1M的分片会比较恰当，网络通畅的情况下几乎是瞬间上传完毕，不会造成明显的阻塞感。
（2）官方文档中有进度条回调的使用，但注意，不管是对简单上传还是分片上传，它的本质上都是对单次上传的进度条反抗，放在分片上传中，就是对单个切片的进度反馈，而不是一整个的。这在我实现分片上传中的进度条显示中遇到了困难。
a.初步的尝试，是利用切片的数量进行进度显示，即假如分片了100份，那当前上传到哪一片，自然就得到了当前的进度。当你知道的，切片不一定会超过100份，假如只有10份，那进度反馈将是跳跃式的，给人直观上不好。
b.最终的方案是，利用一开始对文件总大小的记录，以及当前上传切片编号，当前上传切片的进度反馈，自行实现数字累加，以达到真实的进度反馈。这部分比较繁琐，但也算是符合常理的。
OK，讲了这么多，接下来详细讲述以下代码。
二、简单上传
//进度条回调 void ProgressCallback(size_t increment, int64_t transfered, int64_t total, void* userData) { std::cout &lt;&lt; &#34;ProgressCallback[&#34; &lt;&lt; userData &lt;&lt; &#34;] =&gt; &#34; &lt;&lt; increment &lt;&lt;&#34; ,&#34; &lt;&lt; transfered &lt;&lt; &#34;,&#34; &lt;&lt; total &lt;&lt; std::endl; //alioosProgressCallback是我创建的全局回调对象，在这里间接地将进度信息发送到外部 alioosProgressCallback.send_ProgressCallback(transfered, total); } //简单上传 bool AliossUpload::PutObjectFromFile() { //根据自己实际情况，初始OSS账号信息 /* 初始化OSS账号信息 */ /* 如何获取AccessKeyId和AccessKeySecret: https://help.aliyun.com/knowledge_detail/48699.html */ std::string AccessKeyId = _AccessKeyId." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5723d56f3c80451be633b329a3c7d060/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-21T15:10:41+08:00" />
<meta property="article:modified_time" content="2023-08-21T15:10:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">阿里云OSS对象存储上传文件（二）C&#43;&#43;上传（含代码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>因为实际项目需求，需要使用阿里云oss的对象存储来上传文件。本篇将讲述个人代码使用上的经验，不代表适用所有人，仅供参考。<br> 代码尝试前，请先确保SDK安装和lib文件编译等预备工作，详细可查看上一篇文章：<br> <a href="https://blog.csdn.net/Larry_Yanan/article/details/132172724?spm=1001.2014.3001.5501">阿里云OSS对象存储上传文件（一）SDK安装</a></p> 
<p>环境是windows系统，vs2017+qt5.14（vs2015+qt5.6也尝试过，效果都一样）<br> 官方示例代码：<a href="https://help.aliyun.com/zh/oss/developer-reference/overview-67?spm=a2c4g.11186623.0.0.1d5737f20IQSzE" rel="nofollow">官方文档：C++上传文件</a></p> 
<p>一、核心需求<br> 简单查看官方文档后，会发现它具备了好几种上传方法，包括简单上传，追加上传，断点续传上传，分片上传，等。因为我的项目核心需求是同时上传单个文件，所以过程中尝试了简单上传和分片上传，其他未做尝试，有兴趣可自行实现。<br> 另一要求则是过程中需要给出进度条的ui提示，这需要获取oss的进度条反馈信息，这部分sdk也是有实现的。<br> 以下先简单讲述以下简单上传和分片上传的优缺点。<br> （1）简单上传<br> 即直接单次提交整个文件，只要不超过5GB即可。这种方法步骤比较简单，但同时没有办法实现中途中断功能（有人实现了可在评论区告知），并可能因为文件过大，而导致上传过程阻塞过久，往往可能一两分钟，又没办法停止，体验一般。<br> （2）分片上传<br> 即把文件分成若干片段，分别上传。这种适合大文件的上传，最大不超过48.8TB。当然，几十MB大小的文件也同样可以上传，这个都没有问题。相较于简单上传，分片上传的灵活性显然提高了许多。如果想要实现停止上传，只要完成当前分片的上传把并退出上传循环即可。因为没有到最终的整合分片环节，所以云上的文件并不会最终生成（有没有缓存文件不知道）。<br> 特别说明：<br> （1）值得一提的是，官方示例中的分片大小是100k，这会造成分片数量太过庞大，导致循环上传中各种初始化资源大量重复。比如上传一个100M的视频文件，用简单上传来整个文件上传，以及使用分片上传，按照100k分片，循环上传1000次，耗时上是有显著增加的。经过尝试，我认为控制在1M的分片会比较恰当，网络通畅的情况下几乎是瞬间上传完毕，不会造成明显的阻塞感。<br> （2）官方文档中有进度条回调的使用，但注意，不管是对简单上传还是分片上传，它的本质上都是对单次上传的进度条反抗，放在分片上传中，就是对单个切片的进度反馈，而不是一整个的。这在我实现分片上传中的进度条显示中遇到了困难。<br> a.初步的尝试，是利用切片的数量进行进度显示，即假如分片了100份，那当前上传到哪一片，自然就得到了当前的进度。当你知道的，切片不一定会超过100份，假如只有10份，那进度反馈将是跳跃式的，给人直观上不好。<br> b.最终的方案是，利用一开始对文件总大小的记录，以及当前上传切片编号，当前上传切片的进度反馈，自行实现数字累加，以达到真实的进度反馈。这部分比较繁琐，但也算是符合常理的。<br> OK，讲了这么多，接下来详细讲述以下代码。</p> 
<p>二、简单上传</p> 
<pre><code class="prism language-cpp"><span class="token comment">//进度条回调</span>
<span class="token keyword">void</span> <span class="token function">ProgressCallback</span><span class="token punctuation">(</span>size_t increment<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> transfered<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> total<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> userData<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ProgressCallback["</span> <span class="token operator">&lt;&lt;</span> userData <span class="token operator">&lt;&lt;</span> <span class="token string">"] =&gt; "</span> <span class="token operator">&lt;&lt;</span>
                 increment <span class="token operator">&lt;&lt;</span><span class="token string">" ,"</span> <span class="token operator">&lt;&lt;</span> transfered <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> total <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
                 
	<span class="token comment">//alioosProgressCallback是我创建的全局回调对象，在这里间接地将进度信息发送到外部</span>
    alioosProgressCallback<span class="token punctuation">.</span><span class="token function">send_ProgressCallback</span><span class="token punctuation">(</span>transfered<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//简单上传</span>
<span class="token keyword">bool</span> <span class="token class-name">AliossUpload</span><span class="token double-colon punctuation">::</span><span class="token function">PutObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//根据自己实际情况，初始OSS账号信息</span>
    <span class="token comment">/* 初始化OSS账号信息 */</span>
    <span class="token comment">/* 如何获取AccessKeyId和AccessKeySecret:
    https://help.aliyun.com/knowledge_detail/48699.html
    */</span>
    std<span class="token double-colon punctuation">::</span>string AccessKeyId <span class="token operator">=</span> _AccessKeyId<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string AccessKeySecret <span class="token operator">=</span> _AccessKeySecret<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 根据文档填写所需Endpoint:
    https://help.aliyun.com/document_detail/31837.html?spm=a2c4g.11186623.6.586.48977f5ev3c5Ht
    */</span>
    std<span class="token double-colon punctuation">::</span>string Endpoint <span class="token operator">=</span> _Endpoint<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 填写你的存储空间名*/</span>
    std<span class="token double-colon punctuation">::</span>string BucketName <span class="token operator">=</span> _BucketName<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* ObjectName表示上传文件到OSS时需要指定包含文件后缀在内的完整路径，例如image/bkg1.png文件 */</span>
    std<span class="token double-colon punctuation">::</span>string ObjectName <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span>_ObjectName<span class="token punctuation">.</span><span class="token function">toLocal8Bit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 本地文件实际路径，注意\要替换为/，不然中文路径会出问题 */</span>
    std<span class="token double-colon punctuation">::</span>string FilePathAndName <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span>_FilePathAndName<span class="token punctuation">.</span><span class="token function">toLocal8Bit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 初始化网络等资源 */</span>
    <span class="token function">InitializeSdk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 基本参数 */</span>
    ClientConfiguration conf<span class="token punctuation">;</span>
    OssClient <span class="token function">client</span><span class="token punctuation">(</span>Endpoint<span class="token punctuation">,</span> AccessKeyId<span class="token punctuation">,</span> AccessKeySecret<span class="token punctuation">,</span> conf<span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>iostream<span class="token operator">&gt;</span> content <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>fstream<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>FilePathAndName<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>in<span class="token operator">|</span>std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    PutObjectRequest <span class="token function">request</span><span class="token punctuation">(</span>BucketName<span class="token punctuation">,</span> ObjectName<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//进度回调</span>
    TransferProgress progressCallback <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> ProgressCallback <span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">setTransferProgress</span><span class="token punctuation">(</span>progressCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 上传文件 */</span>
    <span class="token keyword">auto</span> outcome <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">PutObject</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ret <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>outcome<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/* 异常处理 */</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"PutObject fail"</span> <span class="token operator">&lt;&lt;</span>
            <span class="token string">",code:"</span> <span class="token operator">&lt;&lt;</span> outcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>
            <span class="token string">",message:"</span> <span class="token operator">&lt;&lt;</span> outcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>
            <span class="token string">",requestId:"</span> <span class="token operator">&lt;&lt;</span> outcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        ret <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 释放网络等资源 */</span>
    <span class="token function">ShutdownSdk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"upload oss"</span><span class="token operator">&lt;&lt;</span>ret<span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>简单上传较为简单，而且也是实现分片上传的基础代码，注意一下中文路径的问题即可。</p> 
<p>二、分片上传<br> 一下子好像复杂了很多，哈哈，没关系，我们慢慢看。<br> 简单来说就是，初始化、循环上传、最终整合文件并释放资源，三个步骤。<br> （multipart_progress_type=1和=2分别对应两种进度条实现的方式）</p> 
<pre><code class="prism language-cpp"><span class="token comment">//进度回调</span>
<span class="token keyword">void</span> <span class="token function">ProgressCallback</span><span class="token punctuation">(</span>size_t increment<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> transfered<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> total<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> userData<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ProgressCallback["</span> <span class="token operator">&lt;&lt;</span> userData <span class="token operator">&lt;&lt;</span> <span class="token string">"] =&gt; "</span> <span class="token operator">&lt;&lt;</span>
                 increment <span class="token operator">&lt;&lt;</span><span class="token string">" ,"</span> <span class="token operator">&lt;&lt;</span> transfered <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> total <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">//alioosProgressCallback是我创建的全局回调对象，在这里间接地将进度信息发送到外部</span>
    <span class="token comment">/*实时计算当前进度条信息，其中设置了好几个临时的中间变量，
    其实都是利用当前切片数量（编号），当前切片的上传进度，整个文件的大小来做计算的
    */</span>
    alioosProgressCallback<span class="token punctuation">.</span>multipart_current_transfered_size <span class="token operator">-=</span> alioosProgressCallback<span class="token punctuation">.</span>multipart_last_add_size<span class="token punctuation">;</span>
    alioosProgressCallback<span class="token punctuation">.</span>multipart_current_transfered_size <span class="token operator">+=</span> transfered<span class="token punctuation">;</span>
    alioosProgressCallback<span class="token punctuation">.</span>multipart_last_add_size <span class="token operator">=</span> transfered<span class="token punctuation">;</span>
    alioosProgressCallback<span class="token punctuation">.</span><span class="token function">send_ProgressCallback</span><span class="token punctuation">(</span>alioosProgressCallback<span class="token punctuation">.</span>multipart_current_transfered_size<span class="token punctuation">,</span> alioosProgressCallback<span class="token punctuation">.</span>multipart_file_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    

<span class="token punctuation">}</span>
<span class="token keyword">bool</span> <span class="token class-name">AliossUpload</span><span class="token double-colon punctuation">::</span><span class="token function">MultipartUploadFileFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//置真上传标志</span>
    is_upload <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">/* 初始化OSS账号信息 */</span>
    std<span class="token double-colon punctuation">::</span>string AccessKeyId <span class="token operator">=</span> _AccessKeyId<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string AccessKeySecret <span class="token operator">=</span> _AccessKeySecret<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string Endpoint <span class="token operator">=</span> _Endpoint<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 填写Bucket名称，例如examplebucket */</span>
    std<span class="token double-colon punctuation">::</span>string BucketName <span class="token operator">=</span> _BucketName<span class="token punctuation">.</span><span class="token function">toStdString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* ObjectName表示上传文件到OSS时需要指定包含文件后缀在内的完整路径，例如image/bkg1.png文件 */</span>
    std<span class="token double-colon punctuation">::</span>string ObjectName <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span>_ObjectName<span class="token punctuation">.</span><span class="token function">toLocal8Bit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 本地文件实际路径，注意\要替换为/，不然中文路径会出问题 */</span>
    std<span class="token double-colon punctuation">::</span>string FilePathAndName <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span>_FilePathAndName<span class="token punctuation">.</span><span class="token function">toLocal8Bit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 初始化网络等资源 */</span>
    <span class="token function">InitializeSdk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 基本参数 */</span>
    ClientConfiguration conf<span class="token punctuation">;</span>
    OssClient <span class="token function">client</span><span class="token punctuation">(</span>Endpoint<span class="token punctuation">,</span> AccessKeyId<span class="token punctuation">,</span> AccessKeySecret<span class="token punctuation">,</span> conf<span class="token punctuation">)</span><span class="token punctuation">;</span>
    InitiateMultipartUploadRequest <span class="token function">initUploadRequest</span><span class="token punctuation">(</span>BucketName<span class="token punctuation">,</span> ObjectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*（可选）请参见如下示例设置存储类型 */</span>
    <span class="token comment">//initUploadRequest.MetaData().addHeader("x-oss-storage-class", "Standard");</span>

    <span class="token comment">/* 初始化分片上传事件 */</span>
    <span class="token keyword">auto</span> uploadIdResult <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">InitiateMultipartUpload</span><span class="token punctuation">(</span>initUploadRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> uploadId <span class="token operator">=</span> uploadIdResult<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UploadId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string fileToUpload <span class="token operator">=</span> FilePathAndName<span class="token punctuation">;</span>
    <span class="token keyword">int64_t</span> partSize <span class="token operator">=</span> UPLOAD_MAX<span class="token punctuation">;</span><span class="token comment">//1024*1024</span>
    PartList partETagList<span class="token punctuation">;</span>
    <span class="token keyword">auto</span> fileSize <span class="token operator">=</span> <span class="token function">getFileSize</span><span class="token punctuation">(</span>fileToUpload<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> partCount <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>fileSize <span class="token operator">/</span> partSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 计算分片个数 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fileSize <span class="token operator">%</span> partSize <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        partCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"fileSize"</span><span class="token operator">&lt;&lt;</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int64_t</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>fileSize<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"partCount"</span><span class="token operator">&lt;&lt;</span>partCount<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>multipart_progress_type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//利用分片总数和当前上传分片数来当做进度反馈，这样不需要在回调函数做处理</span>
        emit <span class="token function">sig_upload_progress</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> partCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>multipart_progress_type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//初始化进度回调类，额外自行计算（比较推荐）</span>
        alioosProgressCallback<span class="token punctuation">.</span><span class="token function">set_progress_type</span><span class="token punctuation">(</span>multipart_progress_type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        alioosProgressCallback<span class="token punctuation">.</span><span class="token function">set_multipart_progress_cfg</span><span class="token punctuation">(</span>fileSize<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 对每一个分片进行上传 */</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> partCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>is_upload<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">//中途中断</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">auto</span> skipBytes <span class="token operator">=</span> partSize <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> size <span class="token operator">=</span> <span class="token punctuation">(</span>partSize <span class="token operator">&lt;</span> fileSize <span class="token operator">-</span> skipBytes<span class="token punctuation">)</span> <span class="token operator">?</span> partSize <span class="token operator">:</span> <span class="token punctuation">(</span>fileSize <span class="token operator">-</span> skipBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>iostream<span class="token operator">&gt;</span> content <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>fstream<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>fileToUpload<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>in<span class="token operator">|</span>std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
        content<span class="token operator">-&gt;</span><span class="token function">seekg</span><span class="token punctuation">(</span>skipBytes<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>beg<span class="token punctuation">)</span><span class="token punctuation">;</span>

        UploadPartRequest <span class="token function">uploadPartRequest</span><span class="token punctuation">(</span>BucketName<span class="token punctuation">,</span> ObjectName<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        uploadPartRequest<span class="token punctuation">.</span><span class="token function">setContentLength</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        uploadPartRequest<span class="token punctuation">.</span><span class="token function">setUploadId</span><span class="token punctuation">(</span>uploadId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        uploadPartRequest<span class="token punctuation">.</span><span class="token function">setPartNumber</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//针对每一个分片做的回调，需要在回调函数中详细计算当前进度值</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>multipart_progress_type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            TransferProgress progressCallback <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> ProgressCallback <span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            uploadPartRequest<span class="token punctuation">.</span><span class="token function">setTransferProgress</span><span class="token punctuation">(</span>progressCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//设置当前编号，重置状态</span>
            alioosProgressCallback<span class="token punctuation">.</span><span class="token function">set_multipart_progress_current_part_num</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">auto</span> uploadPartOutcome <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">UploadPart</span><span class="token punctuation">(</span>uploadPartRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uploadPartOutcome<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            Part <span class="token function">part</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> uploadPartOutcome<span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ETag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            partETagList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"uploadPart fail"</span> <span class="token operator">&lt;&lt;</span>
            <span class="token string">",code:"</span> <span class="token operator">&lt;&lt;</span> uploadPartOutcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>
            <span class="token string">",message:"</span> <span class="token operator">&lt;&lt;</span> uploadPartOutcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>
            <span class="token string">",requestId:"</span> <span class="token operator">&lt;&lt;</span> uploadPartOutcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//根据当前上传分片数，发送进度值</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>multipart_progress_type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            emit <span class="token function">sig_upload_progress</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> partCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 完成分片上传 */</span>
    CompleteMultipartUploadRequest <span class="token function">request</span><span class="token punctuation">(</span>BucketName<span class="token punctuation">,</span> ObjectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">setUploadId</span><span class="token punctuation">(</span>uploadId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">setPartList</span><span class="token punctuation">(</span>partETagList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*（可选）请参见如下示例设置读写权限ACL */</span>
    <span class="token comment">//request.setAcl(CannedAccessControlList::Private);</span>

    <span class="token keyword">auto</span> outcome <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">CompleteMultipartUpload</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ret <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>outcome<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/* 异常处理 */</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"CompleteMultipartUpload fail"</span> <span class="token operator">&lt;&lt;</span>
        <span class="token string">",code:"</span> <span class="token operator">&lt;&lt;</span> outcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>
        <span class="token string">",message:"</span> <span class="token operator">&lt;&lt;</span> outcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>
        <span class="token string">",requestId:"</span> <span class="token operator">&lt;&lt;</span> outcome<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        ret <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"MultipartUploadFileFromFile succeed..."</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 释放网络等资源 */</span>
    <span class="token function">ShutdownSdk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>三、示例代码文件，及初始化使用<br> 资源在文章顶部有，请自行尝试，代码比较杂乱，多多包涵。<br> 封装成文件后，就可以在外部使用啦。像这样多线程运行，也不会阻塞，释放资源也是OK的。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">XXX</span><span class="token double-colon punctuation">::</span><span class="token function">upload_record_file_alioss</span><span class="token punctuation">(</span>QString AccessKeyId<span class="token punctuation">,</span> QString AccessKeySecret<span class="token punctuation">,</span> QString Endpoint<span class="token punctuation">,</span> QString BucketName<span class="token punctuation">,</span> QString ObjectName<span class="token punctuation">,</span> QString FilePathAndName<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ptr_aliossUpload <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>ptr_aliossUpload_thread<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        ptr_aliossUpload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">AliossUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>ptr_aliossUpload<span class="token punctuation">,</span> <span class="token operator">&amp;</span>AliossUpload<span class="token double-colon punctuation">::</span>sig_upload_stop<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>XXX<span class="token double-colon punctuation">::</span>slot_record_oss_upload_stop<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>ptr_aliossUpload<span class="token punctuation">,</span> <span class="token operator">&amp;</span>AliossUpload<span class="token double-colon punctuation">::</span>sig_upload_error<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>XXX<span class="token double-colon punctuation">::</span>slot_record_oss_upload_error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>ptr_aliossUpload<span class="token punctuation">,</span> <span class="token operator">&amp;</span>AliossUpload<span class="token double-colon punctuation">::</span>sig_upload_finish<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>XXX<span class="token double-colon punctuation">::</span>slot_record_oss_upload_finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>ptr_aliossUpload<span class="token punctuation">,</span> <span class="token operator">&amp;</span>AliossUpload<span class="token double-colon punctuation">::</span>sig_upload_progress<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>XXX<span class="token double-colon punctuation">::</span>slot_record_oss_upload_ProgressCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ptr_aliossUpload<span class="token operator">-&gt;</span><span class="token function">set_upload_cfg</span><span class="token punctuation">(</span>AccessKeyId<span class="token punctuation">,</span> AccessKeySecret<span class="token punctuation">,</span> Endpoint<span class="token punctuation">,</span> BucketName<span class="token punctuation">,</span> ObjectName<span class="token punctuation">,</span> FilePathAndName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        ptr_aliossUpload_thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ptr_aliossUpload<span class="token operator">-&gt;</span><span class="token function">moveToThread</span><span class="token punctuation">(</span>ptr_aliossUpload_thread<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>ptr_aliossUpload_thread<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QThread<span class="token double-colon punctuation">::</span>started<span class="token punctuation">,</span> ptr_aliossUpload<span class="token punctuation">,</span> <span class="token operator">&amp;</span>AliossUpload<span class="token double-colon punctuation">::</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>ptr_aliossUpload_thread<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QThread<span class="token double-colon punctuation">::</span>finished<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token keyword">mutable</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"QThread-finished..."</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> ptr_aliossUpload<span class="token punctuation">;</span>
            ptr_aliossUpload <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> ptr_aliossUpload_thread<span class="token punctuation">;</span>
            ptr_aliossUpload_thread <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        ptr_aliossUpload_thread<span class="token operator">-&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>四、疑问<br> 进度条的回调还是有些搞不明白，我对回调函数其实理解不深，不太明白为什么不能使用类成员函数来进行回调，导致我额外创建了个中间类来发送信号，感觉特别别扭，不知道还有没有其他的实现方式。<br> 另外，分片上传中途停止后，之前上传的分片去哪了，会不会在云端残留，会不会导致资源外泄等情况，这部分也还是没有检查的。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac5eb760845487e1613ed88825434b22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小猫爪：嵌入式小知识12 - ISO14229-1（UDS）简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/405b5e8eb287022ef0227fd6694c72d4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">velero和minio实现k8s数据的备份和恢复</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>