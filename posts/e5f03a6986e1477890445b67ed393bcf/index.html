<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>é˜¿é‡Œäº‘OSSä»£ç é›†æˆéƒ¨åˆ†é—®é¢˜åˆ†æ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="é˜¿é‡Œäº‘OSSä»£ç é›†æˆéƒ¨åˆ†é—®é¢˜åˆ†æ" />
<meta property="og:description" content="å…¬å¸å†…éƒ¨å¼€å‘äº†ä¸€ä¸ªæ–‡ä»¶ç›¸å…³çš„åº”ç”¨ï¼Œç”±äºæœåŠ¡å™¨å¸¦å®½é™åˆ¶å¯¼è‡´å¤šä¸ªç”¨æˆ·åŒæ—¶ä¸Šä¼ æˆ–è€…ä¸‹è½½æ–‡ä»¶æ—¶é€Ÿåº¦å¾ˆæ…¢ï¼Œé‚å°†æ–‡ä»¶è¿ç§»è‡³é˜¿é‡Œäº‘OSSæœåŠ¡å™¨ã€‚ä¸‹é¢æ˜¯è¿ç§»çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„éƒ¨åˆ†é—®é¢˜ã€‚
é—®é¢˜1. è·¨åŸŸé”™è¯¯ é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š
Access to XMLHttpRequest at &#39;http://xxx.oss-cn-hangzhou.aliyuncs.com/test/logo.jpg&#39; from origin &#39;http://192.168.29.131:8080&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. è¯¥é—®é¢˜æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ­£ç¡®é…ç½®è·¨åŸŸè§„åˆ™ã€‚
ç™»å½•OSSç®¡ç†æ§åˆ¶å°ã€‚å•å‡»Bucket åˆ—è¡¨ï¼Œç„¶åå•å‡»ç›®æ ‡Bucketåç§°ã€‚åœ¨å·¦ä¾§å¯¼èˆªæ ï¼Œé€‰æ‹©æ•°æ®å®‰å…¨ &gt; è·¨åŸŸè®¾ç½®ã€‚åœ¨è·¨åŸŸè®¾ç½®é¡µé¢ï¼Œå•å‡»åˆ›å»ºè§„åˆ™ã€‚åœ¨åˆ›å»ºè·¨åŸŸè§„åˆ™é¢æ¿ï¼ŒæŒ‰ä»¥ä¸‹è¯´æ˜é…ç½®å„é¡¹å‚æ•°ï¼Œå…¶ä»–å‚æ•°ä¿ç•™é»˜è®¤é…ç½®ã€‚ æ¥æºï¼šè®¾ç½®ä¸º*ã€‚å…è®¸Methodsï¼šé€‰ä¸­GETã€POSTã€PUTã€DELETEã€HEADã€‚å…è®¸Headersï¼šè®¾ç½®ä¸º*ã€‚æš´éœ²Headersï¼šè®¾ç½®ä¸ºæŒ‡å®šå€¼æˆ–è€…ä¸å¡«ã€‚ å•å‡»ç¡®å®šã€‚ é—®é¢˜2. Access denied by authorizerâ€™s policy. å…·ä½“é”™è¯¯ä»£ç å¦‚ä¸‹ï¼š
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;Error&gt; &lt;Code&gt;AccessDenied&lt;/Code&gt; &lt;Message&gt;Access denied by authorizer&#39;s policy.&lt;/Message&gt; &lt;RequestId&gt;655EED1451FCAD1916A298B4&lt;/RequestId&gt; &lt;HostId&gt;xxx.oss-cn-hangzhou.aliyuncs.com&lt;/HostId&gt; &lt;AccessDeniedDetail&gt; &lt;PolicyType&gt;SessionPolicy&lt;/PolicyType&gt; &lt;AuthPrincipalOwnerId&gt;1883463381918383&lt;/AuthPrincipalOwnerId&gt; &lt;AuthPrincipalType&gt;AssumedRoleUser&lt;/AuthPrincipalType&gt; &lt;AuthPrincipalDisplayName&gt;devram:251264809289383873&lt;/AuthPrincipalDisplayName&gt; &lt;NoPermissionType&gt;ImplicitDeny&lt;/NoPermissionType&gt; &lt;AuthAction&gt;oss:PutObject&lt;/AuthAction&gt; &lt;/AccessDeniedDetail&gt; &lt;EC&gt;0003-00000301&lt;/EC&gt; &lt;RecommendDoc&gt;https://api." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e5f03a6986e1477890445b67ed393bcf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-05T09:45:59+08:00" />
<meta property="article:modified_time" content="2023-12-05T09:45:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">é˜¿é‡Œäº‘OSSä»£ç é›†æˆéƒ¨åˆ†é—®é¢˜åˆ†æ</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>å…¬å¸å†…éƒ¨å¼€å‘äº†ä¸€ä¸ªæ–‡ä»¶ç›¸å…³çš„åº”ç”¨ï¼Œç”±äºæœåŠ¡å™¨å¸¦å®½é™åˆ¶å¯¼è‡´å¤šä¸ªç”¨æˆ·åŒæ—¶ä¸Šä¼ æˆ–è€…ä¸‹è½½æ–‡ä»¶æ—¶é€Ÿåº¦å¾ˆæ…¢ï¼Œé‚å°†æ–‡ä»¶è¿ç§»è‡³é˜¿é‡Œäº‘OSSæœåŠ¡å™¨ã€‚ä¸‹é¢æ˜¯è¿ç§»çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„éƒ¨åˆ†é—®é¢˜ã€‚</p> 
</blockquote> 
<h3><a id="1__3"></a>é—®é¢˜1. è·¨åŸŸé”™è¯¯</h3> 
<p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p> 
<pre><code>Access to XMLHttpRequest at 'http://xxx.oss-cn-hangzhou.aliyuncs.com/test/logo.jpg' from origin 'http://192.168.29.131:8080' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
</code></pre> 
<p>è¯¥é—®é¢˜æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ­£ç¡®é…ç½®è·¨åŸŸè§„åˆ™ã€‚</p> 
<ol><li>ç™»å½•<a href="https://oss.console.aliyun.com/?spm=a2c4g.11186623.0.0.2a971be1qrYtuH" rel="nofollow">OSSç®¡ç†æ§åˆ¶å°</a>ã€‚</li><li>å•å‡»<strong>Bucket åˆ—è¡¨</strong>ï¼Œç„¶åå•å‡»ç›®æ ‡Bucketåç§°ã€‚</li><li>åœ¨å·¦ä¾§å¯¼èˆªæ ï¼Œé€‰æ‹©<strong>æ•°æ®å®‰å…¨</strong> &gt; <strong>è·¨åŸŸè®¾ç½®</strong>ã€‚</li><li>åœ¨<strong>è·¨åŸŸè®¾ç½®</strong>é¡µé¢ï¼Œå•å‡»<strong>åˆ›å»ºè§„åˆ™</strong>ã€‚</li><li>åœ¨<strong>åˆ›å»ºè·¨åŸŸè§„åˆ™</strong>é¢æ¿ï¼ŒæŒ‰ä»¥ä¸‹è¯´æ˜é…ç½®å„é¡¹å‚æ•°ï¼Œå…¶ä»–å‚æ•°ä¿ç•™é»˜è®¤é…ç½®ã€‚ 
  <ul><li><strong>æ¥æº</strong>ï¼šè®¾ç½®ä¸º<code>*</code>ã€‚</li><li><strong>å…è®¸Methods</strong>ï¼šé€‰ä¸­<code>GET</code>ã€<code>POST</code>ã€<code>PUT</code>ã€<code>DELETE</code>ã€<code>HEAD</code>ã€‚</li><li><strong>å…è®¸Headers</strong>ï¼šè®¾ç½®ä¸º<code>*</code>ã€‚</li><li><strong>æš´éœ²Headers</strong>ï¼šè®¾ç½®ä¸ºæŒ‡å®šå€¼æˆ–è€…ä¸å¡«ã€‚</li></ul> </li><li>å•å‡»<strong>ç¡®å®š</strong>ã€‚</li></ol> 
<h3><a id="2_Access_denied_by_authorizers_policy_20"></a>é—®é¢˜2. Access denied by authorizerâ€™s policy.</h3> 
<p>å…·ä½“é”™è¯¯ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Error</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Code</span><span class="token punctuation">&gt;</span></span>AccessDenied<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Code</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span><span class="token punctuation">&gt;</span></span>Access denied by authorizer's policy.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Message</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequestId</span><span class="token punctuation">&gt;</span></span>655EED1451FCAD1916A298B4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RequestId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostId</span><span class="token punctuation">&gt;</span></span>xxx.oss-cn-hangzhou.aliyuncs.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AccessDeniedDetail</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PolicyType</span><span class="token punctuation">&gt;</span></span>SessionPolicy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PolicyType</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthPrincipalOwnerId</span><span class="token punctuation">&gt;</span></span>1883463381918383<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthPrincipalOwnerId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthPrincipalType</span><span class="token punctuation">&gt;</span></span>AssumedRoleUser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthPrincipalType</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthPrincipalDisplayName</span><span class="token punctuation">&gt;</span></span>devram:251264809289383873<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthPrincipalDisplayName</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NoPermissionType</span><span class="token punctuation">&gt;</span></span>ImplicitDeny<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NoPermissionType</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthAction</span><span class="token punctuation">&gt;</span></span>oss:PutObject<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthAction</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AccessDeniedDetail</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EC</span><span class="token punctuation">&gt;</span></span>0003-00000301<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EC</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>https://api.aliyun.com/troubleshoot?q=0003-00000301<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Error</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_41"></a>é—®é¢˜è§£æï¼š</h4> 
<p>Webç«¯ä¸Šä¼ æ–‡ä»¶è‡³OSSæœåŠ¡å™¨ï¼Œä¸ºé¿å…æš´éœ²é˜¿é‡Œäº‘è´¦å·è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰ï¼Œé€šå¸¸ä¸´æ—¶è®¿é—®å‡­è¯çš„æ–¹å¼æ‰§è¡ŒOSSç›¸å…³æ“ä½œã€‚<br> ä¸´æ—¶è®¿é—®å‡­è¯åŒ…æ‹¬ä¸´æ—¶è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰å’Œå®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰ã€‚<br> åœ¨è·å–è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰å’Œå®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰æ—¶ï¼Œéœ€è¦åˆ¶å®šç­–ç•¥ï¼ˆPolicyï¼‰ï¼Œè€Œç­–ç•¥ä¸­åˆ™æŒ‡å®šäº†æƒé™ä»¥åŠèµ„æºç›®å½•ç­‰å†…å®¹ã€‚å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"Version"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token punctuation">{<!-- --></span>
           <span class="token string-property property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
           <span class="token string-property property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
             <span class="token string">"oss:PutObject"</span> <span class="token comment">// ä¸Šä¼ æ–‡ä»¶æƒé™</span>
           <span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token string-property property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
             <span class="token string">"acs:oss:*:*:examplebucket/xxx/*"</span><span class="token punctuation">,</span> <span class="token comment">// examplebucketä¸ºbucketåç§°ï¼Œå…¶ä¸­xxxä¸ºä¸Šä¼ æ–‡ä»¶ç›®å½•</span>
           <span class="token punctuation">]</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>æ³¨æ„ï¼šéœ€è¦é…ç½®Actionä»¥åŠResourceï¼Œå¹¶ä¸”Resourceä¸­æŒ‡å®šçš„ç›®å½•éœ€è¦ä¸å®é™…ç›®å½•ä¸€è‡´</strong><br> è¯¦ç»†è§£å†³æ–¹æ¡ˆè§ï¼š<a href="https://api.aliyun.com/troubleshoot?q=0003-00000301" rel="nofollow">https://api.aliyun.com/troubleshoot?q=0003-00000301</a></p> 
<h3><a id="3_The_security_token_you_provided_has_expired_64"></a>é—®é¢˜3. The security token you provided has expired.</h3> 
<p>è¯¦ç»†é”™è¯¯ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Error</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Code</span><span class="token punctuation">&gt;</span></span>SecurityTokenExpired<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Code</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span><span class="token punctuation">&gt;</span></span>The security token you provided has expired.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Message</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequestId</span><span class="token punctuation">&gt;</span></span>655EED5451FCAD1916A298B4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RequestId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostId</span><span class="token punctuation">&gt;</span></span>xxx.oss-cn-hangzhou.aliyuncs.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SecurityToken</span><span class="token punctuation">&gt;</span></span>CAISowJ1q6Ft5B2yfSjIr5xxxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SecurityToken</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EC</span><span class="token punctuation">&gt;</span></span>0002-00000007<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EC</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>https://api.aliyun.com/troubleshoot?q=0002-00000007<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Error</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>è·å–è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰å’Œå®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰æ—¶éœ€è¦æŒ‡å®šä¸€ä¸ªæœ‰æ•ˆæ—¶é—´ï¼Œè¶…æ—¶å³å¤±æ•ˆï¼Œå†æ¬¡ä¸Šä¼ æ–‡ä»¶åˆ™ä¼šæŠ¥å¦‚ä¸Šä¿¡æ¯ã€‚<br> WEBç«¯<code>aliyun-oss-sdk-6.18.0.min.js</code>åˆ›å»ºOSSä¸Šä¼ å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®šåˆ·æ–°tokenæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-javascript"> <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// yourRegionå¡«å†™Bucketæ‰€åœ¨åœ°åŸŸã€‚ä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼ŒyourRegionå¡«å†™ä¸ºoss-cn-hangzhouã€‚</span>
    <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">"yourRegion"</span><span class="token punctuation">,</span>
    <span class="token comment">// ä»STSæœåŠ¡è·å–çš„ä¸´æ—¶è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰ã€‚</span>
    <span class="token literal-property property">accessKeyId</span><span class="token operator">:</span> <span class="token string">"yourAccessKeyId"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accessKeySecret</span><span class="token operator">:</span> <span class="token string">"yourAccessKeySecret"</span><span class="token punctuation">,</span>
    <span class="token comment">// ä»STSæœåŠ¡è·å–çš„å®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰ã€‚</span>
    <span class="token literal-property property">stsToken</span><span class="token operator">:</span> <span class="token string">"yourSecurityToken"</span><span class="token punctuation">,</span>
    <span class="token comment">// å¡«å†™Bucketåç§°ã€‚</span>
    <span class="token literal-property property">bucket</span><span class="token operator">:</span> <span class="token string">"examplebucket"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">retryMax</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// éœ€æŒ‡å®šretryMaxï¼Œå¦åˆ™refreshSTSTokenæ— æ³•æ‰§è¡Œ</span>
    <span class="token function-variable function">refreshSTSToken</span><span class="token operator">:</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// å‘æ‚¨æ­å»ºçš„STSæœåŠ¡è·å–ä¸´æ—¶è®¿é—®å‡­è¯ã€‚</span>
      <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'xxx/xxxx/get-token'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">accessKeyId</span><span class="token operator">:</span> info<span class="token punctuation">.</span>accessKeyId<span class="token punctuation">,</span>
        <span class="token literal-property property">accessKeySecret</span><span class="token operator">:</span> info<span class="token punctuation">.</span>accessKeySecret<span class="token punctuation">,</span>
        <span class="token literal-property property">stsToken</span><span class="token operator">:</span> info<span class="token punctuation">.</span>securityToken
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// åˆ·æ–°ä¸´æ—¶è®¿é—®å‡­è¯çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚</span>
    <span class="token literal-property property">refreshSTSTokenInterval</span><span class="token operator">:</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>æŒ‡å®š<code>refreshSTSToken</code>æ–¹æ³•åï¼Œåœ¨æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶è‹¥tokenè¶…æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ·æ–°tokenå¹¶ä¸Šä¼ æ–‡ä»¶ã€‚å€¼å¾—æ³¨æ„çš„æ—¶å•å•æŒ‡å®š<code>refreshSTSToken</code>æ–¹æ³•å¹¶ä¸ä¼šè¾¾æˆé¢„æœŸæ•ˆæœï¼Œéœ€è¦åŒæ—¶æŒ‡å®š<code>retryMax</code>å‚æ•°æ‰è¡Œï¼ˆå‚è€ƒissueï¼š<a href="https://github.com/ali-sdk/ali-oss/issues/1179">https://github.com/ali-sdk/ali-oss/issues/1179</a>ï¼‰ã€‚</p> 
<h3><a id="4__106"></a>é—®é¢˜4. éƒ¨åˆ†æ–‡ä»¶æ— æ³•é¢„è§ˆã€ä¸‹è½½</h3> 
<p>éƒ¨åˆ†ç±»å‹æ–‡ä»¶ï¼ˆå¦‚pdfï¼‰æ–‡ä»¶æ— æ³•åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆæˆ–ä¸‹è½½ï¼Œé”™è¯¯æˆªå›¾å¦‚ä¸‹ï¼š<img src="https://images2.imgbox.com/8c/63/9VZTu6lj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ç™»å½•OSSæœåŠ¡å™¨åå°ç®¡ç†å¹³å°ï¼Œåœ¨æ–‡ä»¶åˆ—è¡¨æŸ¥çœ‹æ–‡ä»¶ï¼Œå‘ç°æ–‡ä»¶ç±»å‹ä¸æ˜¯é¢„æœŸçš„ç±»å‹ï¼š<br> <img src="https://images2.imgbox.com/2f/fe/v0ImmD6z_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å‡ºç°è¯¥é—®é¢˜å¤§æ¦‚ç‡æ˜¯ç”±äºä¸Šä¼ æ–‡ä»¶æ—¶æŒ‡å®šçš„<code>Content-Type</code>é”™è¯¯é€ æˆçš„ï¼Œä¸Šä¼ æ–‡ä»¶ä¸æŒ‡å®š<code>Content-Type</code>å³å¯ã€‚</p> 
<h3><a id="5__112"></a>é—®é¢˜5. æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶é”™è¯¯</h3> 
<p>é€šè¿‡<code>OSS.signatureUrl</code>æ–¹æ³•è½¬æ¢çš„urlï¼Œé€šè¿‡æµè§ˆå™¨åœ°å€æ è®¿é—®ä¸‹è½½æŠ¥<code>AccessDenied</code>é”™è¯¯ã€‚è¯¦ç»†é”™è¯¯å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Error</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Code</span><span class="token punctuation">&gt;</span></span>AccessDenied<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Code</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span><span class="token punctuation">&gt;</span></span>Access denied by authorizer's policy.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Message</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequestId</span><span class="token punctuation">&gt;</span></span>65600B6235EB2631229B98CB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RequestId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostId</span><span class="token punctuation">&gt;</span></span>xxx.oss-cn-hangzhou.aliyuncs.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AccessDeniedDetail</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PolicyType</span><span class="token punctuation">&gt;</span></span>SessionPolicy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PolicyType</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthPrincipalOwnerId</span><span class="token punctuation">&gt;</span></span>1883463381918303<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthPrincipalOwnerId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthPrincipalType</span><span class="token punctuation">&gt;</span></span>AssumedRoleUser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthPrincipalType</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthPrincipalDisplayName</span><span class="token punctuation">&gt;</span></span>devram:251264809289383873<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthPrincipalDisplayName</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NoPermissionType</span><span class="token punctuation">&gt;</span></span>ImplicitDeny<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NoPermissionType</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AuthAction</span><span class="token punctuation">&gt;</span></span>oss:GetObject<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AuthAction</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AccessDeniedDetail</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EC</span><span class="token punctuation">&gt;</span></span>0003-00000301<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EC</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>https://api.aliyun.com/troubleshoot?q=0003-00000301<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Error</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>ç”±é”™è¯¯ä¿¡æ¯ä¸­çš„<code>&lt;AuthAction&gt;oss:GetObject&lt;/AuthAction&gt;</code>å¯çŸ¥è·å–è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰å’Œå®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰æ—¶æœªé…ç½®<code>GetObject</code>æƒé™ã€‚åœ¨è·å–å¯†é’¥å’Œå®‰å…¨ä»¤ç‰Œæ—¶æŒ‡å®š<code>GetObject</code>æƒé™å³å¯ã€‚å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"Version"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token punctuation">{<!-- --></span>
           <span class="token string-property property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
           <span class="token string-property property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
             <span class="token string">"oss:PutObject"</span><span class="token punctuation">,</span> <span class="token comment">// ä¸Šä¼ æ–‡ä»¶æƒé™</span>
             <span class="token string">"oss:GetObject"</span> <span class="token comment">// ä¸‹è½½æ–‡ä»¶æƒé™</span>
           <span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token string-property property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
             <span class="token string">"acs:oss:*:*:examplebucket/xxx/*"</span><span class="token punctuation">,</span> <span class="token comment">// examplebucketä¸ºbucketåç§°ï¼Œå…¶ä¸­xxxä¸ºä¸Šä¼ æ–‡ä»¶ç›®å½•</span>
           <span class="token punctuation">]</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6_PutObjectSignatureDoesNotMatch_151"></a>é—®é¢˜6. ä¸Šä¼ æ–‡ä»¶ï¼ˆPutObjectï¼‰é”™è¯¯ï¼šSignatureDoesNotMatch</h3> 
<p>å…·ä½“é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Error</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Code</span><span class="token punctuation">&gt;</span></span>SignatureDoesNotMatch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Code</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span><span class="token punctuation">&gt;</span></span>The request signature we calculated does not match the signature you provided. Check your key and signing method.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Message</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequestId</span><span class="token punctuation">&gt;</span></span>656155B635EB263982354AF5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RequestId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostId</span><span class="token punctuation">&gt;</span></span>xxx.oss-cn-hangzhou.aliyuncs.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OSSAccessKeyId</span><span class="token punctuation">&gt;</span></span>STS.NXVCU7dhZXdzwmZjAVBDnFPB2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OSSAccessKeyId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SignatureProvided</span><span class="token punctuation">&gt;</span></span>rJ7d1McbT/JvVV2QrenR9DwS+r4=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SignatureProvided</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StringToSign</span><span class="token punctuation">&gt;</span></span>PUT

image/jpeg
Sat, 25 Nov 2023 02:02:30 GMT
x-oss-security-token:CAISsQJ1q6...
/mybucket/dir/11/20231123152500353242.jpg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StringToSign</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StringToSignBytes</span><span class="token punctuation">&gt;</span></span>50 ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StringToSignBytes</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EC</span><span class="token punctuation">&gt;</span></span>0002-00000040<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EC</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>https://api.aliyun.com/troubleshoot?q=0002-00000040<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Error</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>å‡ºç°ä»¥ä¸Šé”™è¯¯ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯ä¸­çš„é“¾æ¥ï¼š<a href="https://api.aliyun.com/troubleshoot?q=0002-00000040" rel="nofollow">https://api.aliyun.com/troubleshoot?q=0002-00000040</a> æ’æŸ¥ï¼Œå¯èƒ½åŸå› æ˜¯<code>AccessKey ID</code>ä¸<code>AccessKey Secret</code>å¡«å†™é”™è¯¯å¯¼è‡´ï¼Œå¯ä»¥ä½¿ç”¨<code>AccessKey ID</code>ä¸<code>AccessKey Secret</code>ç™»å½•ossbrowseræ¥éªŒè¯æ­£ç¡®æ€§ã€‚å…·ä½“æ­¥éª¤ï¼Œè¯·å‚è§<a href="https://help.aliyun.com/document_detail/209974.html" rel="nofollow">å®‰è£…å¹¶ç™»å½•ossbrowser</a>ã€‚<br> ä½†æ˜¯ï¼Œåœ¨éƒ¨åˆ†åœºåˆä¸‹<code>AccessKey ID</code>ä¸<code>AccessKey Secret</code>è®¾ç½®æ­£ç¡®ï¼Œè°ƒç”¨<code>PutObject</code>æ¥å£ä¾ç„¶ä¼šæŠ¥å¦‚ä¸Šé”™è¯¯ï¼Œè¿™å°±æ¯”è¾ƒå‘äº†ï¼Œåœ¨å®˜ç½‘æ–‡ä»¶ä¸­ä¹Ÿæ‰¾ä¸åˆ°ç›¸å…³çš„è§£é‡Šã€‚æŸ¥è¯¢äº†ç½‘ä¸Šéƒ¨åˆ†å¼€å‘è€…çš„è§£é‡Šï¼Œå¯èƒ½æ˜¯å¦‚ä¸‹åŸå› ï¼š</p> 
<ol><li><code>AccessKey ID</code>ä¸<code>AccessKey Secret</code>å‰ååŒ…å«äº†ç©ºæ ¼</li><li>endpointé…ç½®é”™è¯¯ï¼ˆå¦‚ï¼šendpointä¸­æ··å…¥å¤šä½™çš„ç©ºæ ¼ã€æ–œæ ï¼‰ï¼Œæ­£ç¡®çš„æ ¼å¼åº”è¯¥æ˜¯ï¼š<em>https://oss-cn-hangzhou.aliyuncs.com</em> ï¼Œå…·ä½“å¯ä»¥åœ¨<a href="https://help.aliyun.com/zh/oss/user-guide/regions-and-endpoints#concept-zt4-cvy-5db" rel="nofollow">https://help.aliyun.com/zh/oss/user-guide/regions-and-endpoints#concept-zt4-cvy-5db</a> ä¸­æŸ¥æ‰¾å¯¹åº”çš„endpointã€‚</li><li>objectNameä¸è§„èŒƒï¼Œå¦‚objectNameé•¿åº¦è¶…è¿‡1023ä¸ªå­—èŠ‚ï¼Œä¸”ä¸èƒ½ä»¥<code>/</code>ã€<code>\</code>ä»¥åŠ<code>.</code>å¼€å¤´</li></ol> 
<h3><a id="7__179"></a>é—®é¢˜7. å›¾ç‰‡ä¸Šä¼ åï¼Œè®¿é—®ç¼©ç•¥å›¾å†è®¿é—®åŸå›¾ï¼Œæ˜¾ç¤ºçš„è¿˜æ˜¯ç¼©ç•¥å›¾</h3> 
<p>é—®é¢˜ç°è±¡å¦‚ä¸‹ï¼š<br> <img src="https://images2.imgbox.com/e6/7b/C4Cw7jp8_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/e3/b2/nXj4ftpj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/6c/6e/SlC82siK_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å¤§æ¦‚ç‡æ˜¯CDNåšäº†ç¼“å­˜å¯¼è‡´çš„ã€‚<br> è§£å†³æ–¹æ³•ï¼šcdnæ§åˆ¶å°ï¼Œæ‰¾åˆ°åŸŸåï¼ˆxxx.xxxxxx.cnï¼‰ï¼Œæ€§èƒ½ä¼˜åŒ–è¿™é‡Œï¼Œå°†å¿½ç•¥å‚æ•°çš„é…ç½®åˆ é™¤å³å¯ã€‚<br> è€Œå¯¹äºå·²ç»ç¼“å­˜çš„å›¾ç‰‡ï¼Œéœ€è¦å°†è®¿é—®çš„æ–‡ä»¶/å›¾ç‰‡åˆ·æ–°ã€‚å…·ä½“æ“ä½œæ˜¯åœ¨CDNç®¡ç†&gt;åˆ·æ–°é¢„çƒ­é‡Œï¼Œè¾“å…¥å¯¹åº”çš„urlè¿›è¡Œåˆ·æ–°æ“ä½œå³å¯ã€‚<br> <img src="https://images2.imgbox.com/b3/3b/nHcdlPbP_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="8_SecurityTokenExpired_188"></a>é—®é¢˜8. ä¸‹è½½æ–‡ä»¶æŠ¥<code>SecurityTokenExpired</code>é”™è¯¯</h3> 
<p>å‰ç«¯é€šè¿‡<code>client.client.signatureUrl(objectName)</code>ç”Ÿæˆä¸‹è½½é“¾æ¥ï¼Œå†æµè§ˆå™¨é€šè¿‡è¯¥é“¾æ¥ä¸‹è½½æ–‡ä»¶ï¼Œå¯èƒ½ä¼šæŠ¥<code>SecurityTokenExpired</code>é”™è¯¯ï¼Œå…·ä½“é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Error</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Code</span><span class="token punctuation">&gt;</span></span>SecurityTokenExpired<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Code</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span><span class="token punctuation">&gt;</span></span>The security token you provided has expired.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Message</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RequestId</span><span class="token punctuation">&gt;</span></span>652E74D33D19C03130C4CB62<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RequestId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostId</span><span class="token punctuation">&gt;</span></span>xxx.oss-cn-hangzhou.aliyuncs.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SecurityToken</span><span class="token punctuation">&gt;</span></span>CAISxAJ1q6Ft5B4dyfS...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SecurityToken</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EC</span><span class="token punctuation">&gt;</span></span>0002-00000007<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EC</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>https://api.aliyun.com/troubleshoot?q=0002-00000007<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RecommendDoc</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Error</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>é”™è¯¯ä¿¡æ¯å¾ˆç®€å•ï¼Œ<code>SecurityTokenExpired</code>æŒ‡çš„å°±æ˜¯<code>SecurityToken</code>å·²ç»è¿‡æœŸï¼Œéœ€è¦é‡æ–°è¯·æ±‚ä¸€ä¸ª<code>SecurityToken</code>å³å¯ã€‚åœ¨å®é™…æƒ…å†µä¸‹ï¼Œå½“<code>SecurityToken</code>è¿‡æœŸå†å»é€šè¿‡è°ƒç”¨<code>client.signatureUrl()</code>ç”Ÿæˆçš„é“¾æ¥å»ä¸‹è½½æ–‡ä»¶ï¼Œè¿˜å¯èƒ½ä¼šæŠ¥<code>AccessKey IDä¸å­˜åœ¨</code>æˆ–è€…<code>InvalidAccessKeyID</code>çš„é”™è¯¯ï¼Œå‡ºç°è¯¥é”™è¯¯ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿæ˜¯é‡æ–°è¯·æ±‚ä¸€ä¸ª<code>SecurityToken</code>å³å¯ã€‚<br> åœ¨è¿™é‡Œæˆ‘æ¯”è¾ƒç–‘æƒ‘çš„æ˜¯ï¼Œé€šè¿‡<code>client.put()</code>ä¸Šä¼ æ–‡ä»¶ï¼Œè‹¥<code>SecurityToken</code>è¿‡æœŸï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨<code>refreshSTSToken</code>æ–¹æ³•è¿›è¡Œåˆ·æ–°tokenæ“ä½œï¼Œè€Œ<code>client.signatureUrl()</code>åˆ™ä¸ä¼šè‡ªåŠ¨åˆ·æ–°tokenã€‚<br> æœ‰äº†ç–‘é—®ä¹‹åï¼Œå°±å»ç¿»<code>signatureUrl</code>çš„æºç ï¼š<a href="https://github.com/ali-sdk/ali-oss/blob/master/lib/common/object/signatureUrl.js">https://github.com/ali-sdk/ali-oss/blob/master/lib/common/object/signatureUrl.js</a> ï¼Œå‘ç°æ›¾ç»çš„æŸä¸ªç‰ˆæœ¬ï¼Œ<code>signatureUrl</code>æ–¹æ³•æ˜¯å¸¦æœ‰åˆ·æ–°tokenæ“ä½œçš„ï¼Œå…·ä½“ä»£ç ç‚¹å‡»è¿™é‡Œï¼š<a href="https://github.com/ali-sdk/ali-oss/commit/374231c9c1dcc5ed1312a2d19915b0894e3b964a#diff-96d41084308d1bba6abbdff9229ab13d216ffa78f742337acd5afd25d35caaf5R26">https://github.com/ali-sdk/ali-oss/commit/374231c9c1dcc5ed1312a2d19915b0894e3b964a#diff-96d41084308d1bba6abbdff9229ab13d216ffa78f742337acd5afd25d35caaf5R26</a> ï¼Œä½†æ˜¯åœ¨åç»­çš„ç‰ˆæœ¬ä¸­ï¼Œ<code>signatureUrl</code>æ–¹æ³•ç§»é™¤äº†åˆ·æ–°æ“ä½œã€‚<br> å¹¸è¿çš„æ˜¯åœ¨ç¿»Gitçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸<a href="https://github.com/ali-sdk/ali-oss/blob/master/lib/common/object/signatureUrl.js">signatureUrl.js</a>åŒç›®å½•çš„ç»„ä»¶é‡Œï¼Œæœ‰å¦å¤–ä¸€ä¸ªåä¸º<a href="https://github.com/ali-sdk/ali-oss/blob/master/lib/common/object/asyncSignatureUrl.js">asyncSignatureUrl.js</a>çš„ç»„ä»¶ï¼Œç‚¹è¿›å»çœ‹é‡Œé¢ä»£ç çš„é€»è¾‘ï¼Œæ­£æ˜¯ä¹‹å‰<code>signatureUrl.js</code>ç»„ä»¶é‡Œç±»ä¼¼ï¼ŒåŒ…å«åˆ·æ–°tokenæ“ä½œçš„ä»£ç ã€‚<br> é‚å°†é¡¹ç›®é‡Œè°ƒç”¨<code>client.signatureUrl()</code>çš„ä»£ç ï¼Œæ›¿æ¢æˆ<code>client.asyncSignatureUrl()</code>ï¼Œå®é™…æ•ˆæœæ˜¯tokenè¿‡æœŸåï¼Œä¼šè‡ªåŠ¨è¿›è¡Œåˆ·æ–°æ“ä½œã€‚ğŸ˜„</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a368f56bfaaf1b6684d3e6b5e31395c4/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">windows å®‰è£…ä¸¤ä¸ªmysql</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2e8d529ca248a12da8f157af8d42f264/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">vmvbä¸­ubuntuæ‰“ä¸å¼€terminal</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>