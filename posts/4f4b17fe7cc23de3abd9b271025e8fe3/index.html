<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring基础知识讲解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring基础知识讲解" />
<meta property="og:description" content="文章目录 Spring是什么？IoC容器与DIDI与IoC的区别 Spring项目的创建配置maven国内源创建Spring项目有关Bean的操作存储Bean使用Bean ApplicationContext和BeanFactory的区别getBean()的三种使用方法 更简单的存储和获取对象类注解方法注解获取Bean对象的简单方法——依赖注入@Autowired和@Resource的区别 Bean的作用域和生命周期作用域设置作用域生命周期Bean的执行流程Bean的生命周期 Spring是什么？ Spring指的是Spring Framework(Spring框架)，它是一个开源框架，有非常活跃和庞大的社区支持，Spring支持广泛的应用场景，可以让Java企业级开发更简单。Spring是包含众多工具方法的IoC容器，Spring最核心的功能就是容器管理。
IoC容器与DI 我们需要理解一下Spring是包含众多工具方法的IoC容器这句话，什么是IoC呢？IoC = Inversion of Control 翻译成中文就是控制反转，我们通过一个例子来解释一下这个名词。
构建⼀辆⻋（Car Class），然⽽⻋需要依赖⻋身(FrameWork Class)，⽽⻋身需要依赖底盘（BottomClass），⽽底盘需要依赖轮胎（Tire Class），此时我们传统开发的方法来完成这个需求：
class Car { private Framework framework; public Car(int size) { this.framework = new Framework(size); } public void init() { System.out.println(&#34;构造Car&#34;); framework.init(); } } class Framework { private Bottom bottom; public Framework(int size ) { this.bottom = new Bottom(size); } public void init() { System.out.println(&#34;构造Framework&#34;); bottom.init(); } } class Bottom { private Tire tire; public Bottom(int size) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4f4b17fe7cc23de3abd9b271025e8fe3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-24T23:48:53+08:00" />
<meta property="article:modified_time" content="2023-07-24T23:48:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring基础知识讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Spring_2" rel="nofollow">Spring是什么？</a></li><li><ul><li><a href="#IoCDI_4" rel="nofollow">IoC容器与DI</a></li><li><ul><li><a href="#DIIoC_174" rel="nofollow">DI与IoC的区别</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Spring_176" rel="nofollow">Spring项目的创建</a></li><li><ul><li><a href="#maven_177" rel="nofollow">配置maven国内源</a></li><li><a href="#Spring_195" rel="nofollow">创建Spring项目</a></li><li><a href="#Bean_216" rel="nofollow">有关Bean的操作</a></li><li><ul><li><a href="#Bean_217" rel="nofollow">存储Bean</a></li><li><a href="#Bean_240" rel="nofollow">使用Bean</a></li></ul> 
   </li><li><a href="#ApplicationContextBeanFactory_251" rel="nofollow">ApplicationContext和BeanFactory的区别</a></li><li><a href="#getBean_258" rel="nofollow">getBean()的三种使用方法</a></li></ul> 
  </li><li><a href="#_261" rel="nofollow">更简单的存储和获取对象</a></li><li><ul><li><a href="#_280" rel="nofollow">类注解</a></li><li><a href="#_296" rel="nofollow">方法注解</a></li><li><a href="#Bean_310" rel="nofollow">获取Bean对象的简单方法——依赖注入</a></li><li><ul><li><a href="#AutowiredResource_338" rel="nofollow">@Autowired和@Resource的区别</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Bean_354" rel="nofollow">Bean的作用域和生命周期</a></li><li><ul><li><a href="#_355" rel="nofollow">作用域</a></li><li><a href="#_371" rel="nofollow">设置作用域</a></li><li><a href="#_376" rel="nofollow">生命周期</a></li><li><ul><li><a href="#Bean_377" rel="nofollow">Bean的执行流程</a></li><li><a href="#Bean_383" rel="nofollow">Bean的生命周期</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Spring_2"></a>Spring是什么？</h2> 
<p>Spring指的是Spring Framework(Spring框架)，它是一个开源框架，有非常活跃和庞大的社区支持，Spring支持广泛的应用场景，可以让Java企业级开发更简单。<strong>Spring是包含众多工具方法的IoC容器，Spring最核心的功能就是容器管理</strong>。</p> 
<h3><a id="IoCDI_4"></a>IoC容器与DI</h3> 
<p>我们需要理解一下<strong>Spring是包含众多工具方法的IoC容器</strong>这句话，什么是<strong>IoC</strong>呢？<code>IoC = Inversion of Control </code>翻译成中文就是<strong>控制反转</strong>，我们通过一个例子来解释一下这个名词。</p> 
<p>构建⼀辆⻋（Car Class），然⽽⻋需要依赖⻋身(FrameWork Class)，⽽⻋身需要依赖底盘（BottomClass），⽽底盘需要依赖轮胎（Tire Class），此时我们传统开发的方法来完成这个需求：</p> 
<pre><code class="prism language-java">
<span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Framework</span> framework<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>framework <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造Car"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        framework<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">Framework</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Bottom</span> bottom<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span><span class="token keyword">int</span> size <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造Framework"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bottom</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Tire</span> tire<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tire <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造Bottom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tire<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Tire</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"车轮子 = "</span>  <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        car<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6e/e6/2f2ZGPDq_o.png" alt="在这里插入图片描述"><br> 运行代码完成了需求，但是当我们需要增加一个属性的时候会非常困难，比如我们增加一个轮子的颜色属性。<br> <img src="https://images2.imgbox.com/13/aa/5PO2ai72_o.png" alt="在这里插入图片描述"><br> 可以看到，当我们更改了底层的代码，整个调用链上的所有代码都需要修改，如何解决这个问题呢？我们可以模拟一下<code>IoC</code>容器，将传统的new对象的方式改为注入传递的方式。</p> 
<pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Framework</span> framework<span class="token punctuation">;</span>

    <span class="token comment">/*public Car(int size) {
        this.framework = new Framework(size);
    }*/</span>

    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">Framework</span> framework<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>framework <span class="token operator">=</span> framework<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造Car"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        framework<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">Framework</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Bottom</span> bottom<span class="token punctuation">;</span>

    <span class="token comment">/*public Framework(int size ) {
        this.bottom = new Bottom(size);
    }
*/</span>
    <span class="token keyword">public</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span><span class="token class-name">Bottom</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> bottom<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造Framework"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bottom</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Tire</span> tire<span class="token punctuation">;</span>

   <span class="token comment">/* public Bottom(int size) {
        this.tire = new Tire(size);
    }*/</span>

    <span class="token keyword">public</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token class-name">Tire</span> tire<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tire <span class="token operator">=</span> tire<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造Bottom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tire<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Tire</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> color<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">,</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"车轮子 = "</span>  <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Car</span> car<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Framework</span> framework<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Bottom</span> bottom<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tire</span> tire<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tire <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tire</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bottom</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tire<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>framework <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Framework</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>framework<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Test</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        test<span class="token punctuation">.</span>car<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>经过调整，现在更改底层代码是不会影响整个调用链的，这样完成对代码的<strong>解耦</strong>。我们发现，传统的代码是上层代码依赖下层代码，由上级对象创建下级对象，而更改后的代码，是把下层代码注入到上层代码，这样下级代码的控制权不在由上级控制，自然下级代码更改不会影响上级代码了，这就是所谓的<strong>控制权反转</strong>，也是IoC容器的思想。</p> 
<p>所以<strong>Spring 是包含了多个⼯具⽅法的 IoC 容器</strong>，可以理解为Spring是一个控制反转容器，既然是容器那么就可以存东西和取东西。所以<strong>对象的创建和销毁的权利都交给 Spring 来管理了，它本身⼜具备了存储对象和获取对象的能⼒</strong>。也就是，创建类的时候将类存到Spring容器中，在创建对象时不需要new了，直接去Spring中取对象。所以学习Spring最核心的功能就是如何将对象存到Spring中，再从Spring中获取对象的过程。</p> 
<h4><a id="DIIoC_174"></a>DI与IoC的区别</h4> 
<p>上面我们知道了<code>IoC</code>是控制权反转的一种思想，那么DI又是什么呢？<code>DI</code>的 <code>Dependency Injection </code>的缩写，翻译成中文是<strong>依赖注入</strong>。他与<code>IoC</code>是从不同角度描述的同一件事，<code>IoC</code>是一种思想，而思想执行需要方法，<code>IoC</code>就是思想，<code>DI</code>就是具体得到实现方式。</p> 
<h2><a id="Spring_176"></a>Spring项目的创建</h2> 
<h3><a id="maven_177"></a>配置maven国内源</h3> 
<p><img src="https://images2.imgbox.com/52/9a/dgutvozP_o.png" alt="在这里插入图片描述"><br> 在设置中勾选setters.xml配置文章和本次仓库文件。<br> <img src="https://images2.imgbox.com/e0/6b/IYcOqYP5_o.png" alt="在这里插入图片描述"><br> 在settings.xml中配置国内源</p> 
<pre><code class="prism language-java"><span class="token generics"><span class="token punctuation">&lt;</span>mirror<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>alimaven<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span>aliyun maven<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>maven<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>nexus<span class="token operator">/</span>content<span class="token operator">/</span>groups<span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>mirrorOf<span class="token punctuation">&gt;</span></span>central<span class="token operator">&lt;</span><span class="token operator">/</span>mirrorOf<span class="token operator">&gt;</span>        
<span class="token operator">&lt;</span><span class="token operator">/</span>mirror<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e7/1f/tqavvMee_o.png" alt="在这里插入图片描述"><br> 删除本地所有的jar包，重新下载<br> <img src="https://images2.imgbox.com/97/37/RNTB4CGz_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Spring_195"></a>创建Spring项目</h3> 
<p>首先创建一个maven项目<br> <img src="https://images2.imgbox.com/1b/66/q3w46dSI_o.png" alt="在这里插入图片描述"><br> 添加Spring依赖</p> 
<pre><code class="prism language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
   <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>context<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.2</span><span class="token number">.3</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
  
    <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>beans<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.2</span><span class="token number">.3</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/d1/TE9qqxZf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Bean_216"></a>有关Bean的操作</h3> 
<h4><a id="Bean_217"></a>存储Bean</h4> 
<p>创建一个启动类<br> <img src="https://images2.imgbox.com/85/d8/aOQxHbqC_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>存储Bean对象分为两个步骤：<br> 1、创建一个Bean对象。<br> 2、将创建的Bean对象注册到Spring容器中。</p> 
</blockquote> 
<p>创建一个Bean对象，就是一个普通的类对象。<br> <img src="https://images2.imgbox.com/92/48/hzT3JZzE_o.png" alt="在这里插入图片描述"><br> 添加Spring配置文件spring-config.xml</p> 
<p><img src="https://images2.imgbox.com/97/c8/FB8oeJe5_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">:</span>content<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"student"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.java.demo.model.Student"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="Bean_240"></a>使用Bean</h4> 
<blockquote> 
 <p>使用Bean对象，分为三步：<br> 1、得到Spring上下文对象，因为对象都交给了Spring管理了，所以对象需要从Spring中获取。<br> 2、通过Spring上下文，获取某一个指定的Bean对象。<br> 3、使用Bean对象。</p> 
</blockquote> 
<p>使用<code> ApplicationContext</code>获取上下文对象，使用<code>getBean()</code>方法获取Bean对象。</p> 
<p><img src="https://images2.imgbox.com/54/38/3AMIsBzO_o.png" alt="在这里插入图片描述"><br> 此时运行代码我们看到打印出了Student对象的信息。<br> <img src="https://images2.imgbox.com/e8/46/c2tGIix4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="ApplicationContextBeanFactory_251"></a>ApplicationContext和BeanFactory的区别</h3> 
<p><code>BeanFactory</code>和<code>ApplicationContext</code>的作用一样都是获取上下文对象的，他俩的区别可以从两个方面说：</p> 
<blockquote> 
 <p>1、从继承关系来说，<code>ApplicationContext</code>是<code>BeanFactory</code>的子类，他有更多的功能，比如对国际化的支持、资源访问支持、以及事件传播等方面的支持。<br> 2、从性能放面来说：<code>ApplicationContext</code>是一次性加载所有Bean对象，<code>BeanFactory</code>是懒加载，只加载使用的Bean对象。</p> 
</blockquote> 
<h3><a id="getBean_258"></a>getBean()的三种使用方法</h3> 
<p><img src="https://images2.imgbox.com/47/f8/7WtviVSc_o.png" alt="在这里插入图片描述"><br> 使用图中的三种方法都可以获取到Bean对象，注意如果有多个相同的Bean对象，使用类名获取Bean对象的方法就会报错。</p> 
<h2><a id="_261"></a>更简单的存储和获取对象</h2> 
<p>我们发现使用框架写代码竟然比传统开发的代码还要复杂，有没有方法使存储Bean对象和获取Bean对象的过程便简单呢？</p> 
<blockquote> 
 <p>我们可以通过两个方法实现更简单的存储Bean：<br> 1、使用类注解的方法实现Bean对象的存储。<br> 2、使用方法注解的方法实现Bean对象的存储。</p> 
</blockquote> 
<p>首先同样要添加Spring配置文件spring-config.xml，这次添加的配置文件有所不同。<br> <img src="https://images2.imgbox.com/64/73/HH6HKLQj_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">:</span>content<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>content<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"com.java.demo"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>content<span class="token operator">:</span>component<span class="token operator">-</span>scan<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_280"></a>类注解</h3> 
<blockquote> 
 <p>五大类注解分别是：<br> 1、<code>@Controller </code> 控制器，检测数据的合法性<br> 2、<code>@Service</code> 服务层，进行业务组装<br> 3、<code>@Repository</code> 数据持久层，实际业务的处理<br> 4、<code>@Component</code> 组件 工具类层<br> 5、<code>@Configuration</code>配置层 进行配置</p> 
</blockquote> 
<p>使用这些类注解都可以将类储存到IoC容器中，那为什么要分这么多注解呢？<strong>原因就是让程序员看到类注解之后，就可以了解到当前类的用途</strong>。</p> 
<p><img src="https://images2.imgbox.com/97/7e/fW3bXTii_o.png" alt="在这里插入图片描述"><br> 此时会有一个问题，我们在配置文件中并没有配置Bean对象，也就是说没有设置Bean对象在IoC中id，那我们如何获取Bean对象呢？</p> 
<blockquote> 
 <p>使用类注解存储Bean的命名规则如下：<br> 1、当类的命名为默认大驼峰（首字母大写第二个字母小写），可以使用类名首字母小写获取到Bean对象。<br> 2、如果不满足上面的大驼峰的情况，直接使用类名就可以获取到Bean对象。</p> 
</blockquote> 
<h3><a id="_296"></a>方法注解</h3> 
<p>除了使用类注解的方法进行存储，还可以使用方法注解的方式。<br> <img src="https://images2.imgbox.com/92/01/NTRaKB2G_o.png" alt="在这里插入图片描述"><br> @Bean的默认命名方式为<strong>方法名</strong>，我们还可以进行重命名。</p> 
<p><img src="https://images2.imgbox.com/0a/e1/uth3e4BL_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ed/ae/BbwL4ixh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ad/0d/LqVIb9Uz_o.png" alt="在这里插入图片描述"><br> 还可以指定多个名称<br> <img src="https://images2.imgbox.com/f3/8c/3C9375Kg_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>@Bean获取时的一些注意事项：<br> 1、如果多个Bean使用相同的名称，执行程序不会报错，只会将第一个Bean对象存储到容器中，后面的会自动忽略。<br> 2、如果对@Bean进行了重命名，那么默认使用方法名获取Bean的方法将会失效。</p> 
</blockquote> 
<h3><a id="Bean_310"></a>获取Bean对象的简单方法——依赖注入</h3> 
<p>之前我们获取Bean对象的方法称为依赖查找，很麻烦，我们还有更简单的方法依赖注入。</p> 
<blockquote> 
 <p>我们有三种方式进行对象注入：<br> 1、属性注入<br> 2、构造方法注入<br> 3、Setter注入</p> 
</blockquote> 
<p><strong>属性注入：</strong><br> <img src="https://images2.imgbox.com/48/63/n4hlBMdv_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>使用属性注入的优缺点：<br> 优点：代码简单<br> 缺点：无法注入final修饰的变量，可能违反单一性设计原则</p> 
</blockquote> 
<p><strong>构造方法注入：</strong><br> <img src="https://images2.imgbox.com/68/c4/sZ7hR0p4_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>使用属性注入的优缺点：<br> 优点：可以注入一个final修饰的变量，注入的对象不会被修改，构造方法可以保证注入对象完全初始化，构造方法注入通用性更好。<br> 缺点：代码更加复杂，无法解决循环依赖的问题。</p> 
</blockquote> 
<p><strong>setter方法注入：</strong><br> <img src="https://images2.imgbox.com/73/18/wUhd8H9y_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>使用属性注入的优缺点：<br> 优点：Setter注入更符合单一设计原则<br> 缺点：无法注入final修饰的变量，Setter注入的对象可以被修改。</p> 
</blockquote> 
<p>除了使用<code>@Autowired</code>注解进行注入，还可以使@Resource进行注入。<br> <img src="https://images2.imgbox.com/13/b9/vgA9i0Fg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="AutowiredResource_338"></a>@Autowired和@Resource的区别</h4> 
<blockquote> 
 <p>1、<code>@Autowired</code>来自于Spring，而<code>@Resource</code>来自于JDK<br> 2、使用时可以设置的参数不同，<code>@Resource</code>有更多的参数<br> 3、<code>@Resource</code>只能用于Setter注入和属性注入，不能用于构造函数。</p> 
</blockquote> 
<p>关于设置的参数我们举个例子来说明解释一下：<br> 我们使用@Bean注入两个返回相同对象类型的Bean：<br> <img src="https://images2.imgbox.com/90/92/0fFNFo6k_o.png" alt="在这里插入图片描述"><br> 此时使用<code>@Autowired@Resource</code>获取Bean对象会报错<br> <img src="https://images2.imgbox.com/1b/eb/zSq79Kt3_o.png" alt="在这里插入图片描述"><br> 报错原因是使用<code>@Autowried</code>进行依赖注入的过程是先根据getType获取对象，如果只获取到一个，那么会直接注入到属性上去，如果有多个会使用getName进行匹配。<br> <img src="https://images2.imgbox.com/61/87/GFQT06FD_o.png" alt="在这里插入图片描述"><br> 所以此处我们有三种方法解决Bug<br> <img src="https://images2.imgbox.com/ad/5b/xlx7nR4Q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3e/4b/h1vPROAF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d4/6c/J55cyr2Q_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Bean_354"></a>Bean的作用域和生命周期</h2> 
<h3><a id="_355"></a>作用域</h3> 
<p>我们通过一个例子来观察一下Bean的作用域：现在有一个Student类通过@Bean的方式进行了注入，此时有两个类都需要使用这个Bean对象，但是其中一个类需要进行修改Bean对象中的属性，一个不需要任何改动，此时会发生什么呢？<br> <img src="https://images2.imgbox.com/f9/11/JZ9sHsrt_o.png" alt="在这里插入图片描述"><br> 我们的预期是，公共的Bean对象在各自的类中可以被修改，但是不能影响其他类，但是结果不尽人意。<br> <img src="https://images2.imgbox.com/75/a2/t1OKMYVo_o.png" alt="在这里插入图片描述"><br> 造成这个结果的原因就是Bean的作用域，Bean在默认的情况下是单例的状态，也就是所有人都是同一个对象，自然我们在一个类中进行修改，另一个类中的对象也会更改。解决这个问题的方式就是改变Bean对象的作用域，Bean的作用域有哪些呢？</p> 
<blockquote> 
 <p>Bean的作用域有6种：</p> 
 <ol><li><code>singleton</code>：单例作⽤域 (默认)</li><li><code>prototype</code>：原型作⽤域（多例作⽤域）</li><li><code>request</code>：请求作⽤域</li><li><code>session</code>：回话作⽤域 一个会话共享一个Bean</li><li><code>application</code>：全局作⽤域 一个Context容器共享一个作用域</li><li><code>websocket</code>：HTTP WebSocket 作⽤域</li></ol> 
</blockquote> 
<p>前两个作用域适用于普通Spring项目，后四个都是Spring MVC的项目。</p> 
<h3><a id="_371"></a>设置作用域</h3> 
<p>我们可以使用@Scope来设置作用域<br> <img src="https://images2.imgbox.com/f0/de/llAZWssW_o.png" alt="在这里插入图片描述"><br> 再次运行项目此时完成我们的需求。<br> <img src="https://images2.imgbox.com/15/9d/QCLy4iin_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_376"></a>生命周期</h3> 
<h4><a id="Bean_377"></a>Bean的执行流程</h4> 
<blockquote> 
 <p>1、启动Spring容器<br> 2、实例化Bean<br> 3、Bean注册到Spring中<br> 4、将Bean装配到需要的类中</p> 
</blockquote> 
<h4><a id="Bean_383"></a>Bean的生命周期</h4> 
<blockquote> 
 <p>1、实例化Bean(为Bean分配内存空间)<br> 2、设置属性（Bean注入和装配）<br> 3、Bean初始化<br> 3.1、实现了各种Aware通知的方法，如 <code>BeanNameAware、BeanFactoryAware、ApplicationContextAware</code>的接口方法<br> 3.2、执行 <code>BeanPostProcessor</code>初始化前置方法<br> 3.3、执行<code>@PostConstruct</code>初始化方法，依赖注入操作后被执行<br> 3.4、执行自己指定的<code>init-method</code>方法<br> 3.5、执行<code>BeanPostProcessor</code>初始化后置方法<br> 4、使用Bean<br> 5、销毁Bean</p> 
</blockquote> 
<p>Bean的初始化比较复杂简单总结就是：</p> 
<blockquote> 
 <p>1、执行各种通知<br> 2、初始化的前置方法<br> 3、初始化方法<br> 4、初始化的后置方法</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65ef24cc017b70afc74e3a7a2dc1b98c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Hive 01】简介、安装部署、高级函数使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bed8f019d61bea9cf04ea8cb8b83172a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STM32MP157A之Linux内核与根文件系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>