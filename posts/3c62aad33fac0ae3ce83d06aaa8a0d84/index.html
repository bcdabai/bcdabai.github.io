<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pandas常用操 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Pandas常用操" />
<meta property="og:description" content="读取本地EXCEL数据 import pandas as pd df = pd.read_excel(&#39;/home/kesci/input/pandas1206855/pandas120.xlsx&#39;) 保存成CSV文件 df.to_csv(&#39;normal.csv&#39;,index=False,sep=&#39;,&#39;) 将字典创建为DataFrame data = {&#34;grammer&#34;:[&#34;Python&#34;,&#34;C&#34;,&#34;Java&#34;,&#34;GO&#34;,np.nan,&#34;SQL&#34;,&#34;PHP&#34;,&#34;Python&#34;], &#34;score&#34;:[1,2,np.nan,4,5,6,7,10]} df = pd.DataFrame(data) df out:
提取含有字符串&#34;Python&#34;的行 #方法一 df[df[&#39;grammer&#39;] == &#39;Python&#39;] #方法二 results = df[&#39;grammer&#39;].str.contains(&#34;Python&#34;) results.fillna(value=False,inplace = True) df[results] out:
提取popularity列满足某条件的行 提取popularity列中值大于3的行
df[df[&#39;popularity&#39;] &gt; 3] 提取popularity列值大于3小于7的行
df[(df[&#39;popularity&#39;] &gt; 3) &amp; (df[&#39;popularity&#39;] &lt; 7)] 删除指定行/指定列 删除指定行
new_df = df.drop(index=‘行索引’)new_df = df.drop(‘行索引’, axis=‘index’)new_df = df.drop(‘行索引’, axis=0) 删除指定的多行
new_df = df.drop(index=[‘行索引1’, ‘行索引2’])new_df = df.drop([‘行索引1’,‘行索引2’], axis=‘index’)new_df = df.drop([‘行索引1’, ‘行索引2’], axis=0) 删除指定列" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3c62aad33fac0ae3ce83d06aaa8a0d84/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-16T00:12:32+08:00" />
<meta property="article:modified_time" content="2021-07-16T00:12:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Pandas常用操</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="EXCEL_0"></a>读取本地EXCEL数据</h2> 
<pre><code>import pandas as pd
df = pd.read_excel('/home/kesci/input/pandas1206855/pandas120.xlsx')
</code></pre> 
<h2><a id="CSV_6"></a>保存成CSV文件</h2> 
<pre><code>df.to_csv('normal.csv',index=False,sep=',') 
</code></pre> 
<h2><a id="DataFrame_13"></a>将字典创建为DataFrame</h2> 
<pre><code>data = {"grammer":["Python","C","Java","GO",np.nan,"SQL","PHP","Python"],
       "score":[1,2,np.nan,4,5,6,7,10]}
df = pd.DataFrame(data)
df
</code></pre> 
<p>out:<img src="https://images2.imgbox.com/1d/b1/7NGescSh_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Python_23"></a>提取含有字符串"Python"的行</h2> 
<pre><code>#方法一
df[df['grammer'] == 'Python']
#方法二
results = df['grammer'].str.contains("Python")
results.fillna(value=False,inplace = True)
df[results]
</code></pre> 
<p>out:<img src="https://images2.imgbox.com/f9/55/yRfrVFrs_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="popularity_34"></a>提取popularity列满足某条件的行</h2> 
<p>提取popularity列中值大于3的行</p> 
<pre><code>df[df['popularity'] &gt; 3]
</code></pre> 
<p>提取popularity列值大于3小于7的行</p> 
<pre><code>df[(df['popularity'] &gt; 3) &amp; (df['popularity'] &lt; 7)]
</code></pre> 
<h2><a id="_45"></a>删除指定行/指定列</h2> 
<p><strong>删除指定行</strong></p> 
<ul><li>new_df = df.drop(index=‘行索引’)</li><li>new_df = df.drop(‘行索引’, axis=‘index’)</li><li>new_df = df.drop(‘行索引’, axis=0)</li></ul> 
<p><strong>删除指定的多行</strong></p> 
<ul><li>new_df = df.drop(index=[‘行索引1’, ‘行索引2’])</li><li>new_df = df.drop([‘行索引1’,‘行索引2’], axis=‘index’)</li><li>new_df = df.drop([‘行索引1’, ‘行索引2’], axis=0)</li></ul> 
<p><strong>删除指定列</strong></p> 
<ul><li>new_df = df.drop(columns=‘列名’)</li><li>new_df = df.drop(‘列名’, axis=‘columns’)</li><li>new_df = df.drop(‘列名’, axis=1)</li></ul> 
<p><strong>删除指定的多列</strong></p> 
<ul><li>new_df = df.drop(columns=[‘列名1’, ‘列名2’])</li><li>new_df = df.drop([‘列名1’, ‘列名2’], axis=‘columns’)</li><li>new_df = df.drop([‘列名1’, ‘列名2’], axis=1)</li></ul> 
<p><mark>drop 常用参数含义</mark></p> 
<blockquote> 
 <p>inplace: 是否修改原Dataframe。</p> 
</blockquote> 
<ul><li>False: 返回新的Dataframe（默认）</li><li>True: 直接修改原Dataframe，返回None</li></ul> 
<blockquote> 
 <p>axis: 轴，是否从 索引 或 列 中删除标签。 (与sum，mean等计算函数中的axis的含义不同)</p> 
</blockquote> 
<ul><li>0 或 index: 方向为行，默认值0</li><li>1 或 columns: 方向为列</li></ul> 
<h2><a id="_77"></a>删除最后一行数据</h2> 
<pre><code>df.drop([len(df)-1],inplace=True)
df
</code></pre> 
<h2><a id="Perl66_83"></a>添加一行数据[‘Perl’,6.6]</h2> 
<pre><code>row={'grammer':'Perl','popularity':6.6}
df = df.append(row,ignore_index=True)
df
</code></pre> 
<h2><a id="df_91"></a>输出df的所有列名</h2> 
<pre><code>print(df.columns)
</code></pre> 
<p>out : Index([‘grammer’, ‘score’], dtype=‘object’)</p> 
<h2><a id="popularity_99"></a>修改第二列列名为’popularity’</h2> 
<pre><code>df.rename(columns={'score':'popularity'}, inplace = True)
df
</code></pre> 
<h2><a id="popularity_105"></a>提取popularity列最大值所在行</h2> 
<pre><code>df[df['popularity'] == df['popularity'].max()]
</code></pre> 
<h2><a id="_111"></a>交换两列位置</h2> 
<pre><code>#方法1
temp = df['popularity']
df.drop(labels=['popularity'], axis=1,inplace = True)
df.insert(0, 'popularity', temp)
df

#方法2
#cols = df.columns[[1,0]]
#df = df[cols]
#df
</code></pre> 
<h2><a id="5_125"></a>查看最前/后5行数据</h2> 
<pre><code>df.head()
df.tail()
</code></pre> 
<h2><a id="grammer_132"></a>统计grammer列中每种编程语言出现的次数</h2> 
<pre><code>df['grammer'].value_counts()
</code></pre> 
<h2><a id="_138"></a>将空值用上下值的平均值填充</h2> 
<pre><code>df['popularity'] = df['popularity'].fillna(df['popularity'].interpolate())
df
</code></pre> 
<h2><a id="grammer_145"></a>按照grammer列进行去除重复值</h2> 
<pre><code>df.drop_duplicates(['grammer'])
</code></pre> 
<h2><a id="popularity_151"></a>计算popularity列平均值</h2> 
<pre><code>df['popularity'].mean()
</code></pre> 
<p>out : 4.75</p> 
<h2><a id="popularity_158"></a>对数据按照"popularity"列值的大小进行排序</h2> 
<pre><code>df.sort_values("popularity",inplace=True)
df
</code></pre> 
<h2><a id="grammer_165"></a>统计grammer列每个字符串的长度</h2> 
<pre><code>df['grammer'] = df['grammer'].fillna('R')
df['len_str'] = df['grammer'].map(lambda x: len(x))
df
</code></pre> 
<h2><a id="grammerlist_173"></a>将grammer列转换为list</h2> 
<pre><code>df['grammer'].to_list()
</code></pre> 
<p>out : [‘Python’, ‘C’, ‘Java’, ‘GO’, nan, ‘SQL’, ‘PHP’, ‘Python’]</p> 
<h2><a id="DataFrameCSV_180"></a>将DataFrame保存为CSV</h2> 
<pre><code>df.to_csv('test.csv')
</code></pre> 
<h2><a id="_186"></a>查看数据行列数</h2> 
<pre><code>df.shape
</code></pre> 
<p>out : (8, 2)</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2fe4de608e9f1a2da05f3cd71178c4a7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PyCharm中PyQt5的配置与简单使用介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/be216aba24abcce6312edfc90b741898/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">中文NLP笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>