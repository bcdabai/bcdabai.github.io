<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LikeSql是什么 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LikeSql是什么" />
<meta property="og:description" content="设计宗旨：
专注于优雅地编写SQL和易读性保持细小和灵活 一些代码示例：
Java代码 public void testAtStyleExpression(){ LikeSql sql=DML.select(&#34;id,name&#34; ) .from(&#34;user&#34; ) .where(AtExp.at(&#34;(name =@name or id=@id) and gender=@gender&#34; ) .set(&#34;id&#34; , 1 ) .set(&#34;name&#34; , &#34;John&#34; ) .set(&#34;gender&#34; , &#34;M&#34; )); String eSql=&#34;SELECT id,name FROM user WHERE (name =&#39;John&#39; or id=1) and gender=&#39;M&#39;&#34; ; String eTpl=&#34;SELECT id,name FROM user WHERE (name =? or id=?) and gender=?&#34; ; assertEquals(eSql,sql.toString()); assertEquals(eTpl,sql.toTemplate()); } public void testAtStyleExpression(){ LikeSql sql=DML.select(&#34;id,name&#34;) .from(&#34;user&#34;) .where(AtExp.at(&#34;(name =@name or id=@id) and gender=@gender&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6cd72ee7643e18747175063c740e28d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-12-23T15:10:41+08:00" />
<meta property="article:modified_time" content="2010-12-23T15:10:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LikeSql是什么</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>设计宗旨：</p> 
<p> </p> 
<ul><li>专注于优雅地编写SQL和易读性</li><li>保持细小和灵活</li></ul> 
<p> </p> 
<p>一些代码示例：</p> 
<p> </p> 
<div class="dp-highlighter"> 
 <div class="bar"> 
  <div class="tools">
    Java代码 
  </div> 
 </div> 
 <ol class="dp-j"><li> <span class="keyword">public</span>   <span class="keyword">void</span>  testAtStyleExpression(){    </li><li>         LikeSql sql=DML.select(<span class="string">"id,name"</span> )    </li><li>                        .from(<span class="string">"user"</span> )    </li><li>                        .where(AtExp.at(<span class="string">"(name =@name or id=@id) and gender=@gender"</span> )    </li><li>                                                    .set(<span class="string">"id"</span> ,  <span class="number">1</span> )    </li><li>                                                    .set(<span class="string">"name"</span> ,  <span class="string">"John"</span> )    </li><li>                                                    .set(<span class="string">"gender"</span> ,  <span class="string">"M"</span> ));    </li><li>            </li><li>         String eSql=<span class="string">"SELECT id,name FROM user WHERE (name ='John' or id=1) and gender='M'"</span> ;    </li><li>         String eTpl=<span class="string">"SELECT id,name FROM user WHERE (name =? or id=?) and gender=?"</span> ;    </li><li>            </li><li>         assertEquals(eSql,sql.toString());   </li><li>         assertEquals(eTpl,sql.toTemplate());   </li><li>     }   </li></ol> 
</div> 
<pre><code class="language-java">public void testAtStyleExpression(){
		LikeSql sql=DML.select("id,name")
		               .from("user")
		               .where(AtExp.at("(name =@name or id=@id) and gender=@gender")
		            		                       .set("id", 1)
		            		                       .set("name", "John")
		            		                       .set("gender", "M"));
		
		String eSql="SELECT id,name FROM user WHERE (name ='John' or id=1) and gender='M'";
		String eTpl="SELECT id,name FROM user WHERE (name =? or id=?) and gender=?";
		
		assertEquals(eSql,sql.toString());
		assertEquals(eTpl,sql.toTemplate());
	}</code></pre> 
<div class="dp-highlighter"> 
 <div class="bar"> 
  <div class="tools">
    Java代码 
  </div> 
 </div> 
 <ol class="dp-j"><li> <span class="keyword">public</span>   <span class="keyword">void</span>  testInExpression(){    </li><li>         LikeSql sSql=DML.select(<span class="string">"id,name"</span> )    </li><li>             .from(<span class="string">"user"</span> )    </li><li>             .where(QuestExp.qt(<span class="string">"id in (?)"</span> ).set( <span class="number">1</span> ,ArrayExp.array( <span class="keyword">new</span>   <span class="keyword">int</span> []{<!-- --> <span class="number">1</span> , <span class="number">3</span> , <span class="number">6</span> })));    </li><li>            </li><li>         String eSql=<span class="string">"SELECT id,name FROM user WHERE id in (1,3,6)"</span> ;    </li><li>         String eTpl=<span class="string">"SELECT id,name FROM user WHERE id in (?,?,?)"</span> ;    </li><li>            </li><li>         assertEquals(eSql,sSql.toString());   </li><li>         assertEquals(eTpl,sSql.toTemplate());   </li><li>     }   </li></ol> 
</div> 
<pre><code class="language-java">public void testInExpression(){
		LikeSql sSql=DML.select("id,name")
		    .from("user")
		    .where(QuestExp.qt("id in (?)").set(1,ArrayExp.array(new int[]{1,3,6})));
		
		String eSql="SELECT id,name FROM user WHERE id in (1,3,6)";
		String eTpl="SELECT id,name FROM user WHERE id in (?,?,?)";
		
		assertEquals(eSql,sSql.toString());
		assertEquals(eTpl,sSql.toTemplate());
	}</code></pre> 
<div class="dp-highlighter"> 
 <div class="bar"> 
  <div class="tools">
    Java代码 
  </div> 
 </div> 
 <ol class="dp-j"><li> <span class="keyword">public</span>   <span class="keyword">void</span>  testSimpleSql(){    </li><li>         String eSql=<span class="string">"INSERT INTO users (no,id,name,gender,height) VALUES(1,15666662656565,'johny',null,195.36)"</span> ;    </li><li>         String eTpl=<span class="string">"INSERT INTO users (no,id,name,gender,height) VALUES(?,?,?,?,?)"</span> ;    </li><li>            </li><li>         LikeSql iSql=DML.insertInto(<span class="string">"users"</span> )    </li><li>             .value(<span class="string">"no"</span> ,  <span class="number">1</span> )    </li><li>             .value(<span class="string">"id"</span> ,  <span class="keyword">new</span>  BigInteger( <span class="string">"15666662656565"</span> ))    </li><li>             .value(<span class="string">"name"</span> , <span class="string">"johny"</span> )    </li><li>             .value(<span class="string">"gender"</span> , <span class="keyword">null</span> )    </li><li>             .value(<span class="string">"height"</span> ,  <span class="number">195.36</span> );    </li><li>            </li><li>         assertEquals(eSql,iSql.toString());   </li><li>         assertEquals(eTpl,iSql.toTemplate());   </li><li>     }   </li></ol> 
</div> 
<pre><code class="language-java">public void testSimpleSql(){
		String eSql="INSERT INTO users (no,id,name,gender,height) VALUES(1,15666662656565,'johny',null,195.36)";
		String eTpl="INSERT INTO users (no,id,name,gender,height) VALUES(?,?,?,?,?)";
		
		LikeSql iSql=DML.insertInto("users")
		    .value("no", 1)
		    .value("id", new BigInteger("15666662656565"))
		    .value("name","johny")
		    .value("gender",null)
		    .value("height", 195.36);
		
		assertEquals(eSql,iSql.toString());
		assertEquals(eTpl,iSql.toTemplate());
	}</code></pre> 
<p> </p> 
<h3> </h3> 
<div class="dp-highlighter"> 
 <div class="bar"> 
  <div class="tools">
    Java代码 
  </div> 
 </div> 
 <ol class="dp-j"><li> &lt;span style= <span class="string">"font-weight: normal;"</span> &gt;LikeSql sql=DML.selectAll()    </li><li>                                .from(<span class="string">"user"</span> )    </li><li>                                .where(QuestExp.qt(<span class="string">"id=? AND gender=?"</span> )    </li><li>                                               .set(<span class="number">1</span> ,  <span class="number">1</span> )    </li><li>                                               .set(<span class="number">2</span> ,  <span class="string">'M'</span> ));    </li><li>                 PreparedStatement stmt=sql.toPreStatement(con);   </li><li>                 System.out.println(<span class="string">"Template:"</span> +sql.toTemplate());    </li><li>                 System.out.println(<span class="string">"SQL:"</span> +sql.toString());    </li><li>                 ResultSet rs=stmt.executeQuery();   </li><li>                 <span class="keyword">while</span> (rs.next()){    </li><li>                     System.out.println(rs.getString(<span class="string">"name"</span> ));    </li><li>                 }&lt;/span&gt;   </li></ol> 
</div> 
<pre><code class="language-java"><span style="font-weight:normal;">LikeSql sql=DML.selectAll()
				               .from("user")
				               .where(QuestExp.qt("id=? AND gender=?")
						                      .set(1, 1)
						                      .set(2, 'M'));
				PreparedStatement stmt=sql.toPreStatement(con);
				System.out.println("Template:"+sql.toTemplate());
				System.out.println("SQL:"+sql.toString());
				ResultSet rs=stmt.executeQuery();
				while(rs.next()){
					System.out.println(rs.getString("name"));
				}</span>
</code></pre> 
<h3> </h3> 
<h3> <strong>LikeSql不是什么</strong> </h3> 
<p> </p> 
<ul><li>LikeSql不是ORM框架</li><li>LikeSql不是重复发明iBatis，Hibernate</li></ul> 
<p> </p> 
<h3> <strong>为什么会有LikeSql</strong> </h3> 
<div> 
 <strong>其实最初的想法来源于我工作经手的几个项目，项目都是采用简单的JDBC+直接拼接SQL来访问数据库。直接拼接SQL存在诸多缺点，这里就不在多论述了。主要是我在维护和改进的过程中，发现并没有一个很优雅的方式来处理SQL。我写过两篇文章来讨论过这个问题</strong> 
</div> 
<div> 
 <br> 
</div> 
<div>
  我使用DSL编写SQL的一个java实现 
</div> 
<div> 
 <a href="http://www.iteye.com/topic/620906">http://www.iteye.com/topic/620906</a> 
</div> 
<div> 
 <br> 
</div> 
<div>
  你还在用PreparedStatement吗 
</div> 
<div> 
 <a href="http://www.iteye.com/topic/756176">http://www.iteye.com/topic/756176</a> 
</div> 
<div> 
 <br> 
</div> 
<div>
  我认为PreparedStatement对比直接拼接SQL并没有绝对的优势，而且它没法解决一些实际的需求，写起来也不能算优雅。于是我开 始搜索相关的解决方案，并没有发现一些现存的工具，在读了很多相关的文章，我认为DSL会是一个很好的方式来处理SQL。我在工作的项目当中引入了DSL 的思想，写了一个雏形的框架，因为一开始写的时候，设计不是特别完善，于是决定做一个开源的项目，把这个框架重新设计，这就成了LikeSql。 
</div> 
<h3><br></h3> 
<h3>LikeSql的计划</h3> 
<ol><li>尽快完善文档，释出release版本（希望年内达成吧）</li><li>编写教程和例子</li><li>建立反馈渠道和讨论圈子</li><li>和其他框架的集成</li></ol> 
<p> </p> 
<h3>关于LikeSql的名字</h3> 
<p> </p> 
<p>Like有两层意思，一个相似，像的意思，就是希望这个框架写起来与SQL文本很相近，易读性强；另一个意思是喜欢，希望使用它的用户能够喜欢写SQL。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/042b509c739971b091c1a11e8ab2842a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nutch1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f28dfafae345e2801752029b9a715974/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于KDJ指标的MQL4的实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>