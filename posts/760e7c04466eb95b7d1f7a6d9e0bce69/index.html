<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PostgreSQL数据库常用操作(20221210) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PostgreSQL数据库常用操作(20221210)" />
<meta property="og:description" content="记录：359
场景：PostgreSQL数据库常用操作，创建用户、数据库、表、主键、索引、注释等。配置远程可连接、配置环境变量、常用命令行操作。表的增删改查等操作。
版本：
操作系统：CentOS 7.9
PostgreSQL版本：PostgreSQL 13.4
PostgreSQL帮助手册：
官网入口：https://www.postgresql.org/
文档入口：https://www.postgresql.org/docs
文档内容列表：https://www.postgresql.org/docs/current/
支持的命令列表：https://www.postgresql.org/docs/current/reference.html
psql命令行列表：https://www.postgresql.org/docs/current/app-psql.html
1.PostgreSQL数据库
1.1PostgreSQL
PostgreSQL: The World&#39;s Most Advanced Open Source Relational Database.
PostgreSQL is a powerful, open source object-relational database system that has earned it a strong reputation for reliability, feature robustness, and performance.
解析：PostgreSQL是一个先进的开源关系型数据库。在可靠性、健壮性和性能方面赢得很高声誉。
1.2PostgreSQL历史版本下载
(1)下载地址
官网地址：https://ftp.postgresql.org/pub/source/
解析：下载需求的各版本移步此网站。
(2)命令下载
命令下载：wget https://ftp.postgresql.org/pub/source/v13.4/postgresql-13.4.tar.gz --no-check-certificate
(3)页面下载
浏览器登录到下载页面，选择对应版本。
2.安装PostgreSQL
注意：从1.3步骤下载的包是源码包，需要编译后才能安装使用。PostgreSQL启动运行一般使用Linux操作系统的普通用户。
(1)解压
解压命令：tar -xzvf /home/apps/software/postgresql-13.4.tar.gz -C /home/apps/module
(2)编译和安装
操作目录：cd /home/apps/module/postgresql-13.4
编译命令：make -C /home/apps/module/postgresql-13." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/760e7c04466eb95b7d1f7a6d9e0bce69/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-11T18:14:46+08:00" />
<meta property="article:modified_time" content="2022-12-11T18:14:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PostgreSQL数据库常用操作(20221210)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:left;"><strong><strong>记录</strong></strong>：359</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>场景</strong></strong>：PostgreSQL数据库常用操作，创建用户、数据库、表、主键、索引、注释等。配置远程可连接、配置环境变量、常用命令行操作。表的增删改查等操作。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>版本：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">操作系统：CentOS 7.9</p> 
<p style="margin-left:.0001pt;text-align:left;">PostgreSQL版本：PostgreSQL 13.4</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>PostgreSQL帮助手册：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>官网入口</strong></strong>：https://www.postgresql.org/</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>文档入口</strong></strong>：https://www.postgresql.org/docs</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>文档内容列表</strong></strong>：https://www.postgresql.org/docs/current/</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>支持的命令列表</strong></strong>：https://www.postgresql.org/docs/current/reference.html</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>psql命令行列表</strong></strong>：https://www.postgresql.org/docs/current/app-psql.html</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>1.PostgreSQL数据库</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>1.1PostgreSQL</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">PostgreSQL: The World's Most Advanced Open Source Relational Database.</p> 
<p style="margin-left:.0001pt;text-align:left;">PostgreSQL is a powerful, open source object-relational database system that has earned it a strong reputation for reliability, feature robustness, and performance.</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：PostgreSQL是一个先进的开源关系型数据库。在可靠性、健壮性和性能方面赢得很高声誉。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>1.2PostgreSQL历史版本下载</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)下载地址</p> 
<p style="margin-left:.0001pt;text-align:left;">官网地址：https://ftp.postgresql.org/pub/source/</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：下载需求的各版本移步此网站。</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)命令下载</p> 
<p style="margin-left:.0001pt;text-align:left;">命令下载：wget https://ftp.postgresql.org/pub/source/v13.4/postgresql-13.4.tar.gz --no-check-certificate</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)页面下载</p> 
<p style="margin-left:.0001pt;text-align:left;">浏览器登录到下载页面，选择对应版本。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>2.安装PostgreSQL</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">注意：从1.3步骤下载的包是源码包，需要编译后才能安装使用。PostgreSQL启动运行一般使用Linux操作系统的普通用户。</p> 
<p style="margin-left:.0001pt;text-align:left;">(1)解压</p> 
<p style="margin-left:.0001pt;text-align:left;">解压命令：tar -xzvf /home/apps/software/postgresql-13.4.tar.gz -C /home/apps/module</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)编译和安装</p> 
<p style="margin-left:.0001pt;text-align:left;">操作目录：cd /home/apps/module/postgresql-13.4</p> 
<p style="margin-left:.0001pt;text-align:left;">编译命令：make -C /home/apps/module/postgresql-13.4</p> 
<p style="margin-left:.0001pt;text-align:left;">安装命令：make install PREFIX=/home/apps/module/postgresql</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)数据目录</p> 
<p style="margin-left:.0001pt;text-align:left;">创建命令：mkdir -p /home/data/postgresql/data</p> 
<p style="margin-left:.0001pt;text-align:left;">(4)创建Linux普通用户</p> 
<p style="margin-left:.0001pt;text-align:left;">创建Linux用户：useradd postgres</p> 
<p style="margin-left:.0001pt;text-align:left;">(5)PostgreSQL安装目录和数据目录赋权给普通用户</p> 
<p style="margin-left:.0001pt;text-align:left;">PostgreSQL安装目录和数据目录，所有权修改为postgres用户。</p> 
<p style="margin-left:.0001pt;text-align:left;">安装目录赋权：chown -R postgres:postgres /home/apps/module/postgresql/</p> 
<p style="margin-left:.0001pt;text-align:left;">数据目录赋权：chown -R postgres:postgres /home/data/postgresql/data/</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>3.普通用户postgres切换</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">切换到普通用户：su postgres</p> 
<p style="margin-left:.0001pt;text-align:left;">退出普通用户：exit postgres</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：postgres用户做所有关于PostgreSQL的操作包括启动、运行、登录数据库等操作。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>4.环境变量配置</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)配置环境变量</p> 
<p style="margin-left:.0001pt;text-align:left;">修改命令：vi /home/postgres/.bash_profile</p> 
<p style="margin-left:.0001pt;text-align:left;">修改内容：</p> 
<pre><code class="language-bash">PGHOME=/home/apps/module/postgresql
export PGHOME
PGDATA=/home/data/postgresql/data
export PGDATA
PATH=$PATH:$HOME/.local/bin:$HOME/bin:$PGHOME/bin</code></pre> 
<p style="margin-left:.0001pt;text-align:left;">(2)环境变量生效</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：source /home/postgres/.bash_profile</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)环境变量开机启动生效配置</p> 
<p style="margin-left:.0001pt;text-align:left;">修改指令：vi /etc/profile</p> 
<p style="margin-left:.0001pt;text-align:left;">增加内容：source /home/postgres/.bash_profile</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>5.初始化PostgreSQL</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：initdb</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>6.启动、重启和停止</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">启动命令：pg_ctl -D /home/data/postgresql/data -l /home/data/postgresql/data/postgres.log start</p> 
<p style="margin-left:.0001pt;text-align:left;">重启命令：pg_ctl -D /home/data/postgresql/data -l /home/data/postgresql/data/postgres.log restart</p> 
<p style="margin-left:.0001pt;text-align:left;">停止命令：pg_ctl stop</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：-D，指定数据库数据存储目录；-l，指定日志输出目录。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>7.登录PostgreSQL</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">本机登录不指定用户名和数据库名称，实际就是登录postgres，在postgres用户超级用户(Superuser)。</p> 
<p style="margin-left:.0001pt;text-align:left;">注意：首次登录是不需要密码，换句话说，默认命名是空的，因此，首次登录后需要修改密码。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>7.1登录超级用户数据库postgres</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)首次登录</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：psql</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)修改密码后登录</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：psql</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：需要输入密码。提示：Password for user postgres: 。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>7.2登录普通用户数据库</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">登录命令：psql -U hangzhou -d hzdb</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：psql，使用命令行登录；-U，指定用户；-d，指定数据库。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>8.修改登录密码</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">修改命令：\password</p> 
<p style="margin-left:.0001pt;text-align:left;">口令：demo123456</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：需输入两次；\是PostgreSQL的命令语法。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>9.退出登录</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">退出登录的PostgreSQL。</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\q</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：\是PostgreSQL的命令语法。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>10.设置远程可登录</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)修改远程可登录</p> 
<p style="margin-left:.0001pt;text-align:left;">修改文件：vi /home/data/postgresql/data/postgresql.conf</p> 
<p style="margin-left:.0001pt;text-align:left;">修改内容：</p> 
<p style="margin-left:.0001pt;text-align:left;">listen_addresses = '*'</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：把#listen_addresses = 'localhost'，修改为匹配所有IP地址。</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)修改登录需要密码</p> 
<p style="margin-left:.0001pt;text-align:left;">修改文件：vi /home/data/postgresql/data/pg_hba.conf</p> 
<p style="margin-left:.0001pt;text-align:left;">修改内容：</p> 
<pre><code class="language-bash">local   all    all                     password
host    all    all    127.0.0.1/32     password
host    all    all    192.168.19.1/32  password
host    all    all    ::1/128          password</code></pre> 
<p style="margin-left:.0001pt;text-align:left;">解析：192.168.19.1/32，部署PostgreSQL主机是192.168.19.166。</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)可以使用navicat等客户端登录</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>11.常用命令行</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">常用命令行实际上就是使用psql登录数据库后，支持的命令行和SQL语句。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>注意</strong></strong>：</p> 
<p style="margin-left:.0001pt;text-align:left;">PostgreSQL的普通命令行使用反斜杆\开头，结尾无标识符。例如：</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\du</p> 
<p style="margin-left:.0001pt;text-align:left;">PostgreSQL的SQL语句命令行以分号结尾。例如：</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：create database hzdb;</p> 
<p style="margin-left:.0001pt;text-align:left;">官网地址：https://www.postgresql.org/docs/current/app-psql.html</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(1)登录数据库</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">登录：psql</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：默认登录超级用户。</p> 
<p style="margin-left:.0001pt;text-align:left;">登录：psql -U hangzhou -d hzdb</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：psql，使用命令行登录；-U，指定用户；-d，指定数据库。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(2)查看数据库用户列表</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\du</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(3)查看数据库列表</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\l</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(4)切换数据库</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令格式：\c 数据库名称</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\c hzdb</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：切换到hzdb数据库。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(5)列举数据库中表清单</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\dt</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(6)查看表结构</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\d 表名称</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\d t_city</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：\d查看表结构，包括表字段名称、类型、主键、索引等。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(7)修改密码</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\password</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：修改当前用户登录密码。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(8)退出登录</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\q</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：退出psql程序，也就是退出登录。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(9)查看命令帮助文档</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\h</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：显示数据库支持的全部SQL语句的命令，比如SELECT、CREATE TABLE等。</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\h CREATE TABLE</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：查看CREATE TABLE语句的使用方法。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(10)列出转换类型</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\dC</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>12.创建和删除数据库用户</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)创建数据库用户</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：create user hangzhou with password 'demo123456';</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)删除数据库用户</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：drop user hangzhou;</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)查看数据库用户</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\du</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：查看数据库中用户角色，以及角色拥有的权限</p> 
<p style="margin-left:.0001pt;text-align:left;">(4)使用普通用户登录。</p> 
<p style="margin-left:.0001pt;text-align:left;">主机名：192.168.19.166</p> 
<p style="margin-left:.0001pt;text-align:left;">端口：5432</p> 
<p style="margin-left:.0001pt;text-align:left;">数据库：hzdb</p> 
<p style="margin-left:.0001pt;text-align:left;">用户名：hangzhou</p> 
<p style="margin-left:.0001pt;text-align:left;">密码：demo@123456</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>13.创建和删除数据库</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)创建数据库</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：create database hzdb;</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：create database hzdb owner hangzhou;</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)删除数据库</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：drop database hzdb;</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)查看数据库列表</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：\l</p> 
<p style="margin-left:.0001pt;text-align:left;">解析：查看数据库列表，数据库隶属用户，数据库编码，数据库字符集。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>14.创建表(</strong></strong><strong><strong>CREATE TABLE</strong></strong><strong><strong>)</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(1)建表</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">建表语句：</p> 
<pre><code class="language-sql">CREATE TABLE t_city (
  ID BIGINT NOT NULL,
  CITY_NAME VARCHAR (64),
  LAND_AREA FLOAT8 DEFAULT NULL,
  POPULATION BIGINT DEFAULT NULL,
  GROSS FLOAT8 DEFAULT NULL,
  CITY_DESCRIBE VARCHAR (512) DEFAULT NULL,
  DATA_YEAR VARCHAR (16) DEFAULT NULL,
  UPDATE_TIME TIMESTAMP DEFAULT NULL
);</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(2)添加表名称和字段注释</strong></strong></p> 
<pre><code class="language-sql">-- 表名称注释
COMMENT ON TABLE t_city IS '城市信息表';
-- 字段注释
COMMENT ON COLUMN t_city.ID IS '主键';
COMMENT ON COLUMN t_city.CITY_NAME IS '城市名';
COMMENT ON COLUMN t_city.LAND_AREA IS '城市面积';
COMMENT ON COLUMN t_city.POPULATION IS '城市人口';
COMMENT ON COLUMN t_city.GROSS IS '生产总值';
COMMENT ON COLUMN t_city.CITY_DESCRIBE IS '城市描述';
COMMENT ON COLUMN t_city.DATA_YEAR IS '数据年份';
COMMENT ON COLUMN t_city.UPDATE_TIME IS '更新时间';</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(3)创建主键</strong></strong></p> 
<pre><code class="language-sql">-- 主键约束
ALTER TABLE t_city ADD CONSTRAINT t_city_id_pk PRIMARY KEY (ID);</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>(4)创建索引</strong></strong></p> 
<pre><code class="language-sql">-- 索引
CREATE INDEX idx_city_name ON t_city (CITY_NAME);</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>15.表应用</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>15.1增(INSERT INTO)</strong></strong></p> 
<pre><code class="language-sql">INSERT INTO t_city (
  ID,CITY_NAME,LAND_AREA,POPULATION,
  GROSS,CITY_DESCRIBE,DATA_YEAR,UPDATE_TIME)
  VALUES
('1','杭州','16850','1200','1.61','杭州是一个好城市','2020','2022-12-10 15:39:32'),
('2','杭州','16850','1200','1.81','杭州是一个好城市','2021','2022-12-10 15:39:33');</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>15.2查(SELECT)</strong></strong></p> 
<pre><code class="language-sql">SELECT
  ID,CITY_NAME,LAND_AREA,POPULATION,
  GROSS,CITY_DESCRIBE,DATA_YEAR,UPDATE_TIME
FROM t_city;</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>15.3改(UPDATE)</strong></strong></p> 
<pre><code class="language-sql">UPDATE
  t_city
SET
  CITY_DESCRIBE = '杭州是互联网城市'
WHERE CITY_NAME = '杭州'
  AND ID = '1';</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>15.4删(DELETE)</strong></strong></p> 
<pre><code class="language-sql">DELETE FROM t_city WHERE CITY_NAME = '杭州' AND ID = '1';</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>16.删除表(DROP TABLE)</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">SQL语句：drop table t_city;</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>17.超级用户postgres的表</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)查看系统表清单(表: pg_tables)</p> 
<p style="margin-left:.0001pt;text-align:left;">SQL: select * from pg_tables;</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)查看数据库用户(表: pg_authid)</p> 
<p style="margin-left:.0001pt;text-align:left;">SQL: select * from pg_authid;</p> 
<p style="margin-left:.0001pt;text-align:left;">(3)查看已建数据库(表: pg_database)</p> 
<p style="margin-left:.0001pt;text-align:left;">SQL: select * from pg_database;</p> 
<p style="margin-left:.0001pt;text-align:left;">(4)查看分区表(表: pg_partitioned_table)</p> 
<p style="margin-left:.0001pt;text-align:left;">SQL: select * from pg_partitioned_table;</p> 
<p style="margin-left:.0001pt;text-align:left;">(5)查看序列(表: pg_sequence)</p> 
<p style="margin-left:.0001pt;text-align:left;">SQL: select * from pg_sequence;</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>18.导出建表语句</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">(1)登录部署数据库主机</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：su postgres</p> 
<p style="margin-left:.0001pt;text-align:left;">(2)导出指定数据库</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：pg_dump -U hangzhou -d hzdb -s &gt; allTable.sql</p> 
<p style="margin-left:.0001pt;text-align:left;">导出的表结构：</p> 
<pre><code class="language-sql">--
-- Name: t_city; Type: TABLE; Schema: public; Owner: hangzhou
--
CREATE TABLE public.t_city (
    id bigint NOT NULL,
    city_name character varying(64),
    land_area double precision,
    population bigint,
    gross double precision,
    city_describe character varying(512) DEFAULT NULL::character varying,
    data_year character varying(16) DEFAULT NULL::character varying,
    update_time timestamp without time zone
);
ALTER TABLE public.t_city OWNER TO hangzhou;
--
-- Name: TABLE t_city; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON TABLE public.t_city IS '城市信息表';
--
-- Name: COLUMN t_city.id; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.id IS '主键';
--
-- Name: COLUMN t_city.city_name; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.city_name IS '城市名';
--
-- Name: COLUMN t_city.land_area; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.land_area IS '城市面积';
--
-- Name: COLUMN t_city.population; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.population IS '城市人口';
--
-- Name: COLUMN t_city.gross; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.gross IS '生产总值';
--
-- Name: COLUMN t_city.city_describe; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.city_describe IS '城市描述';
--
-- Name: COLUMN t_city.data_year; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.data_year IS '数据年份';
--
-- Name: COLUMN t_city.update_time; Type: COMMENT; Schema: public; Owner: hangzhou
--
COMMENT ON COLUMN public.t_city.update_time IS '更新时间';
--
-- Name: t_city t_city_id_pk; Type: CONSTRAINT; Schema: public; Owner: hangzhou
--
ALTER TABLE ONLY public.t_city
    ADD CONSTRAINT t_city_id_pk PRIMARY KEY (id);
--
-- Name: idx_city_name; Type: INDEX; Schema: public; Owner: hangzhou
--
CREATE INDEX idx_city_name ON public.t_city USING btree (city_name);</code></pre> 
<p style="margin-left:.0001pt;text-align:left;">以上，感谢。</p> 
<p style="margin-left:.0001pt;text-align:right;">2022年12月10日</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/36af93e37d0e77e3739fc787b7dbb165/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二叉树的构造(如何唯一确定一棵二叉树?附证明)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e0a32131f38cfbe9f1e4602ce42d525d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解一元二次方程——Java</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>