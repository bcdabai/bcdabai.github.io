<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ASP.NETCore - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ASP.NETCore" />
<meta property="og:description" content="0. ASP.NETCore 介绍 ASP.NETCore是一个新的开源和跨平台的框架，用于构建如Web应用、物联网（IoT)应用和移动后端应用等连接到互联网的基于云的现代应用程序。ASP.NET Core应用可运行于.NET Core和完整的.NET Framework之上。构建它的目的是为那些部署在云端或者内部运行的应用提 供一个优化的开发框架。它由最小开销的模块化的组件构成，因此在构建解决方案的同时可以 保持灵活性。我们可以在Windows、Mac和Linux上跨平台开发和运行自己的ASP.NET Core 应用。
ASP.NETCore 开源在 GitHub 上。ASP.NET Core有一些架构上的改变，这些改变使得它成为一个更为精简并且模块化的框架。ASP.NET Core不再基于System.Web.dll。当前它基于一系列颗粒化的，并且有良好构建的 NuGet包。这一特点能够让你通过仅仅包含需要的NuGet包的方法来优化你的应用。一个更小 的应用程序接口通过“只为你需要的功能付出”（pay-for-what-you-use)模型获得的好处包括: 可靠的安全性、简化服务、改进性能和减少成本。
通过ASP.NET Core可以获得的改进如下：
一个统一的方式用于构建Web UI和Web APIs。
集成现代的客户端开发框架和开发流程。
一个适用于云的，基于环境的配置系统。
内置的依赖注入。
新型的、轻量级的、模块化HTTP请求管道。
运行于IIS或者自宿主（self_host)于你自己的进程的能力。
基于支持真正的side-by-side应用程序版本化的.NET Core构建。
完全以NuGet包的形式发布。
新的用于简化现代Web开发的工具。
可以在Windows、Mac和Linux上构建和运行跨平台的ASP.NET应用。
开源并且重视社区。
1. ASP.NETCore 应用 使用VS 2017新建一个Web应用，打开VS 2017创建一个新的解决方案，在解决方案中新建一个项目，在添加新项目窗口中选择 .NET Core，选择ASP.NETCore Web应用程序，如下图所示：
这里的实例我们使用 Web Application (MVC) 框架版本为 .NET Core 2.1 如下图所示：
选择ASP.NET Core 项目模板
一个ASP.NET Core 应用其实就是在 Program 类的 Main方法调用 WebHost.CreateDefaultBuilder方法，创建了一个默认的Web应用程序宿主（Web服务器）。相比于.NET Core 1.0 在.NET Core 2.x 少了许多配置，新的方式已经隐藏了很多细节， 在WebHost." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1db67481f9b89742ec9eaf936e3b8299/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-10T22:43:32+08:00" />
<meta property="article:modified_time" content="2023-01-10T22:43:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ASP.NETCore</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">0. ASP.NETCore 介绍</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NETCore是一个新的开源和跨平台的框架，用于构建如Web应用、物联网（IoT)应用和移动后端应用等连接到互联网的基于云的现代应用程序。</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core应用可运行于.NET Core和完整的.NET Framework之上。构建它的目的是为那些部署在云端或者内部运行的应用提 供一个优化的开发框架。它由最小开销的模块化的组件构成，因此在构建解决方案的同时可以 保持灵活性。我们可以在Windows、Mac和Linux上跨平台开发和运行自己的</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core 应用。</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NETCore 开源在 </span><a class="kdocs-link" style="color:#0A6CFF;" href="https://github.com/aspnet/home" target="_blank" rel="noopener noreferrer"><span class="kdocs-fontSize" style="font-size:13pt;">GitHub</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> 上。</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core有一些架构上的改变，这些改变使得它成为一个更为精简并且模块化的框架。</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core不再基于System.Web.dll。当前它基于一系列颗粒化的，并且有良好构建的 NuGet包。这一特点能够让你通过仅仅包含需要的NuGet包的方法来优化你的应用。一个更小 的应用程序接口通过“只为你需要的功能付出”（pay-for-what-you-use)模型获得的好处包括: 可靠的安全性、简化服务、改进性能和减少成本。</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">通过</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core可以获得的改进如下：</span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>一个统一的方式用于构建Web UI和Web APIs。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>集成现代的客户端开发框架和开发流程。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>一个适用于云的，基于环境的配置系统。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>内置的依赖注入。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>新型的、轻量级的、模块化HTTP请求管道。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>运行于IIS或者自宿主（self_host)于你自己的进程的能力。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>基于支持真正的side-by-side应用程序版本化的.NET Core构建。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>完全以NuGet包的形式发布。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>新的用于简化现代Web开发的工具。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>可以在Windows、Mac和Linux上构建和运行跨平台的<a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank">ASP.NET</a>应用。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>开源并且重视社区。</p></li></ul> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. ASP.NETCore 应用</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:13pt;">使用VS 2017新建一个Web应用，打开VS 2017创建一个新的解决方案，在解决方案中新建一个项目，在添加新项目窗口中选择 </span>.NET Core<span class="kdocs-fontSize" style="font-size:13pt;">，选择</span>ASP.NETCore Web应用程序<span class="kdocs-fontSize" style="font-size:13pt;">，如下图所示：</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:740;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:61.08108%;height:0;"> 
    <img src="https://images2.imgbox.com/4d/fd/1obFoqkb_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-61.08108%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">这里的实例我们使用 </span>Web Application (MVC)<span class="kdocs-fontSize" style="font-size:13pt;"> 框架版本为 </span>.NET Core 2.1<span class="kdocs-fontSize" style="font-size:13pt;"> 如下图所示：</span></p> 
 <div class="kdocs-line-container" style="display:flex;justify-content:center;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:740;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:65.13513%;height:0;"> 
    <img src="https://images2.imgbox.com/6c/93/SOOsnUKD_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-65.13513%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;"><span class="kdocs-fontSize" style="font-size:13pt;">选择</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core 项目模板</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;"> </span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">一个</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core 应用其实就是在 Program 类的 Main方法调用 </span>WebHost.CreateDefaultBuilder<span class="kdocs-fontSize" style="font-size:13pt;">方法，创建了一个默认的Web应用程序宿主（</span>Web服务器<span class="kdocs-fontSize" style="font-size:13pt;">）。相比于.NET Core 1.0 在.NET Core 2.x 少了许多配置，新的方式已经隐藏了很多细节， 在</span>WebHost.CreateDefaultBuilder<span class="kdocs-fontSize" style="font-size:13pt;">这个函数内部帮助我们完成了大部分的配置工作（启用了Web服务器 </span>UseKestrel<span class="kdocs-fontSize" style="font-size:13pt;">、配置内容根目录 </span>UseContentRoot<span class="kdocs-fontSize" style="font-size:13pt;">等）。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">在下面的代码中，</span>Main方法<span class="kdocs-fontSize" style="font-size:13pt;">创建了一个默认的Web服务器，并指定</span>Startup<span class="kdocs-fontSize" style="font-size:13pt;">类（</span>UseStartup<span class="kdocs-fontSize" style="font-size:13pt;">）的方法。下面会讲解更多关于 Startup 的内容。</span>Build<span class="kdocs-fontSize" style="font-size:13pt;"> 和 </span>Run<span class="kdocs-fontSize" style="font-size:13pt;"> 方法构建了用于宿主应用程序的 IWebHost，然后启动它来监听传入的HTTP请求。</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.Logging;

namespace WebApplicationDome
{
    public classProgram
    {
        public staticvoidMain(string[] args)
        {
            CreateWebHostBuilder(args).Build().Run();
        }

        public static IWebHostBuilder CreateWebHostBuilder(string[] args) =&gt;
            WebHost.CreateDefaultBuilder(args)
                .UseStartup&lt;Startup&gt;();
    }
}</code></pre> 
 <hr> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2. 服务器</span></h4> 
 <p style=""><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core 托管模式并不直接监听请求，而是依赖于一个 HTTP Server 实现来转发请求到应用程序。这个被转发的请求会以一组 feature 接口的形式被包装，然后被应用程序组合到一个 HttpContext 中去。</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core 包含了一个托管的跨平台Web服务器：</span>Kestrel<span class="kdocs-fontSize" style="font-size:13pt;">，它往往会 被运行在一个如 IIS 或者 Nginx 的生产 Web 服务器之后。</span></p> 
 <hr> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3. Startup.cs</span></h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">WebHostBuilderExtensions 的 </span>UseStartup<span class="kdocs-fontSize" style="font-size:13pt;"> 方法为你的应用指定了 </span>Startup<span class="kdocs-fontSize" style="font-size:13pt;"> 类。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">Startup类是应用程序的入口（entrypoint），这个类可以用来定义请求处理管道和配置应用需耍的服务。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">Startup 类必须是公开的 (public)。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">Startup类能够选择性地在构造函数中接受通过依赖注入提供的依赖项。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">Startup类必须定义 </span>Configure<span class="kdocs-fontSize" style="font-size:13pt;">方法，可选择定义一个 </span>ConfigureServices<span class="kdocs-fontSize" style="font-size:13pt;">方法，这些方法将在应用程序启动时被调用：</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">public classStartup
{// This method gets called by the runtime. Use this method to add services to the container.
    public voidConfigureServices(IServiceCollection services)
    {
    }

    // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.
    public voidConfigure(IApplicationBuilder app, IHostingEnvironment env)
    {
    }
}</code></pre> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">在ASP.NETCore中，Startup类提供了应用程序的入口，而且在所有应用程序都有Startup类。可能会存在特定环境的启动类和方法，但无论如何，Startup 类都将被充当为应用程序的启动点。</span></p> 
 <h5 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1）. ConfigureServices方法</span></h5> 
 <p style="">ConfigureServices<span class="kdocs-fontSize" style="font-size:13pt;"> 方法用于定义应用程序所使用的服务。通过</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/anayigeren/p/10231223.html#" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">依赖注入</span></a><span class="kdocs-fontSize" style="font-size:13pt;">可将服务加入服务容器（IoC容器），使其在应用程序中可用。正如 Startup 类能将指定的依赖项作为其方法参数——而不足硬编码（hard-coding）来实例化特定实现，在应用程序中的其他类都可以做到这一点。通过在 </span>IServiceCollection<span class="kdocs-fontSize" style="font-size:13pt;"> 上使用扩展方法来包装需要大量配置细节的 </span>ConfigureServices<span class="kdocs-fontSize" style="font-size:13pt;">。在下面的例子（使用了默认的Web应用程序MVC模板）中看到 </span>ConfigureServices<span class="kdocs-fontSize" style="font-size:13pt;"> 方法中有个 </span>AddMvc<span class="kdocs-fontSize" style="font-size:13pt;"> 的扩展方法被用于设罝应用程序能够使用MVC服务：</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">public voidConfigureServices(IServiceCollection services)
{
    services.Configure&lt;CookiePolicyOptions&gt;(options =&gt;
    {
        // This lambda determines whether user consent for non-essential cookies is needed for a given request.
        options.CheckConsentNeeded = context =&gt; true;
        options.MinimumSameSitePolicy = SameSiteMode.None;
    });

    services.AddMvc().SetCompatibilityVersion(CompatibilityVersion.Version_2_1);
}</code></pre> 
 <h5 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2）. Configure方法</span></h5> 
 <p style="">Configure<span class="kdocs-fontSize" style="font-size:13pt;">方法用于指定</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;">方法用于指定ASP.NET应用程序将如何响应每一个HTTP请求。简单来说，你可以配置每个请求都接收相同的响应。然而，大多数实际的应用程序都需要比这更多的功能。更复杂的管道配置可以封装于中间件（middleware）中，并通过扩展方法添加到 </span>lApplicationBuilder<span class="kdocs-fontSize" style="font-size:13pt;"> 上。</span>Configure<span class="kdocs-fontSize" style="font-size:13pt;"> 方法必须接受一个 </span>IApplicationBuilder<span class="kdocs-fontSize" style="font-size:13pt;"> 参数。一些额外服务，比如 </span>IHostingEnvironment<span class="kdocs-fontSize" style="font-size:13pt;"> 或 </span>ILoggerFactory<span class="kdocs-fontSize" style="font-size:13pt;"> 也可以被指定，并且在它们可用的情况下，这些服务将会被服务器注入进来。在下面的例子（来源于默认的Web应用程序MVC站点模板），多个扩展方法被用于配罝管道，以支持错误页、静态文件、</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> MVC路由。</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">public voidConfigure(IApplicationBuilder app, IHostingEnvironment env)
{
    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }
    else
    {
        app.UseExceptionHandler("/Home/Error");
        app.UseHsts();
    }

    app.UseHttpsRedirection(); // 添加HTTPS重定向中间件
    app.UseStaticFiles();    // 添加静态文件中间件
    app.UseCookiePolicy();   // 使用Cookie策略中间件

    app.UseMvc(routes =&gt;    // 使用MVC中间件
    {
        routes.MapRoute(
            name: "default",
            template: "{controller=Home}/{action=Index}/{id?}");
    });
}</code></pre> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">每个 Use 扩展方法都会把一个中间件加入请求管道中。例如，</span>UseMvc<span class="kdocs-fontSize" style="font-size:13pt;">扩展方法增加路由中间件请求管道，并配置MVC为默认处理程序。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">在下一节</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/anayigeren/p/10278151.html" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">中间件</span></a><span class="kdocs-fontSize" style="font-size:13pt;">，将会介绍更多有关中间件的信息，包括使用 </span>IApplicationBuilder<span class="kdocs-fontSize" style="font-size:13pt;"> 来定义请求管道，创建自己的自定义中间件。</span></p> 
 <h5 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3）. 在启动时服务可用</span></h5> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NETCore在应用程序启动期间提供了一些应用服务和对象。使用这些服务的方法非常简单，只要在 Startup 类的构造函数中包含合适的接口，或是在它的 Configure方法、ConfigureServices方法中包含合适的接口即可。下面定义了在Startup类中对每个方法可用的服务。框架服务和对象包括如下内容：</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">①. </span>IApplicationBuilder</p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">被用于构建应用程序的请求管道。只能在 Startup 中的 Configure方法里使用。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">②. </span>IApplicationEnvironment</p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">提供了访问应用程序属性，类似于ApplicationNamc、ApplicationVersion以及 ApplicationBasePath。可以在Startup的构造函数和Configure方法中使用。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">③. </span>IHostingEnvironment</p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">提供了当前的EnvironmentName、WebRootPath以及Web根文件提供者。可以在Startup的构造函数和Configure方法中使用。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">④. </span>LoggerFactory</p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">提供了创建日志的机制。可以在 Startup的构造函数或 Configure 方法中使用，更多请阅读 Logging。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">⑤. </span>IServiceCollection</p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">当前容器中各服务的配置集合。只能在 ConfigureServices 方法中使用。只有在 ConfigureServices方法中配罝后，此服务在应用程序中才变得可用。</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">看看Startup类中按它们被调用排序的每一个方法，下面的服务可作为参数：</span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">Startup构造函数：</span> </span>IApplicationEnvironment<span class="kdocs-fontSize" style="font-size:13pt;">, </span>IHostingEnvironment<span class="kdocs-fontSize" style="font-size:13pt;">, </span>ILoggerFactory</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">ConfigureServiccs方法：</span> </span>IServiccCollcction</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">Configure方法：</span> </span>IApplicationBuilder<span class="kdocs-fontSize" style="font-size:13pt;">, </span>IApplicationEnvironment<span class="kdocs-fontSize" style="font-size:13pt;">, </span>IHostingEnvironment<span class="kdocs-fontSize" style="font-size:13pt;">, </span>ILoggerFactory</p></li></ul> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">4. 服务</span></h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">服务是应用程序中用于通用调用的组件。服务通过依赖注入获取并使用。</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core内置了一个简单的控制反转(</span>IoC<span class="kdocs-fontSize" style="font-size:13pt;">)容器，它默认支持构造器注入，并且可以方便地替换成你自己选用的 IoC 容器。由于它的松耦合特性，依赖注入(</span>DI<span class="kdocs-fontSize" style="font-size:13pt;">)使服务在整个应用中都可以使用。例如，Logging 在整个应用中都可用。</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">5. 内容根目录</span></h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">内容根目录是应用程序所用到的所有内容的根路径，比如它的 views 和 web内容。默认情况下，内容根目录是与宿主应用的可执行程序的应用根目录相同：其他位罝可以通过 WebHostBuilder 来设置。</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">6. Web根目录</span></h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:13pt;">应用程序的 Web根目录是项目中类似于 CSS、JS和图片文件公开、静态的资源的目录。静态文件中间件将默认只读取Web根目录和其子目录中的文件。Web根目录默认为[content root]/</span>wwwroot<span class="kdocs-fontSize" style="font-size:13pt;">。（可以通过WebHostBuilder来指定另外一个地址）</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">7. 配置</span></h4> 
 <p style=""><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core使用了一个新的配置模型，用来处理简单的键值对。新的配置模型不是基于 </span>System.Configuration<span class="kdocs-fontSize" style="font-size:13pt;"> 或者 </span>web.config<span class="kdocs-fontSize" style="font-size:13pt;">；相反，它足一个有序拉取数据的配置 providers。内置的构造提供支持多种不同的文件格式，如 XML、JSON、INI和用于支持基于环境的配置环境变量，也可以自己编写实现自定义的配罝providers。</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">8. 环境</span></h4> 
 <p style=""><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET Core 支持在多个环境中管理应用程序行为，如开发</span>Development<span class="kdocs-fontSize" style="font-size:13pt;">，预演</span>staging<span class="kdocs-fontSize" style="font-size:13pt;">和生产</span>Production<span class="kdocs-fontSize" style="font-size:13pt;">，是</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://ASP.NET" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:13pt;">ASP.NET</span></a><span class="kdocs-fontSize" style="font-size:13pt;"> Core中的第一级概念，而且它可以使用环境变量来配置。</span></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e2a6260e87dd1d19d9eee6a31ee5fbf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Alexnet实现CIFAR100数据集的训练</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/435f6795db683b73145816342c3eba30/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">写一个批处理：将子文件夹内的文件移动到当前目录下</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>