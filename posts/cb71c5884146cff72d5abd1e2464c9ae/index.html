<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PyCharm如何使用Qt Designer - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PyCharm如何使用Qt Designer" />
<meta property="og:description" content="Qt Designer 是一个 GUI 设计器，能可视化设计出界面。PyQT5 通过 pyuic5 工具将 Qt Designer 生成的 xxx.ui 文件转换成 python 代码，大大节省手工编写界面代码的工作量。
本篇介绍如何在 PyCharm 中集成 Qt Designer 工具，包括 QT Designer 的配置， pyuic5 的配置和调用界面代码的方法。
pyqt5 可以使用 pip 工具来安装：
pip install pyqt5 安装了 pyqt5 之后，在 python 安装目录下面的 Scripts 文件夹中，有一个 pyuic5.exe 文件，这个可执行文件用于将 Qt Designer 生成的 ui 文件转换为 python 代码。
安装 Qt Designer 在 https://build-system.fman.io/qt-designer-download 这个网址可以下载和安装独立的 Qt Designer 安装版，根据操作系统选择合适的安装文件进行安装。
在 PyCharm 中配置 Qt Designer Qt Designer 安装后，在安装目录下面有一个 designer.exe 文件。打开该程序，以拖拽的方式设计界面元素。设计完成后保存为 xxx.ui 文件。ui 文件为 xml 格式，用于描述窗体和控件的属性。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cb71c5884146cff72d5abd1e2464c9ae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-28T20:47:16+08:00" />
<meta property="article:modified_time" content="2020-01-28T20:47:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PyCharm如何使用Qt Designer</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Qt Designer 是一个 GUI 设计器，能可视化设计出界面。PyQT5 通过 pyuic5 工具将 Qt Designer 生成的 xxx.ui 文件转换成 python 代码，大大节省手工编写界面代码的工作量。</p> 
<p>本篇介绍如何在 PyCharm 中集成 Qt Designer 工具，包括 QT Designer 的配置， pyuic5 的配置和调用界面代码的方法。</p> 
<p>pyqt5 可以使用 pip 工具来安装：</p> 
<pre><code>pip install pyqt5
</code></pre> 
<p>安装了 pyqt5 之后，在 python 安装目录下面的 <strong>Scripts</strong> 文件夹中，有一个 pyuic5.exe 文件，这个可执行文件用于将 Qt Designer 生成的 ui 文件转换为 python 代码。</p> 
<h3><a id="_Qt_Designer_11"></a>安装 Qt Designer</h3> 
<p>在 <a href="https://build-system.fman.io/qt-designer-download" rel="nofollow">https://build-system.fman.io/qt-designer-download</a> 这个网址可以下载和安装独立的 Qt Designer 安装版，根据操作系统选择合适的安装文件进行安装。</p> 
<h3><a id="_PyCharm__Qt_Designer_15"></a>在 PyCharm 中配置 Qt Designer</h3> 
<p>Qt Designer 安装后，在安装目录下面有一个 designer.exe 文件。打开该程序，以拖拽的方式设计界面元素。设计完成后保存为 xxx.ui 文件。ui 文件为 xml 格式，用于描述窗体和控件的属性。</p> 
<p>在 PyCharm 中配置 Qt Designer，目的是在开发的时候，在 PyCharm 中直接操作 Qt Designer，同时能方便的将 ui 文件保存到 Python 工程指定的文件夹下。通过菜单 <strong>File</strong> -&gt; <strong>Settings</strong> 打开如下的配置界面，点击右键 “+” 号配置 Qt Designer:</p> 
<p><img src="https://images2.imgbox.com/31/98/ow7Yndk8_o.png" alt=""><br> 左边是配置的路径，右面是配置的参数：<br> <strong>Program</strong>： designer.exe 的路径<br> <strong>Working Directory</strong>: 设置保存的 UI 文件位置，$FileDir$ 表示文件所在目录。</p> 
<p>这个配置适合调用 Qt Designer 新建窗口的情况。如果要对已经创建的 ui 文件进行编辑，为了方便，可以再新建一个配置如下：</p> 
<p><img src="https://images2.imgbox.com/6b/19/cOGo6I2m_o.png" alt=""></p> 
<p>测试一下。比如在 Python 工程中新建一个 designer 文件夹，选中 designer 文件夹</p> 
<p><img src="https://images2.imgbox.com/32/d1/BIrQQ15C_o.png" alt=""><br> 通过菜单 <strong>Tools</strong> -&gt; <strong>External Tools</strong> 菜单打开 qt designer:</p> 
<p><img src="https://images2.imgbox.com/3d/87/OFlPXJqq_o.png" alt=""></p> 
<p>注意这里的 QT Designer Create 和 QT Designer Edit 都是我刚才配置的外部工具。在 Qt Designer 中新建一个 Main Window:</p> 
<p><img src="https://images2.imgbox.com/8a/6c/uapgnslm_o.png" alt=""><br> 在 Main Window 中拖拽几个控件。因为本文主要讲解 Qt Designer 的用法，所以对控件的细节不展开。</p> 
<p><img src="https://images2.imgbox.com/4d/b1/j3vKiU3s_o.png" alt=""><br> 然后将界面保存为 MainWindow.ui，路径为 designer 文件夹下面。选中 MainWindow.ui，通过菜单 <strong>Tools</strong> -&gt; <strong>External Tools</strong> -&gt; QT Desinger Edit，MainWindow.ui 文件被 Qt Designer 打开。Qt Designer 的配置没有问题。</p> 
<h3><a id="_pyuic5_45"></a>配置 pyuic5</h3> 
<p>pyuic5.exe 需要安装 pyqt5 才有，是一个命令行工具，为了方便，可以将 pyuic5 所在的路径添加到<strong>环境变量</strong>中。然后使用下面的命令将 ui 文件转换为 python 代码：</p> 
<pre><code>pyuic5 MainWindow.ui -o MainWindow.py
</code></pre> 
<p>同样地，为了减少手工的操作，可以在 PyCharm 中将 pyuic5 配置为外部工具：</p> 
<p><img src="https://images2.imgbox.com/18/67/k9iHSwtI_o.png" alt=""><br> 这里主要说一下 Arguments 参数，我们需要一个宏来实现文件名的灵活性，所以 Arguments 设置如下：</p> 
<pre><code>$FileName$ -o $FileNameWithoutExtension$.py
</code></pre> 
<p>参数比较直观，<strong>输入</strong>是完整的文件名，<strong>输出</strong>为相同的文件名，将扩展名替换为 py。完成这个配置后，选中 MainWindow.ui，通过菜单 <strong>Tools</strong> -&gt; <strong>External Tools</strong> -&gt; PyUIC5，自动将 ui 文件转换为 python 代码。</p> 
<h3><a id="_63"></a>如何调用界面代码</h3> 
<p>ui 转换的 python 代码随着对 ui 的变更，每次都会重新生成，所以不要在 MainWIndow.py 中编写代码。我们需要另外新建一个 python 文件，并在其中编写代码来调用界面代码。</p> 
<p>我们看到，qt designer 自动生成的代码实现了一个名为 <code>UI_MainWindow</code> 的类，这个类继承自 object，在该类的 <code>setupUi()</code> 方法中有一个名为 <code>MainWindow</code> 的参数，我们需要将真正的 QMainWindow 对象传给这个方法，来实现我们自己的主窗口。</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> designer<span class="token punctuation">.</span>MainWindow <span class="token keyword">import</span> Ui_MainWindow
<span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QMainWindow

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># application 对象</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    
    <span class="token comment"># QMainWindow对象</span>
    mainwindow <span class="token operator">=</span> QMainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 这是qt designer实现的Ui_MainWindow类</span>
    ui_components <span class="token operator">=</span> Ui_MainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 调用setupUi()方法，注册到QMainWindwo对象</span>
    ui_components<span class="token punctuation">.</span>setupUi<span class="token punctuation">(</span>mainwindow<span class="token punctuation">)</span>

    <span class="token comment"># 显示</span>
    mainwindow<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f488ec0394abe3b54e1b0ae54712c5ca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">问题 C: 神奇的口袋 （背包问题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/306b3da9b918b4f2edaaa4033345d739/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">@武汉人民，请收好这份名单</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>