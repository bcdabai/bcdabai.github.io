<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>firebug 调试ajax,Jquery使用Firefox FireBug插件调试Ajax步骤讲解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="firebug 调试ajax,Jquery使用Firefox FireBug插件调试Ajax步骤讲解" />
<meta property="og:description" content="首先，我们用一个示例来说明JQuery的Ajax调用过程，
实现的一个功能是：点击确认支付按钮之后，实现余额支付的功能：
1.首先在php页面将相关需要调用的函数绑定到按钮上：
$(function(){
$(&#34;#pay_btn&#34;).bind(&#34;click&#34;,ABC.balancePay);
});
2.脚本处：
如果使用$.post方式实现：
var ABC = {
balancePay: function(event){
event.preventDefault();
var tthis = $(event.currentTarget);
var form = tthis.parents(‘form&#39;);
var url = form.attr(‘action&#39;);
var data = ‘code=15′ ;//&#43; $(‘#verifyCode&#39;).val();
var jqXhr = $.post(url, data, undefined, ‘jsonp&#39;);
jqXhr.done(function(datas){
//console.log(‘这里是通过console打印出来的&#39;); //#4
$(&#34;#msg&#34;).text(‘结果:&#39;&#43;data);
});
}
$.post方式也可以直接指定回调函数：
var jqXhr = $.post(url, data, function(data){
$(&#34;#msg&#34;).text(&#39;结果:&#39;&#43;data);
}, &#39;jsonp&#39;);
使用$.ajax方法实现：
var jqXhr = $.post(url, data, function(data){
$(&#34;#msg&#34;).text(‘结果:&#39;&#43;data);
}, ‘jsonp&#39;);
使用$.ajax方法实现：
var jqXhr = $." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e357dcac85af58cd668db7f46d0f6f1e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T19:27:41+08:00" />
<meta property="article:modified_time" content="2021-08-05T19:27:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">firebug 调试ajax,Jquery使用Firefox FireBug插件调试Ajax步骤讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>首先，我们用一个示例来说明JQuery的Ajax调用过程，</p> 
 <p>实现的一个功能是：点击确认支付按钮之后，实现余额支付的功能：</p> 
 <p>1.首先在php页面将相关需要调用的函数绑定到按钮上：</p> 
 <p>$(function(){<!-- --></p> 
 <p>$("#pay_btn").bind("click",ABC.balancePay);</p> 
 <p>});</p> 
 <p>2.脚本处：</p> 
 <p>如果使用$.post方式实现：</p> 
 <p>var ABC = {<!-- --></p> 
 <p>balancePay: function(event){<!-- --></p> 
 <p>event.preventDefault();</p> 
 <p>var tthis = $(event.currentTarget);</p> 
 <p>var form = tthis.parents(‘form');</p> 
 <p>var url = form.attr(‘action');</p> 
 <p>var data = ‘code=15′ ;//+ $(‘#verifyCode').val();</p> 
 <p>var jqXhr = $.post(url, data, undefined, ‘jsonp');</p> 
 <p>jqXhr.done(function(datas){<!-- --></p> 
 <p>//console.log(‘这里是通过console打印出来的'); //#4</p> 
 <p>$("#msg").text(‘结果:'+data);</p> 
 <p>});</p> 
 <p>}</p> 
 <p>$.post方式也可以直接指定回调函数：</p> 
 <p>var jqXhr = $.post(url, data, function(data){<!-- --></p> 
 <p>$("#msg").text('结果:'+data);</p> 
 <p>}, 'jsonp');</p> 
 <p>使用$.ajax方法实现：</p> 
 <p>var jqXhr = $.post(url, data, function(data){<!-- --></p> 
 <p>$("#msg").text(‘结果:'+data);</p> 
 <p>}, ‘jsonp');</p> 
 <p>使用$.ajax方法实现：</p> 
 <p>var jqXhr = $.ajax({<!-- --></p> 
 <p>type: ‘post',</p> 
 <p>url: url,</p> 
 <p>data: {code: ‘15′},</p> 
 <p>dataType: ‘jsonp',</p> 
 <p>sccuess:function(data){<!-- --></p> 
 <p>alert(‘good');},</p> 
 <p>error: function(XMLHttpRequest, textStatus, errorThrown) {  //#3这个error函数调试时非常有用，如果解析不正确，将会弹出错误框</p> 
 <p>alert(XMLHttpRequest.status);</p> 
 <p>alert(XMLHttpRequest.readyState);</p> 
 <p>alert(textStatus); // paser error;</p> 
 <p>},</p> 
 <p>});</p> 
 <p>3.服务器端：</p> 
 <p>public function actionInterPayProc($callback)</p> 
 <p>{<!-- --></p> 
 <p>//header("content-type: text/javascript");</p> 
 <p>//header(‘Content-type: text/html; charset=utf-8′);</p> 
 <p>$code = $_POST['code'];</p> 
 <p>//$code  //#1 此处给出一个有语法错误的表达式</p> 
 <p>//echo $code;  //#2  此处标记，用于后面调试说明；</p> 
 <p>…</p> 
 <p>$result = 1;</p> 
 <p>//echo $_POST['callback']. ‘(‘ . json_encode($result) . ‘);';//注意使用的编码方式需要和客户端请求保持一致；</p> 
 <p>exit(0);</p> 
 <p>}</p> 
 <p>调试工具</p> 
 <p>Firefox有强大FireBug 插件，现在比较新的浏览器如 Chrome 和 Safari，以及 IE 8都内置了调试工具，借助于这些调试工具，可以非常详细的查看 Ajax 的执行过程(chrome和firefox中调出调试工具的快捷键是ctrl+shift+c)；</p> 
 <p>以下使用FireBug；</p> 
 <p>1.使用firebug，查看回调：</p> 
 <p align="center">对于Ajax方法，是通过异步执行的服务器端程序，如果服务器端出错，在页面上不会显示的，我们需要借助调试工具来查看；例如，将以上示例中#2的注释去掉，触发ajax请求一次，可以在控制台面板中查看到错误的返回结果：<img src="https://images2.imgbox.com/77/b3/rMHNb4by_o.png" alt="a9c83c3e95740a4595b1b2e06f42035f.png"></p> 
 <p>如果是服务器端程序出错，也可以直接看到，出错原因跟一般普通的页面一样，只不过是在ajax返回的面板中查看(web浏览器页面中不会有任何显示)。</p> 
 <p>这里需要说明的是，如果在服务器端使用了echo等方法将需要查看的变量打印出来了，那么，ajax调用的结果一定是失败的，因为这样看上去的回调函数名称被更改了，造成无法解析；</p> 
 <p>例如，打印的变量是333，那么最后回调的结果是：333ajaxcallbak(1);客户端寻找333ajaxcallbak这个函数名，无法解析。</p> 
 <p>2.使用error函数打印错误信息：</p> 
 <p>$.ajax()有一个error参数，可以指定一个函数，在请求失败时，将调用此方法。这里给出的信息，对于调试来说，非常有用；</p> 
 <p>error：function (XMLHttpRequest, textStatus, errorThrown)</p> 
 <p>error事件返回的第一个参数XMLHttpRequest有一些有用的信息：</p> 
 <p>XMLHttpRequest.readyState:</p> 
 <p>其返回的状态码对应了一种错误说明：</p> 
 <p>状态码</p> 
 <p>0 －(未初始化)还没有调用send()方法</p> 
 <p>1 －(载入)已调用send()方法，正在发送请求</p> 
 <p>2 －(载入完成)send()方法执行完成，已经接收到全部响应内容</p> 
 <p>3 －(交互)正在解析响应内容</p> 
 <p>4 －(完成)响应内容解析完成，可以在客户端调用了</p> 
 <p>XMLHttpRequest.status:</p> 
 <p>这里返回的状态码就是我们日常见到的HTTP状态；比如404，表示没有找到页面；</p> 
 <p>textStatus:</p> 
 <p>"timeout", "error", "notmodified" 和 "parsererror"。</p> 
 <p>(默 认: 自动判断 (xml 或 html)) 请求失败时调用时间。参数有以下三个：XMLHttpRequest 对象、错误信息、(可选)捕获的错误对象。如果发生了错误，错误信息(第二个参数)除了得到null之外，还可能是"timeout", "error", "notmodified" 和 "parsererror"。</p> 
 <p>通过这个error函数，程序出错就很容易排查；</p> 
 <p>比如上面的#2处，去掉注释，相当于更改了回调函数名；在erro里就会报：parsererror；</p> 
 <p>3.使用console.log打印输出：(alert()也可以)</p> 
 <p>这只是一个增强调试体验的辅助方法。对于js中的关注变量跟踪，我们可通过alert()方法打印出来，不过弹出框频繁会让人烦躁。console.log是一个替代方式，它是firebug插件的一个方法。console.log打印出来的变量结果会显示在firebug的控制台面板中；</p> 
 <p>可能的出错原因：</p> 
 <p>1.如果返回的结果格式不正确，在firebug中能看到结果；</p> 
 <p>2.对于JSON请求，对格式比较严格：</p> 
 <p>如果通过error函数打出来的报错是：parsererror</p> 
 <p>可能的原因是服务器端脚本编码的问题；可以在服务端处理函数内处理的第一行加上对应的header信息：</p> 
 <p>eg：header('Content-type: text/html; charset=utf-8');</p> 
 <p>当然，最有可能的是格式不正确：</p> 
 <p>echo "{'re':'success'}";jquery不能解析</p> 
 <p>echo "{\"re\":\"success\"}";就没有错误</p> 
 <p>不要输出怪异的json格式的字符串，要不jq1.4+版本不会执行success回调。如{abc:1}或者{'abc':1},要输出</p> 
 <p>{"abc":1}</p> 
 <p>{'success':true}改为{"success":true}</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9b8f67beb7d268ef07998c00838dc6cb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vnc未能与设置服务器联系,如何设置VNC服务器在Debian 8</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32df6633661e45a098c3205ffcace028/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mvc框架 ajax,通过AJAX请求无法进行MVC模型绑定</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>