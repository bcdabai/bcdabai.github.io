<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>idea构建spring源码项目 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="idea构建spring源码项目" />
<meta property="og:description" content="成功的环境 : jdk1.8.0_271/idea2019.1.3/gradle-4.4.1-bin.zip/spring-framework1-5.0.x 特别感谢借鉴的另两位博主
IntelliJ IDEA导入Spring源码_VFINE的博客-CSDN博客_idea导入spring源码
spring源码构建_l梁晴的博客-CSDN博客
1.下载源代码 源码下载地址
GitHub - spring-projects/spring-framework: Spring Framework
不建议从这个地址直接下载,太慢,可以fork到国内的码云上再下载非常快,
(源码下载可以在搜索引擎中搜索github,进入后搜索spring-framework即可找到)
也可以从这里下载,这个只需要安装并在idea中配置好gradle,就可以直接导入运行的,本地测试成功:
1294480-spring-framework1-5.0.x(3).zip-互联网文档类资源-CSDN下载
我是直接下载的压缩包
找到gradle-wrapper.properties配置文件(这里指定了默认的gradle版本,下载这个版本就可以了):
2.下载gradle解压后配置环境变量 下载地址: Gradle | Releases
环境变量配置方法 : Gradle安装及环境变量配置_iBaoxing的博客-CSDN博客
3.修改配置文件 gradle-wrapper.properties修改结果: distributionBase=GRADLE_USER_HOME distributionPath=wrapper/dists zipStoreBase=GRADLE_USER_HOME zipStorePath=wrapper/dists distributionUrl=file:///D:\myprogram\tools\gradle-4.4.1-bin.zip distributionUrl=https\://services.gradle.org/distributions/gradle-4.4.1-bin.zip
改为
distributionUrl=file:///D:\myprogram\tools\gradle-4.4.1-bin.zip
这样就不需要再次下载了
build.gradle修改 maven { url &#39;http://maven.aliyun.com/nexus/content/repositories/google&#39; } maven { url &#39;http://maven.aliyun.com/nexus/content/groups/public/&#39; } maven { url &#39;http://maven.aliyun.com/nexus/content/repositories/jcenter&#39;} 新增以下配置（没有以下配置，构建过程超级慢……），定义全局的国内镜像，注意该配置不能在plugins { }之前
allprojects { repositories { maven { url &#39;http://maven.aliyun.com/nexus/content/repositories/google&#39; } maven { url &#39;http://maven." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c003554e515c677ebfe567e0436960e6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-05T01:26:19+08:00" />
<meta property="article:modified_time" content="2022-09-05T01:26:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">idea构建spring源码项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>成功的环境 : jdk1.8.0_271/idea2019.1.3/gradle-4.4.1-bin.zip/spring-framework1-5.0.x</h2> 
<p>特别感谢借鉴的另两位博主</p> 
<p><a href="https://blog.csdn.net/u013713832/article/details/81227701" title="IntelliJ IDEA导入Spring源码_VFINE的博客-CSDN博客_idea导入spring源码">IntelliJ IDEA导入Spring源码_VFINE的博客-CSDN博客_idea导入spring源码</a></p> 
<p><a href="https://blog.csdn.net/u012977486/article/details/108724688" title="spring源码构建_l梁晴的博客-CSDN博客">spring源码构建_l梁晴的博客-CSDN博客</a></p> 
<h2>1.下载源代码</h2> 
<p>源码下载地址</p> 
<p><a href="https://github.com/spring-projects/spring-framework" title="GitHub - spring-projects/spring-framework: Spring Framework">GitHub - spring-projects/spring-framework: Spring Framework</a></p> 
<p>不建议从这个地址直接下载,太慢,可以fork到国内的码云上再下载非常快,</p> 
<p>(源码下载可以在搜索引擎中搜索github,进入后搜索spring-framework即可找到)</p> 
<p><span style="color:#fe2c24;">也可以从这里下载,这个只需要安装并在idea中配置好gradle,就可以直接导入运行的,本地测试成功:</span></p> 
<p><a href="https://download.csdn.net/download/cultivator129480/20429715" title="1294480-spring-framework1-5.0.x(3).zip-互联网文档类资源-CSDN下载">1294480-spring-framework1-5.0.x(3).zip-互联网文档类资源-CSDN下载</a></p> 
<p><img alt="" height="962" src="https://images2.imgbox.com/14/32/s12PCvIA_o.png" width="1200"></p> 
<p>我是直接下载的压缩包</p> 
<p><img alt="" height="858" src="https://images2.imgbox.com/d0/97/SERV4IcT_o.png" width="1200"></p> 
<p></p> 
<p> 找到gradle-wrapper.properties配置文件(这里指定了默认的gradle版本,下载这个版本就可以了):</p> 
<p><img alt="" height="561" src="https://images2.imgbox.com/20/2d/VNaImCS1_o.png" width="1200"></p> 
<p></p> 
<h2>2.下载gradle解压后配置环境变量</h2> 
<p>下载地址: <a href="https://gradle.org/releases/" rel="nofollow" title="Gradle | Releases">Gradle | Releases</a></p> 
<p>环境变量配置方法 : <a href="https://blog.csdn.net/zbx931197485/article/details/102461228" title="Gradle安装及环境变量配置_iBaoxing的博客-CSDN博客">Gradle安装及环境变量配置_iBaoxing的博客-CSDN博客</a></p> 
<p><img alt="" height="898" src="https://images2.imgbox.com/93/b2/NQlQYpWQ_o.png" width="1200"></p> 
<p></p> 
<h2>3.修改配置文件</h2> 
<h3>gradle-wrapper.properties修改结果:</h3> 
<pre><code>distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=file:///D:\myprogram\tools\gradle-4.4.1-bin.zip
</code></pre> 
<p>distributionUrl=https\://services.gradle.org/distributions/gradle-4.4.1-bin.zip</p> 
<p>改为</p> 
<p>distributionUrl=file:///D:\myprogram\tools\gradle-4.4.1-bin.zip<br> 这样就不需要再次下载了</p> 
<h3>build.gradle修改</h3> 
<pre><code>		maven { url 'http://maven.aliyun.com/nexus/content/repositories/google' }
		maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' } 
		maven { url 'http://maven.aliyun.com/nexus/content/repositories/jcenter'}</code></pre> 
<p></p> 
<p><img alt="" height="574" src="https://images2.imgbox.com/74/a3/LZi1C5El_o.png" width="1200"></p> 
<p><img alt="" height="619" src="https://images2.imgbox.com/06/cd/IeRWvfQu_o.png" width="1200"></p> 
<p></p> 
<p>新增以下配置（没有以下配置，构建过程超级慢……），定义全局的国内镜像，<strong>注意该配置不能在plugins { }之前</strong></p> 
<pre><code>allprojects {
	repositories {
		maven { url 'http://maven.aliyun.com/nexus/content/repositories/google' }
		maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
		maven { url 'http://maven.aliyun.com/nexus/content/repositories/jcenter'}
		maven { url 'http://repo.springsource.org/plugins-release'}
	}
}</code></pre> 
<h3></h3> 
<h2>4.配置idea</h2> 
<h3>配置gradle</h3> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/32/ea/q7y3xYZW_o.png" width="1200"></p> 
<h3> 注意taget目录</h3> 
<p>这里我踩了个大坑,自己其他项目有<span style="color:#fe2c24;">target目录</span>需要忽略,这里恰巧需要用到这个目录 </p> 
<p><img alt="" height="1010" src="https://images2.imgbox.com/3f/b3/bWXVPzOd_o.png" width="1200"></p> 
<p></p> 
<h2>5.导入项目</h2> 
<p></p> 
<p><img alt="" height="886" src="https://images2.imgbox.com/bf/77/bCaknzzk_o.png" width="1200"></p> 
<p> 跟maven相似,项目加载会下载相关jar包,这个过程比较漫长,可能有半个小时</p> 
<h2>6.新建测试模块:</h2> 
<p>选中项目右键--&gt;new --&gt;modoule</p> 
<p><img alt="" height="972" src="https://images2.imgbox.com/84/f5/wBIlJ9op_o.png" width="1200"></p> 
<p> 默认就是这样的<img alt="" height="1036" src="https://images2.imgbox.com/de/19/q1xs3nHo_o.png" width="1200"></p> 
<p> 填入项目名<img alt="" height="1007" src="https://images2.imgbox.com/9f/c7/ZLIniZsn_o.png" width="1200"></p> 
<p>修改新项目中build.gradle,添加依赖</p> 
<p><img alt="" height="990" src="https://images2.imgbox.com/39/c9/pSGYzw0G_o.png" width="1200"></p> 
<p></p> 
<pre><code>    compile(project(":spring-context"))
    compile(project(":spring-core"))
    compile(project(":spring-beans"))
    compile(project(":spring-aop"))</code></pre> 
<h2>7.添加测试类</h2> 
<pre><code>package com.study;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class TestMy {

	public static void main(String[] args) {
		ApplicationContext applicationContext = new AnnotationConfigApplicationContext(SysConfig.class);
		User user = (User)applicationContext.getBean("user");
		System.out.println(user.toString());
	}
}
</code></pre> 
<pre><code>package com.study;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan
public class SysConfig {

	@Bean
	public User user(){
		return new User("lq",12);
	}
}
</code></pre> 
<pre><code>package com.study;

public class User {
	private String name;
	private Integer age;

	public User() {
	}

	public User(String name, Integer age) {
		this.name = name;
		this.age = age;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public Integer getAge() {
		return age;
	}

	public void setAge(Integer age) {
		this.age = age;
	}


}
</code></pre> 
<p></p> 
<h2>8.运行下main方法试试:</h2> 
<p></p> 
<h3>core模块报错 </h3> 
<p><img alt="" height="903" src="https://images2.imgbox.com/43/30/gncXkFaz_o.png" width="1200"></p> 
<p>重新编译一下spring-core</p> 
<p><img alt="" height="978" src="https://images2.imgbox.com/55/60/MzF09LlU_o.png" width="1200"></p> 
<p>编译成功 <img alt="" height="950" src="https://images2.imgbox.com/51/e9/JhZ6P2C8_o.png" width="1200"></p> 
<h3></h3> 
<h3>spring-context没有成功引用spring-Instrument</h3> 
<p><img alt="" height="960" src="https://images2.imgbox.com/25/df/qdfBorjI_o.png" width="1200"></p> 
<p> 修改引用spring-instrument<img alt="" height="984" src="https://images2.imgbox.com/45/9a/gcccgRfk_o.png" width="1200"></p> 
<h2> 9.大功告成,完结</h2> 
<p><img alt="" height="972" src="https://images2.imgbox.com/8d/79/kSnpyDRH_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p>好长时间没有打开,今天打开总报错</p> 
<p></p> 
<p>org.springframework.cglib.core.DefaultNamingPolicy这个包找不到,</p> 
<p>网上的办法好多都是自己敲命令,我本地又无法执行</p> 
<pre><code>D:\myprogram\workspace\other\1294480-spring-framework1-5.0.x (3)&gt;gradle objenesisRepackJar
The project name '1294480-spring-framework1-5.0.x (3)' contains at least one of the following characters: [ , /, \, :, &lt;, &gt;, ", ?, *, |]. This has been deprecated and is scheduled to be removed in Gradle 5.0. Set the 'rootProject.name' or adjust the 'include' statement (see https://docs.gradle.org/4.4.1/dsl/org.gradle.api.initialization.Settings.html#org.gradle.api.initialization.Settings:include(java.lang.String[]) for more details).

FAILURE: Build failed with an exception.

* What went wrong:
Task 'objenesisRepackJar' not found in root project '1294480-spring-framework1-5.0.x (3)'.

* Try:
Run gradle tasks to get a list of available tasks. Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 1s

D:\myprogram\workspace\other\1294480-spring-framework1-5.0.x (3)&gt;
</code></pre> 
<p>解决办法简单的难以置信,点击1.objenesisRepackJar                2. objenesisRepackJar </p> 
<p>我是这个顺序成功的,倒过来应该也是可以的,还没有测试</p> 
<p><img alt="" height="858" src="https://images2.imgbox.com/f7/e4/vlE2IqoE_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<pre>compile(project(":spring-aspects"))</pre> 
<p>引入spring-aspects时出现了问题,运行时这个下边的包都找不到原来,aspects模块比较特别,它依赖了aspect,需要安装aspect和配置idea,大家可以去这里借鉴一下<br> 链接地址: <a href="https://www.eclipse.org/aspectj/downloads.php" rel="nofollow" title="AspectJ Downloads | The Eclipse Foundation">AspectJ Downloads | The Eclipse Foundation</a></p> 
<p>配置:</p> 
<p><img alt="" src="https://images2.imgbox.com/2a/30/kPUr9GYo_o.png"></p> 
<p> </p> 
<p><a href="https://blog.csdn.net/web_13004735258/article/details/126516565" title="spring源码项目使用spring-aspects_web_13004735258的博客-CSDN博客">spring源码项目使用spring-aspects_web_13004735258的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/02a93970ff9b44b1925c70efdaafb035/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nacos入门使用教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6c2a4f13bcc576740b41699d5ceaa4bd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Rockchip_Developer_Guide_Linux_Nand_Flash_Open_Source_Solution</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>