<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL之DOS学习 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL之DOS学习" />
<meta property="og:description" content="![在这里插入图片描述](https://img-blog.csdnimg.cn/af625dcf519e4515b563589d238dea81.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2VpeGluX0Rh5Yaw,size_12,color_FFFFFF,t_70,g_se,x_16#pic_center
注：以下查询都是基于以上三张表
什么是表 表：是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强，一个表包括行和列：
行：被称为数据/记录（data） 列：被称为字段（colum） 每个字段应该包括哪些属性？
字段名数组类型相关约束 SQL语句分类 DQL（数据查询语言）：查询语句，凡是select语句都是DQL。DML（数据操作语言）：insert delete update，对表当中的数据进行增删改。DDL（数据定义语言）：create drop alert，对表结构的增删改。TCL（事务控制语言）：commit提交事务，rollback回滚事务（TCL中的T是Transation）。DCL（数据控制语言）：grant授权、revoke撤销权限等。 在DOS窗口下使用的一些命令 登录mysql：mysql -u用户名 -p密码查看数据有哪些数据库：show databases; （这个不是SQL语句，是MySQL的命令）创建自己的数据库：create database 数据库名使用某个数据库：use 数据库名;（这个不是SQL语句，是MySQL的命令）查看当前数据库有哪些表格：show tables;（这个不是SQL语句，是MySQL的命令）dos执行.sql文件：source 文件路径查看某个表的结构：desc 表名;\c命令：结束一条语句exit退出mysqlselect version(); 查看mysql的版本号select database(); 查看当前使用的是哪个数据库 查询语句 简单的查询语句（DQL） 语法格式：
select 字段1，字段2，字段3，… from 表名;
提示：
1、任何一条sql语句以“;”结尾
2、sql语句不区分大小写
3、字段可以参数数学运算
4、给查询结果的列重命名：select ename, sal * 12 as 别名（中文要用品哪个单引号包起来） from 表名（as关键字可以省略）
条件查询 语法格式：
select 字段，字段… from 表名 where 条件;
执行顺序：先from，然后where，最后select
条件查询字符表
运算符说明=等于&lt;&gt;或!=不等于&lt;小于&lt;=小于等于&gt;大于&gt;=大于等于between … and …两个值之间，等同于&gt;= and &lt;=is null为null（is not null 不为空）and并且or或者in包含，相当于多个or(not in 不在这个范围中)notnot 可以去非，主要用在is 或 in 中likelike称为模糊查询，支持%（代表任意多个字符）或下划线（_代表任意1个字符）匹配 数据排序（升序、降序） 语法：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/668a3fa661531d1eeaaba8c066b7589d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-14T01:09:33+08:00" />
<meta property="article:modified_time" content="2022-02-14T01:09:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL之DOS学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>![在这里插入图片描述](https://img-blog.csdnimg.cn/af625dcf519e4515b563589d238dea81.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2VpeGluX0Rh5Yaw,size_12,color_FFFFFF,t_70,g_se,x_16#pic_center<br> <img src="https://images2.imgbox.com/1d/63/tECSrICk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/76/d4/2XNgbXov_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/75/8d/S19cko9Q_o.png" alt="在这里插入图片描述"><br> 注：以下查询都是基于以上三张表</p> 
<h3><a id="_7"></a>什么是表</h3> 
<p>表：是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强，一个表包括行和列：</p> 
<blockquote> 
 <pre><code>  	行：被称为数据/记录（data） 			列：被称为字段（colum）
</code></pre> 
</blockquote> 
<p>每个字段应该包括哪些属性？</p> 
<ol><li>字段名</li><li>数组类型</li><li>相关约束</li></ol> 
<h3><a id="SQL_16"></a>SQL语句分类</h3> 
<blockquote> 
 <ol><li>DQL（数据查询语言）：查询语句，凡是select语句都是DQL。</li><li>DML（数据操作语言）：insert delete update，对表当中的数据进行增删改。</li><li>DDL（数据定义语言）：create drop alert，对表结构的增删改。</li><li>TCL（事务控制语言）：commit提交事务，rollback回滚事务（TCL中的T是Transation）。</li><li>DCL（数据控制语言）：grant授权、revoke撤销权限等。</li></ol> 
</blockquote> 
<h3><a id="DOS_25"></a>在DOS窗口下使用的一些命令</h3> 
<blockquote> 
 <ol><li>登录mysql：mysql -u用户名 -p密码</li><li>查看数据有哪些数据库：show databases; （这个不是SQL语句，是MySQL的命令）</li><li>创建自己的数据库：create database 数据库名</li><li>使用某个数据库：use 数据库名;（这个不是SQL语句，是MySQL的命令）</li><li>查看当前数据库有哪些表格：show tables;（这个不是SQL语句，是MySQL的命令）</li><li>dos执行.sql文件：source 文件路径</li><li>查看某个表的结构：desc 表名;</li><li>\c命令：结束一条语句</li><li>exit退出mysql</li><li>select version(); 查看mysql的版本号</li><li>select database(); 查看当前使用的是哪个数据库</li></ol> 
</blockquote> 
<h3><a id="_39"></a>查询语句</h3> 
<h4><a id="DQL_40"></a>简单的查询语句（DQL）</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p>select 字段1，字段2，字段3，… from 表名;<br> <strong>提示</strong>：<br> 1、任何一条sql语句以“;”结尾<br> 2、sql语句不区分大小写<br> 3、字段可以参数数学运算<br> 4、给查询结果的列重命名：select ename, sal * 12 as 别名（中文要用品哪个单引号包起来） from 表名（as关键字可以省略）</p> 
</blockquote> 
<h4><a id="_49"></a>条件查询</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p>select 字段，字段… from 表名 where 条件;<br> 执行顺序：先from，然后where，最后select</p> 
</blockquote> 
<p>条件查询字符表</p> 
<table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt;或!=</td><td>不等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>between … and …</td><td>两个值之间，等同于&gt;= and &lt;=</td></tr><tr><td>is null</td><td>为null（is not null 不为空）</td></tr><tr><td>and</td><td>并且</td></tr><tr><td>or</td><td>或者</td></tr><tr><td>in</td><td>包含，相当于多个or(not in 不在这个范围中)</td></tr><tr><td>not</td><td>not 可以去非，主要用在is 或 in 中</td></tr><tr><td>like</td><td>like称为模糊查询，支持%（代表任意多个字符）或下划线（_代表任意1个字符）匹配</td></tr></tbody></table> 
<h4><a id="_72"></a>数据排序（升序、降序）</h4> 
<p>语法：</p> 
<blockquote> 
 <p>select 字段,字段… from 表名 order by 字段<br> 注意：<br> 默认是升序，怎么指定升序或者降序呢？ asc表示升序，desc表示降序<br> select 字段,字段… from 表名 order by 字段 asc（指定升序排）<br> select 字段,字段… from 表名 order by 字段 desc（指定降序排）<br> <strong>例子</strong>：按照工资的降序排列，当工资相同的时候再按照名字的升序排列<br> select ename,sal from emp order by sal desc,ename asc;<br> <strong>注意</strong>：越靠前的字段越能起到主导作用，只有当前面的字段无法完成排序的时候，才会启用后面的字段，order by是最后执行的</p> 
</blockquote> 
<h4><a id="_83"></a>分组函数</h4> 
<blockquote> 
 <ol><li>count 计数</li><li>sum 求和</li><li>avg 平均值</li><li>max 最大值</li><li>min 最小值<br> <strong>注意</strong>：所有的分组函数都是对“某一组”数据进行操作的，分组函数会自动忽略Null</li></ol> 
</blockquote> 
<p><strong>例子</strong>：找出工资总和？<br> select sum(sal) from emp;<br> <strong>例子</strong>：找出工资高于平均工资的员工？<br> 注意：SQL语句当中有一个语法规则，分组函数不可直接使用在where子句当中，因为group by 是在where之后执行的<br> select ename from emp where sal &gt; (select avg(sal) from emp)</p> 
<blockquote> 
 <p>select (5) <br> …<br> from(1) <br> …<br> where(2) <br> …<br> group by(3) <br> …<br> having(4)<br> …<br> order by(6)<br> …</p> 
</blockquote> 
<h4><a id="_112"></a>单行处理函数</h4> 
<p>1、单行处理函数是输入一行，输出一行<br> 2、ifnull() 空处理函数：ifnull(可能为null的数据，被当做什么处理)：属于单行处理函数</p> 
<h4><a id="group_by__having_116"></a>group by 和 having（它们是搭档）</h4> 
<p>group by：按照某个字段或者某些字段进行分组<br> having：是对分组之后的数据进行再次过滤</p> 
<blockquote> 
 <p><strong>例子</strong>：找出每个工作岗位的最高薪资<br> select max(sal) from emp group by job;<br> <strong>注意</strong>：分组函数一般都会和group by联合使用，这也是为什么它被称为分组函数的原因，并且任何一个分组函数（count sum avg max min）都是在group by语句执行结束之后才会执行的，当一条sql语句没有group by的话，整张表的数据会自成一组</p> 
</blockquote> 
<blockquote> 
 <p>例子：</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token operator">&gt;</span> <span class="token number">1</span>、找出每个部门的最高薪资，要求显示薪资大于<span class="token number">2900</span>的数据
<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2900</span> <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">&gt;</span> <span class="token number">2</span>、找出每个部门的平均薪资，要求显示薪资大于<span class="token number">2000</span>的数据
<span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token operator">*</span>注意<span class="token keyword">where</span>后面是不能使用分组函数的<span class="token operator">*</span><span class="token operator">*</span>
<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> detpno <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2000</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_distinct_135"></a>查询结果集的去重 distinct</h4> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">distinct</span> job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> 
<p><strong>distinct只能出现在所有字段的最前面，并且是所有字段联合去重</strong></p> 
<h4><a id="_142"></a>连接查询</h4> 
<p>1、什么是连接查询？<br> 在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果<br> 在实际开发中，一般一个业务都会对应多张表，比如：学生和班级，起码两张表<br> 2、连接查询的分类<br> （1）根据语法出现的年代来划分的话，包括:SQL92（一些老的DBA可能还在使用这种语法。）、SQL99（比较新的语法）<br> （2）根据表的连接方式来划分，包括：</p> 
<pre><code>内连接：等值连接、非等值连接、自连接
</code></pre> 
<blockquote> 
 <p>1、等值连接：最大特点是：条件是等量关系<br> 案例：查询每个员工的部门名称，要求显示员工名和部门名<br> //内连接：inner</p> 
 <pre><code>  SQL(99):
  	select 
  		e.ename,d.dname #表显示的字段
  	form
  		emp e
  	inner（可省略）join #连接另一张表的名字
  		dept d
  	on #避免笛卡尔积现象的条件
  		e.deptno = d.deptno;(等值关系)
</code></pre> 
 <p>2、非等值连接：最大特点是：连接条件中的关系是非等量关系<br> 案例：找出每个员工的工资等级，要求显示员工名、工资、工资等级</p> 
 <pre><code>  select
  	e.ename,e.sal,s.grade
  from
  	emp e
  join 
  	salgrade s
  on
  	e.sal between s.losal and s.hisal;
</code></pre> 
 <p>3、自连接：最大特点是：一张表看作两张表。自己连自己<br> 案例：找出每个员工的上级领导，要求显示员工名和对应的领导名</p> 
 <pre><code>  select
  	a.ename as '员工名',b.ename as '领导名'
  from
  	emp a
  join
  	emp b
  on
  	a.mgr = b.empno;
</code></pre> 
</blockquote> 
<pre><code>外连接：左外连接（左连接）、右外连接（右连接）
</code></pre> 
<blockquote> 
 <p>什么是外连接，和内连接有什么区别？</p> 
 <pre><code>  内连接：假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查
  		询出来，这就是内连接。AB两张表没有主副之分，两张表是平等的
  外连接：假设A和B表进行连接，使用外连接的话，AB两张表中有一张时主表。一张是
  		副表，主要查询主表中的数据，捎带着查询副表，当副表找那个的数据没有
  		和主表中的数据匹配上，副表自动模拟出null与之匹配。
</code></pre> 
 <p>1、左连接：表示左边的这张表是主表<br> 2、右连接：表示右边的这张表是主表<br> 注意：左连接有右连接的写法，右连接也会有对应的左连接的写法<br> 案例： 找出每个员工的上级领导？（所有员工必须全部查询出来：使用外连接）</p> 
 <pre><code>   #内连接
  select
  	a.ename as '员工',b.ename as '领导'
  from
  	emp a
  join  
  	emp b
  on
  	a.mgr = b.empno;

  #外连接中的左连接
  select
  	a.ename as '员工',b.ename as '领导'
  from
  	emp a
  left outer(可省略) join  
  	emp b
  on
  	a.mgr = b.empno;

  #上面左连接改为右连接（右表为主表）
  select
  	a.ename as '员工',b.ename as '领导'
  from
  	emp b
  right join  
  	emp a
  on
  	a.mgr = b.empno;
</code></pre> 
</blockquote> 
<pre><code>全连接（少用）
</code></pre> 
<p>3、笛卡尔积现象：当两张表进行连接查询的时候，没有任何条件限制时，最终的查询结果条数是两张表记录条数的乘积，可以加条件进行过滤</p> 
<h4><a id="3_237"></a>3张表以上连接查询</h4> 
<p>案例：找出每一个员工的部门名称以及工资等级（1）、以及上级领导（2）</p> 
<pre><code>（1）
select 
	e.ename,d.dname,s.grade
from
	emp e
join
	dept d
on
	e.deptno = d.deptno
join
	salgrade s
on
	e.sal between s.losal and s.hisal;

（2）外加条件上级领导
select 
	e.ename '员工',d.dname,s.grade,el.ename '领导'
from
	emp e
join
	dept d
on
	e.deptno = d.deptno
join
	salgrade s
on
	e.sal between s.losal and s.hisal
left join
	emp el
on
	e.mgr = el.empno;
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7108ffe4435ca281f7a5befe73c1ba82/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IDEA Force Push为灰色不能点击</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb60ba04feb258ac78bdd532125f66b2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">华为下一代USG防火墙-NAT技术之源NAT-想上网少不了它</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>