<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue（七）SPA 单页面及应用方式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue（七）SPA 单页面及应用方式" />
<meta property="og:description" content="目录
SPA(Single Page Application) 单页面应用 1. 单页面应用与多页面应用对比
2. 单页面应用步骤
3. SPA路由跳转
SPA(Single Page Application) 单页面应用 单页面是指整个应用程序只有一个唯一完整的 HTML 页面，而其它所谓的页面，其实都是组件片段而已，切换页面也只是切换一个 HTML 中显示不同的组件片段。在今后所有的开发项目都是单页面应用。
1. 单页面应用与多页面应用对比 多页面应用
单页面应用
请求次数
每切换一次页面，都向服务器端重新发送请求；反复切换页面就会反复发送请求，请求次数多。
在首次加载时，就将唯一完整的HTML页面和所有其余页面组件一起下载下来，即使反复切换页面也不需要反复向服务器发送请求，请求次数绝对少。
公共资源
每次切换页面，都要重新请求页面中的bootstrap.css、jquery.js、bootstrap.js等多个页面都要用到的资源，请求次数多加载慢。
每次切换页面时，唯一完整的HTML外壳没有切换，所以不会重复发送请求，下载css和js文件，请求次数又少了很多，同时加载效率高。
加载效率
每次切换页面，都要删除旧的整棵DOM树，重建整棵DOM树，效率低。
每次切换页面时，因为只跟换部分组件片段显示，整个页面没有更换，DOM树也只更换部分节点，不用重建整棵DOM树，效率高。
页面切换动画
几乎不可能实现页面切换动画，因为页面切换需要同时看到前一个页面的后一半以及后一个页面的前一半；多页面应用不可能两个页面同时存在，所以无法实现。
比较容易实现页面切换动画，因为单页面应用的所有页面组件已经同时保存在客户端了，同时显示也是有可能的。
2. 单页面应用步骤 （1）先创建唯一完整的 HTML 页面（一个支持 vue 基本结构的空页面）
&lt;script src=&#34;js/vue.js&#34;&gt; &lt;body&gt; &lt;div id=&#34;app&#34;&gt; &lt;/div&gt; &lt;script&gt; new Vue({ el: &#34;#app&#34;, }) &lt;/script&gt; &lt;/body&gt; （2）创建所有&#34;页面&#34;组件文件
a. 项目中，有几个&#34;页面&#34;，就要创建几个页面组件文件；
b. 所有页面组件都要集中放在一个名为 views 的文件夹中；
c. 每个页面组件其实都是一个子组件；
d. 在唯一完整的 HTML 页面顶部引入页面组件；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cba91a25e3e2d405e5a06978d638e4b8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-01T11:22:13+08:00" />
<meta property="article:modified_time" content="2022-04-01T11:22:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue（七）SPA 单页面及应用方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="SPA(Single%20Page%20Application)%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%C2%A0-toc" style="margin-left:40px;"><a href="#SPA%28Single%20Page%20Application%29%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%C2%A0" rel="nofollow">SPA(Single Page Application) 单页面应用 </a></p> 
<p id="1.%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E4%B8%8E%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E5%AF%B9%E6%AF%94-toc" style="margin-left:80px;"><a href="#1.%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E4%B8%8E%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E5%AF%B9%E6%AF%94" rel="nofollow">1. 单页面应用与多页面应用对比</a></p> 
<p id="2.%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E6%AD%A5%E9%AA%A4-toc" style="margin-left:80px;"><a href="#2.%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E6%AD%A5%E9%AA%A4" rel="nofollow">2. 单页面应用步骤</a></p> 
<p id="3.%20SPA%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC-toc" style="margin-left:80px;"><a href="#3.%20SPA%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC" rel="nofollow">3. SPA路由跳转</a></p> 
<hr id="hr-toc"> 
<h3><strong>SPA(Single Page Application) 单页面应用</strong> </h3> 
<p style="margin-left:0;text-align:justify;">        单页面是指整个应用程序只有一个唯一完整的 HTML 页面，而其它所谓的页面，其实都是组件片段而已，切换页面也只是切换一个 HTML 中显示不同的组件片段。在今后所有的开发项目都是单页面应用。</p> 
<h4 id="1.%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E4%B8%8E%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E5%AF%B9%E6%AF%94" style="margin-left:0px;text-align:justify;"><strong>1. 单页面应用与多页面应用对比</strong></h4> 
<table border="1" cellspacing="0" style="width:650px;"><tbody><tr><td style="background-color:#d5dce4;border-color:#000000;width:56.45pt;"> <p style="margin-left:0;text-align:center;"></p> </td><td style="background-color:#d5dce4;border-color:#000000;width:6cm;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#000000;">多页面应用</span></strong></p> </td><td style="background-color:#d5dce4;border-color:#000000;width:191.4pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#000000;">单页面应用</span></strong></p> </td></tr><tr><td style="background-color:#d5dce4;border-color:#000000;width:56.45pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#000000;">请求次数</span></strong></p> </td><td style="background-color:#e2efd9;width:6cm;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">每切换一次页面，都向服务器端重新发送请求；反复切换页面就会反复发送请求，请求次数多。</span></p> </td><td style="background-color:#e2efd9;width:191.4pt;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">在首次加载时，就将唯一完整的</span><span style="color:#000000;">HTML</span><span style="color:#000000;">页面和所有其余页面组件一起下载下来，即使反复切换页面也不需要反复向服务器发送请求，请求次数绝对少。</span></p> </td></tr><tr><td style="background-color:#d5dce4;border-color:#000000;width:56.45pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#000000;">公共资源</span></strong></p> </td><td style="background-color:#e2efd9;width:6cm;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">每次切换页面，都要重新请求页面中的</span><span style="color:#000000;">bootstrap.css</span><span style="color:#000000;">、</span><span style="color:#000000;">jquery.js</span><span style="color:#000000;">、</span><span style="color:#000000;">bootstrap.js</span><span style="color:#000000;">等多个页面都要用到的资源，请求次数多加载慢。</span></p> </td><td style="background-color:#e2efd9;width:191.4pt;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">每次切换页面时，唯一完整的</span><span style="color:#000000;">HTML</span><span style="color:#000000;">外壳没有切换，所以不会重复发送请求，下载</span><span style="color:#000000;">css</span><span style="color:#000000;">和</span><span style="color:#000000;">js</span><span style="color:#000000;">文件，请求次数又少了很多，同时加载效率高。</span></p> </td></tr><tr><td style="background-color:#d5dce4;border-color:#000000;width:56.45pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#000000;">加载效率</span></strong></p> </td><td style="background-color:#e2efd9;width:6cm;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">每次切换页面，都要删除旧的整棵</span><span style="color:#000000;">DOM</span><span style="color:#000000;">树，重建整棵</span><span style="color:#000000;">DOM</span><span style="color:#000000;">树，效率低。</span></p> </td><td style="background-color:#e2efd9;width:191.4pt;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">每次切换页面时，因为只跟换部分组件片段显示，整个页面没有更换，</span><span style="color:#000000;">DOM</span><span style="color:#000000;">树也只更换部分节点，不用重建整棵</span><span style="color:#000000;">DOM</span><span style="color:#000000;">树，效率高。</span></p> </td></tr><tr><td style="background-color:#d5dce4;border-color:#000000;width:56.45pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#000000;">页面切换动画</span></strong></p> </td><td style="background-color:#e2efd9;width:6cm;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">几乎不可能实现页面切换动画，因为页面切换需要同时看到前一个页面的后一半以及后一个页面的前一半；多页面应用不可能两个页面同时存在，所以无法实现。</span></p> </td><td style="background-color:#e2efd9;width:191.4pt;"> <p style="margin-left:0;text-align:justify;"><span style="color:#000000;">比较容易实现页面切换动画，因为单页面应用的所有页面组件已经同时保存在客户端了，同时显示也是有可能的。</span></p> </td></tr></tbody></table> 
<h4 id="2.%20%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E6%AD%A5%E9%AA%A4"><strong>2. 单页面应用步骤</strong></h4> 
<p><strong>（1）先创建唯一完整的 HTML 页面（一个支持 vue 基本结构的空页面）</strong></p> 
<pre><code class="language-javascript">&lt;script src="js/vue.js"&gt;

&lt;body&gt;
  &lt;div id="app"&gt;

  &lt;/div&gt;
  &lt;script&gt;
    new Vue({
      el: "#app",
    })
  &lt;/script&gt;
&lt;/body&gt;</code></pre> 
<p><strong>（2）创建所有"页面"组件文件</strong></p> 
<p style="margin-left:0;text-align:justify;">        a. 项目中，有几个"页面"，就要创建几个页面组件文件；</p> 
<p style="margin-left:0;text-align:justify;">        b. 所有页面组件都要集中放在一个名为 views 的文件夹中；</p> 
<p style="margin-left:0;text-align:justify;">        c. 每个页面组件其实都是一个子组件；</p> 
<p style="margin-left:0;text-align:justify;">        d. 在唯一完整的 HTML 页面顶部引入页面组件；</p> 
<p style="margin-left:0;text-align:justify;">        e. 创建 404 页面组件，在唯一完整的 HTML 页面顶部引入，加入到路由字典中最后一项：</p> 
<pre><code class="language-javascript">{ path:"*", component:NotFound }
//其中“*”表示除正确输入之外的所有情况</code></pre> 
<p><strong>（3）创建路由器对象</strong></p> 
<p>        a. 在唯一完整的 HTML 页面顶部引入 vue-router.js（官方）；</p> 
<p>        b. 创建路由器对象。先将路由器对象保存在 router/index.js 文件中；然后先创建路由字典，再创建路由器对象；</p> 
<pre><code class="language-javascript">//创建路由器字典
var routes=[
   {path:"/相对路径", component:页面组件对象名},
   ...
 ]

//创建路由器对象
var router=new VueRouter({ routes })
</code></pre> 
<p>        c. 引入到唯一完整的 HTML 页面中；</p> 
<pre><code class="language-html">&lt;script src=“router/index.js”&gt;</code></pre> 
<p>        d. 将 router 对象加入到 new Vue() 中，这样 router 对象才可以修改页面中的内容；</p> 
<pre><code class="language-javascript">new Vue({
   el:"#app",
   router
 })
</code></pre> 
<p>        e. 在唯一完整的 HTML 页面中 &lt;div id="app"&gt; 内，添加 <span style="color:#ff0000;">&lt;router-view&gt;&lt;/router-view&gt; </span>标签，用于为将来的页面组件占位。 </p> 
<blockquote> 
 <p><strong>补充：路由器对象的三大功能（高频笔试面试）</strong></p> 
 <p style="margin-left:0;text-align:justify;"><span style="color:#ff0000;">        <strong>监视</strong></span>地址栏变化；</p> 
 <p style="margin-left:0;text-align:justify;">        <strong><span style="color:#ff0000;">查找</span></strong>当前路径对应的页面组件；</p> 
 <p style="margin-left:0;text-align:justify;">        将找到的页面组件<strong><span style="color:#ff0000;">替换</span></strong>到&lt;router-view&gt;的位置。</p> 
</blockquote> 
<p><strong>（4）创建除页面以外的其它全局组件或子组件（如页头）</strong></p> 
<p style="margin-left:0;text-align:justify;">        a. 所有不足以成为一个页面的组件片段都要集中创建在 components 文件夹中；</p> 
<p style="margin-left:0;text-align:justify;">        b. 所有的组件，暂时都创建为子组件，且都要在唯一完整的 HTML 页面中引入；</p> 
<p style="margin-left:0px;">        c. 如果是全局组件，只要在 new Vue() 之前，使用 Vue.component() 将子组件对象转为全局组件即可。</p> 
<pre><code class="language-javascript">Vue.component("组件标签名", 组件对象名);</code></pre> 
<p style="margin-left:0;text-align:justify;">        如果所有页面都需要显示页头，则只要在 &lt;router-view&gt; 上方添加 &lt;页头组件&gt; 标签即可；如果有的页面有页头，有的页面不需要页头，就只在那些需要页头的组件中添加 &lt;页头组件&gt;。</p> 
<p style="margin-left:0;text-align:justify;"><em>一个完整的单页面应用文件结构如下：</em></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="513" src="https://images2.imgbox.com/90/57/Mruo6LUE_o.png" width="741"></p> 
<h4 id="3.%20SPA%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><strong>3. SPA路由跳转</strong></h4> 
<p>（1）在 HTML 中写死的跳转连接</p> 
<pre><code class="language-html">&lt;router-link to="/相对路径"&gt;文本&lt;/router-link&gt;</code></pre> 
<p style="margin-left:0;text-align:justify;">        &lt;router-link to="/xxx"&lt;/router-link&gt; 会被翻译为 &lt;a href="xxx"&gt;&lt;/a&gt;，翻译过程中 vue 会对 a 做一些自动的加工。</p> 
<p style="margin-left:0;text-align:justify;">（2）在程序中自动跳转</p> 
<pre><code class="language-javascript"> this.$router.push("/相对路径")</code></pre> 
<p>（3）路由跳转传参</p> 
<p>        a. 配置路由字典中的路由字典项；</p> 
<pre><code class="language-javascript">{ path:"/相对路径/:变量名", component: 页面组件对象名, props:true}

//:变量名 表示为上个页面传到下个页面的值起一个变量名，便于重复使用
//props:true 让地址栏中的上个页面传来的值，自动掉入下一个页面的props中成为一个外来属性/变量
</code></pre> 
<p>        b. 跳转时携带参数值到下个页面；</p> 
<pre><code class="language-javascript">&lt;router-link to="/相对路径/参数值"&gt;
//或者
this.$router.push("/相对路径/参数值")

//路由传参，在路由字典项的path中定义变量时必须加:
//但在跳转时传参时既不用加:也不用加变量名，写参数值即可
</code></pre> 
<p>        c. 在下个页面中直接使用 props 中外部传来的变量。</p> 
<pre><code class="language-javascript">props:[ "变量名" ]</code></pre> 
<p>        如下：<br><img alt="" height="279" src="https://images2.imgbox.com/98/96/toVfaiUL_o.png" width="767"></p> 
<hr> 
<p>举例：实现单页面应用(以上述文件结构为基础)；</p> 
<p>        <u>index.html</u></p> 
<pre><code class="language-html">&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;Document&lt;/title&gt;
  &lt;script src="js/vue.js"&gt;&lt;/script&gt;
  &lt;script src="js/vue-router.js"&gt;&lt;/script&gt;
  &lt;script src="views/Detail.js"&gt;&lt;/script&gt;
  &lt;script src="views/Index.js"&gt;&lt;/script&gt;
  &lt;script src="views/NotFound.js"&gt;&lt;/script&gt;
  &lt;script src="router/index.js"&gt;&lt;/script&gt;
  &lt;script src="components/MyHeader.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;style&gt;
  .router-link-exact-active {
    background-color: rgb(78, 75, 75);
    width: 50px;
    padding: 5px;
    border-radius: 5px;
    color: white;
    text-decoration: none;
  }
&lt;/style&gt;

&lt;body&gt;
  &lt;div id="app"&gt;
    &lt;!--为所有页面添加页头--&gt;
    &lt;!-- &lt;my-header&gt;&lt;/my-header&gt; --&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
  &lt;/div&gt;
  &lt;script&gt;
    //将普通子组件MyHeader转为全局组件
    Vue.component("my-header", MyHeader);

    new Vue({
      el: "#app",
      router
    })
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>        <u>views/Index.js</u></p> 
<pre><code class="language-javascript">var Index = {
  template: `
    &lt;div&gt;
      &lt;my-header&gt;&lt;/my-header&gt;
      &lt;h1 style="color:red"&gt;这里是首页&lt;/h1&gt;
      &lt;button @click="goto(1)"&gt;查看1号商品详情&lt;/button&gt;
      &lt;button @click="goto(5)"&gt;查看5号商品详情&lt;/button&gt;
      &lt;button @click="goto(13)"&gt;查看13号商品详情&lt;/button&gt;
    &lt;/div&gt;
  `,
  methods: {
    goto(lid) {
      // 程序中自动跳转
      this.$router.push(`/detail/${lid}`)
    }
  }

}</code></pre> 
<p>        <u>views/Detail.js</u></p> 
<pre><code class="language-javascript">var Detail = {
  props: ["lid"],
  template: `
    &lt;div&gt;
      &lt;my-header&gt;&lt;/my-header&gt;
      &lt;h1 style="color:blue"&gt;这里是详情页&lt;/h1&gt;
      &lt;h2&gt;显示{<!-- -->{lid}}商品的详细信息...&lt;/h2&gt;
    &lt;/div&gt;
  `
}</code></pre> 
<p>        <u>views/NotFound.js</u></p> 
<pre><code class="language-javascript">var NotFound = {
  template: `
  &lt;div&gt;
    &lt;h2 style="color:yellow"&gt;404:嘿！走到哪儿了！&lt;/h2&gt;
  &lt;/div&gt;
  `
}</code></pre> 
<p>        <u>router/index.js</u></p> 
<pre><code class="language-javascript">var routes = [{
    path: "/", //用户运行后直接进入首页
    component: Index
  },
  {
    path: "/detail/:lid",
    component: Detail,
    props: true
  },
  {
    path: "*", //除输入正确之外的所有情况
    component: NotFound
  }
];
var router = new VueRouter({
  routes
});</code></pre> 
<p>        <u>components/MyHeader.js</u></p> 
<pre><code class="language-javascript">var MyHeader = {
  template: `&lt;div&gt;
    &lt;h1 style="color:orange"&gt;这里是页头&lt;/h1&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;router-link to="/"&gt;首页&lt;/router-link&gt;&lt;/li&gt;
      &lt;li&gt;&lt;router-link to="/details"&gt;详情页&lt;/router-link&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;hr&gt;
  &lt;/div&gt;`
}</code></pre> 
<p>效果如下：</p> 
<p>        在首页时，首页高亮显示；</p> 
<p style="text-align:center;"><img alt="" height="335" src="https://images2.imgbox.com/dc/2c/537XdWpW_o.png" width="556"></p> 
<p>        点击第一个按钮； </p> 
<p style="text-align:center;"><img alt="" height="290" src="https://images2.imgbox.com/83/a8/dVqbJw97_o.png" width="520"></p> 
<p>        404界面；</p> 
<p></p> 
<p style="text-align:center;"><img alt="" height="152" src="https://images2.imgbox.com/a6/f2/Ea9uUj4s_o.png" width="544"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8e4f7206539aaf17e09d161b0083d71c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">图片像素大小怎么调整，批量调整图片像素</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1b1d63c1c01ca2d762e8788849993f7f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LibreCAD的基本使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>