<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LLM之Agent（八）| 使用CrewAi、Solor/Hermes、Langchain和Ollama构建超级Agent - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LLM之Agent（八）| 使用CrewAi、Solor/Hermes、Langchain和Ollama构建超级Agent" />
<meta property="og:description" content="随着大模型技术的发展，AI Agent正在成为大模型游戏规则的改变者，它可以帮助用户分解任务、规划任务和执行任务，这就是CrewAI的独特之处。CrewAI是AutoGEN的顶级替代品，为您提供轻松组建人工智能Agent团队执行自动化任务的能力。
在本文中，将介绍什么是CrewAi，架构设计，Autogen、ChatDev和Crew Ai之间的差异，以及如何使用Crew Ai、Langchain和Ollama的Solar或Hermes Power来构建超级Ai Agent。
一、什么是CrewAI？ Crew AI是一个优秀的框架，旨在协调角色扮演、自主的AI代理，使这些代理能够高效地协作和解决复杂任务。
CrewAi的主要特点包括：
基于角色的代理设计：CrewAi允许您自定义具有特定角色、目标和工具的人工智能AI代理；
自主代理间委托：代理可以自主委托任务并相互协商，提高解决问题的效率；
灵活的任务管理：用户可以使用自定义工具定义任务，并将其动态分配给代理；
本地模型集成：CrewAI可以通过Ollama等工具与本地模型集成，用于特殊任务或数据隐私考虑；
基于流程的操作：目前支持按顺序执行操作，并计划在未来支持更复杂的流程，如共识和分层流程。
二、Crew AI Vs AutoGen Vs ChatDev AutoGen：
虽然Autogen擅长创建会话代理，但它缺乏固有的流程概念。在Autogen中，协调代理的交互需要额外的编程，随着任务规模的增长，编程可能会变得复杂和繁琐。
ChatDev：
ChatDev将过程的概念引入了人工智能代理领域，但其实现相当僵化。ChatDev中的定制是有限的，不适合生产环境，这可能会阻碍实际场景应用程序的可扩展性和灵活性。
CrewAI：
CrewAI在构建时就考虑到了生产环境，它既具有Autogen对话代理的灵活性，也具有ChatDev的体系化过程方法。CrewAI是柔性的，流程设计是动态的且强大，能够无缝适应开发和生产工作流程。
三、CrewAI的实现 3.1 安装Ollama 我们首先下载Ollama.ai，下载链接：https://ollama.ai/。
选择合适的操作系统Ollama版本
您可以下载适用于Mac和Linux的Ollama。Windows版本即将推出
将Ollama移动到应用程序
将Ollama拖放到Applications文件夹中，此步骤仅适用于Mac用户。完成此步骤后，Ollama将完全安装在您的设备上。单击“下一步”按钮。
3.2 安装和部署Openhermes/solar或其他LLM 现在我们需要安装要在本地使用的LLM，命令如下：
Ollama run Solar Ollama现在将下载Solar，这可能需要几分钟的时间，具体取决于您的网速。一旦安装好，你就可以开始与它交谈了。
创建文件夹
让我们创建一个名为crewai的文件夹并导航到它。
3.3 安装Crewai和依赖项 我们用“python2.11-m venv crew”创建了一个虚拟环境，并用“source crew/bin/activate”激活它，然后安装“pip-install crewai”
3.4 安装必要的库 在开始之前，让我们安装所需的库。创建一个名为requirements.txt的文件，并在下面写入依赖项。
unstructuredlangchainJinja2&gt;=3.1.2click&gt;=7.0duckduckgo-search 之后，只需在VS Code中打开终端或者在打开Mac终端，并运行以下命令：
pip install -r requirements.txt 3.5 导入库 我们将从crewai导入Agent、Task、Crew和Process，然后从langchain.tools导入DuckDuckGoSearchRun来收集web信息。
DuckDuckGoSearchRun被创建并存储在变量search_tool中
我们从langchain.lms导入ollama来加载一个模型，这里使用Solar和Openhermes进行实验
from crewai import Agent, Task, Crew, Processimport os​from langchain." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7f5079d38d9c71975df1f13d73171bc9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-18T15:45:41+08:00" />
<meta property="article:modified_time" content="2024-01-18T15:45:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LLM之Agent（八）| 使用CrewAi、Solor/Hermes、Langchain和Ollama构建超级Agent</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p class="img-center"><img alt="" height="608" src="https://images2.imgbox.com/5e/e6/eIE6fF9K_o.png" width="1080"></p> 
<p>       随着大模型技术的发展，AI Agent正在成为大模型游戏规则的改变者，它可以帮助用户分解任务、规划任务和执行任务，这就是CrewAI的独特之处。CrewAI是AutoGEN的顶级替代品，为您提供轻松组建人工智能Agent团队执行自动化任务的能力。</p> 
<p>       在本文中，将介绍什么是CrewAi，架构设计，Autogen、ChatDev和Crew Ai之间的差异，以及如何使用Crew Ai、Langchain和Ollama的Solar或Hermes Power来构建超级Ai Agent。</p> 
<h2><strong>一、什么是CrewAI？</strong></h2> 
<p>       Crew AI是一个优秀的框架，旨在协调角色扮演、自主的AI代理，使这些代理能够高效地协作和解决复杂任务。</p> 
<p><strong>CrewAi的主要特点包括：</strong></p> 
<p><strong>基于角色的代理设计</strong>：CrewAi允许您自定义具有特定角色、目标和工具的人工智能AI代理；</p> 
<p><strong>自主代理间委托</strong>：代理可以自主委托任务并相互协商，提高解决问题的效率；</p> 
<p><strong>灵活的任务管理</strong>：用户可以使用自定义工具定义任务，并将其动态分配给代理；</p> 
<p><strong>本地模型集成</strong>：CrewAI可以通过Ollama等工具与本地模型集成，用于特殊任务或数据隐私考虑；</p> 
<p><strong>基于流程的操作</strong>：目前支持按顺序执行操作，并计划在未来支持更复杂的流程，如共识和分层流程。</p> 
<h2><strong>二、Crew AI Vs AutoGen Vs ChatDev</strong></h2> 
<p><strong>AutoGen</strong>：</p> 
<p>      虽然Autogen擅长创建会话代理，但它缺乏固有的流程概念。在Autogen中，协调代理的交互需要额外的编程，随着任务规模的增长，编程可能会变得复杂和繁琐。</p> 
<p><strong>ChatDev</strong>：</p> 
<p>      ChatDev将过程的概念引入了人工智能代理领域，但其实现相当僵化。ChatDev中的定制是有限的，不适合生产环境，这可能会阻碍实际场景应用程序的可扩展性和灵活性。</p> 
<p><strong>CrewAI</strong>：</p> 
<p>      CrewAI在构建时就考虑到了生产环境，它既具有Autogen对话代理的灵活性，也具有ChatDev的体系化过程方法。CrewAI是柔性的，流程设计是动态的且强大，能够无缝适应开发和生产工作流程。</p> 
<h2><strong>三、CrewAI的实现</strong></h2> 
<h3><strong>3.1 安装Ollama</strong></h3> 
<p>我们首先下载Ollama.ai，下载链接：https://ollama.ai/。</p> 
<p></p> 
<p class="img-center"><img alt="" height="626" src="https://images2.imgbox.com/a4/dd/6Go9gjh2_o.png" width="652"></p> 
<p><strong>选择合适的操作系统Ollama版本</strong></p> 
<p>您可以下载适用于Mac和Linux的Ollama。Windows版本即将推出</p> 
<p></p> 
<p class="img-center"><img alt="" height="482" src="https://images2.imgbox.com/eb/2b/uRGYzHVY_o.png" width="901"></p> 
<p><strong>将Ollama移动到应用程序</strong></p> 
<p>       将Ollama拖放到Applications文件夹中，此步骤仅适用于Mac用户。完成此步骤后，Ollama将完全安装在您的设备上。单击“下一步”按钮。</p> 
<h3><strong>3.2 安装和部署Openhermes/solar或其他LLM</strong></h3> 
<p>       现在我们需要安装要在本地使用的LLM，命令如下：</p> 
<pre><code>Ollama run Solar</code></pre> 
<p>       Ollama现在将下载Solar，这可能需要几分钟的时间，具体取决于您的网速。一旦安装好，你就可以开始与它交谈了。</p> 
<p></p> 
<p class="img-center"><img alt="" height="700" src="https://images2.imgbox.com/10/bc/jmPxiG77_o.png" width="1080"></p> 
<p><strong>创建文件夹</strong></p> 
<p>        让我们创建一个名为crewai的文件夹并导航到它。</p> 
<p></p> 
<p class="img-center"><img alt="" height="679" src="https://images2.imgbox.com/76/f6/OxAei69V_o.png" width="1080"></p> 
<h3><strong>3.3 安装Crewai和依赖项</strong></h3> 
<p>       我们用“python2.11-m venv crew”创建了一个虚拟环境，并用“source crew/bin/activate”激活它，然后安装“pip-install crewai”</p> 
<h3><strong>3.4 安装必要的库</strong></h3> 
<p>       在开始之前，让我们安装所需的库。创建一个名为requirements.txt的文件，并在下面写入依赖项。</p> 
<pre><code>unstructured</code><code>langchain</code><code>Jinja2&gt;=3.1.2</code><code>click&gt;=7.0</code><code>duckduckgo-search</code></pre> 
<p>         之后，只需在VS Code中打开终端或者在打开Mac终端，并运行以下命令：</p> 
<pre><code>pip install -r requirements.txt</code></pre> 
<h3><strong>3.5 导入库</strong></h3> 
<p>      我们将从crewai导入Agent、Task、Crew和Process，然后从<strong>langchain.tools</strong>导入DuckDuckGoSearchRun来收集web信息。</p> 
<p><strong>       DuckDuckGoSearchRun</strong>被创建并存储在变量<strong>search_tool</strong>中</p> 
<p>        我们从langchain.lms导入ollama来加载一个模型，这里使用Solar和Openhermes进行实验</p> 
<pre><code>from crewai import Agent, Task, Crew, Process</code><code>import os</code><code>​</code><code>from langchain.tools import DuckDuckGoSearchRun</code><code>search_tool = DuckDuckGoSearchRun()</code><code>from langchain.llms import Ollama</code><code>ollama_openhermes = Ollama(model="openhermes")</code><code>ollama_solar = Ollama(model="Solar")</code></pre> 
<h3><strong>3.6 创建一个研究员Agent</strong></h3> 
<p>让我们创建一个代理来执行任务、做出决策并与其他代理通信。</p> 
<p><strong>role</strong>：表明其主要功能是进行研究。</p> 
<p><strong>goal</strong>：研究人员的目标是找到发展特定YouTube频道并增加其订户数量的方法。</p> 
<p><strong>backstory</strong>：协助研究活动并简化某些任务。</p> 
<p><strong>tools</strong>：代理可用的工具列表包括search_tool，</p> 
<p><strong>verbose</strong>：设置为True，这通常意味着代理将提供详细的日志、输出或解释</p> 
<p><strong>llm</strong>：这代表“大型语言模型”，在这种情况下，<strong>ollama_openhermes</strong>作为代理使用的模型传递。</p> 
<p><strong>allow_delegation</strong>：设置为False，表示不允许此代理将其任务委派给其他代理或进程</p> 
<pre><code>researcher = Agent(</code><code>    role='Researcher',</code><code>    goal='Research methods to grow this channel Gao Dalie (高達烈) on youtube and get more subscribers',</code><code>    backstory='You are an AI research assistant',</code><code>    tools=[search_tool],</code><code>    verbose=True,</code><code>    llm=ollama_openhermes, # Ollama model passed here</code><code>    allow_delegation=False</code><code>)</code></pre> 
<h3><strong>3.7 创建一个作家Agent</strong></h3> 
<p>       作为内容策略师的Agent，其目标是撰写关于YouTube增长渠道的有趣博客文章。它可以将撰写博客文章的任务委派给代理</p> 
<pre><code>writer = Agent(</code><code>    role='Writer',</code><code>    goal='Write compelling and engaging reasons as to why someone should join Gao Dalie (高達烈) youtube channel',</code><code>    backstory='You are an AI master mind capable of growing any youtube channel',</code><code>    verbose=True,</code><code>    llm=ollama_openhermes, # Ollama model passed here</code><code>    allow_delegation=False</code><code>)</code></pre> 
<h3><strong>3.8 为Agent设置任务</strong></h3> 
<p>      任务1和任务2被分配给一名“研究人员”Agent，负责调查“Gao Dalie (高達烈)”YouTube频道，并找到可靠的方法来生成一个频道。</p> 
<p>       任务3被分配给一名“作家”Agent，为“Gao Dalie (高達烈)”编制一份行动清单来实现频道生成。</p> 
<pre><code>task1 = Task(description='Investigate Gao Dalie (高達烈) Youtube channel', agent=researcher)</code><code>task2 = Task(description='Investigate sure fire ways to grow a channel', agent=researcher)</code><code>​</code><code>task3 = Task(description='Write a list of tasks Gao Dalie (高達烈) must do to grow his channel', agent=writer)</code></pre> 
<h3><strong>3.9 工作人员和流程</strong></h3> 
<p><strong>Crew</strong>：定义以<strong>研究人员</strong>和<strong>作家</strong>为成员的团队。</p> 
<p><strong>Process.sequential</strong>：使用按顺序执行任务的流程。上一个任务的结果将作为附加内容传递给下一个任务。</p> 
<p><strong>crew.kickoff()</strong>：命令crew开始工作。</p> 
<pre><code>crew = Crew(</code><code>    agents=[researcher, writer],</code><code>    tasks = [task1,task2,task3],</code><code>    verbose=2,</code><code>    process=Process.sequential</code><code>)</code><code>​</code><code>result = crew.kickoff()</code></pre> 
<h3><strong>3.10 输出</strong></h3> 
<p>      crew运行结束时会输出结果，结果是一条简单的分界线和crew的执行结果。</p> 
<p><strong>Openherms</strong></p> 
<p>下面是Openhermes作为作家和Solar作为研究人员的运行结果：</p> 
<p></p> 
<p class="img-center"><img alt="" height="341" src="https://images2.imgbox.com/18/12/Lj0qCkce_o.png" width="1080"></p> 
<p><strong>Solar</strong></p> 
<p>       Openhermes将扮演研究员的角色，Solor将扮演作家的角色，这一角色的变化将展示不同模型如何适应不同的生成过程。</p> 
<p></p> 
<p class="img-center"><img alt="" height="480" src="https://images2.imgbox.com/30/a8/YzRWr7mZ_o.png" width="1080"></p> 
<h2><strong>四、结论：</strong></h2> 
<p>       CrewAI不仅是解决人工智能协作问题的有效工具，而且重塑了人类与人工智能之间的关系。</p> 
<p>       这将是人工智能助手的能力得到充分发挥，促进人工智能在各行各业的广泛应用。随着CrewAI技术的成熟，人工智能将成为企业协同工作的重要力量。</p> 
<h2><strong>参考文献：</strong></h2> 
<p>[1] https://pub.towardsai.net/crewai-solor-hermes-langchain-ollama-super-ai-agent-0ee348404428</p> 
<p>[2] https://github.com/joaomdmoura/crewAI</p> 
<p>[3] https://arxiv.org/abs/2312.15166</p> 
<p>[4] https://huggingface.co/teknium/OpenHermes-2.5-Mistral-7B</p> 
<p>[5] https://quickaitutorial.com/</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c03c451f222b48fe9e2fae51ec39779f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker报错 missing signature key 无法拉去镜像，yum install docker-ce没有可用软件包 解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58f457f87dc0097fe40367ef418ccb49/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python并发任务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>