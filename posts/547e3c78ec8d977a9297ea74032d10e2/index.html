<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>《深入浅出强化学习：原理入门》学习笔记（2） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="《深入浅出强化学习：原理入门》学习笔记（2）" />
<meta property="og:description" content="2. 马尔可夫决策过程 2.1 马尔可夫决策过程理论讲解 1.马尔可夫性：
所谓马尔科夫性是指系统的下一个状态st&#43;1 仅与当前状态st 有关，而与以前的状态无关。
定义：状态st 是马尔科夫的，当且仅当P[st&#43;1 |st ]=P[st&#43;1 |s1 ，…，st ]。
定义中可以看到，当前状态st 其实是蕴含了所有相关的历史信息s1 ，…，st ，一旦当前状态已知，历史信息将会被抛弃。马尔科夫性描述的是每个状态的性质，但真正有用的是如何描述一个状态序列。数学中用来描述随机变量序列的学科叫随机过程。所谓随机过程就是指随机变量序列。若随机变量序列中的每个状态都是马尔科夫的，则称此随机过程为马尔科夫随机过程。
2. 马尔可夫过程：
马尔科夫过程的定义：马尔科夫过程是一个二元组（S，P），且满足：S是有限状态集合，P是状态转移概率。状态转移概率矩阵为：
P = [ P 11 ⋯ P 1 n ⋮ ⋮ ⋮ P n 1 ⋯ P n n ] P=\begin{bmatrix} P_{11}&amp; \cdots &amp; P_{1n} \\ \vdots&amp; \vdots &amp; \vdots \\ P_{n1} &amp; \cdots &amp; P_{nn}\\ \end{bmatrix} P=⎣⎢⎡​P11​⋮Pn1​​⋯⋮⋯​P1n​⋮Pnn​​⎦⎥⎤​ 3. 马尔可夫决策过程：
马尔科夫决策过程由元组（S，A，P，R，γ）描述，其中：
S 为有限的状态集；A 为有限的动作集；P 为状态转移概率；R 为回报函数；γ 为折扣因子，用来计算累积回报。注意，跟马尔科夫过程不同的是，马尔科夫决策过程的状态转移概率是包含动作的，即：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/547e3c78ec8d977a9297ea74032d10e2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-11T11:01:52+08:00" />
<meta property="article:modified_time" content="2022-03-11T11:01:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">《深入浅出强化学习：原理入门》学习笔记（2）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="2__0"></a>2. 马尔可夫决策过程</h3> 
<h4><a id="21__1"></a>2.1 马尔可夫决策过程理论讲解</h4> 
<p><strong>1.马尔可夫性：</strong></p> 
<ul><li> <p>所谓马尔科夫性是指系统的下一个状态st+1 仅与当前状态st 有关，而与以前的状态无关。</p> </li><li> <p>定义：状态st 是马尔科夫的，当且仅当P[st+1 |st ]=P[st+1 |s1 ，…，st ]。</p> <p>定义中可以看到，当前状态st 其实是蕴含了所有相关的历史信息s1 ，…，st ，一旦当前状态已知，历史信息将会被抛弃。马尔科夫性描述的是每个状态的性质，但真正有用的是如何描述一个<strong>状态序列</strong>。数学中用来描述随机变量序列的学科叫随机过程。所谓随机过程就是指<strong>随机变量序列</strong>。若随机变量序列中的<strong>每个状态都是马尔科夫的</strong>，则称此随机过程为<strong>马尔科夫随机过程</strong>。</p> </li></ul> 
<p><strong>2. 马尔可夫过程：</strong></p> 
<ul><li>马尔科夫过程的定义：马尔科夫过程是一个二元组（S，P），且满足：S是有限状态集合，P是状态转移概率。状态转移概率矩阵为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           P 
          
         
           = 
          
          
          
            [ 
           
           
            
             
              
               
               
                 P 
                
               
                 11 
                
               
              
             
             
              
              
                ⋯ 
               
              
             
             
              
               
               
                 P 
                
                
                
                  1 
                 
                
                  n 
                 
                
               
              
             
            
            
             
              
              
                ⋮ 
               
               
                
               
              
             
             
              
              
                ⋮ 
               
               
                
               
              
             
             
              
              
                ⋮ 
               
               
                
               
              
             
            
            
             
              
               
               
                 P 
                
                
                
                  n 
                 
                
                  1 
                 
                
               
              
             
             
              
              
                ⋯ 
               
              
             
             
              
               
               
                 P 
                
                
                
                  n 
                 
                
                  n 
                 
                
               
              
             
            
           
          
            ] 
           
          
         
        
          P=\begin{bmatrix} P_{11}&amp; \cdots &amp; P_{1n} \\ \vdots&amp; \vdots &amp; \vdots \\ P_{n1} &amp; \cdots &amp; P_{nn}\\ \end{bmatrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 4.26em; vertical-align: -1.88em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.35101em;"><span class="" style="top: -1.95em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎣</span></span></span><span class="" style="top: -3.105em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -4.35102em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.85003em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.38em;"><span class="" style="top: -5.2275em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.3675em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span><span class="" style="top: -2.1675em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.88em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.38em;"><span class="" style="top: -5.2275em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span class="" style="top: -3.3675em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span><span class="" style="top: -2.1675em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.88em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.38em;"><span class="" style="top: -5.2275em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.3675em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width: 0em; border-top-width: 1.5em; bottom: 0em;"></span></span></span></span><span class="" style="top: -2.1675em;"><span class="pstrut" style="height: 3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.88em;"><span class=""></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.35101em;"><span class="" style="top: -1.95em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎦</span></span></span><span class="" style="top: -3.105em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -4.35102em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.85003em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></li></ul> 
<p><strong>3. 马尔可夫决策过程：</strong></p> 
<ul><li>马尔科夫决策过程由元组（S，A，P，R，γ）描述，其中：<br> S 为有限的状态集；A 为有限的动作集；P 为状态转移概率；R 为回报函数；γ 为折扣因子，用来计算累积回报。</li><li>注意，跟马尔科夫过程不同的是，马尔科夫决策过程的状态转移概率是包含动作的，即：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            P 
           
           
           
             s 
            
            
            
              s 
             
            
              ′ 
             
            
           
          
            a 
           
          
         
           = 
          
         
           P 
          
         
           [ 
          
          
          
            S 
           
           
           
             t 
            
           
             + 
            
           
             1 
            
           
          
         
           = 
          
          
          
            s 
           
          
            ′ 
           
          
         
           ∣ 
          
          
          
            S 
           
          
            t 
           
          
         
           = 
          
         
           s 
          
         
           , 
          
          
          
            A 
           
          
            t 
           
          
         
           = 
          
         
           a 
          
         
           ] 
          
         
        
          P_{ss'}^{a}=P[S_{t+1}=s'|S_{t}=s,A_{t}=a] 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.961392em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.714392em;"><span class="" style="top: -2.453em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">s</span><span class="mord mtight"><span class="mord mathdefault mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.682829em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.05189em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.801892em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">a</span><span class="mclose">]</span></span></span></span></span></span></li><li>强化学习的目标是给定一个马尔科夫决策过程，寻找最优策略。所谓策略是指状态到动作的映射，策略常用符号π表示，它是指给定状态s时，动作集上的一个分布，即<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
           ( 
          
         
           a 
          
         
           ∣ 
          
         
           s 
          
         
           ) 
          
         
           = 
          
         
           p 
          
         
           [ 
          
          
          
            A 
           
          
            t 
           
          
         
           = 
          
         
           a 
          
         
           ∣ 
          
          
          
            S 
           
          
            t 
           
          
         
           = 
          
         
           s 
          
         
           ] 
          
         
        
          \pi(a|s)=p[A_{t}=a|S_{t}=s] 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">π</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">s</span><span class="mclose">]</span></span></span></span></span></span></li></ul> 
<p>策略的定义是用条件概率分布给出的，可见，强化学习的理论基础，概率论是必不可少的。</p> 
<h4><a id="22_MDP_29"></a>2.2 MDP中的概率学基础讲解</h4> 
<p><strong>1. 随机变量。</strong><br> 随机变量是指可以随机地取不同值的变量，常用小写字母表示。在MDP中随机变量指的是当前的动作，用字母a表示。随机变量可以是离散的也可以是非离散的。<br> <strong>2. 概率分布。</strong><br> 概率分布用来描述随机变量在每个可能取到的值处的可能性大小。离散型随机变量的概率分布常用概率质量函数来描述，即随机变量在离散点处的概率。连续型随机变量的概率分布则用概率密度函数来描述。<br> <strong>3. 条件概率。</strong><br> 策略π（a|s）是条件概率。条件概率是指在其他事件发生时，我们所关心的事件所发生的概率。<br> <strong>4. 期望和方差。</strong></p> 
<ul><li>最常用的概率分布也就是最常用的随机策略：</li></ul> 
<p><strong>（1）贪婪策略<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
           ∗ 
          
         
           ( 
          
         
           a 
          
         
           ∣ 
          
         
           s 
          
         
           ) 
          
         
           = 
          
          
          
            { 
           
           
            
             
              
              
                1 
               
              
             
             
              
               
               
                 i 
                
               
                 f 
                
               
              
             
             
              
               
               
                 a 
                
               
                 = 
                
               
                 a 
                
               
                 r 
                
               
                 g 
                
               
                 m 
                
               
                 a 
                
               
                 x 
                
               
                 q 
                
               
                 ∗ 
                
               
                 ( 
                
               
                 s 
                
               
                 , 
                
               
                 a 
                
               
                 ) 
                
               
                 ( 
                
               
                 a 
                
               
                 ∈ 
                
               
                 A 
                
               
                 ) 
                
               
              
             
            
            
             
              
              
                0 
               
              
             
             
              
               
               
                 o 
                
               
                 t 
                
               
                 h 
                
               
                 e 
                
               
                 r 
                
               
                 w 
                
               
                 i 
                
               
                 s 
                
               
                 e 
                
               
              
             
            
           
          
         
        
          \pi*(a|s)=\left\{\begin{matrix} 1 &amp; if&amp;a=argmaxq*(s,a) (a\in A)\\ 0 &amp;otherwise \\ \end{matrix}\right. 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.46528em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">π</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.40003em; vertical-align: -0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">{<!-- --></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.45em;"><span class="" style="top: -3.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.95em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.45em;"><span class="" style="top: -3.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.02691em;">w</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.95em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 1.45em;"><span class="" style="top: -3.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mord mathdefault" style="margin-right: 0.03588em;">q</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">a</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">A</span><span class="mclose">)</span></span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 贪婪策略是</strong>一个<strong>确定性策略，即只有在使得动作值函数q* (s，a)最大的动作处取概率1，选其他动作的概率为0。<br> （2）ε-greedy策略<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
         
           ∗ 
          
         
           ( 
          
         
           a 
          
         
           ∣ 
          
         
           s 
          
         
           ) 
          
         
           ← 
          
          
          
            { 
           
           
            
             
              
               
               
                 1 
                
               
                 − 
                
               
                 ε 
                
               
                 + 
                
                
                
                  ε 
                 
                 
                 
                   ∣ 
                  
                 
                   A 
                  
                 
                   ( 
                  
                 
                   s 
                  
                 
                   ) 
                  
                 
                   ∣ 
                  
                 
                
               
              
             
             
              
               
               
                 i 
                
               
                 f 
                
               
              
             
             
              
               
               
                 a 
                
               
                 = 
                
               
                 a 
                
               
                 r 
                
               
                 g 
                
               
                 m 
                
               
                 a 
                
                
                
                  x 
                 
                
                  a 
                 
                
               
                 Q 
                
               
                 ( 
                
               
                 s 
                
               
                 , 
                
               
                 a 
                
               
                 ) 
                
               
              
             
            
            
             
              
               
               
                 ε 
                
                
                
                  ∣ 
                 
                
                  A 
                 
                
                  ( 
                 
                
                  s 
                 
                
                  ) 
                 
                
                  ∣ 
                 
                
               
              
             
             
              
               
               
                 i 
                
               
                 f 
                
               
              
             
             
              
               
               
                 a 
                
               
                 ≠ 
                
               
                 a 
                
               
                 r 
                
               
                 g 
                
               
                 m 
                
               
                 a 
                
                
                
                  x 
                 
                
                  a 
                 
                
               
                 Q 
                
               
                 ( 
                
               
                 s 
                
               
                 , 
                
               
                 a 
                
               
                 ) 
                
               
              
             
            
           
          
         
        
          \pi *(a|s)\leftarrow \left\{\begin{matrix} 1-\varepsilon +\frac{\varepsilon }{\left| A(s)\right|} &amp; if &amp; a= argmax_{a}Q(s,a) \\ \frac{\varepsilon }{\left| A(s)\right|} &amp; if &amp; a\neq argmax_{a}Q(s,a) \\ \end{matrix}\right. 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.46528em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">π</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.00003em; vertical-align: -1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{<!-- --></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.61em;"><span class="" style="top: -3.77em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span><span class="mord mathdefault mtight">A</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">)</span><span class="mclose mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">ε</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span><span class="mord mathdefault mtight">A</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">)</span><span class="mclose mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">ε</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.11em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.61em;"><span class="" style="top: -3.77em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.11em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.61em;"><span class="" style="top: -3.77em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault">Q</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">a</span><span class="mclose">)</span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault">Q</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">a</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.11em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> ε-greedy策略是强化学习最基本最常用随机策略。其含义是选取使得动作值函数最大的动作的概率为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          − 
         
        
          ε 
         
        
          + 
         
         
         
           ε 
          
          
          
            ∣ 
           
          
            A 
           
          
            ( 
           
          
            s 
           
          
            ) 
           
          
            ∣ 
           
          
         
        
       
         1-\varepsilon +\frac{\varepsilon }{\left| A(s)\right|} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.21539em; vertical-align: -0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span><span class="mord mathdefault mtight">A</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">)</span><span class="mclose mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">ε</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> ，而其他动作的概率为等概率，都为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           ε 
          
          
          
            ∣ 
           
          
            A 
           
          
            ( 
           
          
            s 
           
          
            ) 
           
          
            ∣ 
           
          
         
        
       
         \frac{\varepsilon }{\left| A(s)\right|} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.21539em; vertical-align: -0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span><span class="mord mathdefault mtight">A</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">)</span><span class="mclose mtight delimcenter" style="top: 0em;"><span class="mtight">∣</span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">ε</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> 。ε-greedy平衡了利用（exploitation）和探索（exploration），其中选取动作值函数最大的部分为利用，其他非最优动作仍有概率为探索部分。<br> （3）高斯策略:<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            π 
           
          
            θ 
           
          
         
           = 
          
          
          
            μ 
           
          
            θ 
           
          
         
           + 
          
         
           ε 
          
         
           , 
          
         
           ε 
          
         
           ∼ 
          
         
           N 
          
         
           ( 
          
         
           0 
          
         
           , 
          
          
          
            σ 
           
          
            2 
           
          
         
           ) 
          
         
        
          \pi _{\theta} = \mu _{\theta } + \varepsilon,\varepsilon\sim N(0,\sigma ^{2}) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">ε</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.11411em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span><br> 其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           μ 
          
         
           θ 
          
         
        
       
         \mu _{\theta } 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为确定性部分， ε为零均值的高斯随机噪声。高斯策略也平衡了利用和探索，其中利用由确定性部分完成，探索由ε完成。高斯策略在连续系统的强化学习中应用广泛。<br> （4）玻尔兹曼分布<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           π 
          
          
          
            ( 
           
          
            a 
           
          
            ∣ 
           
          
            s 
           
          
            , 
           
          
            θ 
           
          
            ) 
           
          
         
           = 
          
          
           
           
             e 
            
           
             x 
            
           
             p 
            
           
             ( 
            
           
             Q 
            
           
             ( 
            
           
             s 
            
           
             , 
            
           
             a 
            
           
             , 
            
           
             θ 
            
           
             ) 
            
           
             ) 
            
           
           
            
            
              Σ 
             
            
              b 
             
            
           
             e 
            
           
             x 
            
           
             p 
            
           
             ( 
            
           
             h 
            
           
             ( 
            
           
             s 
            
           
             , 
            
           
             b 
            
           
             , 
            
           
             θ 
            
           
             ) 
            
           
             ) 
            
           
          
         
        
          \pi \left ( a|s,\theta \right )= \frac{exp(Q(s,a,\theta ))}{\Sigma _{b}exp(h(s,b,\theta ))} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">π</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.363em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="mclose">)</span><span class="mclose">)</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault">Q</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 其中Q(s,a,θ)为动作值函数。该策略的含义是，动作值函数大的动作被选中的概率大，动作值函数小的动作被选中的概率小。</strong></p> 
<h4><a id="23_gymMDP_58"></a>2.3 基于gym的MDP实例讲解</h4> 
<p>本节我们以机器人找金币为例子，构建其MDP框架。</p> 
<p>如图3所示为机器人找金币的例子。该网格世界一共8个状态，其中状态6和状态8是死亡区域，状态7是金币区域。机器人的初始位置为网格世界中的任意一个状态，机器人从初始状态出发寻找金币，机器人每探索一次，进入死亡区域或找到金币，本次探索结束。<br> <img src="https://images2.imgbox.com/06/f5/T7Rfr64c_o.jpg" alt="机器人找金币"></p> 
<center> 
 <b><font size="3">图3. 机器人找金币</font></b> 
</center> 在2.1节我们已经定义了一个马尔科夫决策过程。我们知道马尔科夫决策过程由元组(S,A,P,R,γ)来描述。下面我们将机器人找金币的例子建模为MDP。 
<p>状态空间：S = {1,2,3,4,5,6,7,8} ；动作空间：A = {东,南,西,北} ；状态转移概率为机器人的运动方程，回报函数为：找到金币的回报为 1，进入死亡区域的回报为-1，机器人在状态1～5之间转换时，回报为0。</p> 
<p>下面，我们基于gym构建机器人找金币的gym环境。</p> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
@author: cainiao08ge
@project: py_demo
@file: grid_mdp.py
@description： 
"""</span>
<span class="token keyword">import</span> logging
<span class="token keyword">import</span> numpy
<span class="token keyword">import</span> random
<span class="token keyword">from</span> gym <span class="token keyword">import</span> spaces
<span class="token keyword">import</span> gym

logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">GridEnv</span><span class="token punctuation">(</span>gym<span class="token punctuation">.</span>Env<span class="token punctuation">)</span><span class="token punctuation">:</span>
    metadata <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'render.modes'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'human'</span><span class="token punctuation">,</span> <span class="token string">'rgb_array'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'video.frames_per_second'</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        self<span class="token punctuation">.</span>states <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token comment">#状态空间</span>
        self<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">380</span><span class="token punctuation">,</span><span class="token number">460</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">460</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>terminate_states <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#终止状态为字典格式</span>
        self<span class="token punctuation">.</span>terminate_states<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>terminate_states<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>terminate_states<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>

        self<span class="token punctuation">.</span>actions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'n'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'s'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">]</span>

        self<span class="token punctuation">.</span>rewards <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">#回报的数据结构为字典</span>
        self<span class="token punctuation">.</span>rewards<span class="token punctuation">[</span><span class="token string">'1_s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span>
        self<span class="token punctuation">.</span>rewards<span class="token punctuation">[</span><span class="token string">'3_s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span>
        self<span class="token punctuation">.</span>rewards<span class="token punctuation">[</span><span class="token string">'5_s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span>

        self<span class="token punctuation">.</span>t <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">#状态转移的数据格式为字典</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'1_s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'1_e'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'2_w'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'2_e'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'3_s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'3_w'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'3_e'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'4_w'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'4_e'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'5_s'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span>
        self<span class="token punctuation">.</span>t<span class="token punctuation">[</span><span class="token string">'5_w'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>

        self<span class="token punctuation">.</span>gamma <span class="token operator">=</span> <span class="token number">0.8</span>         <span class="token comment">#折扣因子</span>
        self<span class="token punctuation">.</span>viewer <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">getTerminal</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>terminate_states

    <span class="token keyword">def</span> <span class="token function">getGamma</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>gamma

    <span class="token keyword">def</span> <span class="token function">getStates</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>states

    <span class="token keyword">def</span> <span class="token function">getAction</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>actions
    <span class="token keyword">def</span> <span class="token function">getTerminate_states</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>terminate_states
    <span class="token keyword">def</span> <span class="token function">setAction</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>state<span class="token operator">=</span>s

    <span class="token keyword">def</span> <span class="token function">_step</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#系统当前状态</span>
        state <span class="token operator">=</span> self<span class="token punctuation">.</span>state
        <span class="token keyword">if</span> state <span class="token keyword">in</span> self<span class="token punctuation">.</span>terminate_states<span class="token punctuation">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
        key <span class="token operator">=</span> <span class="token string">"%d_%s"</span><span class="token operator">%</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>   <span class="token comment">#将状态和动作组成字典的键值</span>

        <span class="token comment">#状态转移</span>
        <span class="token keyword">if</span> key <span class="token keyword">in</span> self<span class="token punctuation">.</span>t<span class="token punctuation">:</span>
            next_state <span class="token operator">=</span> self<span class="token punctuation">.</span>t<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            next_state <span class="token operator">=</span> state
        self<span class="token punctuation">.</span>state <span class="token operator">=</span> next_state

        is_terminal <span class="token operator">=</span> <span class="token boolean">False</span>

        <span class="token keyword">if</span> next_state <span class="token keyword">in</span> self<span class="token punctuation">.</span>terminate_states<span class="token punctuation">:</span>
            is_terminal <span class="token operator">=</span> <span class="token boolean">True</span>

        <span class="token keyword">if</span> key <span class="token operator">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>rewards<span class="token punctuation">:</span>
            r <span class="token operator">=</span> <span class="token number">0.0</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            r <span class="token operator">=</span> self<span class="token punctuation">.</span>rewards<span class="token punctuation">[</span>key<span class="token punctuation">]</span>


        <span class="token keyword">return</span> next_state<span class="token punctuation">,</span> r<span class="token punctuation">,</span>is_terminal<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token keyword">def</span> <span class="token function">_reset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>state <span class="token operator">=</span> self<span class="token punctuation">.</span>states<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>states<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>state
    <span class="token keyword">def</span> <span class="token function">render</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'human'</span><span class="token punctuation">,</span> close<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> close<span class="token punctuation">:</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>viewer <span class="token keyword">is</span> <span class="token operator">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>viewer <span class="token operator">=</span> <span class="token boolean">None</span>
            <span class="token keyword">return</span>
        screen_width <span class="token operator">=</span> <span class="token number">600</span>
        screen_height <span class="token operator">=</span> <span class="token number">400</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>viewer <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">from</span> gym<span class="token punctuation">.</span>envs<span class="token punctuation">.</span>classic_control <span class="token keyword">import</span> rendering
            self<span class="token punctuation">.</span>viewer <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Viewer<span class="token punctuation">(</span>screen_width<span class="token punctuation">,</span> screen_height<span class="token punctuation">)</span>
            <span class="token comment">#创建网格世界</span>
            self<span class="token punctuation">.</span>line1 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line2 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line3 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line4 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line5 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">260</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">260</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line6 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">340</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">340</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line7 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line8 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line9 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line10 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">260</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">340</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line11 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Line<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">420</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">#创建第一个骷髅</span>
            self<span class="token punctuation">.</span>kulo1 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>make_circle<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>circletrans <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Transform<span class="token punctuation">(</span>translation<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>kulo1<span class="token punctuation">.</span>add_attr<span class="token punctuation">(</span>self<span class="token punctuation">.</span>circletrans<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>kulo1<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">#创建第二个骷髅</span>
            self<span class="token punctuation">.</span>kulo2 <span class="token operator">=</span> rendering<span class="token punctuation">.</span>make_circle<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>circletrans <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Transform<span class="token punctuation">(</span>translation<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">460</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>kulo2<span class="token punctuation">.</span>add_attr<span class="token punctuation">(</span>self<span class="token punctuation">.</span>circletrans<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>kulo2<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">#创建金条</span>
            self<span class="token punctuation">.</span>gold <span class="token operator">=</span> rendering<span class="token punctuation">.</span>make_circle<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>circletrans <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Transform<span class="token punctuation">(</span>translation<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>gold<span class="token punctuation">.</span>add_attr<span class="token punctuation">(</span>self<span class="token punctuation">.</span>circletrans<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>gold<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">#创建机器人</span>
            self<span class="token punctuation">.</span>robot<span class="token operator">=</span> rendering<span class="token punctuation">.</span>make_circle<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>robotrans <span class="token operator">=</span> rendering<span class="token punctuation">.</span>Transform<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>robot<span class="token punctuation">.</span>add_attr<span class="token punctuation">(</span>self<span class="token punctuation">.</span>robotrans<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>robot<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">)</span>

            self<span class="token punctuation">.</span>line1<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line2<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line3<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line4<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line5<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line6<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line7<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line8<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line9<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line10<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>line11<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line1<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line2<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line3<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line4<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line5<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line6<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line7<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line8<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line9<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line10<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line11<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>kulo1<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>kulo2<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>gold<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>add_geom<span class="token punctuation">(</span>self<span class="token punctuation">.</span>robot<span class="token punctuation">)</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>state <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token boolean">None</span>
        <span class="token comment">#self.robotrans.set_translation(self.x[self.state-1],self.y[self.state-1])</span>
        self<span class="token punctuation">.</span>robotrans<span class="token punctuation">.</span>set_translation<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">[</span>self<span class="token punctuation">.</span>state<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token punctuation">[</span>self<span class="token punctuation">.</span>state<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>



        <span class="token keyword">return</span> self<span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>render<span class="token punctuation">(</span>return_rgb_array<span class="token operator">=</span>mode <span class="token operator">==</span> <span class="token string">'rgb_array'</span><span class="token punctuation">)</span>
</code></pre> 
<p>这段代码在书中作者的github中有链接： https：//github.com/gxnk/reinforcement-learning-code，可以直接下载，本身代码是没有问题的，但在win和linux中运行效果各不相同（书中是在linux中运行），在每个人的电脑环境中更是存在差异，我在两个系统（Ubuntu和win10）中都有测试并运行，期间碰到了各种问题，可能仅仅是我得问题，在此不一一罗列（主要是bug当时没截图，解决了就不想在测试了），问题均已解决，很多问题可能只是我的问题，欢迎读者讨论交流。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81f2bae3ae420f3bee2384599842399c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">B树和B&#43;树的查找方式及原因</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/95b5430ce6f5b7b09fadb1aa8b0a8e3b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">spring如何解决循环依赖</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>