<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java监听器的理解与实现 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java监听器的理解与实现" />
<meta property="og:description" content="文章目录 初识监听器Listener接口分类ServletContext监听器HttpSession监听器ServletRequest监听器 Java代码实现ServletContextListenerServletContextAttributeListenerHttpSessionListenerHttpSessionAttributeListenerHttpSessionActivationListenerHttpSessionBindingListenerServletRequestListenerServletRequestAttributeListener 模仿监听器Demo 初识监听器 == 什么是监听器==
监听器也叫Listener，是Servlet的监听器，它可以监听客户端的请求、服务端的操作等。通过监听器，可以自动激发一些操作，比如监听在线的用户的数量。
监听器，字面上的理解就是监听观察某个事件（程序）的发生情况，当被监听的事件真的发生了的时候，事件发生者（事件源） 就会给注册该事件的监听者（监听器）发送消息，告诉监听者某些信息，同时监听者也可以获得一份事件对象，根据这个对象可以获得相关属性和执行相关操作。
监听器模型涉及以下三个对象，模型图如下：
（1）事件：用户对组件的一个操作，或者说程序执行某个方法，称之为一个事件，如机器人程序执行工作。（2）事件源：发生事件的组件就是事件源，也就是被监听的对象，如机器人可以工作，可以跳舞，那么就可以把机器人看做是一个事件源。（3）事件监听器（处理器）：监听并负责处理事件的方法，如监听机器人工作情况，在机器人工作前后做出相应的动作，或者获取机器人的状态信息。
执行顺序如下：
1、给事件源注册监听器。
2、组件接受外部作用，也就是事件被触发。
3、组件产生一个相应的事件对象，并把此对象传递给与之关联的事件处理器。
4、事件处理器启动，并执行相关的代码来处理该事件。 java监听器监听的内容是什么？监听器作用在哪个事件上？是在哪配置的监听内容的？
首先，监听器要怎么实现？
Java事件由事件类和监听接口组成，自定义一个事件前，必须提供一个事件的监听接口以及一个事件类。JAVA中监听接口是继承java.util.EventListener的类，事件类继承java.util.EventObject的类。很多基本的事件系统已经为我们定义好了，我们只要学会调用即可，但是为了更加灵活地满足特定的需求，我们有时候也需要自定义事件。
监听器的实质是什么？
一个类实现某个监听器接口，然后实现接口对应的方法，达到监听具体事项的动作。
Listener接口分类 监听器的接口有哪些？
监听器接口分三类：ServletContext，HttpSession，ServletRequest。
ServletContext监听器 ServletContext
ServletContextListener 监听ServletContext对象ServletContextAttributeListener 监听对ServletContext属性的操作，比如说增加，删除，修改 HttpSession监听器 HttpSession
HttpSessionListener 监听Session对象HttpSessionAttributeListener 监听Session的属性操作HttpSessionActivationListener 监听HTTP会话的active和passivate情况，passivate是指非活动的session被写入持久设备（如硬盘），active相反。HttpSessionBindingListener 监听器感知Session绑定的事件监听器 注意：Servlet 规范中定义了两个特殊的监听器接口&#34;HttpSessionBindingListener和HttpSessionActivationListener&#34;来帮助JavaBean
对象了解自己在Session域中的这些状态： ，实现这两个接口的类不需要 web.xml 文件中进行注册。
HttpSessionActivationListener 监听
实现了HttpSessionActivationListener接口的 JavaBean 对象可以感知自己被活化和钝化的事件 活化:javabean对象和Session一起被反序列化(活化)到内存中（硬盘到内存）； 钝化:javabean对象和Session一起序列化到硬盘中（内存到硬盘）； javabean对象存在Session中，当服务器把session序列化到硬盘上时，如果Session中的javabean对象实现了Serializable接口 那么服务器会把session中的javabean对象一起序列化到硬盘上，javabean对象和Session一起被序列化到硬盘中的这个操作称之为钝化 如果Session中的javabean对象没有实现Serializable接口，那么服务器会先把Session中没有实现Serializable接口的javabean对象移除 然后再把Session序列化(钝化)到硬盘中； 当绑定到 HttpSession对象中的javabean对象将要随 HttpSession对象被钝化之前， web服务器调用该javabean对象的 sessionWillPassivate方法， 这样javabean对象就可以知道自己将要和 HttpSession对象一起被序列化(钝化)到硬盘中 当绑定到HttpSession对象中的javabean对象将要随 HttpSession对象被活化之后， web服务器调用该javabean对象的sessionDidActive方法， 这样javabean对象就可以知道自己将要和 HttpSession对象一起被反序列化(活化)回到内存中 HttpSessionBindingListener 监听
保存在Session域中的对象可以有多种状态： （1）绑定(session." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6200708d7cb79801ddbb852f64c3790c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-21T01:18:18+08:00" />
<meta property="article:modified_time" content="2023-02-21T01:18:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java监听器的理解与实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_3" rel="nofollow">初识监听器</a></li><li><a href="#Listener_31" rel="nofollow">Listener接口分类</a></li><li><ul><li><a href="#ServletContext_36" rel="nofollow">ServletContext监听器</a></li><li><a href="#HttpSession_41" rel="nofollow">HttpSession监听器</a></li><li><a href="#ServletRequest_83" rel="nofollow">ServletRequest监听器</a></li></ul> 
  </li><li><a href="#Java_96" rel="nofollow">Java代码实现</a></li><li><ul><li><a href="#ServletContextListener_97" rel="nofollow">ServletContextListener</a></li><li><a href="#ServletContextAttributeListener_138" rel="nofollow">ServletContextAttributeListener</a></li><li><a href="#HttpSessionListener_187" rel="nofollow">HttpSessionListener</a></li><li><a href="#HttpSessionAttributeListener_229" rel="nofollow">HttpSessionAttributeListener</a></li><li><a href="#HttpSessionActivationListener_286" rel="nofollow">HttpSessionActivationListener</a></li><li><a href="#HttpSessionBindingListener_365" rel="nofollow">HttpSessionBindingListener</a></li><li><a href="#ServletRequestListener_443" rel="nofollow">ServletRequestListener</a></li><li><a href="#ServletRequestAttributeListener_483" rel="nofollow">ServletRequestAttributeListener</a></li></ul> 
  </li><li><a href="#Demo_534" rel="nofollow">模仿监听器Demo</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_3"></a>初识监听器</h2> 
<p>== 什么是监听器==<br> 监听器也叫Listener，是Servlet的监听器，它可以监听客户端的请求、服务端的操作等。通过监听器，可以自动激发一些操作，比如监听在线的用户的数量。</p> 
<p>监听器，字面上的理解就是监听观察某个事件（程序）的发生情况，当被监听的事件真的发生了的时候，事件发生者（事件源） 就会给注册该事件的监听者（监听器）发送消息，告诉监听者某些信息，同时监听者也可以获得一份事件对象，根据这个对象可以获得相关属性和执行相关操作。</p> 
<p>监听器模型涉及以下三个对象，模型图如下：</p> 
<ul><li>（1）事件：用户对组件的一个操作，或者说程序执行某个方法，称之为一个事件，如机器人程序执行工作。</li><li>（2）事件源：发生事件的组件就是事件源，也就是被监听的对象，如机器人可以工作，可以跳舞，那么就可以把机器人看做是一个事件源。</li><li>（3）事件监听器（处理器）：监听并负责处理事件的方法，如监听机器人工作情况，在机器人工作前后做出相应的动作，或者获取机器人的状态信息。<br> <img src="https://images2.imgbox.com/b9/65/Yq6VorgO_o.png" alt="在这里插入图片描述"><br> 执行顺序如下：<br> 1、给事件源注册监听器。<br> 2、组件接受外部作用，也就是事件被触发。<br> 3、组件产生一个相应的事件对象，并把此对象传递给与之关联的事件处理器。<br> 4、事件处理器启动，并执行相关的代码来处理该事件。</li></ul> 
<p>java监听器监听的内容是什么？监听器作用在哪个事件上？是在哪配置的监听内容的？</p> 
<p><mark>首先，监听器要怎么实现？</mark><br> Java事件由<strong>事件类</strong>和<strong>监听接口</strong>组成，自定义一个事件前，必须提供一个事件的监听接口以及一个事件类。JAVA中<strong>监听接口</strong>是继承java.util.EventListener的类，<strong>事件类</strong>继承java.util.EventObject的类。很多基本的事件系统已经为我们定义好了，我们只要学会调用即可，但是为了更加灵活地满足特定的需求，我们有时候也需要自定义事件。</p> 
<p><mark>监听器的实质是什么？</mark><br> 一个类实现某个监听器接口，然后实现接口对应的方法，达到监听具体事项的动作。</p> 
<h2><a id="Listener_31"></a>Listener接口分类</h2> 
<p><mark>监听器的接口有哪些？</mark></p> 
<p>监听器接口分三类：ServletContext，HttpSession，ServletRequest。</p> 
<h3><a id="ServletContext_36"></a>ServletContext监听器</h3> 
<p><strong>ServletContext</strong></p> 
<ul><li>ServletContextListener 监听ServletContext对象</li><li>ServletContextAttributeListener 监听对ServletContext属性的操作，比如说增加，删除，修改</li></ul> 
<h3><a id="HttpSession_41"></a>HttpSession监听器</h3> 
<p><strong>HttpSession</strong></p> 
<ul><li>HttpSessionListener 监听Session对象</li><li>HttpSessionAttributeListener 监听Session的属性操作</li><li>HttpSessionActivationListener 监听HTTP会话的active和passivate情况，passivate是指非活动的session被写入持久设备（如硬盘），active相反。</li><li>HttpSessionBindingListener 监听器感知Session绑定的事件监听器</li></ul> 
<p>注意：Servlet 规范中定义了两个特殊的监听器接口"<strong>HttpSessionBindingListener</strong>和<strong>HttpSessionActivationListener</strong>"来帮助JavaBean<br> 对象了解自己在Session域中的这些状态： ，实现这两个接口的类不需要 web.xml 文件中进行注册。<br> <br><br></p> 
<p>HttpSessionActivationListener 监听</p> 
<pre><code class="prism language-java">实现了<span class="token class-name">HttpSessionActivationListener</span>接口的 <span class="token class-name">JavaBean</span> 对象可以感知自己被活化和钝化的事件

活化<span class="token operator">:</span>javabean对象和<span class="token class-name">Session</span>一起被反序列化<span class="token punctuation">(</span>活化<span class="token punctuation">)</span>到内存中（硬盘到内存）；
钝化<span class="token operator">:</span>javabean对象和<span class="token class-name">Session</span>一起序列化到硬盘中（内存到硬盘）；
javabean对象存在<span class="token class-name">Session</span>中，当服务器把session序列化到硬盘上时，如果<span class="token class-name">Session</span>中的javabean对象实现了<span class="token class-name">Serializable</span>接口
那么服务器会把session中的javabean对象一起序列化到硬盘上，javabean对象和<span class="token class-name">Session</span>一起被序列化到硬盘中的这个操作称之为钝化
如果<span class="token class-name">Session</span>中的javabean对象没有实现<span class="token class-name">Serializable</span>接口，那么服务器会先把<span class="token class-name">Session</span>中没有实现<span class="token class-name">Serializable</span>接口的javabean对象移除
然后再把<span class="token class-name">Session</span>序列化<span class="token punctuation">(</span>钝化<span class="token punctuation">)</span>到硬盘中；

当绑定到 <span class="token class-name">HttpSession</span>对象中的javabean对象将要随 <span class="token class-name">HttpSession</span>对象被钝化之前，
web服务器调用该javabean对象的 sessionWillPassivate方法，
这样javabean对象就可以知道自己将要和 <span class="token class-name">HttpSession</span>对象一起被序列化<span class="token punctuation">(</span>钝化<span class="token punctuation">)</span>到硬盘中
当绑定到<span class="token class-name">HttpSession</span>对象中的javabean对象将要随 <span class="token class-name">HttpSession</span>对象被活化之后，
web服务器调用该javabean对象的sessionDidActive方法，
这样javabean对象就可以知道自己将要和 <span class="token class-name">HttpSession</span>对象一起被反序列化<span class="token punctuation">(</span>活化<span class="token punctuation">)</span>回到内存中 

</code></pre> 
<p>HttpSessionBindingListener 监听</p> 
<pre><code class="prism language-java">保存在<span class="token class-name">Session</span>域中的对象可以有多种状态：
（<span class="token number">1</span>）绑定<span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">)</span>到<span class="token class-name">Session</span>中；
（<span class="token number">2</span>）从<span class="token class-name">Session</span>域中解除<span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>绑定；
（<span class="token number">3</span>）随<span class="token class-name">Session</span>对象持久化到一个存储设备中；
（<span class="token number">4</span>）随<span class="token class-name">Session</span>对象从一个存储设备中恢复；

<span class="token class-name">Servlet</span> 规范中定义了两个特殊的监听器接口<span class="token string">"HttpSessionBindingListener和HttpSessionActivationListener"</span>来帮助<span class="token class-name">JavaBean</span> 对象了解自己在<span class="token class-name">Session</span>域中的这些状态： ，实现这两个接口的类不需要 web<span class="token punctuation">.</span>xml 文件中进行注册。
</code></pre> 
<h3><a id="ServletRequest_83"></a>ServletRequest监听器</h3> 
<p><strong>ServletRequest</strong></p> 
<ul><li>ServletRequestListener监听Requst对象</li><li>ServletRequestAttributeListener监听Request中的属性操作。</li></ul> 
<p><mark>怎么知道我到底要实现哪个监听器？</mark><br> 看需求，看要监听的东西是什么，比如说监听上下文的有：ServletContextListener，ServletContextAttributeListener<br> 监听request的有：ServletRequestListener，ServletRequestAttributeListener</p> 
<p><mark>监听器是怎样被调用的？为什么直接在web.xml里面配置一个listerner，程序就会自动去监听？</mark><br> 因为监听器是需要实现监听器接口的，接口的底层应该是封装好了怎样去监听的逻辑的，所以说直接实现监听器接口，程序启动后就能直接去监听。</p> 
<h2><a id="Java_96"></a>Java代码实现</h2> 
<h3><a id="ServletContextListener_97"></a>ServletContextListener</h3> 
<p>监听器类代码</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>request</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestListener</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletRequestListener1</span> <span class="token keyword">implements</span> <span class="token class-name">ServletRequestListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 该请求即将超出Web应用程序的范围。
     * request将要销毁
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request将要销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 该请求即将进入Web应用程序的范围。
     * request初始化
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>web.xml配置代码</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">ServletContext</span>对象监听器 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>servletContext<span class="token punctuation">.</span></span>ServletContextListener1</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="ServletContextAttributeListener_138"></a>ServletContextAttributeListener</h3> 
<p>监听器类代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>request</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributeEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributeListener</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletRequestAttributeListener1</span> <span class="token keyword">implements</span> <span class="token class-name">ServletRequestAttributeListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通知一个新的属性被添加到servlet请求。 在添加属性后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeAdded</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request添加属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知现有的属性已经从servlet请求中删除。 在属性被删除后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeRemoved</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request删除属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知servlet请求中已经替换了一个属性。 在属性被替换后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeReplaced</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request替换属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request被替换的key："</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"  ,替换前的value："</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>web.xml配置代码：</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">ServletContext</span>属性的操作监听器  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>servletContext<span class="token punctuation">.</span></span>ServletContextAttributeListener1</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="HttpSessionListener_187"></a>HttpSessionListener</h3> 
<p>监听器类代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>session</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionListener</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpSessionListener1</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionListener</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 通知会话已创建。
     * session创建之后调用
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionCreated</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session创建之后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知会话即将失效。
     * session销毁之前调用
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDestroyed</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session销毁之前"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>web.xml配置代码：</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">HttpSession</span>对象监听器 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span>HttpSessionListener1</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="HttpSessionAttributeListener_229"></a>HttpSessionAttributeListener</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>session</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionAttributeListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionBindingEvent</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpSessionAttributeListener1</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionAttributeListener</span><span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通知某个属性已被添加到会话中。 在添加属性后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeAdded</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session添加属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"被添加到session中的属性："</span> <span class="token operator">+</span> <span class="token string">"key="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"   ,value="</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知某个属性已从会话中删除。 在属性被删除后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeRemoved</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session删除属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"被删除的session中的属性："</span> <span class="token operator">+</span> <span class="token string">"key="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"   ,value="</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 在会话中通知属性已被替换。 在属性被替换后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeReplaced</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session替换属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"被替换的session中的属性："</span> <span class="token operator">+</span> <span class="token string">"key="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"   ,替换之前的value="</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>web.xml配置代码：</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">HttpSession</span>属性的操作监听器 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span>HttpSessionAttributeListener1</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="HttpSessionActivationListener_286"></a>HttpSessionActivationListener</h3> 
<p>监听器类代码（不需要配置web.xml）：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>session</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionActivationListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionEvent</span></span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpSessionActivationListener1</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionActivationListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通知该会话即将被钝化。
     * 当前javaBean绑定到session中钝化之前
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionWillPassivate</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session钝化之前"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知该会话刚刚被激活。
     * 当前javaBean绑定到session中活化之后
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDidActivate</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session活化之后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>配置Session对象的管理org.apache.catalina.session.PersistentManager方便序列化测试：<br> 添加配置文件webapp/META-INF/context.xml<br> <img src="https://images2.imgbox.com/ca/bd/Z6hiPxHB_o.png" alt="在这里插入图片描述"><br> 内容如下：</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Context</span><span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">Session</span>对象的管理 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> maxIdleSwap<span class="token operator">=</span><span class="token string">"1"</span> <span class="token punctuation">(</span>秒<span class="token punctuation">)</span>：n秒之后就将<span class="token class-name">HttpSession</span>对象钝化到本地硬盘的一个文件夹中 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">Manager</span> className<span class="token operator">=</span><span class="token string">"org.apache.catalina.session.PersistentManager"</span> saveOnRestart<span class="token operator">=</span><span class="token string">"true"</span> maxIdleSwap<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">Store</span> className<span class="token operator">=</span><span class="token string">"org.apache.catalina.session.FileStore"</span> directory<span class="token operator">=</span><span class="token string">"e:/session/"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">Store</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">Manager</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">Context</span><span class="token operator">&gt;</span>

</code></pre> 
<p>测试代码：jsp页面</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"cn.itcast.erp.listener.session.HttpSessionBindingListener1"</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"cn.itcast.erp.listener.session.HttpSessionActivationListener1"</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> language<span class="token operator">=</span><span class="token string">"java"</span> pageEncoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html <span class="token constant">PUBLIC</span> <span class="token string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="token string">"http://www.w3.org/TR/html4/loose.dtd"</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
  <span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"Content-Type"</span> content<span class="token operator">=</span><span class="token string">"text/html; charset=UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span>测试<span class="token class-name">HttpSessionActivationListener</span>监听（session的活化和钝化）<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

  <span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">%</span> 
        <span class="token comment">//测试session活化和钝化监听器HttpSessionActivationListener</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"sessionActivation"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">HttpSessionActivationListener1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//测试session绑定和解绑监听器</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"sessionBind"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HttpSessionBindingListener1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"sessionBind"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token operator">%</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">&gt;</span></span>session活化和钝化监听<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="HttpSessionBindingListener_365"></a>HttpSessionBindingListener</h3> 
<p>监听器类代码（不需要配置web.xml）：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>session</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionBindingEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionBindingListener</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpSessionBindingListener1</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionBindingListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通知对象它正在被绑定到会话并标识会话。（还未绑定）
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">valueBound</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前对象正在绑定到session中，还未绑定"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"将要被绑定到session中的key值："</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"value值："</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"value值是否是当前对象："</span> <span class="token operator">+</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

        <span class="token class-name">Object</span> valueNow <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"valueNow:"</span> <span class="token operator">+</span> valueNow<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//null,还未绑定</span>


    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知对象它正在从会话中解除绑定并标识会话。（还未解除绑定）
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">valueUnbound</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前对象它正在从会话中解除绑定"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"将要解除绑定session中的key值："</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"value值："</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"value值是否是当前对象："</span> <span class="token operator">+</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

        <span class="token class-name">Object</span> valueNow <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"valueNow:"</span> <span class="token operator">+</span> valueNow<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//null,还未解除绑定</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>测试代码：jsp页面</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"cn.itcast.erp.listener.session.HttpSessionBindingListener1"</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"cn.itcast.erp.listener.session.HttpSessionActivationListener1"</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token annotation punctuation">@page</span> language<span class="token operator">=</span><span class="token string">"java"</span> pageEncoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html <span class="token constant">PUBLIC</span> <span class="token string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="token string">"http://www.w3.org/TR/html4/loose.dtd"</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
  <span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"Content-Type"</span> content<span class="token operator">=</span><span class="token string">"text/html; charset=UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span>测试<span class="token class-name">HttpSessionActivationListener</span>监听（session的活化和钝化）<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

  <span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">%</span> 
        <span class="token comment">//测试session活化和钝化监听器HttpSessionActivationListener</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"sessionActivation"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">HttpSessionActivationListener1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//测试session绑定和解绑监听器</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"sessionBind"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HttpSessionBindingListener1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"sessionBind"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token operator">%</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">&gt;</span></span>session活化和钝化监听<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="ServletRequestListener_443"></a>ServletRequestListener</h3> 
<p>监听器类代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>request</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestListener</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletRequestListener1</span> <span class="token keyword">implements</span> <span class="token class-name">ServletRequestListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 该请求即将超出Web应用程序的范围。
     * request将要销毁
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request将要销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 该请求即将进入Web应用程序的范围。
     * request初始化
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>web.xml配置代码：</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">ServletRequest</span>对象监听器 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span>ServletRequestListener1</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="ServletRequestAttributeListener_483"></a>ServletRequestAttributeListener</h3> 
<p>监听器类代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>request</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributeEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributeListener</span></span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletRequestAttributeListener1</span> <span class="token keyword">implements</span> <span class="token class-name">ServletRequestAttributeListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通知一个新的属性被添加到servlet请求。 在添加属性后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeAdded</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request添加属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知现有的属性已经从servlet请求中删除。 在属性被删除后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeRemoved</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request删除属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通知servlet请求中已经替换了一个属性。 在属性被替换后调用。
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeReplaced</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request替换属性后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"request被替换的key："</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"  ,替换前的value："</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>web.xml配置代码：</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">ServletRequest</span>属性的操作监听器  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span><span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>erp<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span>ServletRequestAttributeListener1</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="Demo_534"></a>模仿监听器Demo</h2> 
<p>需求：实现机器人工作和跳舞，在机器人开始工作和跳舞之前输出相关提示。<br><br> 首先创建一个事件源Robot：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>robotListener</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 事件源：机器人
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Robot</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">RobotListener</span> listener<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 注册机器人监听器
     * @param listener
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerListener</span><span class="token punctuation">(</span><span class="token class-name">RobotListener</span> listener<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>listener  <span class="token operator">=</span> listener<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 工作
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">working</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>listener<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Even</span> even <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Even</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>listener<span class="token punctuation">.</span><span class="token function">working</span><span class="token punctuation">(</span>even<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"机器人开始工作......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 跳舞
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>listener<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Even</span> even <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Even</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>listener<span class="token punctuation">.</span><span class="token function">dancing</span><span class="token punctuation">(</span>even<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"机器人开始跳舞......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre> 
<p>创建时间对象Even：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>robotListener</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 事件对象
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Even</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Robot</span> robot<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Even</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Even</span><span class="token punctuation">(</span><span class="token class-name">Robot</span> robot<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>robot <span class="token operator">=</span> robot<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token class-name">Robot</span> <span class="token function">getRobot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> robot<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRobot</span><span class="token punctuation">(</span><span class="token class-name">Robot</span> robot<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>robot <span class="token operator">=</span> robot<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>创建时间监听器接口RobotListener：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>robotListener</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 事件监听器
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RobotListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">working</span><span class="token punctuation">(</span><span class="token class-name">Even</span> even<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token class-name">Even</span> even<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>实现事件监听器MyRobotListener：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>robotListener</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRobotListener</span> <span class="token keyword">implements</span>  <span class="token class-name">RobotListener</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">working</span><span class="token punctuation">(</span><span class="token class-name">Even</span> even<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Robot</span> robot <span class="token operator">=</span> even<span class="token punctuation">.</span><span class="token function">getRobot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"机器人工作提示：请看管好的你机器人，防止它偷懒！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token class-name">Even</span> even<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Robot</span> robot <span class="token operator">=</span> even<span class="token punctuation">.</span><span class="token function">getRobot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"机器人跳舞提示：机器人跳舞动作优美，请不要走神哦！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>事件监听器测试类</p> 
<p>TestListener：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ssm<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>robotListener</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestListener</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Robot</span> robot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Robot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        robot<span class="token punctuation">.</span><span class="token function">registerListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRobotListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        robot<span class="token punctuation">.</span><span class="token function">working</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        robot<span class="token punctuation">.</span><span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>输出结果：<br> <img src="https://images2.imgbox.com/54/e3/urSonZar_o.png" alt="在这里插入图片描述"></p> 
<p>参考文章（侵删）：<br> https://blog.csdn.net/menghuanzhiming/article/details/79042182<br> https://www.cnblogs.com/againn/p/9512013.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/db543b7202c98205d4c6a081229cdec3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac nvm install failed python: not found</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dc2a31a268fa7b5a1a13593e15c83d4b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Excel VBA 基础部分（变量声明、三大语句）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>