<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据结构 活期储蓄账目管理（课程设计完整实验报告） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据结构 活期储蓄账目管理（课程设计完整实验报告）" />
<meta property="og:description" content="需求分析
1.1问题描述
随着社会发展，银行作为一个金融机构，在现代人们的生活中扮演着极其重要的角色。为生活节凑飞快的现代人提供快速、便捷、高效的理财服务。伴随着电脑技术的发展，各大银行的储蓄管理系统也随之出现在这一舞台上。人们的生活水平不断提高，会将一定的收入用于活期存储，因其储户开户、销户、存入、支出活动频繁的需求特点，本课程设计使用哈希表进行银行活期储蓄账目管理系统的模拟，实现基本的数据存储和处理操作。活期储蓄帐目管理，活期储蓄处理中，储户开户、销户、存入、支出活动频繁，系统设计要求：1)能比较迅速地找到储户的帐户，以实现存款、取款记账；2)能比较简单，迅速地实现插入和删除，以实现开户和销户的需要。
1.2模块组成
伪UI模块：伪界面，为了使界面美观设计的伪UI
主程序模块：初始化工作及功能选择和调用
开户模块：经过人机验证后能新建账户。
销户模块：查找到目的账户，再验证密码后对其销户。
查询模块：能够通过账号查找，迅速的找到要查找的账户，并显示账户余额。
存取模块：在迅速地查找到目的账户后，对账户余额进行修改。
测试模块：超级管理员能够模拟输入数据，并输出全部数据
1.3 功能要求
根据1.2模块组成该系统具有以下五个部分的功能：
开户功能：通过人机验证能够从键盘输入用户账户新建账户，并赋予初始开户金额0元。
销户功能：查找到目的账户，若余额为0则对其销户，否则提示先取钱再销户。
查询功能：能够通过账号查找，迅速的找到要查找的账户，并显示账户余额。
存取功能：迅速地查找到目的账户，验证密码后对账户进行存钱取钱操作。
测试功能：能够通过管理员预设密码进行，模拟输入，全部输出操作，以方便测试。
2 概要设计
2.1 设计思路
每一个用户看作一个基本单位，将系统抽象只包括账号和金额，密码、日期等不做存储和处理。为了便于后期维护与找错，使结构更加明了，采用数据结构型函数与功能实现型函数分离结构，存储数据结构是哈希表。
图1 数据结构型函数和功能实现型函数
2.2 存储结构设计
数据结构存储采用的是哈希表，账号存储为字符串，常用字符串哈希函数有 BKDRHash、APHash、DJBHash、JSHash、RSHash、SDBMHash、PJWHash、ELFHash等，本程序采用 BKDRHash对字符串进行散列，得到一个整数的hash值，根据得到的hash值选择一个槽位置，解决冲突方法为链接法，如图3哈希表插入过程。其中零号元素位用于存储哈希表主槽位容积，非所有元素容积，如图2哈希表存储模型。
图2 哈希表存储模型
图3 哈希表插入过程
2.3 算法设计说明
下面将从函数调用关系和对部分算法设计说明两个方面进行
2.3.1 函数调用关系
图4 函数调用关系
2.3.2 算法设计说明
哈希表初始化算法思想是，为哈希表主槽申请空间并置为0，第0个元素的值域用于存放哈希表主槽长度。
判断哈希值所在哈希表槽位的思想是，将字符串用BKDR算法散列成一个整数哈希值，用该整数哈希值对长度取余加1一定落在哈希表主槽槽位数组内，其中加1是为了防止落在0位，因为0位用于存储长度。
哈希表插入元素的思想是，结合图3，先求插入值的主槽，主槽存在该元素则直接更新值域，如果主槽不是该元素，则冲突处理，本程序用链接法，查看主槽冲突指针域，重复上述过程，即找主槽，然后遍历主槽冲突链，存在就更新，不存在就插入。
哈希表删除元素的思想与插入元素的思想较为类似，将对应插入改成删除。
哈希表搜索的思想是，先求要搜索值的哈希值，再利用判断哈希值所在哈希表槽位的算法找到该槽位，对比该槽位元素查看是否一致，一致则查找成功，不一样则看该槽位是否有冲突元素，有的话则对比该槽位元素是否一致，没有的话则不存在该元素，查找失败。
图5 哈希表查找流程图
返回全部数据元素个数的思想为，遍历主槽，如果主槽后面有冲突链则遍历冲突链。
打印全部元素的思想与返回全部元素思想类似，先主槽，并查看是否有冲突链。
3 详细设计
3.1 结构体定义
根据2.2存储结构设计，哈希表结构体的定义为：
typedef struct _htItem
{
struct _htItem *next;//冲突时下一个
char *key_string;//
uint fid;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/91f7300c50c435489916ee2c02d378b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-12T15:56:42+08:00" />
<meta property="article:modified_time" content="2021-12-12T15:56:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据结构 活期储蓄账目管理（课程设计完整实验报告）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">需求分析</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">1.1</span></strong><strong><span style="color:#000000;">问题描述</span></strong></span></p> 
<p style="margin-left:0;text-align:justify;">随着社会发展，银行作为一个金融机构，在现代人们的生活中扮演着极其重要的角色。为生活节凑飞快的现代人提供快速、便捷、高效的理财服务。伴随着电脑技术的发展，各大银行的储蓄管理系统也随之出现在这一舞台上。人们的生活水平不断提高，会将一定的收入用于活期存储，因其储户开户、销户、存入、支出活动频繁的需求特点，本课程设计使用哈希表进行银行活期储蓄账目管理系统的模拟，实现基本的数据存储和处理操作。活期储蓄帐目管理，活期储蓄处理中，储户开户、销户、存入、支出活动频繁，系统设计要求：1)能比较迅速地找到储户的帐户，以实现存款、取款记账；2)能比较简单，迅速地实现插入和删除，以实现开户和销户的需要。</p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">1.2</span></strong><strong><span style="color:#000000;">模块组成</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">伪</span><span style="color:#000000;">UI</span><span style="color:#000000;">模块：伪界面，为了使界面美观设计的伪</span><span style="color:#000000;">UI</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">主程序模块：初始化工作及功能选择和调用</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">开户模块：经过人机验证后能新建账户。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">销户模块：查找到目的账户，再验证密码后对其销户。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">查询模块：能够通过账号查找，迅速的找到要查找的账户，并显示账户余额。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">存取模块：在迅速地查找到目的账户后，对账户余额进行修改。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">测试模块：超级管理员能够模拟输入数据，并输出全部数据</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">1.3 </span></strong><strong><span style="color:#000000;">功能要求</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据</span><span style="color:#000000;">1.2</span><span style="color:#000000;">模块组成该系统具有以下五个部分的功能：</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">开户功能：通过人机验证能够从键盘输入用户账户新建账户，并赋予初始开户金额</span><span style="color:#000000;">0</span><span style="color:#000000;">元。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">销户功能：查找到目的账户，若余额为</span><span style="color:#000000;">0</span><span style="color:#000000;">则对其销户，否则提示先取钱再销户。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">查询功能：能够通过账号查找，迅速的找到要查找的账户，并显示账户余额。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">存取功能：迅速地查找到目的账户，验证密码后对账户进行存钱取钱操作。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">测试功能：能够通过管理员预设密码进行，模拟输入，全部输出操作，以方便测试</span><span style="color:#000000;">。</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">2 </span></strong><strong><span style="color:#000000;">概要设计</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">2.1 </span></strong><strong><span style="color:#000000;">设计思路</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;">　　<span style="color:#000000;">每一个用户看作一个基本单位，将系统抽象只包括账号和金额，密码、日期等不做存储和处理。为了便于后期维护与找错，使结构更加明了，采用数据结构型函数与功能实现型函数分离结构，存储数据结构是哈希表。</span></span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="529" src="https://images2.imgbox.com/66/ab/GHsyANQU_o.png" width="805"><img alt="" height="528" src="https://images2.imgbox.com/69/7a/jB5KVD6N_o.png" width="515"></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;">图</span><span style="color:#000000;">1 </span><span style="color:#000000;">数据结构型函数和功能实现型函数</span></span></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">2.2 </span></strong><strong><span style="color:#000000;">存储结构设计</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;">　　<span style="color:#000000;">数据结构存储采用的是哈希表，账号存储为字符串，常用字符串哈希函数有 BKDRHash、APHash、DJBHash、JSHash、RSHash、SDBMHash、PJWHash、ELFHash等，本程序采用 BKDRHash对字符串进行散列，得到一个整数的hash值，根据得到的hash值选择一个槽位置，解决冲突方法为链接法，如图3哈希表插入过程。其中零号元素位用于存储哈希表主槽位容积，非所有元素容积，如图2哈希表存储模型。</span></span></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"> </span><img alt="" height="428" src="https://images2.imgbox.com/9e/6a/76lMn1mv_o.png" width="973"></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;">图</span><span style="color:#000000;">2 </span><span style="color:#000000;">哈希表存储模型</span></span></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"> </span><img alt="" height="404" src="https://images2.imgbox.com/17/be/8m122Qak_o.png" width="946"></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;">图</span><span style="color:#000000;">3 </span><span style="color:#000000;">哈希表插入过程</span></span></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">2.3 </span></strong><strong><span style="color:#000000;">算法设计说明</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">下面将从函数调用关系和对部分算法设计说明两个方面进行</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">2.3.1 </span></strong><strong><span style="color:#000000;">函数调用关系</span></strong></span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="656" src="https://images2.imgbox.com/7e/35/ty7ZAUXh_o.png" width="953"></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;">图</span><span style="color:#000000;">4 </span><span style="color:#000000;">函数调用关系</span></span></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">2.3.2 </span></strong><strong><span style="color:#000000;">算法设计说明</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;">　　<span style="color:#000000;">哈希表初始化算法思想是，为哈希表主槽申请空间并置为</span><span style="color:#000000;">0</span><span style="color:#000000;">，第</span><span style="color:#000000;">0</span><span style="color:#000000;">个元素的值域用于存放哈希表主槽长度。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">　　判断哈希值所在哈希表槽位的思想是，将字符串用</span><span style="color:#000000;">BKDR</span><span style="color:#000000;">算法散列成一个整数哈希值，用该整数哈希值对长度取余加</span><span style="color:#000000;">1</span><span style="color:#000000;">一定落在哈希表主槽槽位数组内，其中加</span><span style="color:#000000;">1</span><span style="color:#000000;">是为了防止落在</span><span style="color:#000000;">0</span><span style="color:#000000;">位，因为</span><span style="color:#000000;">0</span><span style="color:#000000;">位用于存储长度。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">　　哈希表插入元素的思想是，结合图</span><span style="color:#000000;">3</span><span style="color:#000000;">，先求插入值的主槽，主槽存在该元素则直接更新值域，如果主槽不是该元素，则冲突处理，本程序用链接法，查看主槽冲突指针域，重复上述过程，即找主槽，然后遍历主槽冲突链，存在就更新，不存在就插入。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">　　哈希表删除元素的思想与插入元素的思想较为类似，将对应插入改成删除。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">　　哈希表搜索的思想是，先求要搜索值的哈希值，再利用判断哈希值所在哈希表槽位的算法找到该槽位，对比该槽位元素查看是否一致，一致则查找成功，不一样则看该槽位是否有冲突元素，有的话则对比该槽位元素是否一致，没有的话则不存在该元素，查找失败。</span></span></p> 
<p style="margin-left:0;text-align:center;"></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;"><a name="_Hlk56895090"><img alt="" height="120" src="https://images2.imgbox.com/8c/e3/FcwkcdPH_o.png" width="554"></a></span></span></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;">图</span><span style="color:#000000;">5 </span><span style="color:#000000;">哈希表查找流程图</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">　　返回全部数据元素个数的思想为，遍历主槽，如果主槽后面有冲突链则遍历冲突链。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">　　打印全部元素的思想与返回全部元素思想类似，先主槽，并查看是否有冲突链。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3 </span></strong><strong><span style="color:#000000;">详细设计</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.1 </span></strong><strong><span style="color:#000000;">结构体定义</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据</span><span style="color:#000000;">2.2</span><span style="color:#000000;">存储结构设计，哈希表结构体的定义为：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">typedef </span><span style="color:#0000ff;">struct</span><span style="color:#000000;"> _htItem</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">struct</span><span style="color:#000000;"> _htItem  *next;</span><a name="_Hlk57838231" title="//">//</a><span style="color:#22ab0b;">冲突时下一个</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">char</span><span style="color:#000000;"> *key_string;</span><span style="color:#008000;">//</span></p> 
<p style="margin-left:0;text-align:left;"><a name="_Hlk57840087" title="uint">uint</a><span style="color:#000000;"> fid;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">int</span><span style="color:#000000;"> password;</span><span style="color:#008000;">//</span><span style="color:#22ab0b;">卫星值</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">} htItem;</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.2 </span></strong><strong><span style="color:#000000;">功能型函数</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">开户、销户等功能型函数较为简单，在此不做特别说明，利用随机数产生加减法进行人机验证，</span><span style="color:#000000;">for</span><span style="color:#000000;">循环可进行多次开户、销户操作，尽可能体现严谨思维。</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> int funOpenAccount(htItem **ht)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#22ab0b;"> //</span><span style="color:#22ab0b;">人机验证</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    int n,m,num1,num2,x;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    long s;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    char c;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     srand((unsigned) time(NULL));</span><span style="color:#22ab0b;">//</span><span style="color:#22ab0b;">用时间做种子，每次产生的随机序列不同</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     num1=rand()%10+1;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     num2=rand()%10+1;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     x=rand()%3;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     switch(x)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        case 0:c='+';s=num1+num2;break;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        case 1:c='-';s=num1-num2;break;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        default:c='*';s=num1*num2;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     printf("\t\t</span><span style="color:#000000;">请先进行人机验\n\t\t%d%c%d=",num1,c,num2);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     scanf("%d",&amp;n);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     if(n==s)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         m=1;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     else</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         m=-1;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">//printf("fun  </span><span style="color:#000000;">开户 begin\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    while (m==1)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         int iAccountAdd,iAccountAddSum;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         printf("\n\n\t</span><span style="color:#000000;">请输入预开户账号总数\n\t本次开户总数：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         scanf("%d",&amp;iAccountAddSum);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         for(iAccountAdd=0; iAccountAdd&lt;iAccountAddSum; iAccountAdd++) </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         { </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           printf("\n\t\t</span><span style="color:#000000;">请输入预开户%d的8位数账号：\n",iAccountAdd+1);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           char *sp;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           int tempmoney=0;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           int temppassword,temppassword1;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           printf("\t\t</span><span style="color:#000000;">预开户账号：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           scanf("%s",sp);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           if (htGet(sp, ht))</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">             //</span><span style="color:#000000;">检查账户是否存在 </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">             printf("\t\t</span><span style="color:#000000;">该账户已存在!\n\t\t------------------------------"); </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">             continue;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">             //break;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">             //return 0; </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           } </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           printf("\t\t</span><span style="color:#000000;">请输入6位数密码：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           scanf("%d",&amp;temppassword);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           printf("\t\t</span><span style="color:#000000;">请再次确认密码：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           scanf("%d",&amp;temppassword1);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           do{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 if (temppassword==temppassword1)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     htSet(sp, tempmoney, temppassword, ht);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                    printf("\t\t</span><span style="color:#000000;">开户完成!\n\t\t------------------------------");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 else</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     printf("</span><span style="color:#000000;">两次密码不匹配！请重新输入！\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     printf("\t\t</span><span style="color:#000000;">请输入6位数密码：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     scanf("%s",&amp;temppassword);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     printf("</span><span style="color:#000000;">请确认密码\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     scanf("%s",&amp;temppassword1);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           }while(0);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">           continue;</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         return 0;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    printf("\t\t</span><span style="color:#000000;">验证失败!\n\t\t------------------------------");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    //    printf("\t</span><span style="color:#000000;">系统所有开户信息为：\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    //    print_hashTable(ht);    </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    //    printf("fun  </span><span style="color:#000000;">开户 end\n\n\n");    </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    return 0;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> }</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> /*******************************/ </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> //</span><span style="color:#000000;">销户 </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> int funDelAccount(htItem **ht)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> //    printf("fun  </span><span style="color:#000000;">销户 begin\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     int iAccountDel,iAccountDelSum;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     printf("\n\t</span><span style="color:#000000;">请输入本次销户账号总数：\n\t销户总数：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     scanf("%d",&amp;iAccountDelSum);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     printf("\n\t</span><span style="color:#000000;">友情提示，谨慎操作！\n\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     for(iAccountDel=0; iAccountDel&lt;iAccountDelSum; iAccountDel++) </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         {     </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         printf("\n\t\t</span><span style="color:#000000;">请输入预销户%d的账号：\n",iAccountDel+1);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         char *sp;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         int temppassword;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         int tempmoney;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         printf("\t\t</span><span style="color:#000000;">预销户账号：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         scanf("%s",sp);              </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">         htItem *tmp;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                if (tmp = htGet(sp, ht))</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                    printf("\t\t</span><span style="color:#000000;">请输入6位数密码：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                    scanf("%d",&amp;temppassword);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     if ( temppassword==tmp-&gt;password )</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                          if(tmp-&gt;fid&gt;0)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           printf("\t\t</span><span style="color:#000000;">用户 %s 的余额为￥%d ，请取出余额后再进行销户\n", tmp-&gt;key_string, tmp-&gt;fid);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           continue;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                          else</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                          {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           htDel(sp, ht);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           free(sp);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           printf("\t\t</span><span style="color:#000000;">销户成功！\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                             continue;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                           } </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                    }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                   else </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                   {   </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                       printf("\t\t</span><span style="color:#000000;">密码不正确，请再次输入！\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                       printf("\t\t</span><span style="color:#000000;">请输入6位数密码：");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                       scanf("%d",&amp;temppassword);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                   }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                   if ( temppassword=tmp-&gt;password )</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                   {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 if(tmp-&gt;fid&gt;0)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 printf("\t\t</span><span style="color:#000000;">用户 %s 的余额为￥%d ，请取出余额后再进行销户\n", tmp-&gt;key_string, tmp-&gt;fid);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 else</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     htDel(sp, ht);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     free(sp);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                     printf("\t\t</span><span style="color:#000000;">销户成功！\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 } </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 else</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 {<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                       printf("\t\t</span><span style="color:#000000;">操作失败，请重试！\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                       continue;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                 }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                else</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                printf("\t\t</span><span style="color:#000000;">没有此用户! 请确认信息重新操作\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">                printf("\t\t-----------------------------------------\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     } </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     //    printf("\t</span><span style="color:#000000;">系统所有开户信息为：\n");</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     //    print_hashTable(ht);    </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     //    printf("fun  </span><span style="color:#000000;">销户 end\n\n\n");    </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">     return 0; </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;"> }</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">其中存取函数利用哈希表特性，不是找到该元素直接更改卫星值值域，而是取出值域中的卫星值经过处理后，重新插入该元素，代码如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">scanf(</span><span style="color:#800000;">"%d"</span><span style="color:#000000;">,&amp;moneyAD);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        htItem *tmp = htGet(spAD, ht);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        moneyAD = moneyAD  +  (tmp-&gt;fid);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        htSet(spAD, moneyAD, ht);</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.3 </span></strong><strong><span style="color:#000000;">数据结构型函数</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.3.1 </span></strong><strong><span style="color:#000000;">初始化函数</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据</span><span style="color:#000000;">2.3.2</span><span style="color:#000000;">哈希表初始化思想，初始化函数如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">//</span><span style="color:#008000;">初始化HashTable</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">void</span><span style="color:#000000;"> htInit(htItem **ht, </span><span style="color:#0000ff;">uint</span><span style="color:#000000;"> length){<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">int</span><span style="color:#000000;"> i;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">for</span><span style="color:#000000;"> (i = </span><span style="color:#800080;">0</span><span style="color:#000000;">; i&lt;length; i++)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        ht[i] = (htItem*)</span><span style="color:#0000ff;">malloc</span><span style="color:#000000;">(</span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(htItem));</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        memset(ht[i], </span><span style="color:#800080;">0</span><span style="color:#000000;">, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(htItem));</span><span style="color:#008000;">//</span><span style="color:#008000;">用来对一段内存空间全部设置为某个字符</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    ht[</span><span style="color:#800080;">0</span><span style="color:#000000;">]-&gt;fid = length;</span><span style="color:#008000;">//</span><span style="color:#008000;">第一个存长度</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.3.2 </span></strong><strong><span style="color:#000000;">判断哈希值所在哈希表槽位</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据2.3.2判断哈希值所在哈希表槽位的思想，代码如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">// get the index of hash table  </span><span style="color:#008000;">根据得到的hash值选择一个槽位置</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">uint</span><span style="color:#000000;"> htIndex(</span><span style="color:#0000ff;">char</span><span style="color:#000000;"> *key, htItem **ht){<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> hashedKey = bkdrHash(key);</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> length = (ht[</span><span style="color:#800080;">0</span><span style="color:#000000;">]-&gt;fid - </span><span style="color:#800080;">1</span><span style="color:#000000;">);</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">return</span><span style="color:#000000;"> (</span><span style="color:#0000ff;">uint</span><span style="color:#000000;">)hashedKey % length + </span><span style="color:#800080;">1</span><span style="color:#000000;">; </span><span style="color:#008000;">//char</span><span style="color:#008000;">转整数哈希值再用哈希函数定位槽位</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">    //0</span><span style="color:#008000;">号位存长度，对长度取余加1，一定落在槽位内</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">其中bkdrHash(key)函数为：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">uint</span><span style="color:#000000;"> bkdrHash(</span><span style="color:#0000ff;">char</span><span style="color:#000000;"> *key)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> seed = </span><span style="color:#800080;">131</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> hash = </span><span style="color:#800080;">0</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">while</span><span style="color:#000000;"> (*key != </span><span style="color:#800000;">'\n'</span><span style="color:#000000;"> &amp;&amp; *key != </span><span style="color:#800080;">0</span><span style="color:#000000;">)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">//</span><span style="color:#008000;">通常使用时，判别条件为*key != 0即可，此处的*key != '\n'是因程序需要</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        <a name="_Hlk57843892" title="hash = hash * seed + (*key++);">hash = hash * seed + (*key++);</a></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    }</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">return</span><span style="color:#000000;"> (hash &amp; </span><span style="color:#800080;">0x7FFFFFFF</span><span style="color:#000000;">);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.3.3 </span></strong><strong><span style="color:#000000;">哈希表插入元素与删除元素</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据</span><span style="color:#000000;">2.3.2</span><span style="color:#000000;">哈希表插入元素与删除元素算法思想，以插入为例代码如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">uint</span><span style="color:#000000;"> htSet(</span><span style="color:#0000ff;">char</span><span style="color:#000000;"> *key, </span><span style="color:#0000ff;">uint</span><span style="color:#000000;"> fid,</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> password, htItem **ht){<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> i = htIndex(key, ht);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    htItem *item = ht[i];</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">while</span><span style="color:#000000;"> (item-&gt;next)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#008000;">//</span><span style="color:#008000;">已经存在的话则直接更新值</span></p> 
<p style="margin-left:0;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (strcmp(key, item-&gt;next-&gt;key_string) == </span><span style="color:#800080;">0</span><span style="color:#000000;">){<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">            item-&gt;next-&gt;fid = fid;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">            item-&gt;next-&gt;password = password;</span></p> 
<p style="margin-left:0;text-align:left;">            <span style="color:#0000ff;">return</span> <span style="color:#800080;">0</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        }</span><span style="color:#0000ff;">else</span><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">            item = item-&gt;next;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    }</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#008000;">//</span><span style="color:#008000;">处理冲突元素</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    item-&gt;next = (htItem*)</span><span style="color:#0000ff;">malloc</span><span style="color:#000000;">(</span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(htItem));</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">item-&gt;next-&gt;fid = fid;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">item-&gt;next-&gt;password = password;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    item-&gt;next-&gt;key_string = key;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    item-&gt;next-&gt;next = NULL;</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">return</span> <span style="color:#800080;">0</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.3.4 </span></strong><strong><span style="color:#000000;">哈希表查找元素</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据2.3.2哈希表查找元素思想，代码如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">//get hashTable elements </span><span style="color:#008000;">进行对应的hash值的搜索，如果找到则返回该节点</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">htItem* htGet(</span><span style="color:#0000ff;">char</span><span style="color:#000000;"> *key, htItem **ht)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> i = htIndex(key, ht);</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    htItem *item = ht[i]-&gt;next;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    htItem *tmp = (htItem*)</span><span style="color:#0000ff;">malloc</span><span style="color:#000000;">(</span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(htItem));</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    memset(tmp, </span><span style="color:#800080;">0</span><span style="color:#000000;">, </span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(htItem));</span><span style="color:#008000;">//  </span><span style="color:#008000;">内存空间初始化 </span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">while</span><span style="color:#000000;"> (item)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (strcmp(key, item-&gt;key_string) == </span><span style="color:#800080;">0</span><span style="color:#000000;">){<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">            <span style="color:#0000ff;">return</span><span style="color:#000000;"> item;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">            tmp-&gt;fid = item-&gt;fid;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">            tmp-&gt;key_string = item-&gt;key_string;</span></p> 
<p style="margin-left:0;text-align:left;">            <span style="color:#0000ff;">return</span><span style="color:#000000;"> tmp;</span><span style="color:#008000;">// </span><span style="color:#008000;">返回地址</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        }</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">        item = item-&gt;next;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    }</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">return</span><span style="color:#000000;"> NULL;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">3.3.5 </span></strong><strong><span style="color:#000000;">返回所有元素个数与打印全部元素</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">根据2.3.2哈希表计算所有元素思想和打印所有元素思想，以计算所有元素个数为例，代码如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">// get element number in the hashtable </span><span style="color:#008000;">所有元素总和个数</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#008000;">//</span><span style="color:#008000;">遍历所有槽位和对应槽位冲突的元素</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">uint</span><span style="color:#000000;"> htLen(htItem **ht)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> alength = ht[</span><span style="color:#800080;">0</span><span style="color:#000000;">]-&gt;fid;</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">uint</span><span style="color:#000000;"> i, length = </span><span style="color:#800080;">0</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#0000ff;">for</span><span style="color:#000000;"> (i = </span><span style="color:#800080;">1</span><span style="color:#000000;">; i &lt; alength; i++)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:0;text-align:left;">        <span style="color:#0000ff;">if</span><span style="color:#000000;"> (ht[i]-&gt;next)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">            length++;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">    }</span></p> 
<p style="margin-left:0;text-align:left;">    <span style="color:#0000ff;">return</span><span style="color:#000000;"> length;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">4 </span></strong><strong><span style="color:#000000;">调试分析</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">4.1 </span></strong><strong><span style="color:#000000;">测试数据</span></strong></span></p> 
<p style="margin-left:0;text-align:center;"></p> 
<p style="margin-left:0;text-align:center;"><span style="background-color:#ffffff;"><span style="color:#000000;">图6 测试</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">特意输入错误值使得验证失败后正确验证，体现人机验证的作用。依次进行开户销户功能，保留一个账号20191683，密码131452,存取功能存500元，显示余额为500，取款功能取200显，显示余额为300。经查询余额为300与前面相符</span><span style="color:#000000;">。</span></span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="629" src="https://images2.imgbox.com/41/d6/dLPQHT1s_o.png" width="650"><span style="background-color:#ffffff;"><span style="color:#000000;"> </span></span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="601" src="https://images2.imgbox.com/fc/f8/j2jhwbCd_o.png" width="674"></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="248" src="https://images2.imgbox.com/cc/e2/qLwzGsPY_o.png" width="646"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">利用测试模块，功能选择输入未在列表中展示的54321，超级管理员密码为54321，自动模拟输入120个数据，其中哈希表主槽位120，一定产生冲突，然后再功能选择输入未在列表中展示的12345，超级管理员密码为12345，展示所有元素，显示数据为120条，结果正确。</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="1011" src="https://images2.imgbox.com/42/22/wr8VhBv2_o.png" width="667"></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="1023" src="https://images2.imgbox.com/63/41/GfL42p5a_o.png" width="659"></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="1010" src="https://images2.imgbox.com/5e/11/14PmXaZv_o.png" width="749"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">4.2 </span></strong><strong><span style="color:#000000;">调试与分析</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">问题1 ：最开始申请内存为sp=(char *)malloc(sizeof(char)); 虽然达到可变空间的目的，但是考虑到不安全，实际申请1个char空间， 其他空间不一定没用，和char *p；直接用赋值是一样的错误，问题1应改为sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));其中ACCOUNT_NUM可用define预设。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">问题2：for{ scanf(sp); htSet(sp, tempmoney, item);}未申请空间，无论输入多少都是一个记录，结合问题1，因为没用申请空间，所以所有元素都覆盖在一个未知空间，问题2应在循环中加入申请空间。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">问题3：do{scanf("%d", &amp;funChoose); switch(funChoose){}；}while{}输入1个数字非法字符，显示非法输入，正确；输入1个字母，就死循环，通过询问别人，加个getchar();吸收字符，解决；发现输入1个字符串就会空出字符串长度个循环，问题3应为while(getchar() != '\n')。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">问题4：uint fid; int password;//卫星值为了使哈希表数据域存储两个数据值密码password和余额fid，起初未声明空间，导致一直报错，最后检查，发现问题所在，修改代码。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">时间复杂度为O(1)，其他调试问题因篇幅所限就不在此一一列出，多数错误产生的原因因为对C语言理解不够透彻。通过查阅书籍笔记和讨论都有所解决。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">4.3 </span></strong><strong><span style="color:#000000;">算法改进</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;">　　<span style="color:#000000;">算法中并未加入载荷因子，下一步改进可从数据结构方面，加入载荷因子，实现自动扩容，提高效率。程序用C语言编写，并未涉及对文件的操作，所有存储均在内存进行，仅体现结构思想，下一步从C语言方面，可添加文件映射，提高实用性。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">5</span></strong><strong><span style="color:#000000;">小结</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">刚收到这个课题名称及课程要求时，在学过了线性表及后续课程第一想法就是利用线性表来做这个课题。但是考虑到线表在查找及插入删除的矛盾后，我认为这并不是一个非常完美的方案。最终在最后一节课学习哈希表之后，我决定用哈希表进行课题研究。利用BKDRHash对字符串进行散列，得到一个整数的hash值，尽可能的减少了冲突，发生冲突时，利用链表形式，减少了哈希再生，减小了查找时间复杂度。想法是这么个想法，但是实施起来并不是十分的顺利。通过查找资料并未发现利用哈希表进行此课题活期存储账目管理的研究方案，只有类似与此课题的其他方案，没有了先人探路，一切进行的都十分艰难。在现有要求基础上，还增加了类似于人机验证，密码验证等其他功能，一切都需要查找资料，书写代码后与整个程序适配进行调试，才能够顺利使用。可以说整个过程都不是十分的容易。但是通过整个课题的研究，重新学习了许多东西，留意到许多之前并不曾注意的地方。其中最主要的是掌握了数据存储多个记录的方法及声明，为后续学习记录多条记录值打下基础。整个调试过程中，因为头文件未声明数据域的空间及存储类型，导致程序一直大量报错。在修改错误的过程中逐渐了解并掌握各种错误类型。能够识别并修正各种常见错误，为后续代码工作打下基础。也从中体会到程序员书写代码的辛苦，对于某一错误需要修改大量的代码，并且需要足够细心及耐心的进行查错。另外一方面，对于if while ，do while等循环语句有了更深入的了解。之前只是纸上谈兵的讨论，其功能与作用如今实际使用起来与理想中的具有一定偏差，需要不断的尝试才能够掌握起作用。这也告诉我们，在学习数据结构这门课程时，对于各种各样的算法及语句需要实际操作去探寻其真正意义的工作原理和作用。一味的靠他人讲解或电子教案的演示，无法真正的领悟其精髓，后续也就不能够正确的使用。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">通过本次课程设计，最主要的是对哈希表有了更进一步的理解，哈希表是一个数据结构，哈希表本质上是个数组，只能说它的底层实现是用到了数组，简单点说，在数组的这个基础上再加工加工，变得更加有特色了，然后就自立门户，叫哈希表。一般来说啊，实现哈希表我们可以采用两种方法：数组+链表、数组+二叉树，无论哪个都是必须有数组啊，都是再数组的基础上取搞其他的，而且比如第一种数组+链表的形式，本质上是出现哈希冲突的一种解决办法，使用链表存放，所以综合起来叫做数组+链表的方式来实现一个哈希表，另外数组中一般就是存放的单一的数据，而哈希表中存放的是一个键值对，这是就是区别！哈希函数的设计很重要，一个好的哈希函数可以极大的提升性能。其中最重要的部分是如何散列，本设计是用已有技术调用BKDRHash字符串散列，采用hash = hash * seed + (*key++);有效地避免了冲突。具有高效性。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="color:#000000;">参考文献：</span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[1]</span><span style="color:#000000;">耿国华，张德同，周明全.数据结构—用C语言描述（第2版）[J].计算机教育,2015（7）.</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[2]</span><span style="color:#000000;">严蔚敏,李冬梅,吴伟民.数据结构(C语言版)[J].计算机教育,2012(12):62.</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[3]Thomas H.Cormen,Charles E.Leiserson,Ronald L.Rivest,Clifford Stein,</span><span style="color:#000000;">殷建平,徐云,王刚,刘晓光,苏明,邹恒明,王宏志.算法导论(原书第3版)[J].计算机教育,2013(10):51.</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[4] wiki.</span><span style="color:#000000;">《Hash table》.</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">https://en.wikipedia.org/wiki/Hash_table.2019</span><span style="color:#000000;">年5月20访问</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[5]Mr.Wang.</span><span style="color:#000000;">《HashMap 在 Java1.7 与 1.8 中的区别》.</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">https://www.cnblogs.com/justlove/p/7624455.html.2019</span><span style="color:#000000;">年5月20访问</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[6]</span><span style="color:#000000;">灵剑.《hash算法的数学原理是什么，如何保证尽可能少的碰撞？》.</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">https://www.zhihu.com/question/20507188.2019</span><span style="color:#000000;">年5月20访问</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">[7]</span> <span style="color:#000000;">ithuangqing. </span><span style="color:#000000;">《来吧！一文彻底搞定哈希表！》</span></span></p> 
<p style="margin-left:0;text-align:justify;"><a href="https://blog.csdn.net/sinat_33921105/article/details/103344078" title="来吧！一文彻底搞定哈希表！_庆哥Java的CSDN技术博客-CSDN博客">来吧！一文彻底搞定哈希表！_庆哥Java的CSDN技术博客-CSDN博客</a>.</p> 
<pre><code>/*
       作者：
           王金华
           
       功能：
           哈希表实现活期储蓄帐目管理
           
       具体要求：    
           数据结构课程设计活期储蓄帐目管理（哈希表）
          活期储蓄处理中，储户开户、销户、存入、支出活动频繁，系统设计要求：
              1)能比较迅速地找到储户的帐户，以实现存款、取款记账；
              2)能比较简单，迅速地实现插入和删除，以实现开户和销户的需要。 
             
      文件脉络:
          part1  头文件及结构体定义
          part2  函数声明 
                       数据结构型函数声明 
                       功能实现型函数声明 
          part3   main函数 
          part4   能实现型函数        
          part5   数据结构型函数  
  */ 
 
 
  //———————part1——————————————
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;memory.h&gt;
 #include &lt;string.h&gt;
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;//rand()：//随机数生成器；
 #include &lt;time.h&gt;//需要导入一个时间头文件；
 #define ACCOUNT_NUM  8  //账号位数  
 typedef unsigned int uint; //哈希表元素
 typedef struct _htItem
 {
      struct _htItem  *next;//冲突时下一个 
      char *key_string;//
      uint fid;
	  int password;//卫星值
 }  htItem;
 
 //--------part2-------------
 //---------下面是数据结构型函数声明------------- 
 void htInit(htItem **ht, uint length);// 构造函数，申请哈希表的空间
 uint htSet(char *key, uint val,int va2, htItem **ht);//向哈希表中插入一个值
 htItem* htGet(char *key, htItem **ht);//从哈希表中获得一个对应的key
 int htDel(char *key, htItem **ht);//从哈希表中删除一个key
 uint bkdrHash(char *key);//对string进行散列得到一个整数值
 uint htIndex(char *key, htItem **ht);//根据key计算一个整数值，然后获得对应的槽位索引
 uint htLen(htItem **ht);//求哈希表元素数
 void print_hashTable(htItem **ht);//打印哈希表，测试
 //-------下面是功能实现型函数声明--------- 
 void funFakeUI();//伪界面，为了使界面美观设计的伪UI
 int funOpenAccount(htItem **ht);//开户函数
 int funDelAccount(htItem **ht);//销户函数
 int funAddDelMoney(htItem **ht);//存款取款的流水操作
 int funSearch(htItem **ht);//查询余额操作
 int funTestDisplay(htItem **ht);//超级管理员测试，打印所有数据 
 int funTestInput(htItem **ht);//超级管理员测试，模拟输入数据120个数据，一定冲突
 
  
 //-------part3--------------
 int main(void)
 {
     system("color F0\n"); // 白底黑字
	 htItem *item[101];
     htInit(item, 101);//初始化
     int funChoose = 0;
     funFakeUI();//伪UI 
     do
	 {
         printf("\n\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n");
         printf("\n\t请选择功能：1:开户 2:销户 3:存取 4:查询 5:退出\n\t功能选择：  ");
         funChoose = 0;
         scanf("%d", &amp;funChoose);
     //    getchar();    //吸收单个字符 
         while(getchar() != '\n'); //吸收字符串非法字符，否则死循环 
         switch(funChoose){
             case 1:
                 funOpenAccount(item);
                 break;
            case 2:
                 funDelAccount(item);
                 break;
             case 3:
                 funAddDelMoney(item);
                 break; 
             case 4:
                 funSearch(item);
                 break;
             case 5:
                 printf("\n\t欢迎再次使用！\n");
                 return 0;
             case 54321://测试项,模拟输入120个数据，一定冲突 
                 funTestInput(item);
                 break; 
             case 12345://测试项,展示所有数据 
                 funTestDisplay(item);
                 break;
             default:
                 printf("\n\t非法操作！");
         } 
     }while(funChoose != 5);
 }    
 
 
 //------part4 功能实现型函数-----------
 /*******************************/ 
 //伪UI 
 void funFakeUI()
 {
     printf("\n\n----------------欢迎使用活期储蓄帐目管理模拟程序----------------\n");//more to develop 
 }
 
 /********************************/ 
 //开户 
 int funOpenAccount(htItem **ht)
 {
     //人机验证
    int n,m,num1,num2,x;
    long s;
    char c;
     srand((unsigned) time(NULL));//用时间做种子，每次产生的随机序列不同；
     num1=rand()%10+1;
     num2=rand()%10+1;
     x=rand()%3;
     switch(x)
     {
        case 0:c='+';s=num1+num2;break;
        case 1:c='-';s=num1-num2;break;
        default:c='*';s=num1*num2;
     }
     printf("\t\t请先进行人机验\n\t\t%d%c%d=",num1,c,num2);
     scanf("%d",&amp;n);
     if(n==s)
         m=1;
     else
		 m=-1;

	 //printf("fun  开户 begin\n");
    while (m==1)
    {
	 int iAccountAdd,iAccountAddSum;
     printf("\n\n\t请输入预开户账号总数\n\t本次开户总数：");
     scanf("%d",&amp;iAccountAddSum);
     for(iAccountAdd=0; iAccountAdd&lt;iAccountAddSum; iAccountAdd++) 
	 { 
         printf("\n\t\t请输入预开户%d的8位数账号：\n",iAccountAdd+1);
         char *sp;
         sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));
         int tempmoney=0;
		 int temppassword,temppassword1;
         printf("\t\t预开户账号：");
         scanf("%s",sp);
         if (htGet(sp, ht))
		 {
             //检查账户是否存在 
             printf("\t\t该账户已存在!\n\t\t------------------------------"); 
             continue;
             //break;
             //return 0; 
         } 
		 printf("\t\t请输入6位数密码：");
         scanf("%d",&amp;temppassword);
		 printf("\t\t请再次确认密码：");
         scanf("%d",&amp;temppassword1);
         do{
			 if (temppassword==temppassword1)
			 {
		      htSet(sp, tempmoney, temppassword, ht);
              printf("\t\t开户完成!\n\t\t------------------------------");
			 }
			 else
			 {
				 printf("两次密码不匹配！请重新输入！\n");
				 printf("\t\t请输入6位数密码：");
		         scanf("%s",&amp;temppassword);
		         printf("请确认密码\n");
		         scanf("%s",&amp;temppassword1);
			 }
		 }while(0);
		 continue;

	 }
	 return 0;
	}
    printf("\t\t验证失败!\n\t\t------------------------------");
    //    printf("\t系统所有开户信息为：\n");
    //    print_hashTable(ht);    
    //    printf("fun  开户 end\n\n\n");    
    return 0;
 }

 
 /*******************************/ 
 //销户 
 int funDelAccount(htItem **ht)
 {
 //    printf("fun  销户 begin\n");
     int iAccountDel,iAccountDelSum;
     printf("\n\t请输入本次销户账号总数：\n\t销户总数：");
     scanf("%d",&amp;iAccountDelSum);
     printf("\n\t友情提示，谨慎操作！\n\n");
     for(iAccountDel=0; iAccountDel&lt;iAccountDelSum; iAccountDel++) 
	 {     
         printf("\n\t\t请输入预销户%d的账号：\n",iAccountDel+1);
         char *sp;
		 int temppassword;
         sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));
         int tempmoney;
         printf("\t\t预销户账号：");
         scanf("%s",sp);		 
         htItem *tmp;
		 if (tmp = htGet(sp, ht))
		 {
             printf("\t\t请输入6位数密码：");
             scanf("%d",&amp;temppassword);
			 if ( temppassword==tmp-&gt;password )
			 {
                 if(tmp-&gt;fid&gt;0)
			{
			printf("\t\t用户 %s 的余额为￥%d ，请取出余额后再进行销户\n", tmp-&gt;key_string, tmp-&gt;fid);
			continue;
			}
                 else
			{
                     htDel(sp, ht);
                     free(sp);
                     printf("\t\t销户成功！\n");
					 continue;
			} 
			}
			else 
			{   
				printf("\t\t密码不正确，请再次输入！\n");
			     printf("\t\t请输入6位数密码：");
                            scanf("%d",&amp;temppassword);
		}
			if ( temppassword=tmp-&gt;password )
			{
                 if(tmp-&gt;fid&gt;0)
			printf("\t\t用户 %s 的余额为￥%d ，请取出余额后再进行销户\n", tmp-&gt;key_string, tmp-&gt;fid);
                 else
			{
                     htDel(sp, ht);
                     free(sp);
                     printf("\t\t销户成功！\n");
			} 
			}
			 else
			 {
				 printf("\t\t操作失败，请重试！\n");
			     continue;
			 }
		 }
		 else
             printf("\t\t没有此用户! 请确认信息重新操作\n");
             printf("\t\t-----------------------------------------\n");
     } 
     //    printf("\t系统所有开户信息为：\n");
     //    print_hashTable(ht);    
     //    printf("fun  销户 end\n\n\n");    
     return 0; 
 }
 
 
 /**********************************/ 
 //存取流水 
 int funAddDelMoney(htItem **ht)
 {
     //printf("fun  流水 begin\n\n\n");    
     printf("\n\t请输入预存取的账号： ");
     char *spAD;
	 int temppassword;
     spAD=(char *)malloc(ACCOUNT_NUM*sizeof(char));
     scanf("%s",spAD);
	 htItem *tmp;
	 tmp=htGet(spAD, ht);
     //htItem *tmpTestNull; 
     if (!tmp)
	 {
         printf("\t没有此用户! 请确认信息重新操作\n");
         return 0;
     }
	 printf("\t请输入6位数密码：");
     scanf("%d",&amp;temppassword);
	 if ( temppassword==tmp-&gt;password )
	 {
         printf("\t请输入流水类型：\t1:存款 2:取款\n\t流水类型： ") ;
         int ADkind;
         scanf("%d", &amp;ADkind);
         printf("\t请输入存取的金额：");
         int moneyAD = 0;
	 int passAD;
         scanf("%d",&amp;moneyAD);
         htItem *tmp = htGet(spAD, ht);
         switch(ADkind)
		 {
             case 1: 
                 moneyAD = moneyAD +  (tmp-&gt;fid);
			     passAD=tmp-&gt;password;
                 htSet(spAD, moneyAD, passAD, ht);
                 printf("\t存款成功\n");
			     tmp = htGet(spAD, ht);
			     printf("\t用户 %s 的余额为￥ %d \n", tmp-&gt;key_string, tmp-&gt;fid);
                 break;
             case 2: 
                 if((moneyAD = (tmp-&gt;fid) - moneyAD) &gt;= 0)
				 {
                     htSet(spAD, moneyAD, passAD, ht);
                     printf("\t取款成功\n");
					 tmp = htGet(spAD, ht);
			         printf("\t用户 %s 的余额为￥ %d \n", tmp-&gt;key_string, tmp-&gt;fid);
				 }
			 else
                 printf("\t余额不足\n");
                 break;
             default: 
                 printf("\t非法输入\n");
             return 0;
		 }
	 }
	 else
		 printf("\t\t密码不正确，请重试！\n");
         return 0;
     //    printf("系统所有开户信息为：\n");
     //    print_hashTable(ht);    
 }
 
 /****************************/ 
 //查询 
 int funSearch(htItem **ht)
 {
     printf("\n\t请输入要查询的账号：");
         char *sp;
		int temppassword;
         sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));
         scanf("%s",sp);
         htItem *tmp; 		 
         if ( tmp = htGet(sp, ht))
		{
             printf("\t请输入6位数密码：");
             scanf("%d",&amp;temppassword);
	         if ( temppassword=tmp-&gt;password )
			 {
			     if(tmp-&gt;fid&gt;=0)
                     printf("\t用户 %s 的余额为￥ %d \n", tmp-&gt;key_string, tmp-&gt;fid);
                 else
                     printf("\t账户有误\n");
		}
		else
		 printf("\t密码不正确，请重试！\n");
             return 0;
         }
         else
             printf("\t没有此用户! 请确认信息重新操作\n");
		return 0;
 }
 
 /****************************/ 
 //超级管理员测试，打印所有数据
 int funTestDisplay(htItem **ht)
 {
     printf("\n\t\t######################################\n\n\t\t{ 请输入超级管理员密码 }\t") ;
     int pw;
     scanf("%d", &amp;pw);
     while(getchar() != '\n'); //吸收非法字符串 
     if(pw == 12345)
         print_hashTable(ht);
     //return 0;
     printf("\n\t\t######################################\n");
	 return 0;
 }
 
 //超级管理员测试，模拟输入120个数据一定会产生冲突
 int funTestInput(htItem **ht)
 {
     printf("\n\t\t######################################\n\n\t\t{ 请输入超级管理员密码 }\t") ;
     int pw;
     scanf("%d", &amp;pw);
     while(getchar() != '\n'); //吸收非法字符串 
     if(pw == 54321)
	 {//模拟输入120个数据---------------------------------------- 
         int iinput = 0;
         for(iinput=0; iinput&lt;120; iinput++)
		{
             char *sp;
             sp=(char *)malloc(ACCOUNT_NUM*sizeof(char));
             int account = 20190000 + iinput; //模拟账号 
             ltoa(account,sp,10);
		int passAD=000000;
             //  将长整型值转换为字符串  
             //char *__cdecl ltoa(long _Val,char *_DstBuf,int _Radix) __MINGW_ATTRIB_DEPRECATED_MSVC2005;          
			 htSet(sp, iinput, passAD, ht);
         } 
         printf("\n\t\t模拟输入完成\n");
     }
     printf("\n\t\t######################################\n");
	 return 0;
 }
 
 
 
 //--------part5 数据结构型函数--------------------------------/ 
 /***************************/ 
 //初始化HashTable
 void htInit(htItem **ht, uint length)
 {
     int i;
     for (i = 0; i&lt;length; i++)
	 {
         ht[i] = (htItem*)malloc(sizeof(htItem));
         memset(ht[i], 0, sizeof(htItem));//用来对一段内存空间全部设置为某个字符
     }
     ht[0]-&gt;fid = length;//第一个存长度 
 }
 
 /******************************/ 
 //get hashTable elements 进行对应的hash值的搜索，如果找到则返回该节点
 htItem* htGet(char *key, htItem **ht)
 {
     uint i = htIndex(key, ht);
     htItem *item = ht[i]-&gt;next;
     htItem *tmp = (htItem*)malloc(sizeof(htItem));
     memset(tmp, 0, sizeof(htItem));//  内存空间初始化  
     while (item)
	 {
         if (strcmp(key, item-&gt;key_string) == 0)
		 {
             return item;
             tmp-&gt;fid = item-&gt;fid;
             tmp-&gt;key_string = item-&gt;key_string;
             return tmp;// 返回地址 
         }
         item = item-&gt;next;
     }
     return NULL;
 }
 
 /*****************************/ 
 // set hashTable element 插入新的hash值
 uint htSet(char *key, uint fid,int password, htItem **ht)
 {
     uint i = htIndex(key, ht);
     htItem *item = ht[i];
     while (item-&gt;next)
	 {
     //已经存在的话则直接更新值
         if (strcmp(key, item-&gt;next-&gt;key_string) == 0)
		 {
             item-&gt;next-&gt;fid = fid;
			 item-&gt;next-&gt;password = password;
             return 0;
         }
		 else
		 {
             item = item-&gt;next;
         }
     }
     //处理冲突元素 
     item-&gt;next = (htItem*)malloc(sizeof(htItem));
     item-&gt;next-&gt;fid = fid;
     item-&gt;next-&gt;password = password;
     item-&gt;next-&gt;key_string = key;
     item-&gt;next-&gt;next = NULL;
     return 0;
 }
 
 /******************************/ 
 // delete one element of hashtable  删除hash值
 int htDel(char *key, htItem **ht)
 {
     uint i = htIndex(key, ht);
     htItem *item = ht[i];
     while (item-&gt;next)
	 {
         if (strcmp(key, item-&gt;next-&gt;key_string) == 0)
		 {
             htItem *tmp = item-&gt;next;
             item-&gt;next = tmp-&gt;next;
             free(tmp);
             return 0;
         }
         item = item-&gt;next;
     }
     return -1;
 }
 
 /********************************/ 
 //常用字符串哈希函数有 BKDRHash,APHash,DJBHash,JSHash,RSHash,SDBMHash,PJWHash,ELFHash等， 
 // 本程序采用 BKDR hash function  对字符串进行散列，得到一个整数的hash值 
 uint bkdrHash(char *key)
 {
     uint seed = 131;
     uint hash = 0;
     while (*key != '\n' &amp;&amp; *key != 0)
	{
         //通常使用时，判别条件为*key != 0即可，此处的*key != '\n'是因程序需要 
         hash = hash * seed + (*key++);
     }
     return (hash &amp; 0x7FFFFFFF);
 }
 
 /******************************/ 
 // get the index of hash table  根据得到的hash值选择一个槽位置
 uint htIndex(char *key, htItem **ht)
 {
     uint hashedKey = bkdrHash(key);
     uint length = (ht[0]-&gt;fid - 1);
     return (uint)hashedKey % length + 1;    //char转整数哈希值再用哈希函数定位槽位 
     //0号位存长度，对长度取余加1，一定落在槽位内 
 }
 
 /******************************/ 
 // get element number in the hashtable 所有元素总和个数 
 //遍历所有槽位和对应槽位冲突的元素 
 uint htLen(htItem **ht)
 {
     uint alength = ht[0]-&gt;fid;
     uint i, length = 0;
     for (i = 1; i &lt; alength; i++)
	{
         if (ht[i]-&gt;next) 
             length++;
     }
     return length;
 }
 
 /**************************/ 
 // get capacity of hashtable 哈希表主槽容积
 uint htCapacity(htItem **ht)
 {
     return ht[0]-&gt;fid;
 }
 
 
 /****************************/ 
 //print hashTable  打印哈希表     *用于测试 
 void print_hashTable(htItem **ht)
 {
     uint length = ht[0]-&gt;fid;
     uint i;
     htItem *item;
     printf("\n\t\t哈希表所有数据:\n");
 /*  1.遍历主槽，
     2.主槽为null时遍历下一个主槽，
     3.主槽不为null时，打印该元素
     4.检查该元素是否存在冲突元素，即该元素的指针域是否为null 
     5.重复1-4 
 */ 
     for (i = 1; i &lt; length; i++)
	 {
         item = ht[i]-&gt;next;
         while (item)
		 {
             printf("\t\t%s --&gt; %d\n", item-&gt;key_string, item-&gt;fid);
             item = item-&gt;next;
         }
     }
 }
 
 
 //--------文件结束---------
</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"> </span></p> 
<p style="margin-left:0;text-align:left;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/782962400b166ed37c52a4fb65d1ccd6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">操作系统Ucore:Lab2内存管理(六)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b92b2a80fb61edbde65a358b905aa337/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL 占用过高CPU时的优化手段</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>