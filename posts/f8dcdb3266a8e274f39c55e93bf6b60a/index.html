<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LeetCode-题目整理【3】：买卖股票的最佳时机 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LeetCode-题目整理【3】：买卖股票的最佳时机" />
<meta property="og:description" content="买卖股票的最佳时机 都是求最大利润，但是在没有限制，如121和122，动态规划稍微复杂一些，建议不用，到最后两道难题，题目有限制，使用动态规划通过求解子问题的最优解来逐步求解原问题的最优解。
买卖股票的最佳时机 给定一个数组 prices ，它的第 i 个元素 prices[i] 表示一支给定股票第 i 天的价格。 你只能选择 某一天 买入这只股票，并选择在 未来的某一个不同的日子 卖出该股票。设计一个算法来计算你所能获取的最大利润。
返回你可以从这笔交易中获取的最大利润。如果你不能获取任何利润，返回 0 。
示例 1：
输入：[7,1,5,3,6,4]
输出：5
解释：在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。
注意利润不能是 7-1 = 6, 因为卖出价格需要大于买入价格；同时，你不能在买入前卖出股票。
示例 2：
输入：prices = [7,6,4,3,1]
输出：0
解释：在这种情况下, 没有交易完成, 所以最大利润为 0。 func maxProfit(prices []int) int { minPrice := prices[0] maxProfit := 0 for i := 1; i &lt; len(prices); i&#43;&#43; { if prices[i] &lt; minPrice { minPrice = prices[i] } else if prices[i] - minPrice &gt; maxProfit { maxProfit = prices[i] - minPrice } } return maxProfit } //动态规划解答 func maxProfit(prices []int) int { if len(prices) == 0 { return 0 } n := len(prices) dp := make([]int, n) dp[0] = 0 minPrice := prices[0] for i := 1; i &lt; n; i&#43;&#43; { minPrice = min(minPrice, prices[i]) dp[i] = max(dp[i-1], prices[i]-minPrice) } return dp[n-1] } func min(a, b int) int { if a &lt; b { return a } return b } func max(a, b int) int { if a &gt; b { return a } return b } // 使用动态规划来解决这个问题，可以通过定义状态和状态转移方程来求解最大利润。 // 具体步骤如下： // 定义状态：使用一个一维数组 dp 来表示在第 i 天的最大利润，dp[i] 表示第 i 天卖出股票所能获取的最大利润。 // 初始化状态：dp[0] 初始化为 0。 // 状态转移方程：对于第 i 天，可以选择卖出股票或者不卖出股票。如果选择卖出股票，则最大利润为 prices[i] - minPrice，其中 minPrice 表示前 i 天的最低价格。如果选择不卖出股票，则最大利润为前一天的最大利润 dp[i-1]。因此，状态转移方程为 dp[i] = max(dp[i-1], prices[i] - minPrice)。 // 更新最低价格：在更新状态之前，需要将当前价格 prices[i] 和之前的最低价格 minPrice 进行比较，更新最低价格为较小的那个。 // 遍历结束后，返回 dp[n-1]，其中 n 表示数组 prices 的长度。 买卖股票的最佳时机 II" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f8dcdb3266a8e274f39c55e93bf6b60a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-21T16:33:40+08:00" />
<meta property="article:modified_time" content="2024-01-21T16:33:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LeetCode-题目整理【3】：买卖股票的最佳时机</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>买卖股票的最佳时机 都是求最大利润，但是在没有限制，如121和122，动态规划稍微复杂一些，建议不用，到最后两道难题，题目有限制，使用动态规划通过求解子问题的最优解来逐步求解原问题的最优解。</p> 
<blockquote> 
 <ol start="121"><li>买卖股票的最佳时机 给定一个数组 prices ，它的第 i 个元素 prices[i] 表示一支给定股票第 i 天的价格。 你只能选择 某一天 买入这只股票，并选择在 未来的某一个不同的日子 卖出该股票。设计一个算法来计算你所能获取的最大利润。<br> 返回你可以从这笔交易中获取的最大利润。如果你不能获取任何利润，返回 0 。<br> 示例 1：<br> 输入：[7,1,5,3,6,4]<br> 输出：5<br> 解释：在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。<br> 注意利润不能是 7-1 = 6, 因为卖出价格需要大于买入价格；同时，你不能在买入前卖出股票。<br> 示例 2：<br> 输入：prices = [7,6,4,3,1]<br> 输出：0<br> 解释：在这种情况下, 没有交易完成, 所以最大利润为 0。</li></ol> 
</blockquote> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
    minPrice <span class="token operator">:=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    maxProfit <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> minPrice <span class="token punctuation">{<!-- --></span>
            minPrice <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> minPrice <span class="token operator">&gt;</span> maxProfit <span class="token punctuation">{<!-- --></span>
            maxProfit <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> minPrice
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> maxProfit
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token comment">//动态规划解答</span>

<span class="token keyword">func</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token number">0</span>
	<span class="token punctuation">}</span>

	n <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span>
	dp <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
	dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
	minPrice <span class="token operator">:=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		minPrice <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>minPrice<span class="token punctuation">,</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
		dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>minPrice<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> a <span class="token operator">&lt;</span> b <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> b
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> b
<span class="token punctuation">}</span>

<span class="token comment">// 使用动态规划来解决这个问题，可以通过定义状态和状态转移方程来求解最大利润。</span>

<span class="token comment">// 具体步骤如下：</span>

<span class="token comment">// 定义状态：使用一个一维数组 dp 来表示在第 i 天的最大利润，dp[i] 表示第 i 天卖出股票所能获取的最大利润。</span>
<span class="token comment">// 初始化状态：dp[0] 初始化为 0。</span>
<span class="token comment">// 状态转移方程：对于第 i 天，可以选择卖出股票或者不卖出股票。如果选择卖出股票，则最大利润为 prices[i] - minPrice，其中 minPrice 表示前 i 天的最低价格。如果选择不卖出股票，则最大利润为前一天的最大利润 dp[i-1]。因此，状态转移方程为 dp[i] = max(dp[i-1], prices[i] - minPrice)。</span>
<span class="token comment">// 更新最低价格：在更新状态之前，需要将当前价格 prices[i] 和之前的最低价格 minPrice 进行比较，更新最低价格为较小的那个。</span>
<span class="token comment">// 遍历结束后，返回 dp[n-1]，其中 n 表示数组 prices 的长度。</span>

</code></pre> 
<blockquote> 
 <ol start="122"><li>买卖股票的最佳时机 II<br> 给你一个整数数组 prices ，其中 prices[i] 表示某支股票第 i 天的价格。<br> 在每一天，你可以决定是否购买和/或出售股票。你在任何时候 最多 只能持有 一股 股票。你也可以先购买，然后在 同一天 出售。<br> 返回 你能获得的 最大 利润 。<br> 示例 1：<br> 输入：prices = [7,1,5,3,6,4]<br> 输出：7<br> 解释：在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5 - 1 = 4 。<br> 随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6 - 3 = 3 。<br> 总利润为 4 + 3 = 7 。<br> 示例 2：<br> 输入：prices = [1,2,3,4,5]<br> 输出：4<br> 解释：在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5 - 1 = 4 。<br> 总利润为 4 。<br> 示例 3：<br> 输入：prices = [7,6,4,3,1]<br> 输出：0<br> 解释：在这种情况下, 交易无法获得正利润，所以不参与交易可以获得最大利润，最大利润为 0 。</li></ol> 
</blockquote> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>

    maxProfit <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> prices<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
            maxProfit <span class="token operator">+=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> maxProfit
<span class="token punctuation">}</span>

<span class="token comment">// 使用了贪心算法来解决问题，通过每次在价格上升时买入股票，价格下降时卖出股票，从而获取最大利润。</span>

<span class="token comment">// 具体步骤如下：</span>

<span class="token comment">// 初始化最大利润为 0。</span>
<span class="token comment">// 遍历股票价格数组，从第 2 天开始。</span>
<span class="token comment">// 如果当天的股票价格比前一天高，则将差值加入最大利润中。</span>
<span class="token comment">// 遍历结束后，返回最大利润。</span>
<span class="token comment">// 这种方法的思路是，当股票价格上涨时，我们可以在价格上涨期间多次买入和卖出，从而获取更多的利润。而当股票价格下跌时，我们不进行任何操作。</span>
</code></pre> 
<pre><code class="prism language-go"><span class="token comment">//动态规划</span>

<span class="token keyword">func</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>

    n <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span>
    buy <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// 当前持有股票的最大利润</span>
    sell <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token comment">// 当前不持有股票的最大利润</span>

    <span class="token comment">// 初始化第一天的情况</span>
    buy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    sell<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 当前持有股票的最大利润，要么继续保持前一天的状态，要么今天买入</span>
        buy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>buy<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sell<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment">// 当前不持有股票的最大利润，要么继续保持前一天的状态，要么今天卖出</span>
        sell<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>sell<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> buy<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 最终返回最后一天不持有股票的最大利润</span>
    <span class="token keyword">return</span> sell<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> b
<span class="token punctuation">}</span>


<span class="token comment">// 使用动态规划来解决。</span>
<span class="token comment">// 具体步骤如下：</span>

<span class="token comment">// 定义状态：使用两个一维数组 buy 和 sell 来分别表示在第 i 天持有股票和不持有股票时的最大利润。buy[i] 表示第 i 天持有股票时的最大利润，sell[i] 表示第 i 天不持有股票时的最大利润。</span>
<span class="token comment">// 初始化状态：buy[0] 初始化为 -prices[0]，表示第 0 天持有股票的最大利润；sell[0] 初始化为 0，表示第 0 天不持有股票的最大利润。</span>
<span class="token comment">// 状态转移方程：对于第 i 天，如果选择持有股票，则最大利润为前一天持有股票的最大利润 buy[i-1] 或者前一天不持有股票的最大利润减去当天的股价 sell[i-1] - prices[i] 中的较大值；如果选择不持有股票，则最大利润为前一天不持有股票的最大利润 sell[i-1] 或者前一天持有股票的最大利润加上当天的股价 buy[i-1] + prices[i] 中的较大值。因此，状态转移方程为 buy[i] = max(buy[i-1], sell[i-1] - prices[i])，sell[i] = max(sell[i-1], buy[i-1] + prices[i])。</span>
<span class="token comment">// 遍历数组结束后，返回 sell[n-1]，其中 n 表示数组 prices 的长度。</span>
</code></pre> 
<blockquote> 
 <ol start="123"><li>买卖股票的最佳时机 III<br> 给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。<br> 设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。<br> 注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。<br> 示例 1:<br> 输入：prices = [3,3,5,0,0,3,1,4]<br> 输出：6<br> 解释：在第 4 天（股票价格 = 0）的时候买入，在第 6 天（股票价格 = 3）的时候卖出，这笔交易所能获得利润 = 3-0 = 3 。<br> 随后，在第 7 天（股票价格 = 1）的时候买入，在第 8 天 （股票价格 = 4）的时候卖出，这笔交易所能获得利润 = 4-1 = 3 。<br> 示例 2：<br> 输入：prices = [1,2,3,4,5]<br> 输出：4<br> 解释：在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。<br> 注意你不能在第 1 天和第 2 天接连购买股票，之后再将它们卖出。<br> 因为这样属于同时参与了多笔交易，你必须在再次购买前出售掉之前的股票。<br> 示例 3：<br> 输入：prices = [7,6,4,3,1]<br> 输出：0<br> 解释：在这个情况下, 没有交易完成, 所以最大利润为 0。<br> 示例 4：<br> 输入：prices = [1]<br> 输出：0</li></ol> 
</blockquote> 
<pre><code class="prism language-go"><span class="token comment">//动态规划</span>

<span class="token keyword">func</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token number">0</span>
	<span class="token punctuation">}</span>

	buy1 <span class="token operator">:=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	sell1 <span class="token operator">:=</span> <span class="token number">0</span>
	buy2 <span class="token operator">:=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	sell2 <span class="token operator">:=</span> <span class="token number">0</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		buy1 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>buy1<span class="token punctuation">,</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
		sell1 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>sell1<span class="token punctuation">,</span> buy1<span class="token operator">+</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
		buy2 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>buy2<span class="token punctuation">,</span> sell1<span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
		sell2 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>sell2<span class="token punctuation">,</span> buy2<span class="token operator">+</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> sell2
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> b
<span class="token punctuation">}</span>

<span class="token comment">// 可以使用动态规划来解决。</span>

<span class="token comment">// 具体步骤如下：</span>

<span class="token comment">// 定义状态：使用四个变量 buy1、sell1、buy2、sell2 来分别表示第一次买入、第一次卖出、第二次买入、第二次卖出时的最大利润。</span>
<span class="token comment">// 初始化状态：buy1 初始化为 -prices[0]，表示第一次买入的最大利润；sell1、buy2、sell2 初始化为 0。</span>
<span class="token comment">// 状态转移方程：对于第 i 天，我们可以选择买入第一次、卖出第一次、买入第二次、卖出第二次或者不进行任何操作。因此，状态转移方程为：</span>
<span class="token comment">// buy1 = max(buy1, -prices[i])，第一次买入的最大利润为前一天买入的最大利润 buy1 或者今天买入的价格 -prices[i] 中的较大值。</span>
<span class="token comment">// sell1 = max(sell1, buy1 + prices[i])，第一次卖出的最大利润为前一天卖出的最大利润 sell1 或者今天卖出的价格加上第一次买入的最大利润 buy1 + prices[i] 中的较大值。</span>
<span class="token comment">// buy2 = max(buy2, sell1 - prices[i])，第二次买入的最大利润为前一天买入的最大利润 buy2 或者今天买入的价格 -prices[i] 加上第一次卖出的最大利润 sell1 中的较大值。</span>
<span class="token comment">// sell2 = max(sell2, buy2 + prices[i])，第二次卖出的最大利润为前一天卖出的最大利润 sell2 或者今天卖出的价格加上第二次买入的最大利润 buy2 + prices[i] 中的较大值。</span>
<span class="token comment">// 遍历结束后，返回 sell2，即最大利润。</span>
</code></pre> 
<blockquote> 
 <ol start="188"><li>买卖股票的最佳时机 IV<br> 给你一个整数数组 prices 和一个整数 k ，其中 prices[i] 是某支给定的股票在第 i 天的价格。<br> 设计一个算法来计算你所能获取的最大利润。你最多可以完成 k 笔交易。也就是说，你最多可以买 k 次，卖 k 次。<br> 注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。<br> 示例 1：<br> 输入：k = 2, prices = [2,4,1]<br> 输出：2<br> 解释：在第 1 天 (股票价格 = 2) 的时候买入，在第 2 天 (股票价格 = 4) 的时候卖出，这笔交易所能获得利润 = 4-2 = 2 。<br> 示例 2：<br> 输入：k = 2, prices = [3,2,6,5,0,3]<br> 输出：7<br> 解释：在第 2 天 (股票价格 = 2) 的时候买入，在第 3 天 (股票价格 = 6) 的时候卖出, 这笔交易所能获得利润 = 6-2 = 4 。<br> 随后，在第 5 天 (股票价格 = 0) 的时候买入，在第 6 天 (股票价格 = 3) 的时候卖出, 这笔交易所能获得利润 = 3-0 = 3 。</li></ol> 
</blockquote> 
<pre><code class="prism language-go"><span class="token comment">//动态规划</span>

<span class="token keyword">func</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">,</span> prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token number">0</span>
	<span class="token punctuation">}</span>

<span class="token comment">// 定义了一个辅助函数 maxProfitUnlimited 来计算不限制交易次数时的最大利润。</span>
	<span class="token keyword">if</span> k <span class="token operator">&gt;=</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">maxProfitUnlimited</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	dp <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		buy <span class="token operator">:=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
			dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>buy<span class="token punctuation">)</span>
			buy <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>buy<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 和122. 买卖股票的最佳时机 II 使用贪心解法一样</span>
<span class="token comment">// 定义了一个辅助函数 maxProfitUnlimited 来计算不限制交易次数时的最大利润。</span>
<span class="token keyword">func</span> <span class="token function">maxProfitUnlimited</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	profit <span class="token operator">:=</span> <span class="token number">0</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> prices<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
			profit <span class="token operator">+=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> profit
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">max</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> x <span class="token operator">&gt;</span> y <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> x
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> y
<span class="token punctuation">}</span>

<span class="token comment">// 可以使用动态规划来解决。</span>
<span class="token comment">// 定义一个二维数组 dp，其中 dp[i][j] 表示在第 i 天进行了 j 笔交易的最大利润。</span>
<span class="token comment">// 具体步骤如下：</span>

<span class="token comment">// 初始化 dp 为一个大小为 (len(prices), k+1) 的二维数组，所有元素初始化为 0。</span>
<span class="token comment">// 对于每一天 i，对于每一笔交易次数 j：</span>
<span class="token comment">// 如果 j = 0，表示没有交易，利润为 0。</span>
<span class="token comment">// 如果 i = 0，表示第一天，利润为 0。</span>
<span class="token comment">// 否则，根据以下两种情况来更新 dp[i][j]：</span>
<span class="token comment">// 第一种情况是在第 i 天不进行交易，即 dp[i][j] = dp[i-1][j]。</span>
<span class="token comment">// 第二种情况是在第 i 天进行交易，即在前 i-1 天进行了 j-1 笔交易，然后在第 i 天买入股票，再在第 i 天卖出股票，即 dp[i][j] = dp[i-1][j-1] + prices[i] - prices[i-1]。</span>
<span class="token comment">// 返回 dp[len(prices)-1][k]，即为最大利润。</span>

<span class="token comment">// 在这个解法中，首先判断特殊情况，如果 k = 0 或者 prices 数组为空，直接返回 0。</span>
<span class="token comment">// 然后，初始化二维数组 dp，并且对于每一天和每一笔交易次数，根据上述的两种情况来更新 dp。</span>
<span class="token comment">// 最后，返回 dp[len(prices)-1][k]，即为最大利润。</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2bbea9d3057bb842cec4c19ad556e0d8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于springboot的二手物品交易的设计与实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/40d8e38f35c082637c0b9e69afc7925b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">二叉树相关问题解决思路</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>