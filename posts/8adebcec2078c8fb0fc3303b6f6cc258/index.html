<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SecureRandom生成随机数-验证码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SecureRandom生成随机数-验证码" />
<meta property="og:description" content="目录
一、生成随机数的方法
二、SecureRandom
三、常见使用
四、各种实现及结果验证
五、常见及相关问题总结
一、生成随机数的方法 Math.random（）一随机数 java.util.Random伪随机数（线性同余法生成） java.security.SecureRandom真随机数 二、SecureRandom SecureRandom使用 （1）指定算法名称 仅指定算法名称： SecureRandom random= SecureRandom.getInstance(&#34;SHA1PRNG&#34;); //系统将确定环境中是否有所请求的算法实现，是否有多个，是否有首选实现。 既指定了算法名称又指定了包提供程序: SecureRandom random= SecureRandom.getInstance(&#34;SHA1PRNG&#34;,&#34;RUN&#34;); //系统将确定在所请求的包中是否有算法实现；如果没有，则抛出异常。 （2）获取SecureRandom对象后，生成随机数 Integer randNum = random.nextInt();//生成10位数的随机数 Integer randNum = random.nextInt(100);//生成0~99的随机数 三、常见使用 1）生成6为随机验证码
SecureRandom secureRandom = SecureRandom.getInstance(&#34;SHA1PRNG&#34;); String verifyCode = String.valueOf(secureRandom.nextInt(900000) &#43; 100000); 四、各种实现及结果验证 package com.basic; import java.security.NoSuchAlgorithmException; import java.security.NoSuchProviderException; import java.security.SecureRandom; import java.util.ArrayList; import java.util.Collections; import java.util.Random; /** * 生成6位随机数的三种实现方式 * @author libusi */ public class Test01 { public static void main(String[] args) throws NoSuchAlgorithmException { demo1(); demo2(); demo3(); demo4(); } private static void demo1() { ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 1000; i&#43;&#43;) { int intValue = Double." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8adebcec2078c8fb0fc3303b6f6cc258/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-22T17:34:49+08:00" />
<meta property="article:modified_time" content="2022-07-22T17:34:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SecureRandom生成随机数-验证码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p id="main-toc"><strong>目录</strong></p> 
 <p id="%E4%B8%80%E3%80%81%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#%E4%B8%80%E3%80%81%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95" rel="nofollow">一、生成随机数的方法</a></p> 
 <p id="%E4%BA%8C%E3%80%81SecureRandom-toc" style="margin-left:80px;"><a href="#%E4%BA%8C%E3%80%81SecureRandom" rel="nofollow">二、SecureRandom</a></p> 
 <p id="%E4%B8%89%E3%80%81%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><a href="#%E4%B8%89%E3%80%81%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8" rel="nofollow">三、常见使用</a></p> 
 <p id="%E5%9B%9B%E3%80%81%E5%90%84%E7%A7%8D%E5%AE%9E%E7%8E%B0%E5%8F%8A%E7%BB%93%E6%9E%9C%E9%AA%8C%E8%AF%81-toc" style="margin-left:80px;"><a href="#%E5%9B%9B%E3%80%81%E5%90%84%E7%A7%8D%E5%AE%9E%E7%8E%B0%E5%8F%8A%E7%BB%93%E6%9E%9C%E9%AA%8C%E8%AF%81" rel="nofollow">四、各种实现及结果验证</a></p> 
 <p id="%E4%BA%94%E3%80%81%E5%B8%B8%E8%A7%81%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93-toc" style="margin-left:80px;"><a href="#%E4%BA%94%E3%80%81%E5%B8%B8%E8%A7%81%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93" rel="nofollow">五、常见及相关问题总结</a></p> 
 <hr id="hr-toc"> 
 <h4 id="%E4%B8%80%E3%80%81%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95">一、生成随机数的方法</h4> 
 <pre><code class="language-java">    Math.random（）一随机数
    java.util.Random伪随机数（线性同余法生成）
    java.security.SecureRandom真随机数</code></pre> 
 <h4 id="%E4%BA%8C%E3%80%81SecureRandom">二、<strong>SecureRandom</strong></h4> 
 <pre><code class="language-java">SecureRandom使用

（1）指定算法名称

    仅指定算法名称：

    SecureRandom random= SecureRandom.getInstance("SHA1PRNG");
    //系统将确定环境中是否有所请求的算法实现，是否有多个，是否有首选实现。

    既指定了算法名称又指定了包提供程序:

    SecureRandom random= SecureRandom.getInstance("SHA1PRNG","RUN");
     
    //系统将确定在所请求的包中是否有算法实现；如果没有，则抛出异常。

（2）获取SecureRandom对象后，生成随机数

    Integer randNum = random.nextInt();//生成10位数的随机数
     
    Integer randNum = random.nextInt(100);//生成0~99的随机数</code></pre> 
 <h4 id="%E4%B8%89%E3%80%81%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8">三、常见使用</h4> 
 <p>1）生成6为随机验证码</p> 
 <pre><code class="language-java">SecureRandom secureRandom = SecureRandom.getInstance("SHA1PRNG");
String verifyCode = String.valueOf(secureRandom.nextInt(900000) + 100000);</code></pre> 
 <h4 id="%E5%9B%9B%E3%80%81%E5%90%84%E7%A7%8D%E5%AE%9E%E7%8E%B0%E5%8F%8A%E7%BB%93%E6%9E%9C%E9%AA%8C%E8%AF%81">四、各种实现及结果验证</h4> 
 <pre><code class="language-java">package com.basic;

import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.SecureRandom;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Random;

/**
 * 生成6位随机数的三种实现方式
 * @author libusi
 */
public class Test01 {

    public static void main(String[] args) throws NoSuchAlgorithmException {
        demo1();
        demo2();
        demo3();
        demo4();
    }

    private static void demo1() {
        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; 1000; i++) {
            int intValue = Double.valueOf(Math.random() * 1000000).intValue();
            String random = String.valueOf(intValue);
            String r = (random.length() == 6 &amp;&amp; "9".equals(random.substring(0, 1))) ? random : String.valueOf(intValue + 100000);
            list.add(r);
        }
        Collections.sort(list);
        list.forEach(System.out::println);
    }

    private static void demo2() {
        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; 10000; i++) {
            Random random1 = new Random();
            list.add(random1.nextInt(900000) + 100000);
        }
        Collections.sort(list);
        list.forEach(System.out::println);
    }

    private static void demo3() throws NoSuchAlgorithmException {
        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; 1000000; i++) {
            SecureRandom secureRandom = SecureRandom.getInstance("SHA1PRNG");
            String v = String.valueOf(secureRandom.nextInt(900000) + 100000);
            list.add(v);
        }
        Collections.sort(list);
        list.forEach(System.out::println);
    }

    private static void demo4() throws NoSuchAlgorithmException {
        //验证SecureRandom
        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; 10000; i++) {
            SecureRandom random3 = SecureRandom.getInstance("SHA1PRNG");
            //生成10位数的随机数
            Integer r = random3.nextInt();
            //生成0~99的随机数
            Integer r2 = random3.nextInt(100);
            list.add(r2);
        }
        Collections.sort(list);
        list.forEach(System.out::println);
    }

}
</code></pre> 
 <p><img alt="" height="431" src="https://images2.imgbox.com/3c/dc/yjBgWfP3_o.png" width="1109"></p> 
 <h4 id="%E4%BA%94%E3%80%81%E5%B8%B8%E8%A7%81%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93">五、常见及相关问题总结</h4> 
 <p><strong>1）SecureRandom.getInstance("SHA1PRNG")初始化慢</strong></p> 
 <pre><code>Linux环境，在项目中用到了随机数，使用了SecureRandom.getInstance("SHA1PRNG")，发现首次运行，时间极长。

本地是Windows环境，运行并不慢。

修改Linux的JVM环境，打开$JAVA_PATH/jre/lib/security/java.security这个文件，找到下面的内容

securerandom.source=file:/dev/random替换为securerandom.source=file:/dev/./urandom

查看本地环境后，竟然发现使用的是urandom。</code></pre> 
 <strong>2）</strong> 
 <a href="https://my.oschina.net/Rayn/blog/3052769" rel="nofollow" title='偶遇 JDK 1.8 还未修复的 SecureRandom.getInstance("SHA1PRNG") 之 bug'>偶遇 JDK 1.8 还未修复的 SecureRandom.getInstance("SHA1PRNG") 之 bug</a> 
 <p></p> 
 <p><span style="color:#ffbb66;"><strong>有用请点赞，养成良好习惯！</strong></span></p> 
 <p><span style="color:#ffbb66;"><strong>补充、交流请留言！</strong></span></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3570653e3531b860660d10bbcdb19668/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DTS设备树规则</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f3d800623f5bb4e1f1b4181effc8974d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux服务器配置免密登录方式（vscode 以及 MobaXterm 登录）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>