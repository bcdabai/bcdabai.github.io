<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux下ps命令 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux下ps命令" />
<meta property="og:description" content="linux下ps命令 Linux中的ps命令是Process Status的缩写。ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，
就是执行ps命令的那个时刻的那些进程，如果想要动态的显示进程信息，就可以使用top命令。
要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而 ps 命令就是最基本同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。总之大部分信息都是可以通过执行该命令得到的。
命令参数： a 显示所有进程 -a 显示同一终端下的所有程序 -A 显示所有进程 c 显示进程的真实名称 -N 反向选择 -e 等于“-A” e 显示环境变量 f 显示程序间的关系 -H 显示树状结构 r 显示当前终端的进程 T 显示当前终端的所有程序 u 指定用户的所有进程 -au 显示较详细的资讯 -aux 显示所有包含其他使用者的行程 -C&lt;命令&gt; 列出指定命令的状况 --lines&lt;行数&gt; 每页显示的行数 --width&lt;字符数&gt; 每页显示的字符数 --help 显示帮助信息 --version 显示版本显示 1. pstree pstree以树结构显示进程
$ pstree -p work | grep ad
sshd(22669)---bash(22670)---ad_preprocess(4551)-&#43;-{ad_preprocess}(4552) |-{ad_preprocess}(4553) |-{ad_preprocess}(4554) |-{ad_preprocess}(4555) |-{ad_preprocess}(4556) `-{ad_preprocess}(4557) work为工作用户，-p为显示进程识别码，ad_preprocess共启动了6个子线程，加上主线程共7个线程
2. ps -Lf $ ps -Lf 4551" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/41215aea304659c9a1acd990de0552fc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-18T11:02:10+08:00" />
<meta property="article:modified_time" content="2020-08-18T11:02:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux下ps命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><a href="https://www.cnblogs.com/xiangtingshen/p/10920236.html" rel="nofollow" id="cb_post_title_url">linux下ps命令</a></h2> 
<p>Linux中的ps命令是<strong>Process Status</strong>的缩写。ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，</p> 
<p>就是执行ps命令的那个时刻的那些进程，<strong>如果想要动态的显示进程信息，就可以使用top命令</strong>。</p> 
<p>要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而 ps 命令就是最基本同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。总之大部分信息都是可以通过执行该命令得到的。</p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/a1/20/xP7nbdiy_o.gif"></p> 
<pre>命令参数：
a  显示所有进程
-a 显示同一终端下的所有程序
-A 显示所有进程
c  显示进程的真实名称
-N 反向选择
-e 等于“-A”
e  显示环境变量
f  显示程序间的关系
-H 显示树状结构
r  显示当前终端的进程
T  显示当前终端的所有程序
u  指定用户的所有进程
-au 显示较详细的资讯
<strong>-</strong><strong>aux</strong> 显示所有包含其他使用者的行程 
-C&lt;命令&gt; 列出指定命令的状况
--lines&lt;行数&gt; 每页显示的行数
--width&lt;字符数&gt; 每页显示的字符数
--help 显示帮助信息
--version 显示版本显示</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/b8/6c/sGeFK5D0_o.gif"></p> 
<p> </p> 
<h4>1. pstree</h4> 
<p>pstree以树结构显示进程<br><strong>$ pstree -p work | grep ad</strong></p> 
<pre>sshd(22669)---bash(22670)---ad_preprocess(4551)-+-{ad_preprocess}(4552)
                                                |-{ad_preprocess}(4553)
                                                |-{ad_preprocess}(4554)
                                                |-{ad_preprocess}(4555)
                                                |-{ad_preprocess}(4556)
                                                `-{ad_preprocess}(4557)</pre> 
<p> </p> 
<p>work为工作用户，-p为显示进程识别码，ad_preprocess共启动了6个子线程，加上主线程共7个线程</p> 
<h4>2. ps -Lf</h4> 
<p><strong>$ ps -Lf 4551</strong></p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/d7/49/Nxuyq0uw_o.gif"></p> 
<pre>UID        PID  PPID   LWP  C NLWP STIME TTY      STAT   TIME CMD
work      4551 22670  4551  2    7 16:30 pts/2    Sl+    0:02 ./ad_preprocess
work      4551 22670  4552  0    7 16:30 pts/2    Sl+    0:00 ./ad_preprocess
work      4551 22670  4553  0    7 16:30 pts/2    Sl+    0:00 ./ad_preprocess
work      4551 22670  4554  0    7 16:30 pts/2    Sl+    0:00 ./ad_preprocess
work      4551 22670  4555  0    7 16:30 pts/2    Sl+    0:00 ./ad_preprocess
work      4551 22670  4556  0    7 16:30 pts/2    Sl+    0:00 ./ad_preprocess
work      4551 22670  4557  0    7 16:30 pts/2    Sl+    0:00 ./ad_preprocess</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/5a/dc/AmxI5d3y_o.gif"></p> 
<p><strong>进程共启动了7个线程</strong></p> 
<p> </p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/c5/ab/RjZFsAYx_o.gif"></p> 
<pre>linux上进程有5种状态:
1. 运行(正在运行或在运行队列中等待)
2. 中断(休眠中, 受阻, 在等待某个条件的形成或接受到信号)
3. 不可中断(收到信号不唤醒和不可运行, 进程必须等待直到有中断发生)
4. 僵死(进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放)
5. 停止(进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行)

ps工具标识进程的5种状态码:
D 不可中断 uninterruptible sleep (usually IO)
R 运行 runnable (on run queue)
S 中断 sleeping
T 停止 traced or stopped
Z 僵死 a defunct (”zombie”) process</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/47/87/emJB06hy_o.gif"></p> 
<p> </p> 
<h4>3. pstack</h4> 
<p><strong>pstack显示每个进程的栈跟踪</strong></p> 
<p><img alt="" id="code_img_closed_924d9815-e5eb-45c7-a618-5feeeb67af79" src="https://images2.imgbox.com/89/cb/vhsto7as_o.gif"> View Code</p> 
<p> </p> 
<h4>4、kill 终止进程<em id="__mceDel"><em> </em></em></h4> 
<p><img alt="复制代码" src="https://images2.imgbox.com/99/4c/2u4Tgvhr_o.gif"></p> 
<pre>有十几种控制进程的方法，下面是一些常用的方法:
kill -STOP [pid]
发送SIGSTOP (17,19,23)停止一个进程，而并不消灭这个进程。
kill -CONT [pid]
发送SIGCONT (19,18,25)重新开始一个停止的进程。
kill -KILL [pid]
发送SIGKILL (9)强迫进程立即停止，并且不实施清理操作。
kill -9 -1
终止你拥有的全部进程。
SIGKILL 和 SIGSTOP 信号不能被捕捉、封锁或者忽略，但是，其它的信号可以。所以这是你的终极武器。</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/80/46/rzq3FGkt_o.gif"></p> 
<p> </p> 
<p><strong>显示所有进程信息</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -A</p> 
<p><strong>输出：</strong></p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/86/dc/SiSFHnak_o.gif"></p> 
<pre>   PID TTY          TIME CMD
     1 ?        00:00:08 systemd
     2 ?        00:00:00 kthreadd
     4 ?        00:00:00 kworker/0:0H
     6 ?        00:00:00 mm_percpu_wq
     7 ?        00:00:04 ksoftirqd/0
     8 ?        00:00:03 rcu_sched
     9 ?        00:00:00 rcu_bh
    10 ?        00:00:00 migration/0
    11 ?        00:00:00 watchdog/0
    12 ?        00:00:00 cpuhp/0
    13 ?        00:00:00 kdevtmpfs
。。。省略</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/b6/e7/gWCU488L_o.gif"></p> 
<p><strong>显示指定用户信息</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -u root</p> 
<p><strong>输出：</strong></p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/dd/17/mxRlKzUT_o.gif"></p> 
<pre>   PID TTY          TIME CMD
     1 ?        00:00:08 systemd
     2 ?        00:00:00 kthreadd
     4 ?        00:00:00 kworker/0:0H
     6 ?        00:00:00 mm_percpu_wq
     7 ?        00:00:04 ksoftirqd/0
     8 ?        00:00:03 rcu_sched
     9 ?        00:00:00 rcu_bh
    10 ?        00:00:00 migration/0
    11 ?        00:00:00 watchdog/0
    12 ?        00:00:00 cpuhp/0
    13 ?        00:00:00 kdevtmpfs
    14 ?        00:00:00 netns
    15 ?        00:00:00 rcu_tasks_kthre</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/28/af/UqBwkXdn_o.gif"></p> 
<p><strong>显示所有进程信息，连同命令行</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -ef</p> 
<p><strong>输出：</strong></p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/36/91/uxkqr4ub_o.gif"></p> 
<pre>UID         PID   PPID  C STIME TTY          TIME CMD
root          1      0  0 May23 ?        00:00:08 /lib/systemd/systemd --system --deserialize 21
root          2      0  0 May23 ?        00:00:00 [kthreadd]
root          4      2  0 May23 ?        00:00:00 [kworker/0:0H]
root          6      2  0 May23 ?        00:00:00 [mm_percpu_wq]
root          7      2  0 May23 ?        00:00:04 [ksoftirqd/0]
root          8      2  0 May23 ?        00:00:03 [rcu_sched]
root          9      2  0 May23 ?        00:00:00 [rcu_bh]
root         10      2  0 May23 ?        00:00:00 [migration/0]
root         11      2  0 May23 ?        00:00:00 [watchdog/0]
root         12      2  0 May23 ?        00:00:00 [cpuhp/0]
root         13      2  0 May23 ?        00:00:00 [kdevtmpfs]
root         14      2  0 May23 ?        00:00:00 [netns]
root         15      2  0 May23 ?        00:00:00 [rcu_tasks_kthre]
root         16      2  0 May23 ?        00:00:00 [kauditd]
root         17      2  0 May23 ?        00:00:00 [khungtaskd]
root         18      2  0 May23 ?        00:00:00 [oom_reaper]
。。。</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/33/cf/xkGzhxZL_o.gif"></p> 
<p><strong>实例4： ps 与grep 常用组合用法，查找特定进程</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　<strong>ps -ef|grep ssh</strong></p> 
<p><strong>输出：</strong></p> 
<pre>gec@ubuntu:~/myshare$ ps -ef|grep bash
gec        9448  79650  0 06:05 pts/4    00:00:00 grep --color=auto bash
gec       79650  79575  0 03:49 pts/4    00:00:00 bash
gec@ubuntu:~/myshare$ ps -ef | grep ssh
gec        9452  79650  0 06:05 pts/4    00:00:00 grep --color=auto ssh
root      16628      1  0 03:45 ?        00:00:00 /usr/sbin/sshd -D</pre> 
<p><strong>将目前属于您自己这次登入的 PID 与相关信息列示出来</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -l</p> 
<p><strong>输出：</strong></p> 
<pre>F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 R  1000   9455  79650  0  80   0 -  7657 -      pts/4    00:00:00 ps
0 S  1000  79650  79575  0  80   0 -  6093 wait   pts/4    00:00:00 bash</pre> 
<p><strong>说明：</strong></p> 
<p><strong>各相关信息的意义：</strong></p> 
<p>F 代表这个程序的旗标 (flag)， 4 代表使用者为 super user</p> 
<p>S 代表这个程序的状态 (STAT)，关于各 STAT 的意义将在内文介绍</p> 
<p>UID 程序被该 UID 所拥有</p> 
<p>PID 就是这个程序的 ID ！</p> 
<p>PPID 则是其上级父程序的ID</p> 
<p>C CPU 使用的资源百分比</p> 
<p>PRI 这个是 Priority (优先执行序) 的缩写，详细后面介绍</p> 
<p>NI 这个是 Nice 值，在下一小节我们会持续介绍</p> 
<p>ADDR 这个是 kernel function，指出该程序在内存的那个部分。如果是个 running的程序，一般就是 "-"</p> 
<p>SZ 使用掉的内存大小</p> 
<p>WCHAN 目前这个程序是否正在运作当中，若为 - 表示正在运作</p> 
<p>TTY 登入者的终端机位置</p> 
<p>TIME 使用掉的 CPU 时间。</p> 
<p>CMD 所下达的指令为何</p> 
<p>在预设的情况下， ps 仅会列出与目前所在的 bash shell 有关的 PID 而已，所以， 当我使用 ps -l 的时候，只有三个 PID。</p> 
<p> </p> 
<p><strong>列出目前所有的正在内存当中的程序</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps aux</p> 
<p><strong>输出：</strong></p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/82/26/0okxqD6X_o.gif"></p> 
<pre>USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root          1  0.0  0.3 185228  3100 ?        Ss   May23   0:08 /lib/systemd/systemd --system --deserialize 21
root          2  0.0  0.0      0     0 ?        S    May23   0:00 [kthreadd]
root          4  0.0  0.0      0     0 ?        I&lt;   May23   0:00 [kworker/0:0H]
root          6  0.0  0.0      0     0 ?        I&lt;   May23   0:00 [mm_percpu_wq]
root          7  0.0  0.0      0     0 ?        S    May23   0:04 [ksoftirqd/0]
root          8  0.0  0.0      0     0 ?        I    May23   0:03 [rcu_sched]
root          9  0.0  0.0      0     0 ?        I    May23   0:00 [rcu_bh]
root         10  0.0  0.0      0     0 ?        S    May23   0:00 [migration/0]
root         11  0.0  0.0      0     0 ?        S    May23   0:00 [watchdog/0]</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/25/0e/RHrkkngn_o.gif"></p> 
<p> </p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/d5/54/pY2C5klO_o.gif"></p> 
<pre>USER：该 process 属于那个使用者账号的

PID ：该 process 的号码

%CPU：该 process 使用掉的 CPU 资源百分比

%MEM：该 process 所占用的物理内存百分比

VSZ ：该 process 使用掉的虚拟内存量 (Kbytes)

RSS ：该 process 占用的固定的内存量 (Kbytes)

TTY ：该 process 是在那个终端机上面运作，若与终端机无关，则显示 ?，另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。

STAT：该程序目前的状态，主要的状态有

R ：该程序目前正在运作，或者是可被运作

S ：该程序目前正在睡眠当中 (可说是 idle 状态)，但可被某些讯号 (signal) 唤醒。

T ：该程序目前正在侦测或者是停止了

Z ：该程序应该已经终止，但是其父程序却无法正常的终止他，造成 zombie (疆尸) 程序的状态

START：该 process 被触发启动的时间

TIME ：该 process 实际使用 CPU 运作的时间

COMMAND：该程序的实际指令</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/57/b1/w20FkKjj_o.gif"></p> 
<p> </p> 
<p><strong>列出类似程序树的程序显示</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -axjf</p> 
<p><strong>输出：</strong></p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/74/ed/250QoACW_o.gif"></p> 
<pre>  PPID    PID   PGID    SID TTY       TPGID STAT   UID   TIME COMMAND
     0      2      0      0 ?            -1 S        0   0:00 [kthreadd]
     2      4      0      0 ?            -1 I&lt;       0   0:00  \_ [kworker/0:0H]
     2      6      0      0 ?            -1 I&lt;       0   0:00  \_ [mm_percpu_wq]
     2      7      0      0 ?            -1 S        0   0:04  \_ [ksoftirqd/0]
     2      8      0      0 ?            -1 R        0   0:03  \_ [rcu_sched]
     2      9      0      0 ?            -1 I        0   0:00  \_ [rcu_bh]
     2     10      0      0 ?            -1 S        0   0:00  \_ [migration/0]
     2     11      0      0 ?            -1 S        0   0:00  \_ [watchdog/0]
     2     12      0      0 ?            -1 S        0   0:00  \_ [cpuhp/0]
     2     13      0      0 ?            -1 S        0   0:00  \_ [kdevtmpfs]
     2     14      0      0 ?            -1 I&lt;       0   0:00  \_ [netns]
     2     15      0      0 ?            -1 S        0   0:00  \_ [rcu_tasks_kthre]
     2     16      0      0 ?            -1 S        0   0:00  \_ [kauditd]</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/87/81/h7JwzG6D_o.gif"></p> 
<p><strong>找出与 cron 与 syslog 这两个服务有关的 PID 号码</strong></p> 
<p><strong>命令：</strong>ps aux | egrep '(cron|syslog)'</p> 
<pre>root        786  0.0  0.0  30748   508 ?        Ss   May23   0:00 /usr/sbin/cron -f
syslog      788  0.0  0.0 256392   208 ?        Ssl  May23   0:00 /usr/sbin/rsyslogd -n
gec        2147  0.0  0.0 436552   672 ?        S&lt;l  May23   0:00 /usr/bin/pulseaudio --start --log-target=syslog
gec        9483  0.0  0.1  15964  1032 pts/4    S+   06:13   0:00 grep -E --color=auto (cron|syslog)</pre> 
<p><strong>说明：</strong></p> 
<p> </p> 
<p><strong>其他实例：</strong></p> 
<p><strong>1. 可以用 | 管道和 more 连接起来分页查看</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -aux |more</p> 
<p><strong>2. 把所有进程显示出来，并输出到ps001.txt文件</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　ps -aux &gt; ps001.txt</p> 
<p><strong>3. 输出指定的字段</strong></p> 
<p><strong>命令：</strong></p> 
<p>　　 ps -o pid,ppid,pgrp,session,tpgid,comm</p> 
<p><strong>输出：</strong></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9164610a422cf1bb8d87ee0b0ec70139/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java 多线程总结01</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a8cebade87ae9ec4c46a2542b640315c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Apache poi HSSFWorkbook 操作excel教程2（从excel文件导入数据）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>