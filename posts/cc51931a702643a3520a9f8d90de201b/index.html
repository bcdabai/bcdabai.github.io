<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ISP系统综述 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ISP系统综述" />
<meta property="og:description" content="本期主题：
ISP系统综述
文章目录 1.ISP是什么？2.ISP由什么构成3.图像数据的处理流程1.传统图像的pipeline2.图像产生过程：3.YUV域 1.ISP是什么？ ISP全称是Image Signal Processor，图像信号处理器，用于处理图像信号传感器输出的图像信号，是相机系统的重要组成部分。
2.ISP由什么构成 ISP内部包括CPU、SUB IP、IF等设备，事实上，ISP是一个SOC，可以运行各种算法来实时处理图像信号。
ISP的架构如下图所示：
CPU，中央处理器，可以运行各种图像算法，控制外设；SUB IP，各个功能模块的统称，对图像进行专业的处理；IF，图像传输的接口，手机领域常用MIPI-CSI；通用外围控制设备，I2C、SPI等等； 3.图像数据的处理流程 1.传统图像的pipeline 一个典型的ISP流水线由一系列的模块构成，数据在这些模块中一级级运转，最终以 YUV或RGB格式 流出ISP，整体结构如下图所示：
参考至链接：
Understanding ISP Pipeline
图像在ISP内部经过了两次颜色空间的转变，分别是：
从RAW domain转换到RGB domain，从sensor拿到的数据是原始的bayer数据，经过坏点修复、黑电平校正、镜头阴影修正等操作，将raw数据先优化一波，然后在Bayer-Demosaic模块，进行颜色插值，将raw数据转换成RGB数据；从RGB domain转换到YUV domain，变成RGB数据之后，还有修正工作，比如其后的gamma修正，在 CSC（color space conversion，色彩空间转换） 之后，变成了YUV域 2.图像产生过程： 景物通过 Lens 生成的光学图像投射到 sensor 表面上， 经过光电转换为模拟电信号， 消噪声后经过 A/D 转换后变为数字图像信号， 再送到 ISP 中加工处理。
从sensor端过来的数据是RAW数据，图像将实际的景象转成图像数据时，通常是用红绿蓝三原色来表示的，在黑白的CMOS传感器上，分别套上不同颜色的滤光片，这样就得到了拜耳的raw图，详细原理可参考 ISP（图像信号处理）之Bayer Raw 简介Demosaic颜色插值，这一步实现了RAW domain 转换为RGB domain，当得到bayer raw数据之后，每个像素都为单色光，从而理想的Bayer 图是一个较为昏暗的马赛克图，数字图像处理中用来从不完整的color samples插值生成完整的color samples的方法(因为bayer pattern看起来像一个个马赛克，因此称为去马赛克)；CSC颜色空间转换，这一步将RGB数据转成了YUV数据，YUV数据是将亮度信息和色彩信息区分开了，其中Y代表亮度，UV代表颜色； 3.YUV域 RGB大家应该都清楚，那YUV的定义是什么？
1.颜色空间
其实YUV与RGB一样，都是颜色空间，RGB是三原色红绿蓝的命名，而YUV实际上是亮度、色度、浓度，具体来说就是：
Y 代表的是明亮度（Luminance 或 Luma）；U 和 V 代表则是 色度、浓度（Chrominance、Chroma）。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cc51931a702643a3520a9f8d90de201b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-28T14:57:00+08:00" />
<meta property="article:modified_time" content="2022-05-28T14:57:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ISP系统综述</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>本期主题：</strong><br> ISP系统综述</p> 
<hr color="#000000" size='1"'> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1ISP_9" rel="nofollow">1.ISP是什么？</a></li><li><a href="#2ISP_11" rel="nofollow">2.ISP由什么构成</a></li><li><a href="#3_21" rel="nofollow">3.图像数据的处理流程</a></li><li><ul><li><a href="#1pipeline_22" rel="nofollow">1.传统图像的pipeline</a></li><li><a href="#2_34" rel="nofollow">2.图像产生过程：</a></li><li><a href="#3YUV_41" rel="nofollow">3.YUV域</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr color="#000000" size='1"'> 
<h2><a id="1ISP_9"></a>1.ISP是什么？</h2> 
<p>ISP全称是Image Signal Processor，图像信号处理器，用于处理图像信号传感器输出的图像信号，是相机系统的重要组成部分。</p> 
<h2><a id="2ISP_11"></a>2.ISP由什么构成</h2> 
<p>ISP内部包括CPU、SUB IP、IF等设备，事实上，ISP是一个SOC，可以运行各种算法来实时处理图像信号。<br> ISP的架构如下图所示：<br> <img src="https://images2.imgbox.com/7f/1b/UqJNv5vt_o.png" alt="在这里插入图片描述"></p> 
<ul><li>CPU，中央处理器，可以运行各种图像算法，控制外设；</li><li>SUB IP，各个功能模块的统称，对图像进行专业的处理；</li><li>IF，图像传输的接口，手机领域常用MIPI-CSI；</li><li>通用外围控制设备，I2C、SPI等等；</li></ul> 
<h2><a id="3_21"></a>3.图像数据的处理流程</h2> 
<h3><a id="1pipeline_22"></a>1.传统图像的pipeline</h3> 
<p>一个典型的ISP流水线由一系列的模块构成，数据在这些模块中一级级运转，最终以 <mark>YUV或RGB格式</mark> 流出ISP，整体结构如下图所示：<br> <img src="https://images2.imgbox.com/df/60/WcbEa0Zo_o.png" alt="在这里插入图片描述"><br> 参考至链接：<br> <a href="https://zhuanlan.zhihu.com/p/98820927" rel="nofollow">Understanding ISP Pipeline</a></p> 
<p>图像在ISP内部经过了两次颜色空间的转变，分别是：</p> 
<ol><li><strong>从RAW domain转换到RGB domain</strong>，从sensor拿到的数据是原始的bayer数据，经过坏点修复、黑电平校正、镜头阴影修正等操作，将raw数据先优化一波，然后在<strong>Bayer-Demosaic模块</strong>，进行颜色插值，将raw数据转换成RGB数据；</li><li>从RGB domain转换到YUV domain，变成RGB数据之后，还有修正工作，比如其后的gamma修正，在 <strong>CSC（color space conversion，色彩空间转换）</strong> 之后，变成了YUV域</li></ol> 
<h3><a id="2_34"></a>2.图像产生过程：</h3> 
<p>景物通过 Lens 生成的光学图像投射到 sensor 表面上， 经过光电转换为模拟电信号， 消噪声后经过 A/D 转换后变为数字图像信号， 再送到 ISP 中加工处理。</p> 
<ol><li>从sensor端过来的数据是RAW数据，图像将实际的景象转成图像数据时，通常是用红绿蓝三原色来表示的，在黑白的CMOS传感器上，分别套上不同颜色的滤光片，这样就得到了拜耳的raw图，详细原理可参考 <a href="https://blog.csdn.net/qq_42261630/article/details/102922737">ISP（图像信号处理）之Bayer Raw 简介</a></li><li><strong>Demosaic颜色插值</strong>，这一步实现了RAW domain 转换为RGB domain，当得到bayer raw数据之后，每个像素都为单色光，从而理想的Bayer 图是一个较为昏暗的马赛克图，数字图像处理中用来从不完整的color samples插值生成完整的color samples的方法(因为bayer pattern看起来像一个个马赛克，因此称为去马赛克)；</li><li><strong>CSC颜色空间转换</strong>，这一步将RGB数据转成了YUV数据，YUV数据是将亮度信息和色彩信息区分开了，其中Y代表亮度，UV代表颜色；</li></ol> 
<h3><a id="3YUV_41"></a>3.YUV域</h3> 
<p>RGB大家应该都清楚，那YUV的定义是什么？<br> <strong>1.颜色空间</strong><br> 其实YUV与RGB一样，都是颜色空间，RGB是三原色红绿蓝的命名，而YUV实际上是亮度、色度、浓度，具体来说就是：<br> <mark>Y 代表的是明亮度（Luminance 或 Luma）；U 和 V 代表则是 色度、浓度（Chrominance、Chroma）。</mark></p> 
<blockquote> 
 <p>在 YUV 中，每一个颜色有一个亮度信号Y和两个色度信号U和V。亮度信号代表亮度的强或弱。根据 RGB 数据，YUV 从其中产生一个黑白图像，然后从数据中提取最主要的三种颜色指定为两个额外信号来描述颜色。</p> 
</blockquote> 
<p>看一个实际的图片转成YUV的过程：<br> <img src="https://images2.imgbox.com/72/e6/fnEjxpvm_o.png" alt="在这里插入图片描述"></p> 
<p>考虑一个问题，为什么有了RGB还需要YUV呢？总的来说有如下几个原因：</p> 
<blockquote> 
 <p><strong>1.历史原因，为了兼容原来的黑白电视</strong><br> 原来都是黑白电视机，后来出现了彩色电视机，如果直接用RGB去传，原来的黑白电视机就无法兼容，但是如果用YUV来处理，忽略其中的 UV 信号，黑白电视就可以直接用 Y 信号来表示黑白画面，实现兼容；</p> 
 <p><strong>2.传输带宽原因，YUV传输更节省带宽</strong><br> 完全形态的 RGB 编码，例如RGB 888，一个像素的表示占用 24 bits；而 YUV 的 420 采样，可以使用 12 bits 表示一个颜色，节省了大概一半的带宽；<br> <strong>3.生理原因，人眼对亮度比色彩敏感</strong><br> 因此，就是用把亮度单独提取出来的YUV格式；</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b3a26598f4843cb9e00cd6ac1c1d2502/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IDEA “Easy Code“ 插件(v1.2.5-java版本) 自动生成代码报红</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aa50544d0042edeb303462752443a252/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">对称加密和非对称的区别，非对称加密有哪些</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>