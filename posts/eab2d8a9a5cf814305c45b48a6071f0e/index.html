<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>项目实战 — 博客系统③ {功能实现} - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="项目实战 — 博客系统③ {功能实现}" />
<meta property="og:description" content="目录
一、编写注册功能
🍅 1、使用ajax构造请求（前端）
🍅 2、统一处理
🎄 统一对象处理
🎄 保底统一返回处理 🎄 统一异常处理
🍅 3、处理请求
二、编写登录功能
🍅 1、使用ajax构造请求
🍅 2、处理请求
🎄 创建实体类
🎄 添加接口方法
🎄 service层
🎄 controller：处理请求并返回
三、编写博客列表页面
🍅 1、SessionUtils
🍅 2、处理请求
🍅 3、使用ajax构造请求
三、编写注销功能
🍅 1、使用ajax获取请求
🍅 2、处理请求
四、编写删除文章功能
🍅 1、使用ajax构造请求
🍅 2、处理请求
🎄 mapper层：接口方法
🎄 service层
🎄 controller层：处理请求
五、编写文章添加功能
🍅 1、使用ajax构造请求
🍅 2、处理请求
🎄mapper层：添加接口方法
🎄service层：返回受影响行数
🎄 controller：处理添加文章的请求
六、修改功能：查询到修改的文章
🍅 1、通过ajax构造请求
🍅 2、处理请求
🎄Mapper层：添加接口
🎄service层
🎄controller层
七、修改功能：修改查询到的文章
🍅 1、通过ajax构造请求 🍅 2、处理请求" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/eab2d8a9a5cf814305c45b48a6071f0e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-02T00:02:56+08:00" />
<meta property="article:modified_time" content="2023-09-02T00:02:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">项目实战 — 博客系统③ {功能实现}</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%C2%A0%E4%B8%80%E3%80%81%E7%BC%96%E5%86%99%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%80%E3%80%81%E7%BC%96%E5%86%99%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD" rel="nofollow"> 一、编写注册功能</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89" rel="nofollow">🍅 1、使用ajax构造请求（前端）</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86" rel="nofollow">🍅 2、统一处理</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E7%BB%9F%E4%B8%80%E5%AF%B9%E8%B1%A1%E5%A4%84%E7%90%86-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E7%BB%9F%E4%B8%80%E5%AF%B9%E8%B1%A1%E5%A4%84%E7%90%86" rel="nofollow">        🎄 统一对象处理</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%C2%A0%E4%BF%9D%E5%BA%95%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%A4%84%E7%90%86%C2%A0-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%C2%A0%E4%BF%9D%E5%BA%95%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%A4%84%E7%90%86%C2%A0" rel="nofollow">        🎄 保底统一返回处理 </a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86" rel="nofollow">        🎄 统一异常处理</a></p> 
<p id="%C2%A0%F0%9F%8D%85%203%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%C2%A0%F0%9F%8D%85%203%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow"> 🍅 3、处理请求</a></p> 
<p id="%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD" rel="nofollow">二、编写登录功能</a></p> 
<p id="%C2%A0%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%C2%A0%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82" rel="nofollow"> 🍅 1、使用ajax构造请求</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB" rel="nofollow">        🎄 创建实体类</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95" rel="nofollow">        🎄 添加接口方法</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%F0%9F%8E%84%20service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%F0%9F%8E%84%20service%E5%B1%82" rel="nofollow">         🎄 service层</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20controller%EF%BC%9A%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%B9%B6%E8%BF%94%E5%9B%9E-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20controller%EF%BC%9A%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%B9%B6%E8%BF%94%E5%9B%9E" rel="nofollow">        🎄 controller：处理请求并返回</a></p> 
<p id="%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99%E5%8D%9A%E5%AE%A2%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99%E5%8D%9A%E5%AE%A2%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2" rel="nofollow">三、编写博客列表页面</a></p> 
<p id="%C2%A0%F0%9F%8D%85%201%E3%80%81SessionUtils-toc" style="margin-left:40px;"><a href="#%C2%A0%F0%9F%8D%85%201%E3%80%81SessionUtils" rel="nofollow"> 🍅 1、SessionUtils</a></p> 
<p id="%C2%A0%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%C2%A0%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow"> 🍅 2、处理请求</a></p> 
<p id="%F0%9F%8D%85%203%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%203%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 3、使用ajax构造请求</a></p> 
<p id="%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99%E6%B3%A8%E9%94%80%E5%8A%9F%E8%83%BD-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99%E6%B3%A8%E9%94%80%E5%8A%9F%E8%83%BD" rel="nofollow">三、编写注销功能</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 1、使用ajax获取请求</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E5%9B%9B%E3%80%81%E7%BC%96%E5%86%99%E5%88%A0%E9%99%A4%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E7%BC%96%E5%86%99%E5%88%A0%E9%99%A4%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD" rel="nofollow">四、编写删除文章功能</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 1、使用ajax构造请求</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="%F0%9F%8E%84%20mapper%E5%B1%82%EF%BC%9A%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20mapper%E5%B1%82%EF%BC%9A%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95" rel="nofollow">🎄 mapper层：接口方法</a></p> 
<p id="%F0%9F%8E%84%20service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20service%E5%B1%82" rel="nofollow">🎄 service层</a></p> 
<p id="%F0%9F%8E%84%20controller%E5%B1%82%EF%BC%9A%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20controller%E5%B1%82%EF%BC%9A%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🎄 controller层：处理请求</a></p> 
<p id="%E4%BA%94%E3%80%81%E7%BC%96%E5%86%99%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E7%BC%96%E5%86%99%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD" rel="nofollow">五、编写文章添加功能</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 1、使用ajax构造请求</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="%C2%A0%F0%9F%8E%84mapper%E5%B1%82%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#%C2%A0%F0%9F%8E%84mapper%E5%B1%82%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95" rel="nofollow"> 🎄mapper层：添加接口方法</a></p> 
<p id="%C2%A0%F0%9F%8E%84service%E5%B1%82%EF%BC%9A%E8%BF%94%E5%9B%9E%E5%8F%97%E5%BD%B1%E5%93%8D%E8%A1%8C%E6%95%B0-toc" style="margin-left:80px;"><a href="#%C2%A0%F0%9F%8E%84service%E5%B1%82%EF%BC%9A%E8%BF%94%E5%9B%9E%E5%8F%97%E5%BD%B1%E5%93%8D%E8%A1%8C%E6%95%B0" rel="nofollow"> 🎄service层：返回受影响行数</a></p> 
<p id="%F0%9F%8E%84%20controller%EF%BC%9A%E5%A4%84%E7%90%86%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%9A%84%E8%AF%B7%E6%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20controller%EF%BC%9A%E5%A4%84%E7%90%86%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%9A%84%E8%AF%B7%E6%B1%82" rel="nofollow">🎄 controller：处理添加文章的请求</a></p> 
<p id="%E5%85%AD%E3%80%81%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%88%B0%E4%BF%AE%E6%94%B9%E7%9A%84%E6%96%87%E7%AB%A0-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%88%B0%E4%BF%AE%E6%94%B9%E7%9A%84%E6%96%87%E7%AB%A0" rel="nofollow">六、修改功能：查询到修改的文章</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E9%80%9A%E8%BF%87ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E9%80%9A%E8%BF%87ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 1、通过ajax构造请求</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="%F0%9F%8E%84Mapper%E5%B1%82%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84Mapper%E5%B1%82%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3" rel="nofollow">🎄Mapper层：添加接口</a></p> 
<p id="%F0%9F%8E%84service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84service%E5%B1%82" rel="nofollow">🎄service层</a></p> 
<p id="%F0%9F%8E%84controller%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84controller%E5%B1%82" rel="nofollow">🎄controller层</a></p> 
<p id="%E4%B8%83%E3%80%81%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD%EF%BC%9A%E4%BF%AE%E6%94%B9%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%9A%84%E6%96%87%E7%AB%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%83%E3%80%81%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD%EF%BC%9A%E4%BF%AE%E6%94%B9%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%9A%84%E6%96%87%E7%AB%A0" rel="nofollow">七、修改功能：修改查询到的文章</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E9%80%9A%E8%BF%87ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E9%80%9A%E8%BF%87ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0" rel="nofollow">🍅 1、通过ajax构造请求           </a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="%F0%9F%8E%84%20mapper%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20mapper%E5%B1%82" rel="nofollow">🎄 mapper层</a></p> 
<p id="%F0%9F%8E%84%20service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20service%E5%B1%82" rel="nofollow">🎄 service层</a></p> 
<p id="%F0%9F%8E%84%20controller%E5%B1%82%C2%A0%20%C2%A0%20%C2%A0-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20controller%E5%B1%82%C2%A0%20%C2%A0%20%C2%A0" rel="nofollow">🎄 controller层     </a></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E5%85%AB%E3%80%81%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85-toc" style="margin-left:0px;"><a href="#%E5%85%AB%E3%80%81%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85" rel="nofollow">八、文章详情</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%BC%96%E5%86%99-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%BC%96%E5%86%99" rel="nofollow">🍅 1、前端页面编写</a></p> 
<p id="%F0%9F%8E%84%20%E7%BB%99%E5%AE%9Aid%E5%80%BC-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20%E7%BB%99%E5%AE%9Aid%E5%80%BC" rel="nofollow">🎄 给定id值</a></p> 
<p id="%C2%A0%F0%9F%8E%84%20%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82-toc" style="margin-left:80px;"><a href="#%C2%A0%F0%9F%8E%84%20%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82" rel="nofollow"> 🎄 使用ajax构造请求</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 2、处理请求</a></p> 
<p id="%F0%9F%8E%84%20mapper%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20mapper%E5%B1%82" rel="nofollow">🎄 mapper层</a></p> 
<p id="%F0%9F%8E%84%20service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20service%E5%B1%82" rel="nofollow">🎄 service层</a></p> 
<p id="%F0%9F%8E%84%20controller%E5%B1%82%C2%A0-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20controller%E5%B1%82%C2%A0" rel="nofollow">🎄 controller层 </a></p> 
<p id="%E4%B9%9D%E3%80%81%E9%98%85%E8%AF%BB%E9%87%8F%E8%AE%BE%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E4%B9%9D%E3%80%81%E9%98%85%E8%AF%BB%E9%87%8F%E8%AE%BE%E7%BD%AE" rel="nofollow">九、阅读量设置</a></p> 
<p id="%F0%9F%8D%85%20%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%20%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82" rel="nofollow">🍅 处理请求</a></p> 
<p id="%F0%9F%8E%84%20mapper%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20mapper%E5%B1%82" rel="nofollow">🎄 mapper层</a></p> 
<p id="%F0%9F%8E%84%20service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20service%E5%B1%82" rel="nofollow">🎄 service层</a></p> 
<p id="%F0%9F%8E%84%20controller%E5%B1%82%C2%A0-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20controller%E5%B1%82%C2%A0" rel="nofollow">🎄 controller层 </a></p> 
<p id="%C2%A0%E5%8D%81%E3%80%81%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%8D%81%E3%80%81%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86" rel="nofollow"> 十、分页处理</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E5%89%8D%E7%AB%AF%E5%A4%84%E7%90%86-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E5%89%8D%E7%AB%AF%E5%A4%84%E7%90%86" rel="nofollow">🍅 1、前端处理</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86" rel="nofollow">🍅 2、后端处理</a></p> 
<p id="%F0%9F%8E%84%20mapper%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20mapper%E5%B1%82" rel="nofollow">🎄 mapper层</a></p> 
<p id="%F0%9F%8E%84%20service%E5%B1%82-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20service%E5%B1%82" rel="nofollow">🎄 service层</a></p> 
<p id="%F0%9F%8E%84%20controller%E5%B1%82%C2%A0-toc" style="margin-left:80px;"><a href="#%F0%9F%8E%84%20controller%E5%B1%82%C2%A0" rel="nofollow">🎄 controller层 </a></p> 
<p id="%E5%8D%81%E4%B8%80%E3%80%81%E5%AF%86%E7%A0%81%E5%8A%A0%E7%9B%90-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%AF%86%E7%A0%81%E5%8A%A0%E7%9B%90" rel="nofollow">十一、密码加盐</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E5%AE%9A%E4%B9%89%E5%8A%A0%E5%AF%86%E8%A7%84%E5%88%99-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E5%AE%9A%E4%B9%89%E5%8A%A0%E5%AF%86%E8%A7%84%E5%88%99" rel="nofollow">🍅 1、定义加密规则</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E4%BF%AE%E6%94%B9UserController%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E4%BF%AE%E6%94%B9UserController%E4%BB%A3%E7%A0%81" rel="nofollow">🍅 2、修改UserController代码</a></p> 
<p id="%E5%8D%81%E4%BA%8C%E3%80%81session%E5%8D%87%E7%BA%A7%E5%AD%98%E5%82%A8%E5%88%B0redis-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%BA%8C%E3%80%81session%E5%8D%87%E7%BA%A7%E5%AD%98%E5%82%A8%E5%88%B0redis" rel="nofollow">十二、session升级存储到redis</a></p> 
<p id="%F0%9F%8D%85%201%E3%80%81%E5%85%88%E6%B7%BB%E5%8A%A0redis%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%201%E3%80%81%E5%85%88%E6%B7%BB%E5%8A%A0redis%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96" rel="nofollow">🍅 1、先添加redis相关依赖</a></p> 
<p id="%F0%9F%8D%85%202%E3%80%81%E6%B7%BB%E5%8A%A0redis%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%88properties%EF%BC%89-toc" style="margin-left:40px;"><a href="#%F0%9F%8D%85%202%E3%80%81%E6%B7%BB%E5%8A%A0redis%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%88properties%EF%BC%89" rel="nofollow">🍅 2、添加redis配置信息（properties）</a></p> 
<p id="%C2%A0%E5%8D%81%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%8D%81%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8" rel="nofollow"> 十三、实现自定义拦截器</a></p> 
<hr> 
<p><strong>前置知识：</strong></p> 
<blockquote> 
 <p><strong>前后端交互的关键：</strong>使用AJAX（异步局部提交）</p> 
 <p><strong>写法：</strong></p> 
 <p>        1、原生写法（兼容性差）</p> 
 <p>        2、使用框架，jQuery ajax（简单 / 通用性浩）</p> 
 <p>语法：</p> 
 <pre><code class="language-css">        jQuery.ajax({
                url:"接口地址",           //提高的接口地址
                type:"GET",               //请求的类型
                data:{                         //传递的数据
                        "username":"张三"，
                        "password":"123"
                },

                success:function(res){        //相应的结果是什么
                        //后端返回数据后的业务处理代码
                }
        });</code></pre> 
</blockquote> 
<h2 id="%C2%A0%E4%B8%80%E3%80%81%E7%BC%96%E5%86%99%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD"> 一、编写注册功能</h2> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89">🍅 1、使用ajax构造请求（前端）</h3> 
<p>在前端页面的&lt;head&gt;&lt;/head&gt;添加jquery</p> 
<pre><code class="language-html">&lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;</code></pre> 
<p>添加事件：点击提交按钮，触发mysub()</p> 
<pre><code class="language-html">&lt;div class="row"&gt;
       &lt;button id="submit" onclick="mysub()"&gt;提交&lt;/button&gt;
&lt;/div&gt;</code></pre> 
<p>在&lt;script&gt;&lt;/script&gt;中提交用户注册信息</p> 
<blockquote> 
 <p>主要有这几步：</p> 
 <p>        （1）参数效验（获取到数据|非空效验）</p> 
 <p>        （2）将数据提交给后端</p> 
 <p>        （3）将后端返回的结果给用户</p> 
 <p>username.focus()：指将光标返回</p> 
 <p>trim()：去空格操作（校验到全是空格）</p> 
</blockquote> 
<pre><code class="language-javascript">&lt;script&gt;
        //  提交用户注册信息
        function mysub(){
            // 参数校验
            var username = jQuery("#username");
            var password = jQuery("#password");
            var password2 = jQuery("#password2");
            if(username.val().trim()==""){
                alert("请先输入用户名！");
                username.focus();
                return false;
            }
            if(password.val().trim()==""){
                alert("请先输入密码！");
                password.focus();
                return false;
            }
            if(password2.val().trim()==""){
                alert("请先输入确认密码！");
                password2.focus();
                return false;
            }
            // 效验两次输入的密码是否一致
            if(password.val()!=password2.val()){
                alert("两次密码不一致，请先检查！");
                return false;
            }
        //     提交数据给后端
            jQuery.ajax({
                url:"/user/reg",
                // 查询使用get,非查询使用post
                type:"POST",
                data:{
                    "username":username.val().trim(),
                    "password":password.val().trim()
                },
                success:function (res){
                //     返回结果给用户
                    if (res.code==200 &amp;&amp; res.data==1){
                        alert("注册成功！")
                        location.href = "login.html";
                    }else {
                        alert("注册失败！" + res.msg);
                    }
                }
            });
        }
    &lt;/script&gt;
&lt;/body&gt;</code></pre> 
<h3 id="%F0%9F%8D%85%202%E3%80%81%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86">🍅 2、统一处理</h3> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E7%BB%9F%E4%B8%80%E5%AF%B9%E8%B1%A1%E5%A4%84%E7%90%86">        🎄 统一对象处理</h4> 
<p> 在common包中，编写ResultAjax，表示前后端交互的统一对象，统一处理</p> 
<p><img alt="" height="188" src="https://images2.imgbox.com/1d/4f/sEEOeNlk_o.png" width="733"></p> 
<pre><code class="language-javascript">@Data
public class ResultAjax {
    private int code;   //状态码
    private String msg; //状态码的描述信息
    private Object data;

    public static ResultAjax success(Object data){
        ResultAjax result = new ResultAjax();
        result.setCode(200);
        result.setMsg("");
        result.setData(data);
        return result;
    }

    public static ResultAjax success(int code,String msg,Object data){
        ResultAjax result = new ResultAjax();
        result.setCode(code);
        result.setMsg(msg);
        result.setData(data);
        return result;
    }

    public static ResultAjax fail(int code,String msg){
        ResultAjax result = new ResultAjax();
        result.setCode(code);
        result.setMsg(msg);
        result.setData(null);
        return result;
    }

    public static ResultAjax fail(int code,String msg,Object data){
        ResultAjax result = new ResultAjax();
        result.setCode(code);
        result.setMsg(msg);
        result.setData(data);
        return result;
    }
}
</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%C2%A0%E4%BF%9D%E5%BA%95%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E5%A4%84%E7%90%86%C2%A0">        🎄 保底统一返回处理 </h4> 
<p>        在common中创建类</p> 
<p><img alt="" height="176" src="https://images2.imgbox.com/da/e2/EqC6AaBj_o.png" width="725"></p> 
<pre><code class="language-javascript">@ControllerAdvice
public class ResponseAdvice implements ResponseBodyAdvice {
    @Autowired
    private ObjectMapper objectMapper;
    @Override
    public boolean supports(MethodParameter returnType, Class converterType) {
        return true;
    }

    @Override
    public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType, Class selectedConverterType, ServerHttpRequest request, ServerHttpResponse response) {
        if (body instanceof ResultAjax){
            return body;
        }
        if (body instanceof String){
            ResultAjax resultAjax = ResultAjax.success(body);
            try {
                return objectMapper.writeValueAsString(resultAjax);
            } catch (JsonProcessingException e) {
                e.printStackTrace();
            }
        }
        return ResultAjax.success(body);
    }
}</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">        🎄 统一异常处理</h4> 
<pre><code class="language-javascript">/*
* 统一异常处理
* */
@RestControllerAdvice
public class ExceptionAdvice {
    @ExceptionHandler(Exception.class)
    public ResultAjax doException(Exception e){
        return ResultAjax.fail(-1,e.getMessage());
    }
}</code></pre> 
<h3 id="%C2%A0%F0%9F%8D%85%203%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"> 🍅 3、处理请求</h3> 
<p> 编写Mapper层，将拿到的数据进行插入</p> 
<pre><code class="language-javascript">@Mapper
public interface UserMapper {
    @Insert("insert into userinfo(username,password) values (#{username},#{password})")
    int reg(Userinfo userinfo);
}</code></pre> 
<p>然后在Service层中使用@Autowired将userMapper注入</p> 
<pre><code class="language-javascript">@Service
public class UserService {

    @Autowired
    private UserMapper userMapper;
    public int reg(Userinfo userinfo){
        return userMapper.reg(userinfo);
    }
}
</code></pre> 
<p> 在UserController中使用Userinfo对象接收请求信息</p> 
<blockquote> 
 <p>        （1）校验参数</p> 
 <p>        （2）请求 service 进行添加操作</p> 
 <p>        （3）将执行的结果返回给前端</p> 
</blockquote> 
<pre><code class="language-javascript">@RestController
@RequestMapping("/user")
public class UserController {

    @Autowired
    UserService userService;

    @RequestMapping("/reg")
    public ResultAjax reg(Userinfo userinfo){
        if (userinfo == null || !StringUtils.hasLength(userinfo.getUsername())
        || !StringUtils.hasLength(userinfo.getPassword())){
            return ResultAjax.fail(-1,"非法参数");
        }
        int result = userService.reg(userinfo);
        return ResultAjax.success(result);
    }</code></pre> 
<p>检验该功能是否实现</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ca/3a/CO2Ghq1N_o.png" width="1200"></p> 
<p> 查看数据库是否插入张三的信息：</p> 
<p><img alt="" height="262" src="https://images2.imgbox.com/34/ee/FkzSQih9_o.png" width="1200"></p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD">二、编写登录功能</h2> 
<h3 id="%C2%A0%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82"> 🍅 1、使用ajax构造请求</h3> 
<p> 在前端页面的&lt;head&gt;&lt;/head&gt;添加jquery</p> 
<pre><code class="language-html">&lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;</code></pre> 
<p>添加事件：点击提交按钮，触发mysub()</p> 
<pre><code class="language-html">&lt;div class="row"&gt;
       &lt;button id="submit" onclick="doLogin()"&gt;提交&lt;/button&gt;
&lt;/div&gt;</code></pre> 
<blockquote> 
 <p>        （1）校验参数</p> 
 <p>        （2）将数据提交给后端</p> 
 <p>        （3）将结果展示给前端</p> 
</blockquote> 
<pre><code class="language-javascript">&lt;script&gt;
    function doLogin(){
        // 参数校验
        var username = jQuery("#username");
        var password = jQuery("#password");
        if(username.val().trim()==""){
            alert("请先输入用户名！");
            username.focus();
            return false;
        }
        if(password.val().trim()==""){
            alert("请先输入密码！");
            password.focus();
            return false;
        }
    //     将数据提交给后端
        jQuery.ajax({
            url:"/user/login",
            type:"GET",
            data:{
                "username":username.val(),
                "password":password.val()
            },
            success:function(res){
            //     将结果展示给用户
                if (res.code==200 &amp;&amp; res.data==1){
                    alert("登录成功！");
                    location.href="myblog_list.html";
                }else {
                    alert("登录失败!" + res.msg);
                }
            }
        });
    }
&lt;/script&gt;</code></pre> 
<h3 id="%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82">🍅 2、处理请求</h3> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB">        🎄 创建实体类</h4> 
<p>首先，再创建一个扩展Userinfo的实体类，UserinfoVO</p> 
<p><img alt="" height="220" src="https://images2.imgbox.com/c5/a3/FdAOWUWz_o.png" width="641"></p> 
<p></p> 
<pre><code class="language-javascript">/*
* userinfo扩展类
* */
@Data
public class UserinfoVO extends Userinfo {
    private String checkCode;
}</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95">        🎄 添加接口方法</h4> 
<p>在UserMapper中添加以下方法：</p> 
<pre><code class="language-javascript">@Select("select * from userinfo where username = #{username} order by id desc")
    Userinfo getUserByName(@Param("username")String username);</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%F0%9F%8E%84%20service%E5%B1%82">         🎄 service层</h4> 
<pre><code class="language-javascript"> public Userinfo getUserByName(String username){
        return userMapper.getUserByName(username);
    }</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%F0%9F%8E%84%20controller%EF%BC%9A%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%B9%B6%E8%BF%94%E5%9B%9E">        🎄 controller：处理请求并返回</h4> 
<p>首先创建一个公共类（common包中）：AppVariable</p> 
<p>设置一个用户的session key</p> 
<pre><code class="language-javascript">/*
* 全局变量
* */
public class AppVariable {
    public static final String SESSION_USERINFO_KEY = "SESSION_USERINFO";
}</code></pre> 
<blockquote> 
 <p>        （1）参数校验</p> 
 <p>        （2）根据用户名查询对象</p> 
 <p>        （3）适用对象中的密码和用户输入的密码进行比较</p> 
 <p>          登录验证思路：根据用户名查询对象，如果查询到对象，则用查询到的对象和传递过              来的密码对比。如果相同，则说明登陆成功，反之则不能。   </p> 
 <p>        （4）比较成功之后，将对象存储到session中</p> 
 <p>        （5）将结果返回给用户</p> 
</blockquote> 
<pre><code class="language-javascript"> @RequestMapping("/login")
    public ResultAjax login(UserinfoVO userinfoVO, HttpServletRequest request){
        //参数校验
        if (userinfoVO == null || !StringUtils.hasLength(userinfoVO.getUsername()) ||
                !StringUtils.hasLength(userinfoVO.getPassword())){
//            是非法登录
            return ResultAjax.fail(-1,"参数有误！");
        }
        //根据用户查询对象
        Userinfo userinfo = userService.getUserByName(userinfoVO.getUsername());
        if (userinfo == null || userinfo.getId() == 0){
            return ResultAjax.fail(-2,"用户名或密码错误！");
        }
        //使用对象中的密码和用户输入的密码进行比较
        if (!userinfoVO.getPassword().equals(userinfo.getPassword())){
//            密码错误
            return ResultAjax.fail(-2,"用户名或密码错误！");
        }
        //比较成功，将对象存储到session中
        HttpSession session = request.getSession();
        session.setAttribute(AppVariable.SESSION_USERINFO_KEY,userinfo);
        //将结果返回给用户
        return ResultAjax.success(1);
    }</code></pre> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99%E5%8D%9A%E5%AE%A2%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2">三、编写博客列表页面</h2> 
<h3 id="%C2%A0%F0%9F%8D%85%201%E3%80%81SessionUtils"> 🍅 1、SessionUtils</h3> 
<p>由于要拿到用户的信息，也就是拿到用户对象，比如修改和删除博客等功能（都是需要拿到用户），所以得到用户对象就属于一个高频事件。</p> 
<p>所以就创建一个类，可以得到用户对象。</p> 
<p><img alt="" height="141" src="https://images2.imgbox.com/53/f5/EP6OsFhz_o.png" width="578"></p> 
<pre><code class="language-java">/*
* session工具类
* */
public class SessionUtils {
//    得到登录用户
    public static Userinfo getUser(HttpServletRequest request){
//        false代表有session就创建session，没有就创建
        HttpSession session = request.getSession(false);
        if (session != null &amp;&amp; session.getAttribute(AppVariable.SESSION_USERINFO_KEY) != null){
//            登录状态
            return (Userinfo) session.getAttribute(AppVariable.SESSION_USERINFO_KEY);
        }
        return null;
    }
}</code></pre> 
<h3 id="%C2%A0%F0%9F%8D%85%202%E3%80%81%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"> 🍅 2、处理请求</h3> 
<p>🎄 添加接口方法（mapper）</p> 
<pre><code class="language-java">@Mapper
public interface ArticleMapper {
    @Select("select * from articleinfo where uid=#{uid}")
    List&lt;ArticleMapper&gt; getListByUid(@Param("uid")int uid);
}</code></pre> 
<p>🎄 service层</p> 
<p>对象注入</p> 
<pre><code class="language-java">@Service
public class ArticleService {
    @Autowired
    private ArticleMapper articleMapper;
    public List&lt;ArticleMapper&gt; getListByUid(int uid){
        return articleMapper.getListByUid(uid);
    }
}</code></pre> 
<p>🎄controller处理请求并返回响应</p> 
<p>使用并行的方式处理文章正文（_DESC_LENGTH是简介）</p> 
<pre><code class="language-java">@RestController
@RequestMapping("art")
public class ArticleController {
    @Autowired
    public ArticleService articleService;
    private static final int _DESC_LENGTH = 120;
    @RequestMapping("/mylist")
    public ResultAjax myList(HttpServletRequest request){
//        得到登录用户
        Userinfo userinfo = SessionUtils.getUser(request);
        if (userinfo == null){
            return ResultAjax.fail(-1,"请先登录");
        }
//      根据用户id查询用户发表的文章
        List&lt;Articleinfo&gt; list = articleService.getListByUid(userinfo.getId());
//        处理list -&gt; 将文章正文变成简介
        if (list != null &amp;&amp; list.size() &gt; 0){
//            并行处理list集合
            list.stream().parallel().forEach((art)-&gt;{
                if (art.getContent().length() &gt; _DESC_LENGTH){
                    art.setContent(art.getContent().substring(0,_DESC_LENGTH));
                }
            });
        }
//        返回前端
        return ResultAjax.success(list);
    }
}</code></pre> 
<p></p> 
<h3 id="%F0%9F%8D%85%203%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82">🍅 3、使用ajax构造请求</h3> 
<p>在前端页面的&lt;head&gt;&lt;/head&gt;添加jquery</p> 
<pre><code class="language-html">&lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;</code></pre> 
<p>添加一个id，包含了文章列表的div</p> 
<pre><code class="language-java">       &lt;div id="artListDiv" class="container-right"&gt;</code></pre> 
<pre><code class="language-javascript"> &lt;script&gt;
        // 初始化方法
        function init(){
            jQuery.ajax({
                url:"/art/mylist",
                type:"GET",
                data:{},
                success:function(res){
                    if(res.code==200){
                        // 请求成功
                        var createHtml = "";
                        var artList = res.data;
                        if(artList==null || artList.length==0){
                            // 未发表文章
                            createHtml += "&lt;h3 style='margin-left:20px;margin-top:20px'&gt;暂无文章，请先"+
                                "&lt;a href='blog_add.html'&gt;添加&lt;/a&gt;！&lt;/h3&gt;";
                        }else{
                            for(var i=0;i&lt;artList.length;i++){
                                var art = artList[i];
                                createHtml += '&lt;div class="blog"&gt;';
                                createHtml += '&lt;div class="title"&gt;'+art.title+'&lt;/div&gt;';
                                createHtml += '&lt;div class="date"&gt;'+art.createtime+'&lt;/div&gt;';
                                createHtml += '&lt;div class="desc"&gt;';
                                createHtml += art.content;
                                createHtml += '&lt;/div&gt;';
                                createHtml += ' &lt;a href="blog_content.html?aid='+
                                    art.id + '" class="detail"&gt;查看全文 &amp;gt;&amp;gt;&lt;/a&gt;&amp;nbsp;&amp;nbsp;';
                                createHtml += '&lt;a href="blog_edit.html?aid='+
                                    art.id + '" class="detail"&gt;修改 &amp;gt;&amp;gt;&lt;/a&gt;&amp;nbsp;&amp;nbsp;';
                                createHtml += ' &lt;a href="javascript:del('+art.id+')" class="detail"&gt;删除 &amp;gt;&amp;gt;&lt;/a&gt;';
                                createHtml += '&lt;/div&gt;';
                            }
                        }
                        jQuery("#artListDiv").html(createHtml);
                    }else{
                        alert("抱歉：操作失败！"+res.msg);
                    }
                }
            });
        }
        init();
    &lt;/script&gt;
&lt;/body&gt;</code></pre> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99%E6%B3%A8%E9%94%80%E5%8A%9F%E8%83%BD">三、编写注销功能</h2> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82">🍅 1、使用ajax获取请求</h3> 
<p>由于注销功能，在很多页面都需要用到，所以这里就给一个公共的js</p> 
<p><img alt="" height="158" src="https://images2.imgbox.com/a9/26/xLGhM0yD_o.png" width="623"></p> 
<pre><code class="language-javascript">function logout(){
    if (confirm("是否确定注销？")){
        // 1、在后端删除session信息
        jQuery.ajax({
            url:"/user/logout",
            type:"POST",
            data:{},
            success:function (res){}
        });
        // 2、跳转到登录页
        location.href = "login.html"
    }
}</code></pre> 
<p> 进入到myblog_list.html中：</p> 
<pre><code class="language-javascript">&lt;script src="js/logout.js"&gt;&lt;/script&gt;</code></pre> 
<pre><code class="language-javascript">&lt;a href="javascript:logout()"&gt;注销&lt;/a&gt;</code></pre> 
<h3>🍅 2、处理请求</h3> 
<pre><code class="language-javascript">//注销
    @RequestMapping("/logout")
    public ResultAjax logout(HttpServletRequest request){
        HttpSession session = request.getSession(false);
        if (session!=null &amp;&amp;
                session.getAttribute(AppVariable.SESSION_USERINFO_KEY)!=null){
            session.removeAttribute(AppVariable.SESSION_USERINFO_KEY);
        }
        return ResultAjax.success(1);
    }</code></pre> 
<h3></h3> 
<h2 id="%E5%9B%9B%E3%80%81%E7%BC%96%E5%86%99%E5%88%A0%E9%99%A4%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD">四、编写删除文章功能</h2> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82">🍅 1、使用ajax构造请求</h3> 
<p>在myblog_list.html中添加对应的js代码</p> 
<blockquote> 
 <p>主要是根据id删除文章：</p> 
 <p>        1、校验参数</p> 
 <p>        2、将数据返回给后端进行删除操作</p> 
 <p>        2、将结果展示给用户</p> 
</blockquote> 
<pre><code class="language-javascript"> //     删除文章操作（根据id删除）
        function del(aid){
        //     参数校验
            if(aid=="" || aid&lt;=0){
                alert("参数错误");
                return false;
            }
        //     将数据返回给后端进行删除操作
            jQuery.ajax({
                url:"/art/del",
                type:"POST",
                data:{
                    "aid":aid
                },
                success:function (res){
                //     将结果展示给用户
                    if (res.code==200 &amp;&amp; res.data==1){
                        alert("恭喜：删除成功！");
                    //     刷新页面
                        location.href = location.href;
                    }else {
                    //     删除失败
                        alert("抱歉：操作失败！"+res.msg);
                    }
                }
            });
        }</code></pre> 
<h3>🍅 2、处理请求</h3> 
<h4 id="%F0%9F%8E%84%20mapper%E5%B1%82%EF%BC%9A%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95">🎄 mapper层：接口方法</h4> 
<p>在ArticleMapper中添加接口方法</p> 
<pre><code class="language-javascript">@Delete("delete from articleinfo where id=#{aid} and uid=#{uid}")
int del(@Param("aid")Integer aid,int uid);</code></pre> 
<h4 id="%F0%9F%8E%84%20service%E5%B1%82">🎄 service层</h4> 
<pre><code class="language-javascript">public int del(Integer aid,int uid){
        return articleMapper.del(aid,uid);
    }</code></pre> 
<h4 id="%F0%9F%8E%84%20controller%E5%B1%82%EF%BC%9A%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82">🎄 controller层：处理请求</h4> 
<blockquote> 
 <p>主要有以下几步：</p> 
 <p>        1、参数校验</p> 
 <p>        2、得到当前登录的用户</p> 
 <p>        3、判断文章的归属人并且进行删除操作</p> 
 <p>        4、将结果返回给前端</p> 
</blockquote> 
<pre><code class="language-javascript">//    删除文章
    @RequestMapping("/del")
    public ResultAjax del(Integer aid,HttpServletRequest request){
        if (aid==null || aid&lt;=0){
            return ResultAjax.fail(-1,"参数错误！");
        }
        Userinfo userinfo = SessionUtils.getUser(request);
        if (userinfo == null){
            return ResultAjax.fail(-1,"请先登录！");
        }
        int result = articleService.del(aid,userinfo.getId());
        return ResultAjax.success(result);
    }</code></pre> 
<h2 id="%E4%BA%94%E3%80%81%E7%BC%96%E5%86%99%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD">五、编写文章添加功能</h2> 
<h3>🍅 1、使用ajax构造请求</h3> 
<blockquote> 
 <p>        （1）非空校验</p> 
 <p>        （2）将用户提交的数据传递给后端</p> 
 <p>        （3）将后端返回的结果展示给用户</p> 
</blockquote> 
<p>进入到blog_add.html中，添加如下代码</p> 
<pre><code class="language-javascript"> function mysub(){
            var title = jQuery("#title");
            if (title.val.trim()==""){
                alert("请先输入标题！");
                title.focus();
                return false;
            }
            if (editor.getValue()==""){
                alert("请先输入正文！");
                return false;
            }
            jQuery.ajax({
                url:"/art/add",
                type:"POST",
                data:{
                    "title":title.val(),
                    "content":editor.getValue()
                },
                success:function (res){
                    // 文章添加成功
                    if (res.code==200 &amp;&amp; res.data==1){
                        if (confirm("恭喜：添加成功！是否继续添加文章？")){
                            location.href=location.href;
                        }else{
                            location.href="myblog_list.html"
                        }
                    }else {
                    //文章添加失败
                        alert("抱歉：操作失败！"+res.msg);
                    }
                }
            });
        }</code></pre> 
<h3>🍅 2、处理请求</h3> 
<h4 id="%C2%A0%F0%9F%8E%84mapper%E5%B1%82%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95"> 🎄mapper层：添加接口方法</h4> 
<pre><code class="language-javascript">@Insert("insert into articleinfo(title,content,uid) values(#{title},#{content},#{uid})")
    int add(Articleinfo articleinfo);</code></pre> 
<h4 id="%C2%A0%F0%9F%8E%84service%E5%B1%82%EF%BC%9A%E8%BF%94%E5%9B%9E%E5%8F%97%E5%BD%B1%E5%93%8D%E8%A1%8C%E6%95%B0"> 🎄service层：返回受影响行数</h4> 
<pre><code class="language-javascript">public int add(Articleinfo articleinfo){
        return articleMapper.add(articleinfo);
    }</code></pre> 
<h4 id="%F0%9F%8E%84%20controller%EF%BC%9A%E5%A4%84%E7%90%86%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%9A%84%E8%AF%B7%E6%B1%82">🎄 controller：处理添加文章的请求</h4> 
<blockquote> 
 <p>主要分为以下几步：</p> 
 <p>        （1）校验参数</p> 
 <p>        （2）组装数据</p> 
 <p>        （3）将数据入库</p> 
 <p>        （4）将结果返回给前端</p> 
</blockquote> 
<pre><code class="language-java">@RequestMapping("/add")
    public ResultAjax add(Articleinfo articleinfo,HttpServletRequest request){
        if (articleinfo==null || !StringUtils.hasLength(articleinfo.getTitle())
                || !StringUtils.hasLength(articleinfo.getContent())){
            return ResultAjax.fail(-1,"非法参数！");
        }
        Userinfo userinfo = SessionUtils.getUser(request);
        if (userinfo == null){
            return ResultAjax.fail(-2,"请先登录");
        }
        articleinfo.setUid(userinfo.getId());
        int result = articleService.add(articleinfo);
        return ResultAjax.success(result);
    }</code></pre> 
<h2 id="%E5%85%AD%E3%80%81%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%88%B0%E4%BF%AE%E6%94%B9%E7%9A%84%E6%96%87%E7%AB%A0">六、修改功能：查询到修改的文章</h2> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E9%80%9A%E8%BF%87ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82">🍅 1、通过ajax构造请求</h3> 
<blockquote> 
 <p>（1）获取url中的参数：</p> 
 <p>（例如）localhost:8080/blog_edit.html?aid=2&amp;uid=1</p> 
 <p>        a、通过location.search获取“？”后面的参数</p> 
 <p>        b、去除“？”</p> 
 <p>        c、根据“&amp;”将参数分割成多个数组</p> 
 <p>        d、循环对比key，并返回查询value</p> 
 <p>创建一个公共的js：</p> 
 <p></p> 
 <p><img alt="" height="165" src="https://images2.imgbox.com/0b/ac/6GlSGWBq_o.png" width="494"></p> 
 <pre><code class="language-java">// 根据key获取到对应的url中对应的value
function getParamValue(key){
    var params = location.search;
    if (params.indexOf("?")&gt;=0){
        params=params.substring(1);
        var paramArray=params.split("&amp;");
        if (paramArray.length&gt;=1){
            for (var i = 0; i &lt; paramArray.length; i++) {
                var item=paramArray[i].split("=");
                if (item[0]==key[1]){
                    return item;
                }
            }
        }
    }
    return null;
}</code></pre> 
 <p>（2）校验 aid</p> 
 <p>（3）查询文章详情</p> 
 <p>（4）将文章的详情信息展示到页面</p> 
</blockquote> 
<p>首先在head中添加得到参数的方法</p> 
<pre><code class="language-javascript">    &lt;script src="js/urlutils.js"&gt;&lt;/script&gt;
</code></pre> 
<p>在blog_edit.html中的&lt;script&gt;&lt;/script&gt;中添加代码</p> 
<pre><code class="language-java">        var aid=getParamValue("aid");
        function init(){
            if (aid==null || aid&lt;=0){
                alert("非法参数")
                return false;
            }
            jQuert.ajax({
                url:"/art/getdetail",
                type:"GET",
                data:{
                  "aid":aid
                },
                success:function(res){
                    if (res.code==200 &amp;&amp; res.data!=null &amp;&amp; res.data.id&gt;0){
                        jQuery("#title").val(res.data.title);
                        initEdit(res.data.content);
                    }else {
                        alert("抱歉，查询失败！"+res.msg);
                    }
                }
            });
        }
        init();</code></pre> 
<h3>🍅 2、处理请求</h3> 
<h4 id="%F0%9F%8E%84Mapper%E5%B1%82%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3">🎄Mapper层：添加接口</h4> 
<p>进入到ArticleMapper中</p> 
<pre><code class="language-java">@Select("select  * from aeticleinfo where id=#{aid} and uid=#{uid}")
    Articleinfo getArticleByIdAndUid(@Param("aid")int aid,
                                     @Param("uid")int uid);</code></pre> 
<h4 id="%F0%9F%8E%84service%E5%B1%82">🎄service层</h4> 
<pre><code class="language-java"> public Articleinfo getArticleByIdAndUid(int aid,int uid){
        return ArticleMapper.getArticleByIdAndUid(aid,uid);
    }</code></pre> 
<h4 id="%F0%9F%8E%84controller%E5%B1%82">🎄controller层</h4> 
<blockquote> 
 <p>（1）校验参数</p> 
 <p>（2）得到当前登录用户id</p> 
 <p>（3）查询文章并且校验权限</p> 
</blockquote> 
<pre><code class="language-java">@RequestMapping("/update_init")
    public ResultAjax updateInit(Integer aid,HttpServletRequest request){
        if (aid==null || aid&lt;=0 ){
            return ResultAjax.fail(-1,"参数有误！");
        }
        Userinfo userinfo = SessionUtils.getUser(request);
        if (userinfo == null){
            return ResultAjax.fail(-2,"请先登录！");
        }
        Articleinfo articleinfo = articleService.getArticleByIdAndUid(aid,userinfo.getId())
        return ResultAjax.success(articleinfo);
    }</code></pre> 
<p></p> 
<h2 id="%E4%B8%83%E3%80%81%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD%EF%BC%9A%E4%BF%AE%E6%94%B9%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%9A%84%E6%96%87%E7%AB%A0">七、修改功能：修改查询到的文章</h2> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E9%80%9A%E8%BF%87ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0"><strong>🍅 1、通过ajax构造请求            </strong></h3> 
<p>进入到blog_edit.html中     </p> 
<pre><code class="language-javascript">        &lt;button onclick="doUpdate()"&gt;修改文章&lt;/button&gt;
</code></pre> 
<pre><code class="language-java">function doUpdate(){
            if(title.val().trim()==""){
                alert("请先输入标题！");
                title.focus();
                return false;
            }
            if(editor.getValue()==""){
                alert("请先输入正文！");
                return false;
            }

            jQuery.ajax({
                url:"/art/update",
                type:"POST",
                data:{
                    "id":aid,
                    "title":title.val(),
                    "content":editor.getValue()
                },
                success:function(res){
                    if(res.code==200 &amp;&amp; res.data==1){
                        // 修改成功
                        alert("恭喜：修改成功！");
                        // 跳转到我的文章管理员
                        location.href = "myblog_list.html";
                    }else if(res.code==-2){
                        alert("请先的登录！");
                        location.href = "login.html";
                    }
                    else{
                        alert("抱歉：修改失败！"+res.msg);
                    }
                }
            });
        }</code></pre> 
<h3>🍅 2、处理请求</h3> 
<h4 id="%F0%9F%8E%84%20mapper%E5%B1%82">🎄 mapper层</h4> 
<p>进入到ArticleMappe中</p> 
<pre><code class="language-java">@Update("update articleinfo set title=#{title},content=#{content} where id=#{id} and uid=#{uid}")
    int update(Articleinfo articleinfo);</code></pre> 
<h4>🎄 service层</h4> 
<p>进入到ArticleService中</p> 
<pre><code class="language-java">public int update(Articleinfo articleinfo){
        return articleMapper.update(articleinfo);
    }</code></pre> 
<h4 id="%F0%9F%8E%84%20controller%E5%B1%82%C2%A0%20%C2%A0%20%C2%A0">🎄 controller层     </h4> 
<blockquote> 
 <p>（1）参数校验</p> 
 <p>（2）获取登录用户</p> 
 <p>（3）修改文章，并且校验归属人</p> 
 <p>（4）返回结果</p> 
</blockquote> 
<pre><code class="language-java">//    修改文章信息
    @RequestMapping("/update")
    public ResultAjax update(Articleinfo articleinfo,HttpServletRequest request){
        if (articleinfo==null || !StringUtils.hasLength(articleinfo.getTitle())
                || !StringUtils.hasLength(articleinfo.getContent())
                || articleinfo.getId() == 0){
            return ResultAjax.fail(-1,"非法参数！");
        }

        Userinfo userinfo = SessionUtils.getUser(request);
        if (userinfo == null){
            return ResultAjax.fail(-2,"请先登录！");
        }
        articleinfo.setUid(userinfo.getId());
        int result = articleService.update(articleinfo);
        return ResultAjax.success(result);
    }</code></pre> 
<h3></h3> 
<h2 id="%E5%85%AB%E3%80%81%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85">八、文章详情</h2> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%BC%96%E5%86%99">🍅 1、前端页面编写</h3> 
<p>进入到blog_content.html中</p> 
<h4 id="%F0%9F%8E%84%20%E7%BB%99%E5%AE%9Aid%E5%80%BC">🎄 给定id值</h4> 
<pre><code class="language-java">    //左侧的个人信息
                &lt;img id="photo" src="img/avatar.png" class="avtar" alt=""&gt;
                &lt;h3 id="username"&gt;&lt;/h3&gt;
                &lt;a href="http:www.github.com"&gt;github 地址&lt;/a&gt;</code></pre> 
<pre><code class="language-java">        //右侧的博客信息
                 &lt;!-- 博客标题 --&gt;
                &lt;h3 id="title"&gt;&lt;/h3&gt;
                &lt;!-- 博客时间 --&gt;
                &lt;div class="date"&gt;
                    发布时间：&lt;span id="createtime"&gt;&lt;/span&gt;
                     /
                    阅读量：&lt;span id="rcount"&gt;&lt;/span&gt;
                &lt;/div&gt;</code></pre> 
<h4 id="%C2%A0%F0%9F%8E%84%20%E4%BD%BF%E7%94%A8ajax%E6%9E%84%E9%80%A0%E8%AF%B7%E6%B1%82"> 🎄 使用ajax构造请求</h4> 
<pre><code class="language-java">        var aid = getParamValue("aid");
//初始化页面
            function init(){
                var aid = getParamValue("aid");
                if (aid==null || aid&lt;=0){
                    alert("参数有误！");
                    return false;
                }
                jQuery.ajax({
                    url:"/art/detail",
                    type:"GET",
                    data:{
                        "aid":aid
                    },
                    success: function (res){
                        if (res.code==200 &amp;&amp; res.data!=null){
                            var user = res.data.user;
                            var art = res.data.art;
                            if (user!=null){
                                if(user.photo!=""){
                                    jQuery("#photo").art("src,user.photo");
                                }
                                jQuery("#username").html(user.username);
                                jQuery("#artcount").html(user.artCount);
                            }else{
                                alert("抱歉：查询失败!"+reg.msg);
                            }
                            if(art!=null){
                                jQuery("#title").html(art.title);
                                jQuery("#createtime").html(art.createtime);
                                jQuery("#rcount").html(art.rcount);
                                initEdit(art.content);
                            }else{
                                alert("抱歉：查询失败！"+reg.msg)
                            }
                        }else{
                            alert("抱歉，查询失败！"+res.msg);
                        }
                    }
                });
            }</code></pre> 
<h3>🍅 2、处理请求</h3> 
<p>首先在userinfoVO中添加一个变量：</p> 
<pre><code class="language-java">    private int artCount;   //用户发布的文章总数
</code></pre> 
<h4>🎄 mapper层</h4> 
<p>首先在Articleinfo中添加一条sql：根据id查询文章</p> 
<pre><code class="language-java">@Select("select * from articleinfo where id=#{aid}")
    Articleinfo getDetaiById(@Param("aid") int aid);

 @Select("select count(*) from articleinfo where uid=#{uid}")
    int getArticleByUid(@Param("uid")int uid);</code></pre> 
<p> 然后再Userinfo中添加一条sql：根据id查询用户</p> 
<pre><code class="language-java">@Select("select * from us erinfo where id=#{uid}")
    UserinfoVO getUserById(@Param("uid") int uid);</code></pre> 
<h4>🎄 service层</h4> 
<p>ArticleService中</p> 
<pre><code class="language-java">    public Articleinfo getDetail(int aid){
        return articleMapper.getDetaiById(aid);
    }

 public int getArtCountByUid(int uid){
        return articleMapper.getArticleByUid(uid);
    }</code></pre> 
<p> UserService中</p> 
<pre><code class="language-java">    public UserinfoVO getUserById(int uid){
        return userMapper.getUserById(uid);
    }</code></pre> 
<h4 id="%F0%9F%8E%84%20controller%E5%B1%82%C2%A0">🎄 controller层 </h4> 
<blockquote> 
 <p>（1）参数校验</p> 
 <p>（2）查询文章详情 </p> 
 <p>（3）根据uid查询用户的详情</p> 
 <p>（4）根据uid查询用户发表的总文章数</p> 
 <p>（5）组装数据</p> 
 <p>（6）返回结果给前端</p> 
</blockquote> 
<p>首先创建一个线程池</p> 
<p><img alt="" height="159" src="https://images2.imgbox.com/43/6b/aUo7b2v7_o.png" width="466"></p> 
<p>使用ThreadPoolExecutor来构造线程池，该方法其实和JDK中的ThreadPool区别就在于，ThreadPoolExecutor式通过参数的方式去设置，而ThreadPool是通过构造方法，ThreadPoolExecutor中的方式更加直观简单。</p> 
<p>ThreadPool然后将其注入依赖</p> 
<pre><code class="language-java">    @Autowired
    private ThreadPoolTaskExecutor taskExecutor;</code></pre> 
<p> 处理请求：</p> 
<p>先注入依赖：</p> 
<pre><code class="language-java">    @Autowired
    private UserService userService;</code></pre> 
<p> 使用多线程并发编程就可以很快的查询到对应的文章详情了。</p> 
<pre><code class="language-java">//查询文章详情页
    @RequestMapping("/detail")
    public ResultAjax detail(Integer aid) throws ExecutionException, InterruptedException {
        if(aid==null || aid&lt;=0){
            return ResultAjax.fail(-1,"非法参数");
        }

        Articleinfo articleinfo = articleService.getDetail(aid);
        if (articleinfo == null || articleinfo.getId() &lt;= 0){
            return ResultAjax.fail(-1,"非法参数！");
        }
        //根据uid查询用户的详情
        FutureTask&lt;UserinfoVO&gt; userTask = new FutureTask(()-&gt;{
            return userService.getUserById(articleinfo.getUid());
        });
        taskExecutor.submit(userTask);

        //根据uid查询用户发表的文章数
        FutureTask&lt;Integer&gt; artCountTask = new FutureTask&lt;&gt;(()-&gt;{
            return articleService.getArtCountByUid(articleinfo.getUid());
        });
        taskExecutor.submit(artCountTask);

        //等待任务（线程池）执行完
        UserinfoVO userinfoVO = userTask.get();
        int artCount = artCountTask.get();
        userinfoVO.setArtCount(artCount);

        //数据组装
        HashMap&lt;String,Object&gt; result = new HashMap&lt;&gt;();
        result.put("user",userinfoVO);
        result.put("art",articleinfo);

        return ResultAjax.success(result);
    }</code></pre> 
<h2 id="%E4%B9%9D%E3%80%81%E9%98%85%E8%AF%BB%E9%87%8F%E8%AE%BE%E7%BD%AE">九、阅读量设置</h2> 
<p>🍅 使用ajax构造请求</p> 
<pre><code class="language-java"> //访问量+1
            function increamentRCount(){
                if (aid==null || aid&lt;=0 ){
                    return false;
                }
                jQuery.ajax({
                   url:"/art/increment_rcount",
                   type:"POST",
                   data:{
                       "aid":aid
                   },
                    success:function(res){}
                });
            }
            increamentRCount();</code></pre> 
<h3 id="%F0%9F%8D%85%20%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82">🍅 处理请求</h3> 
<h4>🎄 mapper层</h4> 
<pre><code class="language-java">    @Update("update articleinfo set rcount=rcount+1 where id=#{aid}")
    int incrementRCount(@Param("aid") int aid);</code></pre> 
<h4>🎄 service层</h4> 
<pre><code class="language-java">    public int incrementRCount(int aid){
        return articleMapper.incrementRCount(aid);
    }</code></pre> 
<h4>🎄 controller层 </h4> 
<blockquote> 
 <p>（1）校验参数</p> 
 <p>（2）更改数据库</p> 
 <p>（3）返回结果</p> 
</blockquote> 
<pre><code class="language-java"> @RequestMapping("/increment_rcount")
    public ResultAjax incrementRCount(Integer aid){
        if (aid==null || aid&lt;=0){
            return ResultAjax.fail(-1,"参数有误！");
        }

        int result = articleService.incrementRCount(aid);
        return ResultAjax.success(result);
    }</code></pre> 
<hr> 
<h2 id="%C2%A0%E5%8D%81%E3%80%81%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86"> 十、分页处理</h2> 
<blockquote> 
 <p><strong>核心参数：</strong></p> 
 <p>        （1）页码（当前在第几页）</p> 
 <p>        （2）每页显示的最大条数（前端灵活的控制分页功能）</p> 
 <p><strong>后端分页返回：</strong></p> 
 <p>        （1）当前页面的文章列表</p> 
 <p>        （2）总共有多少页：根据博客总条数/每一页显示条数的结果，向上取整（比如3.3333             取为4）</p> 
</blockquote> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E5%89%8D%E7%AB%AF%E5%A4%84%E7%90%86" style="background-color:transparent;">🍅 1、前端处理</h3> 
<p>首先将对应的js引入进，来根据总条数每页显示条数（向上取整</p> 
<p>添加一个id属性：主要是为了构造出每一条博客的div出来</p> 
<pre><code class="language-javascript">&lt;!-- 每一篇博客包含标题, 摘要, 时间 --&gt;    
     &lt;div id="artListDiv"&gt;

            &lt;/div&gt;</code></pre> 
<blockquote> 
 <p> 然后初始化数据：</p> 
 <p>        （1）得到url中的分页参数</p> 
 <p>        （2）qing求后端接口</p> 
 <p>        （3）将结果返回给用户</p> 
</blockquote> 
<pre><code class="language-javascript">var psize = 2; // 每页显示条数
    var pindex = 1; // 页码
    var totalpage = 1; // 总共有多少页
    // 初始化数据
    function init(){
        // 1.处理分页参数
        psize = getParamValue("psize");
        if(psize==null){
            psize = 2; // 每页显示条数
        }
        pindex = getParamValue("pindex");
        if(pindex==null){
            pindex = 1; // 页码
        }
        jQuery("#pindex").html(pindex);
        // 2.请求后端接口
        jQuery.ajax({
            url:"/art/getlistbypage",
            type:"GET",
            data:{
                "pindex":pindex,
                "psize":psize
            },
            success:function(res){
                // 3.将结果展示给用户
                if(res.code==200 &amp;&amp; res.data!=null){
                    var createHtml = "";
                    if(res.data.list!=null &amp;&amp; res.data.list.length&gt;0){
                        // 有文章
                        totalpage = res.data.size;
                        jQuery("#pszie").html(totalpage);
                        var artlist = res.data.list;
                        for(var i=0;i&lt;artlist.length;i++){
                            var art = artlist[i]; // 文章对象
                            createHtml += '&lt;div class="blog" &gt;';
                            createHtml += '&lt;div class="title"&gt;'+art.title+'&lt;/div&gt;';
                            createHtml += '&lt;div class="date"&gt;'+art.createtime+'&lt;/div&gt;';
                            createHtml += '&lt;div class="desc"&gt;'+art.content+'&lt;/div&gt;';
                            createHtml += '&lt;a href="blog_content.html?aid='+
                                art.id+'" class="detail"&gt;查看全文 &amp;gt;&amp;gt;&lt;/a&gt;';
                            createHtml += '&lt;/div&gt;';
                        }
                    }else{
                        // 暂无文章
                        createHtml += '&lt;h3 style="margin-top:20px;margin-left:20px;"&gt;暂无文章！&lt;/h3&gt;';
                    }
                    jQuery("#artListDiv").html(createHtml);
                }else{
                    alert("抱歉：查询失败！"+res.msg);
                }
            }
        });
    }
    init();

    
    //点击首页
    function doFirst(){
        if (pindex&lt;=1){
            alert("已经在首页了，无需跳转");
            return false;
        }
        location.href = "blog_list.html";
    }
    //跳转到末页
    function doLast(){
        if (pindex&gt;=totalpage){
            alert("已经在末页了，无需跳转！");
            return false;
        }
        location.href="blog_list.html?pindex="+totalpage;
    }
    //点击上一页
    function doBefore(){
        if (pindex&lt;=1){
            alert("已经在首页了，无需跳转");
            return false;
        }
        location.href="blog_list.html?pindex="+(parseInt(pindex)-1);
    }
    //点击下一页
    function doNext(){
        if (pindex&gt;=totalpage){
            alert("已经在末页了，无需跳转！");
            return false;
        }
        location.href="blog_list.html?pindex="+(parseInt(pindex)+1);
    }</code></pre> 
<h3 id="%F0%9F%8D%85%202%E3%80%81%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86">🍅 2、后端处理</h3> 
<blockquote> 
 <p>推导到分页公式：每页显示2条数据</p> 
 <p>每次只有偏移量offset变了</p> 
 <pre><code class="language-sql"># 第一页
mysql&gt; select * from articleinfo order by id limit 2 offset 0;

# 第二页
mysql&gt; select * from articleinfo order by id limit 2 offset 2;

# 第三页
mysql&gt; select * from articleinfo order by id limit 2 offset 4;
.....</code></pre> 
 <p>假设每条显示条数为pageSize，页码为pageIndex</p> 
 <p><strong>故而推到出的公式为：offset = pageSize*(pageIndex-1）</strong></p> 
</blockquote> 
<h4>🎄 mapper层</h4> 
<pre><code class="language-java">    @Select("select * from articleinfo order by id desc limit #{psize} offset #{offset} ")
    public List&lt;Articleinfo&gt; getListByPage(@Param("psize") int psize,@Param("offset")int offset);

        @Select("select count(*) from articleinfo")
    int getCount();</code></pre> 
<h4>🎄 service层</h4> 
<pre><code class="language-java">   public List&lt;Articleinfo&gt; getListByPage(int psize,int offset){
        return articleMapper.getListByPage(psize, offset);
    }</code></pre> 
<h4>🎄 controller层 </h4> 
<blockquote> 
 <p>        （1）加工矫正</p> 
 <p>        （2）并发进行文章列表和总页数的查询</p> 
 <p>        （3）组装数据</p> 
 <p>        （4）将结果返回给前端</p> 
</blockquote> 
<pre><code class="language-java">   @RequestMapping("/getlistbypage")
    public ResultAjax getListByPage(Integer pindex,Integer psize) throws ExecutionException, InterruptedException {
        if (pindex == null || pindex &lt; 1){
            pindex = 1;
        }
        if (psize==null || psize&lt;1){
            psize = 2;
        }

        //查询分页列表数据：
        Integer finalPsize = psize;
        Integer finalPindex = pindex;
        FutureTask&lt;List&lt;Articleinfo&gt;&gt; listTask = new FutureTask&lt;&gt;(()-&gt;{
            int finalOffset = finalPsize *(finalPindex -1);
            return articleService.getListByPage(finalPsize,finalOffset);
        }) ;

        //查询总页数
        FutureTask&lt;Integer&gt; sizeTask = new FutureTask&lt;&gt;(()-&gt;{
            int totalCount = articleService.getCount();
            double sizeTemp = (totalCount * 1.0) / (finalPsize * 1.0);
            return (int) Math.ceil(sizeTemp);
        });
        taskExecutor.submit(listTask);
        taskExecutor.submit(sizeTask);

        List&lt;Articleinfo&gt; list = listTask.get();
        int size = sizeTask.get();
        HashMap&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        map.put("list",list);
        map.put("size",size);

        return ResultAjax.success(map);
    }</code></pre> 
<h2 id="%E5%8D%81%E4%B8%80%E3%80%81%E5%AF%86%E7%A0%81%E5%8A%A0%E7%9B%90">十一、密码加盐</h2> 
<p>先修改数据库中的字段：</p> 
<pre><code class="language-javascript">mysql&gt; alter table userinfo modify password varchar(65) not null;</code></pre> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E5%AE%9A%E4%B9%89%E5%8A%A0%E5%AF%86%E8%A7%84%E5%88%99">🍅 1、定义加密规则</h3> 
<blockquote> 
 <p><strong>加密流程： </strong></p> 
 <p>使用加盐算法，也就是使用一个不重复随机的盐值+密码，得到一个无规律的密码                 （1）生成一个盐值</p> 
 <p>（2）（根据盐值 + 固定密码）进行加密 -&gt; md5（盐值 + 密码）= 最终密码</p> 
 <p>（3）将[盐值]+ [分隔符$] + 最终密码保存到数据库中 </p> 
 <p></p> 
 <p><strong>验证密码流程：</strong></p> 
 <p>（1）得到盐值</p> 
 <p>（2）md5（盐值+待验证密码）-&gt;  最终待验证的密码</p> 
 <p>（3）对比最终待验证的密码和数据中的最终密码是否相同-&gt; 相同密码正确</p> 
 <p>        </p> 
</blockquote> 
<p>创建一个加密解密的类：                                  </p> 
<p> <img alt="" height="216" src="https://images2.imgbox.com/e9/e3/mSAdYS9k_o.png" width="575"></p> 
<p></p> 
<pre><code class="language-javascript">public class PasswordUtils {
    //加盐加密
    public static String encrypt(String password){
        String salt = UUID.randomUUID().toString().replace("-","");
        String finalPassword = DigestUtils.md5DigestAsHex((salt+password).getBytes(StandardCharsets.UTF_8));

        return salt+"$"+finalPassword;
    }

    //待验证密码
    public static boolean decrypt(String password,String dbPassword){
        if (!StringUtils.hasLength(password) || !StringUtils.hasLength(dbPassword) ||
                dbPassword.length() != 65){
            return false;
        }
        String[] dbPasswordArray = dbPassword.split("$");
        if (dbPasswordArray.length!=2){
            return false;
        }
        String salt = dbPasswordArray[0];
        String dbFinalPassword = dbPasswordArray[1];

        String finalPassword = DigestUtils.md5DigestAsHex((salt+password).getBytes(StandardCharsets.UTF_8));
        if (finalPassword.equals(dbFinalPassword)){
            return true;
        }
        return false;
    }
}</code></pre> 
<h3 id="%F0%9F%8D%85%202%E3%80%81%E4%BF%AE%E6%94%B9UserController%E4%BB%A3%E7%A0%81">🍅 2、修改UserController代码</h3> 
<p>reg()方法中添加以下代码：</p> 
<pre><code class="language-javascript">        userinfo.setPassword(PasswordUtils.encrypt(userinfo.getPassword()));
</code></pre> 
<p> 在login()方法中添加以下代码</p> 
<pre><code class="language-javascript">//使用对象中的密码和用户输入的密码进行比较
       if (!PasswordUtils.decrypt(userinfoVO.getPassword(),userinfo.getPassword())){
           return ResultAjax.fail(-2,"用户名或者密码错误！");
       }</code></pre> 
<h2 id="%E5%8D%81%E4%BA%8C%E3%80%81session%E5%8D%87%E7%BA%A7%E5%AD%98%E5%82%A8%E5%88%B0redis">十二、session升级存储到redis</h2> 
<p>这个部分，还需要部署redis，先使用finalShell或者xshell远程连接Linux服务器，然后参考后面的博客去安装<a href="https://blog.csdn.net/qq_53332052/article/details/132109748?spm=1001.2014.3001.5506" title="Redis 安装以及配置隧道连接_点子李的博客-CSDN博客">Redis 安装以及配置隧道连接_点子李的博客-CSDN博客</a></p> 
<h3 id="%F0%9F%8D%85%201%E3%80%81%E5%85%88%E6%B7%BB%E5%8A%A0redis%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96">🍅 1、先添加redis相关依赖</h3> 
<pre><code class="language-XML">   &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
            &lt;version&gt;2.6.13&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;
            &lt;artifactId&gt;spring-session-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
<h3 id="%F0%9F%8D%85%202%E3%80%81%E6%B7%BB%E5%8A%A0redis%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%88properties%EF%BC%89">🍅 2、添加redis配置信息（properties）</h3> 
<pre><code class="language-XML">spring.redis.host=39.107.159.218
spring.redis.port=6379
spring.redis.password=
spring.redis.database=2
spring.session.store-type=redis</code></pre> 
<p>打开登录页面，发现存储成功</p> 
<p><img alt="" height="1189" src="https://images2.imgbox.com/4c/57/1VkDEjiG_o.png" width="1200"></p> 
<p></p> 
<h2 id="%C2%A0%E5%8D%81%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"> 十三、实现自定义拦截器</h2> 
<p><strong><code>Spring MVC</code></strong>中的拦截器(<strong><code>Interceptor</code></strong>)类似于ServLet中的过滤器<strong>(<code>Filter</code>)</strong>，它主要用于拦截用户请求并作出相应的处理。例如通过拦截器可以进行权限验证、记录请求信息的日志、判断用户是否登录等。</p> 
<p>首先创建拦截器</p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/04/21/xWs0mtS3_o.png" width="684"></p> 
<p></p> 
<pre><code class="language-java">public class LoginIntercept implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        HttpSession session = request.getSession(false);
        if (session!=null &amp;&amp; session.getAttribute(AppVariable.SESSION_USERINFO_KEY)!=null){
            //用户登录
            return true;
        }
        response.sendRedirect("/login.html");
        return false;
    }
}</code></pre> 
<p>然后创建一个类，定义拦截器规则</p> 
<p><img alt="" height="205" src="https://images2.imgbox.com/fa/35/VnhRLcWu_o.png" width="481"></p> 
<p></p> 
<pre><code class="language-java">@Configuration
public class MyConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new LoginIntercept())
                .addPathPatterns("/**")
                .excludePathPatterns("/user/login")
                .excludePathPatterns("/user/reg")
                .excludePathPatterns("/user/detail")
                .excludePathPatterns("/art/getlistbypage")
                .excludePathPatterns("/editor.md/*")
                .excludePathPatterns("/img/*")
                .excludePathPatterns("/js/*")
                .excludePathPatterns("/css/*")
                .excludePathPatterns("/login.html")
                .excludePathPatterns("/reg.html")
                .excludePathPatterns("/blog_list.html")
                .excludePathPatterns("/blog_content");
    }
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/75ee36b4be1e5b7e63d9c7f4dd4b8760/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">（python）求e的近似值</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68f77444c4442c330da860eb991bcbcd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">疑问：相同Service ID、不同Instance ID的SOME/IP服务如何被使用？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>