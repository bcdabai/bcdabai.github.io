<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Arduino core for ESP8266 WiFi chip  ESP8266 WiFi中文文档 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Arduino core for ESP8266 WiFi chip  ESP8266 WiFi中文文档" />
<meta property="og:description" content="https://github.com/esp8266/Arduino
https://arduino-esp8266.readthedocs.io/en/2.4.2/
这个项目为Arduino环境带来了对ESP8266芯片的支持。它允许您使用熟悉的Arduino函数和库编写草图，并直接在ESP8266上运行，不需要外部微控制器。ESP8266 Arduino core拥有使用TCP和UDP通过WiFi通信的库，设置HTTP、mDNS、SSDP和DNS服务器，做OTA更新，使用闪存中的文件系统，使用SD卡、伺服器、SPI和I2C外设。
ESP8266WiFi library ESP8266WiFi库 Quick Start 快速入门 #include &lt;ESP8266WiFi.h&gt; void setup() { Serial.begin(115200); Serial.println(); WiFi.begin(&#34;network-name&#34;, &#34;pass-to-network&#34;); Serial.print(&#34;Connecting&#34;); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print(&#34;.&#34;); } Serial.println(); Serial.print(&#34;Connected, IP address: &#34;); Serial.println(WiFi.localIP()); } void loop() {} 在线路WiFi。开始(“network-name”, “pass-to-network”)将&#34;network-name&#34;和&#34;pass-to-network&#34;替换为您想要连接的Wi-Fi网络的名称和密码。然后将草图上传到ESP模块，打开串口监视器应该能看到有IP输出。
#include &lt;ESP8266WiFi.h&gt; 包括ESP8266WiFi库。这个库提供了ESP8266特定的Wi-Fi例程，我们调用它来连接网络。
实际连接到Wi-Fi是通过调用:`
WiFi.begin(&#34;network-name&#34;, &#34;pass-to-network&#34;); 连接过程可能需要几秒钟的时间，我们正在检查，以完成以下循环:
while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print(&#34;.&#34;); } while()循环将在WiFi.status()不是WL_CONNECTED时继续循环。只有当状态更改为WL_CONNECTED时，循环才会退出。
最后一行将打印出DHCP分配给ESP模块的IP地址:
Serial.println(WiFi.localIP()); 注意:如果连接被建立，然后由于某种原因丢失，ESP将自动重新连接到最后使用的接入点，一旦它再次联机。这将由Wi-Fi库自动完成，无需任何用户干预。
Who is Who 工作模式 连接到Wi-Fi网络的设备称为工作站(STA)。连接到Wi-Fi由一个接入点(AP)提供，它充当一个或多个站点的集线器。另一端的接入点连接到有线网络。接入点通常与路由器集成在一起，提供从Wi-Fi网络到internet的访问。每个接入点都由一个SSID(服务集标识符)识别，它本质上是连接设备(站)到Wi-Fi时选择的网络名称。
ESP8266模块可以作为一个站运行，所以我们可以连接到Wi-Fi网络。它还可以作为软接入点(soft- ap)运行，以建立自己的Wi-Fi网络。因此，我们可以将其他站连接到这种ESP模块。ESP8266还可以在站和软接入点模式下运行。这提供了建立例如网状网络的可能性
ESP8266WiFi库提供了广泛的C方法(功能)和属性集合来配置和操作车站和/或软接入点模式下的ESP8266模块。
Class Description 类描述 Station (STA)模式 站(STA)模式用于使ESP模块连接到由接入点建立的Wi-Fi网络。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/219b902520718b4ade095d656202a3af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-13T22:19:36+08:00" />
<meta property="article:modified_time" content="2018-11-13T22:19:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Arduino core for ESP8266 WiFi chip  ESP8266 WiFi中文文档</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://github.com/esp8266/Arduino">https://github.com/esp8266/Arduino</a><br> <a href="https://arduino-esp8266.readthedocs.io/en/2.4.2/" rel="nofollow">https://arduino-esp8266.readthedocs.io/en/2.4.2/</a><br> 这个项目为Arduino环境带来了对ESP8266芯片的支持。它允许您使用熟悉的Arduino函数和库编写草图，并直接在ESP8266上运行，不需要外部微控制器。ESP8266 Arduino core拥有使用TCP和UDP通过WiFi通信的库，设置HTTP、mDNS、SSDP和DNS服务器，做OTA更新，使用闪存中的文件系统，使用SD卡、伺服器、SPI和I2C外设。</p> 
<h4><a id="ESP8266WiFi_library___ESP8266WiFi_3"></a>ESP8266WiFi library ESP8266WiFi库</h4> 
<h5><a id="Quick_Start____4"></a>Quick Start 快速入门</h5> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">"network-name"</span><span class="token punctuation">,</span> <span class="token string">"pass-to-network"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Connecting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Connected, IP address: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>在线路WiFi。开始(“network-name”, “pass-to-network”)将"network-name"和"pass-to-network"替换为您想要连接的Wi-Fi网络的名称和密码。然后将草图上传到ESP模块，打开串口监视器应该能看到有IP输出。<br> #include &lt;ESP8266WiFi.h&gt; 包括ESP8266WiFi库。这个库提供了ESP8266特定的Wi-Fi例程，我们调用它来连接网络。</p> 
<p>实际连接到Wi-Fi是通过调用:`</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">"network-name"</span><span class="token punctuation">,</span> <span class="token string">"pass-to-network"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>连接过程可能需要几秒钟的时间，我们正在检查，以完成以下循环:</p> 
<pre><code class="prism language-c"><span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>while()循环将在WiFi.status()不是WL_CONNECTED时继续循环。只有当状态更改为WL_CONNECTED时，循环才会退出。<br> 最后一行将打印出DHCP分配给ESP模块的IP地址:</p> 
<pre><code class="prism language-c">Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意:如果连接被建立，然后由于某种原因丢失，ESP将自动重新连接到最后使用的接入点，一旦它再次联机。这将由Wi-Fi库自动完成，无需任何用户干预。</p> 
<h5><a id="Who_is_Who___52"></a>Who is Who 工作模式</h5> 
<p>连接到Wi-Fi网络的设备称为工作站(STA)。连接到Wi-Fi由一个接入点(AP)提供，它充当一个或多个站点的集线器。另一端的接入点连接到有线网络。接入点通常与路由器集成在一起，提供从Wi-Fi网络到internet的访问。每个接入点都由一个SSID(服务集标识符)识别，它本质上是连接设备(站)到Wi-Fi时选择的网络名称。<br> ESP8266模块可以作为一个站运行，所以我们可以连接到Wi-Fi网络。它还可以作为软接入点(soft- ap)运行，以建立自己的Wi-Fi网络。因此，我们可以将其他站连接到这种ESP模块。ESP8266还可以在站和软接入点模式下运行。这提供了建立例如网状网络的可能性<br> <img src="https://images2.imgbox.com/c8/80/sG7Hi9bg_o.png" alt="在这里插入图片描述"><br> ESP8266WiFi库提供了广泛的C方法(功能)和属性集合来配置和操作车站和/或软接入点模式下的ESP8266模块。</p> 
<h4><a id="Class_Description____57"></a>Class Description 类描述</h4> 
<h5><a id="Station___STA_58"></a>Station (STA)模式</h5> 
<p>站(STA)模式用于使ESP模块连接到由接入点建立的Wi-Fi网络。<br> 站类描述分为四个部分。首先讨论到接入点建立连接的方法。第二，提供管理连接的方法，例如重新连接或isConnected。第三种是属性，用于获取有关连接的信息，如MAC或IP地址。最后，第四部分提供了连接的其他方法，比如Wi-Fi保护设置(WPS)。<br> 下面是另一个重载的开始的语法，所有可能的参数:</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">,</span> channel<span class="token punctuation">,</span> bssid<span class="token punctuation">,</span> connect<span class="token punctuation">)</span>
</code></pre> 
<p>参数的含义如下:* ssid-一个字符串,其中包含访问点的名称,我们想连接,可能有多达32个字符* * password,一个字符串,应该至少8个字符长,不超过64个字符** channel渠道,如果我们喜欢操作使用特定渠道,否则这个参数可以省略,* bssid- AP的mac地址,这个参数也可选 * connect——一个boolean,如果设置为false,指示模块只保存其他参数，而不实际建立接入点.</p> 
<h5><a id="config__67"></a>config 配置</h5> 
<p>禁用DHCP客户端(动态主机配置协议)，并将站接口的IP配置设置为用户定义的任意值。接口将是静态IP配置，而不是DHCP提供的值。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span>local_ip<span class="token punctuation">,</span> gateway<span class="token punctuation">,</span> subnet<span class="token punctuation">,</span> dns1<span class="token punctuation">,</span> dns2<span class="token punctuation">)</span>
</code></pre> 
<p>如果配置更改成功应用，函数将返回true。如果无法应用配置，例如模块不在站或站软接入点模式，则返回false。<br> 可提供以下IP配置:</p> 
<ol><li>local_ip ——在这里输入您想要分配ESP站接口的IP地址</li><li>gateway ——应该包含网关(路由器)的IP地址来访问外部网络</li><li>subnet ——这个掩码定义了本地网络的IP地址范围</li><li>dns1, dns2 -可选参数，定义域名服务器(DNS)的IP地址，维护一个域名目录(<a href="http://xn--www-eo8e.google.co.uk" rel="nofollow">如www.google.co.uk</a>)，并将它们转换为IP地址<br> 代码示例</li></ol> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WiFi.h&gt;</span></span>

<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> ssid <span class="token operator">=</span> <span class="token string">"********"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password <span class="token operator">=</span> <span class="token string">"********"</span><span class="token punctuation">;</span>

IPAddress <span class="token function">staticIP</span><span class="token punctuation">(</span><span class="token number">192</span><span class="token punctuation">,</span><span class="token number">168</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
IPAddress <span class="token function">gateway</span><span class="token punctuation">(</span><span class="token number">192</span><span class="token punctuation">,</span><span class="token number">168</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
IPAddress <span class="token function">subnet</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Connecting to %s\n"</span><span class="token punctuation">,</span> ssid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
  WiFi<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span>staticIP<span class="token punctuation">,</span> gateway<span class="token punctuation">,</span> subnet<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Connected, IP address: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>示例输出:</p> 
<pre><code class="prism language-c">Connecting to sensor<span class="token operator">-</span>net
<span class="token punctuation">.</span>
Connected<span class="token punctuation">,</span> IP address<span class="token punctuation">:</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span>
</code></pre> 
<p>请注意，静态IP配置的工作站通常连接到网络更快。在上面的例子中，它花费了大约500ms(一个点)。显示)。这是因为DHCP客户端获取IP配置需要时间，在本例中跳过了这一步。如果您将所有三个参数都传递为0.0.0.0 (local_ip、网关和子网)，它将重新启用DHCP。您需要重新连接设备以获得新的ip。</p> 
<h5><a id="Manage_Connection_____119"></a>Manage Connection 连接管理</h5> 
<p><a href="https://arduino-esp8266.readthedocs.io/en/2.4.2/esp8266wifi/station-class.html#isconnected" rel="nofollow">https://arduino-esp8266.readthedocs.io/en/2.4.2/esp8266wifi/station-class.html#isconnected</a></p> 
<h6><a id="reconnect___121"></a>reconnect 重新连接</h6> 
<p>重新连接。这是通过从接入点断开连接，然后开始连接到同一个AP来完成的。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">reconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>注:1。模块应该已经连接到一个接入点。如果不是这样，那么函数将返回false，不执行任何操作。2。如果返回true，则意味着连接序列已经成功启动。用户仍需检查连接状态，等待WL_CONNECTED报告:</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">reconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="disconnect__137"></a>disconnect 断开连接</h5> 
<p>将当前配置的SSID和密码设置为空值，并从访问点断开站点连接。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span>wifioff<span class="token punctuation">)</span>
</code></pre> 
<p>wifioff是一个可选的布尔参数。如果设置为true，则将关闭站点模式。</p> 
<h5><a id="isConnected____144"></a>isConnected 在客户终端和服务器执行数据之间函数返回主要连接状态</h5> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">setAutoConnect</span><span class="token punctuation">(</span>autoConnect<span class="token punctuation">)</span>
</code></pre> 
<p>如果autoConnect连接到接入点，返回true;如果不连接接入点，返回false。</p> 
<h5><a id="getAutoConnect____150"></a>getAutoConnect 检测自动连接</h5> 
<p>这是setAutoConnect()的“伴侣”函数。如果模块配置为自动连接到电源上最后使用的接入点，则返回true。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">getAutoConnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>如果自动连接功能被禁用，那么函数返回false</p> 
<h5><a id="setAutoReconnect___157"></a>setAutoReconnect 设置自动连接</h5> 
<p>设置模块是否在断开连接时尝试重新连接到接入点。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">setAutoReconnect</span><span class="token punctuation">(</span>autoReconnect<span class="token punctuation">)</span>
</code></pre> 
<p>如果参数autoReconnect设置为true，那么模块将尝试重新建立到AP的丢失连接。如果设置为false，模块将保持断开连接。<br> 注意:当模块已经断开连接时，运行setAutoReconnect(true)将不会使其重新连接到接入点。应该使用reconnect()</p> 
<h5><a id="waitForConnectResult____165"></a>waitForConnectResult 等待连接结果</h5> 
<p>等待直到模块连接到接入点。此功能适用于在站或站软接入点模式下配置的模块。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">waitForConnectResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>函数返回下列连接状态之一:* WL_CONNECTED-成功建立连接后 ,* WL_NO_SSID_AVAIL-如果无法访问已配置的SSID,*WL_CONNECT_FAILED-如果密码不正确，*WL_IDLE_STATUS-当Wi-Fi在状态之间变化时，*WL_DISCONNECTED-如果模块没有在站模式下配置</p> 
<h5><a id="localIP___IP_173"></a>localIP 获取IP</h5> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>返回值的类型是IP。有一些方法可以显示这种类型的数据。它们在下面的示例中给出，这些示例包括返回IP的subnetMask、gatewayIP和dnsIP的描述。<br> 代码示例</p> 
<pre><code class="prism language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> WL_CONNECTED<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Connected, IP address: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>示例输出:<code>Connected, IP address: 192.168.1.10</code></p> 
<h5><a id="status__189"></a>status 连接状态</h5> 
<p>返回Wi-Fi连接状态。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>函数返回下列连接状态之一:<br> 1.WL_CONNECTED 成功建立连接后<br> 2.WL_NO_SSID_AVAIL 如果无法访问已配置的SSID<br> 3.WL_CONNECT_FAILED 如果密码不正确<br> 4.WL_IDLE_STATUS 当Wi-Fi在状态之间变化时<br> 5.WL_DISCONNECTED 如果模块没有在站模式下配置<br> 返回值是在wl_definitions.h中定义的wl_status_t类型<br> 代码示例</p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;ESP8266WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Connection status: %d\n"</span><span class="token punctuation">,</span> WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Connecting to %s\n"</span><span class="token punctuation">,</span> ssid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Connection status: %d\n"</span><span class="token punctuation">,</span> WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  Serial<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\nConnection status: %d\n"</span><span class="token punctuation">,</span> WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Connected, IP address: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>示例输出:</p> 
<pre><code class="prism language-c">Connection status<span class="token punctuation">:</span> <span class="token number">6</span>
Connecting to sensor<span class="token operator">-</span>net
Connection status<span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Connection status<span class="token punctuation">:</span> <span class="token number">3</span>
Connected<span class="token punctuation">,</span> IP address<span class="token punctuation">:</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.10</span>
</code></pre> 
<p>在wl_definitions.h中可以查找特定的连接状态6和3。</p> 
<pre><code class="prism language-c"><span class="token number">3</span> <span class="token operator">-</span> WL_CONNECTED
<span class="token number">6</span> <span class="token operator">-</span> WL_DISCONNECTED
</code></pre> 
<p>基于此示例，当运行上述代码时，模块最初与网络断开连接，并返回连接状态6 - WL_DISCONNECTED。在运行WiFi后，运行后立即断开连接WiFi.begin(ssid, password)。大约3秒后(基于每500ms显示的点数)，它最终连接返回状态3 - WL_CONNECTED。</p> 
<h5><a id="SSID___wifi_243"></a>SSID wifi名字</h5> 
<p>返回Wi-Fi网络的名称，正式名称为服务集标识(SSID)。</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">SSID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>返回的值是字符串类型。<br> 代码示例<code>Serial.printf("SSID: %s\n", WiFi.SSID().c_str());</code><br> 示例输出:<code>SSID: sensor-net</code></p> 
<h5><a id="psk____252"></a>psk 共享密钥(密码)</h5> 
<p>返回与Wi-Fi网络相关联的当前预共享密钥(密码)</p> 
<pre><code class="prism language-c">WiFi<span class="token punctuation">.</span><span class="token function">psk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>函数返回字符串类型的值。</p> 
<h5><a id="RSSI_____259"></a>RSSI 信号强度</h5> 
<p>返回Wi-Fi网络的信号强度，正式称为接收信号强度指示(RSSI)。<code>WiFi.RSSI()</code><br> 信号强度值用dBm表示。返回值的类型是int32_t。<br> 代码示例 <code>Serial.printf("RSSI: %d dBm\n", WiFi.RSSI());</code><br> 示例输出:<code>RSSI: -68 dBm</code></p> 
<h5><a id="Smart_Config______265"></a>Smart Config 智能配置</h5> 
<p>ESP模块和接入点的智能配置连接是通过嗅探包含所需AP的SSID和密码的特殊数据包来完成的。要做到这一点，移动设备或计算机应该具有广播编码SSID和密码的功能。<br> 下面提供了三个函数来实现智能配置。<br> 通过嗅探包含所需访问点的SSID和密码的特殊包，启动智能配置模式。根据结果返回true或false。</p> 
<pre><code class="prism language-c"><span class="token function">beginSmartConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>查询智能配置状态，决定何时停止配置。函数返回布尔类型的true或false。</p> 
<pre><code class="prism language-c"><span class="token function">smartConfigDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>停止智能配置，释放由beginSmartConfig()获取的缓冲区。根据结果函数返回布尔类型的true或false。</p> 
<pre><code class="prism language-c"><span class="token function">stopSmartConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>有关智能配置的详细信息，请参阅ESP8266 API用户指南。</p> 
<h4><a id="Soft_Access_Point___285"></a>Soft Access Point 中续模式</h4> 
<p><a href="https://arduino-esp8266.readthedocs.io/en/2.4.2/esp8266wifi/soft-access-point-class.html" rel="nofollow">https://arduino-esp8266.readthedocs.io/en/2.4.2/esp8266wifi/soft-access-point-class.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d069598ff94d23955ac64ed86cc0852e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python27的pip不能用，ride运行没有信息，UnicodeDecodeError编码问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6e861941b6cf15ff10bf49da23fcd5c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">File.exists() returns false when file exists</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>