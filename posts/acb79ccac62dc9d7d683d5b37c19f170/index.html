<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JSON技术和反射基础应用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JSON技术和反射基础应用" />
<meta property="og:description" content="# JSON技术和反射
## 1 JSON技术的基础使用
下方代码是利用JSON技术封装了一个JSON工具类，可将对象和JSON类型的字符串相互转换 package cn.itcast.eshop.common.until; import com.alibaba.fastjson.JSON; import java.util.List; /* * JSON工具类 * 处理和JSON相关的所有内容 * */ public class JSONUtil { /** * 将对象转换为JSON格式的字符串 * @param entity 指定对象 * @return 返回JSON格式的字符串 */ public static String entity2JSON(Object entity) { return JSON.toJSONString(entity); } /** * 将对象列表转换为JSON格式的字符串 * @param entityList 指定的对象列表 * @return 返回JSON类型的字符串 */ public static String entityList2JSON(List&lt;?&gt;entityList) { return entity2JSON(entityList); } /** * 将JSON类型的字符串转换为指定类型的对象 * ? 泛型的通配符，代表未知的任意类型，或者说是Object类 * @param json 要转换的数据 * @param clazz 指定的类型 * @return 返回Object对象 */ // public static Object JSON2Entity(String json,Class&lt;?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/acb79ccac62dc9d7d683d5b37c19f170/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-07T21:53:04+08:00" />
<meta property="article:modified_time" content="2021-10-07T21:53:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JSON技术和反射基础应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p># JSON技术和反射</p> 
<p>## 1 JSON技术的基础使用</p> 
<p>下方代码是利用JSON技术封装了一个JSON工具类，可将对象和JSON类型的字符串相互转换                                                                               </p> 
<pre><code>package cn.itcast.eshop.common.until;

import com.alibaba.fastjson.JSON;

import java.util.List;

/*
* JSON工具类
* 处理和JSON相关的所有内容
* */
public class JSONUtil {
    
    /**
     * 将对象转换为JSON格式的字符串
     * @param entity 指定对象
     * @return 返回JSON格式的字符串
     */
    public static String entity2JSON(Object entity) {
        return JSON.toJSONString(entity);
    }

    /**
     * 将对象列表转换为JSON格式的字符串
     * @param entityList 指定的对象列表
     * @return 返回JSON类型的字符串
     */
    public static String entityList2JSON(List&lt;?&gt;entityList) {
        return entity2JSON(entityList);
    }

    /**
     * 将JSON类型的字符串转换为指定类型的对象
     * ? 泛型的通配符，代表未知的任意类型，或者说是Object类
     * @param json 要转换的数据
     * @param clazz 指定的类型
     * @return 返回Object对象
     */
//    public static Object JSON2Entity(String json,Class&lt;?&gt;clazz) {
//        Object obj = JSON.parseObject(json,clazz);
//        return obj;
//    }

    public static &lt;T&gt; T JSON2Entity(String json,Class&lt;T&gt; clazz) {
        return JSON.parseObject(json,clazz);
    }

    /**
     * 将JSON数组转换为指定类型的对象列表
     * @param json 数据
     * @param clazz 指定的类型Class对象
     * @param &lt;T&gt; 指定的类型
     * @return 对象列表
     */
    public static &lt;T&gt; List&lt;T&gt; JSONArray2List(String json,Class&lt;T&gt; clazz) {
        return JSON.parseArray(json,clazz);
    }

}</code></pre> 
<p>## 2  反射</p> 
<p>### 2.1 获取字节码文件的三种方式</p> 
<p>类加载器（ClassLoader）</p> 
<p>​    负责将类的字节码文件（.class文件）加载到内存中，并生成对应的class对象</p> 
<p>Class对象 </p> 
<p>​     java.lang.Class类的对象，也叫字节码文件对象，每个Class对象对应一个字节码文件</p> 
<p>**获取Class对象的三种方式**</p> 
<p>· Object类的getClass（）方法</p> 
<p>​     `Class clazz = 对象名.getClass();`</p> 
<p>· 类的静态属性</p> 
<p>​     `Class clazz = 类名.class;`</p> 
<p>· Class类的静态方法</p> 
<p>​    `Class clazz = Class.forName("正名");`</p> 
<p>​     //正名：包名+类名  例：cn.itcast.demo01.Student</p> 
<p>### 2.2 反射方式获取构造方法并使用</p> 
<p>**Constructor&lt;T&gt;对象**</p> 
<p>构造器对象，属于java.base模块，java.lang.reflect包</p> 
<p>**通过Class对象获取构造器对象**</p> 
<p>·getConstructor(Class&lt;?&gt;...parameterTypes)</p> 
<p>​       返回一个Constructor对象，仅公共构造函数</p> 
<p>​        Class&lt;?&gt;...：可变参数，代表Class类型的数组</p> 
<p>​         ？：通配符，代表不确定的任意类型</p> 
<pre><code>package cn.itcast.demo4;

public class Student {
    public Student(String s) {
        System.out.println("这是一个有参构造"+s);
    }
    public void shouMenu() {
        System.out.println("欢迎使用此方法");
    }
}</code></pre> 
<pre><code>package cn.itcast.demo4;
import java.lang.reflect.Constructor;

public class Test {
    public static void main(String[] args) throws Exception {
        //创建一个Class对象，获取Student的字节码文件
        Class cs = Student.class;
        //创建一个构造器对象
        Constructor cons = cs.getConstructor(String.class);
        //获取构造函数名
        String s = cons.getName();
        System.out.println(s);
        //通过构造器对象构造Student对象
        Student s1 = (Student) cons.newInstance("学生");
    }
}</code></pre> 
<p>·getDeclaredConstructor(Class&lt;?&gt;...parameterTypes)</p> 
<p>​     返回一个Constructor对象，可获取私有构造函数</p> 
<p>​      //操作方法与上述代码类似</p> 
<p>·getConstructors()</p> 
<p>​     返回此类的所有（不含私有）构造函数的数组</p> 
<p>​      //操作与上述类似</p> 
<p>**Construct类的常用方法**</p> 
<p>·String getName()</p> 
<p>​      //返回构造函数名</p> 
<p>·T newInstance(Object...initargs)</p> 
<p>​     //使用此构造函数和指定参数创建并初始化对象</p> 
<p>### 2.3 反射方式获取成员方法并使用</p> 
<p>**Method对象**</p> 
<p>方法对象和构造器对象属于同一模块，同一包下</p> 
<p>**通过Class对象获取方法**</p> 
<p>·getMethod(String name,Class&lt;?&gt;...parameterTypes)</p> 
<p>​    返回一个Method对象，仅公共成员方法</p> 
<p>​     name：方法名</p> 
<p>​     parameterTypes：方法的参数列表</p> 
<pre><code>package cn.itcast.demo4;

public class Student {
    public Student(String s) {
        System.out.println("这是一个有参构造"+s);
    }
    public void shouMenu(String s) {
        System.out.println("欢迎使用此方法"+s);
    }
}</code></pre> 
<pre><code>package cn.itcast.demo4;
import java.lang.reflect.Constructor;
import java.lang.reflect.Method;

public class Test {
    public static void main(String[] args) throws Exception {
        //创建一个Class对象，获取Student的字节码文件
        Class cs = Student.class;
        //创建一个构造器对象
        Constructor cons = cs.getConstructor(String.class);
        //通过构造器对象构造Student对象
        Student s1 = (Student) cons.newInstance("学生");
        //创建一个Method对象（通过Class对象获取）
        Method mt = cs.getMethod("shouMenu",String.class);
        //调用方法
        mt.invoke(s1,"学生");
    }
}</code></pre> 
<p><br>  </p> 
<p>·getDeclaredMethod(String,Class&lt;?&gt;...) </p> 
<p>​     返回一个Method对象，可获取私有方法</p> 
<p>·getMethods()</p> 
<p>​      返回此类私有（不含私有）方法的数组</p> 
<p>**Method的常用方法**</p> 
<p>·String getName()</p> 
<p>​    //返回方法名</p> 
<p>·Object invoke(Object obj,Object...args)</p> 
<p>​    //在指定对象上调用此方法，参数为args</p> 
<p>### 2.4 反射方式获取成员变量并使用</p> 
<p>**Field对象**</p> 
<p>域（成员变量、属性）对象，属于java.base模块，java.lang.reflect包</p> 
<p>**通过Class对象获取属性**</p> 
<p>·getField(String name)</p> 
<p>   返回一个Filed对象，仅公共属性</p> 
<p>​    name：属性名</p> 
<p>·getDeclaredField(String name) </p> 
<p>​    返回一个Field对象，可获取私有属性</p> 
<pre><code>package cn.itcast.demo4;

public class Student {
    public String name;
    private int age;
    
    //重写toString（）方法，以便主函数直接打印
    @Override
    public String toString() {
        return "Student{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}</code></pre> 
<pre><code>package cn.itcast.demo4;
import java.lang.reflect.Constructor;
import java.lang.reflect.Field;

public class Test {
    public static void main(String[] args) throws Exception {
        //创建一个Class对象，获取Student的字节码文件
        Class clazz = Student.class;
        //创建一个构造器对象
        Constructor cons = clazz.getConstructor();
        //通过构造器对象构造Student对象
        Student s1 = (Student) cons.newInstance();
        //创建Field对象
        Field field1 = clazz.getField("name");
        //设置对象的name属性（公有属性）
        field1.set(s1,"张三");
        Field field2 = clazz.getDeclaredField("age");
        //暴力反射，（）内部为true为开启暴力反射，用于访问私有属性和私有方法
        field2.setAccessible(true);
        //设置对象的age属性（私有）
        field2.set(s1,20);
        //打印对象，看对象内部值是否被设置成功
        System.out.println(s1);
    }
}</code></pre> 
<p></p> 
<p>·getFields()</p> 
<p>​     返回此类所有（不含私有）属性的数组</p> 
<p>**Field的常用方法**</p> 
<p>·void set(Object obj,Object value)</p> 
<p>​    //设置obj对象的指定属性值value</p> 
<p>·void setAccessble(boolean flag)</p> 
<p>   //将此属性的可访问性设置为指定布尔值（即暴力反射）</p> 
<p>   </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/711c55e76c0b829ea7741128ac0f4451/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[JVM]聊聊 CMS 收集器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/06c63c795e4e7c313bda9486ad25ec82/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JAVA语言语法_数据类型（part1）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>