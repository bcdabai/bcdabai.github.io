<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Django&#43;Vue项目构建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Django&#43;Vue项目构建" />
<meta property="og:description" content="一、背景
主要介绍如何使用后端Django &#43; 前端Vue 的技术栈快速地搭建起一套web项目的框架。 为什么使用Django和Vue?
Django是Python体系下最成熟的web框架之一，由于Python语言的易用性和受众面广，Django框架也因其能够快速开发网站应用的特性成为了中小型网站开发框架首选。
Vue是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue被设计为可以自底向上逐层应用。Vue的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。
使用Vue作为前端框架，代替Django本身较为孱弱的模板引擎，Django则作为服务端提供api接口，使得前后端实现完全分离，更适合单页应用的开发构建。
二、环境准备
Django:
Python 3.7
Django 2.2.5 使用python自带的pip安装器安装。命令：pip install django即可 安装最新版本的django
Mysql 5.7 安装连接Mysql的库 pip3 install pymysql
Vue:
Node.js v14.3.0
官网下载：http://nodejs.cn
有关Vue的模块(包括vue)我们都使用node自带的npm包管理器安装
三、构建Django项目 首先使用Django来搭建web后端api框架。
1、mac os系统上执行pip3安装：
$pip3 install Django
2、查看安装是否OK：
$python3 -m django --version
3、创建工程（工程名为ATS_Web）
$django-admin startproject ATS_Web
如果命令不存在，寻找到django-admin,用下面的命令：
$ python3 /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/django/bin/django-admin.py startproject ATS_Web
4、创建应用（一个工程有多个应用）
$cd /Users/mac/ATS_Web
$python3 manage.py startapp myApp
5、在ATS_Web下的settings.py配置文件中，把默认的sqllite3数据库换成我们的mysql数据库, 并把app加入到installed_apps列表里：
# Database # https://docs.djangoproject.com/en/2.2/ref/settings/#databases DATABASES = { &#39;default&#39;: { &#39;ENGINE&#39;: &#39;django." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fdd6e658e7072e866365186a7022241f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-01T10:18:26+08:00" />
<meta property="article:modified_time" content="2020-09-01T10:18:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Django&#43;Vue项目构建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>一、背景</strong></p> 
<p style="margin-left:.1in;"> <span style="color:#404040;">主要</span><span style="color:#404040;">介绍如何使用后端</span><span style="color:#404040;">Django + </span><span style="color:#404040;">前端</span><span style="color:#404040;">Vue</span><span style="color:#404040;"> 的</span><span style="color:#404040;">技术栈快速地搭建起一套</span><span style="color:#404040;">web</span><span style="color:#404040;">项目的框架。</span>       </p> 
<p style="margin-left:.1in;"> </p> 
<p style="margin-left:.1in;"> <span style="color:#404040;"><strong>为什么使用</strong></span><span style="color:#404040;"><strong>Django</strong></span><span style="color:#404040;"><strong>和</strong></span><span style="color:#404040;"><strong>Vue</strong></span><span style="color:#404040;"><strong>?</strong></span></p> 
<p style="margin-left:.1in;"> <span style="color:#404040;">    Django</span><span style="color:#404040;">是</span><span style="color:#404040;">Python</span><span style="color:#404040;">体系下最成熟的</span><span style="color:#404040;">web</span><span style="color:#404040;">框架之一，由于</span><span style="color:#404040;">Python</span><span style="color:#404040;">语言的易用性和受众面广，</span><span style="color:#404040;">Django</span><span style="color:#404040;">框架也因其能够快速开发网站应用的特性成为了中小型网站开发框架首选</span><span style="color:#404040;">。</span></p> 
<p style="margin-left:.1in;">     <span style="color:#404040;">Vue</span><span style="color:#404040;">是</span><span style="color:#404040;">一套用于构建用户界面的渐进式框架</span><span style="color:#404040;">。与</span><span style="color:#404040;">其它大型框架不同的是，</span><span style="color:#404040;">Vue</span><span style="color:#404040;">被</span><span style="color:#404040;">设计为可以自底向上逐层应用</span><span style="color:#404040;">。</span><span style="color:#404040;">Vue</span><span style="color:#404040;">的</span><span style="color:#404040;">核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合</span><span style="color:#404040;">。</span></p> 
<p>    <span style="color:#404040;"><strong>使用</strong></span><span style="color:#404040;"><strong>Vue</strong></span><span style="color:#404040;"><strong>作为</strong></span><span style="color:#404040;"><strong>前端框架，代替</strong></span><span style="color:#404040;"><strong>Django</strong></span><span style="color:#404040;"><strong>本身较为孱弱的模板引擎，</strong></span><span style="color:#404040;"><strong>Django</strong></span><span style="color:#404040;"><strong>则作为服务端提供</strong></span><span style="color:#404040;"><strong>api</strong></span><span style="color:#404040;"><strong>接口，使得前后端实现完全分离，更适合单页应用的开发构建。</strong></span></p> 
<p> </p> 
<p><strong>二、环境准备</strong></p> 
<p style="margin-left:.1in;"> <span style="color:#404040;">Django:</span></p> 
<p style="margin-left:.1in;">       <span style="color:#0432ff;"><strong>Python 3.7</strong></span></p> 
<p style="margin-left:.1in;">       <span style="color:#0432ff;"><strong>Django 2.2.5 </strong></span><span style="color:#404040;">使用</span><span style="color:#404040;">python</span><span style="color:#404040;">自带的</span><span style="color:#404040;">pip</span><span style="color:#404040;">安装器安装。命令：</span><span style="color:#00b050;">pip install </span><span style="color:#00b050;">django</span><span style="color:#404040;">即可       安装</span><span style="color:#404040;">最新版本的</span><span style="color:#404040;">django</span></p> 
<p style="margin-left:.1in;">       <span style="color:#0432ff;"><strong>Mysql</strong></span><span style="color:#0432ff;"><strong> 5.7</strong></span>  <span style="color:#404040;">安装连接</span><span style="color:#404040;">Mysql</span><span style="color:#404040;">的库  </span><span style="color:#00b050;"><strong>pip3 </strong></span><span style="color:#00b050;"><strong>install </strong></span><span style="color:#00b050;"><strong>pymysql</strong></span></p> 
<p style="margin-left:.1in;"> <span style="color:#404040;">Vue</span><span style="color:#404040;">:</span></p> 
<p style="margin-left:.1in;">       <span style="color:#0432ff;"><strong>Node.js</strong></span>  <span style="color:#0432ff;"><strong>v14.3.0</strong></span></p> 
<p style="margin-left:.1in;"> <span style="color:#404040;">     官网下载：</span><span style="color:#404040;"><a href="http://nodejs.cn/" rel="nofollow">http</a></span><span style="color:#404040;"><a href="http://nodejs.cn/" rel="nofollow">://</a></span><span style="color:#404040;"><a href="http://nodejs.cn/" rel="nofollow">nodejs.cn</a></span></p> 
<p style="margin-left:.1in;">      <span style="color:#404040;">有关</span><span style="color:#404040;">Vue</span><span style="color:#404040;">的模块</span><span style="color:#404040;">(</span><span style="color:#404040;">包括</span><span style="color:#404040;">vue</span><span style="color:#404040;">)</span><span style="color:#404040;">我们都使用</span><span style="color:#404040;">node</span><span style="color:#404040;">自带的</span><span style="color:#404040;">npm</span><span style="color:#404040;">包管理器安装</span></p> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <strong>三、<span style="color:#404040;">构建</span><span style="color:#404040;">Django</span><span style="color:#404040;">项目</span></strong> 
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">首先</span><span style="color:#404040;">使用</span><span style="color:#404040;">Django</span><span style="color:#404040;">来搭建</span><span style="color:#404040;">web</span><span style="color:#404040;">后端</span><span style="color:#404040;">api</span><span style="color:#404040;">框架。</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">1</span><span style="color:#404040;">、</span><span style="color:#404040;">mac </span><span style="color:#404040;">os</span><span style="color:#404040;">系统上执行</span><span style="color:#404040;">pip3</span><span style="color:#404040;">安装：</span></p> 
 <p style="margin-left:.1in;">       <span style="color:#00b050;">$pip3 install Django</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">2</span><span style="color:#404040;">、查看安装是否</span><span style="color:#404040;">OK</span><span style="color:#404040;">：</span></p> 
 <p style="margin-left:.1in;">       <span style="color:#00b050;">$</span><span style="color:#00b050;">python3 -m </span><span style="color:#00b050;">django</span><span style="color:#00b050;"> --version</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">3</span><span style="color:#404040;">、创建工程（工程名</span><span style="color:#404040;">为</span><span style="color:#404040;">ATS_Web</span><span style="color:#404040;">）</span></p> 
 <p style="margin-left:.1in;">       <span style="color:#00b050;">$</span><span style="color:#00b050;">django</span><span style="color:#00b050;">-admin </span><span style="color:#00b050;">startproject</span> <span style="color:#00b050;">ATS_Web</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">      如果</span><span style="color:#404040;">命令不存在，</span><span style="color:#404040;">寻找到</span><span style="color:#404040;">django</span><span style="color:#404040;">-admin,</span><span style="color:#404040;">用下面的命令：</span></p> 
 <p style="margin-left:.1in;">       <span style="color:#00b050;">$ python3 /Library/Frameworks/</span><span style="color:#00b050;">Python.framework</span><span style="color:#00b050;">/Versions/3.7/lib/python3.7/site-packages/</span><span style="color:#00b050;">django</span><span style="color:#00b050;">/bin/</span><span style="color:#00b050;">django-admin.py </span><span style="color:#00b050;">startproject</span> <span style="color:#00b050;">ATS_Web</span></p> 
 <p style="margin-left:.1in;"><span style="color:#000000;">  4、创建应用（</span><span style="color:#000000;">一个工程有多个应用</span><span style="color:#000000;">）</span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:0in;"><span style="color:#00b050;">         $cd /Users/mac/</span><span style="color:#00b050;">ATS_Web</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">        $</span><span style="color:#00b050;">python3 </span><span style="color:#00b050;">manage.py</span> <span style="color:#00b050;">startapp</span> <span style="color:#00b050;">myApp</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">    5</span><span style="color:#000000;">、在</span><span style="color:#000000;">ATS_Web</span><span style="color:#000000;">下的</span><span style="color:#000000;">settings.py</span><span style="color:#000000;">配置文件中，把默认的</span><span style="color:#000000;">sqllite3</span><span style="color:#000000;">数据库换成我们的</span><span style="color:#000000;">mysql</span><span style="color:#000000;">数据库</span><span style="color:#000000;">, </span><span style="color:#000000;">并</span><span style="color:#000000;">把</span><span style="color:#000000;">app</span><span style="color:#000000;">加入到</span><span style="color:#000000;">installed_apps</span><span style="color:#000000;">列表里</span><span style="color:#000000;">：</span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <pre><code class="language-python"># Database
# https://docs.djangoproject.com/en/2.2/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'ats_test',
        'USER': 'root',
        'PASSWORD': 'root',
        'HOST': '127.0.0.1',
    }
}</code></pre> 
 <pre><code class="language-python"># Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myApp',     #add
]</code></pre> 
 <p style="margin-left:0in;"><span style="color:#0d0d0d;"><strong>       在 </strong></span><span style="color:#0d0d0d;"><strong>python3 </strong></span><span style="color:#0d0d0d;"><strong>中，连接</strong></span><span style="color:#0d0d0d;"><strong>MySQL</strong></span><span style="color:#0d0d0d;"><strong>的库为</strong></span><span style="color:#0d0d0d;"><strong>pymysql</strong></span> <span style="color:#0d0d0d;"><strong>库，使用</strong></span><span style="color:#0d0d0d;"><strong>pip3 install </strong></span><span style="color:#0d0d0d;"><strong>pymysql</strong></span> <span style="color:#0d0d0d;"><strong>进行安装，直接导入即可使用</strong></span><span style="color:#0d0d0d;"><strong>, </strong></span><span style="color:#0d0d0d;"><strong>但是</strong></span><span style="color:#0d0d0d;"><strong>在 </strong></span><span style="color:#0d0d0d;"><strong>Django </strong></span><span style="color:#0d0d0d;"><strong>中，连接数据库时使用的是 </strong></span><span style="color:#0d0d0d;"><strong>MySQLdb</strong></span> <span style="color:#0d0d0d;"><strong>库，需要在</strong></span><span style="color:#0d0d0d;"><strong>setting.py</strong></span><span style="color:#0d0d0d;"><strong>中导入：</strong></span></p> 
</div> 
<pre><code class="language-python">import pymysql

pymysql.install_as_MySQLdb()</code></pre> 
<div style="margin-left:.1in;"> 
 <span style="color:#000000;">      6</span> 
 <span style="color:#000000;">、在</span> 
 <span style="color:#000000;">app</span> 
 <span style="color:#000000;">目录下的</span> 
 <span style="color:#000000;">models.py</span> 
 <span style="color:#000000;">里我们简单写一个</span> 
 <span style="color:#000000;">model</span> 
 <span style="color:#000000;">如下</span> 
 <span style="color:#000000;">：</span> 
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <pre><code class="language-python">from django.db import models

# Create your models here.

class Book(models.Model):
    book_name = models.CharField(max_length=64)
    add_time = models.DateTimeField(auto_now_add=True)</code></pre> 
 <p>      <span style="color:#000000;">7</span><span style="color:#000000;">、 在</span><span style="color:#000000;">app</span><span style="color:#000000;">目录下的</span><span style="color:#000000;">views</span><span style="color:#000000;">里我们新增两个接口，一个是</span><span style="color:#000000;">show_books</span><span style="color:#000000;">返回所有的书籍列表（通过</span><span style="color:#000000;">JsonResponse</span><span style="color:#000000;">返回能被前端识别的</span><span style="color:#000000;">json</span><span style="color:#000000;">格式数据），另一个是</span><span style="color:#000000;">add_book</span><span style="color:#000000;">接受一个</span><span style="color:#000000;">get</span><span style="color:#000000;">请求，往数据库里添加一条</span><span style="color:#000000;">book</span><span style="color:#000000;">数据： </span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <pre><code class="language-python">from django.shortcuts import render
from django.http import JsonResponse
from django.core import serializers

from myApp.models import Book
import json
# Create your views here.
def add_book(request):
    response = {}
    try:
        book = Book(book_name=request.GET.get('book_name'))
        book.save()
        response['msg'] = 'success'
        response['error_num'] = 0
    except Exception as e:
        response['msg'] = str(e)
        response['error_num'] = 1
    return JsonResponse(response)

def show_books(request):
    response = {}
    try:
        books = Book.objects.filter()
        response['list'] = json.loads(serializers.serialize("json", books))
        response['msg'] = 'success'
        response['error_num'] = 0
    except Exception as e:
        response['msg'] = str(e)
        response['error_num'] = 1

    return JsonResponse(response)</code></pre> 
 <p style="margin-left:0in;"><span style="color:#000000;">      8</span><span style="color:#000000;">、在</span><span style="color:#000000;">project</span><span style="color:#000000;">下的</span><span style="color:#000000;">urls.py</span><span style="color:#000000;">中，添加两个</span><span style="color:#000000;">url</span><span style="color:#000000;">：</span></p> 
 <pre><code class="language-python">from django.contrib import admin
from django.urls import path

from myApp import views as BookView

urlpatterns = [
    path('admin/', admin.site.urls),
    path('add_book/',BookView.add_book),
    path('show_books/',BookView.show_books),
]
</code></pre> 
 <p><span style="color:#000000;">      9</span><span style="color:#000000;">、创建mysql数据库</span><span style="color:#000000;">ats_test</span><span style="color:#000000;">，迁移表，在</span><span style="color:#000000;">项目的根目录，输入命令：</span></p> 
 <p><span style="color:#00b050;">            $</span><span style="color:#00b050;">python </span><span style="color:#00b050;">manage.py</span> <span style="color:#00b050;">makemigrations</span></p> 
 <p><span style="color:#00b050;">            $python </span><span style="color:#00b050;">manage.py</span> <span style="color:#00b050;">migrate</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">            $</span><span style="color:#00b050;">python </span><span style="color:#00b050;">manage.py</span> <span style="color:#00b050;">makemigrations</span> <span style="color:#00b050;">myapp</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">            $python </span><span style="color:#00b050;">manage.py</span> <span style="color:#00b050;">migrate</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">      启动项目</span> <span style="color:#000000;">$</span><span style="color:#00b050;">python</span><span style="color:#000000;"> </span><span style="color:#00b050;">manage.py</span> <span style="color:#00b050;">runserver</span></p> 
 <p style="margin-left:0in;"> </p> 
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:0in;"><span style="color:#000000;"><a href="http://localhost:8000/add_book/?book_name=test" rel="nofollow">在浏览器中测试接口：</a></span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;"><a href="http://localhost:8000/add_book/?book_name=test" rel="nofollow">http</a></span><span style="color:#000000;"><a href="http://localhost:8000/add_book/?book_name=test" rel="nofollow">://localhost:8000/add_book/?</a></span><span style="color:#000000;"><a href="http://localhost:8000/add_book/?book_name=test" rel="nofollow">book_name=test</a></span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;"><a href="http://localhost:8000/show_books/" rel="nofollow">http</a></span><span style="color:#000000;"><a href="http://localhost:8000/show_books/" rel="nofollow">://localhost:8000/show_books</a></span><span style="color:#000000;"><a href="http://localhost:8000/show_books/" rel="nofollow">/</a></span>   </p> 
 <p style="margin-left:0in;">没问题能打开之后，恭喜你，Django这部分构建完成。</p> 
 <p style="margin-left:0in;"> </p> 
 <p style="margin-left:0in;"><strong>四、<span style="color:#404040;">构建</span><span style="color:#404040;">Vue</span><span style="color:#404040;">前端项目</span></strong></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">1</span><span style="color:#404040;">、安装</span><span style="color:#404040;">node.js</span><span style="color:#404040;">，</span><span style="color:#404040;">查看</span><span style="color:#404040;">是否安装</span><span style="color:#404040;">成功</span><span style="color:#404040;">:</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#00b050;">$</span><span style="color:#00b050;">node </span><span style="color:#00b050;">–</span><span style="color:#00b050;">v</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">2</span><span style="color:#404040;">、</span><span style="color:#404040;">使用淘宝</span><span style="color:#404040;">NPM </span><span style="color:#404040;">镜</span><span style="color:#404040;">像</span><span style="color:#404040;">,</span><span style="color:#404040;">使用</span><span style="color:#404040;">cnpm</span> <span style="color:#404040;">命令来安装模</span><span style="color:#404040;">块：</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#00b050;">$</span><span style="color:#00b050;">npm</span><span style="color:#00b050;">  install  -g  </span><span style="color:#00b050;">cnpm</span><span style="color:#00b050;">  --registry=https://</span><span style="color:#00b050;">registry.npm.taobao.org</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">3</span><span style="color:#404040;">、</span><span style="color:#404040;">先用</span><span style="color:#404040;">cnpm</span><span style="color:#404040;">安装</span><span style="color:#404040;">vue</span><span style="color:#404040;">-cli</span><span style="color:#404040;">脚手架工具（</span><span style="color:#404040;">vue</span><span style="color:#404040;">-cli</span><span style="color:#404040;">是官方脚手架工具，能迅速帮你搭建起</span><span style="color:#404040;">vue</span><span style="color:#404040;">项目的框架）</span><span style="color:#404040;">：</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#00b050;">$</span><span style="color:#00b050;">cnpm</span> <span style="color:#00b050;">install -g </span><span style="color:#00b050;">vue</span><span style="color:#00b050;">-cli</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">4</span><span style="color:#404040;">、</span><span style="color:#404040;">cd </span><span style="color:#404040;">到 </span><span style="color:#404040;">Ats_Web</span><span style="color:#404040;">，</span><span style="color:#404040;">新建一个前端工程</span><span style="color:#404040;">目录</span><span style="color:#404040;">template</span><span style="color:#404040;">，根据提示按回车，安装</span><span style="color:#404040;">中把</span><span style="color:#404040;">vue</span><span style="color:#404040;">-router</span><span style="color:#404040;">选上，我们须要它来做前端路由</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">   $</span><span style="color:#00b050;">vue-init</span> <span style="color:#00b050;">webpack</span><span style="color:#00b050;"> template</span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:0in;"><span style="color:#000000;">   5</span><span style="color:#000000;">、进入 </span><span style="color:#000000;">template</span><span style="color:#000000;">，运行命令来</span><span style="color:#000000;">安装</span><span style="color:#000000;">vue</span><span style="color:#000000;">所须要的</span><span style="color:#000000;">node</span><span style="color:#000000;">依赖</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">   $cd </span><span style="color:#00b050;">template</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">   $</span><span style="color:#00b050;">npm</span><span style="color:#00b050;"> install</span>                <span style="color:#00b050;">//</span><span style="color:#00b050;">安装</span><span style="color:#00b050;">vue</span><span style="color:#00b050;">所须要的</span><span style="color:#00b050;">node</span><span style="color:#00b050;">依赖</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">   $</span><span style="color:#00b050;">npm</span> <span style="color:#00b050;">run </span><span style="color:#00b050;">dev</span>            //run起来</p> 
 <p style="margin-left:0in;">  打开浏览器<a href="http://localhost:8080/" rel="nofollow">http://localhost:8080/</a>  能打开就配好了</p> 
</div> 
<div style="margin-left:.1in;"> 
 <span style="color:#000000;">    6</span> 
 <span style="color:#000000;">、文件目录结构解析</span> 
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <img alt="" height="381" src="https://images2.imgbox.com/c2/86/JL7OIyRR_o.png" width="953"> 
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:0in;"> </p> 
 <p style="margin-left:0in;"><span style="color:#000000;">7</span><span style="color:#000000;">、</span><span style="color:#000000;">我们在</span><span style="color:#000000;">src</span><span style="color:#000000;">/component</span><span style="color:#000000;">文件夹下新建一个名</span><span style="color:#000000;">为</span><span style="color:#000000;">BookTest.vue</span><span style="color:#000000;">的组件，通过调用之前在</span><span style="color:#000000;">Django</span><span style="color:#000000;">上写好的</span><span style="color:#000000;">api</span><span style="color:#000000;">，实现添加书籍和展示书籍信息的功能。在样式组件上我们使用了饿了么团队推出的</span><span style="color:#000000;"><strong>element-</strong></span><span style="color:#000000;"><strong>ui</strong></span><span style="color:#000000;">，这是一套专门匹配</span><span style="color:#000000;">Vue.js</span><span style="color:#000000;">框架的功能样式</span><span style="color:#000000;">组件。</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">(1).</span> <span style="color:#000000;">npm</span> <span style="color:#000000;">安装</span><span style="color:#000000;">element-</span><span style="color:#000000;">ui</span><span style="color:#000000;">命令：</span><span style="color:#00b050;">$</span><span style="color:#00b050;">npm</span> <span style="color:#00b050;">i element-</span><span style="color:#00b050;">ui</span> <span style="color:#00b050;">–</span><span style="color:#00b050;">S</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">(2).</span><span style="color:#000000;">在</span><span style="color:#000000;">main.js</span><span style="color:#000000;">中</span><span style="color:#000000;">引入 </span><span style="color:#000000;">整个</span><span style="color:#000000;">Element</span><span style="color:#000000;">，就可以使用了，详细的用法可以去官网查看。</span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <pre><code class="language-javascript">import ElementUI from 'element-ui';
import 'element-ui/lib/theme-chalk/index.css';

Vue.use(ElementUI)</code></pre> 
 <p style="margin-left:0in;">（3）创建BookTest.vue，下面的是自己随便写的，刚学vue不久，可以参考一下：</p> 
 <pre><code class="language-html">&lt;template&gt;
  &lt;div class="box"&gt;
    &lt;div&gt;
      &lt;el-input v-model="input" placeholder="请输入书名" style="width:300px"&gt;&lt;/el-input&gt;
      &lt;el-button type="success" @click="addBook"&gt;添加&lt;/el-button&gt;
    &lt;/div&gt;
    &lt;el-table
      :data="tableData"
      style="width: 600px;"&gt;
      &lt;el-table-column
        prop="fields.book_name"
        label="书名"
        width="180"&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column
        prop="fields.add_time"
        label="添加时间"&gt;
      &lt;/el-table-column&gt;
    &lt;/el-table&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'BookTest',
  data () {
    return {
      input: '',
      tableData: []
    }
  },
  created () {
    this.showBook()
  },
  methods: {
    showBook () {
      this.axios.get('show_books/')
        .then((response) =&gt; {
            console.log(response.data.list);
            this.tableData = response.data.list
        })
        .catch(function (error) {
            console.log(error);
        });
    },
    addBook () {
      this.axios.get('add_book/',{params:{book_name: this.input}})
        .then((response) =&gt; {
            console.log(response.data.msg);
            this.showBook()
        })
        .catch(function (error) {
            console.log(error);
        });
    }
  }
}
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
.box{
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
}
&lt;/style&gt;
</code></pre> 
 <p style="margin-left:0in;"><span style="color:#000000;">8</span><span style="color:#000000;">、</span><span style="color:#000000;">在</span><span style="color:#000000;">src</span><span style="color:#000000;">/router</span><span style="color:#000000;">目录的</span><span style="color:#000000;">index.js</span><span style="color:#000000;">中，</span><span style="color:#000000;">我们把新建</span><span style="color:#000000;">的</span><span style="color:#000000;">BookTest</span><span style="color:#000000;">组件</span><span style="color:#000000;">，配置到</span><span style="color:#000000;"><strong>vue</strong></span><span style="color:#000000;"><strong>-router</strong>路由中</span><span style="color:#000000;">：</span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <pre><code class="language-javascript">import BookTest from '@/components/BookTest'

export default new Router({
  routes: [
    {
      path: '/',
      name: 'BookTest',
      component: BookTest
    }
  ]
})
</code></pre> 
 <p style="margin-left:0in;"><span style="color:#000000;">9</span><span style="color:#000000;">、使用</span><span style="color:#000000;">axios</span><span style="color:#000000;">来进行</span><span style="color:#000000;">http</span><span style="color:#000000;">请求。</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">安装： </span><span style="color:#00b050;">$</span><span style="color:#00b050;">cnpm</span> <span style="color:#00b050;">install </span><span style="color:#00b050;">axios</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">安装依赖： </span><span style="color:#00b050;">$</span><span style="color:#00b050;">cnpm</span> <span style="color:#00b050;">install --save </span><span style="color:#00b050;">axios</span> <span style="color:#00b050;">vue-axios</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">配置模</span><span style="color:#000000;">板：在</span><span style="color:#000000;">main.js</span><span style="color:#000000;">中引入</span><span style="color:#000000;">axios</span></p> 
 <pre><code class="language-javascript">import axios from 'axios'
import VueAxios from 'vue-axios'
 
Vue.use(VueAxios, axios)
</code></pre> 
 <p><span style="color:#000000;">10.</span><span style="color:#000000;">如果发现列表抓取不到数据，可能是出现了跨域问题，打开浏览器</span><span style="color:#000000;">console</span><span style="color:#000000;">确认：</span></p> 
 <p> </p> 
</div> 
<p style="margin-left:.1in;"><img alt="" height="180" src="https://images2.imgbox.com/72/31/995SceA1_o.png" width="447"></p> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:0in;"><span style="color:#000000;">11</span><span style="color:#000000;">、</span><span style="color:#000000;">这时候我们须要在</span><span style="color:#000000;">Django</span><span style="color:#000000;">层注入</span><span style="color:#000000;">header</span><span style="color:#000000;">，用</span><span style="color:#000000;">Django</span><span style="color:#000000;">的第三方包</span><span style="color:#000000;">django</span><span style="color:#000000;">-</span><span style="color:#000000;">cors</span><span style="color:#000000;">-headers</span><span style="color:#000000;">来解决跨域问题：</span></p> 
 <p style="margin-left:0in;"><span style="color:#00b050;">$</span><span style="color:#00b050;">pip</span> <span style="color:#00b050;"><strong>install</strong></span> <span style="color:#00b050;">django</span><span style="color:#00b050;">-</span><span style="color:#00b050;">cors</span><span style="color:#00b050;">-headers</span></p> 
 <p style="margin-left:0in;"><span style="color:#000000;">settings.py</span> <span style="color:#000000;">修改为（</span><span style="color:#0432ff;"> 注意</span><span style="color:#0432ff;">中间件的添加顺序</span><span style="color:#000000;">）：</span></p> 
 <pre><code class="language-python">MIDDLEWARE = [
 'django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'corsheaders.middleware.CorsMiddleware',   #add
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

CORS_ORIGIN_ALLOW_ALL = True   #add</code></pre> 
 <p style="margin-left:0in;"><span style="color:#000000;">12</span><span style="color:#000000;">、</span><span style="color:#000000;">在前端工程目录下，输入</span><span style="color:#000000;">npm</span><span style="color:#000000;"> run build</span><span style="color:#000000;">，如果项目没有错误的话，就能够看到所有的组件、</span><span style="color:#000000;">css</span><span style="color:#000000;">、图片等都被</span><span style="color:#000000;">webpack</span><span style="color:#000000;">自动打包到</span><span style="color:#000000;">dist</span><span style="color:#000000;">目录下</span><span style="color:#000000;">了。</span></p> 
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <strong>五、<span style="color:#404040;">整合</span><span style="color:#404040;">Django和Vue.js</span></strong> 
</div> 
<div style="margin-left:.1in;">
    
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:.1in;">      <span style="color:#404040;">目前</span><span style="color:#404040;">我们已经分别完成了</span><span style="color:#404040;">Django</span><span style="color:#404040;">后端和</span><span style="color:#404040;">Vue</span><span style="color:#404040;">前端</span><span style="color:#404040;">工程的创建和编写，但实际上它们是运行在各自的服务器上，和我们的要求是不一致的。因此我们须要把</span><span style="color:#404040;">Django</span><span style="color:#404040;">的</span><span style="color:#404040;">TemplateView</span><span style="color:#404040;">指向我们刚才生成</span><span style="color:#404040;">的前端</span><span style="color:#404040;">dist</span><span style="color:#404040;">文件</span><span style="color:#404040;">即可</span><span style="color:#404040;">.</span></p> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">1</span><span style="color:#404040;">、 找到</span><span style="color:#404040;">project</span><span style="color:#404040;">目录的</span><span style="color:#404040;">urls.py</span><span style="color:#404040;">，使用通用视图创建最简单的模板控制器，访问 “/” </span><span style="color:#404040;">时直接返回 </span><span style="color:#404040;">index.html</span><span style="color:#404040;">:</span></p> 
</div> 
<div style="margin-left:.1in;"> 
 <p style="margin-left:.1in;"> <span style="color:#404040;">2</span><span style="color:#404040;">、 上一步使用了</span><span style="color:#404040;">Django</span><span style="color:#404040;">的模板系统，所以需要配置一下模板使</span><span style="color:#404040;">Django</span><span style="color:#404040;">知道从哪里找到</span><span style="color:#404040;">index.html</span><span style="color:#404040;">。在</span><span style="color:#404040;">project</span><span style="color:#404040;">目录的</span><span style="color:#404040;">settings.py</span><span style="color:#404040;">下：</span></p> 
 <div style="margin-left:.1in;"> 
  <pre><code class="language-python">TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        # 'DIRS': [],
        'DIRS': ['template/dist'],   #update
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]</code></pre> 
  <p style="margin-left:0in;"><span style="color:#000000;">3</span><span style="color:#000000;">、 我们还需要配置一下静态文件的搜索路径。同样是</span><span style="color:#000000;">project</span><span style="color:#000000;">目录的</span><span style="color:#000000;">settings.py</span><span style="color:#000000;">下：</span></p> 
  <pre><code class="language-python">STATICFILES_DIRS = [
 os.path.join(BASE_DIR, "template/dist/static"),
]</code></pre> 
  <p style="margin-left:0in;"><span style="color:#000000;">4</span><span style="color:#000000;">、 配置完成，我们在</span><span style="color:#000000;">project</span><span style="color:#000000;">目录下输入命令</span><span style="color:#000000;">python </span><span style="color:#000000;">manage.py</span> <span style="color:#000000;">runserver</span><span style="color:#000000;">，就能够看到我们的前端页面在浏览器上展现：</span></p> 
 </div> 
 <div style="margin-left:.1in;"> 
  <img alt="" height="367" src="https://images2.imgbox.com/a4/e6/weJrX2ke_o.png" width="393"> 
 </div> 
 <div style="margin-left:.1in;">
     
 </div> 
 <div style="margin-left:.1in;"> 
  <p style="margin-left:0in;"><span style="color:#000000;">注意</span><span style="color:#000000;">服务的端口已经是</span><span style="color:#000000;">Django</span><span style="color:#000000;">服务的</span><span style="color:#000000;">8000</span><span style="color:#000000;">而不是</span><span style="color:#000000;">node</span><span style="color:#000000;">服务的</span><span style="color:#000000;">8080</span><span style="color:#000000;">了。</span></p> 
  <p style="margin-left:0in;"><span style="color:#000000;">前端部分修改后，Django</span><span style="color:#000000;">服务的</span><span style="color:#000000;">8000</span><span style="color:#000000;">页面不会实时更新，需要重新执行</span><span style="color:#000000;">npm</span> <span style="color:#000000;">run </span><span style="color:#000000;">build</span><span style="color:#000000;">打包</span><span style="color:#000000;">到</span><span style="color:#000000;">dist</span><span style="color:#000000;">目录</span><span style="color:#000000;">下，</span><span style="color:#000000;">Django</span><span style="color:#000000;">的</span></p> 
  <p style="margin-left:0in;"><span style="color:#000000;">端口</span><span style="color:#000000;">8000</span><span style="color:#000000;">才会有变化。</span></p> 
  <p style="margin-left:0in;"> </p> 
  <p style="margin-left:0in;">至此，成功完成了构建。耶！</p> 
 </div> 
 <div style="margin-left:.1in;">
     
 </div> 
 <div style="margin-left:.1in;"> 
  <strong>参考文章：<a href="https://segmentfault.com/p/1210000010550731/read" rel="nofollow">https://segmentfault.com/p/1210000010550731/read</a></strong> 
 </div> 
 <div style="margin-left:.1in;">
     
 </div> 
 <div style="margin-left:.1in;">
     
 </div> 
 <div style="margin-left:.1in;"> 
  <div style="margin-left:.1in;"> 
   <div style="margin-left:.1in;"> 
    <div style="margin-left:.1in;"> 
     <div style="margin-left:.1in;"> 
      <div style="margin-left:.1in;"> 
       <div style="margin-left:.1in;"> 
        <div style="margin-left:.1in;"> 
         <div style="margin-left:.1in;"> 
          <div style="margin-left:.1in;">
              
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0c336046cc4b352c4c8194d8f9cbd981/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Opencv学习之：cv2.imread() 和 PIL.Image.open() 打开图片的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3421b36b9046c24123e877d33aededa5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网络基础知识：10M、50M、100M宽带下载速率一般是多少？—Vecloud微云</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>