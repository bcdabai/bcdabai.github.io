<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>电量计CW2015CHBD的应用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="电量计CW2015CHBD的应用" />
<meta property="og:description" content="CW2015 是一款超紧凑、低成本、主机侧/电池组侧、无传感电阻器的电量计量系统 IC，适用于手持和便携式设备中的锂离子 (Li&#43;) 电池。
CW2015 跟踪 Li&#43; 电池的运行状况，并使用最先进的算法报告非常不同的电池化学系统（LiCoOx、聚合物锂离子、LiMnOx 等）的相对充电状态 (SOC)。
CW2015 包括一个 14 位 Sigma-Delta ADC、一个精密电压基准和内置准确温度传感器。该 IC 允许最终用户消除占用大量电路板面积的昂贵感测电阻器。如果电池 SOC 水平达到预先设定的阈值，IC 也会发出警报信号。
快速启动功能提供了对电池 SOC 进行初始估计的可能性，这也使 IC 能够位于系统侧或电池组侧，为系统制造商提供灵活性关于包装选择。
CW2015 使用 2 线 I2C 兼容串行接口，可在标准 (100 kHz) 或快速 (400 kHz) 模式下运行。 CW2015是一款超紧凑、高精度的电量监测IC，嵌入了新一代电池SOC估算算法。
CW2015 通过测量电池电压和温度为用户提供电池电压、SOC 和 RRT 估计值。
FastCali 算法
我们从电池 OCV（开路电压）推导出该电池的 SOC（充电状态）。 从两种方式获取OCV：闲置至少半小时的电池电压； 电池电压在充电或放电时加上内部电阻压降。
创新的“设备电流追踪”技术精确计算内部电阻的当前压降，结合FastCali算法，无论电池处于充电、放松或放电状态，CW2015都能及时推断出OCV值。
上电后的第一次 SOC 估计CW2015 将电池视为免费电池，上电时已放松 0.5 小时以上。
CW2015 将 14 位 ADC 测量的电池电压视为 OCV 电压。 CW2015根据这个电压推导出第一个SOC值。第一SOC值的误差会在正常使用过程中进行校准。
RRT" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dc91ab7ac61ea51f957bd597c41e4eea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-13T19:12:08+08:00" />
<meta property="article:modified_time" content="2021-09-13T19:12:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">电量计CW2015CHBD的应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>CW2015 是一款超紧凑、低成本、主机侧/电池组侧、无传感电阻器的电量计量系统 IC，适用于手持和便携式设备中的锂离子 (Li+) 电池。<br> CW2015 跟踪 Li+ 电池的运行状况，并使用最先进的算法报告非常不同的电池化学系统（LiCoOx、聚合物锂离子、LiMnOx 等）的相对充电状态 (SOC)。<br> CW2015 包括一个 14 位 Sigma-Delta ADC、一个精密电压基准和内置准确温度传感器。该 IC 允许最终用户消除占用大量电路板面积的昂贵感测电阻器。如果电池 SOC 水平达到预先设定的阈值，IC 也会发出警报信号。<br> 快速启动功能提供了对电池 SOC 进行初始估计的可能性，这也使 IC 能够位于系统侧或电池组侧，为系统制造商提供灵活性关于包装选择。<br> CW2015 使用 2 线 I2C 兼容串行接口，可在标准 (100 kHz) 或快速 (400 kHz) 模式下运行。 </p> 
<p><img alt="" height="521" src="https://images2.imgbox.com/0e/f6/LyMInBh1_o.png" width="957"></p> 
<p><img alt="" height="333" src="https://images2.imgbox.com/78/a2/EHRliKdZ_o.png" width="742">   </p> 
<p> CW2015是一款超紧凑、高精度的电量监测IC，嵌入了新一代电池SOC估算算法。<br> CW2015 通过测量电池电压和温度为用户提供电池电压、SOC 和 RRT 估计值。</p> 
<p>FastCali 算法<br> 我们从电池 OCV（开路电压）推导出该电池的 SOC（充电状态）。 从两种方式获取OCV：闲置至少半小时的电池电压； 电池电压在充电或放电时加上内部电阻压降。<br> 创新的“设备电流追踪”技术精确计算内部电阻的当前压降，结合FastCali算法，无论电池处于充电、放松或放电状态，CW2015都能及时推断出OCV值。</p> 
<p> 上电后的第一次 SOC 估计CW2015 将电池视为免费电池，上电时已放松 0.5 小时以上。<br> CW2015 将 14 位 ADC 测量的电池电压视为 OCV 电压。 CW2015根据这个电压推导出第一个SOC值。第一SOC值的误差会在正常使用过程中进行校准。</p> 
<p>RRT<br> RRT 将系统剩余运行时间提供给用户参考。 RRT 由当前 SOC 和电池放电电流决定，即系统总功耗。 电池剩余电容分压current 是运行时间。 CW2015基于“设备电流追踪”技术，仅通过测量电池电压来获取放电电流。RRT 一直在更新，并根据当前的电流变化。 RRT 的最小尺度为 1 分钟。</p> 
<p>快速开始<br> 快速启动允许 CW2015 以与初始上电相同的方式通过上拉快速启动引脚或设置 MODE 寄存器 [0x0A] 来重新启动电量计计算。<br> 这个动作用来减少SOC值的大误差。</p> 
<p>Low SOC Alert</p> 
<p>         当电池SOC低于或等于设定阈值[0x08]时，触发低SOC警报。 CW2015 设置 ALRT 标志为 1，并拉低 ALRT 引脚以通知外部主机。 ALRT 引脚保持逻辑低电平，直到主机通过 I2C 总线将 ALRT 标志复位为逻辑 0。<br>        当 SOC 保持在警报阈值以下时，清除的 ALRT 不会生成另一个警报信号。 在生成另一个中断之前，SOC 必须上升到高于然后下降到低于或等于警报阈值。</p> 
<p>睡眠模式<br> 在休眠模式下所有功能将停止，CW2015 的功耗降低到最低水平。<br> 将 MODE 寄存器位 Sleep 设置为 11 以进入睡眠模式。 所有数据更新停止，当从休眠模式恢复时，SOC算法从停止点开始。 当电池电压低于2.5V时，CW2015自动进入休眠模式。</p> 
<p>复核<br> 上电复位。 将 MODE 寄存器位 POR 设置为 1111 以重置设备，除 flash 外的所有寄存器和日期都将重置为零。</p> 
<p><img alt="" height="349" src="https://images2.imgbox.com/0a/c3/Q7Rndglz_o.png" width="984"></p> 
<p>VCELL 寄存器(0x02~0x03)<br> VCELL 寄存器是一个只读寄存器，可连续更新电池端电压。 电池电压在 CELL 引脚处测量，GND 引脚作为接地参考。 一个 14 位 Sigma-Delta A/D使用转换器，CW2015 的电压分辨率为 305uV。 该 A/D 转换器在 IC POR 后的 &lt;10ms 内更新电池电压，然后每秒更新四次。 </p> 
<p><img alt="" height="216" src="https://images2.imgbox.com/00/f0/G0sFLA0L_o.png" width="836"></p> 
<p>SOC 寄存器(0x04~0x05)<br> SOC 寄存器也是一个只读寄存器，用于指示电池单元的充电状态。 SOC 值是一个相对概念，显示为电池总容量的百分比。 由于老化、电池参数分布控制不佳或总容量快速变化，该寄存器本质上会根据电池单元参数的变化进行自我调整。<br> 在该寄存器中，高 8 位部分包含以 % 为单位的 SOC 信息，如果该精度已经足够应用，最终用户可以直接使用。 低 8bit 部分提供更准确的部分 SOC 信息，直到 1/256%。</p> 
<p><img alt="" height="212" src="https://images2.imgbox.com/94/c4/PYvHAuts_o.png" width="802"></p> 
<p> RRT_ALRT 寄存器(0x06~0x07)<br> ALRT，标志寄存器位。 当 SOC 寄存器值低于或等于警报阈值设置并产生中断时，该位由 IC 设置。 该位只能由主机通过 I2C 总线清零。 ALRT 的上电默认值为逻辑 0。<br> 只读寄存器RRT根据当前SOC和放电电流指示电池的剩余运行时间（RRT）。 RRT 不是线性变化值，每秒更新一次。寄存器 RRT 提供 13 位记录剩余时间，1 LSB 代表一分钟。</p> 
<p> <img alt="" height="217" src="https://images2.imgbox.com/a7/2a/67G4mfCF_o.png" width="798"></p> 
<p> 配置寄存器(0x08)<br> ATHD 是低 SOC 警报阈值设置寄存器。 警报阈值是一个 5 位值，用于设置在 ALRT 引脚上产生中断时的充电状态水平。 警报阈值的 LSB 权重为1%，并且可以从 0% 到 31% 进行编程。 ATHD 的上电默认值为 3%。UFG 是一个标志位，用于指示电池信息更新状态。</p> 
<p><img alt="" height="211" src="https://images2.imgbox.com/91/ef/LanGaiZg_o.png" width="809"></p> 
<p>模式寄存器(0x0A)<br> 模式寄存器用于 Master 控制 IC。<br> 睡眠模式，两位控制。 默认值11，写入11强制CW2015进入休眠模式；<br> 写00唤醒。<br> QSTRT，快速启动，两位控制。 默认值 00，写入 11 开始。<br> 快速启动允许 IC 以与 IC 初始上电相同的方式重新启动电量计计算。 例如，如果应用程序的上电序列非常嘈杂，以至于在 IC 对 SOC 的“第一次猜测”中引入了过多的错误，主机可以发出快速启动来减少错误。 快速启动也由 QSTRT 引脚上的上升沿启动。<br> POR，复位功率，四位控制。 默认值 0000，写入 1111 以完全重启 IC，就像断电一样。</p> 
<p><img alt="" height="217" src="https://images2.imgbox.com/81/40/VYFteBGy_o.png" width="443"></p> 
<p>I2C接口<br> CW2015 通过 I2C 接口进行通信。 I2C 是一种两线漏极开路接口，支持单个总线上的多个设备和主机。 一些 I2C 设备可以作为主设备或从设备，但是CW2015 只能作为从设备，只将总线拉低，从不驱动总线为高。<br> 在标准模式下，I2C 总线上的数据可以以高达 100kbps 的速率传输。 还支持 I2C 快速模式 (400kbps) 或快速模式 plus (1 Mbps)。 </p> 
<p>设备地址<br> I2C 设备地址由 7 位从地址和 1 个读/写控制位组成。<br> CW2015 的地址固定在 0b1100010。 结合   R/W 位：<br> CW2015的读命令为0xC5；<br> CW2015 的写命令为 0xC4。</p> 
<p><img alt="" height="77" src="https://images2.imgbox.com/fd/6b/jE8RRh9E_o.png" width="692"></p> 
<p> </p> 
<p> 开始和停止条件<br> 当总线空闲时，SCL 和 SDA 都必须为高电平。 总线主机通过在 SCL 为高电平时将 SDA 从高电平转换为低电平来用 START 条件表示传输开始。 当主机完成与从机的通信后，它通过在 SCL 为高电平时将 SDA 从低电平转换为高电平来发出停止条件。 然后总线空闲以进行另一次传输。<br> 当总线在使用中时，如果产生重复的 START (Sr) 而不是 STOP 条件，则它保持忙碌。 重复的 START (Sr) 条件在功能上与 START (S) 相同。</p> 
<p>读写命令<br> 图 9 显示了 I2C 总线上的读写命令概览。</p> 
<p><img alt="" height="270" src="https://images2.imgbox.com/07/e0/ET30qgBQ_o.png" width="949"></p> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6bd7524d21725d34686368fbc3d9326a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iOS关于TestFlight的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fc0714640f4eb235c6f1a990065cf132/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于JDK,JRE,JVM的区别与联系（初步认识）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>