<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一个简单的postman设置断言，为何会难住一个工作5年的测试？ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="一个简单的postman设置断言，为何会难住一个工作5年的测试？" />
<meta property="og:description" content="postman设置断言 作为一款接口测试工 具，postman需要对发送请求后返回的结果是否正确做验证，在postman中通过 tests页签做请求的验证，也称为断言。
postman设置断言的流程 1、在tests页签截取要对比的实际响应信息（响应头、响应正文、响应状态码等）
2、利用断言语句 tests[] 或 chai.js 形式把实际响应信息与期望结果对比
3、执行请求进行结果查看
在postman设置断言，存在新老版本的断言语法不一致的情况，目前两种语 法都可以使用： 语法一： tests[‘测试用例名称’] = 逻辑表达式; 断言语法一视图：
postman在tests页签获取响应内容：
tests页签支持javascripts语法，可以把获取的响应内容放入定义的变量中。 然后使用tests[变量名]进行输出。
截取实际响应信息的新老版本代码对比；如下图
1、获取响应行
var code = responseCode.code; //获取响应状态码
var name = responseCode.name; //获取响应状态信息
2、获取响应头
var content_type = postman.getResponseHeader(&#39;Content-Type&#39;) //获取响应头
var path = postman.getResponseCookie(&#39;_ac_app_ua&#39;).path ; //获取cookie信息
3、获取响应正文
var body = responseBody
4、获取响应时间
var time = responseTime;
5、利用正则表达式截取部分响应正文
var title = body.match(new RegExp(&#39;&lt;title&gt;(.&#43;?)&lt;/title&gt;&#39;))[1];
6、响应正文为json时，可以利用postman进行解析再获取部分响应正文
var jsondata = JSON.parse(responseBody); //把响应正文转化为json对象
var token = jsondata." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6e7e336951eeeb32efc6ec09db9e7d0c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-08T22:13:25+08:00" />
<meta property="article:modified_time" content="2023-12-08T22:13:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一个简单的postman设置断言，为何会难住一个工作5年的测试？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><strong>postman设置断言</strong></h3> 
<p>作为一款接口测试工 具，postman需要对发送请求后返回的结果是否正确做验证，在postman中通过 tests页签做请求的验证，也称为断言。</p> 
<p></p> 
<h3>postman设置断言的流程</h3> 
<p>1、在tests页签截取要对比的实际响应信息（响应头、响应正文、响应状态码等）<br> 2、利用断言语句 tests[] 或 chai.js 形式把实际响应信息与期望结果对比<br> 3、执行请求进行结果查看</p> 
<h3><strong>在postman设置断言，存在新老版本的断言语法不一致的情况，目前两种语 法都可以使用：</strong></h3> 
<h4><strong>语法一：</strong> tests[‘测试用例名称’] = 逻辑表达式;</h4> 
<p>断言语法一视图：</p> 
<p></p> 
<p class="img-center"><img alt="" height="305" src="https://images2.imgbox.com/7c/50/cAjEO72O_o.png" width="1200"></p> 
<p></p> 
<p><strong>postman在tests页签获取响应内容：</strong></p> 
<p>tests页签支持javascripts语法，可以把获取的响应内容放入定义的变量中。 然后使用tests[变量名]进行输出。</p> 
<p><strong>截取实际响应信息的新老版本代码对比；如下图</strong></p> 
<p></p> 
<p> </p> 
<p class="img-center"><img alt="" height="197" src="https://images2.imgbox.com/4d/1b/40v5bbPw_o.png" width="994"></p> 
<p></p> 
<p>1、获取响应行</p> 
<p>var code = responseCode.code; //获取响应状态码<br> var name = responseCode.name; //获取响应状态信息</p> 
<p>2、获取响应头</p> 
<p>var content_type = postman.getResponseHeader('Content-Type') //获取响应头<br> var path = postman.getResponseCookie('_ac_app_ua').path ; //获取cookie信息</p> 
<p>3、获取响应正文</p> 
<p>var body = responseBody</p> 
<p>4、获取响应时间</p> 
<p>var time = responseTime;</p> 
<p>5、利用正则表达式截取部分响应正文</p> 
<p>var title = body.match(new RegExp('&lt;title&gt;(.+?)&lt;/title&gt;'))[1];</p> 
<p>6、响应正文为json时，可以利用postman进行解析再获取部分响应正文</p> 
<p>var jsondata = JSON.parse(responseBody); //把响应正文转化为json对象<br> var token = jsondata.access_token; //json对象名.键名</p> 
<p><strong>在tests页签中编写语法如下图：</strong></p> 
<p></p> 
<p class="img-center"><img alt="复制代码" height="20" src="https://images2.imgbox.com/e1/25/67oUL8P8_o.gif" width="20"></p> 
<pre>// 新旧版本写法------------
//获取响应行
//旧版本
var code = responseCode.code  //获取响应状态码
tests["case_demo_01: 验证响应状态码是否为200"] = code === 200 //做断言
var name = responseCode.name  //获取响应状态信息
tests["case_demo_02: 验证响应的状态信息是否正确"] = name === "OK"
//新版本
var code = pm.response.code //获取响应状态码
tests["case_demo_001: 验证响应状态码是否为200"] = code === 200 //做断言
var name = pm.response.status  //获取响应状态信息
tests["case_demo_002: 验证响应的状态信息是否正确"] = name === "OK"

//获取响应头

//旧版本
var content_type = postman.getResponseHeader('Content-Type')  //获取响应头
tests["case_demo_03: 验证响应头是否正确"] = content_type === "application/json; encoding=utf-8"
//新版本
var content_type = pm.response.headers  //获取响应头
tests["case_demo_003: 验证响应头是否正确 "+content_type] = true

// 获取响应时间
//旧版本
var time = responseTime
tests["case_demo_04: 验证响应时间是否正确 "+ time] = true
tests["case_demo_004: 验证响应时间是否在100-500ms以内返回"] = time &gt;=100 &amp;&amp; time&lt;=500
//新版本
var time = pm.response.responseTime
tests["case_demo_00004: 验证响应时间是否正确 "+ time] = true

//获取响应正文 text
//旧版本
var body = responseBody
tests['case_demo_05: 验证响应正文是否正确 '+ body] = true
tests["case_demo_005: 验证响应正文是否包含 7200"] = body.has("7200")  //判断是否包含
//新版本  
var body = pm.response.text()
tests['case_demo_0005: 验证响应正文是否正确 '+ body] = true
var title = body.match(new RegExp('&lt;title&gt;(.+?)&lt;/title&gt;'))[1];  //利用正则表达式截取部分响应正文
tests["case_demo_00005: 验证响应正文中的title是否包含 猫_百度搜索"] = title === "猫_百度搜索"

//json格式响应正文  通过json视图更清晰
//旧版本
var jsondata = JSON.parse(responseBody)  //把响应正文转化为json对象
var expires_in = jsondata.expires_in  //json对象名.键名
tests["case_demo_06: 验证json格式响应正文是否正确 "] = expires_in === 7200
//新版本
var jsondata = pm.response.json()  //把响应正文转化为json对象
var expires_in = jsondata.expires_in  //json对象名.键名
tests["case_demo_006: 验证json格式响应正文是否正确 "] = expires_in === 7200</pre> 
<p></p> 
<p class="img-center"><img alt="复制代码" height="20" src="https://images2.imgbox.com/3a/19/r6QncSXY_o.gif" width="20"></p> 
<p> 断言的展示结果如下图：</p> 
<p></p> 
<p class="img-center"><img alt="" height="944" src="https://images2.imgbox.com/cc/07/Q64WD7er_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<h4> <strong>语法二：</strong> Chai.js断言库，可以通过右侧页签点击生成代码（新版本写法-推荐）</h4> 
<p id="一chaijs断言介绍"><strong>chai.js断言介绍：</strong></p> 
<p>1、是一套TDD(测试驱动开发)/BDD(行为驱动开发)的断言库<br> 2、包含有3个断言库支持BDD风格的expect/should和TDD风格的assert<br> 3、可以高效的和任何js测试框架搭配使用（支持在postman中应用）</p> 
<p><strong> 断言语法二视图：</strong></p> 
<p></p> 
<p class="img-center"><img alt="" height="486" src="https://images2.imgbox.com/38/83/BpxonQ6z_o.png" width="1200"></p> 
<p> <strong>在tests页签中编写语法如下图：</strong></p> 
<p></p> 
<p class="img-center"><img alt="复制代码" height="20" src="https://images2.imgbox.com/c7/0b/SIylN8hH_o.gif" width="20"></p> 
<pre>//新版本写法------
pm.test("测试用例标题", function () {
    pm.expect(true).to.be.true;    //chai.js断言编写处  
});

pm.test("case_demo_01 *****", function () {
    pm.expect(2&lt;5 &amp;&amp; 3&lt;6).to.be.true         //判断是否为true
});

pm.test("case_demo_02 *****", function () {
    pm.expect("everything").to.be.ok         //判断是否为真值  非空、非0 即为真
});

pm.test("case_demo_03 *****", function () {
    pm.expect("hello").to.equal("hello")    //判断是否相等
});

pm.test("case_demo_04 *****", function () {
    pm.expect({list:"aaa"}).to.eql({list:"aaa"})//判断是否深度相等
});

pm.test("case_demo_05 *****", function () {
    pm.expect("foobar").to.have.string("bar")    //判断是否包含字符串
});

pm.test("case_demo_06 *****", function () {
    pm.expect("foobar").to.match(/^foo/)   //判断是否包含，支持正则表达式
});

//实例------
//响应行的状态码
pm.test("case_demo_07 *****", function () {
    pm.expect(pm.response.code === 200).to.be.true   //判断响应状态码是否为200
});
//响应行的信息
pm.test("case_demo_08 *****", function () {
    pm.expect(pm.response.status === "OK").to.be.true   //判断响应状态信息是否为OK
});
//响应正文 text
pm.test("case_demo_09 *****", function () {
    pm.expect(pm.response.text()).to.have.string("猫_百度搜索")  //判断响应正文中是否包含猫_百度搜索
});
//响应正文 json
pm.test("case_demo_10 *****", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData.expires_in).to.eql(7200);  //判断json响应正文中是否有7200
});</pre> 
<p></p> 
<p class="img-center"><img alt="复制代码" height="20" src="https://images2.imgbox.com/0b/da/Nt4w1wN7_o.gif" width="20"></p> 
<p>断言的展示结果如下图：</p> 
<p></p> 
<p class="img-center"><img alt="" height="848" src="https://images2.imgbox.com/e3/cd/0hsKCb8p_o.png" width="1200"></p> 
<blockquote> 
 <h3>   自动化测试相关教程推荐：</h3> 
 <h3><a href="https://www.bilibili.com/video/BV17G4y1Z74z/?spm_id_from=333.999.0.0&amp;vd_source=f7b265e48f8139faff684d5069fdfad7" rel="nofollow" title="2023最新自动化测试自学教程新手小白26天入门最详细教程,目前已有300多人通过学习这套教程入职大厂！！_哔哩哔哩_bilibili">2023最新自动化测试自学教程新手小白26天入门最详细教程,目前已有300多人通过学习这套教程入职大厂！！_哔哩哔哩_bilibili</a></h3> 
 <h3><a href="https://www.bilibili.com/video/BV1AF411T7qJ/?spm_id_from=333.999.0.0" rel="nofollow" title="2023最新合集Python自动化测试开发框架【全栈/实战/教程】合集精华，学完年薪40W+_哔哩哔哩_bilibili">2023最新合集Python自动化测试开发框架【全栈/实战/教程】合集精华，学完年薪40W+_哔哩哔哩_bilibili</a></h3> 
 <h3>测试开发相关教程推荐</h3> 
 <h3><a href="https://www.bilibili.com/video/BV1hX4y187wi/?spm_id_from=333.999.0.0&amp;vd_source=f7b265e48f8139faff684d5069fdfad7" rel="nofollow" title="2023全网最牛，字节测试开发大佬现场教学，从零开始教你成为年薪百万的测试开发工程师_哔哩哔哩_bilibili">2023全网最牛，字节测试开发大佬现场教学，从零开始教你成为年薪百万的测试开发工程师_哔哩哔哩_bilibili</a></h3> 
 <h3>postman/jmeter/fiddler测试工具类教程推荐</h3> 
 <h3><a href="https://www.bilibili.com/video/BV1e44y1X78S/?spm_id_from=333.999.0.0&amp;vd_source=f7b265e48f8139faff684d5069fdfad7" rel="nofollow" title="讲的最详细JMeter接口测试/接口自动化测试项目实战合集教程，学jmeter接口测试一套教程就够了！！_哔哩哔哩_bilibili">讲的最详细JMeter接口测试/接口自动化测试项目实战合集教程，学jmeter接口测试一套教程就够了！！_哔哩哔哩_bilibili</a></h3> 
 <h3><a href="https://www.bilibili.com/video/BV1o54y1u7UU/?spm_id_from=333.999.0.0" rel="nofollow" title="2023自学fiddler抓包，请一定要看完【如何1天学会fiddler抓包】的全网最详细视频教程！！_哔哩哔哩_bilibili">2023自学fiddler抓包，请一定要看完【如何1天学会fiddler抓包】的全网最详细视频教程！！_哔哩哔哩_bilibili</a></h3> 
 <h3><a href="https://www.bilibili.com/video/BV16L41117wB/?spm_id_from=333.999.0.0" rel="nofollow" title="2023全网封神，B站讲的最详细的Postman接口测试实战教学，小白都能学会_哔哩哔哩_bilibili">2023全网封神，B站讲的最详细的Postman接口测试实战教学，小白都能学会_哔哩哔哩_bilibili</a></h3> 
 <p></p> 
 <p></p> 
</blockquote> 
<h2>  总结：</h2> 
<h2> 光学理论是没用的，要学会跟着一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。</h2> 
<p></p> 
<p><img alt="" height="872" src="https://images2.imgbox.com/ce/fe/bw6EHO4q_o.jpg" width="670"></p> 
<p><img alt="" height="872" src="https://images2.imgbox.com/75/d8/DZeKucDv_o.jpg" width="670"></p> 
<p><strong>如果对你有帮助的话，点个赞收个藏，给作者一个鼓励。也方便你下次能够快速查找。</strong></p> 
<p><strong>如有不懂还要咨询下方小卡片，博主也希望和志同道合的测试人员一起学习进步</strong></p> 
<p><strong>在适当的年龄，选择适当的岗位，尽量去发挥好自己的优势。</strong></p> 
<p><strong>我的自动化测试开发之路，一路走来都离不每个阶段的计划，因为自己喜欢规划和总结，</strong></p> 
<p><strong>测试开发视频教程、学习笔记领取传送门！！</strong></p> 
<p class="img-center"><img alt="" height="215" src="https://images2.imgbox.com/fc/fb/5huirr30_o.gif" width="129"></p> 
<p></p> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8cd1a57ffa7ac683e78b93b7eb36d542/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows版Minio使用教程（启动，登录，修改密码）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ffb445b284e30419cdcd07cace15911/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Visual Studio Code 1.85 发布，浮动窗口</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>