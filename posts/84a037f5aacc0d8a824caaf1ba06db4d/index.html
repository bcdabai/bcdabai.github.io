<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【雕爷学编程】MicroPython手册之 ESP32-CAM 远程监控 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【雕爷学编程】MicroPython手册之 ESP32-CAM 远程监控" />
<meta property="og:description" content="MicroPython是为了在嵌入式系统中运行Python 3编程语言而设计的轻量级版本解释器。与常规Python相比，MicroPython解释器体积小(仅100KB左右)，通过编译成二进制Executable文件运行，执行效率较高。它使用了轻量级的垃圾回收机制并移除了大部分Python标准库，以适应资源限制的微控制器。
MicroPython主要特点包括:
1、语法和功能与标准Python兼容,易学易用。支持Python大多数核心语法。
2、对硬件直接访问和控制,像Arduino一样控制GPIO、I2C、SPI等。
3、强大的模块系统,提供文件系统、网络、图形界面等功能。
4、支持交叉编译生成高效的原生代码,速度比解释器快10-100倍。
5、代码量少,内存占用小,适合运行在MCU和内存小的开发板上。
6、开源许可,免费使用。Shell交互环境为开发测试提供便利。
7、内置I/O驱动支持大量微控制器平台，如ESP8266、ESP32、STM32、micro:bit、掌控板和PyBoard等。有活跃的社区。
MicroPython的应用场景包括:
1、为嵌入式产品快速构建原型和用户交互。
2、制作一些小型的可 programmable 硬件项目。
3、作为教育工具,帮助初学者学习Python和物联网编程。
4、构建智能设备固件,实现高级控制和云连接。
5、各种微控制器应用如物联网、嵌入式智能、机器人等。
使用MicroPython需要注意:
1、内存和Flash空间有限。
2、解释执行效率不如C语言。
3、部分库函数与标准版有差异。
4、针对平台优化语法,订正与标准Python的差异。
5、合理使用内存资源,避免频繁分配大内存块。
6、利用原生代码提升速度关键部位的性能。
7、适当使用抽象来封装底层硬件操作。
ESP32-CAM是一款基于ESP32芯片的小尺寸摄像头模块，具有低功耗、高性能、Wi-Fi和蓝牙功能等特点。根据我从网络上搜索到的信息，ESP32-CAM的核心技术参数如下：
1、CPU：双核32位LX6微处理器，主频高达240MHz，运算能力高达600 DMIPS
2、内存：内置520 KB SRAM，外置4-8MB PSRAM
3、存储：支持TF卡，最大32G
4、无线通信：支持802.11 b/g/n Wi-Fi和蓝牙4.2 BR/EDR和BLE标准
5、接口：支持UART/SPI/I2C/PWM/ADC/DAC等接口
6、摄像头：支持OV2640和OV7670摄像头，内置闪光灯，支持图片Wi-Fi上传
7、电源管理：支持多种休眠模式，深度睡眠电流最低达到6mA
8、封装形式：DIP封装，可直接插上底板使用
9、尺寸：2740.54.5mm
MicroPython的ESP32-CAM是一种用于远程监控的开发板，下面从专业的视角详细解释其主要特点、应用场景以及需要注意的事项。
主要特点：
图像和视频采集：ESP32-CAM集成了摄像头，可以实时采集高质量的图像和视频。它支持不同分辨率的图像捕获，并提供了图像和视频处理功能，如图像压缩、视频流传输等。
网络连接和通信：ESP32-CAM支持Wi-Fi连接，可以通过网络与其他设备进行通信。它可以通过网络将采集到的图像和视频传输到云平台或本地服务器，实现远程监控和访问。
实时监控和通知：ESP32-CAM可以实时传输图像和视频流，使用户能够实时监控远程位置的情况。通过与其他传感器的结合，还可以实现基于图像和视频的实时报警和通知功能。
应用场景：
家庭安防监控：ESP32-CAM可以用作家庭安防监控系统的核心设备。通过将ESP32-CAM安装在家中的关键位置，用户可以通过互联网远程监控家庭，并在检测到异常情况时接收实时通知。
商业场所监控：ESP32-CAM适用于商业场所的安全监控需求，如商店、办公室、仓库等。它可以实时监控并记录关键区域的图像和视频，提供对商业场所的远程访问和实时监控。
环境监测：ESP32-CAM可以结合其他传感器，如温度传感器、湿度传感器等，实现环境监测。通过采集图像和视频，可以实时监测环境的状况，并在检测到异常情况时触发报警或通知。
需要注意的事项：
网络连接和带宽：使用ESP32-CAM进行远程监控需要保证稳定的网络连接和足够的带宽。确保设备与网络的稳定连接，以避免图像和视频传输的中断或延迟。
隐私和数据安全：在设计远程监控系统时，需要注意保护用户隐私和数据安全。采取适当的安全措施，如加密通信、访问控制和数据加密，以防止未经授权的访问和数据泄露。
存储和数据管理：ESP32-CAM的存储容量有限，需要合理管理图像和视频数据的存储。考虑使用压缩算法、存储策略和数据清理机制，以优化存储空间和数据管理效率。
综上所述，MicroPython的ESP32-CAM是一种适用于远程监控的开发板，具有图像和视频采集、网络连接和通信以及实时监控和通知的特点。它适用于家庭安防监控、商业场所监控和环境监测等场景。在使用时，需要注意网络连接和带宽、隐私和数据安全，以及存储和数据管理等方面的问题。通过ESP32-CAM，用户可以实现远程监控和访问，提高安全性和便利性。
案例一：实时视频流
import network import socket from machine import Pin, PWM import time import ustruct import sensor, image, time # 初始化摄像头和显示屏 sensor." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/84a037f5aacc0d8a824caaf1ba06db4d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-02T09:08:55+08:00" />
<meta property="article:modified_time" content="2023-11-02T09:08:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【雕爷学编程】MicroPython手册之 ESP32-CAM 远程监控</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/1e/1f/1qIHJ1CP_o.gif" alt="在这里插入图片描述"><br> MicroPython是为了在嵌入式系统中运行Python 3编程语言而设计的轻量级版本解释器。与常规Python相比，MicroPython解释器体积小(仅100KB左右)，通过编译成二进制Executable文件运行，执行效率较高。它使用了轻量级的垃圾回收机制并移除了大部分Python标准库，以适应资源限制的微控制器。</p> 
<p>MicroPython主要特点包括:<br> 1、语法和功能与标准Python兼容,易学易用。支持Python大多数核心语法。<br> 2、对硬件直接访问和控制,像Arduino一样控制GPIO、I2C、SPI等。<br> 3、强大的模块系统,提供文件系统、网络、图形界面等功能。<br> 4、支持交叉编译生成高效的原生代码,速度比解释器快10-100倍。<br> 5、代码量少,内存占用小,适合运行在MCU和内存小的开发板上。<br> 6、开源许可,免费使用。Shell交互环境为开发测试提供便利。<br> 7、内置I/O驱动支持大量微控制器平台，如ESP8266、ESP32、STM32、micro:bit、掌控板和PyBoard等。有活跃的社区。</p> 
<p>MicroPython的应用场景包括:<br> 1、为嵌入式产品快速构建原型和用户交互。<br> 2、制作一些小型的可 programmable 硬件项目。<br> 3、作为教育工具,帮助初学者学习Python和物联网编程。<br> 4、构建智能设备固件,实现高级控制和云连接。<br> 5、各种微控制器应用如物联网、嵌入式智能、机器人等。</p> 
<p>使用MicroPython需要注意:<br> 1、内存和Flash空间有限。<br> 2、解释执行效率不如C语言。<br> 3、部分库函数与标准版有差异。<br> 4、针对平台优化语法,订正与标准Python的差异。<br> 5、合理使用内存资源,避免频繁分配大内存块。<br> 6、利用原生代码提升速度关键部位的性能。<br> 7、适当使用抽象来封装底层硬件操作。</p> 
<p><img src="https://images2.imgbox.com/c7/02/aawbFskz_o.jpg" alt="在这里插入图片描述"><br> ESP32-CAM是一款基于ESP32芯片的小尺寸摄像头模块，具有低功耗、高性能、Wi-Fi和蓝牙功能等特点。根据我从网络上搜索到的信息，ESP32-CAM的核心技术参数如下：<br> 1、CPU：双核32位LX6微处理器，主频高达240MHz，运算能力高达600 DMIPS<br> 2、内存：内置520 KB SRAM，外置4-8MB PSRAM<br> 3、存储：支持TF卡，最大32G<br> 4、无线通信：支持802.11 b/g/n Wi-Fi和蓝牙4.2 BR/EDR和BLE标准<br> 5、接口：支持UART/SPI/I2C/PWM/ADC/DAC等接口<br> 6、摄像头：支持OV2640和OV7670摄像头，内置闪光灯，支持图片Wi-Fi上传<br> 7、电源管理：支持多种休眠模式，深度睡眠电流最低达到6mA<br> 8、封装形式：DIP封装，可直接插上底板使用<br> 9、尺寸：2740.54.5mm</p> 
<p><img src="https://images2.imgbox.com/e7/7d/ZRxeBMQ5_o.jpg" alt="在这里插入图片描述"><br> MicroPython的ESP32-CAM是一种用于远程监控的开发板，下面从专业的视角详细解释其主要特点、应用场景以及需要注意的事项。</p> 
<p>主要特点：</p> 
<p>图像和视频采集：ESP32-CAM集成了摄像头，可以实时采集高质量的图像和视频。它支持不同分辨率的图像捕获，并提供了图像和视频处理功能，如图像压缩、视频流传输等。</p> 
<p>网络连接和通信：ESP32-CAM支持Wi-Fi连接，可以通过网络与其他设备进行通信。它可以通过网络将采集到的图像和视频传输到云平台或本地服务器，实现远程监控和访问。</p> 
<p>实时监控和通知：ESP32-CAM可以实时传输图像和视频流，使用户能够实时监控远程位置的情况。通过与其他传感器的结合，还可以实现基于图像和视频的实时报警和通知功能。</p> 
<p>应用场景：</p> 
<p>家庭安防监控：ESP32-CAM可以用作家庭安防监控系统的核心设备。通过将ESP32-CAM安装在家中的关键位置，用户可以通过互联网远程监控家庭，并在检测到异常情况时接收实时通知。</p> 
<p>商业场所监控：ESP32-CAM适用于商业场所的安全监控需求，如商店、办公室、仓库等。它可以实时监控并记录关键区域的图像和视频，提供对商业场所的远程访问和实时监控。</p> 
<p>环境监测：ESP32-CAM可以结合其他传感器，如温度传感器、湿度传感器等，实现环境监测。通过采集图像和视频，可以实时监测环境的状况，并在检测到异常情况时触发报警或通知。</p> 
<p>需要注意的事项：</p> 
<p>网络连接和带宽：使用ESP32-CAM进行远程监控需要保证稳定的网络连接和足够的带宽。确保设备与网络的稳定连接，以避免图像和视频传输的中断或延迟。</p> 
<p>隐私和数据安全：在设计远程监控系统时，需要注意保护用户隐私和数据安全。采取适当的安全措施，如加密通信、访问控制和数据加密，以防止未经授权的访问和数据泄露。</p> 
<p>存储和数据管理：ESP32-CAM的存储容量有限，需要合理管理图像和视频数据的存储。考虑使用压缩算法、存储策略和数据清理机制，以优化存储空间和数据管理效率。</p> 
<p>综上所述，MicroPython的ESP32-CAM是一种适用于远程监控的开发板，具有图像和视频采集、网络连接和通信以及实时监控和通知的特点。它适用于家庭安防监控、商业场所监控和环境监测等场景。在使用时，需要注意网络连接和带宽、隐私和数据安全，以及存储和数据管理等方面的问题。通过ESP32-CAM，用户可以实现远程监控和访问，提高安全性和便利性。</p> 
<p>案例一：实时视频流</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">import</span> socket
<span class="token keyword">from</span> machine <span class="token keyword">import</span> Pin<span class="token punctuation">,</span> PWM
<span class="token keyword">import</span> time
<span class="token keyword">import</span> ustruct
<span class="token keyword">import</span> sensor<span class="token punctuation">,</span> image<span class="token punctuation">,</span> time

<span class="token comment"># 初始化摄像头和显示屏</span>
sensor<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_pixformat<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>RGB565<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_framesize<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>QVGA<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>skip_frames<span class="token punctuation">(</span>time<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">)</span>
lcd <span class="token operator">=</span> pyb<span class="token punctuation">.</span>LCD<span class="token punctuation">(</span><span class="token string">"I2C1"</span><span class="token punctuation">,</span> i2c_addr<span class="token operator">=</span><span class="token number">0x3C</span><span class="token punctuation">)</span>

<span class="token comment"># 连接WiFi</span>
wlan <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
wlan<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> wlan<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting to network...'</span><span class="token punctuation">)</span>
    wlan<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'your_wifi_ssid'</span><span class="token punctuation">,</span> <span class="token string">'your_wifi_password'</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token keyword">not</span> wlan<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Network config:'</span><span class="token punctuation">,</span> wlan<span class="token punctuation">.</span>ifconfig<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 创建UDP套接字</span>
sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_DGRAM<span class="token punctuation">)</span>
sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 捕获图像并发送到客户端</span>
    img <span class="token operator">=</span> sensor<span class="token punctuation">.</span>snapshot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    buf <span class="token operator">=</span> ustruct<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token string">"&lt;L"</span><span class="token punctuation">,</span> img<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> img<span class="token punctuation">.</span>tobytes<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sock<span class="token punctuation">.</span>sendto<span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'your_client_ip'</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>要点解读：这个程序使用MicroPython的ESP32-CAM远程监控功能。首先，它初始化摄像头和显示屏，然后连接到WiFi网络。接着，它创建一个UDP套接字，用于将捕获到的图像发送到客户端。在无限循环中，程序捕获图像并将其发送到指定的客户端IP地址和端口。</p> 
<p>案例二：人脸识别</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sensor<span class="token punctuation">,</span> image<span class="token punctuation">,</span> time
<span class="token keyword">from</span> machine <span class="token keyword">import</span> I2C
<span class="token keyword">from</span> fpioa_manager <span class="token keyword">import</span> fm
<span class="token keyword">from</span> modules <span class="token keyword">import</span> ws2812b
<span class="token keyword">from</span> face_recognition <span class="token keyword">import</span> FaceRecognition

<span class="token comment"># 初始化摄像头和显示屏</span>
sensor<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_pixformat<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>RGB565<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_framesize<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>QVGA<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>skip_frames<span class="token punctuation">(</span>time<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">)</span>
lcd <span class="token operator">=</span> pyb<span class="token punctuation">.</span>LCD<span class="token punctuation">(</span><span class="token string">"I2C1"</span><span class="token punctuation">,</span> i2c_addr<span class="token operator">=</span><span class="token number">0x3C</span><span class="token punctuation">)</span>

<span class="token comment"># 连接WiFi</span>
wlan <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
wlan<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> wlan<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting to network...'</span><span class="token punctuation">)</span>
    wlan<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'your_wifi_ssid'</span><span class="token punctuation">,</span> <span class="token string">'your_wifi_password'</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token keyword">not</span> wlan<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Network config:'</span><span class="token punctuation">,</span> wlan<span class="token punctuation">.</span>ifconfig<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 创建人脸识别对象</span>
face_recognition <span class="token operator">=</span> FaceRecognition<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 捕获图像并进行人脸识别</span>
    img <span class="token operator">=</span> sensor<span class="token punctuation">.</span>snapshot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    faces <span class="token operator">=</span> face_recognition<span class="token punctuation">.</span>detect_faces<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    <span class="token keyword">for</span> face <span class="token keyword">in</span> faces<span class="token punctuation">:</span>
        img<span class="token punctuation">.</span>draw_rectangle<span class="token punctuation">(</span>face<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> face<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> face<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> face<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        img<span class="token punctuation">.</span>draw_string<span class="token punctuation">(</span>face<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> face<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"Face"</span><span class="token punctuation">)</span>
    lcd<span class="token punctuation">.</span>display<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
</code></pre> 
<p>要点解读：这个程序使用MicroPython的ESP32-CAM远程监控功能，并结合人脸识别库进行人脸检测。首先，它初始化摄像头和显示屏，然后连接到WiFi网络。接着，它创建一个人脸识别对象，用于识别图像中的人脸。在无限循环中，程序捕获图像并进行人脸识别，将识别到的人脸用矩形框标记出来，并在显示屏上显示。</p> 
<p>案例三：通过 ESP32-CAM 进行远程监控</p> 
<p>在这个案例中，我们可以通过 ESP32-CAM 控制摄像头进行远程监控，并将监控视频流传输到计算机或其他设备上进行实时观看或存储。代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network  
<span class="token keyword">import</span> time  
<span class="token keyword">import</span> camera  
<span class="token keyword">import</span> urequests <span class="token keyword">as</span> requests  
  
<span class="token comment"># 初始化网络连接和摄像头对象  </span>
wlan <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>  
wlan<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>  
<span class="token keyword">if</span> <span class="token keyword">not</span> wlan<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'connecting to network...'</span><span class="token punctuation">)</span>  
    wlan<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span><span class="token string">'your_ssid'</span><span class="token punctuation">,</span> <span class="token string">'your_password'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
    <span class="token keyword">while</span> <span class="token keyword">not</span> wlan<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token keyword">pass</span>  
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'network config:'</span><span class="token punctuation">,</span> wlan<span class="token punctuation">.</span>ifconfig<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
camera<span class="token punctuation">.</span>set_pixformat<span class="token punctuation">(</span>camera<span class="token punctuation">.</span>RGB565<span class="token punctuation">)</span>  
camera<span class="token punctuation">.</span>set_framerate<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  
camera<span class="token punctuation">.</span>set_lenc<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>  
camera<span class="token punctuation">.</span>setup_encoding<span class="token punctuation">(</span><span class="token string">'jpeg'</span><span class="token punctuation">,</span> quality<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>  
  
<span class="token comment"># 定义一个函数用于发送HTTP请求并获取视频流  </span>
<span class="token keyword">def</span> <span class="token function">get_stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://192.168.1.100:8080/stream?resolution=1920x1080'</span><span class="token punctuation">)</span>  <span class="token comment"># 发送HTTP请求获取视频流  </span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>content  
  
<span class="token comment"># 循环获取视频流并显示在计算机或其他设备上  </span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>  
    stream <span class="token operator">=</span> get_stream<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 获取视频流  </span>
    img <span class="token operator">=</span> camera<span class="token punctuation">.</span>decode_image<span class="token punctuation">(</span>stream<span class="token punctuation">)</span>  <span class="token comment"># 将视频流解码为图像对象  </span>
    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'ESP32-CAM Remote Monitoring'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>  <span class="token comment"># 在计算机上显示图像（需要安装OpenCV库）  </span>
    <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 如果按下“q”键则退出循环  </span>
        <span class="token keyword">break</span>
</code></pre> 
<p>案例四：实时图像传输到Web服务器：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">from</span> machine <span class="token keyword">import</span> Pin
<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep_ms
<span class="token keyword">import</span> urequests <span class="token keyword">as</span> requests
<span class="token keyword">import</span> camera

<span class="token comment"># 连接到Wi-Fi网络</span>
sta_if <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
sta_if<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
sta_if<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">"SSID"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">)</span>

<span class="token comment"># 初始化摄像头</span>
camera<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 设置路由器网络的IP地址</span>
ip_address <span class="token operator">=</span> sta_if<span class="token punctuation">.</span>ifconfig<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 拍摄照片</span>
    img <span class="token operator">=</span> camera<span class="token punctuation">.</span>capture<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 将图像转换为字节流</span>
    img_bytes <span class="token operator">=</span> img<span class="token punctuation">.</span>compress<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 发送图像到Web服务器</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://web_server_ip/upload"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>img_bytes<span class="token punctuation">)</span>

    <span class="token comment"># 打印服务器响应</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

    <span class="token comment"># 延时一段时间</span>
    sleep_ms<span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre> 
<p>要点解读：<br> 使用network模块连接到Wi-Fi网络。<br> 使用camera.init()初始化ESP32-CAM摄像头。<br> 使用camera.capture()拍摄照片。<br> 使用compress()方法将图像压缩为字节流。<br> 使用urequests.post()方法将图像字节流发送到Web服务器的指定URL。<br> 使用sleep_ms()函数实现延时，控制图像传输的间隔。</p> 
<p>案例五：实时视频流传输到Web服务器：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">from</span> machine <span class="token keyword">import</span> Pin
<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep_ms
<span class="token keyword">import</span> urequests <span class="token keyword">as</span> requests
<span class="token keyword">import</span> camera

<span class="token comment"># 连接到Wi-Fi网络</span>
sta_if <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
sta_if<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
sta_if<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">"SSID"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">)</span>

<span class="token comment"># 初始化摄像头</span>
camera<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 设置路由器网络的IP地址</span>
ip_address <span class="token operator">=</span> sta_if<span class="token punctuation">.</span>ifconfig<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 拍摄照片</span>
    img <span class="token operator">=</span> camera<span class="token punctuation">.</span>capture<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 将图像转换为字节流</span>
    img_bytes <span class="token operator">=</span> img<span class="token punctuation">.</span>compress<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 发送图像流到Web服务器</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://web_server_ip/stream"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>img_bytes<span class="token punctuation">)</span>

    <span class="token comment"># 打印服务器响应</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

    <span class="token comment"># 延时一段时间</span>
    sleep_ms<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
</code></pre> 
<p>要点解读：<br> 使用network模块连接到Wi-Fi网络。<br> 使用camera.init()初始化ESP32-CAM摄像头。<br> 使用camera.capture()拍摄照片。<br> 使用compress()方法将图像压缩为字节流。<br> 使用urequests.post()方法将图像字节流发送到Web服务器的指定URL。<br> 使用sleep_ms()函数实现延时，控制视频流传输的帧率。</p> 
<p>案例六：视频流传输到Blynk移动应用：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">import</span> blynklib
<span class="token keyword">import</span> camera

<span class="token comment"># 连接到Wi-Fi网络</span>
sta_if <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
sta_if<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
sta_if<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">"SSID"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">)</span>

<span class="token comment"># 初始化摄像头</span>
camera<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 设置Blynk授权令牌</span>
BLYNK_AUTH <span class="token operator">=</span> <span class="token string">'your_blynk_auth_token'</span>

<span class="token comment"># 设置Blynk服务器的IP地址</span>
BLYNK_SERVER <span class="token operator">=</span> <span class="token string">'blynk-cloud.com'</span>

<span class="token comment"># 设置Blynk服务器的端口号</span>
BLYNK_PORT <span class="token operator">=</span> <span class="token number">80</span>

<span class="token comment"># 创建Blynk客户端实例</span>
blynk <span class="token operator">=</span> blynklib<span class="token punctuation">.</span>Blynk<span class="token punctuation">(</span>BLYNK_AUTH<span class="token punctuation">,</span> server<span class="token operator">=</span>BLYNK_SERVER<span class="token punctuation">,</span> port<span class="token operator">=</span>BLYNK_PORT<span class="token punctuation">)</span>

<span class="token comment"># 每隔1秒发送一帧图像到Blynk移动应用</span>
<span class="token decorator annotation punctuation">@blynk<span class="token punctuation">.</span>run_on_loop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">send_camera_stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 拍摄照片</span>
    img <span class="token operator">=</span> camera<span class="token punctuation">.</span>capture<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 将图像转换为字节流</span>
    img_bytes <span class="token operator">=</span> img<span class="token punctuation">.</span>compress<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 发送图像流到Blynk移动应用</span>
    blynk<span class="token punctuation">.</span>virtual_write<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> img_bytes<span class="token punctuation">)</span>

<span class="token comment"># 运行Blynk事件循环</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    blynk<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>要点解读：<br> 使用network模块连接到Wi-Fi网络。<br> 使用camera.init()初始化ESP32-CAM摄像头。<br> 设置Blynk授权令牌、服务器IP地址和端口号。<br> 创建Blynk客户端实例并连接到Blynk服务器。<br> 使用@blynk.run_on_loop()装饰器设置定时任务，每隔1秒发送一帧图像到Blynk移动应用。<br> 使用camera.capture()拍摄照片。<br> 使用compress()方法将图像压缩为字节流。<br> 使用blynk.virtual_write()方法将图像流发送到Blynk移动应用。<br> 使用blynk.run()运行Blynk事件循环。</p> 
<p>案例七：实时视频监控与远程访问：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">import</span> usocket <span class="token keyword">as</span> socket
<span class="token keyword">import</span> time
<span class="token keyword">import</span> sensor
<span class="token keyword">import</span> image

<span class="token comment"># 连接Wi-Fi</span>
ssid <span class="token operator">=</span> <span class="token string">'your_wifi_ssid'</span>
password <span class="token operator">=</span> <span class="token string">'your_wifi_password'</span>
station <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
station<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
station<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> station<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 创建套接字并绑定端口</span>
sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sock<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment"># 初始化摄像头</span>
sensor<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_pixformat<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>RGB565<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_framesize<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>QVGA<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>skip_frames<span class="token punctuation">(</span>time<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token comment"># 图像传输函数</span>
<span class="token keyword">def</span> <span class="token function">send_image</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">:</span>
    img <span class="token operator">=</span> sensor<span class="token punctuation">.</span>snapshot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    img <span class="token operator">=</span> img<span class="token punctuation">.</span>compress<span class="token punctuation">(</span>quality<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    client<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span>img<span class="token punctuation">)</span>

<span class="token comment"># 主循环</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    client<span class="token punctuation">,</span> addr <span class="token operator">=</span> sock<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Client connected from'</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span>
    <span class="token keyword">while</span> client<span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            send_image<span class="token punctuation">(</span>client<span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
</code></pre> 
<p>要点解读：<br> 该程序使用ESP32-CAM模块通过Wi-Fi连接到网络，并创建一个套接字以侦听客户端连接。<br> 使用MicroPython的socket模块实现TCP服务器来接收客户端的连接请求。<br> 初始化摄像头并设置图像格式和帧大小。<br> 在主循环中，等待客户端连接，然后通过摄像头捕获图像，并使用socket套接字将图像数据实时发送给客户端。</p> 
<p>案例八：远程拍照与图像传输：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">import</span> usocket <span class="token keyword">as</span> socket
<span class="token keyword">import</span> time
<span class="token keyword">import</span> sensor
<span class="token keyword">import</span> image

<span class="token comment"># 连接Wi-Fi</span>
ssid <span class="token operator">=</span> <span class="token string">'your_wifi_ssid'</span>
password <span class="token operator">=</span> <span class="token string">'your_wifi_password'</span>
station <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
station<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
station<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> station<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 创建套接字并连接服务器</span>
SERVER_IP <span class="token operator">=</span> <span class="token string">"your_server_ip"</span>
SERVER_PORT <span class="token operator">=</span> <span class="token number">8080</span>
sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
sock<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>SERVER_IP<span class="token punctuation">,</span> SERVER_PORT<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 拍照并图像传输函数</span>
<span class="token keyword">def</span> <span class="token function">capture_and_send_image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    img <span class="token operator">=</span> sensor<span class="token punctuation">.</span>snapshot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    img <span class="token operator">=</span> img<span class="token punctuation">.</span>compress<span class="token punctuation">(</span>quality<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
    sock<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span>img<span class="token punctuation">)</span>

<span class="token comment"># 主循环</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        capture_and_send_image<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        sock<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
</code></pre> 
<p>要点解读：<br> 该程序使用ESP32-CAM模块通过Wi-Fi连接到网络，并创建一个套接字以连接到服务器。<br> 使用MicroPython的socket模块实现TCP客户端来连接到服务器。<br> 在主循环中，通过摄像头拍摄图像，并将图像数据压缩并通过socket套接字传输给服务器实现远程图像传输。</p> 
<p>案例九：远程视频录制与存储：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> network
<span class="token keyword">import</span> usocket <span class="token keyword">as</span> socket
<span class="token keyword">import</span> time
<span class="token keyword">import</span> sensor
<span class="token keyword">import</span> image
<span class="token keyword">import</span> uos

<span class="token comment"># 连接Wi-Fi</span>
ssid <span class="token operator">=</span> <span class="token string">'your_wifi_ssid'</span>
password <span class="token operator">=</span> <span class="token string">'your_wifi_password'</span>
station <span class="token operator">=</span> network<span class="token punctuation">.</span>WLAN<span class="token punctuation">(</span>network<span class="token punctuation">.</span>STA_IF<span class="token punctuation">)</span>
station<span class="token punctuation">.</span>active<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
station<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> station<span class="token punctuation">.</span>isconnected<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 创建套接字并绑定端口</span>
sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sock<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment"># 初始化摄像头</span>
sensor<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_pixformat<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>RGB565<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>set_framesize<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>QVGA<span class="token punctuation">)</span>
sensor<span class="token punctuation">.</span>skip_frames<span class="token punctuation">(</span>time<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token comment"># 视频录制函数</span>
<span class="token keyword">def</span> <span class="token function">record_video</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    frames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        img <span class="token operator">=</span> sensor<span class="token punctuation">.</span>snapshot<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frames<span class="token punctuation">.</span>append<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    <span class="token keyword">return</span> frames

<span class="token comment"># 视频存储函数</span>
<span class="token keyword">def</span> <span class="token function">save_video</span><span class="token punctuation">(</span>frames<span class="token punctuation">)</span><span class="token punctuation">:</span>
    uos<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">"/video"</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> frame <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>frames<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">"/video/frame{}.jpg"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 主循环</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    client<span class="token punctuation">,</span> addr <span class="token operator">=</span> sock<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Client connected from'</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span>
    <span class="token keyword">while</span> client<span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            frames <span class="token operator">=</span> record_video<span class="token punctuation">(</span><span class="token punctuation">)</span>
            save_video<span class="token punctuation">(</span>frames<span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
</code></pre> 
<p>要点解读：<br> 该程序使用ESP32-CAM模块通过Wi-Fi连接到网络，并创建一个套接字以侦听客户端连接。<br> 使用MicroPython的socket模块实现TCP服务器来接收客户端的连接请求。<br> 初始化摄像头并设置图像格式和帧大小。<br> 在主循环中，等待客户端连接，然后通过摄像头连续捕获一定数量的图像帧，并将它们保存为视频文件。<br> 这些示例代码给出了ESP32-CAM模块远程监控的一些实际运用程序。第七个示例提供了实时视频监控与远程访问功能，可以通过浏览器或其他网络客户端实时查看摄像头捕获的图像。第八个示例展示了远程拍照与图像传输功能，可以通过与服务器建立连接，将摄像头拍摄的图像传输到服务器端。第九个示例演示了远程视频录制与存储功能，可以通过客户端连接到ESP32-CAM，并将连续的图像帧保存为视频文件。这些示例代码可以根据实际需求进行修改和扩展。</p> 
<p>请注意，以上案例只是为了拓展思路，可能存在错误或不适用的情况。不同的硬件平台、使用场景和MicroPython版本可能会导致不同的使用方法。在实际编程中，您需要根据您的硬件配置和具体需求进行调整，并进行多次实际测试。需要正确连接硬件并了解所使用的传感器和设备的规范和特性非常重要。对于涉及到硬件操作的代码，请确保在使用之前充分了解和确认所使用的引脚和电平等参数的正确性和安全性。</p> 
<p><img src="https://images2.imgbox.com/a3/37/YjQMQzps_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d91789f92e2285ae554ab4e38cf624e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言基本语法入门练习题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c23ec7ee5b8a255668b5594fd1f1507/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">框架安全-CVE 复现&amp;Apache Shiro&amp;Apache Solr漏洞复现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>