<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Androidâ€”â€”Handlerä¸€ç¯‡å°±çœ‹æ‡‚ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Androidâ€”â€”Handlerä¸€ç¯‡å°±çœ‹æ‡‚" />
<meta property="og:description" content="ğŸ˜„ğŸ˜„ä¸ªäººä»‹ç»
å…‰å­éƒ.è¿›è¡Œå¼€å‘å·¥ä½œä¸ƒå¹´ä»¥ä¸Šï¼Œç›®å‰æ¶‰åŠå…¨æ ˆé¢†åŸŸå¹¶è¿›è¡Œå¼€å‘ã€‚ä¼šç»å¸¸è·Ÿå°ä¼™ä¼´åˆ†äº«å‰æ²¿æŠ€æœ¯çŸ¥è¯†ï¼Œjavaåå°ã€webå‰ç«¯ã€ç§»åŠ¨ç«¯ï¼ˆAndroidï¼Œuniappï¼Œå°ç¨‹åºï¼‰ç›¸å…³çš„çŸ¥è¯†ä»¥åŠç»éªŒä½“ä¼šï¼Œä¸å®šæœŸä¼šæœ‰æºç åŠæ¡†æ¶çš„åˆ†äº«ï¼Œå¦‚æœä½ æœ‰ç›¸å…³çš„çŸ¥è¯†æƒ³è¦åŠæ—¶äº†è§£æˆ–è€…è®¨è®ºï¼Œé‚£ä¹ˆè¯·å…³æ³¨å…‰å­éƒ.ï¼Œç‚¹ç‚¹æ–‡æœ«å°å¡ç‰‡ï¼Œä¸å®šæœŸä¼šæœ‰å…è´¹çš„èµ„æºåˆ†äº«ç»™å¤§å®¶ï¼Œæ„Ÿè°¢æ”¯æŒ~
ğŸ‰ğŸ‰äººç”Ÿæ ¼è¨€
ä½ è¦æ‰¹è¯„æŒ‡ç‚¹å››å‘¨é£æ™¯ï¼Œé¦–å…ˆä½ è¦çˆ¬ä¸Šå±‹é¡¶ã€‚
ğŸŒˆğŸŒˆå…‰å­éƒä»Šå¤©å¸¦å¤§å®¶è¯¦ç»†çš„äº†è§£Androidä¸­çš„Handleræœºåˆ¶ï¼Œä¸€ç¯‡å°±æ‡‚ï¼åºŸè¯å°‘è¯´ï¼Œå¼€æ•´ï¼
ç›®å½•
ä¸€ã€å¼•è¨€
äºŒã€Handleræœºåˆ¶æ¦‚è¿°
1.Handlerã€Messageå’ŒLooperçš„åŸºæœ¬æ¦‚å¿µ
ä¸‰ã€æºç ç»“æ„
1.Handlerçš„æºç ç»“æ„ï¼š
2.Messageçš„æºç ç»“æ„
3.Lopperçš„æºç ç»“æ„
4.å…³ç³»å’Œåä½œæœºåˆ¶ï¼š
å››ã€Handlerçš„ä½¿ç”¨æ–¹æ³•
1.åˆ›å»ºHandlerå¯¹è±¡ï¼š
2.å‘é€æ¶ˆæ¯ï¼š
3.å¤„ç†æ¶ˆæ¯ï¼š
4.åœ¨ç‰¹å®šçº¿ç¨‹ä¸­åˆ›å»ºHandlerå¯¹è±¡ï¼š
äº”ã€Handlerçš„çº¿ç¨‹å®‰å…¨æ€§
1.åˆ›å»ºHandlerçš„æ­£ç¡®æ–¹å¼ï¼š
2.å¤„ç†æ¶ˆæ¯çš„çº¿ç¨‹å®‰å…¨æ€§ï¼š
3.ç¡®ä¿æ¶ˆæ¯çš„å¤„ç†åœ¨æ­£ç¡®çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼š
å…­ã€Handlerè¿›é˜¶æ“ä½œ
1.å¼‚æ­¥åŠ è½½æ•°æ®ï¼š
2.å»¶æ—¶æ“ä½œï¼š
3.UIçº¿ç¨‹æ›´æ–°ï¼š
ä¸€ã€å¼•è¨€ åœ¨Androidå¼€å‘ä¸­ï¼Œæ¶ˆæ¯ä¼ é€’å’Œçº¿ç¨‹é€šä¿¡æ˜¯å¸¸è§çš„éœ€æ±‚ã€‚è€ŒAndroidçš„Handleræœºåˆ¶å°±æ˜¯ç”¨æ¥å®ç°è¿™ç§æ¶ˆæ¯ä¼ é€’å’Œçº¿ç¨‹é€šä¿¡çš„é‡è¦ç»„ä»¶ã€‚å®ƒåœ¨Androidåº”ç”¨å¼€å‘ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚
Handleré‡è¦æ€§ï¼š
çº¿ç¨‹é—´é€šä¿¡ï¼šAndroidåº”ç”¨é€šå¸¸ä¼šæ¶‰åŠåˆ°å¤šä¸ªçº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œï¼Œè€ŒHandleræœºåˆ¶æä¾›äº†ä¸€ç§ç®€å•è€Œé«˜æ•ˆçš„æ–¹å¼æ¥å®ç°çº¿ç¨‹é—´çš„é€šä¿¡ã€‚é€šè¿‡Handlerï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°ç›®æ ‡çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç›®æ ‡çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ï¼Œä»è€Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œåä½œã€‚
å¼‚æ­¥æ¶ˆæ¯å¤„ç†ï¼šåœ¨Androidå¼€å‘ä¸­ï¼Œè®¸å¤šä»»åŠ¡éœ€è¦åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè€Œå°†ç»“æœæ›´æ–°åˆ°UIç•Œé¢ä¸Šã€‚Handleræœºåˆ¶å…è®¸æˆ‘ä»¬åœ¨åå°çº¿ç¨‹ä¸­å¤„ç†ä»»åŠ¡ï¼Œå¹¶é€šè¿‡Handlerå°†ç»“æœå‘é€åˆ°UIçº¿ç¨‹ï¼Œä»¥ä¾¿æ›´æ–°UIç•Œé¢ã€‚è¿™ç§å¼‚æ­¥æ¶ˆæ¯å¤„ç†çš„æœºåˆ¶åœ¨ä¿æŒUIçš„å“åº”æ€§å’Œé¿å…é˜»å¡ä¸»çº¿ç¨‹æ–¹é¢èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚
å®šæ—¶ä»»åŠ¡å¤„ç†ï¼šHandleræœºåˆ¶è¿˜å¯ä»¥ç”¨äºå¤„ç†å®šæ—¶ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Handlerçš„postDelayed()æ–¹æ³•æ¥å»¶è¿Ÿæ‰§è¡Œä»£ç å—æˆ–å‘é€å»¶æ—¶æ¶ˆæ¯ã€‚è¿™å¯¹äºå®ç°å®šæ—¶åˆ·æ–°ã€å®šæ—¶æ‰§è¡Œä»»åŠ¡ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚
Handleråº”ç”¨åœºæ™¯ï¼š
UIæ›´æ–°ï¼šå½“åå°ä»»åŠ¡å®Œæˆæ—¶ï¼Œé€šè¿‡Handleræœºåˆ¶å°†ç»“æœå‘é€åˆ°UIçº¿ç¨‹ï¼Œä»¥æ›´æ–°UIç•Œé¢ï¼Œå¦‚æ˜¾ç¤ºåŠ è½½å®Œæˆçš„æ•°æ®ã€æ›´æ–°è¿›åº¦æ¡ç­‰ã€‚
åå°ä»»åŠ¡å¤„ç†ï¼šé€šè¿‡Handleræœºåˆ¶ï¼Œå¯ä»¥å°†åå°ä»»åŠ¡å‘é€åˆ°å­çº¿ç¨‹æ‰§è¡Œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œä»è€Œä¿æŒUIçš„æµç•…æ€§ï¼Œå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰ã€‚
å®šæ—¶ä»»åŠ¡ï¼šä½¿ç”¨Handlerçš„å®šæ—¶ä»»åŠ¡åŠŸèƒ½ï¼Œå¯ä»¥å®ç°å®šæ—¶æ‰§è¡Œä»£ç å—æˆ–å‘é€å»¶æ—¶æ¶ˆæ¯ï¼Œå¦‚å®šæ—¶åˆ·æ–°ã€å®šæ—¶é€šçŸ¥ç­‰ã€‚
çº¿ç¨‹é—´é€šä¿¡ï¼šé€šè¿‡Handleræœºåˆ¶ï¼Œåœ¨ä¸åŒçº¿ç¨‹é—´å‘é€æ¶ˆæ¯å’Œå¤„ç†æ¶ˆæ¯ï¼Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œåä½œï¼Œå¦‚ä¸»çº¿ç¨‹å’Œåå°çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚
äºŒã€Handleræœºåˆ¶æ¦‚è¿° 1.Handlerã€Messageå’ŒLooperçš„åŸºæœ¬æ¦‚å¿µ Handlerï¼š
Handleræ˜¯Androidä¸­çš„æ¶ˆæ¯å¤„ç†å™¨ï¼Œå®ƒè´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯ã€‚æ¯ä¸ªHandlerå®ä¾‹éƒ½å…³è”ä¸€ä¸ªç‰¹å®šçš„çº¿ç¨‹ï¼Œå¹¶ä¸è¯¥çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³è”ã€‚é€šè¿‡Handlerï¼Œæˆ‘ä»¬å¯ä»¥å‘é€å’Œå¤„ç†æ¶ˆæ¯ï¼Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œåä½œã€‚
Messageï¼š
Messageæ˜¯Handlerä¼ é€’çš„æ¶ˆæ¯å¯¹è±¡ï¼Œç”¨äºåœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ã€‚å®ƒåŒ…å«äº†è¦ä¼ é€’çš„æ•°æ®å’Œé™„åŠ ä¿¡æ¯ï¼Œå¦‚æ¶ˆæ¯ç±»å‹ã€æ ‡å¿—ç­‰ã€‚Messageå¯¹è±¡å¯ä»¥é€šè¿‡Handlerçš„sendMessage()æ–¹æ³•å‘é€åˆ°ç›®æ ‡çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç›®æ ‡çº¿ç¨‹ä¸­è¢«å¤„ç†ã€‚
Looperï¼š
Looperæ˜¯ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯å™¨ï¼Œå®ƒç”¨äºç®¡ç†çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªLooperå¯¹è±¡ï¼Œå®ƒè´Ÿè´£å¾ªç¯è¯»å–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œå¹¶å°†æ¶ˆæ¯ä¼ é€’ç»™å¯¹åº”çš„Handlerè¿›è¡Œå¤„ç†ã€‚Looperçš„å·¥ä½œæ–¹å¼æ˜¯ä¸æ–­ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯ï¼Œå¹¶é€šè¿‡Handlerçš„dispatchMessage()æ–¹æ³•å°†æ¶ˆæ¯åˆ†å‘ç»™ç›®æ ‡Handlerè¿›è¡Œå¤„ç†ã€‚
å·¥ä½œåŸç†ï¼š
å½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦ä½¿ç”¨Handleræ¥å¤„ç†æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªLooperå¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶prepare()æ–¹æ³•åˆ›å»ºä¸€ä¸ªä¸å½“å‰çº¿ç¨‹å…³è”çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¥ç€ï¼Œé€šè¿‡Looperçš„loop()æ–¹æ³•å¯åŠ¨æ¶ˆæ¯å¾ªç¯ï¼Œå¼€å§‹å¾ªç¯è¯»å–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚å½“æœ‰æ¶ˆæ¯é€šè¿‡Handlerçš„sendMessage()æ–¹æ³•å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼ŒLooperä¼šä¸æ–­ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™å¯¹åº”çš„Handlerè¿›è¡Œå¤„ç†ã€‚Handleråœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šè°ƒç”¨è‡ªå·±çš„handleMessage()æ–¹æ³•æ¥å¤„ç†æ¶ˆæ¯ã€‚ ä¸‰ã€æºç ç»“æ„ 1.Handlerçš„æºç ç»“æ„ï¼š public class Handler { private Looper mLooper; private MessageQueue mQueue; public Handler() { this(Looper.myLooper()); } public Handler(Looper looper) { mLooper = looper; mQueue = looper." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5bafe36876cad04901cff8196cf19342/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-07T08:00:00+08:00" />
<meta property="article:modified_time" content="2023-06-07T08:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Androidâ€”â€”Handlerä¸€ç¯‡å°±çœ‹æ‡‚</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#4da8ee;"><em><strong>ğŸ˜„ğŸ˜„ä¸ªäººä»‹ç»</strong></em></span></p> 
 <p><span style="color:#4da8ee;"><em><strong>å…‰å­éƒ.è¿›è¡Œå¼€å‘å·¥ä½œä¸ƒå¹´ä»¥ä¸Šï¼Œç›®å‰æ¶‰åŠå…¨æ ˆé¢†åŸŸå¹¶è¿›è¡Œå¼€å‘ã€‚ä¼šç»å¸¸è·Ÿå°ä¼™ä¼´åˆ†äº«å‰æ²¿æŠ€æœ¯çŸ¥è¯†ï¼Œjavaåå°ã€webå‰ç«¯ã€ç§»åŠ¨ç«¯ï¼ˆAndroidï¼Œuniappï¼Œ</strong><strong>å°ç¨‹åº</strong><strong>ï¼‰ç›¸å…³çš„çŸ¥è¯†ä»¥åŠç»éªŒä½“ä¼šï¼Œä¸å®šæœŸä¼šæœ‰æºç åŠæ¡†æ¶çš„åˆ†äº«ï¼Œå¦‚æœä½ æœ‰ç›¸å…³çš„çŸ¥è¯†æƒ³è¦åŠæ—¶äº†è§£æˆ–è€…è®¨è®ºï¼Œé‚£ä¹ˆè¯·å…³æ³¨å…‰å­éƒ.ï¼Œç‚¹ç‚¹æ–‡æœ«å°å¡ç‰‡ï¼Œä¸å®šæœŸä¼šæœ‰å…è´¹çš„èµ„æºåˆ†äº«ç»™å¤§å®¶ï¼Œæ„Ÿè°¢æ”¯æŒ~</strong></em></span></p> 
 <p><span style="color:#4da8ee;"><em><strong>ğŸ‰ğŸ‰äººç”Ÿæ ¼è¨€</strong></em></span></p> 
 <p><span style="color:#4da8ee;"><strong><em>ä½ è¦æ‰¹è¯„æŒ‡ç‚¹å››å‘¨é£æ™¯ï¼Œé¦–å…ˆä½ è¦çˆ¬ä¸Šå±‹é¡¶ã€‚</em></strong></span></p> 
</blockquote> 
<p><span style="color:#ed7976;">ğŸŒˆğŸŒˆ<strong><em>å…‰å­éƒä»Šå¤©å¸¦å¤§å®¶è¯¦ç»†çš„äº†è§£Androidä¸­çš„Handleræœºåˆ¶ï¼Œä¸€ç¯‡å°±æ‡‚ï¼åºŸè¯å°‘è¯´ï¼Œå¼€æ•´ï¼</em></strong></span></p> 
<p></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80" rel="nofollow">ä¸€ã€å¼•è¨€</a></p> 
<p id="%E4%BA%8C%E3%80%81Handler%E6%9C%BA%E5%88%B6%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81Handler%E6%9C%BA%E5%88%B6%E6%A6%82%E8%BF%B0" rel="nofollow">äºŒã€Handleræœºåˆ¶æ¦‚è¿°</a></p> 
<p id="1.Handler%E3%80%81Message%E5%92%8CLooper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-toc" style="margin-left:80px;"><a href="#1.Handler%E3%80%81Message%E5%92%8CLooper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="nofollow">1.Handlerã€Messageå’ŒLooperçš„åŸºæœ¬æ¦‚å¿µ</a></p> 
<p id="%E4%B8%89%E3%80%81%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84" rel="nofollow">ä¸‰ã€æºç ç»“æ„</a></p> 
<p id="1.Handler%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84%EF%BC%9A-toc" style="margin-left:80px;"><a href="#1.Handler%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84%EF%BC%9A" rel="nofollow">1.Handlerçš„æºç ç»“æ„ï¼š</a></p> 
<p id="2.Message%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84-toc" style="margin-left:80px;"><a href="#2.Message%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84" rel="nofollow">2.Messageçš„æºç ç»“æ„</a></p> 
<p id="3.Lopper%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84-toc" style="margin-left:80px;"><a href="#3.Lopper%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84" rel="nofollow">3.Lopperçš„æºç ç»“æ„</a></p> 
<p id="4.%E5%85%B3%E7%B3%BB%E5%92%8C%E5%8D%8F%E4%BD%9C%E6%9C%BA%E5%88%B6%EF%BC%9A-toc" style="margin-left:80px;"><a href="#4.%E5%85%B3%E7%B3%BB%E5%92%8C%E5%8D%8F%E4%BD%9C%E6%9C%BA%E5%88%B6%EF%BC%9A" rel="nofollow">4.å…³ç³»å’Œåä½œæœºåˆ¶ï¼š</a></p> 
<p id="%E5%9B%9B%E3%80%81Handler%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81Handler%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">å››ã€Handlerçš„ä½¿ç”¨æ–¹æ³•</a></p> 
<p id="1.%E5%88%9B%E5%BB%BAHandler%E5%AF%B9%E8%B1%A1%EF%BC%9A-toc" style="margin-left:80px;"><a href="#1.%E5%88%9B%E5%BB%BAHandler%E5%AF%B9%E8%B1%A1%EF%BC%9A" rel="nofollow">1.åˆ›å»ºHandlerå¯¹è±¡ï¼š</a></p> 
<p id="2.%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%EF%BC%9A-toc" style="margin-left:80px;"><a href="#2.%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%EF%BC%9A" rel="nofollow">2.å‘é€æ¶ˆæ¯ï¼š</a></p> 
<p id="3.%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%EF%BC%9A-toc" style="margin-left:80px;"><a href="#3.%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%EF%BC%9A" rel="nofollow">3.å¤„ç†æ¶ˆæ¯ï¼š</a></p> 
<p id="4.%E5%9C%A8%E7%89%B9%E5%AE%9A%E7%BA%BF%E7%A8%8B%E4%B8%AD%E5%88%9B%E5%BB%BAHandler%E5%AF%B9%E8%B1%A1%EF%BC%9A-toc" style="margin-left:80px;"><a href="#4.%E5%9C%A8%E7%89%B9%E5%AE%9A%E7%BA%BF%E7%A8%8B%E4%B8%AD%E5%88%9B%E5%BB%BAHandler%E5%AF%B9%E8%B1%A1%EF%BC%9A" rel="nofollow">4.åœ¨ç‰¹å®šçº¿ç¨‹ä¸­åˆ›å»ºHandlerå¯¹è±¡ï¼š</a></p> 
<p id="%E4%BA%94%E3%80%81Handler%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7-toc" style="margin-left:40px;"><a href="#%E4%BA%94%E3%80%81Handler%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7" rel="nofollow">äº”ã€Handlerçš„çº¿ç¨‹å®‰å…¨æ€§</a></p> 
<p id="1.%E5%88%9B%E5%BB%BAHandler%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%96%B9%E5%BC%8F%EF%BC%9A-toc" style="margin-left:80px;"><a href="#1.%E5%88%9B%E5%BB%BAHandler%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%96%B9%E5%BC%8F%EF%BC%9A" rel="nofollow">1.åˆ›å»ºHandlerçš„æ­£ç¡®æ–¹å¼ï¼š</a></p> 
<p id="2.%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7%EF%BC%9A-toc" style="margin-left:80px;"><a href="#2.%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7%EF%BC%9A" rel="nofollow">2.å¤„ç†æ¶ˆæ¯çš„çº¿ç¨‹å®‰å…¨æ€§ï¼š</a></p> 
<p id="3.%E7%A1%AE%E4%BF%9D%E6%B6%88%E6%81%AF%E7%9A%84%E5%A4%84%E7%90%86%E5%9C%A8%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%BA%BF%E7%A8%8B%E4%B8%AD%E6%89%A7%E8%A1%8C%EF%BC%9A-toc" style="margin-left:80px;"><a href="#3.%E7%A1%AE%E4%BF%9D%E6%B6%88%E6%81%AF%E7%9A%84%E5%A4%84%E7%90%86%E5%9C%A8%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%BA%BF%E7%A8%8B%E4%B8%AD%E6%89%A7%E8%A1%8C%EF%BC%9A" rel="nofollow">3.ç¡®ä¿æ¶ˆæ¯çš„å¤„ç†åœ¨æ­£ç¡®çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼š</a></p> 
<p id="%E5%85%AD%E3%80%81Handler%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%E5%85%AD%E3%80%81Handler%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C" rel="nofollow">å…­ã€Handlerè¿›é˜¶æ“ä½œ</a></p> 
<p id="1.%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%EF%BC%9A-toc" style="margin-left:80px;"><a href="#1.%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%EF%BC%9A" rel="nofollow">1.å¼‚æ­¥åŠ è½½æ•°æ®ï¼š</a></p> 
<p id="2.%E5%BB%B6%E6%97%B6%E6%93%8D%E4%BD%9C%EF%BC%9A-toc" style="margin-left:80px;"><a href="#2.%E5%BB%B6%E6%97%B6%E6%93%8D%E4%BD%9C%EF%BC%9A" rel="nofollow">2.å»¶æ—¶æ“ä½œï¼š</a></p> 
<p id="3.UI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0%EF%BC%9A-toc" style="margin-left:80px;"><a href="#3.UI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0%EF%BC%9A" rel="nofollow">3.UIçº¿ç¨‹æ›´æ–°ï¼š</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80">ä¸€ã€å¼•è¨€</h3> 
<p>åœ¨Androidå¼€å‘ä¸­ï¼Œæ¶ˆæ¯ä¼ é€’å’Œçº¿ç¨‹é€šä¿¡æ˜¯å¸¸è§çš„éœ€æ±‚ã€‚è€ŒAndroidçš„Handleræœºåˆ¶å°±æ˜¯ç”¨æ¥å®ç°è¿™ç§æ¶ˆæ¯ä¼ é€’å’Œçº¿ç¨‹é€šä¿¡çš„é‡è¦ç»„ä»¶ã€‚å®ƒåœ¨Androidåº”ç”¨å¼€å‘ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚</p> 
<p><strong>Handleré‡è¦æ€§ï¼š</strong></p> 
<ol><li> <p><strong>çº¿ç¨‹é—´é€šä¿¡</strong>ï¼šAndroidåº”ç”¨é€šå¸¸ä¼šæ¶‰åŠåˆ°å¤šä¸ªçº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œï¼Œè€ŒHandleræœºåˆ¶æä¾›äº†ä¸€ç§ç®€å•è€Œé«˜æ•ˆçš„æ–¹å¼æ¥å®ç°çº¿ç¨‹é—´çš„é€šä¿¡ã€‚é€šè¿‡Handlerï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°ç›®æ ‡çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç›®æ ‡çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ï¼Œä»è€Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œåä½œã€‚</p> </li><li> <p><strong>å¼‚æ­¥æ¶ˆæ¯å¤„ç†</strong>ï¼šåœ¨Androidå¼€å‘ä¸­ï¼Œè®¸å¤šä»»åŠ¡éœ€è¦åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè€Œå°†ç»“æœæ›´æ–°åˆ°UIç•Œé¢ä¸Šã€‚Handleræœºåˆ¶å…è®¸æˆ‘ä»¬åœ¨åå°çº¿ç¨‹ä¸­å¤„ç†ä»»åŠ¡ï¼Œå¹¶é€šè¿‡Handlerå°†ç»“æœå‘é€åˆ°UIçº¿ç¨‹ï¼Œä»¥ä¾¿æ›´æ–°UIç•Œé¢ã€‚è¿™ç§å¼‚æ­¥æ¶ˆæ¯å¤„ç†çš„æœºåˆ¶åœ¨ä¿æŒUIçš„å“åº”æ€§å’Œé¿å…é˜»å¡ä¸»çº¿ç¨‹æ–¹é¢èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p> </li><li> <p><strong>å®šæ—¶ä»»åŠ¡å¤„ç†</strong>ï¼šHandleræœºåˆ¶è¿˜å¯ä»¥ç”¨äºå¤„ç†å®šæ—¶ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Handlerçš„postDelayed()æ–¹æ³•æ¥å»¶è¿Ÿæ‰§è¡Œä»£ç å—æˆ–å‘é€å»¶æ—¶æ¶ˆæ¯ã€‚è¿™å¯¹äºå®ç°å®šæ—¶åˆ·æ–°ã€å®šæ—¶æ‰§è¡Œä»»åŠ¡ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p> </li></ol> 
<p><strong>Handleråº”ç”¨åœºæ™¯ï¼š</strong></p> 
<ol><li> <p><strong>UIæ›´æ–°ï¼š</strong>å½“åå°ä»»åŠ¡å®Œæˆæ—¶ï¼Œé€šè¿‡Handleræœºåˆ¶å°†ç»“æœå‘é€åˆ°UIçº¿ç¨‹ï¼Œä»¥æ›´æ–°UIç•Œé¢ï¼Œå¦‚æ˜¾ç¤ºåŠ è½½å®Œæˆçš„æ•°æ®ã€æ›´æ–°è¿›åº¦æ¡ç­‰ã€‚</p> </li><li> <p><strong>åå°ä»»åŠ¡å¤„ç†ï¼š</strong>é€šè¿‡Handleræœºåˆ¶ï¼Œå¯ä»¥å°†åå°ä»»åŠ¡å‘é€åˆ°å­çº¿ç¨‹æ‰§è¡Œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œä»è€Œä¿æŒUIçš„æµç•…æ€§ï¼Œå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰ã€‚</p> </li><li> <p><strong>å®šæ—¶ä»»åŠ¡ï¼š</strong>ä½¿ç”¨Handlerçš„å®šæ—¶ä»»åŠ¡åŠŸèƒ½ï¼Œå¯ä»¥å®ç°å®šæ—¶æ‰§è¡Œä»£ç å—æˆ–å‘é€å»¶æ—¶æ¶ˆæ¯ï¼Œå¦‚å®šæ—¶åˆ·æ–°ã€å®šæ—¶é€šçŸ¥ç­‰ã€‚</p> </li><li> <p><strong>çº¿ç¨‹é—´é€šä¿¡ï¼š</strong>é€šè¿‡Handleræœºåˆ¶ï¼Œåœ¨ä¸åŒçº¿ç¨‹é—´å‘é€æ¶ˆæ¯å’Œå¤„ç†æ¶ˆæ¯ï¼Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œåä½œï¼Œå¦‚ä¸»çº¿ç¨‹å’Œåå°çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p> </li></ol> 
<h3 id="%E4%BA%8C%E3%80%81Handler%E6%9C%BA%E5%88%B6%E6%A6%82%E8%BF%B0">äºŒã€Handleræœºåˆ¶æ¦‚è¿°</h3> 
<h4 id="1.Handler%E3%80%81Message%E5%92%8CLooper%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">1.Handlerã€Messageå’ŒLooperçš„åŸºæœ¬æ¦‚å¿µ</h4> 
<p><strong>Handlerï¼š</strong></p> 
<p>Handleræ˜¯Androidä¸­çš„æ¶ˆæ¯å¤„ç†å™¨ï¼Œå®ƒè´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯ã€‚æ¯ä¸ªHandlerå®ä¾‹éƒ½å…³è”ä¸€ä¸ªç‰¹å®šçš„çº¿ç¨‹ï¼Œå¹¶ä¸è¯¥çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³è”ã€‚é€šè¿‡Handlerï¼Œæˆ‘ä»¬å¯ä»¥å‘é€å’Œå¤„ç†æ¶ˆæ¯ï¼Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œåä½œã€‚</p> 
<p><strong>Messageï¼š</strong></p> 
<p>Messageæ˜¯Handlerä¼ é€’çš„æ¶ˆæ¯å¯¹è±¡ï¼Œç”¨äºåœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ã€‚å®ƒåŒ…å«äº†è¦ä¼ é€’çš„æ•°æ®å’Œé™„åŠ ä¿¡æ¯ï¼Œå¦‚æ¶ˆæ¯ç±»å‹ã€æ ‡å¿—ç­‰ã€‚Messageå¯¹è±¡å¯ä»¥é€šè¿‡Handlerçš„sendMessage()æ–¹æ³•å‘é€åˆ°ç›®æ ‡çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç›®æ ‡çº¿ç¨‹ä¸­è¢«å¤„ç†ã€‚</p> 
<p><strong>Looperï¼š</strong></p> 
<p>Looperæ˜¯ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯å™¨ï¼Œå®ƒç”¨äºç®¡ç†çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªLooperå¯¹è±¡ï¼Œå®ƒè´Ÿè´£å¾ªç¯è¯»å–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œå¹¶å°†æ¶ˆæ¯ä¼ é€’ç»™å¯¹åº”çš„Handlerè¿›è¡Œå¤„ç†ã€‚Looperçš„å·¥ä½œæ–¹å¼æ˜¯ä¸æ–­ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯ï¼Œå¹¶é€šè¿‡Handlerçš„dispatchMessage()æ–¹æ³•å°†æ¶ˆæ¯åˆ†å‘ç»™ç›®æ ‡Handlerè¿›è¡Œå¤„ç†ã€‚</p> 
<p><span style="color:#ed7976;">å·¥ä½œåŸç†ï¼š</span></p> 
<ul><li><span style="color:#ed7976;">å½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦ä½¿ç”¨Handleræ¥å¤„ç†æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªLooperå¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶prepare()æ–¹æ³•åˆ›å»ºä¸€ä¸ªä¸å½“å‰çº¿ç¨‹å…³è”çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</span></li><li><span style="color:#ed7976;">æ¥ç€ï¼Œé€šè¿‡Looperçš„loop()æ–¹æ³•å¯åŠ¨æ¶ˆæ¯å¾ªç¯ï¼Œå¼€å§‹å¾ªç¯è¯»å–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚</span></li><li><span style="color:#ed7976;">å½“æœ‰æ¶ˆæ¯é€šè¿‡Handlerçš„sendMessage()æ–¹æ³•å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼ŒLooperä¼šä¸æ–­ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™å¯¹åº”çš„Handlerè¿›è¡Œå¤„ç†ã€‚</span></li><li><span style="color:#ed7976;">Handleråœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šè°ƒç”¨è‡ªå·±çš„handleMessage()æ–¹æ³•æ¥å¤„ç†æ¶ˆæ¯ã€‚</span></li></ul> 
<h3 id="%E4%B8%89%E3%80%81%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84"><span style="color:#333333;">ä¸‰ã€æºç ç»“æ„</span></h3> 
<h4 id="1.Handler%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84%EF%BC%9A"><span style="color:#333333;">1.Handlerçš„æºç ç»“æ„ï¼š</span></h4> 
<pre><code class="language-java">public class Handler {
    private Looper mLooper;
    private MessageQueue mQueue;

    public Handler() {
        this(Looper.myLooper());
    }

    public Handler(Looper looper) {
        mLooper = looper;
        mQueue = looper.getQueue();
    }

    public void handleMessage(Message msg) {
        // å¤„ç†æ¶ˆæ¯çš„é€»è¾‘
    }

    public final boolean sendMessage(Message msg) {
        return sendMessageDelayed(msg, 0);
    }

    public final boolean sendMessageDelayed(Message msg, long delayMillis) {
        if (msg.target == null) {
            msg.target = this;
        }
        return mQueue.enqueueMessage(msg, delayMillis);
    }
}
</code></pre> 
<h4 id="2.Message%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84">2.Messageçš„æºç ç»“æ„</h4> 
<pre><code class="language-java">public final class Message {
    public int what;
    public Object obj;
    public Handler target;
    // å…¶ä»–æˆå‘˜å˜é‡

    public static Message obtain() {
        return new Message();
    }
}
</code></pre> 
<h4 id="3.Lopper%E7%9A%84%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84">3.Lopperçš„æºç ç»“æ„</h4> 
<pre><code class="language-java">public final class Looper {
    static final ThreadLocal&lt;Looper&gt; sThreadLocal = new ThreadLocal&lt;&gt;();
    MessageQueue mQueue;

    private Looper() {
        mQueue = new MessageQueue();
    }

    public static void prepare() {
        if (sThreadLocal.get() != null) {
            throw new RuntimeException("Only one Looper may be created per thread");
        }
        sThreadLocal.set(new Looper());
    }

    public static Looper myLooper() {
        return sThreadLocal.get();
    }

    public static void loop() {
        Looper me = myLooper();
        if (me == null) {
            throw new RuntimeException("No Looper; Looper.prepare() wasn't called on this thread.");
        }
        MessageQueue queue = me.mQueue;

        while (true) {
            Message msg = queue.next();
            if (msg == null) {
                return;
            }
            msg.target.dispatchMessage(msg);
            msg.recycle();
        }
    }

    public MessageQueue getQueue() {
        return mQueue;
    }
}
</code></pre> 
<h4 id="4.%E5%85%B3%E7%B3%BB%E5%92%8C%E5%8D%8F%E4%BD%9C%E6%9C%BA%E5%88%B6%EF%BC%9A">4.å…³ç³»å’Œåä½œæœºåˆ¶ï¼š</h4> 
<ul><li><strong><span style="color:#ed7976;">Handlerç±»é€šè¿‡æŒæœ‰Looperå¯¹è±¡å’Œä¸ä¹‹å…³è”çš„MessageQueueå®ç°äº†æ¶ˆæ¯çš„å‘é€å’Œå¤„ç†ã€‚</span></strong></li><li><strong><span style="color:#ed7976;">Looperè´Ÿè´£ç®¡ç†çº¿ç¨‹çš„æ¶ˆæ¯å¾ªç¯ï¼Œå®ƒåœ¨<code>loop()</code>æ–¹æ³•ä¸­ä¸æ–­ä»MessageQueueä¸­å–å‡ºæ¶ˆæ¯ï¼Œå¹¶é€šè¿‡Handlerçš„<code>dispatchMessage()</code>æ–¹æ³•å°†æ¶ˆæ¯åˆ†å‘ç»™å¯¹åº”çš„Handlerè¿›è¡Œå¤„ç†ã€‚</span></strong></li><li><strong><span style="color:#ed7976;">Messageå¯¹è±¡å°è£…äº†è¦ä¼ é€’çš„æ¶ˆæ¯å’Œé™„åŠ ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç›®æ ‡Handlerã€æ¶ˆæ¯ç±»å‹ç­‰ã€‚</span></strong></li><li><strong><span style="color:#ed7976;">å½“è°ƒç”¨Handlerçš„<code>sendMessage()</code>æˆ–<code>sendMessageDelayed()</code>æ–¹æ³•æ—¶ï¼Œä¼šå°†Messageå¯¹è±¡å‘é€åˆ°MessageQueueä¸­ï¼Œç­‰å¾…Looperçš„å¾ªç¯è¯»å–å’Œå¤„ç†ã€‚</span></strong></li><li><strong><span style="color:#ed7976;">åœ¨Looperçš„å¾ªç¯è¿‡ç¨‹ä¸­ï¼Œå–å‡ºçš„æ¯ä¸ªMessageå¯¹è±¡éƒ½ä¼šé€šè¿‡<code>dispatchMessage()</code>æ–¹æ³•ä¼ é€’ç»™ç›®æ ‡Handlerï¼Œæœ€ç»ˆç”±ç›®æ ‡Handlerçš„<code>handleMessage()</code>æ–¹æ³•å¤„ç†æ¶ˆæ¯ã€‚</span></strong></li></ul> 
<h3 id="%E5%9B%9B%E3%80%81Handler%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">å››ã€Handlerçš„ä½¿ç”¨æ–¹æ³•</h3> 
<h4 id="1.%E5%88%9B%E5%BB%BAHandler%E5%AF%B9%E8%B1%A1%EF%BC%9A">1.åˆ›å»ºHandlerå¯¹è±¡ï¼š</h4> 
<p>é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºHandlerå¯¹è±¡ï¼š</p> 
<pre><code class="language-java">Handler handler = new Handler();
</code></pre> 
<p>æ­¤æ—¶ï¼ŒHandlerä¼šä¸å½“å‰çº¿ç¨‹çš„Looperå…³è”ã€‚</p> 
<h4 id="2.%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%EF%BC%9A">2.å‘é€æ¶ˆæ¯ï¼š</h4> 
<p>ä½¿ç”¨Handlerçš„<code>sendMessage()</code>æˆ–<code>sendMessageDelayed()</code>æ–¹æ³•å‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä¾›å¤„ç†çº¿ç¨‹å¤„ç†:</p> 
<pre><code class="language-java">Message msg = handler.obtainMessage();
msg.what = 1; // è®¾ç½®æ¶ˆæ¯ç±»å‹
msg.obj = "Hello"; // è®¾ç½®æ¶ˆæ¯æ•°æ®
handler.sendMessage(msg); // å‘é€æ¶ˆæ¯
</code></pre> 
<p>ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡ï¼Œè®¾ç½®äº†æ¶ˆæ¯ç±»å‹å’Œæ•°æ®ï¼Œå¹¶é€šè¿‡Handlerçš„<code>sendMessage()</code>æ–¹æ³•å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</p> 
<h4 id="3.%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%EF%BC%9A">3.å¤„ç†æ¶ˆæ¯ï¼š</h4> 
<p>åœ¨Handlerä¸­é‡å†™<code>handleMessage()</code>æ–¹æ³•ï¼Œç”¨äºå¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š</p> 
<pre><code class="language-java">public void handleMessage(Message msg) {
    switch (msg.what) {
        case 1:
            String data = (String) msg.obj; // è·å–æ¶ˆæ¯æ•°æ®
            // å¤„ç†æ¶ˆæ¯é€»è¾‘
            break;
        // å…¶ä»–æ¶ˆæ¯ç±»å‹çš„å¤„ç†
    }
}
</code></pre> 
<p>åœ¨<code>handleMessage()</code>æ–¹æ³•ä¸­ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„æ¶ˆæ¯ç±»å‹è¿›è¡Œé€»è¾‘å¤„ç†ã€‚é€šè¿‡<code>msg.obj</code>å¯ä»¥è·å–æ¶ˆæ¯æºå¸¦çš„æ•°æ®ã€‚</p> 
<h4 id="4.%E5%9C%A8%E7%89%B9%E5%AE%9A%E7%BA%BF%E7%A8%8B%E4%B8%AD%E5%88%9B%E5%BB%BAHandler%E5%AF%B9%E8%B1%A1%EF%BC%9A">4.åœ¨ç‰¹å®šçº¿ç¨‹ä¸­åˆ›å»ºHandlerå¯¹è±¡ï¼š</h4> 
<p>æœ‰æ—¶éœ€è¦åœ¨ç‰¹å®šçš„çº¿ç¨‹ä¸­åˆ›å»ºHandlerå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡Looperæ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œåœ¨åå°çº¿ç¨‹ä¸­åˆ›å»ºHandlerå¯¹è±¡ï¼š</p> 
<pre><code class="language-java">Handler handler;
Thread thread = new Thread(new Runnable() {
    public void run() {
        Looper.prepare();
        handler = new Handler() {
            public void handleMessage(Message msg) {
                // å¤„ç†æ¶ˆæ¯é€»è¾‘
            }
        };
        Looper.loop();
    }
});
thread.start();
</code></pre> 
<p>é€šè¿‡åœ¨æ–°çš„çº¿ç¨‹ä¸­è°ƒç”¨Looperçš„<code>prepare()</code>å’Œ<code>loop()</code>æ–¹æ³•ï¼Œä¸ºè¯¥çº¿ç¨‹åˆ›å»ºäº†ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯å™¨ï¼Œç„¶ååœ¨æ­¤å¾ªç¯å™¨ä¸­åˆ›å»ºäº†Handlerå¯¹è±¡ã€‚è¿™æ ·ï¼Œè¯¥Handlerå°±ä¸æ–°çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³è”ï¼Œå¯ä»¥æ¥æ”¶å¹¶å¤„ç†è¯¥çº¿ç¨‹ä¸­çš„æ¶ˆæ¯ã€‚</p> 
<h3 id="%E4%BA%94%E3%80%81Handler%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7">äº”ã€<strong>Handlerçš„çº¿ç¨‹å®‰å…¨æ€§</strong></h3> 
<h4 id="1.%E5%88%9B%E5%BB%BAHandler%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%96%B9%E5%BC%8F%EF%BC%9A"><strong>1.</strong>åˆ›å»ºHandlerçš„æ­£ç¡®æ–¹å¼ï¼š</h4> 
<ul><li>åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºHandlerï¼šåœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºHandleræ—¶ï¼Œæ— éœ€æ‹…å¿ƒçº¿ç¨‹å®‰å…¨æ€§é—®é¢˜ï¼Œå› ä¸ºä¸»çº¿ç¨‹é»˜è®¤å…·æœ‰ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯å™¨ï¼ˆå³ä¸»çº¿ç¨‹çš„Looperï¼‰ã€‚</li><li>åœ¨å…¶ä»–çº¿ç¨‹ä¸­åˆ›å»ºHandlerï¼šåœ¨å…¶ä»–çº¿ç¨‹ä¸­åˆ›å»ºHandleræ—¶ï¼Œéœ€è¦å…ˆè°ƒç”¨Looperçš„<code>prepare()</code>å’Œ<code>loop()</code>æ–¹æ³•æ¥åˆ›å»ºæ¶ˆæ¯å¾ªç¯å™¨ï¼Œå¹¶ç¡®ä¿åœ¨è¯¥çº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªLooperå­˜åœ¨ã€‚</li></ul> 
<h4 id="2.%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7%EF%BC%9A">2.å¤„ç†æ¶ˆæ¯çš„çº¿ç¨‹å®‰å…¨æ€§ï¼š</h4> 
<ul><li>é¿å…ç›´æ¥è®¿é—®UIå…ƒç´ ï¼šå¦‚æœHandlerç”¨äºæ›´æ–°UIå…ƒç´ ï¼Œç¡®ä¿åªåœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°UIã€‚å¯ä»¥ä½¿ç”¨Handlerçš„<code>post()</code>æˆ–<code>postDelayed()</code>æ–¹æ³•å°†æ›´æ–°UIçš„ä»»åŠ¡æäº¤åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li><li>ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®Handlerå¯¹è±¡æ—¶ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤å…±äº«èµ„æºï¼Œé¿å…æ•°æ®ç«äº‰å’Œçº¿ç¨‹å†²çªã€‚ 
  <ul><li>ä½¿ç”¨å…³é”®å­—<code>synchronized</code>ï¼šåœ¨è®¿é—®Handlerçš„å…³é”®ä»£ç å—æˆ–æ–¹æ³•ä¸Šä½¿ç”¨<code>synchronized</code>å…³é”®å­—ï¼Œä»¥ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®Handlerå¯¹è±¡ã€‚</li><li>ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„ï¼šå¯ä»¥ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„ï¼Œå¦‚<code>ConcurrentLinkedQueue</code>ï¼Œæ¥å­˜å‚¨æ¶ˆæ¯ï¼Œä»¥é¿å…å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„ç«äº‰ã€‚</li></ul></li></ul> 
<h4 id="3.%E7%A1%AE%E4%BF%9D%E6%B6%88%E6%81%AF%E7%9A%84%E5%A4%84%E7%90%86%E5%9C%A8%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%BA%BF%E7%A8%8B%E4%B8%AD%E6%89%A7%E8%A1%8C%EF%BC%9A">3.ç¡®ä¿æ¶ˆæ¯çš„å¤„ç†åœ¨æ­£ç¡®çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼š</h4> 
<ul><li>å‘é€åˆ°ä¸»çº¿ç¨‹çš„æ¶ˆæ¯ï¼šå¦‚æœéœ€è¦å°†æ¶ˆæ¯å‘é€åˆ°ä¸»çº¿ç¨‹å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ä¸»çº¿ç¨‹çš„Handlerï¼Œæˆ–è€…ä½¿ç”¨Activityæˆ–Fragmentçš„runOnUiThread()æ–¹æ³•ã€‚</li><li>å‘é€åˆ°å…¶ä»–çº¿ç¨‹çš„æ¶ˆæ¯ï¼šå¦‚æœéœ€è¦å°†æ¶ˆæ¯å‘é€åˆ°å…¶ä»–çº¿ç¨‹å¤„ç†ï¼Œç¡®ä¿è¯¥çº¿ç¨‹æ‹¥æœ‰æ­£ç¡®çš„Looperå’Œæ¶ˆæ¯å¾ªç¯å™¨ã€‚å¯ä»¥ä½¿ç”¨Handlerçš„æ„é€ å‡½æ•°æˆ–<code>post()</code>æ–¹æ³•æŒ‡å®šç›®æ ‡çº¿ç¨‹çš„Looperã€‚</li></ul> 
<p><strong><span style="color:#ed7976;">æ€»ç»“ï¼Œä¸ºäº†ç¡®ä¿Handleråœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</span></strong></p> 
<ul><li><strong><span style="color:#ed7976;">åœ¨æ­£ç¡®çš„çº¿ç¨‹ä¸­åˆ›å»ºHandlerå¯¹è±¡ã€‚</span></strong></li><li><strong><span style="color:#ed7976;">åœ¨è®¿é—®Handlerå¯¹è±¡æ—¶ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œå¦‚<code>synchronized</code>å…³é”®å­—ã€‚</span></strong></li><li><strong><span style="color:#ed7976;">é¿å…ç›´æ¥è®¿é—®UIå…ƒç´ ï¼Œä½¿ç”¨åˆé€‚çš„æ–¹å¼æ›´æ–°UIã€‚</span></strong></li><li><strong><span style="color:#ed7976;">ç¡®ä¿æ¶ˆæ¯çš„å¤„ç†åœ¨æ­£ç¡®çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ ¹æ®éœ€è¦ä½¿ç”¨é€‚å½“çš„Handlerå’ŒLooperã€‚</span></strong></li></ul> 
<h3 id="%E5%85%AD%E3%80%81Handler%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C"><span style="color:#494949;"><strong>å…­ã€Handlerè¿›é˜¶æ“ä½œ</strong></span></h3> 
<h4 id="1.%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%EF%BC%9A">1.å¼‚æ­¥åŠ è½½æ•°æ®ï¼š</h4> 
<pre><code class="language-java">// åœ¨åå°çº¿ç¨‹ä¸­åŠ è½½æ•°æ®
Thread thread = new Thread(new Runnable() {
    public void run() {
        // æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå¦‚ç½‘ç»œè¯·æ±‚æˆ–æ•°æ®åº“æŸ¥è¯¢
        // åŠ è½½å®Œæˆåï¼Œå‘é€æ¶ˆæ¯é€šçŸ¥ä¸»çº¿ç¨‹
        Message message = handler.obtainMessage();
        message.what = LOAD_COMPLETE;
        message.obj = loadedData;
        handler.sendMessage(message);
    }
});
thread.start();

// ä¸»çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯
Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        if (msg.what == LOAD_COMPLETE) {
            // å¤„ç†åŠ è½½å®Œæˆçš„æ•°æ®
            Object data = msg.obj;
            // æ›´æ–°UIç­‰æ“ä½œ
        }
    }
};
</code></pre> 
<h4 id="2.%E5%BB%B6%E6%97%B6%E6%93%8D%E4%BD%9C%EF%BC%9A">2.å»¶æ—¶æ“ä½œï¼š</h4> 
<pre><code class="language-java">Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    public void run() {
        // å»¶æ—¶æ“ä½œï¼Œä¾‹å¦‚å»¶æ—¶2ç§’åæ‰§è¡ŒæŸä¸ªä»»åŠ¡
        // æ›´æ–°UIç­‰æ“ä½œ
    }
}, 2000); // 2000æ¯«ç§’çš„å»¶æ—¶
</code></pre> 
<h4 id="3.UI%E7%BA%BF%E7%A8%8B%E6%9B%B4%E6%96%B0%EF%BC%9A">3.UIçº¿ç¨‹æ›´æ–°ï¼š</h4> 
<pre><code class="language-java">Handler handler = new Handler();
handler.post(new Runnable() {
    public void run() {
        // åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œç”¨äºæ›´æ–°UI
        // æ›´æ–°UIç­‰æ“ä½œ
    }
});
</code></pre> 
<p><strong><span style="color:#ed7976;">å¥½äº†ï¼Œå…‰å­éƒè¿™æ¬¡çš„Handlerè®²è§£å°±åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å°ä¼™ä¼´ä»¬å¯¹Handlerçš„ç†è§£å·²ç»è¿›å…¥ç†Ÿç»ƒç¨‹åº¦ï¼Œå¸Œæœ›èƒ½å¤Ÿåœ¨ä»¥åçš„å¼€å‘ä¸­å¸®å¾—ä¸Šå¤§å®¶~</span></strong></p> 
<blockquote> 
 <p><span style="color:#4da8ee;"><u><strong><em>ğŸ“ğŸ“ğŸ“ğŸ“ğŸ“è¿™æ¬¡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œä¸è¦å¿˜è®°å…³æ³¨å…‰å­éƒï¼Œä¹Ÿç‚¹ç‚¹æ–‡æœ«å°å¡ç‰‡ï¼Œæœ‰JAVAå’ŒAndroidçš„é¢è¯•ä»¥åŠå­¦ä¹ èµ„æ–™å…è´¹é¢†å–ï¼Œä¹Ÿä¸€å®šä¼šæœ‰ä½ å–œæ¬¢çš„èµ„æºåˆ†äº«ä»¥åŠå¹²è´§æ•´ç†ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§å•¦ï¼Œæ‹œæ‹œ~</em></strong></u></span></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/98459868dca76415fa370f782d459327/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">å‡ ç§å¸¸è§æ•°æ®åº“çš„è¡¨å’Œåˆ—ä¿¡æ¯æŸ¥è¯¢</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c9c0dfe6bb8d2d73470455ced71b34e3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">æ·±åº¦å‰–æé›†æˆå­¦ä¹ GBDT</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>