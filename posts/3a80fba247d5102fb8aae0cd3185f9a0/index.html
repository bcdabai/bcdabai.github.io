<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>exp-00003 no storage definition found for segment(0, 0) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="exp-00003 no storage definition found for segment(0, 0)" />
<meta property="og:description" content="刚为用户升级到11.2.0.4.160419，但居然还会出现此类大多数在9.2下出现的问题： 连接到: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP, Data Mining and Real Application Tes 已导出 ZHS16GBK 字符集和 AL16UTF16 NCHAR 字符集 即将导出指定的用户... . 正在导出 pre-schema 过程对象和操作 . 正在导出用户 TAMIC 的外部函数库名 . 导出 PUBLIC 类型同义词 . 正在导出专用类型同义词 . 正在导出用户 TAMIC 的对象类型定义 即将导出 TAMIC 的对象... . 正在导出数据库链接 . 正在导出序号 . 正在导出簇定义 . 即将导出 TAMIC 的表通过常规路径... . . 正在导出表 AA1导出了 34 行 ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3a80fba247d5102fb8aae0cd3185f9a0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-22T14:54:35+08:00" />
<meta property="article:modified_time" content="2016-08-22T14:54:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">exp-00003 no storage definition found for segment(0, 0)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <span style="color:rgb(28,51,135)">刚为用户升级到11.2.0.4.160419，但居然还会出现此类大多数在9.2下出现的问题：</span> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"><br> </span> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"></span> 
 <div class="kmcodeblock" style="overflow:auto; border:1px solid rgb(196,209,230); padding:0.5em; margin:5px 0px 0px; font-family:'Courier New',Courier,monospace; background-color:rgb(224,234,241)"> 
  <div> 
   <span style="color:rgb(28,51,135)">连接到: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">Data Mining and Real Application Tes</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">已导出 ZHS16GBK 字符集和 AL16UTF16 NCHAR 字符集</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)"><br> </span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">即将导出指定的用户...</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出 pre-schema 过程对象和操作</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出用户 TAMIC 的外部函数库名</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 导出 PUBLIC 类型同义词</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出专用类型同义词</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出用户 TAMIC 的对象类型定义</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">即将导出 TAMIC 的对象...</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出数据库链接</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出序号</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 正在导出簇定义</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. 即将导出 TAMIC 的表通过常规路径...</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. . 正在导出表                             AA1导出了          34 行</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. . 正在导出表                             AAA导出了       24602 行</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. . 正在导出表                            AAAA导出了          46 行</span> 
  </div> 
  <div> 
   <span style="color:rgb(28,51,135)">. . 正在导出表                        AABORMAS</span> 
  </div> 
  <div> 
   <span style="color:#ff0000"><strong>EXP-00003: 未找到段 (1024,0) 的存储定义</strong></span> 
  </div> 
  <div> 
   <span style="color:#ff0000"><strong>. . 正在导出表                        AACBKMAS</strong></span> 
  </div> 
 </div> 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div>
  熟悉看过11.2的online doc的Concept的同学应该知道： 
</div> 
<div> 
 <span style="font-family:'Open Sans',sans-serif; background-color:rgb(245,248,253)"><strong><span style="color:#1c3387; font-size:14px">DEFERRED_SEGMENT_CREATION</span><span style="font-size:12px"> s</span></strong><span style="font-size:12px">pecifies the semantics of deferred segment creation. If set totrue, then segments for </span></span> 
</div> 
<div> 
 <span style="font-family:'Open Sans',sans-serif; background-color:rgb(245,248,253)"><span style="font-size:12px">non-partitioned tables and their dependent objects (LOBs, indexes) will not be created until the first row is inserted into the table.</span></span> 
</div> 
<div> 
 <span style="color:rgb(227,0,0)"><br> </span> 
</div> 
<div> 
 <span style="color:rgb(227,0,0)">很多dba的判断一般是指由表结构却没有实际分配segment存储所致，确实如此，在9.2之前的版本非常常见，但在11.2后Oracle新增量一个</span> 
</div> 
<div> 
 <span style="color:rgb(227,0,0)">deferred_segment_createon的参数，默认为True，来延迟索引段和lob段的创建。</span> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"><span style="font-size:14px"><span style="font-family:'Open Sans',sans-serif"><span style="background-color:rgb(245,248,253)"><br> </span></span></span></span> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"><span style="font-family:'Open Sans',sans-serif; font-size:14px; background-color:rgb(245,248,253)">也是由于该新特性导致通过EXP导出的时候出现EXP-00003的错误，查询该数据库的</span>deferred_segment_createon参数：</span> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"><br> </span> 
</div> 
<div> 
 <div class="kmcodeblock" style="overflow:auto; border:1px solid rgb(196,209,230); padding:0.5em; margin:5px 0px 0px; font-family:'Courier New',Courier,monospace; background-color:rgb(224,234,241)"> 
  <span style="color:#3333ff"><strong>sql&gt;show parameter deferred_segment_creation;<br> ---------------------------  ------------- ---------<br> deferred_segment_creation        boolean     TRUE<br> </strong></span> 
 </div> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"><span style="font-size:14px"><span style="font-family:'Open Sans',sans-serif"><span style="background-color:rgb(245,248,253)"><br> </span></span></span></span> 
</div> 
<div> 
 <span style="color:rgb(28,51,135)"><span style="font-family:'Open Sans',sans-serif"><span style="background-color:rgb(245,248,253)"><strong><span style="font-size:12px">参考MOS给出的Workaround方法：</span></strong></span></span></span> 
</div> 
<div> 
 <div class="kmcodeblock" style="overflow:auto; border:1px solid rgb(196,209,230); padding:0.5em; margin:5px 0px 0px; font-family:'Courier New',Courier,monospace; background-color:rgb(224,234,241)">
   Slower inserts as select into a non-partitioned table , 
  <br> especially if the select involves reading many rows or an expensive join. 
  <br>   
  <br> This fix changes the behavior. such that the segments will be allocated 
  <br> regardless if the INSERT inserts rows or not. 
  <br>   
  <br> 
  <strong>Workaround</strong> 
  <br> Materialize segments for the table before issuing the insert as select. 
  <br> 
  <span style="color:#3333ff">'<strong>alter table &lt;tname&gt; allocate extent;' will materialize segments for the<br> table and its dependent objects like indexes and lobs.</strong></span> 
 </div> 
 <br> 
</div> 
<div> 
 <span style="font-family:'Open Sans',sans-serif"><span style="background-color:rgb(245,248,253)"><strong><span style="font-size:12px">最终采用的方法，禁用该参数，然后与分配一个存储给问题表</span></strong><span style="font-size:14px; color:rgb(28,51,135)">：</span></span></span> 
</div> 
<div> 
 <span style="font-size:14px"><span style="font-family:'Open Sans',sans-serif"><span style="background-color:rgb(245,248,253)"><span style="color:rgb(28,51,135)"></span></span></span></span> 
 <div class="kmcodeblock" style="overflow:auto; border:1px solid rgb(196,209,230); padding:0.5em; margin:5px 0px 0px; font-family:'Courier New',Courier,monospace; background-color:rgb(224,234,241)"> 
  <span style="font-size:12px"><strong>alter system set deferred_segment_creation=false scope=both;<br> alter table &lt;tname&gt; allocate exten</strong></span>t; 
 </div> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<p><span style="font-family:Open Sans,sans-serif; color:#1c3387"><span style="background-color:rgb(245,248,253)"><strong><span style="font-size:12px">其他参考的Note：</span></strong></span></span></p> 
<p><span style="font-family:Open Sans,sans-serif; color:#1c3387"><span style="font-size:14px; background-color:rgb(245,248,253)"><strong></strong></span></span></p> 
<div class="kmcodeblock" style="overflow:auto; border:1px solid rgb(196,209,230); padding:0.5em; margin:5px 0px 0px; font-family:'Courier New',Courier,monospace; background-color:rgb(224,234,241)"> 
 <div> 
  <span style="font-family:'Open Sans',sans-serif"><span style="font-family:'Open Sans',sans-serif"><span style="font-size:12px">Error During Schema Level Export - EXP-00003: no storage definition found for segment(0, 0)(文档 ID 1969081.1)</span></span></span> 
 </div> 
</div> 
<br> 
<p></p> 
<p><span style="font-family:Open Sans,sans-serif; color:#1c3387"><span style="font-size:14px; background-color:rgb(245,248,253)"><strong><br> </strong></span></span></p> 
<p><strong><span style="color:rgb(28,51,135)"><span style="font-family:'Open Sans',sans-serif; font-size:14px; font-weight:300; background-color:rgb(245,248,253)"><strong><br> </strong></span></span></strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/62dd5d120a8acbe3f0fcf60cd48aa537/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决vim编辑文件时中文乱码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8fede7991b14fe3453131b924bf8cf2e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">phalcon 中常用的phql语句</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>