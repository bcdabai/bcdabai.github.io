<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用 FFmpeg 轻松调整视频的大小/缩放/更改分辨率 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用 FFmpeg 轻松调整视频的大小/缩放/更改分辨率" />
<meta property="og:description" content="在此 FFmpeg 教程中，我们学习使用 FFmpeg 的命令行工具更改视频的分辨率（或调整视频的大小/缩放）。
更改视频的分辨率（也称为调整大小或缩放）是视频编辑、处理和压缩中非常常见的操作。对于 ABR 视频流尤其如此，其中将单个视频作为源并压缩为多个不同的比特率分辨率组合。例如，输入视频的分辨率可以是1920x1080，ABR 比特流可以是1280x720,640x480等。
因此，作为第一步，让我们找出输入视频的分辨率是多少。使用FFmpeg 版本附带的工具ffprobe，让我们确定输入视频的分辨率。这是使用ffprobe.
ffprobe -v error -select_streams v:0 -show_entries stream=width,height -of csv=s=x:p=0 input.mp4 此命令的输出应该与您的控制台上显示的1920x1080。太好了——您现在知道视频的分辨率并且现在可以缩放或更改分辨率。
注意：您必须注意，向上/向下缩放的行为是一个有损过程，会导致视频质量有所下降。
如何使用 FFmpeg 调整/缩放/更改视频的分辨率？ 使用 FFmpeg 缩放或更改视频的分辨率是由FFmpeg 中的过滤器scale完成的。要使用scale过滤器，请使用以下命令 –
ffmpeg -i input.mp4 -vf scale=$w:$h &lt;encoding-parameters&gt; output.mp4 其中，$w和$h表示目标视频所需的宽度和高度。例如，您可以使用-vf scale=640:480将视频大小调整为480p.
而已！使用这个简单的命令，您可以使用 FFmpeg 更改视频的分辨率。
并且，在 FFmpeg 更改视频的分辨率后，它将以该分辨率重新编码。在上面的命令行中，您可以向 FFmpeg 提供编码参数，并使用这些参数对缩放后的视频进行编码。例如，您可以告诉 FFmpeg 使用 crf=18 进行编码，以获得高质量的 H.264/AVC 编码，或者选择其他编码方式！
好的，让我们来解决下一个主题，即更改视频的分辨率但保留/保持其纵横比。
如何使用 FFmpeg 在保持高质量的同时调整视频大小 调整大小后，您可能会注意到输出视频的质量很差或达不到您的预期。通过告诉 FFmpeg 您希望在调整大小过程后使用的视频编码参数，可以轻松解决此问题。
这是一个例子——
ffmpeg -i input.mp4 -vf scale=1280:720 -preset slow -crf 18 output." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f3fe430bf9e50e5d23e112ee061cfc67/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T13:50:25+08:00" />
<meta property="article:modified_time" content="2024-01-19T13:50:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用 FFmpeg 轻松调整视频的大小/缩放/更改分辨率</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>在此 FFmpeg 教程中，我们学习使用 FFmpeg 的命令行工具更改视频的分辨率（或调整视频的大小/缩放）。</strong></p> 
<p>更改视频的分辨率（也称为调整大小或缩放）是视频编辑、处理和压缩中非常常见的操作。对于 ABR 视频流尤其如此，其中将单个视频作为源并压缩为多个不同的比特率分辨率组合。例如，输入视频的分辨率可以是1920x1080，ABR 比特流可以是1280x720,640x480等。</p> 
<p>因此，作为第一步，让我们找出输入视频的分辨率是多少。使用FFmpeg 版本附带的工具ffprobe，让我们确定输入视频的分辨率。这是使用ffprobe.</p> 
<pre><code>ffprobe -v error -select_streams v:0 -show_entries stream=width,height -of csv=s=x:p=0 input.mp4</code></pre> 
<p>此命令的输出应该与您的控制台上显示的1920x1080。太好了——您现在知道视频的分辨率并且现在可以缩放或更改分辨率。</p> 
<p><strong>注意：</strong>您必须注意，向上/向下缩放的行为是一个有损过程，会导致视频质量有所下降。</p> 
<h2>如何使用 FFmpeg 调整/缩放/更改视频的分辨率？</h2> 
<p>使用 FFmpeg 缩放或更改视频的分辨率是由FFmpeg 中的过滤器scale完成的。要使用scale过滤器，请使用以下命令 –</p> 
<pre><code>ffmpeg -i input.mp4 -vf scale=$w:$h &lt;encoding-parameters&gt; output.mp4</code></pre> 
<p>其中，$w和$h表示目标视频所需的宽度和高度。例如，您可以使用-vf scale=640:480将视频大小调整为480p.</p> 
<p>而已！使用这个简单的命令，您可以使用 FFmpeg 更改视频的分辨率。</p> 
<p>并且，在 FFmpeg 更改视频的分辨率后，它将以该分辨率重新编码。在上面的命令行中，您可以向 FFmpeg 提供编码参数，并使用这些参数对缩放后的视频进行编码。例如，您可以告诉 FFmpeg 使用 crf=18 进行编码，以获得高质量的 H.264/AVC 编码，或者选择其他编码方式！</p> 
<p>好的，让我们来解决下一个主题，即更改视频的分辨率但保留/保持其纵横比。</p> 
<h2>如何使用 FFmpeg 在保持高质量的同时调整视频大小</h2> 
<p>调整大小后，您可能会注意到输出视频的质量很差或达不到您的预期。通过告诉 FFmpeg 您希望在调整大小过程后使用的视频编码参数，可以轻松解决此问题。</p> 
<p>这是一个例子——</p> 
<pre><code>ffmpeg -i input.mp4 -vf scale=1280:720 -preset slow -crf 18 output.mp4</code></pre> 
<p><br> 在这里，您要告诉 FFmpeg 将视频缩放至 720p，然后使用 crf=18 和 libx264 的慢速预设进行编码。由于它打开的编码工具的数量，通常可以提供非常好的质量。</p> 
<h2>如何更改视频的分辨率但保持纵横比？</h2> 
<p>图像的纵横比在维基百科中有如下定义：<strong>图像的纵横比是其宽度与高度的比值。它通常表示为用冒号分隔的两个数字，如16:9. 对于x:y纵横比，图像是 x 个单位宽和 y 个单位高。</strong></p> 
<p>在处理视频时遇到这个问题很常见：<strong>​​如何更改视频的分辨率（或缩放视频）但保持或保留视频的原始纵横比。</strong></p> 
<p>在FFmpeg中，如果您想在缩放视频的同时保持其宽高比，则需要设置height或width参数之一并将另一个参数设置为-1。也就是说，如果您设置height，则将宽度设置为 -1，反之亦然。</p> 
<p>为了演示，假设以下命令将高清视频 ( 1920x1080) 作为其输入。并且，假设我们想要更改其分辨率。这可以通过上面讨论的两种方式完成，所以让我们尝试两种方式。</p> 
<h2>1.指定宽度以保持纵横比</h2> 
<pre><code>ffmpeg -i input.mp4 -vf scale=320:-1 output.mp4</code></pre> 
<p>生成的视频的分辨率为320x180. 这是因为1920 / 320= 6。因此，height被缩放到1080 / 6 = 180像素。</p> 
<h2>2.指定高度以保持纵横比</h2> 
<pre><code>ffmpeg -i input.mp4 -vf scale=-1:720 output.mp4</code></pre> 
<p>生成的视频的分辨率为1280x720. 这是因为1080 / 720= 1.5。因此，width被缩放到1920 / 1.5 = 1280像素。</p> 
<h2>在 FFmpeg 中使用变量缩放/更改视频的分辨率</h2> 
<p>我们可以使用表示视频参数的变量来实现相同的缩放命令。输入视频的width和height分别用iw和表示ih。</p> 
<p>让我们看看将视频宽度缩放两倍 ( 2x) 的命令是什么样的。</p> 
<pre><code>ffmpeg -i input.mp4 -vf scale=iw*2:ih output.mp4</code></pre> 
<p>如果你想用一个数字除以高度或宽度，语法会稍微改变，因为scale=iw/2:ih/2参数需要用双引号括起来。</p> 
<pre><code>ffmpeg -i input.mp4 -vf "scale=iw/2:ih/2" output.mp4  </code></pre> 
<h2>避免根据输入视频的尺寸升级视频</h2> 
<p>正如我们在文章开头提到的，每次向上/向下缩放操作通常不会产生与输入视频相同水平的视频质量。在缩放过程中必然会有一些压缩损失。如果输入分辨率太低，FFmpeg提供了一个巧妙的技巧来防止放大。</p> 
<pre><code>ffmpeg -i input.mp4 -vf "scale='min(320,iw)':'min(240,ih)'" output.mp4</code></pre> 
<p>在上面的命令行中，执行缩放的最小宽度/高度分别设置为320和240像素。这是防止质量不佳缩放的一种非常简单的方法。</p> 
<p><img alt="" height="576" src="https://images2.imgbox.com/25/6d/FItO6pJr_o.png" width="1024"></p> 
<blockquote> 
 <p><span style="background-color:#FFFFFF;"><strong><span style="background-color:#eef0f4;"><span style="color:#FF0000;">粉丝福利， 免费领取C++音视频学习资料包+学习路线大纲、技术视频/代码，内容包括（音视频开发，面试题，FFmpeg ，webRTC ，rtmp ，hls ，rtsp ，ffplay ，编解码，推拉流，srs）↓↓↓↓↓↓见下面↓↓文章底部点击免费领取↓↓</span></span></strong></span> </p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/68368e06aa4e482c7285d3b14aaac141/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于 Flink 的实时数仓在曹操出行运营中的应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0bb7e3944d80ce02d32b37b81fc2942b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">uniapp写小程序实现清除缓存（存储/获取/移除/清空）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>