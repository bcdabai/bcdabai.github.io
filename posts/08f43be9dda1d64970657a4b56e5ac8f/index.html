<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cascader 级联选择、回显 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Cascader 级联选择、回显" />
<meta property="og:description" content="一、选择时的效果： 页面代码
&lt;el-tag type=&#34;success&#34;&gt;选择A面信息&lt;/el-tag&gt; &lt;div style=&#34;margin-top: 10px&#34;&gt; &lt;el-cascader style=&#34;width: 70%&#34; :show-all-levels=&#34;false&#34; placeholder=&#34;点击选择A面位置&#34; @change=&#34;handleAChange&#34; :props=&#34;propA&#34; clearable&gt; &lt;/el-cascader&gt; &lt;/div&gt; data数据
propA: { lazy: true, lazyLoad(node, resolve) { setTimeout(() =&gt; { if (node.level === 0) { // 如果当前节点是第一级，查询一级列表 axios.get(&#39;/modf/getequips&#39;).then(res =&gt; { const equips = res.map((value, i) =&gt; ({ value: value, label: value, leaf: node.level &gt;= 1 })); resolve(equips); }).catch(err =&gt; { console.log(err); }); // 如果是二级，查询二级列表 } else if (node.level === 1) { axios." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/08f43be9dda1d64970657a4b56e5ac8f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-05T19:47:43+08:00" />
<meta property="article:modified_time" content="2021-03-05T19:47:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cascader 级联选择、回显</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>一、选择时的效果：</h4> 
<p><img alt="" height="363" src="https://images2.imgbox.com/06/a6/tAp5smTc_o.png" width="700"></p> 
<p><img alt="" height="175" src="https://images2.imgbox.com/e3/e4/7X743Jh7_o.png" width="665"></p> 
<p><span style="color:#7c79e5;"><strong>页面代码</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">&lt;el-tag type="success"&gt;选择A面信息&lt;/el-tag&gt;
&lt;div style="margin-top: 10px"&gt;
    &lt;el-cascader
            style="width: 70%"
            :show-all-levels="false"
            placeholder="点击选择A面位置"
            @change="handleAChange"
            :props="propA"
            clearable&gt;
    &lt;/el-cascader&gt;
&lt;/div&gt;</code></pre> 
</blockquote> 
<p><span style="color:#7c79e5;"><strong>data数据</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">propA: {
    lazy: true,
    lazyLoad(node, resolve) {
        setTimeout(() =&gt; {
            if (node.level === 0) {
                // 如果当前节点是第一级，查询一级列表
                axios.get('/modf/getequips').then(res =&gt; {
                    const equips = res.map((value, i) =&gt; ({
                        value: value,
                        label: value,
                        leaf: node.level &gt;= 1
                    }));
                    resolve(equips);
                }).catch(err =&gt; {
                    console.log(err);
                });
              // 如果是二级，查询二级列表
            } else if (node.level === 1) {
                axios.get('/modf/getports', {params: {equip: node.value}}).then(res =&gt; {
                    const all = res.map((value, i) =&gt; ({
                        value: value.id,
                        // 自定义标签显示的格式
                        label: "设备：" + value.devicePort + "；ODF位置：" + value.odfNum + "：" + value.terminal,
                        // leaf标志是否叶子节点。true是叶子节点，无子节点，false不是叶子节点，有子节点。
                        leaf: node.level &gt;= 1
                    }));
                    // 通过调用resolve将子节点数据返回，通知组件数据加载完成
                    resolve(all);
                }).catch(err =&gt; {
                    console.log(err);
                });
            }
        }, 1000);
    }
},</code></pre> 
</blockquote> 
<p><span style="color:#7c79e5;"><strong>method</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">// 当选中数据发生变化时，event为返回选中节点的值
handleAChange(event) {
    // event 为选中节点的值，event[0]为第一级选中值，event[1]为第二级选中值。也就是data加载中的value值。
    console.log(event)
},</code></pre> 
</blockquote> 
<p><span style="color:#7c79e5;"><strong>后台controller方法，查询一二级列表</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">@GetMapping("/getequips")
public List getequips() {
    List&lt;String&gt; equipments = modfService.getequips();
    List res = new ArrayList();
    return res;
}
</code></pre> 
</blockquote> 
<blockquote> 
 <pre><code class="language-html">@GetMapping("/getports")
public List getports(String equip) {
    System.out.println(equip);
    List&lt;ModfA&gt; res = modfService.getports(equip);
    return res;
}</code></pre> 
</blockquote> 
<h4>二、数据回显:Cascader回显较为复杂，且我的一级列表是List&lt;String&gt;形式，没有id，为方便展示用两个select控件</h4> 
<h4><img alt="" height="211" src="https://images2.imgbox.com/55/b8/QO2Suiwp_o.png" width="686"></h4> 
<p><span style="color:#7c79e5;"><strong>页面代码</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">&lt;el-tag type="success"&gt;A面信息&lt;/el-tag&gt;
&lt;div style="margin-top: 10px"&gt;
    &lt;el-select
            @change="diviceAchange"
            v-model="equip"
            clearable
            placeholder="选择设备"&gt;
        &lt;el-option
                v-for="item in diviceA"
                :key="item"
                :label="item"
                :value="item"&gt;
        &lt;/el-option&gt;
    &lt;/el-select&gt;
    &lt;el-select
            style="margin-left: 5px;width: 420px"
            v-model="portOptionA"
            clearable
            @change="portAchange"
            placeholder="选择位置"&gt;
        &lt;el-option
                v-for="item in portA"
                :key="item.id"
                :label="'设备：'+item.devicePort+'；'+item.odfNum + '：' + item.terminal"
                :value="item.id"&gt;
        &lt;/el-option&gt;
    &lt;/el-select&gt;</code></pre> 
</blockquote> 
<p><span style="color:#7c79e5;"><strong>data数据</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">diviceA: [],
equip: '',
portA: [],
portOptionA: '',</code></pre> 
</blockquote> 
<p><span style="color:#7c79e5;"><strong>method：打开修改弹窗回显数据</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">showChange(row) {
    this.editDialog = true;
    /*加载A面设备一级列表*/ 
    this.getRequest("/modf/getequips").then(result =&gt; { if (result) { this.diviceA = result; } })

    /*数据回显*/
    this.equip = row.aEquipment;
    // 准备二级列表
    axios.get('/modf/getports', {params: {equip: this.equip}}).then(res =&gt; {
        if (res) {
            this.portA = res;
        }
    }).catch(err =&gt; {
        console.log(err);
    });
    // 回显二级数据
    this.portOptionA = "设备：" + row.aDevicePort + "；" + row.aOdfNum + "：" + row.bPositinPort;
},   </code></pre> 
</blockquote> 
<p><span style="color:#7c79e5;"><strong>点击一级列表，选择发生改变的事件。这里网络请求很多重复代码，后期会抽取，但是整体效果和实现方法却易于理解</strong></span></p> 
<blockquote> 
 <pre><code class="language-html">/*加载A面设备二级列表*/
diviceAchange(change) {
    this.equip = change;
    this.portOptionA = "";
    if (change) {
        axios.get('/modf/getports', {params: {equip: this.equip}}).then(res =&gt; {
            if (res) {
                this.portA = res;
            }
        }).catch(err =&gt; {
            console.log(err);
        });
    }
},</code></pre> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d6077eeefb1e764f8f0f0677b5341110/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">事关rsa加密</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/531466f28f8493adeb41f2c867383918/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mac系统升级后开发者证书不被信任，报错/usr/bin/codesign --force --sign</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>