<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker项目部署（） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker项目部署（）" />
<meta property="og:description" content="1.创建文件夹tools
mkdir tools
配置阿里云 Docker Yum 源 : yum install - y yum - utils device - mapper - persistent - data lvm2 yum - config - manager -- add - repo http://mirrors.aliyun.com/docker- ce/linux/centos/docker - ce.repo 更新 yum 缓存 yum makecache fast 安装 docker-CE yum - y install docker - ce 启动docker服务
systemctl start docker
下拉镜像
docker pull nginx
docker pull openjdk
docker pull mysql/mysql-server:5.7
创建自定义网络(报错33改成20，在报错就改成21)
docker network create --subnet=172." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a520e846d301c3c0438cfc6aa060275b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T22:32:13+08:00" />
<meta property="article:modified_time" content="2024-01-19T22:32:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker项目部署（）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.创建文件夹tools</p> 
<blockquote> 
 <p>mkdir tools</p> 
</blockquote> 
<div> 
 <span style="color:#777777;">配置阿里云</span> 
 <span style="color:#777777;">Docker Yum</span> 
 <span style="color:#777777;">源</span> 
 <span style="color:#777777;">:</span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#777777;">yum install </span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">y yum</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">utils device</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">mapper</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">persistent</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">data lvm2 </span> 
 </div> 
</blockquote> 
<blockquote> 
 <div> 
  <span style="color:#777777;">yum</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">config</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">manager </span> 
  <span style="color:#777777;">--</span> 
  <span style="color:#777777;">add</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">repo http://mirrors.aliyun.com/docker-</span> 
  <span style="color:#777777;">ce/linux/centos/docker</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">ce.repo</span> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#777777;">更新</span> 
 <span style="color:#777777;">yum</span> 
 <span style="color:#777777;">缓存</span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#777777;">yum makecache fast</span> 
 </div> 
</blockquote> 
<div></div> 
<div> 
 <span style="color:#777777;">安装</span> 
 <span style="color:#777777;">docker-CE</span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#777777;">yum </span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">y install docker</span> 
  <span style="color:#777777;">-</span> 
  <span style="color:#777777;">ce</span> 
 </div> 
</blockquote> 
<p>启动docker服务</p> 
<blockquote> 
 <p>systemctl start docker</p> 
</blockquote> 
<p>下拉镜像</p> 
<blockquote> 
 <p>docker pull nginx</p> 
</blockquote> 
<blockquote> 
 <p>docker pull openjdk</p> 
</blockquote> 
<blockquote> 
 <p>docker pull mysql/mysql-server:5.7</p> 
</blockquote> 
<p>创建自定义网络(报错33改成20，在报错就改成21)</p> 
<blockquote> 
 <p>docker network create --subnet=172.33.0.1/16 my_net</p> 
</blockquote> 
<p>部署MySQL容器</p> 
<p>新建需要的文件夹</p> 
<blockquote> 
 <p>mkdir -p mysql/{conf,data,script}</p> 
</blockquote> 
<p>将my.cnf配置文件放到conf目录中<br> 将book.sql放到script</p> 
<blockquote> 
 <p>cd mysql/</p> 
</blockquote> 
<blockquote> 
 <p>cd conf/</p> 
</blockquote> 
<p>把数据拖进这个文件夹里面</p> 
<p><img alt="" height="133" src="https://images2.imgbox.com/7b/41/cW0ILgj9_o.png" width="228"></p> 
<p><img alt="" height="103" src="https://images2.imgbox.com/bf/a7/xxDrkgRC_o.png" width="233"></p> 
<p>创建mysql容器</p> 
<pre><code>docker run -itd \
-v /root/tools/mysql/conf/my.cnf:/etc/my.cnf \
-v /root/tools/mysql/data:/var/lib/mysql \
-v /root/tools/mysql/script:/script \
--privileged=true \
-e MYSQL_ROOT_PASSWORD=123456 \
--name m1 \
--net my_net \
mysql/mysql-server:5.7</code></pre> 
<p></p> 
<p>进入mysql容器</p> 
<p></p> 
<blockquote> 
 <p>docker exec -it m1 bash</p> 
</blockquote> 
<p></p> 
<p>登录mysql</p> 
<blockquote> 
 <p>mysql -uroot -p</p> 
</blockquote> 
<p></p> 
<p>创建远程登录的用户</p> 
<blockquote> 
 <p>grant all on *.* to root@'%' identified by '123456';</p> 
</blockquote> 
<p></p> 
<p>创建数据库,使用数据库</p> 
<blockquote> 
 <p>create database shop;</p> 
</blockquote> 
<p></p> 
<blockquote> 
 <p>use shop;</p> 
</blockquote> 
<p></p> 
<p>将脚本放到对应的文件夹,执行脚本</p> 
<blockquote> 
 <p>source /script/book.sql</p> 
</blockquote> 
<p></p> 
<p>退出来</p> 
<p>查看MySQL容器是否允许</p> 
<blockquote> 
 <p>docker ps</p> 
</blockquote> 
<p></p> 
<p>进入目录，把架包拖进来</p> 
<blockquote> 
 <p>cd /root/tools</p> 
 <p></p> 
</blockquote> 
<p>编写vim Dockerfile</p> 
<blockquote> 
 <p>FROM openjdk:latest<br> WORKDIR /project<br> COPY spring.jar /project<br> CMD java -jar spring.jar --mysql.addr=m1<br>  </p> 
</blockquote> 
<p>将spring包放进去</p> 
<p>构建镜像</p> 
<p>docker build -t boot:v1 .</p> 
<p></p> 
<p>运行三个容器(必须在自定义网络中)</p> 
<blockquote> 
 <p>docker run -itd \<br> --name b1 \<br> --net my_net \<br> boot:v1</p> 
</blockquote> 
<blockquote> 
 <p>docker run -itd \<br> --name b2 \<br> --net my_net \<br> boot:v1</p> 
</blockquote> 
<blockquote> 
 <p>docker run -itd \<br> --name b3 \<br> --net my_net \<br> -p 8080:8080 \<br> boot:v1</p> 
</blockquote> 
<blockquote> 
 <p><a href="http://192.168.233.142:8080/book/list" rel="nofollow" title="192.168.233.142:8080/book/list">192.168.233.142:8080/book/list</a></p> 
</blockquote> 
<p></p> 
<p>部署nginx</p> 
<p>新建nginx文件夹</p> 
<blockquote> 
 <p>mkdir -p nginx/{conf.d,html}</p> 
</blockquote> 
<p></p> 
<pre><code>docker run -itd \
--name n1 \
-v /root/tools/nginx/conf.d:/etc/nginx/conf.d \
-v /root/tools/nginx/html:/etc/nginx/html \
-p 80:80 \
--net my_net \
nginx
</code></pre> 
<p>改default.conf文件</p> 
<p><img alt="" height="157" src="https://images2.imgbox.com/95/ae/Jb9YVBf5_o.png" width="445"></p> 
<p></p> 
<p>将配置文件default.conf放在conf里面,将静态素材放到html文件夹里面</p> 
<p><img alt="" height="225" src="https://images2.imgbox.com/e1/52/DrFozbmz_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<p>运行</p> 
<pre><code>docker run -itd \
--name n1 \
-v /root/tools/nginx/conf.d:/etc/nginx/conf.d \
-v /root/tools/nginx/html:/etc/nginx/html \
-p 80:80 \
--net my_net \
nginx
</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/58be9377504de17846f0e9ef0a4dcfd1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Maven（五）如何只打包项目某个模块及其依赖模块？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cd615bf569244ce9a3398928acff93cd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java小项目：简单的收入明细记事本，超级简单（不涉及数据库，通过字符串来记录）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>