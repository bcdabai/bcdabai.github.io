<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c&#43;&#43;数据结构之栈 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="c&#43;&#43;数据结构之栈" />
<meta property="og:description" content="一、栈的定义 栈（Stack）是由有限个数据类型相同元素组成的有序集合，对元素的操作只能在栈顶进行，遵循后进先出（Last In，First Out）的原则，其相关运算有创建空栈、判空、判满、入栈、出栈等。
二、栈的ADT 数据：
有限个数据类型相同元素所组成的有序集合，用top纪录栈顶元素的位置。
运算：
Create()： 创建一个空栈。
IsEmpty()： 若栈空，则返回1，否则返回0。
IsFull()： 若栈满，则返回1，否则返回0。
Push()： 让某元素入栈。
Pop()： 让栈顶元素出栈。
Display()： 输出栈元素
三、栈的数组实现 栈可以用数组来实现，定义数组data[MaxSize]用来存储栈元素，MaxSize是允许的最大容量，用变量top纪录栈顶元素的位置，top=-1表示空栈，这种栈称为顺序栈（Sequence Stack），用S或其它大写英文字母来表示。
#include&lt;iostream&gt; using namespace std; #define MaxSize 100//栈的最大容量 //顺序栈定义 struct SeqStack { int data[MaxSize];//存放栈元素的数组 int top;//栈顶指针 }; //创建空栈 void Create(SeqStack &amp;S) { S.top = -1; } //判空 int IsEmpty(SeqStack S) { if (S.top == -1) return 1; else return 0; } //判满 int IsFull(SeqStack S) { if (S." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cbba36429a4593b4f029336b9a9d8821/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-22T09:21:59+08:00" />
<meta property="article:modified_time" content="2021-09-22T09:21:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c&#43;&#43;数据结构之栈</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>一、栈的定义</h3> 
<p>栈（Stack）是由有限个数据类型相同元素组成的有序集合，对元素的操作只能在栈顶进行，遵循后进先出（Last In，First Out）的原则，其相关运算有创建空栈、判空、判满、入栈、出栈等。</p> 
<h3><a id="ADT_2"></a>二、栈的ADT</h3> 
<p>数据：<br> 有限个数据类型相同元素所组成的有序集合，用top纪录栈顶元素的位置。<br> 运算：<br> Create()： 创建一个空栈。<br> IsEmpty()： 若栈空，则返回1，否则返回0。<br> IsFull()： 若栈满，则返回1，否则返回0。<br> Push()： 让某元素入栈。<br> Pop()： 让栈顶元素出栈。<br> Display()： 输出栈元素</p> 
<h3><a id="_12"></a>三、栈的数组实现</h3> 
<p>栈可以用数组来实现，定义数组data[MaxSize]用来存储栈元素，MaxSize是允许的最大容量，用变量top纪录栈顶元素的位置，top=-1表示空栈，这种栈称为顺序栈（Sequence Stack），用S或其它大写英文字母来表示。</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MaxSize</span> <span class="token expression"><span class="token number">100</span></span><span class="token comment">//栈的最大容量</span></span>
<span class="token comment">//顺序栈定义</span>
<span class="token keyword">struct</span> <span class="token class-name">SeqStack</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> data<span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//存放栈元素的数组</span>
	<span class="token keyword">int</span> top<span class="token punctuation">;</span><span class="token comment">//栈顶指针</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//创建空栈</span>
<span class="token keyword">void</span> <span class="token function">Create</span><span class="token punctuation">(</span>SeqStack <span class="token operator">&amp;</span>S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	S<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判空</span>
<span class="token keyword">int</span> <span class="token function">IsEmpty</span><span class="token punctuation">(</span>SeqStack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判满</span>
<span class="token keyword">int</span> <span class="token function">IsFull</span><span class="token punctuation">(</span>SeqStack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">&gt;=</span> MaxSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//入栈</span>
<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>SeqStack <span class="token operator">&amp;</span>S<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsFull</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果栈满</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈满,无法入栈"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//什么都不做</span>
	<span class="token punctuation">}</span>
	S<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token operator">++</span>S<span class="token punctuation">.</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span><span class="token comment">//x入栈</span>
<span class="token punctuation">}</span>
<span class="token comment">//出栈</span>
<span class="token keyword">void</span> <span class="token function">Pop</span><span class="token punctuation">(</span>SeqStack <span class="token operator">&amp;</span>S<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果栈空</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈空,无法出栈"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//什么都不做</span>
	<span class="token punctuation">}</span>
	x <span class="token operator">=</span> S<span class="token punctuation">.</span>data<span class="token punctuation">[</span>S<span class="token punctuation">.</span>top<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//栈顶元素值赋给x后出栈</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出顺序栈</span>
<span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span>SeqStack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈空,无元素输出"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//什么都不做</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//定义循环控制变量i,让i取栈顶位置</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> S<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token operator">--</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment">//输出栈中元素</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//主函数</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	SeqStack S<span class="token punctuation">;</span><span class="token comment">//定义栈</span>
	<span class="token function">Create</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建空栈</span>
	<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//入栈</span>
	<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//入栈</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token function">Pop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//出栈</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//入栈</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_89"></a>四、栈的链表实现</h3> 
<p>顺序栈是用数组来存储栈中元素，由于数组的大小需事先声明，一般会将数组的存储空间预设的大一些，这有可能会造成内存空间的浪费。<br> 利用链表来创建栈，可以克服顺序栈的这一缺点，一般将用链表创建的栈称之为链栈。链栈的优点是可以动态改变链表长度，不存在判别栈满的问题。由于链栈应遵循后进先出的原则，创建链栈时，应采用前插法来创建。</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token comment">//结点定义</span>
<span class="token keyword">struct</span> <span class="token class-name">Node</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> data<span class="token punctuation">;</span><span class="token comment">//数据域</span>
	Node <span class="token operator">*</span>next<span class="token punctuation">;</span><span class="token comment">//指针域</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//链栈定义</span>
<span class="token keyword">struct</span> <span class="token class-name">LinkStack</span>
<span class="token punctuation">{<!-- --></span>
	Node <span class="token operator">*</span>top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//创建空链栈</span>
<span class="token keyword">void</span> <span class="token function">Create</span><span class="token punctuation">(</span>LinkStack <span class="token operator">&amp;</span>S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	S<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判空</span>
<span class="token keyword">int</span> <span class="token function">IsEmpty</span><span class="token punctuation">(</span>LinkStack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//入栈</span>
<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>LinkStack <span class="token operator">&amp;</span>S<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node <span class="token operator">*</span>NewNode<span class="token punctuation">;</span><span class="token comment">//新结点</span>
	NewNode <span class="token operator">=</span> <span class="token keyword">new</span> Node<span class="token punctuation">;</span><span class="token comment">//新结点申请内存</span>
	NewNode<span class="token operator">-&gt;</span>data <span class="token operator">=</span> x<span class="token punctuation">;</span><span class="token comment">//新结点数据域赋值</span>
	NewNode<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment">//新结点指针域赋值</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果链栈为空</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> NewNode<span class="token punctuation">;</span><span class="token comment">//链栈顶指针指向新结点</span>
	<span class="token keyword">else</span><span class="token comment">//如果链栈非空</span>
	<span class="token punctuation">{<!-- --></span>
		NewNode<span class="token operator">-&gt;</span>next <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//新结点前插入链栈</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> NewNode<span class="token punctuation">;</span><span class="token comment">//更新栈顶指针</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//出栈</span>
<span class="token keyword">void</span> <span class="token function">Pop</span><span class="token punctuation">(</span>LinkStack <span class="token operator">&amp;</span>S<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈空,无法出栈"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">//什么都不做</span>
	<span class="token punctuation">}</span>
	Node <span class="token operator">*</span>p <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//定义探测指针p并指向栈顶结点</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>next <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token comment">//如果链栈仅含一个结点</span>
	<span class="token punctuation">{<!-- --></span>
		x <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span><span class="token comment">//获取栈顶结点值</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment">//置链栈为空</span>
		<span class="token keyword">delete</span> p<span class="token punctuation">;</span><span class="token comment">//删除原栈顶结点</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token comment">//如果链栈中至少含有两个结点</span>
	<span class="token punctuation">{<!-- --></span>
		x <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span><span class="token comment">//获取栈顶结点值</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span><span class="token comment">//栈顶指针后移</span>
		<span class="token keyword">delete</span> p<span class="token punctuation">;</span><span class="token comment">//删除原栈顶结点</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出链栈</span>
<span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span>LinkStack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果链栈为空</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈空,无结点输出"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//什么都不做</span>
	<span class="token punctuation">}</span>
	Node <span class="token operator">*</span>p <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//定义探测指针p并指向栈顶结点</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> p<span class="token operator">-&gt;</span>data <span class="token operator">&lt;&lt;</span> <span class="token string">"=&gt;"</span><span class="token punctuation">;</span><span class="token comment">//输出栈顶结点值</span>
		p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span><span class="token comment">//p后移</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"NULL"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//主程序</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	LinkStack S<span class="token punctuation">;</span><span class="token comment">//定义栈</span>
	<span class="token function">Create</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建空栈</span>
	<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//入栈</span>
	<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//入栈</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token function">Pop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//出栈</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//入栈</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_185"></a>五、栈的运用</h3> 
<h3><a id="51_186"></a>5.1算术表达式</h3> 
<p>算术表达式是由运算符（+、-、x、/）和运算数（0、1、2、…）所组成。<br> 在计算机中，有中序、前序和后序三种算术表达式。由于中序法存在着优先级和结合性问题，在编译处理上实在不方便，而前（后）序法更适合于编译处理。</p> 
<p>中序表示法为：＜运算数1＞＜运算符＞＜运算数2＞<br> 例如“2x3-4x5”就是用中序表示法描述的算术表达式。</p> 
<p>前序表示法为：＜运算符＞＜运算数1＞＜运算数2＞<br> 例如“2x3-4x5”对应的前序表达式为“-x23x45”。</p> 
<p>后序表示法为：＜运算数1＞＜运算数2＞＜运算符＞<br> 例如“2x3-4x5”对应的后序表达式为“23x45x-”。**</p> 
<h3><a id="52_198"></a>5.2算术表达式求值</h3> 
<p>以2x3-4x5为例，介绍<strong>中序表达式</strong>的求值方法。<br> 第一步 创建两个空栈，分别用于存放运算符与运算数。<br> 运算符栈 <br> 运算数栈 <br> 第二步 2入运算数栈，x入运算符栈，3入运算数栈。<br> 运算符栈 x <br> 运算数栈 2 3 <br> 第三步 -入运算符栈之前，先与运算符栈的栈顶元素x比较优先级，因-比x的优先级低，-暂不能入运算符栈，先让x出运算符栈，3与2出运算数栈，计算2x3=6，再将6入运算数栈，然后让-入运算符栈。<br> 运算符栈 - <br> 运算数栈 6 <br> 第四步 4入运算数栈，x入运算符栈之前，先与运算符栈的栈顶元素-比较优先级，因x比-的优先级高，让x入运算符栈，5入运算数栈。<br> 运算符栈 - x <br> 运算数栈 6 4 5 <br> 第五步 中序表达式处理完毕之后，让5与4出运算数栈，x出运算符栈，计算4x5=20，再将20入运算数栈。<br> 运算符栈 - <br> 运算数栈 6 20 <br> 第六步 20与6出运算数栈，-出运算符栈，计算6-20=-14，再将-14入运算数栈。<br> 运算符栈 <br> 运算数栈 -14 <br> 第七步 运算符栈已空，让-14出运算数栈，使运算数栈也为空，-14就是中序表达式2<em>3-4</em>5的值。<br> 运算符栈 <br> 运算数栈</p> 
<p>以“-x23x45”为例，介绍<strong>前序表达式</strong>的求值方法。<br> 第一步 创建两个栈，一个用来存放前序表达式字符，一个用来存放运算数。<br> 前序表达式栈 - x 2 3 x 4 5<br> 运算数栈 <br> 第二步 5与4出前序表达式栈，入运算数栈。<br> 前序表达式栈 - x 2 3 x <br> 运算数栈 5 4 <br> 第三步 x出前序表达式栈，4与5出运算数栈，计算4x5=20，再将20入运算数栈。<br> 前序表达式栈 - x 2 3 <br> 运算数栈 20 <br> 第四步 3与2出前序表达式栈，入运算数栈。<br> 前序表达式栈 - x <br> 运算数栈 20 3 2 <br> 第五步 *出前序表达式栈，2与3出运算数栈，计算2x3=6，再将6入运算数栈。<br> 前序表达式栈 - <br> 运算数栈 20 6 <br> 第六步 -出前序表达式栈，6与20出运算数栈，计算6-20=-14，再将-14入运算数栈。<br> 前序表达式栈 <br> 运算数栈 -14 <br> 第七步 前序表达式栈已空，让-14出运算数栈，使运算数栈也为空，-14就是前序表达式-<em>23</em>45的值。<br> 前序表达式栈 <br> 运算数栈</p> 
<p>以“23x45x-”为例，介绍<strong>后序表达式</strong>的求值方法。<br> 第一步 创建两个栈，一个用来存放后序表达式字符（注意：逆序装入），一个用来存放运算数。<br> 后序表达式栈 - x 5 4 x 3 2<br> 运算数栈 <br> 第二步 2与3出后序表达式栈，入运算数栈。<br> 后序表达式栈 - x 5 4 x <br> 运算数栈 2 3 <br> 第三步 x出后序表达式栈，3与2出运算数栈，计算2x3=6，再将6入运算数栈。<br> 后序表达式栈 - x 5 4 <br> 运算数栈 6 <br> 第四步 4与5出后序表达式栈，入运算数栈。<br> 后序表达式栈 - x <br> 运算数栈 6 4 5 <br> 第五步 x出后序表达式栈，5与4出运算数栈，计算4x5=20，再将20入运算数栈。<br> 后序表达式栈 - <br> 运算数栈 6 20 <br> 第六步 -出后序表达式栈，20与6出运算数栈，计算6-20=-14，再将-14入运算数栈。<br> 后序表达式栈 <br> 运算数栈 -14 <br> 第七步 后序表达式栈已空，让-14出运算数栈，使运算数栈也为空，-14就是后序表达式23<em>45</em>-的值。<br> 后序表达式栈 <br> 运算数栈</p> 
<p><strong>比较三种算术表达式的求值方法，不难发现：中序表达式符合我们的阅读习惯，但运算符的入栈需要考虑其优先级</strong>。因为在运算符栈中，只允许优先级高的运算符“压在”优先级低的运算符之上。前序（后序）表达式求值法，避免了运算符优先级的讨论，更适合于计算机去处理；由于后序表达式的入栈次序是逆序的，相比较而言，前序表达式求值方法更为方便。</p> 
<h3><a id="53_269"></a>5.3中序转前序或者后序</h3> 
<p>利用栈，可将中序表达式转换成前序表达式。在转换过程中，需要借助一个运算符栈和一个输出栈。还需要计算运算符的ISP值与ICP值。ISP（In Stack Priority）是指运算符的“栈内优先级”，而ICP（In Coming Priority）是指运算符的“输入优先级”。</p> 
<p><strong>中序转前序的算法如下</strong>：</p> 
<p>（1）规定运算符“)”在运算符栈内的优先级ISP最小，“(”的ISP最大；而运算符“)”在运算符栈外的优先级ICP最大，“（”的ICP最小。<br> <strong>总结</strong>：遇到’)’直接读入运算符栈，入栈后’)’变为最小的ISP，后续的运算符(除了’)’外)都可以直接读入。<br> <strong>总结</strong>：遇到’(’，先将’)’前面的运算符全部收入到输出栈，然后将’(’与‘)’消除。</p> 
<p>（2）<strong>由右至左</strong>依次读入中序表达式中的每一个</p> 
<p>（3）如果读入的是运算数，则直接进入输出栈。</p> 
<p>（4）如果读入的是运算符，当读入运算符的ICP ≤ 运算符栈顶元素的ISP时，将运算符栈顶元素出栈并进入输出栈，直到运算符栈为空或者运算符栈顶元素的ISP小于ICP为止，然后再让读入的运算符入运算符栈。<br> <strong>（备注：可以简单理解为icp&gt;isp为入栈条件）</strong></p> 
<p>（5）如果读入的是运算符“（”，让运算符栈顶元素出栈并进入输出栈，直到第一个“）”出栈为止。</p> 
<p>（6）当中序表达式读完后，让运算符栈元素全部出栈并进入输出栈。</p> 
<p>例题：将中序表达式“(A+B)<em>D+E/(F+A</em>D)+C”转换成前序表达式。<br> 答：创建一个运算符栈和一个输出栈（假定两个栈的<strong>左端为栈顶</strong>），由右至左逐一读取中序表达(A+B)<em>D+E/(F+A</em>D)+C的每一个字符，转换过程如下图。</p> 
<p><strong>注意：我们一般默认左边为栈底，现在默认左边为栈顶，主要是在输出栈中可以直接看出表达式而不需要再进行栈的输出。</strong><br> <img src="https://images2.imgbox.com/48/68/u7i51SzO_o.png" alt=""><br> 所求的<strong>前序表达式</strong>为+x+ABD+/E+FxADC。<br> 注意上述用x代替了*。</p> 
<p><strong>c++代码实现中序转前序：</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MaxSize</span> <span class="token expression"><span class="token number">100</span></span><span class="token comment">//存放中序表达式字符数组的最大容量</span></span>
<span class="token comment">//优先级结构体定义</span>
<span class="token keyword">struct</span> <span class="token class-name">Priority</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> C<span class="token punctuation">;</span><span class="token comment">//运算符</span>
	<span class="token keyword">int</span> P<span class="token punctuation">;</span><span class="token comment">//优先级</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//优先级结构体数组赋初值(全局变量)</span>
Priority ISP<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span> <span class="token string">')'</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">';'</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'='</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'-'</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'('</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Priority ICP<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span> <span class="token string">'('</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">';'</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'='</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'-'</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">')'</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//结点定义</span>
<span class="token keyword">struct</span> <span class="token class-name">Node</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> data<span class="token punctuation">;</span><span class="token comment">//数据域</span>
	Node<span class="token operator">*</span> next<span class="token punctuation">;</span><span class="token comment">//指针域</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//链栈定义</span>
<span class="token keyword">struct</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//创建空链栈</span>
<span class="token keyword">void</span> <span class="token function">Create</span><span class="token punctuation">(</span>Stack<span class="token operator">&amp;</span> S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	S<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判空</span>
<span class="token keyword">int</span> <span class="token function">IsEmpty</span><span class="token punctuation">(</span>Stack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//入栈</span>
<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>Stack<span class="token operator">&amp;</span> S<span class="token punctuation">,</span> <span class="token keyword">char</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> NewNode<span class="token punctuation">;</span><span class="token comment">//新结点</span>
	NewNode <span class="token operator">=</span> <span class="token keyword">new</span> Node<span class="token punctuation">;</span><span class="token comment">//新结点申请内存</span>
	NewNode<span class="token operator">-&gt;</span>data <span class="token operator">=</span> x<span class="token punctuation">;</span><span class="token comment">//新结点的数据域赋值</span>
	NewNode<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment">//新结点的指针域赋值</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果链栈为空</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> NewNode<span class="token punctuation">;</span><span class="token comment">//链栈顶指针指向新结点</span>
	<span class="token keyword">else</span><span class="token comment">//如果链栈非空</span>
	<span class="token punctuation">{<!-- --></span>
		NewNode<span class="token operator">-&gt;</span>next <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//新结点前插入链栈</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> NewNode<span class="token punctuation">;</span><span class="token comment">//链栈顶指针指向新结点</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//出栈</span>
<span class="token keyword">void</span> <span class="token function">Pop</span><span class="token punctuation">(</span>Stack<span class="token operator">&amp;</span> S<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈空,无法出栈"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Node<span class="token operator">*</span> p <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//定义探测指针p并指向栈顶结点</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>next <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token comment">//如果链栈中仅含一个结点</span>
	<span class="token punctuation">{<!-- --></span>
		x <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span><span class="token comment">//获取栈顶结点值</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token comment">//置链栈为空</span>
		<span class="token keyword">delete</span> p<span class="token punctuation">;</span><span class="token comment">//删除原栈顶结点</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token comment">//如果链栈中至少含有两个结点</span>
	<span class="token punctuation">{<!-- --></span>
		x <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span><span class="token comment">//获取栈顶结点值</span>
		S<span class="token punctuation">.</span>top <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span><span class="token comment">//栈顶指针后移</span>
		<span class="token keyword">delete</span> p<span class="token punctuation">;</span><span class="token comment">//删除原栈顶结点</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出链栈</span>
<span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span>Stack S<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果链栈为空</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"栈空,无结点输出"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//什么都不做</span>
	<span class="token punctuation">}</span>
	Node<span class="token operator">*</span> p <span class="token operator">=</span> S<span class="token punctuation">.</span>top<span class="token punctuation">;</span><span class="token comment">//定义探测指针p并指向栈顶结点</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span><span class="token comment">//输出栈顶结点值</span>
		p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span><span class="token comment">//p后移</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//输入中序表达式</span>
<span class="token keyword">void</span> <span class="token function">Input</span><span class="token punctuation">(</span><span class="token keyword">char</span> Infix<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cin <span class="token operator">&gt;&gt;</span> Infix<span class="token punctuation">;</span><span class="token comment">//输入中序表达式</span>
	n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>Infix<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'\0'</span><span class="token punctuation">)</span><span class="token comment">//获取字符数组的长度</span>
		n<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//运算符优先级比较</span>
<span class="token keyword">int</span> <span class="token function">Compare</span><span class="token punctuation">(</span><span class="token keyword">char</span> InfixSymbol<span class="token punctuation">,</span> <span class="token keyword">char</span> StackSymbol<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> isp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> icp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>ISP<span class="token punctuation">[</span>isp<span class="token punctuation">]</span><span class="token punctuation">.</span>C <span class="token operator">!=</span> StackSymbol<span class="token punctuation">)</span>
		isp<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//查找运算符栈的栈顶运算符在ISP数组中位置isp</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>ICP<span class="token punctuation">[</span>icp<span class="token punctuation">]</span><span class="token punctuation">.</span>C <span class="token operator">!=</span> InfixSymbol<span class="token punctuation">)</span>
		icp<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//查找读入运算符在ICP数组中的位置icp</span>
	<span class="token comment">//若读入运算符的ICP大于栈顶运算符的ISP，返回1。否则，返回0</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>ICP<span class="token punctuation">[</span>icp<span class="token punctuation">]</span><span class="token punctuation">.</span>P <span class="token operator">&gt;</span> ISP<span class="token punctuation">[</span>isp<span class="token punctuation">]</span><span class="token punctuation">.</span>P <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//中序转前序</span>
<span class="token keyword">void</span> <span class="token function">Infix2Prefix</span><span class="token punctuation">(</span><span class="token keyword">char</span> Infix<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> Stack<span class="token operator">&amp;</span> S<span class="token punctuation">,</span> Stack<span class="token operator">&amp;</span> O<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		y <span class="token operator">=</span> Infix<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//从右至左读取中序表达式字符</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>	<span class="token comment">//y为(</span>
		<span class="token keyword">case</span> <span class="token string">'('</span><span class="token operator">:</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>top<span class="token operator">-&gt;</span>data <span class="token operator">!=</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token comment">//当栈顶元素字符不等于）时</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">Pop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运算符栈的栈顶元素出栈</span>
				<span class="token function">Push</span><span class="token punctuation">(</span>O<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//再入输出栈</span>
			<span class="token punctuation">}</span>
			<span class="token function">Pop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//让)出栈</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token comment">//y为);=+-*/</span>
		<span class="token keyword">case</span> <span class="token string">')'</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token string">';'</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token string">'='</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token string">'+'</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token string">'-'</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token string">'*'</span><span class="token operator">:</span>
		<span class="token keyword">case</span> <span class="token string">'/'</span><span class="token operator">:</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果运算符栈为空</span>
				<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//y直接入运算符栈</span>
			<span class="token keyword">else</span><span class="token comment">//如果运算符栈非空</span>
			<span class="token punctuation">{<!-- --></span>	<span class="token comment">//当y的ICP小于或等于运算符栈顶元素的ISP时</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">Compare</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> S<span class="token punctuation">.</span>top<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">Pop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运算符栈的栈顶元素出栈</span>
					<span class="token function">Push</span><span class="token punctuation">(</span>O<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//再入输出栈</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//如果运算符栈为空</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">Push</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//y入运算符栈</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token comment">//y为运算数</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token function">Push</span><span class="token punctuation">(</span>O<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//y入输出栈</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		n<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment">//下标减1</span>
	<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//中序表达式字符读入完毕,让运算符栈元素出栈入输出栈</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//当运算符栈非空时</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">Pop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运算符栈的栈顶元素出栈</span>
		<span class="token function">Push</span><span class="token punctuation">(</span>O<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//再入输出栈</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//主函数</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> Infix<span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//定义中序表达式字符数组</span>
	Stack S<span class="token punctuation">,</span> O<span class="token punctuation">;</span><span class="token comment">//定义运算符栈,输出栈</span>
	<span class="token function">Create</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建空运算符栈</span>
	<span class="token function">Create</span><span class="token punctuation">(</span>O<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建空输出栈</span>
	<span class="token keyword">int</span> n<span class="token punctuation">;</span><span class="token comment">//n表示中序表达式的字符长度</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入中序表达式"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">Input</span><span class="token punctuation">(</span>Infix<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用中序表达式输入函数</span>
	<span class="token function">Infix2Prefix</span><span class="token punctuation">(</span>Infix<span class="token punctuation">,</span> n<span class="token punctuation">,</span> S<span class="token punctuation">,</span> O<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用中序转前序函数</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输出前序表达式"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">Display</span><span class="token punctuation">(</span>O<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示输出栈</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/45/75/7BGGhc24_o.png" alt="在这里插入图片描述"></p> 
<p><strong>中序转后序的算法如下：</strong><br> （1） 规定运算符“(”在运算符栈内的优先级ISP最小，“)”的ISP最大；而运算符“(”在运算符栈外的优先级ICP最大，“)”的ICP最小。（同中序转前序相反）<br> （2）由左至右依次读入中序表达式中的每一个字符。（同中序转前序相反）<br> （3）如果读入的是运算数，则直接输出。<br> （4）如果读入的是运算符，当读入运算符的ICP ≤ 运算符栈顶元素的ISP时，将运算符栈顶元素出栈并输出，直到运算符栈为空或者运算符栈顶元素的ISP小于ICP为止。然后再让读入的运算符入运算符栈。<br> （备注：可以简单理解为icp&gt;isp为入栈条件,同中序转前序一样）<br> （5）如果读入的是运算符“)”，让运算符栈顶元素出栈并输出，直到第一个“(”出栈为止。（同中序转前序一样）<br> （6）当中序表达式读完后，让运算符栈元素全部出栈并输出。（同中序转前序一样）<br> 显然，实现中序转后序算法，只需创建一个运算符栈。</p> 
<p><strong>c++代码实现中序转后序：</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stack&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">priority</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'*'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'+'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'('</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	string input <span class="token operator">=</span> <span class="token string">"(A+B)*D+E/(F+A*D)+C"</span><span class="token punctuation">;</span>         <span class="token comment">//待处理中序表达式</span>
	string output<span class="token punctuation">;</span>
	stack<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> st<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> p <span class="token operator">:</span> input<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">'+'</span> <span class="token operator">||</span> p <span class="token operator">==</span> <span class="token string">'-'</span> <span class="token operator">||</span> p <span class="token operator">==</span> <span class="token string">'*'</span> <span class="token operator">||</span> p <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">||</span> p <span class="token operator">==</span> <span class="token string">'('</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">'('</span><span class="token punctuation">)</span>
				st<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">priority</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token function">priority</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					output <span class="token operator">+=</span> st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					st<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				st<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token string">')'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'('</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				output <span class="token operator">+=</span> st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				st<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			st<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>                         <span class="token comment">//如果是操作数,直接输入到输出</span>
			output <span class="token operator">+=</span> p<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		output <span class="token operator">+=</span> st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		st<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> output <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/53/ShG24Bih_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="54_545"></a>5.4前序或后序转中序</h3> 
<p>对于<strong>前序表达式</strong>，<strong>由右至左</strong>逐一读取表达式的每个字符，若为运算数则直接入栈，若为运算符则从栈中取出两个运算数，按＜运算数1＞＜运算符＞＜运算数2＞结合成一个中序表达式，然后再入栈。</p> 
<p>将前序表达式“-x23x45”，转化成中序表达式的过程如下图：<br> <img src="https://images2.imgbox.com/e2/91/AT3bn94R_o.png" alt="在这里插入图片描述">对于<strong>后序表达式</strong>，<strong>由左至右</strong>逐一读取表达式的每个字符，若为运算数则直接入栈，若为运算符则从栈中取出两个运算数，按＜运算数2＞＜运算符＞＜运算数1＞结合成一个中序表达式，然后再入栈。</p> 
<p>将后序表达式“23x45x-”，转化成中序表达式的过程如下图：<br> <img src="https://images2.imgbox.com/f6/89/TaXhtzWG_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="55_553"></a>5.5进栈出栈规则</h3> 
<p><strong>进栈出栈规则参考如下文档：</strong></p> 
<p><a href="https://blog.csdn.net/github_39570717/article/details/88290719?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.control">参考文档</a></p> 
<h3><a id="56n_558"></a>5.6n个元素进栈，共有多少种出栈顺序？</h3> 
<p><strong>n个元素进栈，共有多少种出栈顺序？参考如下文档：</strong></p> 
<p><a href="https://blog.csdn.net/wu_tongtong/article/details/78161211?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163221323916780274166622%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=163221323916780274166622&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-78161211.first_rank_v2_pc_rank_v29&amp;utm_term=%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0%E7%9A%84%E5%89%8D%E5%87%A0%E9%A1%B9&amp;spm=1018.2226.3001.4187">参考文档</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c7989d447249b658c910afa5705dd92d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">浮点数精度丢失问题详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/682a1ea20ea7123c5800728fd2262f02/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js六种给数组追加元素的方法，你想得到几种？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>