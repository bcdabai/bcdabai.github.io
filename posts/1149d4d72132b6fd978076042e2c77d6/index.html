<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>flutter学习-day23-使用extended_image处理图片的加载和操作 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="flutter学习-day23-使用extended_image处理图片的加载和操作" />
<meta property="og:description" content="文章目录 1. 介绍2. 属性介绍3. 使用 1. 介绍 在 Flutter 的开发过程中，经常会遇到图片的显示和加载处理，通常显示一个图片，都有很多细节需要处理，比如图片的加载、缓存、错误处理、图片的压缩、图片的格式转换等，如果每个地方都手动处理，就太麻烦了，这时候就可以使用糖果大佬的插件 extended_image，它是官方 Image 的扩展三方库，不但支持图片加载以及失败显示，缓存网络图片，缩放拖拽图片，图片浏览等，还支持滑动退出页面，编辑图片(裁剪旋转翻转)，保存，绘制自定义效果等功能。
效果图：
2. 属性介绍 属性描述值url网络请求地址requiredkey唯一标识符-semanticLabel语义标签-excludeFromSemantics是否排除语义falsewidth宽度-height高度-color颜色-opacity透明度动画-colorBlendMode颜色混合模式-fit图片适应方式-alignment对齐方式Alignment.centerrepeat图片重复方式ImageRepeat.noRepeatcenterSlice九宫格切片区域-matchTextDirection是否匹配文本方向falsegaplessPlayback是否无缝播放falsefilterQuality滤镜质量FilterQuality.lowloadStateChanged图片加载状态回调Functionshape盒子形状-border盒子边框-borderRadius圆角半径-clipBehavior裁剪行为Clip.antiAliasenableLoadState是否启用加载状态truebeforePaintImage图片绘制前回调-afterPaintImage图片绘制后回调-mode扩展图片模式（默认/手势/编辑）ExtendedImageMode.noneenableMemoryCache是否启用内存缓存trueclearMemoryCacheIfFailed加载失败时是否清除内存缓存trueonDoubleTap双击事件回调-initGestureConfigHandler初始化手势配置回调-enableSlideOutPage是否启用滑动退出页面falseconstraints约束条件-cancelToken用于取消请求的 TokenCancellationToken()retries请求尝试次数3timeLimit请求超时时间-headers请求头-cache是否缓存truescale图片缩放比例1.0timeRetry请求重试间隔milliseconds: 100extendedImageEditorKey扩展图片编辑器键-initEditorConfigHandler初始化编辑器配置回调-heroBuilderForSlidingPage滑动退出页面时的英雄构建器-clearMemoryCacheWhenDispose销毁时是否清除内存缓存falsehandleLoadingProgress是否处理加载进度falseextendedImageGestureKey扩展图片手势键-cacheWidth缓存宽度-cacheHeight缓存高度-isAntiAlias是否开启抗锯齿falsecacheKey缓存键-printError是否打印错误信息truecompressionRatio压缩比例-maxBytes最大字节数-cacheRawData是否缓存原始数据falseimageCacheName图片缓存名称-cacheMaxAge缓存最大寿命-layoutInsets布局插入区域EdgeInsets.zero 3. 使用 更详细的使用方式，请参考extended_image 文档，本例子只针对图片的加载、成功、失败的处理以及放大查看。
ExtendedImage.network( imagePath, width: double.infinity, fit: BoxFit.fitHeight, cache: true, mode: ExtendedImageMode.gesture, initGestureConfigHandler: (state) { return GestureConfig( // 缩放最小值 minScale: 0.8, // 缩放动画最小值 当缩放结束时回到 minScale 值 animationMinScale: 0.8, // 缩放最大值 maxScale: 2.0, // 缩放动画最大值 当缩放结束时回到 maxScale 值 animationMaxScale: 3.5, // 缩放拖拽速度 speed: 1.0, // 拖拽惯性速度 inertialSpeed: 100.0, initialScale: 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1149d4d72132b6fd978076042e2c77d6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-29T11:40:26+08:00" />
<meta property="article:modified_time" content="2023-12-29T11:40:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">flutter学习-day23-使用extended_image处理图片的加载和操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__1" rel="nofollow">1. 介绍</a></li><li><a href="#2__9" rel="nofollow">2. 属性介绍</a></li><li><a href="#3__69" rel="nofollow">3. 使用</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__1"></a>1. 介绍</h2> 
<p>在 Flutter 的开发过程中，经常会遇到图片的显示和加载处理，通常显示一个图片，都有很多细节需要处理，比如图片的加载、缓存、错误处理、图片的压缩、图片的格式转换等，如果每个地方都手动处理，就太麻烦了，这时候就可以使用糖果大佬的插件 extended_image，它是官方 Image 的扩展三方库，不但支持图片加载以及失败显示，缓存网络图片，缩放拖拽图片，图片浏览等，还支持滑动退出页面，编辑图片(裁剪旋转翻转)，保存，绘制自定义效果等功能。</p> 
<p>效果图：<br> <img src="https://images2.imgbox.com/ea/cf/UYNX3ZOg_o.png" alt="效果图"></p> 
<h2><a id="2__9"></a>2. 属性介绍</h2> 
<table><thead><tr><th>属性</th><th>描述</th><th>值</th></tr></thead><tbody><tr><td>url</td><td>网络请求地址</td><td>required</td></tr><tr><td>key</td><td>唯一标识符</td><td>-</td></tr><tr><td>semanticLabel</td><td>语义标签</td><td>-</td></tr><tr><td>excludeFromSemantics</td><td>是否排除语义</td><td>false</td></tr><tr><td>width</td><td>宽度</td><td>-</td></tr><tr><td>height</td><td>高度</td><td>-</td></tr><tr><td>color</td><td>颜色</td><td>-</td></tr><tr><td>opacity</td><td>透明度动画</td><td>-</td></tr><tr><td>colorBlendMode</td><td>颜色混合模式</td><td>-</td></tr><tr><td>fit</td><td>图片适应方式</td><td>-</td></tr><tr><td>alignment</td><td>对齐方式</td><td>Alignment.center</td></tr><tr><td>repeat</td><td>图片重复方式</td><td>ImageRepeat.noRepeat</td></tr><tr><td>centerSlice</td><td>九宫格切片区域</td><td>-</td></tr><tr><td>matchTextDirection</td><td>是否匹配文本方向</td><td>false</td></tr><tr><td>gaplessPlayback</td><td>是否无缝播放</td><td>false</td></tr><tr><td>filterQuality</td><td>滤镜质量</td><td>FilterQuality.low</td></tr><tr><td>loadStateChanged</td><td>图片加载状态回调</td><td>Function</td></tr><tr><td>shape</td><td>盒子形状</td><td>-</td></tr><tr><td>border</td><td>盒子边框</td><td>-</td></tr><tr><td>borderRadius</td><td>圆角半径</td><td>-</td></tr><tr><td>clipBehavior</td><td>裁剪行为</td><td>Clip.antiAlias</td></tr><tr><td>enableLoadState</td><td>是否启用加载状态</td><td>true</td></tr><tr><td>beforePaintImage</td><td>图片绘制前回调</td><td>-</td></tr><tr><td>afterPaintImage</td><td>图片绘制后回调</td><td>-</td></tr><tr><td>mode</td><td>扩展图片模式（默认/手势/编辑）</td><td>ExtendedImageMode.none</td></tr><tr><td>enableMemoryCache</td><td>是否启用内存缓存</td><td>true</td></tr><tr><td>clearMemoryCacheIfFailed</td><td>加载失败时是否清除内存缓存</td><td>true</td></tr><tr><td>onDoubleTap</td><td>双击事件回调</td><td>-</td></tr><tr><td>initGestureConfigHandler</td><td>初始化手势配置回调</td><td>-</td></tr><tr><td>enableSlideOutPage</td><td>是否启用滑动退出页面</td><td>false</td></tr><tr><td>constraints</td><td>约束条件</td><td>-</td></tr><tr><td>cancelToken</td><td>用于取消请求的 Token</td><td>CancellationToken()</td></tr><tr><td>retries</td><td>请求尝试次数</td><td>3</td></tr><tr><td>timeLimit</td><td>请求超时时间</td><td>-</td></tr><tr><td>headers</td><td>请求头</td><td>-</td></tr><tr><td>cache</td><td>是否缓存</td><td>true</td></tr><tr><td>scale</td><td>图片缩放比例</td><td>1.0</td></tr><tr><td>timeRetry</td><td>请求重试间隔</td><td>milliseconds: 100</td></tr><tr><td>extendedImageEditorKey</td><td>扩展图片编辑器键</td><td>-</td></tr><tr><td>initEditorConfigHandler</td><td>初始化编辑器配置回调</td><td>-</td></tr><tr><td>heroBuilderForSlidingPage</td><td>滑动退出页面时的英雄构建器</td><td>-</td></tr><tr><td>clearMemoryCacheWhenDispose</td><td>销毁时是否清除内存缓存</td><td>false</td></tr><tr><td>handleLoadingProgress</td><td>是否处理加载进度</td><td>false</td></tr><tr><td>extendedImageGestureKey</td><td>扩展图片手势键</td><td>-</td></tr><tr><td>cacheWidth</td><td>缓存宽度</td><td>-</td></tr><tr><td>cacheHeight</td><td>缓存高度</td><td>-</td></tr><tr><td>isAntiAlias</td><td>是否开启抗锯齿</td><td>false</td></tr><tr><td>cacheKey</td><td>缓存键</td><td>-</td></tr><tr><td>printError</td><td>是否打印错误信息</td><td>true</td></tr><tr><td>compressionRatio</td><td>压缩比例</td><td>-</td></tr><tr><td>maxBytes</td><td>最大字节数</td><td>-</td></tr><tr><td>cacheRawData</td><td>是否缓存原始数据</td><td>false</td></tr><tr><td>imageCacheName</td><td>图片缓存名称</td><td>-</td></tr><tr><td>cacheMaxAge</td><td>缓存最大寿命</td><td>-</td></tr><tr><td>layoutInsets</td><td>布局插入区域</td><td>EdgeInsets.zero</td></tr></tbody></table> 
<h2><a id="3__69"></a>3. 使用</h2> 
<p>更详细的使用方式，请参考<a href="https://github.com/fluttercandies/extended_image">extended_image 文档</a>，本例子只针对图片的加载、成功、失败的处理以及放大查看。</p> 
<pre><code class="prism language-dart"><span class="token class-name">ExtendedImage</span><span class="token punctuation">.</span><span class="token function">network</span><span class="token punctuation">(</span>
  imagePath<span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> double<span class="token punctuation">.</span>infinity<span class="token punctuation">,</span>
  fit<span class="token punctuation">:</span> <span class="token class-name">BoxFit</span><span class="token punctuation">.</span>fitHeight<span class="token punctuation">,</span>
  cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token class-name">ExtendedImageMode</span><span class="token punctuation">.</span>gesture<span class="token punctuation">,</span>
  initGestureConfigHandler<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token class-name">GestureConfig</span><span class="token punctuation">(</span>
      <span class="token comment">// 缩放最小值</span>
      minScale<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
      <span class="token comment">// 缩放动画最小值 当缩放结束时回到 minScale 值</span>
      animationMinScale<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
      <span class="token comment">// 缩放最大值</span>
      maxScale<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">,</span>
      <span class="token comment">// 缩放动画最大值 当缩放结束时回到 maxScale 值</span>
      animationMaxScale<span class="token punctuation">:</span> <span class="token number">3.5</span><span class="token punctuation">,</span>
      <span class="token comment">// 缩放拖拽速度</span>
      speed<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
      <span class="token comment">// 拖拽惯性速度</span>
      inertialSpeed<span class="token punctuation">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span>
      initialScale<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
      <span class="token comment">// 是否使用 ExtendedImageGesturePageView 展示图片</span>
      inPageView<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// 当图片的初始化缩放大于 1.0 的时候，根据相对位置初始化图片</span>
      initialAlignment<span class="token punctuation">:</span> <span class="token class-name">InitialAlignment</span><span class="token punctuation">.</span>center
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>，
  <span class="token comment">/// 加载状态回调</span>
  loadStateChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">ExtendedImageState</span> state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>extendedImageLoadState<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">/// 加载中</span>
      <span class="token keyword">case</span> <span class="token class-name">LoadState</span><span class="token punctuation">.</span>loading<span class="token punctuation">:</span>
        <span class="token comment">// 自己写的加载中的Loading组件</span>
        <span class="token keyword">return</span> <span class="token class-name">LoadWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">/// 加载成功</span>
      <span class="token keyword">case</span> <span class="token class-name">LoadState</span><span class="token punctuation">.</span>completed<span class="token punctuation">:</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>completedWidget<span class="token punctuation">;</span>

      <span class="token comment">/// 加载失败</span>
      <span class="token keyword">case</span> <span class="token class-name">LoadState</span><span class="token punctuation">.</span>failed<span class="token punctuation">:</span>
        <span class="token comment">// 自己写的加载失败的组件 并且把重试的回调传递过去</span>
        <span class="token keyword">return</span> <span class="token class-name">LoadFailed</span><span class="token punctuation">(</span>callback<span class="token punctuation">:</span> state<span class="token punctuation">.</span>reLoadImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> 
<hr> 
<p><strong>本次分享就到这儿啦，我是鹏多多，如果您看了觉得有帮助，欢迎评论，关注，点赞，转发，我们下次见~</strong></p> 
<p><mark>往期文章</mark></p> 
<ul><li><a href="https://blog.csdn.net/pdd11997110103/article/details/134660449">flutter学习-day1-环境搭建和启动第一个项目</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/134660749">flutter学习-day12-可滚动组件和监听</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/121667524">Vue2全家桶+Element搭建的PC端在线音乐网站</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/122440666">vue3+element-plus配置cdn</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/121035412">助你上手Vue3全家桶之Vue3教程</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/121036145">助你上手Vue3全家桶之VueX4教程</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/121036684">助你上手Vue3全家桶之Vue-Router4教程</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/113563786">超详细！Vue的九种通信方式</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/118677514">超详细！Vuex手把手教程</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/115981856">使用nvm管理node.js版本以及更换npm淘宝镜像源</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/116002824">vue中利用.env文件存储全局环境变量，以及配置vue启动和打包命令</a></li><li><a href="https://blog.csdn.net/pdd11997110103/article/details/119386246">超详细！Vue-Router手把手教程</a></li></ul> 
<p><mark>个人主页</mark></p> 
<ul><li><a href="https://blog.csdn.net/pdd11997110103?spm=1010.2135.3001.5421">CSDN</a></li><li><a href="https://github.com/wp993080086">GitHub</a></li><li><a href="https://www.jianshu.com/u/b7a8536bff06" rel="nofollow">简书</a></li><li><a href="https://www.cnblogs.com/-pdd/" rel="nofollow">博客园</a></li><li><a href="https://juejin.cn/user/747323639737191" rel="nofollow">掘金</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5396181afc51879f93a66444c7d50301/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">K8s部署轻量级日志收集系统EFK（elasticsearch &#43; filebeat &#43; kibana）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/28bda96f4c010eab11684f9ebb1e9dfb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot 整合 MyBatisPlus</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>