<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java对象传递和返回的细节问题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java对象传递和返回的细节问题" />
<meta property="og:description" content="文章目录 1.传递引用2. 创建本地副本2.1 值传递2.2 对象克隆2.3 浅拷贝问题2.4 深拷贝2.4.1 引用类型逐个浅拷贝2.4.2 序列化方式进行深拷贝 1.传递引用 在一个方法中将一个对象的引用传递给另外一个方法，引用指向的对象是同一个 public class Person { int age; String name; public Person(int age, String name) { this.age = age; this.name = name; } public static void main(String[] args) { Person p=new Person(18, &#34;tom&#34;); System.out.println(&#34;main: &#34;&#43;p); f(p); } public static void f(Person p) { System.out.println(&#34;f(): &#34;&#43;p); } } 引用别名
public static void main(String[] args) { Person p=new Person(18, &#34;tom&#34;); Person p2=p; p2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/df645a8d15c2744add9c82b5f3fbfeaf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-04T09:49:38+08:00" />
<meta property="article:modified_time" content="2022-11-04T09:49:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java对象传递和返回的细节问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_2" rel="nofollow">1.传递引用</a></li><li><a href="#2__57" rel="nofollow">2. 创建本地副本</a></li><li><ul><li><a href="#21__66" rel="nofollow">2.1 值传递</a></li><li><a href="#22__97" rel="nofollow">2.2 对象克隆</a></li><li><a href="#23__143" rel="nofollow">2.3 浅拷贝问题</a></li><li><a href="#24__193" rel="nofollow">2.4 深拷贝</a></li><li><ul><li><a href="#241___198" rel="nofollow">2.4.1 引用类型逐个浅拷贝</a></li><li><a href="#242___255" rel="nofollow">2.4.2 序列化方式进行深拷贝</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_2"></a>1.传递引用</h2> 
<ul><li>在一个方法中将一个对象的引用传递给另外一个方法，引用指向的对象是同一个</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
	<span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"main:  "</span><span class="token operator">+</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">f</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"f():  "</span><span class="token operator">+</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/97/3e/WW5LMTIv_o.png" alt="在这里插入图片描述"></p> 
<p><strong>引用别名</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p2<span class="token operator">=</span>p<span class="token punctuation">;</span>
		p2<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//19	</span>
	<span class="token punctuation">}</span>
	
</code></pre> 
<ul><li>引用p和p2指向的是同一个对象，p2对对象的属性进行操作，当使用引用p访问对象的属性时当然也改变，同样的情况也发生在对象引用在方法之间的传递，如下面的代码：</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">f</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//19	</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		p<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="2__57"></a>2. 创建本地副本</h2> 
<p>几个概念：</p> 
<ul><li>引用别名会在方法参数是对象类型时自动发生</li><li>没有本地对象，只有本地引用（方法中创建的对象存在于堆中，只有引用变量存在于方法栈中）</li><li>引用是有作用域的，而对象没有</li><li>Java中的对象的生命周期并不是一个问题（垃圾回收机制）</li></ul> 
<h3><a id="21__66"></a>2.1 值传递</h3> 
<p><strong><font color="red">Java中方法之间只有值传递</font></strong></p> 
<ol><li>传递基本类型时，传递的是基本类型的值的拷贝</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
		<span class="token function">change</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100 不受影响</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		a<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>传递对象时，传递的是对象的引用拷贝</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">f</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//还是18 f()中p指向了一个新的对象 不影响main函数</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">"bob"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>传递对象时如果在另外一个方法中对对象的属性进行操作会对main方法产生“副作用”， 但是如果只是简单的对引用进行操作是没有影响的</p> 
<h3><a id="22__97"></a>2.2 对象克隆</h3> 
<p>步骤：</p> 
<ol><li>类实现Cloneable空接口，默认情况下不希望所有的类都有克隆能力，当需要某个类有克隆能力时就需要实现该接口作为一种“可克隆”的标记，否则克隆时会报错CloneNotSupportedException</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>重写clone方法，clone方法是Object类中的，它在Object类中的是一个protected的本地方法，需要重写，加上public修饰符，否则只能在当前类中使用clone方法</li></ol> 
<pre><code class="prism language-java"> <span class="token keyword">protected</span> <span class="token keyword">native</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
	<span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span>  <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Person</span> p1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p2<span class="token operator">=</span>p1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/8e/8h90avYd_o.png" alt="在这里插入图片描述"></p> 
<p>重写clone方法时实际是就是调用Object类中的本地clone方法，Object类中的clone方法做了哪些工作？</p> 
<blockquote> 
 <p>Object类中clone方法负责创建正确大小的存储空间，并执行了从原始对象中所有二进制位到新对象内存中的按位复制。</p> 
</blockquote> 
<h3><a id="23__143"></a>2.3 浅拷贝问题</h3> 
<p>场景：Person类中增加一个引用类型的属性Country, 表示这个人所属的国家，然后进行克隆</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">test</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Country</span><span class="token punctuation">{<!-- --></span>
	<span class="token class-name">String</span> nation<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Country</span><span class="token punctuation">(</span><span class="token class-name">String</span> nation<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nation <span class="token operator">=</span> nation<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
	<span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token class-name">Country</span> country<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Country</span> country<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>country<span class="token operator">=</span>country<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span>  <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Country</span> country<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Country</span><span class="token punctuation">(</span><span class="token string">"China"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">,</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p2<span class="token operator">=</span>p1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		p1<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"bob"</span><span class="token punctuation">;</span>
		p1<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token operator">=</span><span class="token string">"America"</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/a6/e6/y7blOngQ_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>问题描述： 当Person类中有一个引用类型属性时，对于基本类型数据和String类型是对值进行拷贝的，因此改变p1的name不影响p2的name, 但是对于Country这种引用类型，在clone时仅仅是拷贝了一份对象的引用，拷贝的引用和原来的引用指向的是同一个对象，因此p1改变country的属性时，p2的country的属性也发生了改变</p> 
</blockquote> 
<h3><a id="24__193"></a>2.4 深拷贝</h3> 
<p>解决浅拷贝问题的关键点在于不仅仅是拷贝引用，而且要拷贝一份引用指向的对象，深拷贝有两种方式：</p> 
<ol><li>逐个对引用指向的对象进行浅拷贝</li><li>使用序列化方式进行深拷贝</li></ol> 
<h4><a id="241___198"></a>2.4.1 引用类型逐个浅拷贝</h4> 
<p>如果一个类A中有多个引用类型，那么这些引用类型的类需要实现 Cloneable接口，在对A的对象进行克隆时，逐个浅拷贝其中的引用类型</p> 
<p>eg: Person类中有Country引用类型，在进行clone时，单独对country进行浅拷贝</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">test</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Country</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>
	<span class="token class-name">String</span> nation<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Country</span><span class="token punctuation">(</span><span class="token class-name">String</span> nation<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nation <span class="token operator">=</span> nation<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">Country</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span>  <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Country</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
	<span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token class-name">Country</span> country<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Country</span> country<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>country<span class="token operator">=</span>country<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span>  <span class="token punctuation">{<!-- --></span>
			
			<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
			p<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			p<span class="token punctuation">.</span>country<span class="token operator">=</span>p<span class="token punctuation">.</span>country<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//对country进行浅拷贝</span>
			<span class="token keyword">return</span> p<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Country</span> country<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Country</span><span class="token punctuation">(</span><span class="token string">"China"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">,</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p2<span class="token operator">=</span>p1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		p1<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"bob"</span><span class="token punctuation">;</span>
		p1<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token operator">=</span><span class="token string">"America"</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/a5/1a/AYYfNX52_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="242___255"></a>2.4.2 序列化方式进行深拷贝</h4> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectOutputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Country</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{<!-- --></span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> nation<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Country</span><span class="token punctuation">(</span><span class="token class-name">String</span> nation<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nation <span class="token operator">=</span> nation<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
	

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span><span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
	<span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token class-name">Country</span> country<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Country</span> country<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>country<span class="token operator">=</span>country<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span>  <span class="token punctuation">{<!-- --></span>
			
			<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token class-name">ObjectInputStream</span> ois<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token class-name">ObjectOutputStream</span> oos<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token class-name">ByteArrayInputStream</span> bais<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token class-name">ByteArrayOutputStream</span> baos<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
			
			<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
				baos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				oos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>baos<span class="token punctuation">)</span><span class="token punctuation">;</span>
				oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Person对象序列化 序列化写入到baos流中</span>
				
				
				bais<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>baos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				ois<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>bais<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从baos流中读取数据到ois</span>
				p<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ois读取对象数据</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>bais<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
					<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
						bais<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>baos<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
					<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
						baos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>oos<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
					<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
						oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>ois<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
					<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
						ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> p<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Country</span> country<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Country</span><span class="token punctuation">(</span><span class="token string">"China"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">,</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Person</span> p2<span class="token operator">=</span>p1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>
		p1<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"bob"</span><span class="token punctuation">;</span>
		p1<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token operator">=</span><span class="token string">"America"</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token operator">+</span><span class="token string">"   name: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token string">"  country: "</span><span class="token operator">+</span>p2<span class="token punctuation">.</span>country<span class="token punctuation">.</span>nation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/bc/89/XMuosXLz_o.png" alt="在这里插入图片描述"></p> 
<p><strong>总结： 实现一个可克隆的类的步骤</strong></p> 
<ol><li>实现Cloneable接口</li><li>重写clone方法</li><li>在重写的clone方法中调用super.clone()方法</li><li>在重写的clone方法中捕获异常</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2ab509e33dfb98726880981f2d65b96b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【项目设计】基于HLW8110计量芯片的电量计设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/025a39a012c8f63561151aba9b9c40ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA必备的10款插件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>