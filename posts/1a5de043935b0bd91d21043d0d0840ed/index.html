<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue-cli  兼容移动端低版本系统步骤详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue-cli  兼容移动端低版本系统步骤详解" />
<meta property="og:description" content="最近用 vue-cli 3.0 开发的移动端项目在最近两年新出的安卓手机上没问题，在三四年前的旧手机上出现白屏问题。分析一下应该是安卓系统版本的原因，目前已知的是Android 6.0 以上都 OK，6.0 以下就不行了。
同时，页面在IOS10左右的版本中，也会显示异常
低版本安卓系统内置的 webview 不支持 ES6 语法等一些新特性，所以报错。但在手机上调试不方便，受一篇文章的启发， IE 浏览器也是同样的问题，所以可以在 IE 上调试，一个调好了两个就都好了。突然发现万恶的 IE 还是有点用的…
网上的文章大部分是 Vue-cli 2.x 版本的解决方案，但 Vue-cli 3 跟之前的版本还是有很大差异的，可能是我比较菜，看了 n 篇文章还是不知道怎么配置。经过努力，终于梳理出了基于 Vue-cli 3 的项目如何做兼容性配置的步骤：
1.在项目根目录下新建 .babelrc 文件，跟 package.json 同级。 将以下代码复制到 .babelrc 文件中 { &#34;presets&#34;: [&#34;@babel/preset-env&#34;], &#34;plugins&#34;: [ &#34;@babel/plugin-transform-runtime&#34; ] } 2.修改 babel.config.js 将以下代码添加到 babel.config.js 文件中。
const plugins = []; if ([&#39;production&#39;, &#39;prod&#39;].includes(process.env.NODE_ENV)) { plugins.push(&#34;transform-remove-console&#34;) } module.exports = { presets: [ [ &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1a5de043935b0bd91d21043d0d0840ed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-19T16:11:19+08:00" />
<meta property="article:modified_time" content="2019-12-19T16:11:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue-cli  兼容移动端低版本系统步骤详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近用 vue-cli 3.0 开发的移动端项目在最近两年新出的安卓手机上没问题，在三四年前的旧手机上出现白屏问题。分析一下应该是安卓系统版本的原因，目前已知的是Android 6.0 以上都 OK，6.0 以下就不行了。</p> 
<p>同时，页面在IOS10左右的版本中，也会显示异常</p> 
<p>低版本安卓系统内置的 webview 不支持 ES6 语法等一些新特性，所以报错。但在手机上调试不方便，受一篇文章的启发， IE 浏览器也是同样的问题，所以可以在 IE 上调试，一个调好了两个就都好了。突然发现万恶的 IE 还是有点用的…</p> 
<p>网上的文章大部分是 Vue-cli 2.x 版本的解决方案，但 Vue-cli 3 跟之前的版本还是有很大差异的，可能是我比较菜，看了 n 篇文章还是不知道怎么配置。经过努力，终于梳理出了基于 Vue-cli 3 的项目如何做兼容性配置的步骤：</p> 
<h4>1.在项目根目录下新建 .babelrc 文件，跟 package.json 同级。 将以下代码复制到 .babelrc 文件中</h4> 
<pre class="has"><code class="language-javascript">{
 "presets": ["@babel/preset-env"],
 "plugins": [
  "@babel/plugin-transform-runtime"
 ]
}</code></pre> 
<h4>2.<strong>修改 babel.config.js</strong></h4> 
<p>将以下代码添加到 babel.config.js 文件中。</p> 
<pre class="has"><code class="language-javascript">const plugins = [];
if (['production', 'prod'].includes(process.env.NODE_ENV)) {
 plugins.push("transform-remove-console")
}
 
module.exports = {
 presets: [
  [
   "@vue/app",
   {
    "useBuiltIns": "entry",
    polyfills: [
     'es6.promise',
     'es6.symbol'
    ]
   }
  ]
 ],
 plugins: plugins
};</code></pre> 
<h4><strong>3. 修改 vue.config.js</strong></h4> 
<p>用 vue-cli 3 新建项目时，默认是没有这个配置文件的 ，需要在项目根目录下新建一个 vue.config.js </p> 
<p>将以下代码添加到vue.config.js中：</p> 
<pre class="has"><code class="language-javascript">module.exports = {
 transpileDependencies: ['webpack-dev-server/client'],
 chainWebpack: config =&gt; {
  config.entry.app = ['babel-polyfill', './src/main.js'];
 }
}</code></pre> 
<h4> 4.<strong>main.js 文件</strong></h4> 
<p>在main.js 中添加如下代码：</p> 
<pre class="has"><code class="language-javascript">import '@babel/polyfill';
import Es6Promise from 'es6-promise'
Es6Promise.polyfill()</code></pre> 
<h4> <strong>5. 安装新引入的依赖</strong></h4> 
<pre class="has"><code>npm install --save-dev @babel/core @babel/plugin-transform-runtime @babel/preset-env es6-promise babel-polyfill babel-plugin-transform-remove-console
</code></pre> 
<pre class="has"><code>npm install --save @babel/polyfill</code></pre> 
<p> 完成以上配置，就可以解决移动端低版本兼容问题，</p> 
<p>参考文章来源：</p> 
<p><a href="https://www.jb51.net/article/159660.htm" rel="nofollow">https://www.jb51.net/article/159660.htm</a></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dad86d681c5bcedd347eff9f195f1adc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring Boot基于注解的Redis缓存实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/10c5737d8591f71eec03ed233f25f0e1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot基于API的Redis缓存实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>