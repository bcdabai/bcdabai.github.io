<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Prometheus（普罗米修斯）——适合k8s和docker的监控系统 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Prometheus（普罗米修斯）——适合k8s和docker的监控系统" />
<meta property="og:description" content="转载自：https://www.cnblogs.com/zgq123456/articles/10847262.html
Prometheus（普罗米修斯）——适合k8s和docker的监控系统 Prometheus（普罗米修斯）是一套开源的监控&amp;报警&amp;时间序列数据库的组合.由SoundCloud公司开发。
Prometheus基本原理是通过HTTP协议周期性抓取被监控组件的状态，这样做的好处是任意组件只要提供HTTP接口就可以接入监控系统，不需要任何SDK或者其他的集成过程。这样做非常适合虚拟化环境比如VM或者Docker 。
Prometheus应该是为数不多的适合Docker、Mesos、Kubernetes环境的监控系统之一。近几年随着k8s的流行，prometheus成为了一个越来越流行的监控工具。
而且Prometheus是开源的，真是我等伸手党的福音。
架构
Prometheus可以做什么
在业务层用作埋点系统 Prometheus支持各个主流开发语言（Go，java，python，ruby官方提供客户端，其他语言有第三方开源客户端）。我们可以通过客户端方面的对核心业务进行埋点。如下单流程、添加购物车流程。在应用层用作应用监控系统 一些主流应用可以通过官方或第三方的导出器，来对这些应用做核心指标的收集。如redis,mysql。在系统层用作系统监控 除了常用软件， prometheus也有相关系统层和网络层exporter,用以监控服务器或网络。集成其他的监控 prometheus还可以通过各种exporte，集成其他的监控系统，收集监控数据，如AWS CloudWatch,JMX，Pingdom等等。不要用Prometheus做什么
prometheus也提供了Grok exporter等工具可以用来读取日志，但是prometheus是监控系统，不是日志系统。应用的日志还是应该走ELK等工具栈。
grafana
一般配合grafana做前端展示
Kubernetes使用prometheus&#43;grafana做一个简单的监控方案 本文介绍在k8s集群中使用node-exporter、prometheus、grafana对集群进行监控。
其实现原理有点类似ELK、EFK组合。node-exporter组件负责收集节点上的metrics监控数据，并将数据推送给prometheus, prometheus负责存储这些数据，grafana将这些数据通过网页以图形的形式展现给用户。
在开始之前有必要了解下Prometheus是什么?
Prometheus （中文名：普罗米修斯）是由 SoundCloud 开发的开源监控报警系统和时序列数据库(TSDB).自2012年起,许多公司及组织已经采用 Prometheus,并且该项目有着非常活跃的开发者和用户社区.现在已经成为一个独立的开源项目。Prometheus 在2016加入 CNCF ( Cloud Native Computing Foundation ), 作为在 kubernetes 之后的第二个由基金会主持的项目。 Prometheus 的实现参考了Google内部的监控实现，与源自Google的Kubernetes结合起来非常合适。另外相比influxdb的方案，性能更加突出，而且还内置了报警功能。它针对大规模的集群环境设计了拉取式的数据采集方式，只需要在应用里面实现一个metrics接口，然后把这个接口告诉Prometheus就可以完成数据采集了，下图为prometheus的架构图。
Prometheus的特点：
1、多维数据模型（时序列数据由metric名和一组key/value组成）
2、在多维度上灵活的查询语言(PromQl)
3、不依赖分布式存储，单主节点工作.
4、通过基于HTTP的pull方式采集时序数据
5、可以通过中间网关进行时序列数据推送(pushing)
6、目标服务器可以通过发现服务或者静态配置实现
7、多种可视化和仪表盘支持
prometheus 相关组件，Prometheus生态系统由多个组件组成，其中许多是可选的：
1、Prometheus 主服务,用来抓取和存储时序数据
2、client library 用来构造应用或 exporter 代码 (go,java,python,ruby)
3、push 网关可用来支持短连接任务
4、可视化的dashboard (两种选择,promdash 和 grafana.目前主流选择是 grafana.)
4、一些特殊需求的数据出口(用于HAProxy, StatsD, Graphite等服务)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e960d5d4c8d7a00f160aa1d40cdaf4ab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-03T23:10:23+08:00" />
<meta property="article:modified_time" content="2021-08-03T23:10:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Prometheus（普罗米修斯）——适合k8s和docker的监控系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>转载自：<a href="https://www.cnblogs.com/zgq123456/articles/10847262.html" rel="nofollow">https://www.cnblogs.com/zgq123456/articles/10847262.html</a></p> 
<h2><a href="https://www.cnblogs.com/zgq123456/articles/10847262.html" rel="nofollow" id="cb_post_title_url">Prometheus（普罗米修斯）——适合k8s和docker的监控系统 </a></h2> 
<p>Prometheus（普罗米修斯）是一套开源的监控&amp;报警&amp;时间序列数据库的组合.由SoundCloud公司开发。</p> 
<p></p> 
<p>Prometheus基本原理是通过HTTP协议周期性抓取被监控组件的状态，这样做的好处是任意组件只要提供HTTP接口就可以接入监控系统，不需要任何SDK或者其他的集成过程。这样做非常适合虚拟化环境比如VM或者Docker 。</p> 
<p></p> 
<p>Prometheus应该是为数不多的适合Docker、Mesos、Kubernetes环境的监控系统之一。近几年随着k8s的流行，prometheus成为了一个越来越流行的监控工具。</p> 
<p></p> 
<p>而且Prometheus是开源的，真是我等伸手党的福音。</p> 
<p></p> 
<p>架构</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/79/b8/ZLgxzwPq_o.png"></p> 
<p></p> 
<p></p> 
<p>Prometheus可以做什么</p> 
<p></p> 
<p>在业务层用作埋点系统 Prometheus支持各个主流开发语言（Go，java，python，ruby官方提供客户端，其他语言有第三方开源客户端）。我们可以通过客户端方面的对核心业务进行埋点。如下单流程、添加购物车流程。在应用层用作应用监控系统 一些主流应用可以通过官方或第三方的导出器，来对这些应用做核心指标的收集。如redis,mysql。在系统层用作系统监控 除了常用软件， prometheus也有相关系统层和网络层exporter,用以监控服务器或网络。集成其他的监控 prometheus还可以通过各种exporte，集成其他的监控系统，收集监控数据，如AWS CloudWatch,JMX，Pingdom等等。不要用Prometheus做什么</p> 
<p></p> 
<p>prometheus也提供了Grok exporter等工具可以用来读取日志，但是prometheus是监控系统，不是日志系统。应用的日志还是应该走ELK等工具栈。</p> 
<p></p> 
<p>grafana</p> 
<p></p> 
<p>一般配合grafana做前端展示</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3b/44/CG523Iih_o.png"></p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0f/af/GOyaR88K_o.png"></p> 
<p></p> 
<h2><a href="https://www.cnblogs.com/terrycy/p/10058944.html" rel="nofollow">Kubernetes使用prometheus+grafana做一个简单的监控方案</a></h2> 
<p>本文介绍在k8s集群中使用node-exporter、prometheus、grafana对集群进行监控。<br> 其实现原理有点类似ELK、EFK组合。node-exporter组件负责收集节点上的metrics监控数据，并将数据推送给prometheus, prometheus负责存储这些数据，grafana将这些数据通过网页以图形的形式展现给用户。</p> 
<p>在开始之前有必要了解下Prometheus是什么?<br> Prometheus （中文名：普罗米修斯）是由 SoundCloud 开发的开源监控报警系统和时序列数据库(TSDB).自2012年起,许多公司及组织已经采用 Prometheus,并且该项目有着非常活跃的开发者和用户社区.现在已经成为一个独立的开源项目。Prometheus 在2016加入 CNCF ( Cloud Native Computing Foundation ), 作为在 kubernetes 之后的第二个由基金会主持的项目。 Prometheus 的实现参考了Google内部的监控实现，与源自Google的Kubernetes结合起来非常合适。另外相比influxdb的方案，性能更加突出，而且还内置了报警功能。它针对大规模的集群环境设计了拉取式的数据采集方式，只需要在应用里面实现一个metrics接口，然后把这个接口告诉Prometheus就可以完成数据采集了，下图为prometheus的架构图。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/04/44/PQQMxWd5_o.png"></p> 
<p></p> 
<p>Prometheus的特点：<br> 1、多维数据模型（时序列数据由metric名和一组key/value组成）<br> 2、在多维度上灵活的查询语言(PromQl)<br> 3、不依赖分布式存储，单主节点工作.<br> 4、通过基于HTTP的pull方式采集时序数据<br> 5、可以通过中间网关进行时序列数据推送(pushing)<br> 6、目标服务器可以通过发现服务或者静态配置实现<br> 7、多种可视化和仪表盘支持</p> 
<p>prometheus 相关组件，Prometheus生态系统由多个组件组成，其中许多是可选的：<br> 1、Prometheus 主服务,用来抓取和存储时序数据<br> 2、client library 用来构造应用或 exporter 代码 (go,java,python,ruby)<br> 3、push 网关可用来支持短连接任务<br> 4、可视化的dashboard (两种选择,promdash 和 grafana.目前主流选择是 grafana.)<br> 4、一些特殊需求的数据出口(用于HAProxy, StatsD, Graphite等服务)<br> 5、实验性的报警管理端(alartmanager,单独进行报警汇总,分发,屏蔽等 )</p> 
<p>promethues 的各个组件基本都是用 golang 编写,对编译和部署十分友好.并且没有特殊依赖.基本都是独立工作。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/efd4e94d6992aa3d23eb24d9c14547bf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring Security 中使用Keycloak作为认证授权服务器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bec4b63d58d32612c87a105ab08c615b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">买的美国服务器怎么上传文件,美国服务器部署网站的时候要如何迁移数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>