<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【 攻城略地 】vue3 &#43; video.js播放m3u8视频流格式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【 攻城略地 】vue3 &#43; video.js播放m3u8视频流格式" />
<meta property="og:description" content="video.js video.js是一个通用的在网页上嵌入视频播放器的JS库，video.js自动检测浏览器对HTML5的支持情况，如果不支持HTML5则自动使用Flash播放器。
文档： https://github.com/videojs/video.js
videojs中文文档详解_谢泽的网络日志-CSDN博客_video.js
安装： $ npm install --save video.js videojs-contrib-hls 使用： 1. 基础使用
// VideoComponentA.vue &lt;template&gt; // id：用于获取video对象 // class：video-js vjs-default-skin为video内置的样式名称，样式可根据具体项目进行调整 // autoplay：自动播放 // muted：设置静音。在最新版的Chrome浏览器（以及所有以Chromium为内核的浏览器）中，已不再允许自动播放音频和视频，设置静音是一种hack手段，参考：https://www.mzwu.com/article.asp?id=4411 // preload：提前加载 &lt;video id=&#34;my-video&#34; class=&#34;video-js vjs-default-skin&#34; autoplay muted preload=&#34;auto&#34;&gt; // src：视频流地址 // type：视频类型 &lt;source src=&#34;http://1252093142.vod2.myqcloud.com/4704461fvodcq1252093142/f865d8a05285890787810776469/playlist.f3.m3u8&#34; type=&#34;application/x-mpegURL&#34; style=&#39;width: 100%;height: 100%&#39;&gt; &lt;/video&gt; &lt;/template&gt; &lt;script lang=&#34;ts&#34;&gt; // 引入videojs以及样式文件 import videojs from &#39;video.js/dist/video.min&#39; import &#39;video.js/dist/video-js.min.css&#39; import { defineComponent, onMounted } from &#34;vue&#34; setup() { // 在onMounted阶段进行初始化 onMounted(() =&gt; { initVideoSourc() }) function initVideoSourc() { videojs(&#39;my-video&#39;, { bigPlayButton: false, textTrackDisplay: false, posterImage: false, errorDisplay: false, controlBar: true, // ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/94dd0c8d0ec6683729d929277d783f34/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-24T10:10:31+08:00" />
<meta property="article:modified_time" content="2022-02-24T10:10:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【 攻城略地 】vue3 &#43; video.js播放m3u8视频流格式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>video.js</h3> 
<p>video.js是一个通用的在网页上嵌入视频播放器的JS库，video.js自动检测浏览器对HTML5的支持情况，如果不支持HTML5则自动使用Flash播放器。</p> 
<p></p> 
<h4>文档：</h4> 
<p><a href="https://github.com/videojs/video.js" title="https://github.com/videojs/video.js">https://github.com/videojs/video.js</a></p> 
<p><a href="https://blog.csdn.net/a0405221/article/details/80923090" title="videojs中文文档详解_谢泽的网络日志-CSDN博客_video.js">videojs中文文档详解_谢泽的网络日志-CSDN博客_video.js</a></p> 
<p></p> 
<h4>安装：</h4> 
<pre><code class="language-bash">$ npm install --save video.js videojs-contrib-hls</code></pre> 
<p></p> 
<h4>使用：</h4> 
<p>1. 基础使用</p> 
<pre><code class="language-javascript">// VideoComponentA.vue
&lt;template&gt;
  // id：用于获取video对象
  // class：video-js vjs-default-skin为video内置的样式名称，样式可根据具体项目进行调整
  // autoplay：自动播放
  // muted：设置静音。在最新版的Chrome浏览器（以及所有以Chromium为内核的浏览器）中，已不再允许自动播放音频和视频，设置静音是一种hack手段，参考：https://www.mzwu.com/article.asp?id=4411
  // preload：提前加载
  &lt;video id="my-video" class="video-js vjs-default-skin" autoplay muted preload="auto"&gt;
    // src：视频流地址
    // type：视频类型
    &lt;source src="http://1252093142.vod2.myqcloud.com/4704461fvodcq1252093142/f865d8a05285890787810776469/playlist.f3.m3u8" type="application/x-mpegURL" style='width: 100%;height: 100%'&gt;
  &lt;/video&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
// 引入videojs以及样式文件
import videojs from 'video.js/dist/video.min'
import 'video.js/dist/video-js.min.css'
import { defineComponent, onMounted } from "vue"

setup() {
    // 在onMounted阶段进行初始化
    onMounted(() =&gt; {
      initVideoSourc()
    })

    function initVideoSourc() {
      videojs('my-video', {
        bigPlayButton: false,
        textTrackDisplay: false,
        posterImage: false,
        errorDisplay: false,
        controlBar: true,
        // ...其他配置参数
      }, function () {
        this.play()
      })
    }
}
&lt;/script&gt;</code></pre> 
<p></p> 
<p>2. 多视频、监听视频地址变化综合使用</p> 
<pre><code class="language-javascript">// VideoComponentB.vue
&lt;template&gt;
  &lt;video v-if="src" :id="videoId" class="video-js vjs-default-skin my-video" autoplay muted preload="auto" style='width: 100%;height: 100%'&gt;
    &lt;source :src="src" type="application/x-mpegURL" style='width: 100%;height: 100%'&gt;
  &lt;/video&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
import videojs from 'video.js/dist/video.min'
import 'video.js/dist/video-js.min.css'
import { defineComponent, watch, onMounted, onBeforeUnmount, computed } from "vue"

export default defineComponent({
  name: 'VideoItem',

  props: {
    // 视频地址
    src: {
      type: String,
      required: true
    },
    // 视频列表中每个视频的索引值
    index: {
      type: Number,
      default: 0
    },
  },

  setup(props) {
    // 监听视频地址变化
    watch(
      () =&gt; props.src,
      (n) =&gt; {
        changeVideoSource(n)
      }
    )

	// 在onMounted阶段进行初始化
    onMounted(() =&gt; {
      initVideo()
    })
    
	// 在onBeforeUnmount阶段释放资源
    onBeforeUnmount(() =&gt; {
      disposeVideo()
    })
	
    // 用于多视频列表区分每个视频的id
    const videoId = computed(() =&gt; {
      return 'my-video' + props.index
    })
    // 初始化视频
    function initVideo() {
      if (!props.src) return

      videojs(videoId.value, {
        bigPlayButton: false,
        textTrackDisplay: false,
        posterImage: false,
        errorDisplay: false,
        controlBar: false
      }, () =&gt; {
        const myPlayer = videojs(videoId.value)
        myPlayer.play()
        myPlayer.on('error', () =&gt; {
          ...
        })
      })
    }
    // 视频地址发生变化时的处理
    function changeVideoSource(src) {
      if (!src) return

      const myPlayer = videojs(videoId.value)
      myPlayer.src([
        {
          type: "application/x-mpegURL",
          src: src
        }
      ])
      myPlayer.play()
    }
    function disposeVideo() {
      const myPlayer = videojs(videoId.value)
      myPlayer.dispose()
    }

    return {
      videoId,
    }
  }
})
&lt;/script&gt;</code></pre> 
<p></p> 
<h3>vue3-video-play</h3> 
<p>vue3版本的视频播放插件，但github上反馈移动端支持性不是很好，作者也没有反馈，所以只作为备用方案。</p> 
<p></p> 
<h4>文档：</h4> 
<p><a href="https://github.com/xdlumia/vue3-video-play" title="https://github.com/xdlumia/vue3-video-play">https://github.com/xdlumia/vue3-video-play</a></p> 
<p></p> 
<h4>使用：</h4> 
<p><a href="https://zhuanlan.zhihu.com/p/405427102" rel="nofollow" title="vue3播放器插件（vue3-video-play）,支持m3u8(hls)视频 - 知乎">vue3播放器插件（vue3-video-play）,支持m3u8(hls)视频 - 知乎</a></p> 
<p><a href="https://blog.csdn.net/weixin_44255044/article/details/122577172" title="vue3中播放视频和m3u8后缀的视频解决办法_一个超爱喝可乐的web前端攻城狮-CSDN博客">vue3中播放视频和m3u8后缀的视频解决办法_一个超爱喝可乐的web前端攻城狮-CSDN博客</a></p> 
<h3></h3> 
<h3>MuiPlayer</h3> 
<p>没用过，作为备用方案。</p> 
<p></p> 
<h4>文档：</h4> 
<p><a href="https://muiplayer.js.org/zh/demo" rel="nofollow" title="https://muiplayer.js.org/zh/demo/">https://muiplayer.js.org/zh/demo/</a></p> 
<p></p> 
<h4>安装：</h4> 
<p><a href="https://muiplayer.js.org/zh/joinUs/#%E5%A2%9E%E5%80%BC%E6%9C%8D%E5%8A%A1" rel="nofollow" title="插件下载 | MuiPlayer">插件下载 | MuiPlayer</a></p> 
<p></p> 
<h3>总结</h3> 
<p>项目使用的各个包及其版本号：</p> 
<pre><code class="language-javascript">// package.json
"dependencies": {
  "video.js": "^7.17.0",
  "videojs-contrib-hls": "^5.15.0",
  "vue": "^3.2.25",
  …
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6e0d8d89b45f1defc70d35127e90e608/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java爬虫爬取京东商城</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb84b929a47f27b0e61c332c4c0f5bc5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【最小Demo】Java RMI入门 使用Registry、Naming、Zookeeper（注册中心）实现rmi</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>