<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>listview mysql 安卓_android ListView详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="listview mysql 安卓_android ListView详解" />
<meta property="og:description" content="在android开发中ListView是比较常用的组件，它以列表的形式展示具体内容，并且能够根据数据的长度自适应显示。抽空把对ListView的使用做了整理，并写了个小例子，如下图。
列表的显示需要三个元素：
1．ListVeiw 用来展示列表的View。
2．适配器 用来把数据映射到ListView上的中介。
3．数据 具体的将被映射的字符串，图片，或者基本组件。
根据列表的适配器类型，列表分为三种，ArrayAdapter，SimpleAdapter和SimpleCursorAdapter
其中以ArrayAdapter最为简单，只能展示一行字。SimpleAdapter有最好的扩充性，可以自定义出各种效果。SimpleCursorAdapter可以认为是SimpleAdapter对数据库的简单结合，可以方面的把数据库的内容以列表的形式展示出来。
我们从最简单的ListView开始：
public class MyListView extends Activity {
private ListView listView;
//private List data = new ArrayList();
@Override
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
listView = new ListView(this);
listView.setAdapter(new ArrayAdapter(this, android.R.layout.simple_expandable_list_item_1,getData()));
setContentView(listView);
}
private List getData(){
List data = new ArrayList();
data.add(&#34;测试数据1&#34;);
data.add(&#34;测试数据2&#34;);
data.add(&#34;测试数据3&#34;);
data.add(&#34;测试数据4&#34;);
return data;
}
}
上面代码使用了ArrayAdapter(Context context, int textViewResourceId, List objects)来装配数据，要装配这些数据就需要一个连接ListView视图对象和数组数据的适配器来两者的适配工作，ArrayAdapter的构造需要三个参数，依次为this,布局文件(注意这里的布局文件描述的是列表的每一行的布局，android.R.layout.simple_list_item_1是系统定义好的布局文件只显示一行文字，数据源(一个List集合)。同时用setAdapter()完成适配的最后工作。运行后的现实结构如下图：
SimpleCursorAdapter
sdk的解释是这样的：An easy adapter to map columns from a cursor to TextViews or ImageViews defined in an XML file." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/923cc14269514538d78fcb0265e2be19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-27T06:35:03+08:00" />
<meta property="article:modified_time" content="2021-01-27T06:35:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">listview mysql 安卓_android ListView详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>在android开发中ListView是比较常用的组件，它以列表的形式展示具体内容，并且能够根据数据的长度自适应显示。抽空把对ListView的使用做了整理，并写了个小例子，如下图。</p> 
 <p align="center"><img src="https://images2.imgbox.com/2d/44/u2iAHP2u_o.png" alt="696cfcf8c2546bc57d3e8c932d39a05d.png"></p> 
 <p>列表的显示需要三个元素：</p> 
 <p>1．ListVeiw 用来展示列表的View。</p> 
 <p>2．适配器 用来把数据映射到ListView上的中介。</p> 
 <p>3．数据 具体的将被映射的字符串，图片，或者基本组件。</p> 
 <p>根据列表的适配器类型，列表分为三种，ArrayAdapter，SimpleAdapter和SimpleCursorAdapter</p> 
 <p>其中以ArrayAdapter最为简单，只能展示一行字。SimpleAdapter有最好的扩充性，可以自定义出各种效果。SimpleCursorAdapter可以认为是SimpleAdapter对数据库的简单结合，可以方面的把数据库的内容以列表的形式展示出来。</p> 
 <p>我们从最简单的ListView开始：</p> 
 <p>public class MyListView extends Activity {<!-- --></p> 
 <p>private ListView listView;</p> 
 <p>//private List data = new ArrayList();</p> 
 <p>@Override</p> 
 <p>public void onCreate(Bundle savedInstanceState){<!-- --></p> 
 <p>super.onCreate(savedInstanceState);</p> 
 <p>listView = new ListView(this);</p> 
 <p>listView.setAdapter(new ArrayAdapter(this, android.R.layout.simple_expandable_list_item_1,getData()));</p> 
 <p>setContentView(listView);</p> 
 <p>}</p> 
 <p>private List getData(){<!-- --></p> 
 <p>List data = new ArrayList();</p> 
 <p>data.add("测试数据1");</p> 
 <p>data.add("测试数据2");</p> 
 <p>data.add("测试数据3");</p> 
 <p>data.add("测试数据4");</p> 
 <p>return data;</p> 
 <p>}</p> 
 <p>}</p> 
 <p>上面代码使用了ArrayAdapter(Context context, int textViewResourceId, List objects)来装配数据，要装配这些数据就需要一个连接ListView视图对象和数组数据的适配器来两者的适配工作，ArrayAdapter的构造需要三个参数，依次为this,布局文件(注意这里的布局文件描述的是列表的每一行的布局，android.R.layout.simple_list_item_1是系统定义好的布局文件只显示一行文字，数据源(一个List集合)。同时用setAdapter()完成适配的最后工作。运行后的现实结构如下图：</p> 
 <p align="center"><img src="https://images2.imgbox.com/66/21/vEKCZ8WS_o.png" alt="52dd3a24d22a42f1952b2d99ab6f4dc7.png"></p> 
 <p>SimpleCursorAdapter</p> 
 <p>sdk的解释是这样的：An easy adapter to map columns from a cursor to TextViews or ImageViews defined in an XML file. You can specify which columns you want, which views you want to display the columns, and the XML file that defines the appearance of these views。简单的说就是方便把从游标得到的数据进行列表显示，并可以把指定的列映射到对应的TextView中。</p> 
 <p>下面的程序是从电话簿中把联系人显示到类表中。先在通讯录中添加一个联系人作为数据库的数据。然后获得一个指向数据库的Cursor并且定义一个布局文件(当然也可以使用系统自带的)。</p> 
 <p>public class MyListView2 extends Activity {<!-- --></p> 
 <p>private ListView listView;</p> 
 <p>//private List data = new ArrayList();</p> 
 <p>@Override</p> 
 <p>public void onCreate(Bundle savedInstanceState){<!-- --></p> 
 <p>super.onCreate(savedInstanceState);</p> 
 <p>listView = new ListView(this);</p> 
 <p>Cursor cursor = getContentResolver().query(People.CONTENT_URI, null, null, null, null);</p> 
 <p>startManagingCursor(cursor);</p> 
 <p>ListAdapter listAdapter = new SimpleCursorAdapter(this,</p> 
 <p>android.R.layout.simple_expandable_list_item_1,</p> 
 <p>cursor,</p> 
 <p>new String[]{People.NAME},</p> 
 <p>new int[]{android.R.id.text1});</p> 
 <p>listView.setAdapter(listAdapter);</p> 
 <p>setContentView(listView);</p> 
 <p>}</p> 
 <p>}</p> 
 <p>Cursor cursor = getContentResolver().query(People.CONTENT_URI, null, null, null, null);先获得一个指向系统通讯录数据库的Cursor对象获得数据来源。</p> 
 <p>startManagingCursor(cursor);我们将获得的Cursor对象交由Activity管理，这样Cursor的生命周期和Activity便能够自动同步，省去自己手动管理Cursor。</p> 
 <p>SimpleCursorAdapter 构造函数前面3个参数和ArrayAdapter是一样的，最后两个参数：一个包含数据库的列的String型数组，一个包含布局文件中对应组件id的int型数组。其作用是自动的将String型数组所表示的每一列数据映射到布局文件对应id的组件上。上面的代码，将NAME列的数据一次映射到布局文件的id为text1的组件上。</p> 
 <p>注意：需要在AndroidManifest.xml中如权限：</p> 
 <p>运行后效果如下图：</p> 
 <p align="center"><img src="https://images2.imgbox.com/49/9c/a56iuJHj_o.png" alt="e4e865052305e5add9c37387ef2601b1.png"></p> 
 <p>SimpleAdapter</p> 
 <p>simpleAdapter的扩展性最好，可以定义各种各样的布局出来，可以放上ImageView(图片)，还可以放上Button(按钮)，CheckBox(复选框)等等。下面的代码都直接继承了ListActivity，ListActivity和普通的Activity没有太大的差别，不同就是对显示ListView做了许多优化，方面显示而已。</p> 
 <p>下面的程序是实现一个带有图片的类表。</p> 
 <p>首先需要定义好一个用来显示每一个列内容的xml</p> 
 <p></p> 
 <p>android:orientation="horizontal" android:layout_width="fill_parent"</p> 
 <p>android:layout_height="fill_parent"&gt;</p> 
 <p></p> 
 <p>android:layout_width="wrap_content"</p> 
 <p>android:layout_height="wrap_content"</p> 
 <p>android:layout_margin="5px"/&gt;</p> 
 <p></p> 
 <p>android:layout_width="wrap_content"</p> 
 <p>android:layout_height="wrap_content"&gt;</p> 
 <p></p> 
 <p>android:layout_width="wrap_content"</p> 
 <p>android:layout_height="wrap_content"</p> 
 <p>android:textColor="#FFFFFFFF"</p> 
 <p>android:textSize="22px" /&gt;</p> 
 <p></p> 
 <p>android:layout_width="wrap_content"</p> 
 <p>android:layout_height="wrap_content"</p> 
 <p>android:textColor="#FFFFFFFF"</p> 
 <p>android:textSize="13px" /&gt;</p> 
 <p>下面是实现代码：</p> 
 <p>public class MyListView3 extends ListActivity {<!-- --></p> 
 <p>// private List data = new ArrayList();</p> 
 <p>@Override</p> 
 <p>public void onCreate(Bundle savedInstanceState) {<!-- --></p> 
 <p>super.onCreate(savedInstanceState);</p> 
 <p>SimpleAdapter adapter = new SimpleAdapter(this,getData(),R.layout.vlist,</p> 
 <p>new String[]{"title","info","img"},</p> 
 <p>new int[]{R.id.title,R.id.info,R.id.img});</p> 
 <p>setListAdapter(adapter);</p> 
 <p>}</p> 
 <p>private List&gt; getData() {<!-- --></p> 
 <p>List&gt; list = new ArrayList&gt;();</p> 
 <p>Map map = new HashMap();</p> 
 <p>map.put("title", "G1");</p> 
 <p>map.put("info", "google 1");</p> 
 <p>map.put("img", R.drawable.i1);</p> 
 <p>list.add(map);</p> 
 <p>map = new HashMap();</p> 
 <p>map.put("title", "G2");</p> 
 <p>map.put("info", "google 2");</p> 
 <p>map.put("img", R.drawable.i2);</p> 
 <p>list.add(map);</p> 
 <p>map = new HashMap();</p> 
 <p>map.put("title", "G3");</p> 
 <p>map.put("info", "google 3");</p> 
 <p>map.put("img", R.drawable.i3);</p> 
 <p>list.add(map);</p> 
 <p>return list;</p> 
 <p>}</p> 
 <p>}</p> 
 <p>使用simpleAdapter的数据用一般都是HashMap构成的List，list的每一节对应ListView的每一行。HashMap的每个键值数据映射到布局文件中对应id的组件上。因为系统没有对应的布局文件可用，我们可以自己定义一个布局vlist.xml。下面做适配，new一个SimpleAdapter参数一次是：this，布局文件(vlist.xml)，HashMap的 title 和 info，img。布局文件的组件id，title，info，img。布局文件的各组件分别映射到HashMap的各元素上，完成适配。</p> 
 <p>运行效果如下图：</p> 
 <p align="center"><img src="https://images2.imgbox.com/77/35/lFOsoYP9_o.png" alt="676baefa6b2bd4e7b45e8a2f632b754a.png"></p> 
 <p>有按钮的ListView</p> 
 <p>但是有时候，列表不光会用来做显示用，我们同样可以在在上面添加按钮。添加按钮首先要写一个有按钮的xml文件，然后自然会想到用上面的方法定义一个适配器，然后将数据映射到布局文件上。但是事实并非这样，因为按钮是无法映射的，即使你成功的用布局文件显示出了按钮也无法添加按钮的响应，这时就要研究一下ListView是如何现实的了，而且必须要重写一个类继承BaseAdapter。下面的示例将显示一个按钮和一个图片，两行字如果单击按钮将删除此按钮的所在行。并告诉你ListView究竟是如何工作的。效果如下：</p> 
 <p align="center"><img src="https://images2.imgbox.com/de/38/IEtIZLro_o.png" alt="30fad6f2d853993eeb84b50c3e1eb3ac.png"></p> 
 <p>public class MyListView4 extends ListActivity {<!-- --></p> 
 <p>private List&gt; mData;</p> 
 <p>@Override</p> 
 <p>public void onCreate(Bundle savedInstanceState) {<!-- --></p> 
 <p>super.onCreate(savedInstanceState);</p> 
 <p>mData = getData();</p> 
 <p>MyAdapter adapter = new MyAdapter(this);</p> 
 <p>setListAdapter(adapter);</p> 
 <p>}</p> 
 <p>private List&gt; getData() {<!-- --></p> 
 <p>List&gt; list = new ArrayList&gt;();</p> 
 <p>Map map = new HashMap();</p> 
 <p>map.put("title", "G1");</p> 
 <p>map.put("info", "google 1");</p> 
 <p>map.put("img", R.drawable.i1);</p> 
 <p>list.add(map);</p> 
 <p>map = new HashMap();</p> 
 <p>map.put("title", "G2");</p> 
 <p>map.put("info", "google 2");</p> 
 <p>map.put("img", R.drawable.i2);</p> 
 <p>list.add(map);</p> 
 <p>map = new HashMap();</p> 
 <p>map.put("title", "G3");</p> 
 <p>map.put("info", "google 3");</p> 
 <p>map.put("img", R.drawable.i3);</p> 
 <p>list.add(map);</p> 
 <p>return list;</p> 
 <p>}</p> 
 <p>// ListView 中某项被选中后的逻辑</p> 
 <p>@Override</p> 
 <p>protected void onListItemClick(ListView l, View v, int position, long id) {<!-- --></p> 
 <p>Log.v("MyListView4-click", (String)mData.get(position).get("title"));</p> 
 <p>}</p> 
 <p>/**</p> 
 <p>* listview中点击按键弹出对话框</p> 
 <p>*/</p> 
 <p>public void showInfo(){<!-- --></p> 
 <p>new AlertDialog.Builder(this)</p> 
 <p>.setTitle("我的listview")</p> 
 <p>.setMessage("介绍...")</p> 
 <p>.setPositiveButton("确定", new DialogInterface.OnClickListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(DialogInterface dialog, int which) {<!-- --></p> 
 <p>}</p> 
 <p>})</p> 
 <p>.show();</p> 
 <p>}</p> 
 <p>public final class ViewHolder{<!-- --></p> 
 <p>public ImageView img;</p> 
 <p>public TextView title;</p> 
 <p>public TextView info;</p> 
 <p>public Button viewBtn;</p> 
 <p>}</p> 
 <p>public class MyAdapter extends BaseAdapter{<!-- --></p> 
 <p>private LayoutInflater mInflater;</p> 
 <p>public MyAdapter(Context context){<!-- --></p> 
 <p>this.mInflater = LayoutInflater.from(context);</p> 
 <p>}</p> 
 <p>@Override</p> 
 <p>public int getCount() {<!-- --></p> 
 <p>// TODO Auto-generated method stub</p> 
 <p>return mData.size();</p> 
 <p>}</p> 
 <p>@Override</p> 
 <p>public Object getItem(int arg0) {<!-- --></p> 
 <p>// TODO Auto-generated method stub</p> 
 <p>return null;</p> 
 <p>}</p> 
 <p>@Override</p> 
 <p>public long getItemId(int arg0) {<!-- --></p> 
 <p>// TODO Auto-generated method stub</p> 
 <p>return 0;</p> 
 <p>}</p> 
 <p>@Override</p> 
 <p>public View getView(int position, View convertView, ViewGroup parent) {<!-- --></p> 
 <p>ViewHolder holder = null;</p> 
 <p>if (convertView == null) {<!-- --></p> 
 <p>holder=new ViewHolder();</p> 
 <p>convertView = mInflater.inflate(R.layout.vlist2, null);</p> 
 <p>holder.img = (ImageView)convertView.findViewById(R.id.img);</p> 
 <p>holder.title = (TextView)convertView.findViewById(R.id.title);</p> 
 <p>holder.info = (TextView)convertView.findViewById(R.id.info);</p> 
 <p>holder.viewBtn = (Button)convertView.findViewById(R.id.view_btn);</p> 
 <p>convertView.setTag(holder);</p> 
 <p>}else {<!-- --></p> 
 <p>holder = (ViewHolder)convertView.getTag();</p> 
 <p>}</p> 
 <p>holder.img.setBackgroundResource((Integer)mData.get(position).get("img"));</p> 
 <p>holder.title.setText((String)mData.get(position).get("title"));</p> 
 <p>holder.info.setText((String)mData.get(position).get("info"));</p> 
 <p>holder.viewBtn.setOnClickListener(new View.OnClickListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(View v) {<!-- --></p> 
 <p>showInfo();</p> 
 <p>}</p> 
 <p>});</p> 
 <p>return convertView;</p> 
 <p>}</p> 
 <p>}</p> 
 <p>}</p> 
 <p>下面将对上述代码，做详细的解释，listView在开始绘制的时候，系统首先调用getCount()函数，根据他的返回值得到listView的长度(这也是为什么在开始的第一张图特别的标出列表长度)，然后根据这个长度，调用getView()逐一绘制每一行。如果你的getCount()返回值是0的话，列表将不显示同样return 1，就只显示一行。</p> 
 <p>系统显示列表时，首先实例化一个适配器(这里将实例化自定义的适配器)。当手动完成适配时，必须手动映射数据，这需要重写getView()方法。系统在绘制列表的每一行的时候将调用此方法。getView()有三个参数，position表示将显示的是第几行，covertView是从布局文件中inflate来的布局。我们用LayoutInflater的方法将定义好的vlist2.xml文件提取成View实例用来显示。然后将xml文件中的各个组件实例化(简单的findViewById()方法)。这样便可以将数据对应到各个组件上了。但是按钮为了响应点击事件，需要为它添加点击监听器，这样就能捕获点击事件。至此一个自定义的listView就完成了，现在让我们回过头从新审视这个过程。系统要绘制ListView了，他首先获得要绘制的这个列表的长度，然后开始绘制第一行，怎么绘制呢？调用getView()函数。在这个函数里面首先获得一个View(实际上是一个ViewGroup)，然后再实例并设置各个组件，显示之。好了，绘制完这一行了。那 再绘制下一行，直到绘完为止。在实际的运行过程中会发现listView的每一行没有焦点了，这是因为Button抢夺了listView的焦点，只要布局文件中将Button设置为没有焦点就OK了。</p> 
 <p>运行效果如下图：</p> 
 <p align="center"><img src="https://images2.imgbox.com/22/60/OlEr3xDn_o.png" alt="fc9d31912fe336b4275bb469390e9bd5.png"></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/28791a964304958a2cd5bbc40b712848/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">lisp怎么改成vlx_如何用CAD自带的VLisp修改Lisp文件并且生成vlx文件？？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/55e0e7c2f4197903ddc1f0f2e4f79364/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python 获取动漫番剧 -XXOO</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>