<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java.lang.IllegalStateException异常产生的原因及解决办法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java.lang.IllegalStateException异常产生的原因及解决办法" />
<meta property="og:description" content="问题描述： 错误类型大致为以下几种：
java.lang.IllegalStateException：Cannot forward a response that is already committed IllegalStateException：response already commited IllegalStateException：getOutputStream() has already been called for this request …………
错误原因：
该异常表示，当前对客户端的响应已经结束，不能在响应已经结束（或说消亡）后再向
客户端（实际上是缓冲区）输出任何内容。
具体分析：
首先解释下flush()，我们知道在使用读写流的时候数据先被读入内存这个缓冲区中，
然后再写入文件，但是当数据读完时不代表数据已经写入文件完毕，因为可能还有
一部分仍未写入文件而留在内存中，这时调用flush()方法就会把缓冲区的数据强行
清空输出，因此flush()的作用就是保证缓存清空输出。
response是服务端对客户端请求的一个响应，其中封装了响应头、状态码、内容等，
服务端在把response提交到客户端之前，会向缓冲区内写入响应头和状态码，然后
将所有内容flush。这就标志着该次响应已经committed(提交)。对于当前页面中
已经committed(提交)的response，就不能再使用这个response向缓冲区写任何东西
（注：同一个页面中的response.XXX()是同一个response的不同方法，只要其中一个
已经导致了committed，那么其它类似方式的调用都会导致 IllegalStateException异常）。
【注意】能够导致响应已经committed的操作包括：forward, redirect, flushBuffer。
JDK API：
①
flushBuffer
public void flushBuffer()throws IOException Forces any content in the buffer to be written to the client. A call to this method automatically commits the response, meaning the status code and headers will be written." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d4169699897b08cf81677245e8b86e9b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-02-27T10:35:48+08:00" />
<meta property="article:modified_time" content="2014-02-27T10:35:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java.lang.IllegalStateException异常产生的原因及解决办法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <strong style=""><span style="color:#ff0000; line-height:28px">问题描述：</span></strong> 
<span style=""></span> 
<div align="left" style=""> 
 <div style="line-height:28px; border:2px dashed rgb(206,233,254); background-color:rgb(204,232,207); padding-left:15px; width:633px; height:140px; margin-left:90px"> 
  <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="color:#000000; line-height:28px">错误类型大致为以下几种：</span></p> 
  <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="color:#000000; line-height:28px">java.lang.IllegalStateException：Cannot   forward   a   response   that   is   already   committed <br style="line-height:28px"> IllegalStateException：response already commited <br style="line-height:28px"> IllegalStateException：getOutputStream() has already been called for this request<br style="line-height:28px"> <strong style="line-height:28px">…………</strong></span></p> 
 </div> 
</div> 
<div align="left" style="">
    
</div> 
<p style=""><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">错误原因：</span></strong></p> 
<p style="">                       <strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">该异常表示，当前对客户端的响应已经结束，不能在响应已经结束（或说消亡）后再向</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                       客户端（实际上是缓冲区）输出任何内容。</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">具体分析：</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">                       </span><span style="color:#ff6600; line-height:28px"> 首先解释下flush()，我们知道在使用读写流的时候数据先被读入内存这个缓冲区中，</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                         然后再写入文件，但是当数据读完时不代表数据已经写入文件完毕，因为可能还有</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                         一部分仍未写入文件而留在内存中，这时调用flush()方法就会把缓冲区的数据强行</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                         清空输出，因此flush()的作用就是保证缓存清空输出。</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">                        </span><span style="color:#ffcc00; line-height:28px">response是服务端对客户端请求的一个响应，其中封装了响应头、状态码、内容等，</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px">                        服务端在把response提交到客户端之前，会向缓冲区内写入响应头和状态码，然后</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px">                        将所有内容flush。这就标志着该次响应已经committed(提交)。对于当前页面中</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px">                        已经committed(提交)的response，就不能再使用这个response向缓冲区写任何东西</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px">                     （注：同一个页面中的response<span style="font-size:18px; line-height:31.5px">.</span>XXX()是同一个response的不同方法，只要其中一个</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px">                        已经导致了committed，那么其它类似方式的调用都会导致 IllegalStateException异常）。</span></strong></p> 
<p style=""><span style="color:#ffcc00; line-height:28px"><strong style="line-height:28px"><span style="color:#ff00ff; line-height:28px">【注意】</span></strong></span><span style="color:#ff00ff; line-height:28px">能够导致响应已经committed的操作包括：<strong style="line-height:28px">forward, redirect, flushBuffer</strong>。</span></p> 
<p style=""><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">JDK API：</span></strong></p> 
<p style=""><span style="color:#ffcc00; line-height:28px"><strong style="line-height:28px">         </strong></span><span style="color:#ff6600; line-height:28px"><strong style="line-height:28px">①</strong></span></p> 
<div align="center" style=""> 
 <span style="color:#ff6600; line-height:28px"></span> 
 <div style="line-height:28px; border:1px dashed rgb(206,233,254); background-color:rgb(204,232,207); padding-left:10px; width:706px; height:163px"> 
  <div align="left" style="line-height:28px"> 
   <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="font-size:14px; color:#000000; line-height:28px"><strong style="line-height:28px">flushBuffer</strong></span></p> 
   <pre style="line-height:28px; white-space:pre-wrap"><span style="color:#000000; line-height:28px"><strong style="line-height:28px">        public void <span style="font-size:14px; line-height:22.75px">flushBuffer</span>()throws </strong></span><a target="_blank" title="class or interface in java.io" rel="nofollow noopener noreferrer" href="http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html" style="line-height:28px; text-decoration:none; color:rgb(160,126,80)"><strong style="line-height:28px">IOException</strong></a></pre> 
   <dl style="line-height:28px"> 
    <dd style="line-height:28px"> 
     <span style="font-size:12px; color:#000000; line-height:22.75px"><strong style="line-height:22.75px">Forces any content in the buffer to be written to the client. A call to this method automatically commits the response, meaning the status code and headers will be written. </strong></span> 
     <span style="color:#000000; line-height:28px"><strong style="line-height:28px"> </strong></span> 
    </dd> 
   </dl> 
  </div> 
 </div> 
</div> 
<span style=""></span> 
<div align="left" style="line-height:28px">
       
 <strong style="line-height:28px">       ②</strong> 
</div> 
<div align="left" style="line-height:28px"> 
 <strong style="line-height:28px">                </strong> 
</div> 
<div align="center" style="line-height:28px"> 
 <div style="line-height:28px; border:1px dashed rgb(206,233,254); background-color:rgb(204,232,207); padding-left:10px; width:706px; height:258px"> 
  <div align="left" style="line-height:28px"> 
   <span style="font-size:14px; color:#000000; line-height:28px"><strong style="line-height:28px"></strong></span> 
   <h4 style="line-height:32.7599983215332px; margin:0px; padding:0px">sendRedirect</h4> 
   <pre style="line-height:22.75px; white-space:pre-wrap">         public void <strong style="line-height:22.75px">sendRedirect</strong>(<a target="_blank" title="class or interface in java.lang" rel="nofollow noopener noreferrer" href="http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html" style="line-height:22.75px; text-decoration:none; color:rgb(160,126,80)">String</a> location)throws <a target="_blank" title="class or interface in java.io" rel="nofollow noopener noreferrer" href="http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html" style="line-height:22.75px; text-decoration:none; color:rgb(160,126,80)">IOException</a></pre> 
   <dl style="line-height:28px"> 
    <dd style="line-height:28px"> 
     <span style="font-size:12px; line-height:22.75px">Sends a temporary redirect response to the client using the specified redirect location URL. This method can accept relative URLs; the servlet container must convert the relative URL to an absolute URL before sending the response to the client. If the location is relative without a leading '/' the container interprets it as relative to the current request URI. If the location is relative with a leading '/' the container interprets it as relative to the servlet container root.</span> 
     <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="font-size:12px; line-height:22.75px"><strong style="line-height:22.75px">If the response has already been committed, this method throws an IllegalStateException. After using this method, the response should be considered to be committed and should not be written to.</strong><br style="line-height:22.75px"> </span></p> 
    </dd> 
   </dl> 
  </div> 
 </div> 
</div> 
<span style=""></span> 
<span style=""></span> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px">            ③                </p> 
<div align="center" style="line-height:28px"> 
 <div style="line-height:28px; border:1px dashed rgb(206,233,254); background-color:rgb(204,232,207); padding-left:10px; width:706px; height:444px"> 
  <div align="left" style="line-height:28px"> 
   <span style="font-size:14px; color:#000000; line-height:28px"><strong style="line-height:28px"></strong></span> 
   <h4 style="line-height:32.7599983215332px; margin:0px; padding:0px">forward</h4> 
   <pre style="line-height:22.75px; white-space:pre-wrap">public void <strong style="line-height:22.75px">forward</strong>(<a target="_blank" title="interface in javax.servlet" rel="nofollow noopener noreferrer" href="http://hi.baidu.com/j2ee14/javax/servlet/ServletRequest.html" style="line-height:22.75px; text-decoration:none; color:rgb(160,126,80)">ServletRequest</a> request,<a target="_blank" title="interface in javax.servlet" rel="nofollow noopener noreferrer" href="http://hi.baidu.com/j2ee14/javax/servlet/ServletResponse.html" style="line-height:22.75px; text-decoration:none; color:rgb(160,126,80)">ServletResponse</a> response)</pre> 
   <pre style="line-height:22.75px; white-space:pre-wrap">                             throws <a target="_blank" title="class in javax.servlet" rel="nofollow noopener noreferrer" href="http://hi.baidu.com/j2ee14/javax/servlet/ServletException.html" style="line-height:22.75px; text-decoration:none; color:rgb(160,126,80)">ServletException</a>,<a target="_blank" title="class or interface in java.io" rel="nofollow noopener noreferrer" href="http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html" style="line-height:22.75px; text-decoration:none; color:rgb(160,126,80)">IOException</a></pre> 
   <dl style="line-height:28px"> 
    <dd style="line-height:28px"> 
     <span style="font-size:12px; line-height:22.75px">Forwards a request from a servlet to another resource (servlet, JSP file, or HTML file) on the server. This method allows one servlet to do preliminary processing of a request and another resource to generate the response.</span> 
     <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="font-size:12px; line-height:22.75px">For a <span style="font-size:14px; line-height:28px"><code style="line-height:22.75px"><span style="font-family:新宋体; line-height:28px">RequestDispatcher</span></code> </span>obtained via <code style="line-height:21px"><span style="font-family:新宋体; font-size:14px; line-height:28px">getRequestDispatcher()</span></code>, the <span style="font-size:14px; line-height:28px"><code style="line-height:22.75px"><span style="font-family:新宋体; line-height:28px">ServletRequest</span></code></span>object has its path elements and parameters adjusted to match the path of the target resource.</span></p> 
     <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="font-size:12px; line-height:22.75px"><strong style="line-height:22.75px"><code style="line-height:21px"><span style="font-family:新宋体; font-size:14px; line-height:28px">forward</span></code> should be called before the response has been committed to the client (before response body output has been flushed). If the response already has been committed, this method throws an<code style="line-height:21px"><span style="font-family:新宋体; font-size:14px; line-height:28px">IllegalStateException</span></code>. Uncommitted output in the response buffer is automatically cleared before the forward.</strong></span></p> 
     <p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="font-size:12px; line-height:22.75px">The request and response parameters must be either the same objects as were passed to the calling servlet's service method or be subclasses of the </span><a target="_blank" title="class in javax.servlet" rel="nofollow noopener noreferrer" href="http://hi.baidu.com/j2ee14/javax/servlet/ServletRequestWrapper.html" style="line-height:28px; text-decoration:none; color:rgb(160,126,80)"><code style="line-height:22.75px"><span style="font-family:新宋体; font-size:12px; line-height:22.75px">ServletRequestWrapper</span></code></a><span style="font-size:12px; line-height:22.75px"> or</span><a target="_blank" title="class in javax.servlet" rel="nofollow noopener noreferrer" href="http://hi.baidu.com/j2ee14/javax/servlet/ServletResponseWrapper.html" style="line-height:28px; text-decoration:none; color:rgb(160,126,80)"><code style="line-height:22.75px"><span style="font-family:新宋体; font-size:12px; line-height:22.75px">ServletResponseWrapper</span></code></a><span style="font-size:12px; line-height:22.75px"> classes that wrap them.</span><br style="line-height:28px"> </p> 
    </dd> 
   </dl> 
  </div> 
 </div> 
</div> 
<div align="center" style="line-height:28px">
    
</div> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">备    注：</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px">                  <span style="color:#ff00ff; line-height:28px"><strong style="line-height:28px">注</strong>：</span><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">在一次响应commit之前，所有的内容输出都将写入servlet引擎的缓冲区(tomcat或</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                  weblogic的内容空间), </span><span style="color:#ff6600; line-height:28px">而在commit之后，上一次response向缓冲区写入的内容，将清空。</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                  由于servlet在没有设置单线程的情况下</span><span style="color:#ff6600; line-height:28px">(<span style="font-size:12px; line-height:22.75px">使用Single-Threaded Model，servlet实现</span></span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px"><span style="font-size:12px; line-height:22.75px">                  SingleThreadModel接口，jsp使用&lt;%@ page isThreadSafe="false" %&gt;</span>),</span><span style="color:#ff6600; line-height:28px">是多线程的，所以</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                  上面所说的缓冲区，都将是该response所属的线程私有的内存空间。有了这个概念，</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                  将可以分析碰到的关于servlet多线程的很多问题。</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                 </span><span style="color:#99cc00; line-height:28px"> 如果不能确认response是否已经committed. 可以调用response.isCommitted()来判断。</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff6600; line-height:28px">                  导致这个错误最普遍的原因是，jsp有编译错误。</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><strong style="line-height:28px"><span style="color:#ff0000; line-height:28px">常见解决办法：</span></strong></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="color:#ff0000; line-height:28px"><strong style="line-height:28px">                 ①<span style="color:#99cc00; line-height:28px">在response.sendRedirect()方法后加return语句即可</span></strong>，<span style="color:#99cc00; line-height:28px">如下：<br style="line-height:28px"> </span>                       <span style="color:#99cc00; line-height:28px">response.sendRedirect("login.jsp");<br style="line-height:28px">                        return;<br style="line-height:28px"> </span>                 <strong style="line-height:28px">②<span style="color:#99cc00; line-height:28px">检查提交的url是否有误。</span></strong></span></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="color:#ff0000; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">                 <span style="color:#ff0000; line-height:28px">③</span><span style="color:#99cc00; line-height:28px">如果你的页面中用了清缓存代码response.flushbuffer();又用到了response.sendRedirect(url);</span></span></strong></span></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><span style="color:#ff0000; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px">                     你可以把response.flushbuffer();去掉，或者用JS的window.location.href="url";来做转向。</span></span></strong></span></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><font color="#ff0000" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px">            <span style="color:#ff0000; line-height:28px">     ④</span><span style="color:#99cc00; line-height:28px">如果你用了OutputStream，而web容器生成的servlet代码中有out.write(””)，这个和JSP中调用的</span></strong></span></span></font></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><font color="#ff0000" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px">                     response.getOutputStream()冲突。out.write()这个是字符流，而response.getOutputStream()</strong></span></span></span></font></p> 
<p style="line-height:28px; margin:0px 0px 10px; padding:0px"><font color="#ff0000" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px">                    是字节流，你不能在同一个页面中调用多个输出流。无论先调用哪一个，在调用第二个时都会抛出</strong></span></span></span></font></p> 
<p style=""><font color="#ff6600" style="line-height:28px"><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><strong style="line-height:28px">                      IllegalStateException，因为在jsp中，out变量是<font color="#ff0000" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px">通过response.getWriter得到的。</strong></span></span></span></font><span style="color:#99cc00; line-height:28px">在多个使用了</span></strong></font></font></font></font></font></p> 
<p style=""><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">                     outputStream的＜%%＞语句之间</span></strong></span></span></font></font><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">不能有空格及多余的字符。也就是页面中</span></strong></span></span></font></font><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">除了使用了</span></strong></span></span></font></font></p> 
<p style=""><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">                      outputStream</span></strong></span></span></font></font><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">的＜%%＞之外不能有</span></strong></span></span></font></font><font color="#ff0000" style="line-height:28px"><font color="#99cc00" style="line-height:28px"><span style="color:#99cc00; line-height:28px"><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#99cc00; line-height:28px">空格或其它任何字符，在之内的语句可以有空格及回车。</span></strong></span></span></font></font></p> 
<p style=""><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px"><span style="font-size:18px; line-height:31.5px">                 在JSP页面做输出的时候有两种方式.一是通过JspWriter，另一个是通过</span></span></strong></span></p> 
<p style=""><span style="color:#99cc00; line-height:28px"><strong style="line-height:28px"><span style="color:#ffcc00; line-height:28px"><span style="font-size:18px; line-height:31.5px">                 OutputStream,但二者互相排斥.如果并存的话就会报告以上异常.</span>    </span>                 </strong></span></p> 
<p style=""><strong style="line-height:28px"><span style="font-size:14px; color:#ffcc00; line-height:28px">                     在不得不使用OutputStream的时候.我们必须要把JspWriter舍弃掉了。找到</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="font-size:14px; color:#ffcc00; line-height:28px">                     请求异常的页面</span><span style="font-size:14px; color:#ffcc00; line-height:28px">所对应的Servlet..把其中所有使用JspWriter的语句全部去掉.</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="font-size:14px; color:#ffcc00; line-height:28px">                     或者是到你的JSP文件里把</span><span style="font-size:14px; color:#ffcc00; line-height:28px">动态输出的代码注释掉.这里注意换行和空格制表符</span><span style="font-size:14px; color:#ffcc00; line-height:28px">均</span></strong></p> 
<p style=""><strong style="line-height:28px"><span style="font-size:14px; color:#ffcc00; line-height:28px">                     为JspWriter输出.应该一起去掉.保存</span></strong><span style="font-size:14px; color:#ffcc00; line-height:28px"><strong style="line-height:28px">文件重新启动服务器你会发现上述异常</strong></span></p> 
<p style=""><span style="font-size:14px; color:#ffcc00; line-height:28px"><strong style="line-height:28px">                     消失了。</strong></span><span style="color:#ffcc00; line-height:28px"><span style="font-size:14px; line-height:28px"><strong style="line-height:28px">                    </strong></span></span></p> 
<pre style=""><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px">         由于jsp container在处理完成请求后会调用releasePageContet方法释放</strong></span></pre> 
<pre style=""><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px">          所用的PageContext object,并且同时调用</strong></span><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px">getWriter方法,由于getWriter方法</strong></span></pre> 
<pre style=""><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px">          与在jsp页面中使用流相关的getOutputStream方法冲突,所以会造成这种异常,</strong></span></pre> 
<pre style=""><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px">         解决</strong></span><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px">办法是:只需要在jsp页面的最后加上两条语句: <wbr style="line-height:22.75px"></wbr> <wbr style="line-height:22.75px"></wbr> </strong></span></pre> 
<pre style=""><span style="font-size:14px; line-height:22.75px"><strong style="line-height:22.75px"><span style="color:#ffcc99; line-height:22.75px"><em style="line-height:22.75px; font-style:italic">                </em> out.clear(); </span></strong></span></pre> 
<pre style=""><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px"><em style="line-height:22.75px; font-style:italic">                 </em>out=pageContext.pushBody();</strong></span></pre> 
<pre style=""><span style="font-size:14px; color:#ffcc99; line-height:22.75px"><strong style="line-height:22.75px"><em style="line-height:22.75px; font-style:italic">         </em>即可(其中out,pageContext均为jsp内置对象!) 。</strong></span></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5ef1f17fe7120f4c7e50977eef553475/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iframe子页面js调用父页面js函数/父页面调用Iframe子页面中js方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b8e862b10303b8f98021feb2ecdfd952/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Altium Designer 10画PCB图，怎样增大走线和覆铜之间的距离？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>