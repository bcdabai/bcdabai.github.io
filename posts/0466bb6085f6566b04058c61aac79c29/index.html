<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>win10与Ubantu双系统：Linux下开启FTP服务器与创建无线热点（实现文件共享） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="win10与Ubantu双系统：Linux下开启FTP服务器与创建无线热点（实现文件共享）" />
<meta property="og:description" content="之前在博客有一篇文章解决16GB入门级IPAD或IPHONE容量的尴尬，多种扩容方式探讨（无线硬盘/直接访问）
写的是如何在win系统下使用filelizza这个软件搭建FTP服务器，然后建立一个无线局域网，让平板终端连接以后，访问电脑硬盘的文件。
如果是只在win7环境下，一切都很简单，按照上文提供的教程就可以实现。
但是上个月升级了笔记本，用的是华硕S4000UA，i7处理器。Intel对win7 不再更新驱动，找了很久也没有合适的驱动。所以干脆就用win10系统，觉得win10还是非常好用的，除了不够稳定以外，其他都可以接受，况且应用商店还可以听Podcast，各种国外原滋原味的广播，学习英语正好，素材丰富，这个win7是没有的。win8的情况，和win10一样，网卡不稳定，平板连上以后频繁掉线。所以想起来看看是否可以在Linux系统下实现，虽然耗费了一番周折，但结果终究是圆满的。
今天想对前三天的工作做个总结，：
Day one：在win10的环境下安装Linux系统，版本是Ubantu 17.04。Day two：在Ubantu系统下开启FTP服务器，设置访问文件的权限。Day three：在Ubantu系统下创建Android可用的热点，搭建无线局域网。 一、win10下安装Ubantu双系统 这个在网上有许多教程，可以找一篇照着做。我的做法，笔记本是固态&#43;机械双硬盘，机械硬盘是为了增加笔记本容量，后来加上去的，1T的容量。在安装过程中，建议卸载掉。固态硬盘完全是用来给双系统服务的，100G给了win10，70G给了Ubantu，剩下70G留着存些文件。做了一个Linux的U盘启动盘，这里有一个插曲，用大白菜制作启动U盘的时候，忘了还连接着移动硬盘，结果把移动硬盘识别为U盘，格式化了，好在移动硬盘只是备份的数据，损失不大，重新下载即可。把两个系统全部安装在一个磁盘上的考虑也是如此，担心安装系统，不小心把硬盘格式化了。这样就相当于将系统和文件分开了。
安装过程中还有一个问题，选择安装选项的时候，不要选第一个，与win10共存。选最后一个，其他选项，然后自行分区。如果看不到可用的容量，只要删除分区，就变成可用容量了，然后点击左下角下面的&#43;号，开始分区，后面的安装就很简单了。有教程提示，安装完再进win10系统，用easyBCD引导。其实，我安装完以后，直接就是grub引导的界面，可以选择win10还是Ubantu。
二、在Ubantu系统下开启FTP服务器，设置访问文件的权限 这里也参考前面两篇文章：
Ubuntu下搭建FTP服务器图解Ubantu搭建ftp服务器产生错误：550 Failed to change directoryd的解决方法 第一篇文章应该已经解决了FTP的问题，第二篇文章是因为我的机械硬盘访问不了，所以需要更改下权限。
三、在Ubantu系统下创建Android可用的热点，搭建无线局域网 一、网卡选择 不同于windows上，大部分的网卡都支持软AP ，linux下的网卡需要支持mode master的才可以做软AP 。具体识别方法如下
1、iwconfig识别
[root@localhost ~]$ sudo iw list ........略........................ Supported interface modes: * IBSS * managed * AP * AP/VLAN 如果「Supported interface modes」中有「AP」的话，那么恭喜你，你的无线网卡可以架设虚拟AP 。如果没有则不支持。
[root@localhost ~]$ sudo ethtool -i wlan0 driver: iwlagn version: 3.0-ARCH firmware-version: 8.83.5.1 build 33692bus-info: 0000:03:00.0supports-statistics: nosupports-test: nosupports-eeprom-access: nosupports-register-dump: no 例如上面的示例中使用的驱动为iwlagn，通过http://wireless." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0466bb6085f6566b04058c61aac79c29/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-28T21:17:00+08:00" />
<meta property="article:modified_time" content="2018-09-28T21:17:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">win10与Ubantu双系统：Linux下开启FTP服务器与创建无线热点（实现文件共享）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>之前在博客有一篇文章<strong><a title="" href="http://xzyblog.com/tech/301.html" rel="nofollow">解决16GB入门级IPAD或IPHONE容量的尴尬，多种扩容方式探讨（无线硬盘/直接访问）</a></strong></p> 
 <p>写的是如何在win系统下使用filelizza这个软件搭建FTP服务器，然后建立一个无线局域网，让平板终端连接以后，访问电脑硬盘的文件。</p> 
 <p>如果是只在win7环境下，一切都很简单，按照上文提供的教程就可以实现。</p> 
 <p>但是上个月升级了笔记本，用的是华硕S4000UA，i7处理器。Intel对win7 不再更新驱动，找了很久也没有合适的驱动。所以干脆就用win10系统，觉得win10还是非常好用的，除了不够稳定以外，其他都可以接受，况且应用商店还可以听Podcast，各种国外原滋原味的广播，学习英语正好，素材丰富，这个win7是没有的。win8的情况，和win10一样，网卡不稳定，平板连上以后频繁掉线。所以想起来看看是否可以在Linux系统下实现，虽然耗费了一番周折，但结果终究是圆满的。</p> 
 <p>今天想对前三天的工作做个总结，：</p> 
 <ol><li>Day one：在win10的环境下安装Linux系统，版本是Ubantu 17.04。</li><li>Day two：在Ubantu系统下开启FTP服务器，设置访问文件的权限。</li><li>Day three：在Ubantu系统下创建Android可用的热点，搭建无线局域网。</li></ol> 
 <h4>一、win10下安装Ubantu双系统</h4> 
 <p>这个在网上有许多教程，可以找一篇照着做。我的做法，笔记本是固态+机械双硬盘，机械硬盘是为了增加笔记本容量，后来加上去的，1T的容量。在安装过程中，建议卸载掉。固态硬盘完全是用来给双系统服务的，100G给了win10，70G给了Ubantu，剩下70G留着存些文件。做了一个Linux的U盘启动盘，这里有一个插曲，用大白菜制作启动U盘的时候，忘了还连接着移动硬盘，结果把移动硬盘识别为U盘，格式化了，好在移动硬盘只是备份的数据，损失不大，重新下载即可。把两个系统全部安装在一个磁盘上的考虑也是如此，担心安装系统，不小心把硬盘格式化了。这样就相当于将系统和文件分开了。</p> 
 <p>安装过程中还有一个问题，选择安装选项的时候，不要选第一个，与win10共存。选最后一个，其他选项，然后自行分区。如果看不到可用的容量，只要删除分区，就变成可用容量了，然后点击左下角下面的+号，开始分区，后面的安装就很简单了。有教程提示，安装完再进win10系统，用easyBCD引导。其实，我安装完以后，直接就是grub引导的界面，可以选择win10还是Ubantu。</p> 
 <h4>二、在Ubantu系统下开启FTP服务器，设置访问文件的权限</h4> 
 <p>这里也参考前面两篇文章：</p> 
 <ol><li><a title="" href="http://xzyblog.com/tech/1411.html" rel="nofollow">Ubuntu下搭建FTP服务器图解</a></li><li><a title="" href="http://xzyblog.com/tech/1413.html" rel="nofollow">Ubantu搭建ftp服务器产生错误：550 Failed to change directoryd的解决方法</a></li></ol> 
 <p>第一篇文章应该已经解决了FTP的问题，第二篇文章是因为我的机械硬盘访问不了，所以需要更改下权限。</p> 
 <h4>三、在Ubantu系统下创建Android可用的热点，搭建无线局域网</h4> 
 <h5>一、网卡选择</h5> 
 <p>不同于windows上，大部分的网卡都支持软AP ，linux下的网卡需要支持mode master的才可以做软AP 。具体识别方法如下</p> 
 <p>1、iwconfig识别</p> 
 <ol class="linenums"><li class="L0"><span class="pun">[<span class="pln">root@localhost <span class="pun">~]<span class="pln">$ sudo iw list </span></span></span></span></li><li class="L1"><span class="pun">........略........................</span></li><li class="L2"><span class="pln"> <span class="typ">Supported<span class="pln"> <span class="kwd">interface<span class="pln"> modes<span class="pun">:</span></span></span></span></span></span></li><li class="L3"><span class="pln"> <span class="pun">*<span class="pln"> IBSS </span></span></span></li><li class="L4"><span class="pln"> <span class="pun">*<span class="pln"> managed </span></span></span></li><li class="L5"><span class="pln"> <span class="pun">*<span class="pln"> AP </span></span></span></li><li class="L6"><span class="pln"> <span class="pun">*<span class="pln"> AP<span class="pun">/<span class="pln">VLAN </span></span></span></span></span></li></ol> 
 <p>如果「Supported interface modes」中有「AP」的话，那么恭喜你，你的无线网卡可以架设虚拟AP 。如果没有则不支持。</p> 
 <ol class="linenums"><li class="L0"><span class="pun">[<span class="pln">root@localhost <span class="pun">~]<span class="pln">$ sudo ethtool <span class="pun">-<span class="pln">i wlan0 </span></span></span></span></span></span></li><li class="L1"><span class="pln">driver<span class="pun">:<span class="pln"> iwlagn </span></span></span></li><li class="L2"><span class="pln">version<span class="pun">:<span class="pln"> <span class="lit">3.0<span class="pun">-<span class="pln">ARCH </span></span></span></span></span></span></li><li class="L3"><span class="pln">firmware<span class="pun">-<span class="pln">version<span class="pun">:<span class="pln"> <span class="lit">8.83<span class="pun">.<span class="lit">5.1<span class="pln"> build <span class="lit">33692</span></span></span></span></span></span></span></span></span></span></li><li class="L4"><span class="pln">bus<span class="pun">-<span class="pln">info<span class="pun">:<span class="pln"> <span class="lit">0000<span class="pun">:<span class="lit">03<span class="pun">:<span class="lit">00.0</span></span></span></span></span></span></span></span></span></span></li><li class="L5"><span class="pln">supports<span class="pun">-<span class="pln">statistics<span class="pun">:<span class="pln"> <span class="kwd">no</span></span></span></span></span></span></li><li class="L6"><span class="pln">supports<span class="pun">-<span class="pln">test<span class="pun">:<span class="pln"> <span class="kwd">no</span></span></span></span></span></span></li><li class="L7"><span class="pln">supports<span class="pun">-<span class="pln">eeprom<span class="pun">-<span class="pln">access<span class="pun">:<span class="pln"> <span class="kwd">no</span></span></span></span></span></span></span></span></li><li class="L8"><span class="pln">supports<span class="pun">-<span class="kwd">register<span class="pun">-<span class="kwd">dump<span class="pun">:<span class="pln"> <span class="kwd">no</span></span></span></span></span></span></span></span></li></ol> 
 <p>例如上面的示例中使用的驱动为iwlagn，通过<a title="" href="http://wireless.kernel.org/en/users/Drivers" rel="nofollow">http://wireless.kernel.org/en/users/Drivers</a> AP模式支持的驱动列表里的查找AP项为yes的未发现iwlagn ，证明其不支持。</p> 
 <p>即然如此，如何在未购买网卡前选择一款一定支持的网卡呢？wireless.kernel.org也给我们提供了一个方法 ，通过<a title="" href="http://wireless.kernel.org/en/users/Devices" rel="nofollow">http://wireless.kernel.org/en/users/Devices</a> 硬件列表 （该页按pci、usb、pcmcia接口类型做了区分，点开相应的类型即可查看具体的硬件）。当然，这个表里列出的并不完全，也并不能保证是最适合做软AP的硬件 。是否识合请参查看上面的三个方法。</p> 
 <h5>二、hostapd+dnsmasq配置</h5> 
 <p>选择好网卡，接下来就是linux下的软件配置。以linux mint为例（基于ubuntu ，以下的示例同样适用于ubuntu）</p> 
 <p>1、安装软件</p> 
 <ol class="linenums"><li class="L0"><span class="pun">[<span class="pln">root@localhost <span class="pun">~]<span class="pln">$ sudo apt<span class="pun">-<span class="kwd">get<span class="pln"> install hostapd dnsmasq </span></span></span></span></span></span></span></li></ol> 
 <p>Dnsmasq是一个小巧且方便地用于配置DNS和DHCP的工具，适用于小型网络 。如果网络环境内的机器较多，建议换用dhcpd 。</p> 
 <p>2、hostapd配置</p> 
 <ol class="linenums"><li class="L0"><span class="pun">[<span class="pln">root@localhost <span class="pun">~]<span class="pln">$ sudo vim <span class="pun">/<span class="pln">etc<span class="pun">/<span class="pln">hostapd<span class="pun">/<span class="pln">hostapd<span class="pun">.<span class="pln">conf </span></span></span></span></span></span></span></span></span></span></span></span></li><li class="L1"><span class="kwd">interface<span class="pun">=<span class="pln">wlan0 </span></span></span></li><li class="L2"><span class="pln">driver<span class="pun">=<span class="pln">nl80211 </span></span></span></li><li class="L3"><span class="pln">ssid<span class="pun">=<span class="typ">My_wifi</span></span></span></li><li class="L4"><span class="pln">channel<span class="pun">=<span class="lit">6</span></span></span></li><li class="L5"><span class="pln">hw_mode<span class="pun">=<span class="pln">g </span></span></span></li><li class="L6"><span class="pln">ignore_broadcast_ssid<span class="pun">=<span class="lit">0</span></span></span></li><li class="L7"><span class="pln">auth_algs<span class="pun">=<span class="lit">1</span></span></span></li><li class="L8"><span class="pln">wpa<span class="pun">=<span class="lit">3</span></span></span></li><li class="L9"><span class="pln">wpa_passphrase<span class="pun">=<span class="lit">11111111</span></span></span></li><li class="L0"><span class="pln">wpa_key_mgmt<span class="pun">=<span class="pln">WPA<span class="pun">-<span class="pln">PSK </span></span></span></span></span></li><li class="L1"><span class="pln">wpa_pairwise<span class="pun">=<span class="pln">TKIP </span></span></span></li><li class="L2"><span class="pln">rsn_pairwise<span class="pun">=<span class="pln">CCMP </span></span></span></li></ol> 
 <p>以上是一个示例配置，配置了一个AP名称为My_wifi，密码为8个1的wpa加密方式的软AP 。配置完成后可以通过hostadp /etc/hostapd/hostapd.conf检测文件配置 。配置文件正常的话可以通过/etc/init.d/hostapd start启动，启动前，请确认以下行是否增加，如果该行值为空的话，请按下面修改</p> 
 <ol class="linenums"><li class="L0"><span class="com"># sudo vim /etc/init.d/hostapd </span></li><li class="L1"><span class="pun">将文件中<span class="pln"> DAEMON_CONF <span class="pun">的值改成下面这样：</span></span></span></li><li class="L2"><span class="pln">DAEMON_CONF<span class="pun">=<span class="str">/etc/<span class="pln">hostapd<span class="pun">/<span class="pln">hostapd<span class="pun">.<span class="pln">conf </span></span></span></span></span></span></span></span></li></ol> 
 <p>3、dnsmasq配置</p> 
 <ol class="linenums"><li class="L0"><span class="com">#sudo vim /etc/dnsmasq.conf </span></li><li class="L1"><span class="kwd">interface<span class="pun">=<span class="pln">wlan0 </span></span></span></li><li class="L2"><span class="pln">listen<span class="pun">-<span class="pln">address<span class="pun">=<span class="lit">192.168<span class="pun">.<span class="lit">100.1</span></span></span></span></span></span></span></li><li class="L3"><span class="com">#no-dhcp-interface= </span></li><li class="L4"><span class="pln">dhcp<span class="pun">-<span class="pln">range<span class="pun">=<span class="lit">192.168<span class="pun">.<span class="lit">100.50<span class="pun">,<span class="lit">192.168<span class="pun">.<span class="lit">100.150<span class="pun">,<span class="lit">12h</span></span></span></span></span></span></span></span></span></span></span></span></span></li><li class="L5"><span class="pln">server<span class="pun">=<span class="str">/google/<span class="lit">8.8<span class="pun">.<span class="lit">8.8</span></span></span></span></span></span></li></ol> 
 <p>上面配置了dnsmasq 监听的接口，该接口的IP、dhcp地址的范围、租期长短、dns等。如果想使用dhcpd也可以，这里省略dhcpd.conf的配置</p> 
 <p>配置无线接入点IP</p> 
 <p>sudo ifconfig wlan0 192.168.100.1 netmask 255.255.255.0 up</p> 
 <p>到此为止，笔记本应该有wifi信号了，Android终端可以搜索到，如果没有，在笔记本右上角连接一下隐藏网络。</p> 
 <p>其实最终的配置因人而异，根据问题需要不断的去网上查找解决方案，由于Linux系统初学，还很不熟悉。</p> 
 <p>文章中的wlan0是网络接口，可以通过命令ifconfig -a找到自己的接口，比如我的是wlp3s0.</p> 
 <p>参考文章：linux软AP－－hostapd+dhcpd</p> 
 <p>原文链接：https://blog.csdn.net/cupidove/article/details/38845049</p> 
</div> 
<p>转载于:https://www.cnblogs.com/ricksteves/p/9720969.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7ef529957b0016425305e17e9001c03d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">判断金额在1~100范围之内，可以为小数，且保留小数点后三位-------------Js 和 Java中的 正则表达式：</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/04ab66c8c7b2de959a866cf7cfd423e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">两个div之间互换位置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>