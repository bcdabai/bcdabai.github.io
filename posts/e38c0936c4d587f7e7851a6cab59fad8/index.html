<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot 前后端json数据交互 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot 前后端json数据交互" />
<meta property="og:description" content="目录 目录一、参考文献二、勇敢尝试三、最终选择交互方式 一、参考文献 原生Ajax与JQuery Ajax
SpringMVC接受JSON参数详解及常见错误总结
提交方式为 POST 时，
JQuery Ajax 以 application/x-www-form-urlencoded 上传 JSON对象 ，
后端用 @RequestParam 或者Servlet 获取参数。
JQuery Ajax 以 application/json 上传 JSON字符串，
后端用 @RquestBody 获取参数。
总结成表 Controller接收参数以及参数校验AJAX POST请求中参数以form data和request payload形式在servlet中的获取方式 二、勇敢尝试 前端js发送ajax请求（ application/x-www-form-urlencoded ）
var jsonObj = {&#34;openid&#34;:&#34;xxx&#34;,&#34;username&#34;:&#34;Ed sheeran&#34;,&#34;password&#34;:&#34;123&#34;}; /* Jquery默认Content-Type为application/x-www-form-urlencoded类型 */ $.ajax({ type: &#39;POST&#39;, url: &#34;/login&#34;, dataType: &#34;json&#34;, data: JSON.stringify(jsonObj), success: function(data) { console.log(data) }, error: function() { console.log(&#34;fucking error&#34;) } }); ​
后端Servlet接受参数。前端报 200，后端报 返回值都是null" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e38c0936c4d587f7e7851a6cab59fad8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-05T15:28:05+08:00" />
<meta property="article:modified_time" content="2018-04-05T15:28:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot 前后端json数据交互</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="目录">目录</h2> 
<p></p> 
<div class="toc"> 
 <div class="toc"> 
  <ul><li><a href="#%E7%9B%AE%E5%BD%95" rel="nofollow">目录</a></li><li><a href="#%E4%B8%80%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE" rel="nofollow">一、参考文献</a></li><li><a href="#%E4%BA%8C%E5%8B%87%E6%95%A2%E5%B0%9D%E8%AF%95" rel="nofollow">二、勇敢尝试</a></li><li><a href="#%E4%B8%89%E6%9C%80%E7%BB%88%E9%80%89%E6%8B%A9%E4%BA%A4%E4%BA%92%E6%96%B9%E5%BC%8F" rel="nofollow">三、最终选择交互方式</a></li></ul> 
 </div> 
</div> 
<p></p> 
<h2 id="一参考文献">一、参考文献</h2> 
<ul><li><p><a href="https://www.jianshu.com/p/fdfac90aef15" rel="nofollow">原生Ajax与JQuery Ajax</a></p></li><li><p><a href="https://blog.csdn.net/LostSh/article/details/68923874">SpringMVC接受JSON参数详解及常见错误总结</a></p> 
  <ul><li><p>提交方式为 <strong>POST</strong> 时，</p></li><li><p>JQuery Ajax 以 <strong>application/x-www-form-urlencoded</strong> 上传 <strong>JSON对象</strong> ，</p></li><li><p>后端用 <strong>@RequestParam 或者Servlet</strong> 获取参数。</p></li><li><p>JQuery Ajax 以 <strong>application/json</strong> 上传 <strong>JSON字符串</strong>，</p></li><li><p>后端用 <strong>@RquestBody</strong> 获取参数。</p></li><li><p>总结成表 <br> <img src="https://images2.imgbox.com/7e/2c/YAA5bhFy_o.png" alt="这里写图片描述" title=""></p></li></ul></li><li><a href="https://blog.csdn.net/qq_31001665/article/details/71075743">Controller接收参数以及参数校验</a></li><li><a href="https://blog.csdn.net/mhmyqn/article/details/25561535">AJAX POST请求中参数以form data和request payload形式在servlet中的获取方式</a></li></ul> 
<h2 id="二勇敢尝试">二、勇敢尝试</h2> 
<ul><li><p>前端js发送ajax请求（ <strong>application/x-www-form-urlencoded</strong> ）</p> <pre class="prettyprint"><code class="language-js hljs ">       <span class="hljs-keyword">var</span> jsonObj = {<!-- --><span class="hljs-string">"openid"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"username"</span>:<span class="hljs-string">"Ed sheeran"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"123"</span>};
          <span class="hljs-comment">/*
              Jquery默认Content-Type为application/x-www-form-urlencoded类型
           */</span>
          $.ajax({
              type: <span class="hljs-string">'POST'</span>,
              url: <span class="hljs-string">"/login"</span>,
              dataType: <span class="hljs-string">"json"</span>,
              data: <span class="hljs-built_in">JSON</span>.stringify(jsonObj),
              success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {<!-- --></span>
                  console.log(data)
              },
              error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
                  console.log(<span class="hljs-string">"fucking error"</span>)
              }
          });</code></pre> <p>​</p></li><li><p>后端Servlet接受参数。前端报 <strong>200</strong>，后端报 <strong>返回值都是null</strong></p> <pre class="prettyprint"><code class="language-java hljs "><span class="hljs-annotation">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> {<!-- --></span>
  <span class="hljs-annotation">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">login</span>(HttpServletRequest request){
      System.err.println(request.getParameter(<span class="hljs-string">"openid"</span>));
      System.err.println(request.getParameter(<span class="hljs-string">"username"</span>));
      System.err.println(request.getParameter(<span class="hljs-string">"password"</span>));
}
</code></pre></li><li><p>后端改 @RequestParam 接受参数。前端报 <strong>404</strong>，后端报 <strong>Required String parameter ‘username’ is not present</strong></p> <pre class="prettyprint"><code class="language-java hljs "><span class="hljs-annotation">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> {<!-- --></span>
  <span class="hljs-annotation">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">login</span>(@<span class="hljs-title">RequestParam</span>("username") String username,
                    @<span class="hljs-title">RequestParam</span>("password") String password,
                    @<span class="hljs-title">RequestParam</span>("openid") String openid){
      System.err.println(username);
      System.err.println(password);
      System.err.println(openid);
  }</code></pre></li><li><p>后端改 @RequestBody 接受参数。前端报 <strong>415</strong>，后端报 <strong>Content type ‘application/x-www-form-urlencoded;charset=UTF-8’ not supported</strong></p> <p><a href="https://blog.csdn.net/Edison_03/article/details/78319401">Http status 415 Unsupported Media Type</a></p> <pre class="prettyprint"><code class="language-java hljs "><span class="hljs-annotation">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> {<!-- --></span>
  <span class="hljs-annotation">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">login</span>(@RequestBody Map&lt;String,Object&gt; map){
      System.err.println(map.get(<span class="hljs-string">"username"</span>));
      System.err.println(map.get(<span class="hljs-string">"password"</span>));
      System.err.println(map.get(<span class="hljs-string">"openid"</span>));
  }</code></pre></li><li><p>前端加 <strong>contentType : “application/json”。</strong>前端报 <strong>200</strong>，后端 <strong>能接受到参数</strong></p> <pre class="prettyprint"><code class="language-xml hljs ">    $.ajax({
              type: 'POST',
              url: "/login",
              dataType: "json",
              data: JSON.stringify(jsonObj),
              contentType : "application/json",
              success: function(data) {
                  console.log(data)
              },
              error: function() {
                  console.log("fucking error")
              }
          });</code></pre> <pre class="prettyprint"><code class="language-java hljs "><span class="hljs-annotation">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> {<!-- --></span>
  <span class="hljs-annotation">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">login</span>(@RequestBody Map&lt;String,Object&gt; map){
      System.err.println(map.get(<span class="hljs-string">"username"</span>));
      System.err.println(map.get(<span class="hljs-string">"password"</span>));
      System.err.println(map.get(<span class="hljs-string">"openid"</span>));
}
}</code></pre></li><li><p>有时候，我想在<strong>后端使用对象</strong>来获取参数。前端报 <strong>200</strong>，后端 <strong>也ok</strong></p> <pre class="prettyprint"><code class="language-xml hljs ">@Controller
public class LoginController {
  @PostMapping("/login")
  public void login(@RequestBody Form form){
      System.err.println(form);
}
}</code></pre> <pre class="prettyprint"><code class="language-xml hljs ">public class Form {
  private String openid;
  private String username;
  private String password;

  public String getOpenid() {
      return openid;
  }

  public void setOpenid(String openid) {
      this.openid = openid;
  }

  public String getUsername() {
      return username;
  }

  public void setUsername(String username) {
      this.username = username;
  }

  public String getPassword() {
      return password;
  }

  public void setPassword(String password) {
      this.password = password;
  }

  @Override
  public String toString() {
      return "Form{" +
              "openid='" + openid + '\'' +
              ", username='" + username + '\'' +
              ", password='" + password + '\'' +
              '}';
  }
}</code></pre> <p>​</p></li></ul> 
<h2 id="三最终选择交互方式">三、最终选择交互方式</h2> 
<ul><li><p>前端 <strong>application/json</strong>，上传 <strong>josn字符串</strong>， 后端 <strong>使用对象</strong> 或者 <strong>Map</strong></p></li><li><p>前端代码</p> <pre class="prettyprint"><code class="language-js hljs ">       <span class="hljs-keyword">var</span> jsonObj = {<!-- --><span class="hljs-string">"openid"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"username"</span>:<span class="hljs-string">"Ed sheeran"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"123"</span>};
          <span class="hljs-comment">/*
              Jquery默认Content-Type为application/x-www-form-urlencoded类型
           */</span>
          $.ajax({
              type: <span class="hljs-string">'POST'</span>,
              url: <span class="hljs-string">"/login"</span>,
              dataType: <span class="hljs-string">"json"</span>,
              data: <span class="hljs-built_in">JSON</span>.stringify(jsonObj),
              contentType : <span class="hljs-string">"application/json"</span>,
              success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {<!-- --></span>
                  console.log(data)
              },
              error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
                  console.log(<span class="hljs-string">"fucking error"</span>)
              }
          });</code></pre></li><li><p>后端代码1</p> <pre class="prettyprint"><code class="language-java hljs "><span class="hljs-annotation">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> {<!-- --></span>
  <span class="hljs-annotation">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">login</span>(@RequestBody Form form){
      System.err.println(form);
}
}</code></pre> <p>​</p></li><li><p>后端代码2</p> <pre class="prettyprint"><code class="language-java hljs "><span class="hljs-annotation">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> {<!-- --></span>
  <span class="hljs-annotation">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">login</span>(@RequestBody Map&lt;String,Object&gt; map){
      System.err.println(map.get(<span class="hljs-string">"username"</span>));
      System.err.println(map.get(<span class="hljs-string">"password"</span>));
      System.err.println(map.get(<span class="hljs-string">"openid"</span>));
}
}</code></pre> <p>​</p></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d008c59bcc478da4901c48824ad99f31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Serial/Serial Old 和 Parallel Scavenge/Parallel Old 对象内存分配对比</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e645070afb354ba35d5951900ebd62e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">国产手机的18年历史</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>