<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ajax怎么添加表单,使用Ajax动态地将表单添加到Django表单集 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ajax怎么添加表单,使用Ajax动态地将表单添加到Django表单集" />
<meta property="og:description" content="这是我怎么做，使用
jQuery：
我的模板：
My Services {{ serviceFormset.management_form }}
{% for form in serviceFormset.forms %}
{{ form.as_table }}
{% endfor %}
$(&#39;#add_more&#39;).click(function() {
cloneMore(&#39;div.table:last&#39;,&#39;service&#39;);
});
在javascript文件中：
function cloneMore(selector,type) {
var newElement = $(selector).clone(true);
var total = $(&#39;#id_&#39; &#43; type &#43; &#39;-TOTAL_FORMS&#39;).val();
newElement.find(&#39;:input&#39;).each(function() {
var name = $(this).attr(&#39;name&#39;).replace(&#39;-&#39; &#43; (total-1) &#43; &#39;-&#39;,&#39;-&#39; &#43; total &#43; &#39;-&#39;);
var id = &#39;id_&#39; &#43; name;
$(this).attr({&#39;name&#39;: name,&#39;id&#39;: id}).val(&#39;&#39;).removeAttr(&#39;checked&#39;);
});
newElement.find(&#39;label&#39;).each(function() {
var newFor = $(this)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d2d3b3aff2e1b913421ed39ad7bb36f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T14:45:00+08:00" />
<meta property="article:modified_time" content="2021-08-05T14:45:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ajax怎么添加表单,使用Ajax动态地将表单添加到Django表单集</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>这是我怎么做，使用</p> 
 <p>jQuery：</p> 
 <p>我的模板：</p> 
 <h4>My Services</h4> 
 <p>{<!-- -->{ serviceFormset.management_form }}</p> 
 <p>{% for form in serviceFormset.forms %}</p> 
 <div class="table"> 
  <p>{<!-- -->{ form.as_table }}</p> 
 </div> 
 <p>{% endfor %}</p> 
 <p>$('#add_more').click(function() {<!-- --></p> 
 <p>cloneMore('div.table:last','service');</p> 
 <p>});</p> 
 <p>在javascript文件中：</p> 
 <p>function cloneMore(selector,type) {<!-- --></p> 
 <p>var newElement = $(selector).clone(true);</p> 
 <p>var total = $('#id_' + type + '-TOTAL_FORMS').val();</p> 
 <p>newElement.find(':input').each(function() {<!-- --></p> 
 <p>var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-');</p> 
 <p>var id = 'id_' + name;</p> 
 <p>$(this).attr({'name': name,'id': id}).val('').removeAttr('checked');</p> 
 <p>});</p> 
 <p>newElement.find('label').each(function() {<!-- --></p> 
 <p>var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-');</p> 
 <p>$(this).attr('for',newFor);</p> 
 <p>});</p> 
 <p>total++;</p> 
 <p>$('#id_' + type + '-TOTAL_FORMS').val(total);</p> 
 <p>$(selector).after(newElement);</p> 
 <p>}</p> 
 <p>它能做什么：</p> 
 <p>cloneMore接受selector作为第一个参数，formset的类型作为第二个参数。选择器应该做什么是传递它应该重复。在这种情况下，我传递它div.table：最后，使jQuery寻找最后一个表类的表。它的最后一部分很重要，因为选择器也用于确定新的表单将被插入后。很可能你想要它在剩下的形式的结尾。类型参数是这样的，我们可以更新management_form字段，特别是TOTAL_FORMS，以及实际的表单字段。如果您有一个表格集，例如Client模型，管理字段将具有id_clients-TOTAL_FORMS和id_clients-INITIAL_FORMS的ID，而表单字段将采用id_clients-N-fieldname的格式，其中N是表单编号，因此，通过类型参数，cloneMore函数查看当前有多少个表单，并通过新表单中的每个输入和标签，将所有字段名/ id从id_clients-(N)-name替换为id_clients-(N 1)-name等。完成后，它更新TOTAL_FORMS字段以反映新表单，并将其添加到集合的末尾。</p> 
 <p>这个函数对我特别有帮助，因为它的设置它允许我在整个应用程序中使用它，当我想在一个formset提供更多的形式，并不使我需要一个隐藏的“模板”形式复制只要我传递formset名称和格式布局的格式。希望它有帮助。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fcd16e58bf1a279ddfa39bf3e6d33c6b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">方舟手游服务器传服后服务器会不稳定吗,方舟生存进化手游转服规则说明_转服有哪些规则_3DM手游...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f0f9ab22cc39c63c7fffaef6f2dfe6b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ajax请求 不同步,如何使JQuery-AJAX请求同步</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>