<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C语言基础】文件管理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【C语言基础】文件管理" />
<meta property="og:description" content="文章目录 一、文件的相关概念二、文件的打开与关闭——fopen与fclose函数1、fopen函数打开文件2、fclose函数关闭文件 三、文件的顺序读写1、向文件读写一个字符——fgetc与fputc函数a、fgetc举例b、fputc举例 2、向文件读写一个字符串——fgets与fputs函数a、fgets举例b、fputs举例 3、对文件进行格式化读写——fprintf与fscanf函数a、举例b、比较(printf,fprintf,sprintf) 4、按二进制方式对文件进行读写——fwrite与fread函数 四、文件的随机读写1、rewind函数2、fseek函数3、ftell函数 五、文件的结束判定——feof函数 由于所用函数较多，提供一个比较好用的网址可查询函数相关知识：
函数查询入口（点击即可进入）
一、文件的相关概念 1、C程序主要有两种文件：程序文件和数据文件
2、输入输出流：输入输出数据传送的过程，C中把此称为流
3、文件名：文件路径&#43;文件名主干&#43;文件后缀
D:\cc\temp\ filel . dat 文件路径 文件名主干 文件后缀 4、文件类型：ASCII文件和二进制文件
5、文件缓冲区：指系统自动地在内存区为每一个正在使用的文件开辟一个文件缓冲区
相当于是磁盘和程序数据区的一个中介
6、文件类型指针——FILE（为结构体，有系统提供）
每一个FILE类型变量对应一个文件信息区，其中包含该文件的有关信息
定义文件型指针变量： FILE* fp;
fp 是一个指向FILE类型变量的指针变量，即：通过fp能够找到与它相关的文件
二、文件的打开与关闭——fopen与fclose函数 1、fopen函数打开文件 一般形式： FILE* fp; //定义文件型指针变量 fp = fopen(文件名,使用文件方式); //使指针变量指向打开的文件的信息区 例如： fp = fopen(&#34;test.txt&#34;,&#34;r&#34;); //绝对路径的写法：fopen(&#34;D:\\office\\VS2013\\file\\test.txt&#34;,&#34;r&#34;); //相对路径的写法：fopen(&#34;test.txt&#34;,&#34;r&#34;); //或者：fopen(&#34;..\\test.txt&#34;);//此表示上一级路径 //上上级路径：..\\..\\ 常用打开文件的方法： if ((fp = fopen(&#34;test.txt&#34;,&#34;r&#34;)) == NULL){ //打开失败，fopen 函数会返回一个空指针NULL printf(&#34;文件打开失败!\n&#34;); //可用printf(&#34;%s\n&#34;,strerror(errno));输出出错原因 //需引头文件 &lt;string.h&gt; 与 &lt;errno.h&gt; exit(0); //exit为终止的库函数，需引头文件 &lt;stdlib.h&gt; } 对文件访问的方式 文件访问方式含义文件不存在时&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e3b5650e9e00714702e347d2db6305b7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-16T22:12:33+08:00" />
<meta property="article:modified_time" content="2023-01-16T22:12:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C语言基础】文件管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">一、文件的相关概念</a></li><li><a href="#fopenfclose_30" rel="nofollow">二、文件的打开与关闭——fopen与fclose函数</a></li><li><ul><li><a href="#1fopen_31" rel="nofollow">1、fopen函数打开文件</a></li><li><a href="#2fclose_75" rel="nofollow">2、fclose函数关闭文件</a></li></ul> 
  </li><li><a href="#_84" rel="nofollow">三、文件的顺序读写</a></li><li><ul><li><a href="#1fgetcfputc_85" rel="nofollow">1、向文件读写一个字符——fgetc与fputc函数</a></li><li><ul><li><a href="#afgetc_92" rel="nofollow">a、fgetc举例</a></li><li><a href="#bfputc_114" rel="nofollow">b、fputc举例</a></li></ul> 
   </li><li><a href="#2fgetsfputs_134" rel="nofollow">2、向文件读写一个字符串——fgets与fputs函数</a></li><li><ul><li><a href="#afgets_141" rel="nofollow">a、fgets举例</a></li><li><a href="#bfputs_170" rel="nofollow">b、fputs举例</a></li></ul> 
   </li><li><a href="#3fprintffscanf_202" rel="nofollow">3、对文件进行格式化读写——fprintf与fscanf函数</a></li><li><ul><li><a href="#a_215" rel="nofollow">a、举例</a></li><li><a href="#bprintffprintfsprintf_246" rel="nofollow">b、比较(printf,fprintf,sprintf)</a></li></ul> 
   </li><li><a href="#4fwritefread_275" rel="nofollow">4、按二进制方式对文件进行读写——fwrite与fread函数</a></li></ul> 
  </li><li><a href="#_314" rel="nofollow">四、文件的随机读写</a></li><li><ul><li><a href="#1rewind_315" rel="nofollow">1、rewind函数</a></li><li><a href="#2fseek_346" rel="nofollow">2、fseek函数</a></li><li><a href="#3ftell_384" rel="nofollow">3、ftell函数</a></li></ul> 
  </li><li><a href="#feof_414" rel="nofollow">五、文件的结束判定——feof函数</a></li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/97/1d/6oZHazvD_o.jpg" alt="在这里插入图片描述"> 
<p></p> 
<blockquote> 
 <p>由于所用函数较多，提供一个比较好用的网址可查询函数相关知识：<br> <a href="https://legacy.cplusplus.com/" rel="nofollow"><strong><font color="red">函数查询入口</font></strong>（点击即可进入）</a></p> 
</blockquote> 
<h2><a id="_5"></a>一、文件的相关概念</h2> 
<blockquote> 
 <p>1、C程序主要有两种文件：程序文件和数据文件<br> 2、输入输出流：输入输出数据传送的过程，C中把此称为流<br> 3、文件名：文件路径+文件名主干+文件后缀</p> 
</blockquote> 
<pre><code class="prism language-c">D<span class="token operator">:</span>\cc\temp\     filel   <span class="token punctuation">.</span>   dat
  文件路径     文件名主干  文件后缀
</code></pre> 
<blockquote> 
 <p>4、文件类型：ASCII文件和二进制文件</p> 
 <p>5、文件缓冲区：指系统自动地在内存区为每一个正在使用的文件开辟一个文件缓冲区</p> 
 <p>相当于是磁盘和程序数据区的一个中介</p> 
 <p>6、文件类型指针——FILE（为结构体，有系统提供）</p> 
 <p>每一个FILE类型变量对应一个文件信息区，其中包含该文件的有关信息</p> 
 <p>定义文件型指针变量： FILE* fp;</p> 
 <p>fp 是一个指向FILE类型变量的指针变量，即：通过fp能够找到与它相关的文件</p> 
</blockquote> 
<h2><a id="fopenfclose_30"></a>二、文件的打开与关闭——fopen与fclose函数</h2> 
<h3><a id="1fopen_31"></a>1、fopen函数打开文件</h3> 
<pre><code class="prism language-Bash">一般形式：
FILE* fp;    //定义文件型指针变量
fp = fopen(文件名,使用文件方式);
    //使指针变量指向打开的文件的信息区
例如：
fp = fopen("test.txt","r");

//绝对路径的写法：fopen("D:\\office\\VS2013\\file\\test.txt","r");
//相对路径的写法：fopen("test.txt","r");
//或者：fopen("..\\test.txt");//此表示上一级路径
//上上级路径：..\\..\\

常用打开文件的方法：
if ((fp = fopen("test.txt","r")) == NULL){
        //打开失败，fopen 函数会返回一个空指针NULL
    printf("文件打开失败!\n");

    //可用printf("%s\n",strerror(errno));输出出错原因
    //需引头文件 &lt;string.h&gt;  与  &lt;errno.h&gt;

    exit(0);
    //exit为终止的库函数，需引头文件  &lt;stdlib.h&gt;
}
</code></pre> 
<center>
  对文件访问的方式 
</center> 
<table><thead><tr><th>文件访问方式</th><th>含义</th><th>文件不存在时</th></tr></thead><tbody><tr><td>" r "（只读）</td><td>为输入打开一个已存在的文本文件</td><td>出错</td></tr><tr><td>" w "（只写）</td><td>为输出打开一个文本文件</td><td>建立新文件</td></tr><tr><td>" a "（追加）</td><td>向文本文件尾添加数据</td><td>出错</td></tr><tr><td>" rb "（只读）</td><td>为输入打开一个二进制文件</td><td>出错</td></tr><tr><td>" wb "（只写）</td><td>为输出打开一个二进制文件</td><td>建立新文件</td></tr><tr><td>" ab "（追加）</td><td>向二进制文件尾加数据</td><td>出错</td></tr><tr><td>" r+ "（读写）</td><td>为读写打开一个文本文件</td><td>出错</td></tr><tr><td>" w+ "（读写）</td><td>为读写建立一个新的文本文件</td><td>建立新文件</td></tr><tr><td>" a+ "（读写）</td><td>为读写打开一个文本文件</td><td>出错</td></tr><tr><td>" rb+ "（读写）</td><td>为读写打开一个二进制文件</td><td>出错</td></tr><tr><td>" wb+ "（读写）</td><td>为读写建立一个新的二进制文件</td><td>建立新文件</td></tr><tr><td>" ab+ "（读写）</td><td>为读写打开一个二进制文件</td><td>出错</td></tr></tbody></table> 
<h3><a id="2fclose_75"></a>2、fclose函数关闭文件</h3> 
<pre><code class="prism language-bash">一般形式：
fclose<span class="token punctuation">(</span>文件指针<span class="token punctuation">)</span><span class="token punctuation">;</span>
例如：
fclose<span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    //顺利关闭，则返回0，否则返回EOF（即-1）
</code></pre> 
<h2><a id="_84"></a>三、文件的顺序读写</h2> 
<h3><a id="1fgetcfputc_85"></a>1、向文件读写一个字符——fgetc与fputc函数</h3> 
<center>
  读写一个字符的函数 
</center> 
<table><thead><tr><th>函数名</th><th>调用形式</th><th>功能</th><th>返回值</th></tr></thead><tbody><tr><td>fgetc</td><td>fgetc(fp)</td><td>从fp指向的文件读入一个字符</td><td>成功，带回所读字符；失败，返回文件结束标志EOF（即 -1）</td></tr><tr><td>fputc</td><td>fputc(ch,fp)</td><td>把字符ch写到文件指针变量fp所指向的文件中</td><td>成功，返回值就是输出的字符；失败，返回EOF（即 -1）</td></tr></tbody></table> 
<h4><a id="afgetc_92"></a>a、fgetc举例</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> pfRead <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>pfRead<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span><span class="token function">strerror</span><span class="token punctuation">(</span>errno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//读文件</span>
    <span class="token comment">//向文件中放入YDL做测试</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span><span class="token function">fgetc</span><span class="token punctuation">(</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Y</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span><span class="token function">fgetc</span><span class="token punctuation">(</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//D</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span><span class="token function">fgetc</span><span class="token punctuation">(</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//L</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pfRead <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bfputc_114"></a>b、fputc举例</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> pfWrite <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>pfWrite<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span><span class="token function">strerror</span><span class="token punctuation">(</span>errno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">fputc</span><span class="token punctuation">(</span><span class="token char">'y'</span><span class="token punctuation">,</span>pfWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fputc</span><span class="token punctuation">(</span><span class="token char">'d'</span><span class="token punctuation">,</span>pfWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fputc</span><span class="token punctuation">(</span><span class="token char">'l'</span><span class="token punctuation">,</span>pfWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pfWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pfWrite <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2fgetsfputs_134"></a>2、向文件读写一个字符串——fgets与fputs函数</h3> 
<center>
  读写一个字符串的函数 
</center> 
<table><thead><tr><th>函数名</th><th>调用形式</th><th>功能</th><th>返回值</th></tr></thead><tbody><tr><td>fgets</td><td>fgets(str,n,fp)</td><td>从fp指向的文件读入一个长度为 (n-1) 的字符串，然后在最后加一个 ‘\0’ ，存放到字符数组 str 中。若在读完 n-1 个字符之前遇到 ‘\n’ 或文件结束符 EOF ，结束输入</td><td>成功，返回地址 str；失败，返回 NULL</td></tr><tr><td>fputs</td><td>fputs(str,fp</td><td>把字符串 str 写到文件指针变量 fp 所指向的文件中</td><td>成功，返回 0 ；失败，返回非 0 值</td></tr></tbody></table> 
<h4><a id="afgets_141"></a>a、fgets举例</h4> 
<pre><code class="prism language-c"><span class="token comment">//从文件中读取</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> pfRead <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>pfRead<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span><span class="token function">strerror</span><span class="token punctuation">(</span>errno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//读文件</span>
    <span class="token comment">//将 YDL 与 一段路 分两行放入文件中</span>
	<span class="token function">fgets</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">1024</span><span class="token punctuation">,</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//YDL</span>
	<span class="token function">fgets</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">1024</span><span class="token punctuation">,</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一段路</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pfRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pfRead <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

注：若输出中文为乱码，可在txt文本中选择
文件——另存为——将下方的编码改为ANSI之后再保存
</code></pre> 
<h4><a id="bfputs_170"></a>b、fputs举例</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> fpWrite <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路1.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fpWrite<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span><span class="token function">strerror</span><span class="token punctuation">(</span>errno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">"Hello\n"</span><span class="token punctuation">,</span>fpWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">"World!\n"</span><span class="token punctuation">,</span>fpWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fpWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fpWrite <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//从键盘读取并输出</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">fgets</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">1024</span><span class="token punctuation">,</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从标准输入流读取</span>
	<span class="token function">fputs</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从标准输出流输出</span>
	<span class="token comment">//相当以下代码：</span>
	<span class="token comment">//gets(buf);</span>
	<span class="token comment">//puts(buf);</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3fprintffscanf_202"></a>3、对文件进行格式化读写——fprintf与fscanf函数</h3> 
<pre><code class="prism language-bash">一般形式:
fprintf<span class="token punctuation">(</span>文件指针,格式字符串,输出表列<span class="token punctuation">)</span><span class="token punctuation">;</span>
fscanf<span class="token punctuation">(</span>文件指针,格式字符串,输入表列<span class="token punctuation">)</span><span class="token punctuation">;</span>
例如:
fprintf<span class="token punctuation">(</span>fp,<span class="token string">"%d,%5.2f"</span>,i,t<span class="token punctuation">)</span><span class="token punctuation">;</span>

它们的操作对象是磁盘，不是终端
若要对终端操作，只需把文件指针对应换为：stdin 与stdout 即可
但如此就与 scanf 与 <span class="token builtin class-name">printf</span> 无异了
</code></pre> 
<h4><a id="a_215"></a>a、举例</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> n<span class="token punctuation">;</span>
	<span class="token keyword">float</span> score<span class="token punctuation">;</span>
	<span class="token keyword">char</span> arr<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">S</span> a <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">3.14f</span><span class="token punctuation">,</span><span class="token string">"一段路"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路1.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//格式化写文件</span>
	<span class="token function">fprintf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token string">"%d %f %s"</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>n<span class="token punctuation">,</span>a<span class="token punctuation">.</span>score<span class="token punctuation">,</span>a<span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将变量(a.n)等的值，格式输出到fp所指向的文件中</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

	<span class="token keyword">struct</span> <span class="token class-name">S</span> b <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> pf <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路1.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>pf<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//格式化的输入数据</span>
	<span class="token function">fscanf</span><span class="token punctuation">(</span>pf<span class="token punctuation">,</span><span class="token string">"%d%f%s"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将pf所指向的文件中的数据读入，分别放入(b.n)等变量中</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %f %s\n"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>n<span class="token punctuation">,</span>b<span class="token punctuation">.</span>score<span class="token punctuation">,</span>b<span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断读入是否正确</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pf <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bprintffprintfsprintf_246"></a>b、比较(printf,fprintf,sprintf)</h4> 
<pre><code class="prism language-c"><span class="token comment">//sscanf函数与sprintf函数</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> n<span class="token punctuation">;</span>
	<span class="token keyword">float</span> score<span class="token punctuation">;</span>
	<span class="token keyword">char</span> arr<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">S</span> a <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">3.14f</span><span class="token punctuation">,</span><span class="token string">"一段路"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">S</span> b <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//把格式化的结构体a的数据转化为字符串放到buf中</span>
	<span class="token function">sprintf</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token string">"%d %f %s"</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>n<span class="token punctuation">,</span>a<span class="token punctuation">.</span>score<span class="token punctuation">,</span>a<span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"buf字符串为：%s\n"</span><span class="token punctuation">,</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//从buf中读取格式化的数据到结构体b中</span>
	<span class="token function">sscanf</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token string">"%d%f%s"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"得到的数据为：%d %f %s\n"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>n<span class="token punctuation">,</span>b<span class="token punctuation">.</span>score<span class="token punctuation">,</span>b<span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

三者区别
scanf<span class="token operator">/</span>printf——是针对标准输入流<span class="token operator">/</span>标准输出流的，格式化输入<span class="token operator">/</span>输出语句
fscanf<span class="token operator">/</span>fprintf——是针对所有输入流<span class="token operator">/</span>所有输出流的，格式化输入<span class="token operator">/</span>输出语句
sscanf——是从字符串中读取格式化的数据
sprintf——是把格式化数据输出成（存储到）字符串
</code></pre> 
<h3><a id="4fwritefread_275"></a>4、按二进制方式对文件进行读写——fwrite与fread函数</h3> 
<blockquote> 
 <p><font color="red"><strong>fread函数</strong></font><br> size_t fread ( void * ptr, size_t size, size_t count, FILE <em>stream );<br> <font color="red"><strong>fwrite函数</strong></font><br> size_t fwrite ( const void * ptr, size_t size, size_t count, FILE * stream );<br> <font color="red"><strong>第一个参数 ptr</strong></font>：指向要写入的元素数组的指针，转换为 const void</em> ——（参数是一个指针或者数组地址）<br> <font color="red"><strong>第二个参数 size</strong></font>：要写入的每个元素的大小（以字节为单位）——（这个指针或数组单个存储单元的大小）<br> <font color="red"><strong>size_t</strong></font>：是无符号整数类型<br> <font color="red"><strong>第三个参数 count</strong></font>：元素数，每个元素的大小为字节大小，size_t是无符号整数类型。——（从数组或指针中写入到文件中的字符个数） 第四个参数 stream：指向指定输出流的FILE对象的指针（文件指针）<br> <font color="red"><strong>函数返回值</strong></font> ：返回从数组或指针存储到文件中的字符个数</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
	<span class="token keyword">double</span> score<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">S</span> a <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">98.5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路1.txt"</span><span class="token punctuation">,</span><span class="token string">"wb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//二进制的形式写文件</span>
	<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

	<span class="token keyword">struct</span> <span class="token class-name">S</span> b <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> pf <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路1.txt"</span><span class="token punctuation">,</span><span class="token string">"rb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>pf<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//二进制形式读文件</span>
	<span class="token function">fread</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>pf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d %.2lf\n"</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>name<span class="token punctuation">,</span>b<span class="token punctuation">.</span>age<span class="token punctuation">,</span>b<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pf <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_314"></a>四、文件的随机读写</h2> 
<h3><a id="1rewind_315"></a>1、rewind函数</h3> 
<pre><code class="prism language-bash">rewind 函数：使文件位置标记指向文件开头
void rewind <span class="token punctuation">(</span> FILE * stream <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> fp1<span class="token punctuation">,</span><span class="token operator">*</span>fp2<span class="token punctuation">;</span>
	fp1 <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路1.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//打开输入文件</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp1<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"fp1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：fp1:出错原因</span>
            <span class="token comment">//perror函数为检查文件打开失败的原因</span>
            <span class="token comment">//与之前的strerror相似，但更简洁</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	fp2 <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路2.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//打开输出文件</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp2<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"fp2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">putchar</span><span class="token punctuation">(</span><span class="token function">fgetc</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//连续从文件1中读入字符并输出到屏幕</span>
	<span class="token function">rewind</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使位置标记返回文件开头</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">fputc</span><span class="token punctuation">(</span><span class="token function">fgetc</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">,</span>fp2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从文件开头读起，输出到文件2中</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">fclose</span><span class="token punctuation">(</span>fp2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fp1 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>fp2 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2fseek_346"></a>2、fseek函数</h3> 
<pre><code class="prism language-Bash">fseek函数：移动文件位置标记
调用形式：
int fseek(FILE * stream, long int offset, int origin);
说明：
fp——文件指针
offset——以字节为单位的位移量，为长整型
origin——起始点，可以为标志符（或数字）
</code></pre> 
<center>
  fseek 函数中的“起始点”的表示方法 
</center> 
<table><thead><tr><th>起始点</th><th>名字(标志符)</th><th>用数字表示</th></tr></thead><tbody><tr><td>文件开始</td><td>SEEK_SET</td><td>0</td></tr><tr><td>文件当前位置</td><td>SEEK_CUR</td><td>1</td></tr><tr><td>文件末尾</td><td>SEEK_END</td><td>2</td></tr></tbody></table> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//假设文件中已放入 abcdef</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//定位文件指针</span>
	<span class="token function">fseek</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token number">2L</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将位置标记移到离文件开头2字节处</span>
        <span class="token comment">//fseek(fp,2L,1);//将位置标记移到当前位置后面2字节处</span>
        <span class="token comment">//fseek(fp,-2L,2);//将位置标记从文件末尾处，向后退2字节</span>
        <span class="token comment">//注意:位移量不要超过文本</span>
	<span class="token comment">//读取文件</span>
	<span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token function">fgetc</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//c</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3ftell_384"></a>3、ftell函数</h3> 
<pre><code class="prism language-Bash">ftell函数：测定文件位置标记的当前位置
调用形式：
long int ftell(FILE * stream);

ftell函数用于获得文件当前位置指针的位置，函数给出当前
位置指针相对于文件开头的字节数
当函数调用出错时返回 -1L
</code></pre> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//假设文件中已放入 abcdef</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token function">fseek</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span><span class="token number">2L</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token function">fgetc</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//c</span>
	<span class="token comment">//计算当前位置指针相对于文件开头的字节数</span>
	<span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token function">ftell</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>pos<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1L</span><span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="feof_414"></a>五、文件的结束判定——feof函数</h2> 
<blockquote> 
 <p>在文件读取过程中，不能用 feof 函数的返回值直接用来判断文件是否结束，而是应用于当文件读取结束时，判断是读取失败结束，还是遇到文件尾结束<br> 1、文本文件读取是否结束，判断返回值是否为 EOF(fgetc) ，或者 NULL(fgets)<br> 例如：<br> a、fgetc 判断是否为 EOF<br> b、fgets 判断返回值是否为 NULL<br> 2、二进制文件的读取是否结束，判断返回值是否小于实际要读的个数（即用 fread 判断）</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> fp<span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"一段路.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"fp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ch<span class="token operator">=</span><span class="token function">getc</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">EOF</span><span class="token punctuation">)</span> <span class="token function">putchar</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ferror</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//判断是否为读取错误而退出</span>
		<span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"\nReading error!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">feof</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//判断是否是到文件尾而退出</span>
		<span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"\nEnd of file"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>资源共享：</strong><a href="https://pan.baidu.com/s/1D7REMQ-iS7CPE4C7aTCk0Q" rel="nofollow"><font color="red"><strong>C与C++的API获取链接</strong>（点击即可进入获取）</font></a><br> <font color="white">提取码：ijjg</font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f79cf8ef05622d029fa34a2899240a22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue知识系列-VS Code的安装&#43;Vue环境的搭建&#43;Vue指令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f2699ae6ec94b91cf22fa58b90b8bd8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">语义分割——FCN模型pytorch实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>