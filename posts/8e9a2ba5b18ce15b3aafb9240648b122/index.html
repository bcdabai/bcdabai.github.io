<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Fanuc机器人 Karel 编程学习（二）---TP调用简单的Karel程序 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Fanuc机器人 Karel 编程学习（二）---TP调用简单的Karel程序" />
<meta property="og:description" content="使用karel写一个简单的程序 硬件环境 Fanuc 6轴机器人，控制器版本V8.30P：
KAREL语言介绍 FANUC机器人除了可以通过编写TP语言程序进行控制以外，还可以通过编写KAREL语言程序进行控制。
KAREL是一种专门用于机器人系统架构的语言，用户可以在PC上创建KAREL程序，然后将其加载到机器人控制器中执行，以从系统层面激活机器人的原始功能。
与在示教器上创建的TP程序一样，用KAREL语言创建的程序也可以在机器人控制器上执行，不同的是：KAREL程序是用来构建机器人系统的，即实现系统的二次开发，而TP程序只能用于执行机器人运动和应用指令；TP程序可以在示教器上创建、编辑和执行，KAREL程序只能在PC上创建，通过编译转换后才能成为机器人可执行的程序，并且程序加载后不能示教器上编辑和修改。
FANUC机器人的KAREL语言并不是真实的KAREL语言，而是基于PASCAL语言开发出的一种高级编程语言。使用KAREL语言程序可以在机器人控制器中创建示教器显示画面，实现I/O信号的后台逻辑处理（简易PLC功能），示教机器人点位和点位数据运算，数值数据四则运算和高级运算，数据的监控、记录以及输出等功能。
需要添加的功能包 Karel （R642）
KAREL Use Sprt FCTN （J971）
如果是TP 程序调用Karel 程序，不添加 karel 功能包，也可以运行karel 程序。
如果需要设置karel 程序的运行方式，需要加载R642 和 J971 软件包。
需要的设置 在menu-&gt;系统–&gt;变量里面设置 $KAREL_ENB =1
创建一个TP调用的karel 程序，并传入string参数 第一步在ROBOGUIDE里面创建karel程序 编写如下图的程序
第二步编译karel程序生成PC程序 点击创建按钮生成PC程序
第三步导入pc程序到机器人 略过
第四步使用TP程序调用PC程序测试效果 注意：测试环境是ROBOGUIDE，实体机器人也测过是可以运行的，创建Cell需要注意虚拟机器人和实体机器人的软件版本需要一样否则导入PC程序时候会提示创建PC程序的版本和控制器版本不一样。
测试前设置
新建一个程序RSR0001 并且调用我们导入的TestTPCALLPC程序，并且同时显示程序编辑界面和user界面
按住shift &#43;FWD 执行程序" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8e9a2ba5b18ce15b3aafb9240648b122/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-06T10:40:40+08:00" />
<meta property="article:modified_time" content="2023-07-06T10:40:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Fanuc机器人 Karel 编程学习（二）---TP调用简单的Karel程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="karel_2"></a>使用karel写一个简单的程序</h2> 
<h3><a id="_6"></a>硬件环境</h3> 
<p>Fanuc 6轴机器人，控制器版本V8.30P：</p> 
<h3><a id="KAREL_10"></a>KAREL语言介绍</h3> 
<p>FANUC机器人除了可以通过编写TP语言程序进行控制以外，还可以通过编写KAREL语言程序进行控制。</p> 
<p>KAREL是一种专门用于机器人系统架构的语言，用户可以在PC上创建KAREL程序，然后将其加载到机器人控制器中执行，以从系统层面激活机器人的原始功能。</p> 
<p>与在示教器上创建的TP程序一样，用KAREL语言创建的程序也可以在机器人控制器上执行，不同的是：KAREL程序是用来构建机器人系统的，即实现系统的二次开发，而TP程序只能用于执行机器人运动和应用指令；TP程序可以在示教器上创建、编辑和执行，KAREL程序只能在PC上创建，通过编译转换后才能成为机器人可执行的程序，并且程序加载后不能示教器上编辑和修改。</p> 
<p>FANUC机器人的KAREL语言并不是真实的KAREL语言，而是基于PASCAL语言开发出的一种高级编程语言。使用KAREL语言程序可以在机器人控制器中创建示教器显示画面，实现I/O信号的后台逻辑处理（简易PLC功能），示教机器人点位和点位数据运算，数值数据四则运算和高级运算，数据的监控、记录以及输出等功能。</p> 
<h3><a id="_19"></a>需要添加的功能包</h3> 
<p>Karel （R642）<br> KAREL Use Sprt FCTN （J971）<br> 如果是TP 程序调用Karel 程序，不添加 karel 功能包，也可以运行karel 程序。<br> 如果需要设置karel 程序的运行方式，需要加载R642 和 J971 软件包。</p> 
<h3><a id="_25"></a>需要的设置</h3> 
<p>在menu-&gt;系统–&gt;变量里面设置 $KAREL_ENB =1<br> <img src="https://images2.imgbox.com/a5/b1/9B74brNP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="TPkarel_string_30"></a>创建一个TP调用的karel 程序，并传入string参数</h3> 
<h4><a id="ROBOGUIDEkarel_31"></a>第一步在ROBOGUIDE里面创建karel程序</h4> 
<p><img src="https://images2.imgbox.com/84/6f/AvW9xEqT_o.png" alt="在这里插入片描述"><br> <img src="https://images2.imgbox.com/45/a8/nECOSfyc_o.png" alt="在这里插入图片描述"><br> 编写如下图的程序<br> <img src="https://images2.imgbox.com/49/48/LkIZjYD5_o.png" alt="程序如上，注意程序并没有处理异常发生情况"></p> 
<h4><a id="karelPC_38"></a>第二步编译karel程序生成PC程序</h4> 
<p>点击创建按钮生成PC程序<br> <img src="https://images2.imgbox.com/d1/2d/yvUz57ka_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="pc_44"></a>第三步导入pc程序到机器人</h4> 
<p>略过</p> 
<h4><a id="TPPC_47"></a>第四步使用TP程序调用PC程序测试效果</h4> 
<p>注意：测试环境是ROBOGUIDE，实体机器人也测过是可以运行的，创建Cell需要注意虚拟机器人和实体机器人的软件版本需要一样否则导入PC程序时候会提示创建PC程序的版本和控制器版本不一样。</p> 
<p>测试前设置<br> <img src="https://images2.imgbox.com/68/bf/SDLXltcE_o.png" alt="在这里插入图片描述"><br> 新建一个程序RSR0001 并且调用我们导入的TestTPCALLPC程序，并且同时显示程序编辑界面和user界面</p> 
<p><img src="https://images2.imgbox.com/88/e6/xgxNFoWn_o.png" alt="在这里插入图片描述"><br> 按住shift +FWD 执行程序<br> <img src="https://images2.imgbox.com/a1/ef/QuxRFdxB_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/68/e8/2ATMo0Hy_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/8f/83/aFYk4m7U_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e9a3a4aaf584586243e5c203f729590/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">org.apache.dubbo 3.2.2 的一些报错。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ffb74cc96a75564cf9ee560a1a7d5aa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">油烟在线监测系统-油烟浓度在线监测仪-旭华智能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>