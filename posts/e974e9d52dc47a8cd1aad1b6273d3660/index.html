<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>核心业务上云难题II - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="核心业务上云难题II" />
<meta property="og:description" content="B卷
一、计算题
有三个系统，oa系统、运维系统、ERP系统，分别收集信息，计算公有云规划配置。
Oa是6台RH2288，运维是2台泰山，ERP 2台E9000（6个刀片），oa要求是华为系的系统，运维要求国产化架构，CentOS，ERP要求高性能裸金属，Ubuntu。
（1）收集表里，是写单台规格，不是写单台实际使用率，不需乘以使用率
（2）CPU核数：Vcpu =1：1
（3）6个刀片，注意乘以6。上云以后台数也乘以6.
（4）其中一个系统是按需计费
1信息收集表
系统
设备品牌
单台规格
台数
Oa
6
运维
2
ERP
2
2公有云上云服务
服务
架构
上云规格
台数
镜像
Oa
ECS
X86
6
Euler
运维
鲲鹏
ARM
2
CentOS
ERP
BMS
X86
12
ubuntu
3.如果客户有高性能场景，如何推荐客户上云。（同上）
二、网络双平面
和老师上课讲过的题目一样，给了每个系统业务平面和管理平面的IP地址。（同上）
运维无业务平面
各业务平面入规则都连公司内网，出规则都放通
运维的管理平面，开放远程桌面接口，开放某个运维ip。其他管理平面入方向规则都连管理内网，出方向规则全方通。
用到的网络服务
安全组和ACL规则
Oa
ELB、VPN、ACL、VPC
业务入：连内网
业务出：全放通
管理入：连运维内
网
管理出：全放通
运维
ELB、VPN、ACL、VPC
管理入：放通 3389 端口；放通ip XXX
管理出：全放通
ERP
ELB、VPN、ACL、VPC
业务入：连内网
业务出：全放通
管理入：连运维内网" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e974e9d52dc47a8cd1aad1b6273d3660/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-10T11:28:31+08:00" />
<meta property="article:modified_time" content="2023-06-10T11:28:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">核心业务上云难题II</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>B卷</p> 
<p><strong><strong>一、计算题</strong></strong></p> 
<p>有三个系统，oa系统、运维系统、ERP系统，分别收集信息，计算公有云规划配置。</p> 
<p>Oa是6台RH2288，运维是2台泰山，ERP 2台E9000（6个刀片），oa要求是华为系的系统，运维要求国产化架构，CentOS，ERP要求高性能裸金属，Ubuntu。</p> 
<p>（1）收集表里，是写单台规格，不是写单台实际使用率，不需乘以使用率</p> 
<p>（2）CPU核数：Vcpu =1：1</p> 
<p>（3）6个刀片，注意乘以6。上云以后台数也乘以6.</p> 
<p>（4）其中一个系统是按需计费</p> 
<p>1信息收集表</p> 
<table><tbody><tr><td> <p>系统</p> </td><td> <p>设备品牌</p> </td><td> <p>单台规格</p> </td><td> <p>台数</p> </td></tr><tr><td> <p>Oa</p> </td><td> <p></p> </td><td> <p></p> </td><td> <p>6</p> </td></tr><tr><td> <p>运维</p> </td><td> <p></p> </td><td> <p></p> </td><td> <p>2</p> </td></tr><tr><td> <p>ERP</p> </td><td> <p></p> </td><td> <p></p> </td><td> <p>2</p> </td></tr></tbody></table> 
<p>2公有云上云服务</p> 
<table><tbody><tr><td> <p></p> </td><td> <p>服务</p> </td><td> <p>架构</p> </td><td> <p>上云规格</p> </td><td> <p>台数</p> </td><td> <p>镜像</p> </td></tr><tr><td> <p>Oa</p> </td><td> <p>ECS</p> </td><td> <p>X86</p> </td><td> <p></p> </td><td> <p>6</p> </td><td> <p>Euler</p> </td></tr><tr><td> <p>运维</p> </td><td> <p>鲲鹏</p> </td><td> <p>ARM</p> </td><td> <p></p> </td><td> <p>2</p> </td><td> <p>CentOS</p> </td></tr><tr><td> <p>ERP</p> </td><td> <p>BMS</p> </td><td> <p>X86</p> </td><td> <p></p> </td><td> <p>12</p> </td><td> <p>ubuntu</p> </td></tr></tbody></table> 
<p>3.如果客户有高性能场景，如何推荐客户上云。（同上）</p> 
<p></p> 
<p><strong><strong>二、网络双平面</strong></strong></p> 
<p>和老师上课讲过的题目一样，给了每个系统业务平面和管理平面的IP地址。（同上）</p> 
<p>运维无业务平面</p> 
<p>各业务平面入规则都连公司内网，出规则都放通</p> 
<p>运维的管理平面，开放远程桌面接口，开放某个运维ip。其他管理平面入方向规则都连管理内网，出方向规则全方通。</p> 
<table><tbody><tr><td> <p></p> </td><td> <p>用到的网络服务</p> </td><td> <p></p> </td><td> <p>安全组和ACL规则</p> </td></tr><tr><td> <p>Oa</p> </td><td> <p>ELB、VPN、ACL、VPC</p> </td><td> <p></p> </td><td> <p>业务入：连内网</p> <p>业务出：全放通</p> <p>管理入：连运维内</p> <p>网</p> <p>管理出：全放通</p> </td></tr><tr><td> <p>运维</p> </td><td> <p>ELB、VPN、ACL、VPC</p> </td><td> <p></p> </td><td> <p>管理入：放通 3389 端口；放通ip XXX</p> <p>管理出：全放通</p> </td></tr><tr><td> <p>ERP</p> </td><td> <p>ELB、VPN、ACL、VPC</p> </td><td> <p></p> </td><td> <p>业务入：连内网</p> <p>业务出：全放通</p> <p>管理入：连运维内网</p> <p>管理出：全放通</p> </td></tr></tbody></table> 
<p></p> 
<p>1.画拓扑图（同上）</p> 
<ol><li>一种说法是老师上课的图直接贴，画5个安全组即可。</li><li>一种说法是三个系统不在一个子网里，所以要画5个子网，其中画两个vpn网关，一个管理平面，一个业务平面。</li></ol> 
<p>2.说明ipsec vpn 与ssl vpn 的区别和使用场景，说明本场景的vpn是哪种</p> 
<p>https://support.huaweicloud.com/vpn_faq/zh-cn_topic_0187565709.html</p> 
<p>使用场景</p> 
<p>IPsec VPN：连通的是两个局域网，如分支机构与总部（或华为云VPC）之间、本地IDC与云端VPC的子网；即IPsec VPN是网对网的连接。</p> 
<p>SSL VPN：连通的是一个客户端到一个局域网络，如出差员工的便携机访问公司内网。</p> 
<p>连接方式</p> 
<p>IPsec VPN：要求两端有固定的网关设备，如防火墙或路由器； 管理员需要分别配置两端网关完成IPsec VPN协商。</p> 
<p>SSL VPN：需要在主机上安装指定的Client软件，通过用户名/密码拨号连接至SSL设备。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b6/dc/XNdxV5VK_o.png"></p> 
<p>、</p> 
<p>本场景是ipsec vpn。</p> 
<p></p> 
<p><strong><strong>三、存储</strong></strong></p> 
<p>还是oa、运维、ERP三个系统，下面由张表格可查询多少块盘，多少个热备，多少冷备</p> 
<p>Oa是48块盘，X个高热备盘，做raid10</p> 
<p>运维是10块盘，Y个低热备盘，做raid6</p> 
<p>ERP是XX快盘，OBS三副本。</p> 
<ol><li>算三个存储实际可用容量（初始化后的可用容量，此处不需要乘以使用率。）</li></ol> 
<table><tbody><tr><td> <p></p> </td><td> <p>实际可用容量</p> </td></tr><tr><td> <p>Oa</p> </td><td> <p>（48-X）*1/2（raid10利用率） （热备盘查表减掉）</p> </td></tr><tr><td> <p>运维</p> </td><td> <p>（10-Y）*（n-2/n）（raid6利用率）（热备盘查表减掉）</p> </td></tr><tr><td> <p>ERP</p> </td><td> <p>容量*1/3（三副本）</p> </td></tr></tbody></table> 
<p>2.上云后的存储服务（同上）</p> 
<table><tbody><tr><td> <p></p> </td><td> <p></p> </td><td> <p>上云规格</p> </td><td> <p>有哪些迁移工具和迁移方式</p> </td></tr><tr><td> <p>EVS</p> </td><td> <p></p> </td><td> <p></p> </td><td> <p></p> </td></tr><tr><td> <p>SFS</p> </td><td> <p></p> </td><td> <p></p> </td><td> <p></p> </td></tr><tr><td> <p>OBS</p> </td><td> <p></p> </td><td> <p></p> </td><td> <p></p> </td></tr></tbody></table> 
<p>3、三大存储的区别和应用场景（同上）</p> 
<p></p> 
<p><strong><strong>四、容器</strong></strong></p> 
<p>有个订单系统，通过防火墙与公网互联，与ERP业务内网互联。要求该订单系统用容器集群高可用部署。含管理节点3个，业务节点6个，数据库若干，MySQL、共享文件存储等容器存储持久化。</p> 
<p></p> 
<p>（1）容器与虚拟化的联系与区别</p> 
<p>联系：</p> 
<p>容器使用Google公司推出的Go语言进行开发实现，基于Linux内核的cgroup，namespace，以及AUFS类的Union FS等技术，对进程进行封装隔离，属于操作系统层面的虚拟化技术。</p> 
<p>区别：</p> 
<p>传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程；而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此使得Docker技术比虚拟机技术更为轻便、快捷。</p> 
<p>虚拟化和容器化方式的对比</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/49/f4/tEQTxp3K_o.png"></p> 
<p>容器和虚拟机的区别</p> 
<table><tbody><tr><td> <p><strong><strong>特性</strong></strong></p> </td><td> <p><strong><strong>容器</strong></strong></p> </td><td> <p><strong><strong>虚拟机</strong></strong></p> </td></tr><tr><td> <p>启动</p> </td><td> <p>秒级</p> </td><td> <p>分钟级</p> </td></tr><tr><td> <p>硬盘使用</p> </td><td> <p>一般为MB</p> </td><td> <p>一般为GB</p> </td></tr><tr><td> <p>性能</p> </td><td> <p>接近原生</p> </td><td> <p>弱</p> </td></tr><tr><td> <p>系统支持量</p> </td><td> <p>单机支持上千个容器</p> </td><td> <p>一般几十个</p> </td></tr></tbody></table> 
<p>容器化跟虚拟化相比具有众多的优势：</p> 
<p>1、更高效的利用系统资源</p> 
<p>2、更快速的启动时间</p> 
<p>3、一致的运行环境</p> 
<p>4、持续交付和部署</p> 
<p>5、更轻松的迁移</p> 
<p>6、更轻松的维护和扩展</p> 
<p></p> 
<p>区别：</p> 
<p>1、容器主机必须有OS环境</p> 
<p>2、容器没有虚拟化软件</p> 
<p>3、容器应用镜像来自于公共HUB、私有、社区</p> 
<p>4、容器引擎安装镜像---运行实例</p> 
<p>5、容器无需安装OS+无需作任何配置</p> 
<p>对比：占用空间：容器-MB级别，虚拟化-GB级；运行速度：容器：秒级、虚拟化：分钟级；安全隔离性：容器隔离性不如计算虚拟化（因为共享OS）；创建数量：容器无上限，计算虚拟化（受限于虚拟化软件）</p> 
<p></p> 
<p>（2）云原生的概念、容器与云原生的微服务、CI/CD、Devops的关系</p> 
<p>同下方</p> 
<p></p> 
<p>有个订单系统，通过防火墙与公网互联，与ERP业务内网互联。要求该订单系统用容器集群高可用部署。含管理节点3个，业务节点6个，数据库若干，MySQL、共享文件存储等容器存储持久化。</p> 
<p>2、订单系统，3个管理节点、6个容器节点，sql数据库2个，evs、sfs、obs实现存储持久化，与ERP系统通过内网相连，通过防火墙与公网相连，画出订单系统VPC、子网拓扑图，说明各云服务的位置。（图里改一下，elb不接master，接到service框里）</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4b/d6/U97aGvAw_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d6/02/RxY4uLbL_o.png"></p> 
<p><strong><strong>五、方案题</strong></strong></p> 
<p>某学校有三个系统：选课系统、高考查分系统、职业生涯规划系统。</p> 
<table><tbody><tr><td> <p></p> </td><td> <p>现状</p> </td><td> <p>服务要求</p> </td><td> <p>数据要求</p> </td></tr><tr><td> <p>选课系统</p> </td><td> <p>存学生选课信息和分数，供学校内网访问，类似网站架构。</p> </td><td> <p>对学校高一420人开放，高峰时间段，高峰时间的人均每秒点击次数A，每个页面大小120kB。</p> </td><td> <p>数据高可用，数据非常重要，不能丢失。</p> </td></tr><tr><td> <p>高考查分系统</p> </td><td> <p>只在每年6-7月份开放，对公网开放，供高三学生和家长使用。 类似票务软件的三层架构。</p> </td><td> <p>高峰时间段，高峰时间的人均每秒点击次数，非高峰时间平均的人均每秒点击次数B，每个页面大小150kB。</p> </td><td> <p>数据高可用。</p> </td></tr><tr><td> <p>职业生涯规划系统</p> </td><td> <p>对公网开放，有视频直播、点播业务。</p> </td><td> <p></p> </td><td> <p>存储不经常看，归档存储。</p> </td></tr></tbody></table> 
<p>为客户规划方案。</p> 
<p>要点：1算带宽。</p> 
<p>选课系统每个页面大小是120K字节，高峰时间段高分时间的人均点击次数是A，这A次访问总共就是120*A K字节（需要注意的是这个地方是字节），字节的单位是Byte，而带宽的单位是bit，1Byte=8bit，因此120*A K Byte大概就是120*A/8 K bit，也就是  120*A/8/1024 Mbps（1M=1024K）。高考查分系统以此类推。</p> 
<p>2、选课系统，网站架构，数据高可用，数据库高可用，数据备份、云硬盘备份、灾备</p> 
<p>3、高考查分系统：票务软件三层架构（与老师确认）</p> 
<p>4、职业规划系统：OBS、CDN（拓扑图不保证正确，仅供参考）</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/52/c4/59kkto4M_o.png"></p> 
<p>（注意网站三层架构，三层架构如下图）</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/6e/00/u5sFdxXa_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d4/65/zTmYaEbc_o.png"></p> 
<ol><li>高可用、高性能设计思路（计算高IO：ELB+ECS集群；存储访问高IO：磁盘性能要好；数据库高IO，加数据库中间件DDM+一主一备5只读）</li><li>数据很重要设计思路 ：vbs、数据库主备、SDRS、CBR</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ea93eec43398d5aad5a67d2017440a52/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32F4_LCD显示图片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c3b0b8b596211681a1e4c49a31d322b8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Ubunut22.04使用国内清华源在线安装zabbix6.0.18LTS 基于MySQL和NGINX</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>