<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Studio 基础 之 简单获取手机端所有图片 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android Studio 基础 之 简单获取手机端所有图片" />
<meta property="og:description" content="Android Studio 基础 之 简单获取手机端所有图片 目录
Android Studio 基础 之 简单获取手机端所有图片
一、简单介绍
二、实现原理
三、注意实现
四、预览效果
五、实现步骤
六、关键代码
一、简单介绍 Android 开发中的一些基础操作，使用整理，便于后期使用。
本节介绍，获取移动端所有图片，这里主要是获得了图片的路径（绝对路径）和图片名称，方法不唯一，仅供参考。
二、实现原理 1、使用 Cusor 解析查询 cursor.getColumnIndex(MediaStore.Images.Media.DATA) 获取图片数据
2、 int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
String name = cursor.getString(column_index); 得到图片的据对路径
3、cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME) 获取图片的名称
三、注意实现 1、因为要读取文件夹之类，所以需要读写权限
四、预览效果 五、实现步骤 1、打开Android Studio ，新建工程
2、按照步骤一步一步来，构建一个工程模块
3、编写脚本，获取移动端所有图片路径和名称
4、在 AndroidManifest.xml 添加 读写权限
5、连接设备，打包运行，给应用对应权限，效果如上
六、关键代码 1、MainActivity.java
package com.example.getallimages; import android.database.Cursor; import android.provider.MediaStore; import android.support.v7.app.AppCompatActivity; import android.os.Bundle; import android.util.Log; import java.text.SimpleDateFormat; import java." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0fbc3a385bd5fcbf6059bd0e57863206/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-03T10:26:41+08:00" />
<meta property="article:modified_time" content="2020-07-03T10:26:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Studio 基础 之 简单获取手机端所有图片</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;"><img alt="" height="165" src="https://images2.imgbox.com/39/c4/o7vfQa00_o.png" width="799"></p> 
<p style="text-indent:33px;"> </p> 
<h2 id="Android%20Studio%20%E5%9F%BA%E7%A1%80%20%E4%B9%8B%20%E7%AE%80%E5%8D%95%E8%8E%B7%E5%8F%96%E6%89%8B%E6%9C%BA%E7%AB%AF%E6%89%80%E6%9C%89%E5%9B%BE%E7%89%87">Android Studio 基础 之 简单获取手机端所有图片</h2> 
<p style="text-indent:33px;"> </p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="Android%20Studio%20%E5%9F%BA%E7%A1%80%20%E4%B9%8B%20%E7%AE%80%E5%8D%95%E8%8E%B7%E5%8F%96%E6%89%8B%E6%9C%BA%E7%AB%AF%E6%89%80%E6%9C%89%E5%9B%BE%E7%89%87-toc" style="margin-left:0px;"><a href="#Android%20Studio%20%E5%9F%BA%E7%A1%80%20%E4%B9%8B%20%E7%AE%80%E5%8D%95%E8%8E%B7%E5%8F%96%E6%89%8B%E6%9C%BA%E7%AB%AF%E6%89%80%E6%9C%89%E5%9B%BE%E7%89%87" rel="nofollow">Android Studio 基础 之 简单获取手机端所有图片</a></p> 
<p id="%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D" rel="nofollow">一、简单介绍</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" rel="nofollow">二、实现原理</a></p> 
<p id="%E4%B8%89%E3%80%81%E6%B3%A8%E6%84%8F%E5%AE%9E%E7%8E%B0-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E6%B3%A8%E6%84%8F%E5%AE%9E%E7%8E%B0" rel="nofollow">三、注意实现</a></p> 
<p id="%E5%9B%9B%E3%80%81%E9%A2%84%E8%A7%88%E6%95%88%E6%9E%9C-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81%E9%A2%84%E8%A7%88%E6%95%88%E6%9E%9C" rel="nofollow">四、预览效果</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;"><a href="#%E4%BA%94%E3%80%81%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4" rel="nofollow">五、实现步骤</a></p> 
<p id="%E5%85%AD%E3%80%81%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#%E5%85%AD%E3%80%81%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81" rel="nofollow">六、关键代码</a></p> 
<hr id="hr-toc"> 
<p style="text-indent:33px;"> </p> 
<h3 id="%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D">一、简单介绍</h3> 
<p style="text-indent:33px;">Android 开发中的一些基础操作，使用整理，便于后期使用。</p> 
<p style="text-indent:33px;">本节介绍，获取移动端所有图片，这里主要是获得了图片的路径（绝对路径）和图片名称，方法不唯一，仅供参考。</p> 
<p style="text-indent:33px;"> </p> 
<h3 id="%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">二、实现原理</h3> 
<p style="text-indent:33px;">1、使用 Cusor 解析查询 cursor.getColumnIndex(MediaStore.Images.Media.DATA) 获取图片数据</p> 
<p style="text-indent:33px;">2、 int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);</p> 
<p style="text-indent:33px;">String name = cursor.getString(column_index); 得到图片的据对路径</p> 
<p style="text-indent:33px;">3、cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME) 获取图片的名称</p> 
<p style="text-indent:33px;"> </p> 
<h3 id="%E4%B8%89%E3%80%81%E6%B3%A8%E6%84%8F%E5%AE%9E%E7%8E%B0">三、注意实现</h3> 
<p style="text-indent:33px;">1、因为要读取文件夹之类，所以需要读写权限</p> 
<p style="text-indent:33px;"> </p> 
<h3 id="%E5%9B%9B%E3%80%81%E9%A2%84%E8%A7%88%E6%95%88%E6%9E%9C">四、预览效果</h3> 
<p style="text-indent:33px;"><img alt="" height="377" src="https://images2.imgbox.com/de/10/VW60iBuf_o.png" width="1200"></p> 
<p style="text-indent:33px;"> </p> 
<h3 id="%E4%BA%94%E3%80%81%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4">五、实现步骤</h3> 
<p style="text-indent:33px;">1、打开Android Studio ，新建工程</p> 
<p style="text-indent:33px;"><img alt="" height="636" src="https://images2.imgbox.com/e0/8c/vK8zKx6W_o.png" width="815"></p> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;">2、按照步骤一步一步来，构建一个工程模块</p> 
<p style="text-indent:33px;"><img alt="" height="639" src="https://images2.imgbox.com/d4/59/WealxpPU_o.png" width="910"></p> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;">3、编写脚本，获取移动端所有图片路径和名称</p> 
<p style="text-indent:33px;"><img alt="" height="401" src="https://images2.imgbox.com/d9/41/ItCZMENR_o.png" width="997"></p> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;">4、在 AndroidManifest.xml 添加 读写权限</p> 
<p style="text-indent:33px;"><img alt="" height="385" src="https://images2.imgbox.com/c5/9a/EaycT701_o.png" width="926"></p> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;">5、连接设备，打包运行，给应用对应权限，效果如上</p> 
<p style="text-indent:33px;"><img alt="" height="377" src="https://images2.imgbox.com/86/48/W1lW2dBc_o.png" width="1200"></p> 
<p style="text-indent:33px;"> </p> 
<h3 id="%E5%85%AD%E3%80%81%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81">六、关键代码</h3> 
<p style="text-indent:33px;">1、MainActivity.java</p> 
<pre><code class="language-java">package com.example.getallimages;

import android.database.Cursor;
import android.provider.MediaStore;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class MainActivity extends AppCompatActivity {

    ArrayList paths = null;
    ArrayList names= null;
    List&lt;Map&lt;String, Object&gt;&gt; listItems;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GetImagesPath();
        Log.i("GetImagesPath", "onCreate: listItems.size " + listItems.size());
    }

    void GetImagesPath(){

        paths = new ArrayList();
        names = new ArrayList();

        Cursor cursor = getContentResolver().query(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, null, null, null);
        while (cursor.moveToNext()) {
            //获取图片的名称
            String name = cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME));
            // 获取图片的绝对路径
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            String path = cursor.getString(column_index);


            paths.add(path);
            names.add(name);

            Log.i("GetImagesPath", "GetImagesPath: name = "+name+"  path = "+ path);


        }
        listItems = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; paths.size(); i++) {
            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
            map.put("name", paths.get(i));
            map.put("desc", names.get(i));
            listItems.add(map);
        }
    }


}
</code></pre> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;">2、AndroidManifest.xml</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.getallimages"&gt;

    &lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/&gt;
    &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;
    
    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"&gt;
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;

                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</code></pre> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;"><img alt="" height="513" src="https://images2.imgbox.com/ca/00/VufPxE8u_o.png" width="929"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8617dd534eff418311600cd673f2c708/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">从输入url到页面完成加载发生了什么</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a187acaf6f5abed9e047880193a9086c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">-L -Wl,-rpath-link -Wl,-rpath区别精讲</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>