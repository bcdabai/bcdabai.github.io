<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据库复习】SQL的逻辑 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据库复习】SQL的逻辑" />
<meta property="og:description" content="SQL 写在前面的话 本文是本学渣因为考试需要写的一篇总结，只总结了需要考察的考点，所以可能有的内容引申的不多，请见谅。
一、本节考点 从之前的线上考试中抽一组题考sql基本逻辑：查询优化器是怎么工作的，其中的步骤
包括基于成本的优化器，基于规则的优化器的整个优化过程，比如：
先是怎么做语义的检查，软解析硬解析等内容，最后形成一个二进制plan代码，整个过程中谁花的功夫最多 二、查询优化器的相关概念 优化器是sql分析和执行的优化工具，它负责制订sql的最高效的执行计划，基于关系理论给予用户无损原始查询的等效变换。
优化：在数据处理的真正被执行的时候发生
不同查询表达式在不同环境，经过查询优化器的优化后下效率千差万别
三、基于规则的优化器RBO **概念：**就是在优化器里面嵌入若干种规则，执行的sql语句符合哪种规则，则按照哪种规则制订出相应的执行计划。
例如：表上有个索引，如果谓词上有索引列的存在，根据规则一定会选择走索引，否则选择走全表扫描。
四、基于成本的优化器CBO CBO优化器会计算使用不同的执行计划的成本，并选择成本最低的一个，以获得最大的吞吐量或最快的初始响应时间。
五、SQL的执行顺序 SQL语言的执行顺序如下：
语义语法检查：然后进入查询的缓存解析 ：对每一次表达式进行变换，生成各种解析树并评估，选择最优路径形成执行计划，最消耗资源的过程执行计划：形成一个二进制的plan代码，抛入执行引擎中执行引擎存储引擎数据库：执行引擎利用存储引擎在数据库中查询相关内容并返回 六、相关注意事项 需要注意的两点：
不同sql写法会对查询优化器最终选择结果产生影响查询优化器不知道一些只有程序员才知道的影响效率的信息，如： sql写错了，如想查A结果写的是查B关系理论只管最终表达式的正确性，但是中间结果需要大开销，这个部分查询优化器很难判断sql包含太多关系操作，无法优化掉 查询优化器基于两个条件：程序员写的sql(优化的前提)和关系代数的等价变换(优化的基础)。也会有权衡和判断的失误" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/19e8cd44329ada5e7377fbbb25f5f02d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-17T16:59:08+08:00" />
<meta property="article:modified_time" content="2021-04-17T16:59:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据库复习】SQL的逻辑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="SQL_0"></a>SQL</h3> 
<h4><a id="_1"></a>写在前面的话</h4> 
<p>本文是本学渣因为考试需要写的一篇总结，只总结了需要考察的考点，所以可能有的内容引申的不多，请见谅。</p> 
<h4><a id="_3"></a>一、本节考点</h4> 
<ol><li>从之前的线上考试中抽一组题考sql</li><li>基本逻辑：查询优化器是怎么工作的，其中的步骤<br> 包括基于成本的优化器，基于规则的优化器的整个优化过程，比如：<br> 先是怎么做语义的检查，软解析硬解析等内容，最后形成一个二进制plan代码，整个过程中谁花的功夫最多</li></ol> 
<h4><a id="_10"></a>二、查询优化器的相关概念</h4> 
<p><strong>优化器</strong>是sql分析和执行的优化工具，它负责制订sql的最高效的执行计划，基于关系理论给予用户无损原始查询的等效变换。</p> 
<p>优化：在数据处理的真正被执行的时候发生</p> 
<p>不同查询表达式在不同环境，经过查询优化器的优化后下效率千差万别</p> 
<h4><a id="RBO_18"></a>三、基于规则的优化器RBO</h4> 
<p>**概念：**就是在优化器里面嵌入若干种规则，执行的sql语句符合哪种规则，则按照哪种规则制订出相应的执行计划。</p> 
<p>例如：表上有个索引，如果谓词上有索引列的存在，根据规则一定会选择走索引，否则选择走全表扫描。</p> 
<h4><a id="CBO_24"></a>四、基于成本的优化器CBO</h4> 
<p>CBO优化器会计算使用不同的执行计划的成本，并选择成本最低的一个，以获得<font color="blue">最大的吞吐量</font>或<font color="blue">最快的初始响应时间</font>。</p> 
<h4><a id="SQL_28"></a>五、SQL的执行顺序</h4> 
<p>SQL语言的执行顺序如下：</p> 
<ol><li>语义语法检查：然后进入查询的缓存</li><li>解析 ：对每一次表达式进行变换，生成各种解析树并评估，选择最优路径形成执行计划，<strong>最消耗资源的过程</strong></li><li>执行计划：形成一个二进制的plan代码，抛入执行引擎中</li><li>执行引擎</li><li>存储引擎</li><li>数据库：执行引擎利用存储引擎在数据库中查询相关内容并返回</li></ol> 
<h4><a id="_39"></a>六、相关注意事项</h4> 
<p>需要注意的两点：</p> 
<ol><li>不同sql写法会对查询优化器最终选择结果产生影响</li><li>查询优化器不知道一些只有程序员才知道的影响效率的信息，如： 
  <ul><li>sql写错了，如想查A结果写的是查B</li><li>关系理论只管最终表达式的正确性，但是<strong>中间结果</strong>需要大开销，这个部分查询优化器很难判断</li><li>sql包含太多关系操作，无法优化掉</li></ul> </li></ol> 
<p>查询优化器基于两个条件：程序员写的sql(优化的前提)和关系代数的等价变换(优化的基础)。也会有权衡和判断的失误</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6a9cbee4d95404d5833ee16511697f57/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于全排列的极限优化 思考及其应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32145d13720a335046d627554b8a2ae2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据库复习】数据库设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>