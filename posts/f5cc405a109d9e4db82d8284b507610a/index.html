<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python基础——9.文件 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python基础——9.文件" />
<meta property="og:description" content="Python基础——9.文件 Python基础——9.文件9.0 前言9.1 从文件中读取数据9.1.1 读取整个文件9.1.2 文件路径9.1.3 逐行读取9.1.4 创建一个包含文件各行内容的列表9.1.5 使用文件的内容 9.2 写入文件9.2.1 写入空文件9.2.2 写入多行9.2.3 追加到文件 9.3 使用eval函数自动处理文件内容9.4 小结Python基础——结束 Python基础——9.文件 9.0 前言 至此，你掌握了编写组织有序而易于使用的程序所需的基本技能，该考虑让程序目标更明确、用途更大了。
在本章中，你将学习处理文件，让程序能够快速地分析大量的数据；你将学习错误处理，避免程序在面对意外情形时崩溃；
你将学习异常，它们是Python创建的特殊对象，用于管理程序运行时出现的错误；你还将学习模块json ，它让你能够保存用户数据，以免在程序停止运行后丢失。
学习处理文件和保存数据可让你的程序使用起来更容易：用户将能够选择输入什么样的数据，以及在什么时候输入；
用户使用你的程序做一些工作后，可将程序关闭，以后再接着往下做。学习处理异常可帮助你应对文件不存在的情形，以及处理其他可能导致程序崩溃的问题。
这让你的程序在面对错误的数据时更健壮——不管这些错误数据源自无意的错误，还是源自破坏程序的恶意企图。
你在本章学习的技能可提高程序的适用性、可用性和稳定性。
9.1 从文件中读取数据 文本文件可存储的数据量多得难以置信：天气数据、交通数据、社会经济数据、文学作品等。
每当需要分析或修改存储在文件中的信息时，读取文件都很有用，对数据分析应用程序来说尤其如此。
例如，你可以编写一个这样的程序：读取一个文本文件的内容，重新设置这些数据的格式并将其写入文件，让浏览器能够显示这些内容。
要使用文本文件中的信息，首先需要将信息读取到内存中。为此，你可以一次性读取文件的全部内容，也可以以每次一行的方式逐步读取。
9.1.1 读取整个文件 要读取文件，需要一个包含几行文本的文件。下面首先来创建一个文件，它包含精确到小数点后30位的圆周率值，且在小数点后每10位处都换行：
以下是test.txt的内容,你也应在你的代码目录下新建一个这样的文件：
Use Python read file! Do you know it? It&#39;s very useful! 下面的程序打开并读取这个文件，再将其内容显示到屏幕上：
with open(&#39;test.txt&#39;) as f: contents = f.read() print(contents) 预想的输出结果应该是：
Use Python read file! Do you know it? It&#39;s very useful!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f5cc405a109d9e4db82d8284b507610a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-02T01:11:07+08:00" />
<meta property="article:modified_time" content="2023-05-02T01:11:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python基础——9.文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Python基础——9.文件</h4> 
 <ul><li><a href="#Python9_1" rel="nofollow">Python基础——9.文件</a></li><li><a href="#90__2" rel="nofollow">9.0 前言</a></li><li><a href="#91__16" rel="nofollow">9.1 从文件中读取数据</a></li><li><ul><li><a href="#911__24" rel="nofollow">9.1.1 读取整个文件</a></li><li><a href="#912__54" rel="nofollow">9.1.2 文件路径</a></li><li><a href="#913__89" rel="nofollow">9.1.3 逐行读取</a></li><li><a href="#914__122" rel="nofollow">9.1.4 创建一个包含文件各行内容的列表</a></li><li><a href="#915__138" rel="nofollow">9.1.5 使用文件的内容</a></li></ul> 
  </li><li><a href="#92__154" rel="nofollow">9.2 写入文件</a></li><li><ul><li><a href="#921__158" rel="nofollow">9.2.1 写入空文件</a></li><li><a href="#922__172" rel="nofollow">9.2.2 写入多行</a></li><li><a href="#923__198" rel="nofollow">9.2.3 追加到文件</a></li></ul> 
  </li><li><a href="#93_eval_216" rel="nofollow">9.3 使用eval函数自动处理文件内容</a></li><li><a href="#94__256" rel="nofollow">9.4 小结</a></li><li><a href="#Python_265" rel="nofollow">Python基础——结束</a></li></ul> 
</div> 
<p></p> 
<h2><a id="Python9_1"></a>Python基础——9.文件</h2> 
<h2><a id="90__2"></a>9.0 前言</h2> 
<p>至此，你掌握了编写组织有序而易于使用的程序所需的基本技能，该考虑让程序目标更明确、用途更大了。</p> 
<p>在本章中，你将学习处理文件，让程序能够快速地分析大量的数据；你将学习错误处理，避免程序在面对意外情形时崩溃；</p> 
<p>你将学习异常，它们是Python创建的特殊对象，用于管理程序运行时出现的错误；你还将学习模块json ，它让你能够保存用户数据，以免在程序停止运行后丢失。</p> 
<p>学习处理文件和保存数据可让你的程序使用起来更容易：用户将能够选择输入什么样的数据，以及在什么时候输入；</p> 
<p>用户使用你的程序做一些工作后，可将程序关闭，以后再接着往下做。学习处理异常可帮助你应对文件不存在的情形，以及处理其他可能导致程序崩溃的问题。</p> 
<p>这让你的程序在面对错误的数据时更健壮——不管这些错误数据源自无意的错误，还是源自破坏程序的恶意企图。</p> 
<p>你在本章学习的技能可提高程序的适用性、可用性和稳定性。</p> 
<h2><a id="91__16"></a>9.1 从文件中读取数据</h2> 
<p>文本文件可存储的数据量多得难以置信：天气数据、交通数据、社会经济数据、文学作品等。</p> 
<p>每当需要分析或修改存储在文件中的信息时，读取文件都很有用，对数据分析应用程序来说尤其如此。</p> 
<p>例如，你可以编写一个这样的程序：读取一个文本文件的内容，重新设置这些数据的格式并将其写入文件，让浏览器能够显示这些内容。</p> 
<p>要使用文本文件中的信息，首先需要将信息读取到内存中。为此，你可以一次性读取文件的全部内容，也可以以每次一行的方式逐步读取。</p> 
<h3><a id="911__24"></a>9.1.1 读取整个文件</h3> 
<p>要读取文件，需要一个包含几行文本的文件。下面首先来创建一个文件，它包含精确到小数点后30位的圆周率值，且在小数点后每10位处都换行：</p> 
<p>以下是test.txt的内容,你也应在你的代码目录下新建一个这样的文件：</p> 
<pre><code>Use Python read file!
Do you know it?
It's very useful!
</code></pre> 
<p>下面的程序打开并读取这个文件，再将其内容显示到屏幕上：</p> 
<pre><code class="prism language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    contents <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span>
</code></pre> 
<p>预想的输出结果应该是：</p> 
<pre><code>Use Python read file!
Do you know it?
It's very useful!
</code></pre> 
<p>在这个程序中，第1行代码做了大量的工作。我们先来看看函数open() 。</p> 
<p>要以任何方式使用文件——哪怕仅仅是打印其内容，都得先打开 文件，这样才能访问它。</p> 
<p>函数open()接受一个参数：要打开的文件的名称。</p> 
<p>Python在当前执行的文件所在的目录中查找指定的文件。</p> 
<h3><a id="912__54"></a>9.1.2 文件路径</h3> 
<p>当你将类似test.txt这样的简单文件名传递给函数open() 时，Python将在当前执行的文件（即.py程序文件）所在的目录中查找文件。</p> 
<p>根据你组织文件的方式，有时可能要打开不在程序文件所属目录中的文件。</p> 
<p>例如，你可能将程序文件存储在了文件夹python_work中，而在文件夹python_work中，有一个名为text_files的文件夹，用于存储程序文件操作的文本文件。</p> 
<p>虽然文件夹text_files包含在文件夹python_work中，但仅向open() 传递位于该文件夹中的文件的名称也不可行，因为Python 只在文件夹python_work中查找，而不会在其子文件夹text_files中查找。要让Python打开不与程序文件位于同一个目录中的文件，需要提供文件路径 ，它让Python到系统的特定位置去查找。</p> 
<p>由于文件夹text_files位于文件夹python_work中，因此可使用相对文件路 径来打开该文件夹中的文件。相对文件路径让Python到指定的位置去查找，而该位置是相对于当前运行的程序所在目录的。你可以这样编写代码：</p> 
<p>在Mac OS和linux使用下面这种方式打开：</p> 
<pre><code class="prism language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'text_files/filename.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    contents <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span>
</code></pre> 
<p>这行代码让Python到文件夹python_work下的文件夹text_files中去查找指定的.txt文件。</p> 
<p>在Windows系统中，在文件路径中使用反斜杠（\ ）而不是斜杠（/ ）：</p> 
<pre><code class="prism language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'text_files\\filename.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    contents <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span>
</code></pre> 
<p>你还可以将文件在计算机中的准确位置告诉Python，这样就不用关心当前运行的程序存储在什么地方了。这称为绝对文件路径 。</p> 
<p>在相对路径行不通时，可使用绝对路径。例如，</p> 
<pre><code class="prism language-python">file_path <span class="token operator">=</span> <span class="token string">'C:\\Users\\ehmatthes\\other_files\\text_files\\filename.txt'</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span> <span class="token keyword">as</span> file_object<span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre> 
<p>通过使用绝对路径，可读取系统任何地方的文件。</p> 
<h3><a id="913__89"></a>9.1.3 逐行读取</h3> 
<p>读取文件时，常常需要检查其中的每一行：你可能要在文件中查找特定的信息，或者要以某种方式修改文件中的文本。</p> 
<p>例如，你可能要遍历一个包含天气数据的文件，并使用天气描述中包含字样sunny的行。</p> 
<p>在新闻报道中，你可能会查找包含标签 的行，并按特定的格式设置它。</p> 
<p>要以每次一行的方式检查文件，可对文件对象使用for 循环：</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'test.txt'</span> <span class="token comment"># ❶ </span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span><span class="token comment"># ❸ </span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
</code></pre> 
<p>打印的时候发现空白行多了：</p> 
<pre><code>Use Python read file!

Do you know it?

It's very useful!

</code></pre> 
<p>为何会出现这些空白行呢？因为在这个文件中，每行的末尾都有一个看不见的换行符，而print 语句也会加上一个换行符，因此每行末尾都有两个换行符：一个来自文件，另一个来自print 语句。</p> 
<p>要消除这些多余的空白行，可在print 语句中使用rstrip() ：</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'test.txt'</span> <span class="token comment"># ❶ </span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span><span class="token comment"># ❸ </span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span>rstrip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，输出又与文件内容完全相同了</p> 
<h3><a id="914__122"></a>9.1.4 创建一个包含文件各行内容的列表</h3> 
<p>使用关键字with 时，open() 返回的文件对象只在with 代码块内可用。</p> 
<p>如果要在with 代码块外访问文件的内容，可在with 代码块内将文件的各行存储在一个列表中，并在with 代码块外使用该列表：你可以立即处理文件的各个部分，也可推迟到程序后面再处理。</p> 
<p>下面的示例在with 代码块中将文件test.txt的各行存储在一个列表中，再在with 代码块外打印它们：</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'test.txt'</span> 
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    li <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
</code></pre> 
<p>输出结果如下：</p> 
<pre><code>['Use Python read file!\n', 'Do you know it?\n', "It's very useful!"]
</code></pre> 
<h3><a id="915__138"></a>9.1.5 使用文件的内容</h3> 
<p>将文件读取到内存中后，就可以以任何方式使用这些数据了。</p> 
<p>下面以简单的方式使用test.txt中的值。</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'test.txt'</span> 
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    li <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>

s <span class="token operator">=</span> li<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> li<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> li<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
</code></pre> 
<p>输出的结果如下所示,我并未整理大小写字母请将就一下：</p> 
<pre><code>Do you know Use Python read file It's very useful!
</code></pre> 
<h2><a id="92__154"></a>9.2 写入文件</h2> 
<p>保存数据的最简单的方式之一是将其写入到文件中。</p> 
<p>通过将输出写入文件，即便关闭包含程序输出的终端窗口，这些输出也依然存在：你可以在程序结束运行后查看这些输出，可与别人分享输出文件，还可编写程序来将这些输出读取到内存中并进行处理。</p> 
<h3><a id="921__158"></a>9.2.1 写入空文件</h3> 
<p>要将文本写入文件，你在调用open() 时需要提供另一个实参，告诉Python你要写入打开的文件。为明白其中的工作原理，我们来将一条简单的消息存储到文件中，而不是将其打印到屏幕上：</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'Python.txt'</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'w+'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> file_object<span class="token punctuation">:</span>
    file_object<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"I love Python."</span><span class="token punctuation">)</span>
</code></pre> 
<p>这样将会把"I love Python." 写入文件中</p> 
<p>如果你要写入的文件不存在，函数open() 将自动创建它。因为我们在w后面有个“+”号，否则将会报错(文件不存在)</p> 
<p>然而，以写入（‘w’ ）模式打开文件时千万要小心，因为如果指定的文件已经存在，Python将在返回文件对象前清空该文件。</p> 
<p>相比于你的计算机中的其他文件，这个文件没有什么不同。你可以打开它、在其中输入新文本、复制其内容、将内容粘贴到其中等。</p> 
<h3><a id="922__172"></a>9.2.2 写入多行</h3> 
<p>函数write() 不会在你写入的文本末尾添加换行符，因此如果你写入多行时没有指定换行符，文件看起来可能不是你希望的那样：</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'Python.txt'</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"I love Python3.8"</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"I love Python2.7"</span><span class="token punctuation">)</span>
</code></pre> 
<p>如果你打开Python.txt，将发现两行内容挤在一起：</p> 
<pre><code>I love Python3.8I love Python2.7
</code></pre> 
<p>要让每个字符串都单独占一行，需要在write() 语句中包含换行符：</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'Python.txt'</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"I love Python3.8\n"</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"I love Python2.7\n"</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，输出出现在不同行中:</p> 
<pre><code>I love Python3.8
I love Python2.7
</code></pre> 
<p>像显示到终端的输出一样，还可以使用空格、制表符和空行来设置这些输出的格式。</p> 
<h3><a id="923__198"></a>9.2.3 追加到文件</h3> 
<p>如果你要给文件添加内容，而不是覆盖原有的内容，可以附加模式 打开文件。</p> 
<p>你以附加模式打开文件时，Python不会在返回文件对象前清空文件，而你写入到文件的行都将添加到文件末尾。</p> 
<p>如果指定的文件不存在，Python将为你创建一个空文件。</p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">'Python.txt'</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"This is append mode\n"</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在Python.txt的内容如下：</p> 
<pre><code>I love Python3.8
I love Python2.7
This is append mode
</code></pre> 
<h2><a id="93_eval_216"></a>9.3 使用eval函数自动处理文件内容</h2> 
<p>如果我们想把一个列表文件写入文件，以便我们下次使用，你可能会进行以下操作：</p> 
<pre><code class="prism language-python">li1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token comment"># 写入</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"list.txt"</span><span class="token punctuation">,</span><span class="token string">"w+"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> li1<span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span><span class="token punctuation">)</span> <span class="token comment"># 注意，只能写入字符串</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 读取</span>
li2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"list.txt"</span><span class="token punctuation">,</span><span class="token string">"r+"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    temp <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> temp<span class="token punctuation">:</span>
        li2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 去除\n</span>
</code></pre> 
<p>但是现在你可以使用eval函数来帮助我们进行如此操作：</p> 
<pre><code class="prism language-python">li1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token comment"># 写入</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"list.txt"</span><span class="token punctuation">,</span><span class="token string">"w+"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>li1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>li1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 读取</span>
li2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"list.txt"</span><span class="token punctuation">,</span><span class="token string">"r+"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    li2 <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>li2<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>li2<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出结果如下，可以看到写入的是经过字符串处理的li1，而加载到内存中的li2也是重新变回了我们需要的list对象:</p> 
<pre><code>[1, 2, 3, 4]
[1, 2, 3, 4]
&lt;class 'list'&gt;
</code></pre> 
<p>集合、字典、元组也都是可行的。</p> 
<p>你已经掌握了基本调试的能力，你可以在结合之前学习的知识来验证自己的猜想。</p> 
<h2><a id="94__256"></a>9.4 小结</h2> 
<p>在本章中，你学习了：<br> 如何使用文件；<br> 如何一次性读取整个文件，以及如何以每次一行的方式读取文件的内容；<br> 如何写入文件，以及如何将文本附加到文件末尾；<br> 如何存储Python数据结构，以保存用户提供的信息，避免用户每次运行程序时都需要重新提供。</p> 
<p>文件操作不需要学习太多，懂得读、写、追加三种基础操作再加上一些有利于日后使用的小技巧就足够了。</p> 
<h2><a id="Python_265"></a>Python基础——结束</h2> 
<p>至此，Python基础专栏要结束了。如果你有更好的建议或者还留有疑惑，可以向我提出意见和问题，我将虚心结束或悉心指导。</p> 
<p>结束，同时也意味着新的开始。在学习的路上是永无止境的，往后我们将使用我们所学的Python知识，制作出自己的有意思的小项目。</p> 
<p>在Python的学习道路上，我将一直伴随着大家！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b16f9e533febc0db4c1a6a12681b2a51/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu20.04 无线网卡驱动安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/72e89cfee865416de7659f68e85012e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JavaWeb-Servlet【内含思维导图】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>