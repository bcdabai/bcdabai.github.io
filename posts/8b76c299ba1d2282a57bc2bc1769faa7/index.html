<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java时间戳与Date相互转换、日期格式化、给日期加上指定时长、判断两时间点是否为同一天 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java时间戳与Date相互转换、日期格式化、给日期加上指定时长、判断两时间点是否为同一天" />
<meta property="og:description" content="项目经常涉及到时间戳和Date类型的相互转换、时间类型处理等，我有时候一段时间不写就又忘记了，故而写篇笔记备忘下！
本文主要包含的有：
时间戳与Date类型的相互转换判断是否为同一天日期格式化给日期加上指定时长得到指定时间节点的Date 1、时间戳转Date 注：以下的方法中很多常量和方法我都没有提取出来，正式项目中还是建议大家封装在时间处理类中，规范化操作
public static void main(String[] args) { // 10位的秒级别的时间戳 long time1 = 1527767665; String result1 = new SimpleDateFormat(&#34;yyyy-MM-dd HH:mm:ss&#34;).format(new Date(time1 * 1000)); System.out.println(&#34;10位数的时间戳（秒）---&gt;Date:&#34; &#43; result1); Date date1 = new Date(time1*1000); //对应的就是时间戳对应的Date // 13位的秒级别的时间戳 double time2 = 1515730332000d; String result2 = new SimpleDateFormat(&#34;yyyy-MM-dd HH:mm:ss&#34;).format(time2); System.out.println(&#34;13位数的时间戳（毫秒）---&gt;Date:&#34; &#43; result2); } 10位数的时间戳（秒）---&gt;Date:2018-05-31 19:54:25 13位数的时间戳（毫秒）---&gt;Date:2018-01-12 12:12:12 尤其要注意上面10位的秒级别的时间戳时，不能用int来定义time1变量，否则会得到错误的结果：
public static void main(String[] args) { // 10位的秒级别的时间戳 int time1 = 1527767665; //错误做法 String result1 = new SimpleDateFormat(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8b76c299ba1d2282a57bc2bc1769faa7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-31T23:20:44+08:00" />
<meta property="article:modified_time" content="2018-05-31T23:20:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java时间戳与Date相互转换、日期格式化、给日期加上指定时长、判断两时间点是否为同一天</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>项目经常涉及到时间戳和Date类型的相互转换、时间类型处理等，我有时候一段时间不写就又忘记了，故而写篇笔记备忘下！</p> 
<p>本文主要包含的有：</p> 
<ol><li>时间戳与Date类型的相互转换</li><li>判断是否为同一天</li><li>日期格式化</li><li>给日期加上指定时长</li><li>得到指定时间节点的Date</li></ol> 
<hr> 
<h4>1、时间戳转Date</h4> 
<p>注：以下的方法中很多常量和方法我都没有提取出来，正式项目中还是建议大家封装在时间处理类中，规范化操作</p> 
<pre class="has"><code class="language-java">public static void main(String[] args) {
    // 10位的秒级别的时间戳
    long time1 = 1527767665;
    String result1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date(time1 * 1000));
    System.out.println("10位数的时间戳（秒）---&gt;Date:" + result1);
    Date date1 = new Date(time1*1000);   //对应的就是时间戳对应的Date
    // 13位的秒级别的时间戳
    double time2 = 1515730332000d;
    String result2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(time2);
    System.out.println("13位数的时间戳（毫秒）---&gt;Date:" + result2);
}</code></pre> 
<pre class="has"><code class="language-java">10位数的时间戳（秒）---&gt;Date:2018-05-31 19:54:25
13位数的时间戳（毫秒）---&gt;Date:2018-01-12 12:12:12</code></pre> 
<p><span style="color:#f33b45;">尤其要注意上面10位的秒级别的时间戳时，不能用int来定义time1变量，否则会得到错误的结果：</span></p> 
<pre class="has"><code class="language-java">public static void main(String[] args) {
    // 10位的秒级别的时间戳   
    int time1 = 1527767665;   //错误做法
    String result1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date(time1 * 1000));
    System.out.println("10位数的时间戳（秒）---&gt;Date:" + result1);
}</code></pre> 
<pre class="has"><code class="language-java">10位数的时间戳（秒）---&gt;Date:1969-12-17 23:21:47</code></pre> 
<hr> 
<h4>2、Date转时间戳</h4> 
<pre class="has"><code class="language-java">public static void main(String[] args) {
    //获取指定时间的时间戳，除以1000说明得到的是秒级别的时间戳（10位）
    long time = (new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")).parse("2018-06-30 20:00:00", new ParsePosition(0)).getTime() / 1000;

    //获取时间戳
    long now1 = System.currentTimeMillis();
    long now2 = new Date().getTime();

    System.out.println("获取指定时间的时间戳:" + time);
    System.out.println("当前时间戳:" +now1);
    System.out.println("当前时间戳:" +now2);
}</code></pre> 
<pre class="has"><code class="language-java">获取指定时间的时间戳:1530360000
当前时间戳:1527769494340
当前时间戳:1527769494340</code></pre> 
<hr> 
<h4><strong>3、格式化Date</strong></h4> 
<pre class="has"><code class="language-java">public static void main(String[] args) {
    //使用common-lang包下面的DateFormatUtils类
    String format1 = DateFormatUtils.format(new Date(), "yyyy-MM-dd HH:mm:ss");
    //使用最原始的SimpleDateFormat类
    String format2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date());

    System.out.println("格式化时间1:" + format1);
    System.out.println("格式化时间2:" + format2);
}</code></pre> 
<pre class="has"><code class="language-java">格式化时间1:2018-05-31 20:26:49
格式化时间2:2018-05-31 20:26:49</code></pre> 
<p>DateFormatUtils是<span style="color:#000000;">commons.lang3.time.DateFormatUtils下的，如果你的项目中没有，maven中引入下：</span></p> 
<pre class="has"><code class="language-html">&lt;dependency&gt;
   &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
   &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
   &lt;version&gt;3.6&lt;/version&gt;
&lt;/dependency&gt;</code></pre> 
<hr> 
<h4>4、给日期加上指定时长</h4> 
<p>比如，给现在的时间加上12个小时，这个需求也很常见，例如我做过的某个秒杀接口要返回剩余秒杀时间给前端，那么我就直接计算（比如秒杀持续时间为12小时）：秒杀(倒计时)截止时间=（当前时间+12H）即可。</p> 
<pre class="has"><code class="language-java">public static void main(String[] args) {
    //将指定日期加上固定时间，DateUtils还有其它添加分钟、小时、月份之类的方法api
    //使用到的是commons-lang包下面的DateUitls类
    Date date = DateUtils.addDays(new Date(), 10);   //
    System.out.println("当前时间为:"+DateFormatUtils.format(new Date(),"yyyy-MM-dd HH:mm:ss"));
    String format = DateFormatUtils.format(date, "yyyy-MM-dd HH:mm:ss");
    System.out.println("当前时间加上10天后:" + format);
}</code></pre> 
<pre class="has"><code class="language-java">当前时间为:2018-05-31 20:31:53
当前时间加上10天后:2018-06-10 20:31:53</code></pre> 
<p><span style="color:#000080;">DateUtils也是</span><span style="color:#000000;">commons.lang3.time包下的，别忘了加maven依赖。</span></p> 
<hr> 
<h4>5、得到指定时间节点的日期时间</h4> 
<p>方式一:</p> 
<pre class="has"><code class="language-java">    public static void main(String[] args) throws ParseException {
        //得到指定日期
        String date = "2018-03-03 15:20:12";
        Date parse = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(date);
        System.out.println(parse);
    }</code></pre> 
<p>方式二:</p> 
<pre class="has"><code class="language-java">    /**
     * 获取当天的YYYY-MM-dd 00:00:01 时间点的毫秒级时间戳
     *
     * @return
     */
    public static Long getCurrentBeginDate() {
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.HOUR_OF_DAY, 0);//控制时
        cal.set(Calendar.MINUTE, 0);//控制分
        cal.set(Calendar.SECOND, 1);//控制秒
        return cal.getTimeInMillis();
    }</code></pre> 
<hr> 
<h4>6、判断两个时间点是否为同一天、同一年</h4> 
<p>给定两个日期，快速判断两者是否为同一天或者同一年，比如我做过的一个接口需求是：每人每天有一次抽奖机会，那么当用户当天第二次发送请求时候，我就得判断查询参与记录，并且判断最新一次参与时间和当天是否为同一天。</p> 
<pre class="has"><code class="language-java">    /**
     * 判断是否为同一天：使用commons-lang包下的DateUtils类
     *
     * @param day1
     * @param day2
     * @return
     */
    public boolean isSameDay(Date day1, Date day2) {
        return DateUtils.isSameDay(day1, day2);
    }

    /**
     * 判断是否为同一天：使用joda依赖包里的时间类，效率从一定程度上优于DateUtils.isSameDay()方法
     *
     * @param date1
     * @param date2
     * @return
     */
    public static boolean isSameDay1(Date date1,Date date2){
        if(date1==null || date2==null){
            throw new IllegalArgumentException("date must be not null");
        }
        LocalDate localDate1 = new LocalDate(new DateTime(date1.getTime()));
        LocalDate localDate2 = new LocalDate(new DateTime(date2.getTime()));
        return localDate1.equals(localDate2);
    }</code></pre> 
<p>基本上涉及到时间的处理就这么多了，希望对你有参考帮助！</p> 
<hr> 
<p><img alt="books" class="has" height="20" src="https://images2.imgbox.com/61/06/qpRpZb5q_o.png" width="20"> 引申阅读: <a href="https://blog.csdn.net/fanrenxiang/article/details/85539918">使用quartz实现高级定制化定时任务（包含管理界面）</a></p> 
<p><img alt="books" class="has" height="20" src="https://images2.imgbox.com/f7/82/4uZXD1Da_o.png" width="20"> 推荐阅读:elastic search搜索引擎实战demo:<a href="https://github.com/simonsfan/springboot-quartz-demo">https://github.com/simonsfan/springboot-quartz-demo</a>，分支:feature_es</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad0400aa4838ed64e81be57cb6e1d7b9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">sqlplus命令--spool</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5ccc350d3b7d0d5b396aaaf21002abc7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL 修改时返回受影响行数为 0</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>