<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Maven常用命令、配置、POM、仓库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Maven常用命令、配置、POM、仓库" />
<meta property="og:description" content="（一）常用命令 1）Maven 导出依赖lib 并打包 mvn clean dependency:copy-dependencies -DoutputDirectory=target/classes/lib -DincludeScope=runtime package 2）忽略测试错误 mvn test -Dmaven.test.failure.ignore=true 3） 安装跳过单元测试 mvn install -Dmaven.test.skip=true 4）运行 mvn exec:java -Dexec.mainClass=org.sonatype.mavenbook.weather.Main 好处：不用向classpath中添加所有的依赖 5）独立jar加入本地仓库 mvn install:install-file -Dfile=jar包的位置 -DgroupId=上面的groupId -DartifactId=上面的artifactId -Dversion=上面的version -Dpackaging=jar 如：mvn install:install-file -DgroupId=org.apache.commons -DartifactId=commons-email -Dversion=1.3.2 -Dpackaging=jar -Dfile=E:\workspace\sca-crawler\lib\commons-email-1.3.2.jar 6）查看插件信息 mvn help:describe -Dplugin=exec -Dfull （二）插件定制 向插件传参数定制行为 1）设置主类 &lt;build&gt;
&lt;plugins&gt;
&lt;plugin&gt;
&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
&lt;version&gt;2.4&lt;/version&gt;
&lt;configuration&gt;
&lt;outputDirectory&gt;target&lt;/outputDirectory&gt;
&lt;archive&gt;
&lt;manifest&gt;
&lt;addClasspath&gt;true&lt;/addClasspath&gt;
&lt;classpathPrefix&gt;./lib/&lt;/classpathPrefix&gt;
&lt;mainClass&gt;com.ailk.tosd.ua.hadoop.tool.UAClassifierJob&lt;/mainClass&gt;
&lt;/manifest&gt;
&lt;/archive&gt;
&lt;/configuration&gt;
&lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/build&gt; 2）测试过程测试失败错误:mvn test &lt;build&gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4696dbb7f3df7af41a2bbfd54c3caafa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-07-18T15:48:20+08:00" />
<meta property="article:modified_time" content="2014-07-18T15:48:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Maven常用命令、配置、POM、仓库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="iteye-blog-content-contain" style="font-size:14px;"> 
 <div> 
  <div> 
   <strong>（一）常用命令</strong> 
  </div> 
  <div>
    1）Maven 导出依赖lib 并打包 
  </div> 
  <div>
    mvn clean dependency:copy-dependencies -DoutputDirectory=target/classes/lib  -DincludeScope=runtime package 
  </div> 
  <div>
      
  </div> 
  <div>
    2）忽略测试错误 
  </div> 
  <div>
    mvn test -Dmaven.test.failure.ignore=true 
  </div> 
  <div>
      
  </div> 
  <div>
    3） 安装跳过单元测试 
  </div> 
  <div>
    mvn install -Dmaven.test.skip=true 
  </div> 
  <div>
      
  </div> 
  <div>
    4）运行 
  </div> 
  <div>
    mvn exec:java -Dexec.mainClass=org.sonatype.mavenbook.weather.Main 
   <br> 好处：不用向classpath中添加所有的依赖 
  </div> 
  <div>
      
  </div> 
  <div>
    5）独立jar加入本地仓库 
  </div> 
  <div>
    mvn install:install-file -Dfile=jar包的位置 -DgroupId=上面的groupId -DartifactId=上面的artifactId -Dversion=上面的version -Dpackaging=jar 
  </div> 
  <div>
      
  </div> 
  <div>
    如：mvn install:install-file -DgroupId=org.apache.commons -DartifactId=commons-email -Dversion=1.3.2 -Dpackaging=jar -Dfile=E:\workspace\sca-crawler\lib\commons-email-1.3.2.jar 
  </div> 
  <div>
      
  </div> 
  <div>
    6）查看插件信息 
  </div> 
  <div> 
   <span style="font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:14px;line-height:25px;">mvn help:describe -Dplugin=exec -Dfull </span> 
  </div> 
  <div>
      
  </div> 
  <div> 
   <strong>（二）插件定制</strong> 
  </div> 
  <div> 
   <strong> </strong> 
  </div> 
  <div> 
   <strong>向插件传参数定制行为</strong> 
  </div> 
  <div> 
   <strong> </strong> 
  </div> 
  <div>
    1）设置主类 
   <br> 
   <div> 
    <br> 
    <div> 
     <div> 
      <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;build&gt;<br>      &lt;plugins&gt;<br>           &lt;plugin&gt;<br>                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;<br>                &lt;version&gt;2.4&lt;/version&gt;<br>                &lt;configuration&gt;<br>                     &lt;outputDirectory&gt;target&lt;/outputDirectory&gt;<br>                     &lt;archive&gt;<br>                          &lt;manifest&gt;<br>                               &lt;addClasspath&gt;true&lt;/addClasspath&gt;<br>                               &lt;classpathPrefix&gt;./lib/&lt;/classpathPrefix&gt;<br>                               &lt;mainClass&gt;com.ailk.tosd.ua.hadoop.tool.UAClassifierJob&lt;/mainClass&gt;<br>                          &lt;/manifest&gt;<br>                     &lt;/archive&gt;<br>                &lt;/configuration&gt;<br>           &lt;/plugin&gt;<br>      &lt;/plugins&gt;<br> &lt;/build&gt; </td></tr></tbody></table> 
      <div>
          
      </div> 
     </div> 2）测试过程测试失败错误:mvn test 
    </div> 
    <div>
        
    </div> 
    <div> 
     <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;build&gt;<br>           &lt;plugins&gt;<br>                &lt;plugin&gt;<br>                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>                     &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;<br>                     &lt;configuration&gt;<br>                          &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;<br>                     &lt;/configuration&gt;<br>                &lt;/plugin&gt;<br>           &lt;/plugins&gt;<br> &lt;/build&gt;</td></tr></tbody></table> 
     <div>
         
     </div> 
     <div>
       3）安装过程跳过测试 ：mvn install 
     </div> 
    </div> 
    <div>
        
    </div> 
    <div> 
     <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;build&gt;<br>           &lt;plugins&gt;<br>                &lt;plugin&gt;<br>                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>                     &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;<br>                     &lt;configuration&gt;<br>                          &lt;skip&gt;true&lt;/skip&gt;<br>                     &lt;/configuration&gt;<br>                &lt;/plugin&gt;<br>           &lt;/plugins&gt;<br>      &lt;/build&gt;</td></tr></tbody></table> 
     <div>
         
     </div> 
    </div> 
    <div>
      4）编译插件编译环境1.6 
    </div> 
    <div>
        
    </div> 
    <div> 
     <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;build&gt;<br>           &lt;pluginManagement&gt;<br>                &lt;plugins&gt;<br>                     &lt;plugin&gt;<br>                          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>                          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;<br>                          &lt;configuration&gt;<br>                               &lt;source&gt;1.6&lt;/source&gt;<br>                               &lt;target&gt;1.6&lt;/target&gt;<br>                          &lt;/configuration&gt;<br>                     &lt;/plugin&gt;<br>                &lt;/plugins&gt;<br>           &lt;/pluginManagement&gt;<br> &lt;/build&gt;</td></tr></tbody></table> 
     <div>
         
     </div> 
    </div> 
    <div>
      注：使用sun 专用api 
    </div> 
    <div>
        
    </div> 
    <div> 
     <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;plugin&gt;<br>                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>                     &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;<br>                     &lt;configuration&gt;<br>                          &lt;source&gt;1.6&lt;/source&gt;<br>                          &lt;target&gt;1.6&lt;/target&gt;<br>                          &lt;compilerArguments&gt;<br>                               &lt;verbose /&gt;<br>                               &lt;bootclasspath&gt;${java.home}/lib/rt.jar&lt;/bootclasspath&gt;<br>                          &lt;/compilerArguments&gt;<br>                     &lt;/configuration&gt;<br>                &lt;/plugin&gt;</td></tr></tbody></table> 
     <div>
         
     </div> 
    </div> 
    <div>
      5）配置 copyDependency是只拷贝compile 作用域的 
    </div> 
    <div> 
     <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>     &lt;build&gt;<br>           &lt;pluginManagement&gt;<br>                &lt;plugins&gt;<br>                     &lt;plugin&gt;<br>                          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>                          &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;<br>                          &lt;configuration&gt;<br>                               &lt;includeScope&gt;runtime&lt;/includeScope&gt;<br>                          &lt;/configuration&gt;<br>                     &lt;/plugin&gt;<br>                &lt;/plugins&gt;<br>           &lt;/pluginManagement&gt;<br>      &lt;/build&gt;</td></tr></tbody></table> 
     <div> 
      <ul><li>runtime ： runtime and compile dependencies,</li><li>compile ： compile, provided, and system dependencies,</li><li>test (default) ： all dependencies,</li><li>provided ： provided dependencies,</li><li>system ： system dependencies.</li></ul> 
      <div>
        6）打包所有依赖的jar 中的class 打到同一个包里 
      </div> 
     </div> 
    </div> 
    <div> 
     <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;build&gt;<br>           &lt;plugins&gt;<br>                &lt;plugin&gt;<br>                     &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;<br>                     &lt;configuration&gt;<br>                          &lt;archive&gt;<br>                               &lt;manifest&gt;<br>                                    &lt;addClasspath&gt;true&lt;/addClasspath&gt;<br>                                    &lt;classpathPrefix&gt;./lib/&lt;/classpathPrefix&gt;<br>                                    &lt;!-- &lt;mainClass&gt;com.ailk.tosd.ua.hadoop.tool.UAClassifierJob&lt;/mainClass&gt; --&gt;<br>                               &lt;/manifest&gt;<br>                          &lt;/archive&gt;<br>                          &lt;descriptorRefs&gt;<br>                               &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;<br>                          &lt;/descriptorRefs&gt;<br>                     &lt;/configuration&gt;<br>                &lt;/plugin&gt;<br>           &lt;/plugins&gt;<br>      &lt;/build&gt;</td></tr></tbody></table> 
    </div> 
    <div>
      命令：mvn assembly:assembly   
    </div> 
    <div>
      说明：生成xxxx-1.0-jar-with-dependencies.jar的打包文件, 里面将包含所有的依赖文件 
    </div> 
    <div>
        
    </div> 
    <div>
      三 配置setting.xml 
    </div> 
   </div> 
  </div> 
  <div>
      
  </div> 
  <div>
    1）配置本地库 
  </div> 
  <div>
      
  </div> 
  <div> 
   <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;localRepository&gt;E:\Workspace\Java\Env\Maven\repositories&lt;/localRepository&gt;</td></tr></tbody></table> 
   <div>
       
   </div> 
  </div> 
  <div>
    2）配置中央仓库镜像 
  </div> 
  <div>
      
  </div> 
  <div> 
   <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;mirror&gt;<br>       &lt;id&gt;maven.net.cn&lt;/id&gt;<br>       &lt;name&gt;one of the central mirrors in china&lt;/name&gt;<br>       &lt;url&gt;http://maven.net.cn/content/groups/public/&lt;/url&gt;<br>       &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;<br>  &lt;/mirror&gt;</td></tr></tbody></table> 
   <div>
       
   </div> 
  </div> 
  <div>
    3）配置其他仓库 
  </div> 
  <div>
      
  </div> 
  <div> 
   <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>&lt;profile&gt; <br>       &lt;id&gt;repositoriesProfile&lt;/id&gt; <br>       &lt;!-- repositories and pluginRepositories here--&gt; <br>       &lt;repositories&gt; <br>               &lt;repository&gt; <br>                 &lt;id&gt;sonatype&lt;/id&gt;  &lt;!--id必须唯一--&gt;<br>                 &lt;name&gt;Sonatype Mirror&lt;/name&gt;  &lt;!--描述--&gt;<br>                 &lt;url&gt;http://repository.sonatype.org/content/groups/public/&lt;/url&gt; <br>                 &lt;releases&gt; <br>                   &lt;enabled&gt;true&lt;/enabled&gt;  &lt;!--可以下载releases版本--&gt;<br>                 &lt;/releases&gt; <br>                 &lt;snapshots&gt; <br>                   &lt;enabled&gt;false&lt;/enabled&gt;   &lt;!--禁止下载snapshots版本--&gt;<br>                 &lt;/snapshots&gt; <br>                   &lt;/repository&gt; <br>             &lt;/repositories&gt; <br>             &lt;pluginRepositories&gt; <br>               &lt;pluginRepository&gt; <br>                 &lt;id&gt;sonatype&lt;/id&gt; <br>                 &lt;name&gt;Sonatype Mirror&lt;/name&gt; <br>                 &lt;url&gt;http://repository.sonatype.org/content/groups/public/&lt;/url&gt; <br>                 &lt;releases&gt; <br>                   &lt;enabled&gt;true&lt;/enabled&gt; <br>                 &lt;/releases&gt; <br>                 &lt;snapshots&gt; <br>                   &lt;enabled&gt;false&lt;/enabled&gt; <br>                 &lt;/snapshots&gt;     <br>               &lt;/pluginRepository&gt; <br>             &lt;/pluginRepositories&gt;<br>     &lt;/profile&gt;  </td></tr></tbody></table> 
   <div>
       
   </div> 
  </div> 
  <div>
    激活仓库： 
  </div> 
  <div>
      
  </div> 
  <div> 
   <table border="1" cellspacing="0" cellpadding="2"><tbody><tr><td>  &lt;activeProfiles&gt;<br>     &lt;activeProfile&gt;repositoriesProfile&lt;/activeProfile&gt;<br>   &lt;/activeProfiles&gt;</td></tr></tbody></table> 
   <div>
       
   </div> 
  </div> 
  <div> 
   <strong>（三）常用参数</strong> 
  </div> 
  <div>
    mvn -e 显示详细错误 
   <br> mvn -U 强制更新snapshot类型的插件或依赖库（否则maven一天只会更新一次snapshot依赖） 
   <br> mvn -o 运行offline模式，不联网更新依赖 
  </div> 
  <div> 
   <strong> </strong> 
  </div> 
  <div> 
   <strong>（四）其他问题解决</strong> 
  </div> 
  <div> 
   <strong> </strong> 
  </div> 
  <div> 
   <strong>1 存在*.lastUpdated文件无法更新jar</strong> 
  </div> 
  <div> 
   <strong> </strong> 
  </div> 
  <div>
         使用maven构建的项目，当本地jar文件不存在时，maven会到中央仓库下载，如果存在网络等原因，jar文件下载未成功，相应目录会存在lastUpdated文件，因为有这个lastUpdated文件所以以后都不会真正下载对应ja了。  
  </div> 
  <div>
         解决方法： 
  </div> 
  <div>
         1）在执行mvn compile 之前把lastUpdated 文件删除。 
  </div> 
  <div>
         2）使用 mvn -U clean install 强制更新 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7de067ca8850ee7e45e19bb4566976b5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用ValidationRule类来检查用户输入的有效性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3af3e6669a8f232a1cbd22326c19879b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">互斥类(Cmutex)——MFC</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>