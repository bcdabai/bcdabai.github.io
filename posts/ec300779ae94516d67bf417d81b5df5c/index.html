<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu 中采用 update-alternatives 配置软件多版本 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu 中采用 update-alternatives 配置软件多版本" />
<meta property="og:description" content="原文地址《Ubuntu 中采用 update-alternatives 配置软件多版本》 我的博客 http://tramp.cincout.cn/ 摘要 在 Debian 系统，比如 Ubuntu 中，经常会出现一个软件安装多个版本或类别的需求，而在使用时可以方便的切换。update-alternatives 就是用来在 Debian 系统中维护系统命令连接符的工具。 通过一定的设置，可以实现系统自动的选择最新的软件版本或最合适的软件类别。比如，维护系统的多个JDK 的版本；维护editor 命令所对应的编辑工具是 vim 或 emacs。 命令介绍 基本的命令格式 在Ubuntu 的终端中输入 man update-alternatives 就可以查看该命令的详细使用信息。
命令的基本格式：
update-alternatives [option...] command install 命令 install 命令用来增加一组新的系统命令连接符。
update-alternatives --install link name path priority [--slave link name path]... sudo update-alternatives --install /usr/bin/java java /usr/local/java/jdk-9/bin/java 1702 link 系统中功能相同的软u件的公共链接目录。比如 /usr/bin/javaname 命令连接符在alternatives 目录的名字path 需要被链接的软件的目录，比如/usr/local/java/jdk-9/bin/javapriority 优先级，数值越大优先级越高。当alternative 为 auto 模式时，系统会自动选择优先级高的软件slave slave 创建的链接从属某一个主链接。 查看命令 display update-alternatives --display name 用来展示某一个 name 的包含的链接的详细信息。包括模式、优先级以及当前最佳的软件版本。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ec300779ae94516d67bf417d81b5df5c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-09-28T00:12:38+08:00" />
<meta property="article:modified_time" content="2017-09-28T00:12:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu 中采用 update-alternatives 配置软件多版本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3 id="原文地址ubuntu-中采用-update-alternatives-配置软件多版本">原文地址<a href="http://tramp.cincout.cn/2017/09/27/linux-2017-09-27-debian-update-alternatives/" rel="nofollow">《Ubuntu 中采用 update-alternatives 配置软件多版本》</a></h3> 
<h3 id="我的博客-httptrampcincoutcn">我的博客 <a href="http://tramp.cincout.cn/" rel="nofollow">http://tramp.cincout.cn/</a></h3> 
<h2 id="摘要">摘要</h2> 
<p>在 <code>Debian</code> 系统，比如 <code>Ubuntu</code> 中，经常会出现一个软件安装多个版本或类别的需求，而在使用时可以方便的切换。<code>update-alternatives</code> 就是用来在 <code>Debian</code> 系统中维护系统命令连接符的工具。 <br> 通过一定的设置，可以实现系统自动的选择最新的软件版本或最合适的软件类别。比如，维护系统的多个<code>JDK</code> 的版本；维护<code>editor</code> 命令所对应的编辑工具是 <code>vim</code> 或 <code>emacs</code>。 <br> 
 </p> 
<h2 id="命令介绍">命令介绍</h2> 
<h3 id="基本的命令格式">基本的命令格式</h3> 
<p>在<code>Ubuntu</code> 的终端中输入 <code>man update-alternatives</code> 就可以查看该命令的详细使用信息。</p> 
<p>命令的基本格式：</p> 
<pre class="prettyprint"><code class="language-bash hljs ">update-alternatives [option...] command</code></pre> 
<h3 id="install-命令">install 命令</h3> 
<p><code>install</code> 命令用来增加一组新的系统命令连接符。</p> 
<pre class="prettyprint"><code class="language-bash hljs ">update-alternatives --install link name path priority [--slave link name path]...
<span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/java java /usr/local/java/jdk-<span class="hljs-number">9</span>/bin/java <span class="hljs-number">1702</span> </code></pre> 
<ul><li><strong>link</strong> 系统中功能相同的软u件的公共链接目录。比如 <code>/usr/bin/java</code></li><li><strong>name</strong> 命令连接符在<code>alternatives</code> 目录的名字</li><li><strong>path</strong> 需要被链接的软件的目录，比如<code>/usr/local/java/jdk-9/bin/java</code></li><li><strong>priority</strong> 优先级，数值越大优先级越高。当<code>alternative</code> 为 <code>auto</code> 模式时，系统会自动选择优先级高的软件</li><li><strong>slave</strong> <code>slave</code> 创建的链接从属某一个主链接。</li></ul> 
<h3 id="查看命令">查看命令</h3> 
<h4 id="display">display</h4> 
<p><code>update-alternatives --display name</code> 用来展示某一个 <code>name</code> 的包含的链接的详细信息。包括模式、优先级以及当前最佳的软件版本。</p> 
<pre class="prettyprint"><code class=" hljs lasso">~$ update<span class="hljs-attribute">-alternatives</span> <span class="hljs-subst">--</span>display java
java <span class="hljs-subst">-</span> manual mode
  <span class="hljs-keyword">link</span> currently points <span class="hljs-keyword">to</span> /usr/<span class="hljs-built_in">local</span>/java/jdk1<span class="hljs-number">.8</span><span class="hljs-number">.0</span>_111/bin/java
/usr/lib/jvm/java<span class="hljs-subst">-</span><span class="hljs-number">7</span><span class="hljs-attribute">-openjdk</span><span class="hljs-attribute">-amd64</span>/jre/bin/java <span class="hljs-subst">-</span> priority <span class="hljs-number">1071</span>
  slave java<span class="hljs-number">.1</span><span class="hljs-built_in">.</span>gz: /usr/lib/jvm/java<span class="hljs-subst">-</span><span class="hljs-number">7</span><span class="hljs-attribute">-openjdk</span><span class="hljs-attribute">-amd64</span>/jre/man/man1/java<span class="hljs-number">.1</span><span class="hljs-built_in">.</span>gz
/usr/<span class="hljs-built_in">local</span>/java/jdk<span class="hljs-subst">-</span><span class="hljs-number">9</span>/bin/java <span class="hljs-subst">-</span> priority <span class="hljs-number">1074</span>
/usr/<span class="hljs-built_in">local</span>/java/jdk1<span class="hljs-number">.7</span><span class="hljs-number">.0</span>_79/bin/java <span class="hljs-subst">-</span> priority <span class="hljs-number">1072</span>
/usr/<span class="hljs-built_in">local</span>/java/jdk1<span class="hljs-number">.8</span><span class="hljs-number">.0</span>_111/bin/java <span class="hljs-subst">-</span> priority <span class="hljs-number">1073</span>
Current <span class="hljs-string">'best'</span> version is <span class="hljs-string">'/usr/local/java/jdk-9/bin/java'</span><span class="hljs-built_in">.</span>
</code></pre> 
<p><code>update-alternatives --query</code> 以更友好的格式来查看。 <br> <code>update-alternatives --list</code> 展示更简洁的信息。</p> 
<h3 id="config-命令">config 命令</h3> 
<p><code>config</code> 命令允许我们以交互的形式进行软件的切换。</p> 
<pre class="prettyprint"><code class=" hljs applescript">~$ sudo update-alternatives <span class="hljs-comment">--config java</span>
[sudo] password <span class="hljs-keyword">for</span> zhaoyu: 
There are <span class="hljs-number">4</span> choices <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> alternative java (providing /usr/bin/java).

  Selection    Path                                            Priority   Status
<span class="hljs-comment">------------------------------------------------------------</span>
  <span class="hljs-number">0</span>            /usr/<span class="hljs-keyword">local</span>/java/jdk-<span class="hljs-number">9</span>/bin/java                   <span class="hljs-number">1074</span>      auto mode
  <span class="hljs-number">1</span>            /usr/lib/jvm/java-<span class="hljs-number">7</span>-openjdk-amd64/jre/bin/java   <span class="hljs-number">1071</span>      manual mode
  <span class="hljs-number">2</span>            /usr/<span class="hljs-keyword">local</span>/java/jdk-<span class="hljs-number">9</span>/bin/java                   <span class="hljs-number">1074</span>      manual mode
  <span class="hljs-number">3</span>            /usr/<span class="hljs-keyword">local</span>/java/jdk1<span class="hljs-number">.7</span><span class="hljs-number">.0</span>_79/bin/java             <span class="hljs-number">1072</span>      manual mode
* <span class="hljs-number">4</span>            /usr/<span class="hljs-keyword">local</span>/java/jdk1<span class="hljs-number">.8</span><span class="hljs-number">.0</span>_111/bin/java            <span class="hljs-number">1073</span>      manual mode

Press enter <span class="hljs-keyword">to</span> keep <span class="hljs-keyword">the</span> current choice[*], <span class="hljs-keyword">or</span> type selection <span class="hljs-type">number</span>: 
</code></pre> 
<p>在上述模式下，输入我们想要切换的软件编号即可。</p> 
<h3 id="remove-命令">remove 命令</h3> 
<p><code>update-alternatives --remove name path</code> 命令可以用来移除某个指定的<code>name</code> 中的某个软件版本。比如：</p> 
<pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> update-alternatives --remove java /usr/local/java/jdk1.<span class="hljs-number">6.0</span>_45/bin/java</code></pre> 
<p><code>-- remove-all name</code> 可以用来移除某一<code>name</code> 下的所有软件。</p> 
<h3 id="auto-命令">auto 命令</h3> 
<p><code>update-alternatives --auto name</code> 命令可以用来设置某一<code>name</code> 的软件管理模式为自动。设置完成后，会根据<code>priority</code> 选择版本高的软件。</p> 
<h2 id="总结">总结</h2> 
<p><code>update-alternatives</code> 命令方便地用来进行<code>JDK</code> 的版本管理，包括<code>java javac javap jar</code> 等命令都可以配置。如下：</p> 
<pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/javac javac /usr/local/jdk1.<span class="hljs-number">7.0</span>_80/bin/javac <span class="hljs-number">300</span></code></pre> 
<p>使用该方法管理<code>JDK</code> 时，需要注意<code>$JAVA_HOME PATH</code> 的配置：</p> 
<pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-comment"># java environment</span>
<span class="hljs-keyword">export</span> JAVA_HOME=/usr/local/java/jdk1.<span class="hljs-number">8.0</span>_111
<span class="hljs-keyword">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin:<span class="hljs-variable">$JAVA_HOME</span>/jre/bin
<span class="hljs-keyword">export</span> CLASSPATH=<span class="hljs-variable">$CLASSPATH</span>:.:<span class="hljs-variable">$JAVA_HOME</span>/lib:<span class="hljs-variable">$JAVA_HOME</span>/jre/lib</code></pre> 
<blockquote> 
 <p>要先查找 <code>$PATH</code>(PATH=<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" style=""> 
    
    <span class="math" id="MathJax-Span-1" style="width: 4.536em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.629em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.923em 1000em 2.936em -0.424em); top: -2.771em; left: 0.003em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math; font-style: italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span class="mo" id="MathJax-Span-7" style="font-family: MathJax_Main; padding-left: 0.269em;">:</span></span><span style="display: inline-block; width: 0px; height: 2.776em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.003em; vertical-align: -0.063em;"></span></span> 
   </span><script type="math/tex" id="MathJax-Element-1">PATH:</script>JAVA_HOME/bin:<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" style=""> 
    
    <span class="math" id="MathJax-Span-8" style="width: 16.163em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.909em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.816em 1000em 3.203em -0.424em); top: -2.771em; left: 0.003em;"><span class="mrow" id="MathJax-Span-9"><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math; font-style: italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.163em;"></span></span><span class="msubsup" id="MathJax-Span-13"><span style="display: inline-block; position: relative; width: 1.443em; height: 0px;"><span style="position: absolute; clip: rect(1.709em 1000em 2.723em -0.424em); top: -2.557em; left: 0.003em;"><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span><span style="position: absolute; top: -2.291em; left: 0.749em;"><span class="mi" id="MathJax-Span-15" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.456em;"></span></span></span></span><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-19"><span class="mrow" id="MathJax-Span-20"><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main;">/</span></span></span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="texatom" id="MathJax-Span-25"><span class="mrow" id="MathJax-Span-26"><span class="mo" id="MathJax-Span-27" style="font-family: MathJax_Main;">/</span></span></span><span class="mi" id="MathJax-Span-28" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-29" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-30" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-31" style="font-family: MathJax_Main;">)</span><span class="texatom" id="MathJax-Span-32"><span class="mrow" id="MathJax-Span-33"><span class="mo" id="MathJax-Span-34"><span style='font-family: STIXGeneral, "Arial Unicode MS", serif; font-size: 80%; font-style: normal; font-weight: normal;'>而</span></span></span></span><span class="texatom" id="MathJax-Span-35"><span class="mrow" id="MathJax-Span-36"><span class="mo" id="MathJax-Span-37"><span style='font-family: STIXGeneral, "Arial Unicode MS", serif; font-size: 80%; font-style: normal; font-weight: normal;'>不</span></span></span></span><span class="texatom" id="MathJax-Span-38"><span class="mrow" id="MathJax-Span-39"><span class="mo" id="MathJax-Span-40"><span style='font-family: STIXGeneral, "Arial Unicode MS", serif; font-size: 80%; font-style: normal; font-weight: normal;'>是</span></span></span></span><span class="mo" id="MathJax-Span-41" style="font-family: MathJax_Main;">‘</span></span><span style="display: inline-block; width: 0px; height: 2.776em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.47em; vertical-align: -0.397em;"></span></span> 
   </span><script type="math/tex" id="MathJax-Element-2">JAVA_HOME/jre/bin) 而不是`</script>JAVA_HOME` 对应的路径(PATH=<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" style=""> 
    
    <span class="math" id="MathJax-Span-42" style="width: 10.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.536em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.869em 1000em 3.203em -0.424em); top: -2.771em; left: 0.003em;"><span class="mrow" id="MathJax-Span-43"><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math; font-style: italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.163em;"></span></span><span class="msubsup" id="MathJax-Span-47"><span style="display: inline-block; position: relative; width: 1.443em; height: 0px;"><span style="position: absolute; clip: rect(1.709em 1000em 2.723em -0.424em); top: -2.557em; left: 0.003em;"><span class="mi" id="MathJax-Span-48" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span><span style="position: absolute; top: -2.291em; left: 0.749em;"><span class="mi" id="MathJax-Span-49" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.456em;"></span></span></span></span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-53"><span class="mrow" id="MathJax-Span-54"><span class="mo" id="MathJax-Span-55" style="font-family: MathJax_Main;">/</span></span></span><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-57" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-59" style="font-family: MathJax_Main; padding-left: 0.269em;">:</span></span><span style="display: inline-block; width: 0px; height: 2.776em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.403em; vertical-align: -0.397em;"></span></span> 
   </span><script type="math/tex" id="MathJax-Element-3">JAVA_HOME/bin:</script>JAVA_HOME/jre/bin:$PATH)。</p> 
</blockquote> 
<h2 id="引用">引用</h2> 
<ol><li><a href="http://man.he.net/?topic=update-alternatives&amp;section=all" rel="nofollow noopener noreferrer" target="_blank">update-alternatives</a></li><li><a href="http://man.linuxde.net/" rel="nofollow noopener noreferrer" target="_blank">Linux命令大全</a></li><li><a href="http://www.runoob.com/linux/linux-tutorial.html" rel="nofollow noopener noreferrer" target="_blank">Linux 教程</a></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f645d93914e168df08b169b5dcb5b41/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Excel 数字按长度补0，并转换为文本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a34a0d4424af2773092222c42ded62c1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">动画（Animation）来回变换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>