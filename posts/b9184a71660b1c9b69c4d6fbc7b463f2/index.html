<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cesium介绍及3DTiles数据加载时添加光照效果对比 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Cesium介绍及3DTiles数据加载时添加光照效果对比" />
<meta property="og:description" content="一、Cesium简介 Cesium原意是化学元素铯，铯是制造原子钟的关键元素，通过命名强调了Cesium产品专注于基于时空数据的实时可视化应用。熟悉GIS开发领域的读者都知道，Cesium是一个用于创建3D地理空间应用程序的开源JavaScript库，它允许开发人员在Web浏览器中构建高性能的虚拟地球应用，支持地球上的各种地理空间数据可视化和交互。Cesium主要有以下特点
1.跨平台性: Cesium可以在支持WebGL的各种现代浏览器上运行，包括Google Chrome、Mozilla Firefox、Microsoft Edge等。这使得开发人员能够在不同的平台上提供一致的3D地理空间体验。
2.高性能: Cesium通过使用WebGL技术，以及一系列性能优化和地理空间算法，实现了高性能的3D可视化。这使得它能够处理大规模的地理数据，包括地形、遥感影像、矢量数据等。
3.地理数据支持: Cesium支持多种地理数据格式，包括GeoJSON、KML、CZML等。这使得开发人员能够轻松地集成各种地理信息数据源，从而创建丰富多样的地理空间应用。
4.实时渲染: Cesium支持实时渲染，可以在运行时动态加载和更新地理数据。这使得应用程序能够实时反映地球上的变化，如天气、交通流量等。
5.可定制性: Cesium提供了灵活的API和插件系统，允许开发人员定制和扩展功能。用户可以根据特定需求添加自定义图层、效果和控制器，以满足其应用程序的要求。
6.开源和社区支持: Cesium是一个开源项目，其源代码可在GitHub上获得。这意味着开发人员可以自由查看、修改和共享代码。此外，Cesium有一个活跃的社区，提供了丰富的文档、示例和支持，使开发者能够更轻松地学习和使用这个库。
Cesium广泛应用于多个领域，包括地理信息系统（GIS）、地图服务、军事仿真、科学研究等。它被用于构建虚拟地球应用、飞行模拟、城市规划、自然灾害监测等各种应用场景。
二、3DTiles介绍 前几篇文章中介绍了香港、澳门、台湾、那霸等地区的3DTiles数据；作为构建三维实景的重要数据支撑，这些3DTiles数据在构建三维场景方面比地形瓦片数据在精度上更好，效果表现上更佳。
3D Tiles是Cesium团队提出的一种用于以高效、可扩展的方式存储、传输和渲染大规模3D地理数据的开放规范。该规范由Cesium团队提出，并被许多GIS和虚拟地球应用采用。它主要有以下特点：
1.瓦片（Tiles）结构 3D Tiles使用一种分层的、基于瓦片的结构来组织3D地理数据。每个瓦片包含一个小块的地理信息，这些瓦片可以根据视点的远近进行逐级加载，以实现高效的数据传输和渲染。
2.地理空间数据 3D Tiles支持包括地形、建筑物、植被、点云等在内的各种地理空间数据。这使得它适用于多种应用场景，如城市建模、虚拟地球、地球科学等。
3.支持的数据类型 3DTiles瓦片支持的数据类型包括：
地形瓦片（Terrain Tiles）： 用于表示地球表面的高程数据，支持地球的地形模型。批量化模型瓦片（Batched 3D Model Tiles）： 用于表示建筑物、桥梁、树木等复杂的3D模型。点云瓦片（Point Cloud Tiles）： 用于表示大规模的点云数据，如激光雷达扫描数据。3D模型瓦片（3D Model Tiles）： 用于表示单个3D模型或简单的模型集。
4.瓦片格式 3D Tiles主要使用glTF格式来表示3D模型数据。glTF是一种用于传输3D模型的开放标准，它支持纹理、几何体、材质等多种3D图形元素。
5.优势 3DTiles主要有以下三方面的优势：1.高效性能： 3D Tiles的分层结构允许按需加载，从而提高了性能并降低了网络传输和内存使用。通用性： 3D Tiles适用于不同类型的3D地理数据，使其成为在虚拟地球应用和地理信息系统中通用的标准。可扩展性： 由于其开放的规范，3D Tiles可以灵活地扩展以支持新的数据类型和应用需求，包括模型单体化等新型应用。
三、3DTiles添加光照效果对比 3DTiles在Cesium上表现力，离不开光照效果表达。启用太阳光照，能够使3D模型显示更加真实，具有层次感，下面以澳门3DTiles数据加载，并关闭和启用关照进行对比。
首先关闭光照，使用正常流程进行显示
let tileset = await Cesium.Cesium3DTileset.fromUrl( &#34;http://localhost:8803/tileset.json&#34; ); viewer.scene.primitives.add(tileset); viewer.scene.globe.depthTestAgainstTerrain = false; 在这里未启用光照，只是将tileset对象添加到primitives中，同时depthTestAgainstTerrain设置为false。效果如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b9184a71660b1c9b69c4d6fbc7b463f2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-24T18:03:10+08:00" />
<meta property="article:modified_time" content="2024-01-24T18:03:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cesium介绍及3DTiles数据加载时添加光照效果对比</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Cesium_0"></a>一、Cesium简介</h2> 
<p>Cesium原意是化学元素铯，铯是制造原子钟的关键元素，通过命名强调了Cesium产品专注于基于时空数据的实时可视化应用。熟悉GIS开发领域的读者都知道，Cesium是一个用于创建3D地理空间应用程序的开源JavaScript库，它允许开发人员在Web浏览器中构建高性能的虚拟地球应用，支持地球上的各种地理空间数据可视化和交互。Cesium主要有以下特点</p> 
<h3><a id="1_2"></a>1.跨平台性:</h3> 
<p>Cesium可以在支持WebGL的各种现代浏览器上运行，包括Google Chrome、Mozilla Firefox、Microsoft Edge等。这使得开发人员能够在不同的平台上提供一致的3D地理空间体验。</p> 
<h3><a id="2_4"></a>2.高性能:</h3> 
<p>Cesium通过使用WebGL技术，以及一系列性能优化和地理空间算法，实现了高性能的3D可视化。这使得它能够处理大规模的地理数据，包括地形、遥感影像、矢量数据等。</p> 
<h3><a id="3_6"></a>3.地理数据支持:</h3> 
<p>Cesium支持多种地理数据格式，包括GeoJSON、KML、CZML等。这使得开发人员能够轻松地集成各种地理信息数据源，从而创建丰富多样的地理空间应用。</p> 
<h3><a id="4_8"></a>4.实时渲染:</h3> 
<p>Cesium支持实时渲染，可以在运行时动态加载和更新地理数据。这使得应用程序能够实时反映地球上的变化，如天气、交通流量等。</p> 
<h3><a id="5_10"></a>5.可定制性:</h3> 
<p>Cesium提供了灵活的API和插件系统，允许开发人员定制和扩展功能。用户可以根据特定需求添加自定义图层、效果和控制器，以满足其应用程序的要求。</p> 
<h3><a id="6_12"></a>6.开源和社区支持:</h3> 
<p>Cesium是一个开源项目，其源代码可在GitHub上获得。这意味着开发人员可以自由查看、修改和共享代码。此外，Cesium有一个活跃的社区，提供了丰富的文档、示例和支持，使开发者能够更轻松地学习和使用这个库。</p> 
<p>Cesium广泛应用于多个领域，包括地理信息系统（GIS）、地图服务、军事仿真、科学研究等。它被用于构建虚拟地球应用、飞行模拟、城市规划、自然灾害监测等各种应用场景。</p> 
<h2><a id="3DTiles_17"></a>二、3DTiles介绍</h2> 
<p>前几篇文章中介绍了香港、澳门、台湾、那霸等地区的3DTiles数据；作为构建三维实景的重要数据支撑，这些3DTiles数据在构建三维场景方面比地形瓦片数据在精度上更好，效果表现上更佳。<br> 3D Tiles是Cesium团队提出的一种用于以高效、可扩展的方式存储、传输和渲染大规模3D地理数据的开放规范。该规范由Cesium团队提出，并被许多GIS和虚拟地球应用采用。它主要有以下特点：</p> 
<h3><a id="1Tiles_20"></a>1.瓦片（Tiles）结构</h3> 
<p>3D Tiles使用一种分层的、基于瓦片的结构来组织3D地理数据。每个瓦片包含一个小块的地理信息，这些瓦片可以根据视点的远近进行逐级加载，以实现高效的数据传输和渲染。</p> 
<h3><a id="2_23"></a>2.地理空间数据</h3> 
<p>3D Tiles支持包括地形、建筑物、植被、点云等在内的各种地理空间数据。这使得它适用于多种应用场景，如城市建模、虚拟地球、地球科学等。</p> 
<h3><a id="3_26"></a>3.支持的数据类型</h3> 
<p>3DTiles瓦片支持的数据类型包括：<br> 地形瓦片（Terrain Tiles）： 用于表示地球表面的高程数据，支持地球的地形模型。批量化模型瓦片（Batched 3D Model Tiles）： 用于表示建筑物、桥梁、树木等复杂的3D模型。点云瓦片（Point Cloud Tiles）： 用于表示大规模的点云数据，如激光雷达扫描数据。3D模型瓦片（3D Model Tiles）： 用于表示单个3D模型或简单的模型集。</p> 
<h3><a id="4_29"></a>4.瓦片格式</h3> 
<p>3D Tiles主要使用glTF格式来表示3D模型数据。glTF是一种用于传输3D模型的开放标准，它支持纹理、几何体、材质等多种3D图形元素。</p> 
<h3><a id="5_31"></a>5.优势</h3> 
<p>3DTiles主要有以下三方面的优势：1.高效性能： 3D Tiles的分层结构允许按需加载，从而提高了性能并降低了网络传输和内存使用。通用性： 3D Tiles适用于不同类型的3D地理数据，使其成为在虚拟地球应用和地理信息系统中通用的标准。可扩展性： 由于其开放的规范，3D Tiles可以灵活地扩展以支持新的数据类型和应用需求，包括模型单体化等新型应用。</p> 
<h2><a id="3DTiles_34"></a>三、3DTiles添加光照效果对比</h2> 
<p>3DTiles在Cesium上表现力，离不开光照效果表达。启用太阳光照，能够使3D模型显示更加真实，具有层次感，下面以澳门3DTiles数据加载，并关闭和启用关照进行对比。<br> 首先关闭光照，使用正常流程进行显示</p> 
<pre><code class="prism language-javascript">  <span class="token keyword">let</span> tileset <span class="token operator">=</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span>Cesium3DTileset<span class="token punctuation">.</span><span class="token function">fromUrl</span><span class="token punctuation">(</span>
    <span class="token string">"http://localhost:8803/tileset.json"</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tileset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>depthTestAgainstTerrain <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre> 
<p>在这里未启用光照，只是将tileset对象添加到primitives中，同时depthTestAgainstTerrain设置为false。效果如下：<br> <img src="https://images2.imgbox.com/37/9e/3SJLhRJv_o.png" alt="在这里插入图片描述"><br> 我们启用光照</p> 
<pre><code class="prism language-javascript">  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>enableLighting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>direction<span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token number">0.354925</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.1290918</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.383358</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>light<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>light<span class="token punctuation">.</span>intensity <span class="token operator">=</span> <span class="token number">2.8</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span>  tileset <span class="token operator">=</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span>Cesium3DTileset<span class="token punctuation">.</span><span class="token function">fromUrl</span><span class="token punctuation">(</span>
    <span class="token string">"http://localhost:8803/tileset.json"</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tileset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>depthTestAgainstTerrain <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/a3/mDYkJ7OV_o.png" alt="在这里插入图片描述"><br> 通过上面对比可以看出，启用了光照后，画面整体光照强度提升了不少，在三维模型细节表现上效果更好。</p> 
<h2><a id="_62"></a>四、结语</h2> 
<p>通过以上对比可以看出，在Cesium上除了地形、3DTiles数据本身分辨率、数据质量外，Cesium光照、阴影等效果对数据的表现，起到了锦上添花的作用</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f20ae4d9b9917d55da12b5c640cf2bf9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络与IO</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43a0282b312cfc0131cefe0b64592b54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ASP.NET Core基础之用扩展方法封装服务配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>