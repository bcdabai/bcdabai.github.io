<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot 优雅配置跨域多种方式及Spring Security跨域访问配置的坑 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot 优雅配置跨域多种方式及Spring Security跨域访问配置的坑" />
<meta property="og:description" content="前言 最近在做项目的时候，基于前后端分离的权限管理系统，后台使用 Spring Security 作为权限控制管理， 然后在前端接口访问时候涉及到跨域，但我怎么配置跨域也没有生效，这里有一个坑，在使用Spring Security时候单独配置，SpringBoot 跨越还不行，还需要配置Security 跨域才行。
什么是跨域 跨域是一种浏览器同源安全策略，即浏览器单方面限制脚本的跨域访问
在 HTML 中，&lt;a&gt;, &lt;form&gt;, &lt;img&gt;, &lt;script&gt;, &lt;iframe&gt;, &lt;link&gt; 等标签以及 Ajax 都可以指向一个资源地址，而所谓的跨域请求就是指：当前发起请求的域与该请求指向的资源所在的域不一样。这里的域指的是这样的一个概念：我们认为若协议 &#43; 域名 &#43; 端口号均相同，那么就是同域
当前页面URL和请求的URL首部（端口之前部分）不同则会造成跨域。通俗点讲就是两个URL地址，端口之前部分，只要有一点不同即发生跨域。
例如:
1. 在http://a.baidu.com下访问https://a.baidu.com资源会形成协议跨域。 2. 在a.baidu.com下访问b.baidu.com资源会形成主机跨域。 3. 在a.baidu.com:80下访问a.baidu.com:8080资源会形成端口跨域。 解决跨域的常见方式 JSONP 由于浏览器允许一些带有src属性的标签跨域，常见的有iframe、script、img等，所以JSONP利用script标签可以实习跨域
前端通过script标签请求，并在callback中指定返回的包装实体名称为jsonp(可以自定义)
&lt;script src=&#34;http://aaa.com/getusers?callback=jsonp&#34;&gt;&lt;/script&gt; 后端将返回结果包装成所需数据格式
jsonp({ &#34;error&#34;:200, &#34;message&#34;:&#34;请求成功&#34;, &#34;data&#34;:[{ &#34;username&#34;:&#34;张三&#34;, &#34;age&#34;:20 }] }) 总结：JSONP实现起来很简单，但是只支持GET请求跨域，存在较大的局限性
CORS CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing），允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。
规范中有一组新增的HTTP首部字段 它通过服务器增加一个特殊的Header[Access-Control-Allow-Origin]来告诉客户端跨域的限制，如果浏览器支持CORS、并且判断Origin通过的话，就会允许XMLHttpRequest发起跨域请求
注意：CORS不支持IE8以下版本的浏览器
CORS Header属性解释Access-Control-Allow-Origin允许http://www.xxx.com域（自行设置，这里只做示例）发起跨域请求Access-Control-Max-Age设置在86400秒不需要再发送预校验请求Access-Control-Allow-Methods设置允许跨域请求的方法Access-Control-Allow-Headers允许跨域请求包含content-typeAccess-Control-Allow-Credentials设置允许Cookie SpringBoot解决跨越方式 @CrossOrigin 注解 这种是SpringBoot自带的注解，使用非常简单，只需要在对应的接口添加上次注解就行
就表示这个接口支持跨域，其中origins = &#34;*&#34;
表示所有的地址都可以访问这个接口，也可以写具体的地址，表示只有这个地址访问才能访问到接口
可以注解在类上，和方法上，类上表示此controller所有接口都支持跨域，单个方法上表示只有这个接口支持跨域
这种方法虽然优雅简单，但是缺点也不小，需要跨域的接口都需要加上这个注解，这对前后端分离的项目是不友好的，需要添加很多次，所以这种方式基本上用的很少" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/61a7eebbcbb3691a8963def2ffd8b3ed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-28T21:46:19+08:00" />
<meta property="article:modified_time" content="2021-08-28T21:46:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot 优雅配置跨域多种方式及Spring Security跨域访问配置的坑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>最近在做项目的时候，基于前后端分离的权限管理系统，后台使用 Spring Security 作为权限控制管理， 然后在前端接口访问时候涉及到跨域，但我怎么配置跨域也没有生效，这里有一个坑，在使用<code>Spring Security</code>时候单独配置，SpringBoot 跨越还不行，还需要配置Security 跨域才行。</p> 
<h2><a id="_3"></a>什么是跨域</h2> 
<p>跨域是一种浏览器同源安全策略，即浏览器单方面限制脚本的跨域访问</p> 
<p>在 HTML 中，<code>&lt;a&gt;, &lt;form&gt;, &lt;img&gt;, &lt;script&gt;, &lt;iframe&gt;, &lt;link&gt;</code> 等标签以及 Ajax 都可以指向一个资源地址，而所谓的跨域请求就是指：当前发起请求的域与该请求指向的资源所在的域不一样。这里的域指的是这样的一个概念：我们认为<code>若协议 + 域名 + 端口号均相同，那么就是同域</code></p> 
<p>当前页面URL和请求的URL首部（端口之前部分）不同则会造成跨域。通俗点讲就是两个URL地址，端口之前部分，只要有一点不同即发生跨域。</p> 
<p>例如:</p> 
<pre><code>1. 在http://a.baidu.com下访问https://a.baidu.com资源会形成协议跨域。

2. 在a.baidu.com下访问b.baidu.com资源会形成主机跨域。

3. 在a.baidu.com:80下访问a.baidu.com:8080资源会形成端口跨域。
</code></pre> 
<h2><a id="_19"></a>解决跨域的常见方式</h2> 
<h3><a id="JSONP_20"></a>JSONP</h3> 
<p>由于浏览器允许一些带有src属性的标签跨域，常见的有<code>iframe、script、img</code>等，所以<code>JSONP</code>利用<code>script</code>标签可以实习跨域</p> 
<p>前端通过script标签请求，并在callback中指定返回的包装实体名称为jsonp(可以自定义)</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"http://aaa.com/getusers?callback=jsonp"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>后端将返回结果包装成所需数据格式</p> 
<pre><code class="prism language-java"><span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token string">"error"</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token string">"message"</span><span class="token operator">:</span><span class="token string">"请求成功"</span><span class="token punctuation">,</span>
    <span class="token string">"data"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"username"</span><span class="token operator">:</span><span class="token string">"张三"</span><span class="token punctuation">,</span>
        <span class="token string">"age"</span><span class="token operator">:</span><span class="token number">20</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>总结：JSONP实现起来很简单，但是只支持GET请求跨域，存在较大的局限性</p> 
</blockquote> 
<h3><a id="CORS_45"></a>CORS</h3> 
<p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing），允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。</p> 
<p>规范中有一组新增的HTTP首部字段 它通过服务器增加一个特殊的Header[Access-Control-Allow-Origin]来告诉客户端跨域的限制，如果浏览器支持CORS、并且判断Origin通过的话，就会允许XMLHttpRequest发起跨域请求</p> 
<blockquote> 
 <p>注意：CORS不支持IE8以下版本的浏览器</p> 
</blockquote> 
<table><thead><tr><th align="left">CORS Header属性</th><th align="center">解释</th></tr></thead><tbody><tr><td align="left">Access-Control-Allow-Origin</td><td align="center">允许http://www.xxx.com域（自行设置，这里只做示例）发起跨域请求</td></tr><tr><td align="left">Access-Control-Max-Age</td><td align="center">设置在86400秒不需要再发送预校验请求</td></tr><tr><td align="left">Access-Control-Allow-Methods</td><td align="center">设置允许跨域请求的方法</td></tr><tr><td align="left">Access-Control-Allow-Headers</td><td align="center">允许跨域请求包含content-type</td></tr><tr><td align="left">Access-Control-Allow-Credentials</td><td align="center">设置允许Cookie</td></tr></tbody></table> 
<h2><a id="SpringBoot_71"></a>SpringBoot解决跨越方式</h2> 
<h3><a id="CrossOrigin__73"></a>@CrossOrigin 注解</h3> 
<p>这种是SpringBoot自带的注解，使用非常简单，只需要在对应的接口添加上次注解就行</p> 
<p>就表示这个接口支持跨域，其中<code>origins = "*"</code><br> 表示所有的地址都可以访问这个接口，也可以写具体的地址，表示只有这个地址访问才能访问到接口</p> 
<p><img src="https://images2.imgbox.com/50/90/OLX2FGNn_o.png" alt=""></p> 
<p>可以注解在类上，和方法上，类上表示此<code>controller</code>所有接口都支持跨域，单个方法上表示只有这个接口支持跨域</p> 
<blockquote> 
 <p>这种方法虽然优雅简单，但是缺点也不小，需要跨域的接口都需要加上这个注解，这对前后端分离的项目是不友好的，需要添加很多次，所以这种方式基本上用的很少</p> 
</blockquote> 
<h3><a id="_86"></a>拦截器方式</h3> 
<p>重写WebMvcConfigurer的<code>addCorsMappings</code> 方法</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CorsConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token comment">//项目中的所有接口都支持跨域</span>
                <span class="token punctuation">.</span><span class="token function">allowedOriginPatterns</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token comment">//所有地址都可以访问，也可以配置具体地址</span>
                <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token comment">//"GET", "HEAD", "POST", "PUT", "DELETE", "OPTIONS"</span>
                <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 跨域允许时间</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>注意<code>allowedOrigins("*")</code>和<code>allowCredentials(true)</code>为<code>true</code>时候会出现错误需要改成<code>allowedOriginPatterns("*")</code>或者单独指定接口<code>allowedOrigins("http//www.baidu.com")</code></p> 
</blockquote> 
<p><code>@Configuration</code>表示是配置类，在项目启动的时候会加载。实现<code>WebMvcConfigurer</code>接口并重写<code>addCorsMappings</code> 方法。代码比较简单，也有注释</p> 
<h3><a id="Filter_108"></a>Filter过滤器方式</h3> 
<ol><li>方式一</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token comment">//1.添加CORS配置信息</span>
        <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//放行哪些原始域</span>
          config<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//是否发送Cookie信息</span>
          config<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//放行哪些原始域(请求方式)</span>
          config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//放行哪些原始域(头部信息)</span>
          config<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//暴露哪些头部信息（因为跨域访问默认不能获取全部头部信息）</span>
          config<span class="token punctuation">.</span><span class="token function">addExposedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.添加映射路径</span>
        <span class="token class-name">UrlBasedCorsConfigurationSource</span> configSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configSource<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.返回新的CorsFilter.</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>configSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>方式二<br> 基于servler 最原始的配置方式</li></ol> 
<pre><code>@Slf4j
@Component
public class CorsFilter implements Filter {
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse)servletResponse;
        response.setHeader("Access-Control-Allow-Origin", "*");
        response.setHeader("Access-Control-Allow-Methods", "POST, PUT, GET, OPTIONS, DELETE");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept, client_id, uuid, Authorization");
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Pragma", "no-cache");
        filterChain.doFilter(servletRequest,response);
    }
}
</code></pre> 
<p>以上三种方法都可以解决问题，最常用的应该是第一种、第二种，控制在自家几个域名范围下足以，一般没必要搞得太细。</p> 
<p>这三种配置方式都用了的话，谁生效呢，类似css中样式，<code>就近原则</code>，懂了吧</p> 
<p><img src="https://images2.imgbox.com/8a/51/QPSTyT8q_o.png" alt=""></p> 
<h2><a id="Spring_SecurityCORS_166"></a>Spring Security启用CORS支持</h2> 
<p>如果项目中使用了<code>Spring Security</code> 配置了上面跨越方式还不行，需要单独指定<code>Spring Security</code>跨域</p> 
<blockquote> 
 <p>否则跨越不会生效</p> 
</blockquote> 
<p>Spring Security对CORS提供了非常好的支持，只需在配置器中启用CORS支持，并编写一 个CORS配置源即可</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// We don't need CSRF for this example</span>
        http<span class="token punctuation">.</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// dont authenticate this particular request</span>
                <span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"/*.html"</span><span class="token punctuation">,</span> <span class="token string">"/favicon.ico"</span><span class="token punctuation">,</span> <span class="token string">"/css/**"</span><span class="token punctuation">,</span> <span class="token string">"/js/**"</span><span class="token punctuation">,</span> <span class="token string">"/fonts/**"</span><span class="token punctuation">,</span> <span class="token string">"/layui/**"</span><span class="token punctuation">,</span> <span class="token string">"/img/**"</span><span class="token punctuation">,</span>
                <span class="token string">"/v3/api-docs/**"</span><span class="token punctuation">,</span> <span class="token string">"/swagger-resources/**"</span><span class="token punctuation">,</span> <span class="token string">"/webjars/**"</span><span class="token punctuation">,</span> <span class="token string">"/pages/**"</span><span class="token punctuation">,</span> <span class="token string">"/druid/**"</span><span class="token punctuation">,</span>
                <span class="token string">"/statics/**"</span><span class="token punctuation">,</span> <span class="token string">"/login"</span><span class="token punctuation">,</span> <span class="token string">"/register"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                <span class="token comment">// all other requests need to be authenticated</span>
                        <span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                <span class="token comment">// make sure we use stateless session; session won't be used to</span>
                <span class="token comment">// store user's state.</span>
                <span class="token comment">//覆盖默认登录</span>
                        <span class="token function">exceptionHandling</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticationEntryPoint</span><span class="token punctuation">(</span>jwtAuthenticationEntryPoint<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sessionManagement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// 基于token，所以不需要session</span>
                <span class="token punctuation">.</span><span class="token function">sessionCreationPolicy</span><span class="token punctuation">(</span><span class="token class-name">SessionCreationPolicy</span><span class="token punctuation">.</span>STATELESS<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// Add a filter to validate the tokens with every request</span>
        http<span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span>jwtRequestFilter<span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">CorsConfiguration</span> corsConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedOriginPattern</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span> corsConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/45e6ec0d51e7affeb1c9fb51a23f57d9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">为知笔记 markdown 笔记中的有序编号公式、无编号公式的实例.md</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d0906a369ddff3d0207cb65f174d7460/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js的输入输出方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>