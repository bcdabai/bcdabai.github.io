<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PHP项目用docker一键部署 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PHP项目用docker一键部署" />
<meta property="og:description" content="公司新项目依赖较多，扩展版本参差不一，搭建环境复杂缓慢，所以搭建了一键部署的功能。
docker-compose build 构建docker
docker-compose up 更新docker
docker-compose up -d 后台运行docker
docker exec -it docker-php-1 /bin/bash 进入项目所在的容器内
docker logs docker-php-1 查看项目日志
docker-compose down 关闭所有服务
公司新项目依赖较多，扩展版本参差不一，搭建环境复杂缓慢，所以搭建了一键部署的功能。
准备工作，确保安装了docker并且已启动，否则会安装新docker
目录提权:cd /Users/macuser/.docker/buildx/current
添加本地dns : sudo vim /etc/hosts
git clone 项目到本地
切换到项目中的docker目录
cd /Users/macuser/wdsxiaozhu/spiderv2/docker
执行shell命令
sh install.sh
docker 目录独立出来，方便添加多个项目，
本地项目目录/Users/macuser/www
docker创建并启动
添加一个新项目 docker/nginx/vhost,复制现有的conf，改写成新项目的配置信息
添加hosts
sudo vim /etc/hosts
重启docker下的nginx
docker compose restart nginx
进入docker下的项目目录 docker exec -it docker-php-1 /bin/bash
cd ..
ls -l
cd xiaozhuquan-platfrom/" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/80cfad7634c667775750299fe88615ae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-29T18:06:46+08:00" />
<meta property="article:modified_time" content="2023-11-29T18:06:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PHP项目用docker一键部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>公司新项目依赖较多，扩展版本参差不一，搭建环境复杂缓慢，所以搭建了一键部署的功能。</p> 
<p style="margin-left:.0001pt;text-align:justify;">docker-compose build  构建docker</p> 
<p style="margin-left:.0001pt;text-align:justify;">docker-compose up    更新docker</p> 
<p style="margin-left:.0001pt;text-align:justify;">docker-compose up -d  后台运行docker</p> 
<p style="margin-left:.0001pt;text-align:justify;">docker exec -it docker-php-1 /bin/bash   进入项目所在的容器内</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">docker logs docker-php-1 查看项目日志</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#121212;">docker-compose down</span></span><span style="background-color:#ffffff;"><span style="color:#121212;">  关闭所有服务</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">公司新项目依赖较多，扩展版本参差不一，搭建环境复杂缓慢，所以搭建了一键部署的功能。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">准备工作，确保安装了docker并且已启动，否则会安装新docker</p> 
<p style="margin-left:.0001pt;text-align:justify;">目录提权:cd /Users/macuser/.docker/buildx/current</p> 
<p style="margin-left:.0001pt;text-align:justify;">添加本地dns : sudo vim /etc/hosts</p> 
<p style="margin-left:.0001pt;text-align:justify;">git clone 项目到本地</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">切换到项目中的docker目录</p> 
<p style="margin-left:.0001pt;text-align:justify;">cd /Users/macuser/wdsxiaozhu/spiderv2/docker</p> 
<p style="margin-left:.0001pt;text-align:justify;">执行shell命令</p> 
<p style="margin-left:.0001pt;text-align:justify;"> sh install.sh</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="291" src="https://images2.imgbox.com/fa/00/A1q3T5X0_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">docker 目录独立出来，方便添加多个项目，</p> 
<p style="margin-left:.0001pt;text-align:justify;">本地项目目录/Users/macuser/www</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">docker创建并启动</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">添加一个新项目 </p> 
<p style="margin-left:.0001pt;text-align:justify;">docker/nginx/vhost,复制现有的conf，改写成新项目的配置信息</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">添加hosts</p> 
<p style="margin-left:.0001pt;text-align:justify;">sudo vim /etc/hosts</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">重启docker下的nginx</p> 
<p style="margin-left:.0001pt;text-align:justify;">docker compose restart nginx</p> 
<p style="margin-left:.0001pt;text-align:justify;">进入docker下的项目目录 docker exec -it docker-php-1 /bin/bash</p> 
<p style="margin-left:.0001pt;text-align:justify;">cd ..</p> 
<p style="margin-left:.0001pt;text-align:justify;">ls -l</p> 
<p style="margin-left:.0001pt;text-align:justify;">cd xiaozhuquan-platfrom/</p> 
<p style="margin-left:.0001pt;text-align:justify;">通过composer安装vendor包</p> 
<p style="margin-left:.0001pt;text-align:justify;">composer install</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="451" src="https://images2.imgbox.com/3f/b4/iZ4Eu8hs_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:justify;">查看项目中的目录vendor</p> 
<p style="margin-left:.0001pt;text-align:justify;">访问连接</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">退出项目目录，进入docker目录</p> 
<p style="margin-left:.0001pt;text-align:justify;">新项目安装完成，并访问成功</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/75333f63cf225f95e7e24bb87fbcb67b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows远程连接记录查看和配置（包括本地连接记录和server被连接记录）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/91e4809eb8474b38353c2e2c16480ead/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【分享】Java Helper 与 Utility 类的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>