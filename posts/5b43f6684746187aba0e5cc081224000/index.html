<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序（四）--- 自定义组件详解（properties，数据监听器，纯数据字段，插槽，父子间通信，behaviors） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序（四）--- 自定义组件详解（properties，数据监听器，纯数据字段，插槽，父子间通信，behaviors）" />
<meta property="og:description" content="目录
一、创建组件
二、引用组件
1、局部引用
2、全局引用
三、组件和页面的区别
四、组件样式隔离
1、注意点
2、修改组件的样式隔离选项
五、数据、方法、属性
1、data数据
2、methods方法
3、properties属性
4、data和properties的区别
5、使用setData修改properties的值
六、数据监听器
1、语法格式
2、基本用法
3、监听对象属性的变化
4、监听对象中所有属性的变化
七、纯数据字段
1、使用规则
2、使用纯数据字段改造数据监听器
八、组件的生命周期
1、created,attached,detached
2、lifetimes节点
九、组件所在页面的生命周期
1、pageLifetimes节点
十、插槽
1、单个插槽
2、启用和定义多个插槽
十一、父子组件通信
1、属性绑定（父---&gt;子）
2、事件绑定（子---&gt;父）
3、获取组件实例
十二、behaviors
1、创建behavior
2、导入并使用behavior
3、behavior中所有可用的节点
4、同名字段的覆盖和组合规则
一、创建组件 在项目的根目录中，鼠标右键，创建components -&gt; test 文件夹在新建的components -&gt; test文件夹上，鼠标右键，点击“新建Component&#34;键入组件的名称之后回车，会自动生成组件对应的4个文件，后缀名分别为.js，.json，.wxml和.wxss
二、引用组件 1、局部引用 在页面的.json配置文件中引用组件的方式，叫做“局部引用”。示例代码如下：
{ &#34;component&#34;: true, &#34;usingComponents&#34;: { &#34;my-test&#34;:&#34;/components/test/test&#34; } } 可在.wxml中使用组件：&lt;my-test&gt;&lt;/my-test&gt; 2、全局引用 在app.json 全局配置文件中引用组件的方式，叫做“全局引用”。使用与上面代码相同，全局不用写&#34;component&#34;:true
data:{ n1:0, n2:0, sum:0 }, methods:{ addN1(){ this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5b43f6684746187aba0e5cc081224000/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-05T12:17:35+08:00" />
<meta property="article:modified_time" content="2022-11-05T12:17:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序（四）--- 自定义组件详解（properties，数据监听器，纯数据字段，插槽，父子间通信，behaviors）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6" rel="nofollow">一、创建组件</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6" rel="nofollow">二、引用组件</a></p> 
<p id="1%E3%80%81%E5%B1%80%E9%83%A8%E5%BC%95%E7%94%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%B1%80%E9%83%A8%E5%BC%95%E7%94%A8" rel="nofollow">1、局部引用</a></p> 
<p id="2%E3%80%81%E5%85%A8%E5%B1%80%E5%BC%95%E7%94%A8-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%85%A8%E5%B1%80%E5%BC%95%E7%94%A8" rel="nofollow">2、全局引用</a></p> 
<p id="%E4%B8%89%E3%80%81%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB" rel="nofollow">三、组件和页面的区别</a></p> 
<p id="%E5%9B%9B%E3%80%81%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB" rel="nofollow">四、组件样式隔离</a></p> 
<p id="1%E3%80%81%E6%B3%A8%E6%84%8F%E7%82%B9-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E6%B3%A8%E6%84%8F%E7%82%B9" rel="nofollow">1、注意点</a></p> 
<p id="2%E3%80%81%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%80%89%E9%A1%B9-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%80%89%E9%A1%B9" rel="nofollow">2、修改组件的样式隔离选项</a></p> 
<p id="%C2%A0%E4%BA%94%E3%80%81%E6%95%B0%E6%8D%AE%E3%80%81%E6%96%B9%E6%B3%95%E3%80%81%E5%B1%9E%E6%80%A7-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%94%E3%80%81%E6%95%B0%E6%8D%AE%E3%80%81%E6%96%B9%E6%B3%95%E3%80%81%E5%B1%9E%E6%80%A7" rel="nofollow"> 五、数据、方法、属性</a></p> 
<p id="1%E3%80%81data%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#1%E3%80%81data%E6%95%B0%E6%8D%AE" rel="nofollow">1、data数据</a></p> 
<p id="2%E3%80%81methods%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#2%E3%80%81methods%E6%96%B9%E6%B3%95" rel="nofollow">2、methods方法</a></p> 
<p id="3%E3%80%81properties%E5%B1%9E%E6%80%A7-toc" style="margin-left:40px;"><a href="#3%E3%80%81properties%E5%B1%9E%E6%80%A7" rel="nofollow">3、properties属性</a></p> 
<p id="%C2%A04%E3%80%81data%E5%92%8Cpropertise%E7%9A%84%E5%8C%BA%E5%88%AB-toc" style="margin-left:40px;"><a href="#%C2%A04%E3%80%81data%E5%92%8Cpropertise%E7%9A%84%E5%8C%BA%E5%88%AB" rel="nofollow"> 4、data和properties的区别</a></p> 
<p id="%C2%A05%E3%80%81%E4%BD%BF%E7%94%A8setData%E4%BF%AE%E6%94%B9propertise%E7%9A%84%E5%80%BC-toc" style="margin-left:40px;"><a href="#%C2%A05%E3%80%81%E4%BD%BF%E7%94%A8setData%E4%BF%AE%E6%94%B9propertise%E7%9A%84%E5%80%BC" rel="nofollow"> 5、使用setData修改properties的值</a></p> 
<p id="%C2%A0%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8" rel="nofollow"> 六、数据监听器</a></p> 
<p id="1%E3%80%81%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F" rel="nofollow">1、语法格式</a></p> 
<p id="%C2%A02%E3%80%81%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" rel="nofollow"> 2、基本用法</a></p> 
<p id="3%E3%80%81%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96" rel="nofollow">3、监听对象属性的变化</a></p> 
<p id="4%E3%80%81%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96" rel="nofollow">4、监听对象中所有属性的变化</a></p> 
<p id="%C2%A0%E4%B8%83%E3%80%81%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%83%E3%80%81%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5" rel="nofollow"> 七、纯数据字段</a></p> 
<p id="1%E3%80%81%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99" rel="nofollow">1、使用规则</a></p> 
<p id="%C2%A02%E3%80%81%E4%BD%BF%E7%94%A8%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E6%94%B9%E9%80%A0%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E4%BD%BF%E7%94%A8%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E6%94%B9%E9%80%A0%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8" rel="nofollow"> 2、使用纯数据字段改造数据监听器</a></p> 
<p id="%C2%A0%E5%85%AB%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%85%AB%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" rel="nofollow"> 八、组件的生命周期</a></p> 
<p id="1%E3%80%81created%2Cattached%2Cdetached-toc" style="margin-left:40px;"><a href="#1%E3%80%81created%2Cattached%2Cdetached" rel="nofollow">1、created,attached,detached</a></p> 
<p id="%C2%A02%E3%80%81lifetimes%E8%8A%82%E7%82%B9-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81lifetimes%E8%8A%82%E7%82%B9" rel="nofollow"> 2、lifetimes节点</a></p> 
<p id="%C2%A0%E4%B9%9D%E3%80%81%E7%BB%84%E4%BB%B6%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B9%9D%E3%80%81%E7%BB%84%E4%BB%B6%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" rel="nofollow"> 九、组件所在页面的生命周期</a></p> 
<p id="%C2%A01%E3%80%81pageLifetimes%E8%8A%82%E7%82%B9-toc" style="margin-left:40px;"><a href="#%C2%A01%E3%80%81pageLifetimes%E8%8A%82%E7%82%B9" rel="nofollow"> 1、pageLifetimes节点</a></p> 
<p id="%E5%8D%81%E3%80%81%E6%8F%92%E6%A7%BD-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E3%80%81%E6%8F%92%E6%A7%BD" rel="nofollow">十、插槽</a></p> 
<p id="1%E3%80%81%E5%8D%95%E4%B8%AA%E6%8F%92%E6%A7%BD-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%8D%95%E4%B8%AA%E6%8F%92%E6%A7%BD" rel="nofollow">1、单个插槽</a></p> 
<p id="%C2%A02%E3%80%81%E5%90%AF%E7%94%A8%E5%92%8C%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E5%90%AF%E7%94%A8%E5%92%8C%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD" rel="nofollow"> 2、启用和定义多个插槽</a></p> 
<p id="%C2%A0%E5%8D%81%E4%B8%80%E3%80%81%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%8D%81%E4%B8%80%E3%80%81%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1" rel="nofollow"> 十一、父子组件通信</a></p> 
<p id="%C2%A01%E3%80%81%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%EF%BC%88%E7%88%B6---%3E%E5%AD%90%EF%BC%89-toc" style="margin-left:40px;"><a href="#%C2%A01%E3%80%81%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%EF%BC%88%E7%88%B6---%3E%E5%AD%90%EF%BC%89" rel="nofollow"> 1、属性绑定（父---&gt;子）</a></p> 
<p id="%C2%A02%E3%80%81%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%EF%BC%88%E5%AD%90---%3E%E7%88%B6%EF%BC%89-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%EF%BC%88%E5%AD%90---%3E%E7%88%B6%EF%BC%89" rel="nofollow"> 2、事件绑定（子---&gt;父）</a></p> 
<p id="%C2%A03%E3%80%81%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B-toc" style="margin-left:40px;"><a href="#%C2%A03%E3%80%81%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B" rel="nofollow"> 3、获取组件实例</a></p> 
<p id="%C2%A0%E5%8D%81%E4%BA%8C%E3%80%81behaviors-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%8D%81%E4%BA%8C%E3%80%81behaviors" rel="nofollow"> 十二、behaviors</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BAbehavior-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BAbehavior" rel="nofollow">1、创建behavior</a></p> 
<p id="%C2%A02%E3%80%81%E5%AF%BC%E5%85%A5%E5%B9%B6%E4%BD%BF%E7%94%A8behavior-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E5%AF%BC%E5%85%A5%E5%B9%B6%E4%BD%BF%E7%94%A8behavior" rel="nofollow"> 2、导入并使用behavior</a></p> 
<p id="%C2%A03%E3%80%81behavior%E4%B8%AD%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E8%8A%82%E7%82%B9-toc" style="margin-left:40px;"><a href="#%C2%A03%E3%80%81behavior%E4%B8%AD%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E8%8A%82%E7%82%B9" rel="nofollow"> 3、behavior中所有可用的节点</a></p> 
<p id="%C2%A04%E3%80%81%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99-toc" style="margin-left:40px;"><a href="#%C2%A04%E3%80%81%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99" rel="nofollow"> 4、同名字段的覆盖和组合规则</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6">一、创建组件</h2> 
<ul><li>在项目的根目录中，鼠标右键，创建components -&gt; test 文件夹</li><li>在新建的components -&gt; test文件夹上，鼠标右键，点击“新建Component"</li><li>键入组件的名称之后回车，会自动生成组件对应的4个文件，后缀名分别为.js，.json，.wxml和.wxss<br>  </li></ul> 
<p><img alt="" height="150" src="https://images2.imgbox.com/37/90/AEKFmreZ_o.png" width="147"></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6">二、引用组件</h2> 
<h3 id="1%E3%80%81%E5%B1%80%E9%83%A8%E5%BC%95%E7%94%A8">1、局部引用</h3> 
<p>在页面的.json配置文件中引用组件的方式，叫做“局部引用”。示例代码如下：</p> 
<pre><code class="language-javascript">{
  "component": true,
  "usingComponents": {
    "my-test":"/components/test/test"
  }
}</code></pre> 
<p>可在.wxml中使用组件：&lt;my-test&gt;&lt;/my-test&gt; </p> 
<h3 id="2%E3%80%81%E5%85%A8%E5%B1%80%E5%BC%95%E7%94%A8">2、全局引用</h3> 
<p>在app.json 全局配置文件中引用组件的方式，叫做“全局引用”。使用与上面代码相同，全局不用写"component":true</p> 
<pre><code class="language-javascript">  data:{
    n1:0, n2:0, sum:0
  },
  methods:{
    addN1(){
      this.setData({
        n1:this.data.n1+1
      })
    },
    addN2(){
      this.setData({
        n2:this.data.n2+1
      })
    }
  },
  observers:{
    'n1,n2':function(nn1,nn2){
      this.setData({
        sum:nn1+nn2
      })
    }
  }</code></pre> 
<h2 id="%E4%B8%89%E3%80%81%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB">三、组件和页面的区别</h2> 
<p>从表面来看，组件和页面都是由.js、.json、.wxml和.wxss 这四个文件组成的。但是，组件和页面的.js 与.json文件有明显的不同：</p> 
<ul><li>组件的.json文件中需要声明"component" : true属性</li><li>组件的.js文件中调用的是Component()函数</li><li>组件的事件处理函数需要定义到 methods节点中<br>  </li></ul> 
<h2 id="%E5%9B%9B%E3%80%81%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB">四、组件样式隔离</h2> 
<p>默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的UI结构。</p> 
<h3 id="1%E3%80%81%E6%B3%A8%E6%84%8F%E7%82%B9">1、注意点</h3> 
<ul><li>app.wxss中的全局样式对组件无效</li><li>只有class选择器会有样式隔离效果，id选择器、属性选择器、标签选择器不受样式隔离的影响</li></ul> 
<p>建议：在组件和引用组件的页面中建议使用class选择器，不要使用id、属性、标签选择器！</p> 
<h3 id="2%E3%80%81%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%80%89%E9%A1%B9">2、修改组件的样式隔离选项</h3> 
<p>默认情况下，自定义组件的样式隔离特性能够防止组件内外样式互相干扰的问题。但有时，我们希望在外界能够控制组件内部的样式，此时，可以通过stylelsolation修改组件的样式隔离选项，用法如下：</p> 
<p>方式一：在组件的.js文件中新增如下配置</p> 
<pre><code class="language-javascript">Component({
  options:{
    styleIsolation:'isolated'
  }
}</code></pre> 
<p>方式二：在组件的.json文件中新增如下配置</p> 
<pre><code class="language-javascript"> "styleIsolation":"isolated" </code></pre> 
<p><strong> styleIsolation的可选值</strong></p> 
<p><img alt="" height="139" src="https://images2.imgbox.com/9c/12/lHyP48CW_o.png" width="600"></p> 
<h2 id="%C2%A0%E4%BA%94%E3%80%81%E6%95%B0%E6%8D%AE%E3%80%81%E6%96%B9%E6%B3%95%E3%80%81%E5%B1%9E%E6%80%A7"> 五、数据、方法、属性</h2> 
<p>类似vue</p> 
<h3 id="1%E3%80%81data%E6%95%B0%E6%8D%AE">1、data数据</h3> 
<p>在小程序组件中，用于组件模板渲染的私有数据，需要定义到data节点中。</p> 
<h3 id="2%E3%80%81methods%E6%96%B9%E6%B3%95">2、methods方法</h3> 
<p>在小程序组件中，用于组件模板渲染的私有数据，需要定义到data节点中。</p> 
<p><img alt="" height="273" src="https://images2.imgbox.com/e5/dc/nChRdPTh_o.png" width="406"></p> 
<p> 自定义方法建议以_开头：为了区分事件处理函数和自定义方法。</p> 
<h3 id="3%E3%80%81properties%E5%B1%9E%E6%80%A7">3、properties属性</h3> 
<p>在小程序组件中，properties是组件的对外属性，用来接收外界传递到组件中的数据。</p> 
<p><img alt="" height="289" src="https://images2.imgbox.com/89/cd/DvM9aNVd_o.png" width="568"></p> 
<h3 id="%C2%A04%E3%80%81data%E5%92%8Cpropertise%E7%9A%84%E5%8C%BA%E5%88%AB"> 4、data和properties的区别</h3> 
<p><strong>在vue中</strong>，data可读可写，而properties只读</p> 
<p><strong>在小程序的组件中</strong>，properties属性和data数据的用法相同，它们都是<strong>可读可写</strong>的，只不过：</p> 
<ul><li>data更倾向于存储组件的私有数据</li><li>properties更倾向于存储外界传递到组件中的数据<br>  </li></ul> 
<p> <img alt="" height="219" src="https://images2.imgbox.com/47/c2/SU3zerfx_o.png" width="561"></p> 
<h3 id="%C2%A05%E3%80%81%E4%BD%BF%E7%94%A8setData%E4%BF%AE%E6%94%B9propertise%E7%9A%84%E5%80%BC"> 5、使用setData修改properties的值</h3> 
<p>由于data数据和 properties属性在本质上没有任何区别，因此 properties属性的值也可以用于页面渲染，或使用setData为properties 中的属性重新赋值，示例代码如下：</p> 
<p><img alt="" height="272" src="https://images2.imgbox.com/db/3b/YeRQkJ58_o.png" width="589"></p> 
<h2 id="%C2%A0%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8"> 六、数据监听器</h2> 
<h3 id="1%E3%80%81%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F">1、语法格式</h3> 
<p>数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作。它的作用类似于vue中的watch侦听器。在小程序组件中，数据监听器的基本语法格式如下：</p> 
<p><img alt="" height="219" src="https://images2.imgbox.com/dd/20/rNt8Y9kv_o.png" width="548"></p> 
<h3 id="%C2%A02%E3%80%81%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"> 2、基本用法</h3> 
<pre><code class="language-html">&lt;view&gt;{<!-- -->{n1}}+{<!-- -->{n2}}={<!-- -->{sum}}&lt;/view&gt;
&lt;button size="mini" bindtap="addN1"&gt;n1自增&lt;/button&gt;
&lt;button size="mini" bindtap="addN2"&gt;n2自增&lt;/button&gt;</code></pre> 
<pre><code class="language-javascript">  data:{
    n1:0, n2:0, sum:0
  },
  methods:{
    addN1(){
      this.setData({
        n1:this.data.n1+1
      })
    },
    addN2(){
      this.setData({
        n2:this.data.n2+1
      })
    }
  },
  observers:{
    'n1,n2':function(nn1,nn2){
      this.setData({
        sum:nn1+nn2
      })
    }
  }</code></pre> 
<h3 id="3%E3%80%81%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96">3、监听对象属性的变化</h3> 
<p>数据监听器支持监听对象中单个或多个属性的变化，示例语法如下：</p> 
<p><img alt="" height="270" src="https://images2.imgbox.com/64/94/ZMHWhvds_o.png" width="503"></p> 
<h3 id="4%E3%80%81%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96">4、监听对象中所有属性的变化</h3> 
<p>如果某个对象中需要被监听的属性太多，为了方便，可以使用通配符**来监听对象中所有属性的变化，示例代码如下：</p> 
<p><img alt="" height="194" src="https://images2.imgbox.com/4e/e9/NdkOejLm_o.png" width="376"></p> 
<h2 id="%C2%A0%E4%B8%83%E3%80%81%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5"> 七、纯数据字段</h2> 
<p>概念：纯数据字段指的是那些不用于界面渲染的data字段。</p> 
<p>应用场景：例如有些情况下，某些data 中的字段既不会展示在界面上，也不会传递给其他组件，仅仅在当前组件内部使用。带有这种特性的data字段适合被设置为纯数据字段。</p> 
<p>好处：纯数据字段有助于提升页面更新的性能。</p> 
<h3 id="1%E3%80%81%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99">1、使用规则</h3> 
<p>在Component构造器的options 节点中，指定pureDataPattern为一个正则表达式，字段名符合这个正则表达式的字段将成为纯数据字段，示例代码如下：</p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/90/89/9zJPE4wS_o.png" width="351"></p> 
<h3 id="%C2%A02%E3%80%81%E4%BD%BF%E7%94%A8%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E6%94%B9%E9%80%A0%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8"> 2、使用纯数据字段改造数据监听器</h3> 
<p><img alt="" height="379" src="https://images2.imgbox.com/bf/b3/mewB5OuR_o.png" width="351"></p> 
<h2 id="%C2%A0%E5%85%AB%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"> 八、组件的生命周期</h2> 
<p><img alt="" height="236" src="https://images2.imgbox.com/15/06/MRLRcuAh_o.png" width="601"></p> 
<h3 id="1%E3%80%81created%2Cattached%2Cdetached">1、created,attached,detached</h3> 
<p>在小程序组件中，最重要的生命周期函数有3个，分别是created、attached<br> detached。它们各自的特点如下：</p> 
<p><strong>组件实例刚被创建好的时候，created生命周期函数会被触发</strong></p> 
<ul><li>此时还不能调用setData</li><li>通常在这个生命周期函数中，只应该用于给组件的this添加一些自定义的属性字段</li></ul> 
<p><strong>在组件完全初始化完毕、进入页面节点树后,attached生命周期函数会被触发</strong></p> 
<ul><li>此时， this.data已被初始化完毕</li><li>这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行（例如发请求获取初始数据)</li></ul> 
<p><strong>在组件离开页面节点树后， detached生命周期函数会被触发</strong></p> 
<ul><li>退出一个页面时，会触发页面内每个自定义组件的detached生命周期函数</li><li>此时适合做一些清理性质的工作<br>  </li></ul> 
<h3 id="%C2%A02%E3%80%81lifetimes%E8%8A%82%E7%82%B9"> 2、lifetimes节点</h3> 
<p>在小程序组件中，生命周期函数可以直接定义在Component构造器的第一级参数中，可以在lifetimes字段内进行声明（这是推荐的方式，其优先级最高）。示例代码如下：</p> 
<p><img alt="" height="257" src="https://images2.imgbox.com/b6/1d/1d3lUTPL_o.png" width="433"></p> 
<h2 id="%C2%A0%E4%B9%9D%E3%80%81%E7%BB%84%E4%BB%B6%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"> 九、组件所在页面的生命周期</h2> 
<p>有时，自定义组件的行为依赖于页面状态的变化，此时就需要用到组件所在页面的生命周期。</p> 
<p>例如：每当触发页面的show生命周期函数的时候，我们希望能够重新生成一个随机的RGB颜色值。在自定义组件中，组件所在页面的生命周期函数有如下3个，分别是：</p> 
<p><img alt="" height="134" src="https://images2.imgbox.com/4c/24/nhzGZUXQ_o.png" width="571"></p> 
<h3 id="%C2%A01%E3%80%81pageLifetimes%E8%8A%82%E7%82%B9"> 1、pageLifetimes节点</h3> 
<p>组件所在页面的生命周期函数，需要定义在pageLifetimes 节点中，示例代码如下：</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/fa/cc/d4gexf4z_o.png" width="366"></p> 
<p> :function可省略</p> 
<h2 id="%E5%8D%81%E3%80%81%E6%8F%92%E6%A7%BD">十、插槽</h2> 
<p>在自定义组件的wxml结构中，可以提供一个&lt;slot&gt;节点（插槽），用于承载组件使用者提供的wxml结构。</p> 
<p><img alt="" height="255" src="https://images2.imgbox.com/7e/52/YrNVeVc3_o.png" width="355"></p> 
<h3 id="1%E3%80%81%E5%8D%95%E4%B8%AA%E6%8F%92%E6%A7%BD">1、单个插槽</h3> 
<p>在小程序中，默认每个自定义组件中只允许使用一个&lt;slot&gt;进行占位，这种个数上的限制叫做单个插槽。</p> 
<pre><code class="language-html">&lt;!-- 组件封装者 --&gt;
&lt;!-- 对于不确定的内容，可以使用&lt;slot&gt;进行占位，具体的内容由组件的使用者决定 --&gt;
&lt;slot&gt;&lt;/slot&gt;</code></pre> 
<pre><code class="language-html">&lt;!-- 组件使用者 --&gt;
&lt;my-test4&gt;
 &lt;view&gt;这是通过插槽填充的内容&lt;/view&gt;
&lt;/my-test4&gt;
</code></pre> 
<h3 id="%C2%A02%E3%80%81%E5%90%AF%E7%94%A8%E5%92%8C%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD"> 2、启用和定义多个插槽</h3> 
<p><strong>启用</strong></p> 
<p>在小程序的自定义组件中，需要使用多&lt;slot&gt;插槽时，可以在组件的.js 文件中，通过如下方式进行启用。示例代码如下：</p> 
<pre><code class="language-javascript">Component({
  /**
   * 组件的属性列表
   */
  options:{
    multipleSlots:true
  }
})
</code></pre> 
<p><strong>定义</strong></p> 
<p>可以在组件的.wxml 中使用多个&lt;slot&gt;标签，以不同的name来区分不同的插槽。示例代码如下：</p> 
<pre><code class="language-html">&lt;!-- 组件封装者 --&gt;
&lt;!-- 对于不确定的内容，可以使用&lt;slot&gt;进行占位，具体的内容由组件的使用者决定 --&gt;
&lt;slot name="one"&gt;&lt;/slot&gt;
&lt;slot name="two"&gt;&lt;/slot&gt;</code></pre> 
<pre><code class="language-html">&lt;!-- 组件使用者 --&gt;
&lt;my-test4&gt;
 &lt;view slot="one"&gt;这是通过插槽填充的内容one&lt;/view&gt;
 &lt;view slot="two"&gt;这是通过插槽填充的内容two&lt;/view&gt;
&lt;/my-test4&gt;
</code></pre> 
<h2 id="%C2%A0%E5%8D%81%E4%B8%80%E3%80%81%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"> 十一、父子组件通信</h2> 
<p><strong>属性绑定</strong></p> 
<ul><li>用于父组件向子组件的指定属性设置数据，仅能设置JSON兼容的数据</li></ul> 
<p><strong>事件绑定</strong></p> 
<ul><li>用于子组件向父组件传递数据，可以传递任意数据</li></ul> 
<p><strong>获取组件实例</strong></p> 
<ul><li>父组件还可以通过this.selectComponent()获取子组件实例对象</li><li>这样就可以直接访问子组件的任意数据和方法<br>  </li></ul> 
<h3 id="%C2%A01%E3%80%81%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%EF%BC%88%E7%88%B6---%3E%E5%AD%90%EF%BC%89"> 1、属性绑定（父---&gt;子）</h3> 
<p>属性绑定用于实现父向子传值，而且只能传递普通类型的数据，无法将方法传递给子组件。父组件的示例代码如下：</p> 
<pre><code class="language-javascript">  data: {
    count:0
  },</code></pre> 
<pre><code class="language-html">&lt;my-test5 count="{<!-- -->{count}}"&gt;&lt;/my-test5&gt;</code></pre> 
<p>子组件在properties节点中声明对应的属性并使用。示例代码如下：</p> 
<pre><code class="language-javascript">  /**
   * 组件的属性列表
   */
  properties: {
    count:Number
  },</code></pre> 
<pre><code class="language-html">&lt;view&gt;子组件中，count值为：{<!-- -->{count}}&lt;/view&gt;</code></pre> 
<h3 id="%C2%A02%E3%80%81%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%EF%BC%88%E5%AD%90---%3E%E7%88%B6%EF%BC%89"> 2、事件绑定（子---&gt;父）</h3> 
<p>事件绑定用于实现子向父传值，可以传递任何类型的数据。使用步骤如下：</p> 
<ul><li>在父组件的js中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件</li><li>在父组件的wxml中，通过自定义事件的形式，将步骤1中定义的函数引用，传递给子组件</li><li>在子组件的js中，通过调用this.triggerEvent('自定义事件名称', {/*参数对象*/})，将数据发送到父组件</li><li>在父组件的js中，通过e.detail 获取到子组件传递过来的数据<br>  </li></ul> 
<p> 步骤1：在父组件的js 中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件。</p> 
<pre><code class="language-javascript">// 在父组件中定义方法，
// 将来这个方法会被传递给子组件，供子组件调用
  syncCount(){
     console.log('syncCount')
  },</code></pre> 
<p>步骤2：在父组件的wxml 中，通过自定义事件的形式，将步骤1中定义的函数引用，传递给子组件。</p> 
<pre><code class="language-html">&lt;!-- 使用bind自定义事件名称，结构清晰（推荐） --&gt;
&lt;my-test5 count="{<!-- -->{count}}" bind:sync="syncCount"&gt;&lt;/my-test5&gt;
&lt;!-- 或在bind后面直接写上自定义事件名称 --&gt;
&lt;my-test5 count="{<!-- -->{count}}" bindsync="syncCount"&gt;&lt;/my-test5&gt;</code></pre> 
<p> 步骤3：在子组件的js 中，通过调用this.triggerEvent(自定义事件名称'，{/*参数对象*/})，将数据发送到父组件。</p> 
<pre><code class="language-javascript">  methods: {
    addOne(){
      this.setData({
        count:this.properties.count+1
      }),
      this.triggerEvent('sync',{value:this.properties.count})
    },
  }</code></pre> 
<p> 步骤4：在父组件的js 中，通过e.detail 获取到子组件传递过来的数据。</p> 
<pre><code class="language-javascript">  syncCount(e){
    // console.log('syncCount')
    this.setData({
      count:e.detail.value
    })
  },</code></pre> 
<h3 id="%C2%A03%E3%80%81%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"> 3、获取组件实例</h3> 
<p>可在父组件里调用this.selectComponent("<strong>id或class选择器</strong>")，获取子组件的实例对象，从而直接访问子组件的任意数据和方法。调用时需要传入一个选择器，例如 this.selectComponent(".my-component")。</p> 
<p><img alt="" height="260" src="https://images2.imgbox.com/e6/ff/xqO3cbjI_o.png" width="575"></p> 
<h2 id="%C2%A0%E5%8D%81%E4%BA%8C%E3%80%81behaviors"> 十二、behaviors</h2> 
<p>behaviors是小程序中，用于实现组件间代码共享的特性，类似于Vue.js 中的“mixins”。</p> 
<p><img alt="" height="150" src="https://images2.imgbox.com/1b/9d/cJYd1wUe_o.png" width="260"></p> 
<p>每个behavior可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和方法会被合并到组件中。</p> 
<p>每个组件可以引用多个behavior，behavior也可以引用其它behavior。</p> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BAbehavior">1、创建behavior</h3> 
<p>调用Behavior(Object object)方法即可创建一个共享的behavior实例对象，供所有的组件使用：</p> 
<p><img alt="" height="64" src="https://images2.imgbox.com/79/7d/h1YkXJk9_o.png" width="272"></p> 
<p><img alt="" height="249" src="https://images2.imgbox.com/03/ef/iHytFIJP_o.png" width="352"></p> 
<h3 id="%C2%A02%E3%80%81%E5%AF%BC%E5%85%A5%E5%B9%B6%E4%BD%BF%E7%94%A8behavior"> 2、导入并使用behavior</h3> 
<p>在组件中，使用require()方法导入需要的behavior，挂载后即可访问behavior中的数据或方法，示例代码如下：</p> 
<p><img alt="" height="200" src="https://images2.imgbox.com/70/63/D7AtKub7_o.png" width="490"></p> 
<h3 id="%C2%A03%E3%80%81behavior%E4%B8%AD%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E8%8A%82%E7%82%B9"> 3、behavior中所有可用的节点</h3> 
<p><img alt="" height="264" src="https://images2.imgbox.com/ff/bb/p2ECMjtF_o.png" width="573"></p> 
<h3 id="%C2%A04%E3%80%81%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99"> 4、同名字段的覆盖和组合规则</h3> 
<p>组件和它引用的behavior中可以包含同名的字段，此时可以参考如下3种同名时的处理规则：</p> 
<ul><li>同名的数据字段(data)</li><li>同名的属性(properties)或方法(methods)</li><li>同名的生命周期函数<br>  </li></ul> 
<p> 微信小程序官方文档说明：</p> 
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html" rel="nofollow" title="behaviors | 微信开放文档 (qq.com)">behaviors | 微信开放文档 (qq.com)</a></p> 
<p><strong><span style="color:#ff9900;">---------------------------------------------------------------------------------------------------------------------------------</span></strong></p> 
<p><span style="color:#4da8ee;">自定义组件结束，可对照检验学习成果-----------------------------&gt;</span></p> 
<p> <img alt="" height="274" src="https://images2.imgbox.com/4e/9e/OgAXUzJT_o.png" width="364"></p> 
<p><strong><span style="color:#ff9900;"> --------------------------------------------------------------------------------------------------------------------------------</span></strong></p> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fc312f673791a21cb93ee29c2b2a67f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">神经网络模型训练简记（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/218c902c9f5f87deac35918edb67e86f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">排序算法之选择排序(带优化后方案)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>