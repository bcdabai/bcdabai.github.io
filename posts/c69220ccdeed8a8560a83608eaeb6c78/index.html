<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ambari卸载删除节点步骤 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ambari卸载删除节点步骤" />
<meta property="og:description" content="1.删除组件 yum remove -y hive* yum remove -y hdfs* yum remove -y yarn* yum remove -y mapreduce2* yum remove -y tez* yum remove -y hbase* yum remove -y pig* yum remove -y sqoop* yum remove -y oozie* yum remove -y zookeeper* yum remove -y falcon* yum remove -y storm* yum remove -y flume* yum remove -y accumulo* yum remove -y Ambari Infra* yum remove -y Ambari Metrics* yum remove -y Atlas* yum remove -y Kafka* yum remove -y Knox* yum remove -y Log Search* yum remove -y Ranger* yum remove -y Ranger KMS* yum remove -y SmartSense* yum remove -y Zeppelin Notebook* yum remove -y Druid* yum remove -y Mahout* yum remove -y Slider* yum remove -y atlas* yum remove -y atlas-metadata* yum remove -y ranger* yum remove -y bigtop* yum remove -y spark2* yum remove -y ranger* yum remove -y slider* yum remove -y ranger* yum remove -y spark* 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c69220ccdeed8a8560a83608eaeb6c78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-27T08:40:23+08:00" />
<meta property="article:modified_time" content="2022-05-27T08:40:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ambari卸载删除节点步骤</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_0"></a>1.删除组件</h2> 
<pre><code class="prism language-bash">yum remove -y hive*
yum remove -y hdfs*
yum remove -y yarn*
yum remove -y mapreduce2*
yum remove -y tez*
yum remove -y hbase*
yum remove -y pig*
yum remove -y sqoop*
yum remove -y oozie*
yum remove -y zookeeper*
yum remove -y falcon*
yum remove -y storm*
yum remove -y flume*
yum remove -y accumulo*
yum remove -y Ambari Infra*
yum remove -y Ambari Metrics*
yum remove -y Atlas*
yum remove -y Kafka*
yum remove -y Knox*
yum remove -y Log Search*
yum remove -y Ranger*
yum remove -y Ranger KMS*
yum remove -y SmartSense*
yum remove -y Zeppelin Notebook*
yum remove -y Druid*
yum remove -y Mahout*
yum remove -y Slider*
yum remove -y atlas*    
yum remove -y atlas-metadata*     
yum remove -y ranger*    
yum remove -y bigtop*
yum remove -y spark2*     
yum remove -y ranger*    
yum remove -y slider*     
yum remove -y ranger*    
yum remove -y spark*
</code></pre> 
<h2><a id="2ambariserverambariagent_40"></a>2.删除ambari-server和ambari-agent</h2> 
<pre><code class="prism language-bash">ambari-server stop
ambari-agent stop
yum erase ambari-server –y
yum erase ambari-agent -y
</code></pre> 
<h2><a id="3_48"></a>3.检查组件是否删除干净</h2> 
<p>删除查询出来的组件</p> 
<pre><code class="prism language-bash">yum list installed <span class="token operator">|</span> <span class="token function">grep</span> ambari  
yum list installed <span class="token operator">|</span> <span class="token function">grep</span> hdp
</code></pre> 
<h2><a id="4_56"></a>4.删除用户</h2> 
<pre><code class="prism language-bash"><span class="token function">userdel</span> accumulo
<span class="token function">userdel</span> admin
<span class="token function">userdel</span> ambari-qa
<span class="token function">userdel</span> ams
<span class="token function">userdel</span> atlas
<span class="token function">userdel</span> falcon
<span class="token function">userdel</span> flume
<span class="token function">userdel</span> hadoop
<span class="token function">userdel</span> hbase
<span class="token function">userdel</span> hcat
<span class="token function">userdel</span> hdfs
<span class="token function">userdel</span> hive
<span class="token function">userdel</span> kafka
<span class="token function">userdel</span> kms
<span class="token function">userdel</span> knox
<span class="token function">userdel</span> mapred
<span class="token function">userdel</span> nagios
<span class="token function">userdel</span> oozie
<span class="token function">userdel</span> postgres
<span class="token function">userdel</span> puppet
<span class="token function">userdel</span> ranger
<span class="token function">userdel</span> rrdcached
<span class="token function">userdel</span> spark
<span class="token function">userdel</span> sqoop
<span class="token function">userdel</span> storm
<span class="token function">userdel</span> tez
<span class="token function">userdel</span> <span class="token function">yarn</span>
<span class="token function">userdel</span> yarn-ats
<span class="token function">userdel</span> zeppelin
<span class="token function">userdel</span> zookeeper
</code></pre> 
<h2><a id="5_91"></a>5.删除所有节点上的存储库</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /etc/yum.repos.d/ambari.repo /etc/yum.repos.d/HDP.repo /etc/yum.repos.d/libtirpc.repo
yum clean all
</code></pre> 
<h2><a id="6_98"></a>6.删除日志目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /var/log/ambari* /var/log/hadoop /var/log/hbase /var/log/hive /var/log/oozie /var/log/sqoop /var/log/zookeeper /var/log/flume /var/log/storm /var/log/hive-hcatalog /var/log/falcon /var/log/webhcat /var/log/hadoop-hdfs /var/log/hadoop-yarn /var/log/hadoop-mapreduce /var/log/spark /var/log/spark2 /var/log/ranger /var/log/atlas /var/log/kafka /var/log/knox /var/log/livy2 /var/log/zeppelin /var/log/accumulo /var/log/hst /var/log/solr /var/log/falcon
</code></pre> 
<h2><a id="7_104"></a>7.删除配置目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /etc/ambari* /etc/zookeeper/ /etc/ranger* /etc/rc.d/init.d/ranger* /etc/hadoop /etc/hadoop-httpfs /etc/hbase/ /etc/hive /etc/zookeeper/ /etc/flume /etc/hive-hcatalog /etc/hive-webhcat /etc/phoenix /etc/ambari-metrics-collector /etc/ambari-metrics-monitor /etc/kafka /etc/oozie /etc/storm /etc/tez* /etc/falcon /etc/slider /etc/pig /etc/storm-slider-client /etc/ams-hbase /etc/atlas /etc/hive_llap /etc/hst /etc/knox /etc/livy2 /etc/spark2 /etc/sqoop /etc/zeppelin /etc/rc.d/init.d/ambari*
</code></pre> 
<h2><a id="8pid_110"></a>8.删除pid目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /var/run/accumulo
<span class="token function">rm</span> -rf /var/run/ambari-agent
<span class="token function">rm</span> -rf /var/run/ambari-infra-solr
<span class="token function">rm</span> -rf /var/run/ambari-logsearch-*
<span class="token function">rm</span> -rf /var/run/ambari-metrics-*
<span class="token function">rm</span> -rf /var/run/ambari-server
<span class="token function">rm</span> -rf /var/run/ams-hbase
<span class="token function">rm</span> -rf /var/run/atlas
<span class="token function">rm</span> -rf /var/run/falcon
<span class="token function">rm</span> -rf /var/run/flume
<span class="token function">rm</span> -rf /var/run/ganglia
<span class="token function">rm</span> -rf /var/run/hadoop
<span class="token function">rm</span> -rf /var/run/hadoop-mapreduce
<span class="token function">rm</span> -rf /var/run/hadoop-yarn
<span class="token function">rm</span> -rf /var/run/hbase
<span class="token function">rm</span> -rf /var/run/hive
<span class="token function">rm</span> -rf /var/run/hive-hcatalog
<span class="token function">rm</span> -rf /var/run/hive2
<span class="token function">rm</span> -rf /var/run/hst
<span class="token function">rm</span> -rf /var/run/kafka/
<span class="token function">rm</span> -rf /var/run/knox/
<span class="token function">rm</span> -rf /var/run/livy2/
<span class="token function">rm</span> -rf /var/run/nagios
<span class="token function">rm</span> -rf /var/run/oozie
<span class="token function">rm</span> -rf /var/run/ranger*
<span class="token function">rm</span> -rf /var/run/smartsense-activity-*
<span class="token function">rm</span> -rf /var/run/spark
<span class="token function">rm</span> -rf /var/run/spark2
<span class="token function">rm</span> -rf /var/run/sqoop
<span class="token function">rm</span> -rf /var/run/webhcat
<span class="token function">rm</span> -rf /var/run/zookeeper
</code></pre> 
<h2><a id="9lib_146"></a>9.删除lib库目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /var/lib/ambari*
<span class="token function">rm</span> -rf /var/lib/ams-hbase
<span class="token function">rm</span> -rf /var/lib/flume
<span class="token function">rm</span> -rf /var/lib/hadoop-hdfs
<span class="token function">rm</span> -rf /var/lib/hadoop-mapreduce
<span class="token function">rm</span> -rf /var/lib/hadoop-yarn     
<span class="token function">rm</span> -rf /var/lib/hive
<span class="token function">rm</span> -rf /var/lib/hive2*
<span class="token function">rm</span> -rf /var/lib/knox
<span class="token function">rm</span> -rf /var/lib/oozie
<span class="token function">rm</span> -rf /var/lib/ranger
<span class="token function">rm</span> -rf /var/lib/storm
<span class="token function">rm</span> -rf /var/lib/smartsense
<span class="token function">rm</span> -rf /var/lib/spark2
<span class="token function">rm</span> -rf /var/lib/slider
<span class="token function">rm</span> -rf /var/lib/zookeeper   
<span class="token function">rm</span> -rf /usr/lib/ambari*     
<span class="token function">rm</span> -rf /usr/lib/ams-hbase
<span class="token function">rm</span> -rf /usr/lib/storm
<span class="token function">rm</span> -rf /usr/lib/hadoop
<span class="token function">rm</span> -rf /usr/lib/hbase
<span class="token function">rm</span> -rf /usr/lib/hcatalog
<span class="token function">rm</span> -rf /usr/lib/hive
<span class="token function">rm</span> -rf /usr/lib/sqoop
<span class="token function">rm</span> -rf /usr/lib/zookeeper
<span class="token function">rm</span> -rf /usr/lib/flume
</code></pre> 
<h2><a id="10vartmp_178"></a>10.删除/var/tmp目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /var/tmp/oozie 
<span class="token function">rm</span> -rf /var/tmp/sqoop
</code></pre> 
<h2><a id="11tmp_186"></a>11.删除/tmp下目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /tmp/ambari*
<span class="token function">rm</span> -rf /tmp/hadoop-hdfs
<span class="token function">rm</span> -rf /tmp/hadoop-yarn
<span class="token function">rm</span> -rf /tmp/hadoop-hive
<span class="token function">rm</span> -rf /tmp/hadoop-nagios
<span class="token function">rm</span> -rf /tmp/hadoop-hcat
<span class="token function">rm</span> -rf /tmp/hadoop-ambari-qa
<span class="token function">rm</span> -rf /tmp/hbase-atlas
<span class="token function">rm</span> -rf /tmp/hbase-hbase
<span class="token function">rm</span> -rf /tmp/hbase-root
<span class="token function">rm</span> -rf /tmp/hive
<span class="token function">rm</span> -rf /tmp/hsperfdata_accumulo
<span class="token function">rm</span> -rf /tmp/hsperfdata_ambari-qa
<span class="token function">rm</span> -rf /tmp/hsperfdata_ams
<span class="token function">rm</span> -rf /tmp/hsperfdata_atlas
<span class="token function">rm</span> -rf /tmp/hsperfdata_hbase
<span class="token function">rm</span> -rf /tmp/hsperfdata_hcat
<span class="token function">rm</span> -rf /tmp/hsperfdata_hdfs
<span class="token function">rm</span> -rf /tmp/hsperfdata_hive
<span class="token function">rm</span> -rf /tmp/hsperfdata_kafka
<span class="token function">rm</span> -rf /tmp/hsperfdata_knox
<span class="token function">rm</span> -rf /tmp/hsperfdata_logsearch
<span class="token function">rm</span> -rf /tmp/hsperfdata_mapred
<span class="token function">rm</span> -rf /tmp/hsperfdata_nagios
<span class="token function">rm</span> -rf /tmp/hsperfdata_oozie
<span class="token function">rm</span> -rf /tmp/hsperfdata_yarn
<span class="token function">rm</span> -rf /tmp/hsperfdata_yarn-ats
<span class="token function">rm</span> -rf /tmp/hsperfdata_zookeeper
<span class="token function">rm</span> -rf /tmp/sqoop-ambari-qa
<span class="token function">rm</span> -rf /tmp/hcat
<span class="token function">rm</span> -rf /tmp/hadoop-hdfs
</code></pre> 
<h2><a id="12ambari_223"></a>12.删除ambari相关包</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /var/lib/ambari*
<span class="token function">rm</span> -rf /var/log/ambari*
<span class="token function">rm</span> -rf /etc/ambari*
</code></pre> 
<h2><a id="13_232"></a>13.删除具体数据目录</h2> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf /hadoop/*
<span class="token function">rm</span> -rf /usr/hdp/
<span class="token function">rm</span> -rf /kafka-logs/
<span class="token function">rm</span> -rf /hadoop/zookeeper     
<span class="token function">rm</span> -rf /hadoop/hdfs     
<span class="token function">rm</span> -rf /kafka-logs
</code></pre> 
<h2><a id="14_243"></a>14.查看剩余残留</h2> 
<pre><code class="prism language-bash"><span class="token function">find</span> / -name *hcat* <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name hdfs* <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name *hdp*<span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name *hive* <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name *hiveserver2* <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name *kafka* <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name *mahout* <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
<span class="token function">find</span> / -name *mapred*<span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/57986c755757b9d78f7f1e2f1a8f2d47/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">cs怎么学？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2616e3ed61593dad05ca0d9f7c3769e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">8080端口占用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>