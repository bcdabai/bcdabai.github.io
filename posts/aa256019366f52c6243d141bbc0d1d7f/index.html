<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php使用github上传文件,PHP调用Github API结合jsdelivr作对象存储（文件转链接） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php使用github上传文件,PHP调用Github API结合jsdelivr作对象存储（文件转链接）" />
<meta property="og:description" content="昨天在水群的时候发现群主为了方便管理，设置了群文件仅能由管理员上传。对于偌大的一个群来说确实能防止很多问题，不过有时也略显不方便，因此感觉自己发现了商机开发了一个这样的网页，也可以将其作为方便的对象存储使用。
思路简介
想法的产生
目前市面上有许多免费空间，它们大多数都仅支持PHP，所以作为一个贫穷的学生党，使用PHP进行开发也是可以理解的。
相信大家都知道Github这个平台，人人都可以在其中建立repo，且没有限制大小，相当于一个免费的对象存储了，不过由于服务器的位置问题，速度还是比较慢。
所以这里就用到了jsdelivr提供的免费CDN服务，仅需对github的链接作一下变换即可得到由jsdelivr加速的链接，其访问速度可以说是非常之快了。
由此便产生了使用php&#43;Github&#43;jsdelivr进行开发的想法
具体的思路
首先需要解决的是php调用Github API的问题。虽然笔者对php基本一窍不通，但是毕竟学过一些基础的编程，于是上来就找了一番Github官方的文档：https://developer.github.com/v3/guides/ ，此外我还对照参考了其他语言调用Github API上传文件的一些代码资料。
其次需要解决的是前端的问题，这方面比较容易，但时间消耗也比较大，为了好看，我使用了ZUI框架对界面进行了美化。
PHP上传文件
PHP可使用curl进行一些HTTP操作，上传文件主要用的是HTTP中的PUT请求，对此我随便搜了一个封装好的轮子：http://www.thisbug.com/archives/149
需要注意的是，调Github的API时需要在请求头headers中设置User-Agent为自己的用户名，还要设置Authorization为token附上自己在github的settings中生成的token。
前端构造
前端是一个HTML页面，内含一个打开文件的按钮和一个上传的按钮，并支持拖放功能。
点击打开文件按钮后，将会在页面中产生一个卡片，卡片内容为文件名，以及一个移除按钮，并将文件的base64编码、文件名存入js里的数组。
点击上传按钮后，会调用Ajax进行POST操作，将文件的base64编码及文件名传入PHP后台上传至Github的repo中，PHP后台处理成功后将返回一个经jsdelivr加速的文件链接，Ajax接收这一信息后继而将链接做成一个复制按钮放入对应的卡片中。
代码及成品
本篇文章由一文多发平台ArtiPub自动发布" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/aa256019366f52c6243d141bbc0d1d7f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-28T03:20:54+08:00" />
<meta property="article:modified_time" content="2021-03-28T03:20:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php使用github上传文件,PHP调用Github API结合jsdelivr作对象存储（文件转链接）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>昨天在水群的时候发现群主为了方便管理，设置了群文件仅能由管理员上传。对于偌大的一个群来说确实能防止很多问题，不过有时也略显不方便，因此感觉自己发现了商机开发了一个这样的网页，也可以将其作为方便的对象存储使用。</p> 
 <p>思路简介</p> 
 <p>想法的产生</p> 
 <p>目前市面上有许多免费空间，它们大多数都仅支持PHP，所以作为一个贫穷的学生党，使用PHP进行开发也是可以理解的。</p> 
 <p>相信大家都知道Github这个平台，人人都可以在其中建立repo，且没有限制大小，相当于一个免费的对象存储了，不过由于服务器的位置问题，速度还是比较慢。</p> 
 <p>所以这里就用到了jsdelivr提供的免费CDN服务，仅需对github的链接作一下变换即可得到由jsdelivr加速的链接，其访问速度可以说是非常之快了。</p> 
 <p>由此便产生了使用php+Github+jsdelivr进行开发的想法</p> 
 <p>具体的思路</p> 
 <p>首先需要解决的是php调用Github API的问题。虽然笔者对php基本一窍不通，但是毕竟学过一些基础的编程，于是上来就找了一番Github官方的文档：https://developer.github.com/v3/guides/ ，此外我还对照参考了其他语言调用Github API上传文件的一些代码资料。</p> 
 <p>其次需要解决的是前端的问题，这方面比较容易，但时间消耗也比较大，为了好看，我使用了ZUI框架对界面进行了美化。</p> 
 <p>PHP上传文件</p> 
 <p>PHP可使用curl进行一些HTTP操作，上传文件主要用的是HTTP中的PUT请求，对此我随便搜了一个封装好的轮子：http://www.thisbug.com/archives/149</p> 
 <p>需要注意的是，调Github的API时需要在请求头headers中设置User-Agent为自己的用户名，还要设置Authorization为token附上自己在github的settings中生成的token。</p> 
 <p>前端构造</p> 
 <p>前端是一个HTML页面，内含一个打开文件的按钮和一个上传的按钮，并支持拖放功能。</p> 
 <p>点击打开文件按钮后，将会在页面中产生一个卡片，卡片内容为文件名，以及一个移除按钮，并将文件的base64编码、文件名存入js里的数组。</p> 
 <p>点击上传按钮后，会调用Ajax进行POST操作，将文件的base64编码及文件名传入PHP后台上传至Github的repo中，PHP后台处理成功后将返回一个经jsdelivr加速的文件链接，Ajax接收这一信息后继而将链接做成一个复制按钮放入对应的卡片中。</p> 
 <p>代码及成品</p> 
 <p>本篇文章由一文多发平台ArtiPub自动发布</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26ffffc189340baf59f44e692f728b3e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于动态规划DTW算法加速衡量两个不同的时间序列的相似性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7cb4c7f5f2ecdfb81457e580af92165d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装k8s</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>