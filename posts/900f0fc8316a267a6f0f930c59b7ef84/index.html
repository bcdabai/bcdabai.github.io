<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€FPGAé›¶åŸºç¡€å­¦ä¹ ä¹‹æ—…#12ã€‘ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨ï¼ˆ74HC595ï¼‰ä¸²è¡Œç§»ä½å¯„å­˜å™¨é©±åŠ¨ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ã€FPGAé›¶åŸºç¡€å­¦ä¹ ä¹‹æ—…#12ã€‘ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨ï¼ˆ74HC595ï¼‰ä¸²è¡Œç§»ä½å¯„å­˜å™¨é©±åŠ¨" />
<meta property="og:description" content="ğŸ‰æ¬¢è¿æ¥åˆ°FPGAä¸“æ ~ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨
â˜†* o(â‰§â–½â‰¦)o *â˜†å—¨~æˆ‘æ˜¯å°å¤ä¸é…’ğŸ¹ âœ¨åšå®¢ä¸»é¡µï¼šå°å¤ä¸é…’çš„åšå®¢ ğŸˆè¯¥ç³»åˆ—æ–‡ç« ä¸“æ ï¼šFPGAå­¦ä¹ ä¹‹æ—… æ–‡ç« ä½œè€…æŠ€æœ¯å’Œæ°´å¹³æœ‰é™ï¼Œå¦‚æœæ–‡ä¸­å‡ºç°é”™è¯¯ï¼Œå¸Œæœ›å¤§å®¶èƒ½æŒ‡æ­£ğŸ™ğŸ“œ æ¬¢è¿å¤§å®¶å…³æ³¨ï¼ â¤ï¸
ğŸ‰ ç›®å½•-ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨ ä¸€ã€æ•ˆæœæ¼”ç¤ºäºŒã€ç”µè·¯ç»“æ„ä¸‰ã€ä»£ç è¯¦è§£3.1 æ€»ä½“ç»“æ„è®¾è®¡3.2 é©±åŠ¨74HC595èŠ¯ç‰‡3.3 HEX8æ¨¡å—3.4 é¡¶å±‚æ¨¡å— å››ã€æŒ‰é”®æ§åˆ¶æ”¹å˜æ•°æ®å€¼ ä¸€ã€æ•ˆæœæ¼”ç¤º ğŸ¥ISSPè°ƒè¯•æ¼”ç¤ºï¼š
ç¨‹åºé…ç½®å®Œæˆï¼š
è°ƒè¯•ï¼š
ğŸ¥æŒ‰é”®æ§åˆ¶æ¼”ç¤ºï¼š
äºŒã€ç”µè·¯ç»“æ„ åœ¨ä¸‰çº¿åˆ¶çš„æ•°ç ç®¡é©±åŠ¨ä¸­ï¼Œä½¿ç”¨74HC595èŠ¯ç‰‡æ¥å‡å°‘FPGAçš„ç®¡è„šæ•°é‡ä½¿ç”¨ã€‚
å…³äº74HC595èŠ¯ç‰‡çš„ä»‹ç»å’Œæ—¶åºå›¾ï¼Œå‚è€ƒæ–‡ç« ï¼š74HC595ä»‹ç» å’Œ 74HC595 é©±åŠ¨ã€‚
åœ¨AC620å¼€å‘æ¿ä¸Šçš„æ•°ç ç®¡é©±åŠ¨ç”µè·¯ï¼š
AC620å¼€å‘æ¿ä½¿ç”¨çš„æ˜¯74HC595èŠ¯ç‰‡çš„çº§è”æ¥é©±åŠ¨æ˜¾ç¤ºï¼š
ä¸‰ã€ä»£ç è¯¦è§£ 3.1 æ€»ä½“ç»“æ„è®¾è®¡ å…ˆä¸ŠRTLè§†å›¾ï¼š
HEX8æ¨¡å—å°†segå’Œselä¿¡å·ä¼ ç»™m74HC595_Driveræ¨¡å—ï¼Œç„¶åå°†æ¥æ”¶åˆ°çš„ä¿¡å·è½¬æ¢ä¸ºDSã€SH_CPå’ŒST_CPä¿¡å·ï¼›ISSPæ¨¡å—ç”¨äºè°ƒè¯•ã€‚
3.2 é©±åŠ¨74HC595èŠ¯ç‰‡ å…³äº74HC595èŠ¯ç‰‡çš„é©±åŠ¨ï¼Œä¸»è¦å‚è€ƒè¯¥æ—¶åºå›¾è¿›è¡Œä»£ç ç¼–å†™ï¼š
74HC595æ˜¯8ä½ä¸²è¡Œç§»ä½å¯„å­˜å™¨ï¼Œå¸¦æœ‰å­˜å‚¨å¯„å­˜å™¨å’Œä¸‰æ€å¯„å­˜å™¨ï¼Œå…¶ä¸­ç§»ä½å¯„å­˜å™¨å’Œå­˜å‚¨å¯„å­˜å™¨åˆ†åˆ«é‡‡ç”¨ä¸åŒçš„æ—¶é’Ÿã€‚å…¶å¯ä»¥æŠŠä¸²è¡Œçš„ä¿¡å·è½¬ä¸ºå¹¶è¡Œçš„ä¿¡å·ï¼Œå› æ­¤å¸¸ç”¨åšå„ç§æ•°ç ç®¡ä»¥åŠç‚¹é˜µå±çš„é©±åŠ¨èŠ¯ç‰‡ã€‚
è¯¥èŠ¯ç‰‡çš„ä¸»è¦IOï¼š
IOåç§°åŠŸèƒ½DS / SERä¸²è¡Œæ•°æ®è¾“å…¥ç«¯STCP / RCKå­˜å‚¨å¯„å­˜å™¨çš„æ—¶é’Ÿè¾“å…¥ã€‚ä¸Šå‡æ²¿æ—¶ç§»ä½å¯„å­˜å™¨ä¸­çš„æ•°æ®è¿›å…¥å­˜å‚¨å¯„å­˜å™¨ï¼Œä¸‹é™æ²¿æ—¶å­˜å‚¨å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¿æŒä¸å˜ã€‚åº”ç”¨æ—¶é€šå¸¸å°† ST_CP ç½®ä¸ºä½ç‚¹å¹³ï¼Œç§»ä½ç»“æŸåå†åœ¨ ST_CP ç«¯äº§ç”Ÿä¸€ä¸ªæ­£è„‰å†²æ›´æ–°æ˜¾ç¤ºæ•°æ®ã€‚SHCP / SCKç§»ä½å¯„å­˜å™¨çš„æ—¶é’Ÿè¾“å…¥ã€‚ä¸Šå‡æ²¿æ—¶ç§»ä½å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¾æ¬¡ç§»åŠ¨ä¸€ä½ï¼Œå³ Q0 ä¸­çš„æ•°æ®ç§»åˆ° Q1 ä¸­ï¼ŒQ1 ä¸­çš„æ•°æ®ç§»åˆ° Q2 ä¸­ï¼Œä¾æ¬¡ç±»æ¨ï¼›ä¸‹é™æ²¿æ—¶ç§»ä½å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¿æŒä¸å˜ã€‚ ç”±äºåœ¨AC620å¼€å‘æ¿ä¸­èŠ¯ç‰‡é‡‡ç”¨3.3Vä¾›ç”µï¼Œè¿™æ ·åœ¨è®¾è®¡74HC595å·¥ä½œé¢‘ç‡æ—¶ï¼Œç›´æ¥ä½¿ç”¨50Mæ™¶æŒ¯å››åˆ†é¢‘åçš„æ—¶é’Ÿä½œä¸ºå…¶å·¥ä½œæ—¶é’Ÿã€‚
74HC595çš„é©±åŠ¨ä»£ç ï¼Œç”±äºæ¨¡å—å‘½åä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œæ‰€ä»¥åŠ äº†ä¸ªmï¼š
m74HC595_Driver.vï¼š
module m74HC595_Driver( Clk, Rst_n, Data, S_EN, SH_CP,	//SCK ST_CP,	//RCK DS	//Data ); parameter DATA_WIDTH = 16; input Clk; input Rst_n; input [DATA_WIDTH-1 : 0] Data;	//data to send input S_EN;	//send en output reg SH_CP;	//shift clock output reg ST_CP;	//latch data clock output reg DS;	//shift serial data parameter CNT_MAX = 4; reg [15:0] divider_cnt;//åˆ†é¢‘è®¡æ•°å™¨ wire sck_pluse; reg [4:0]SHCP_EDGE_CNT;//SH_CP EDGE counter reg [15:0]r_data; always@(posedge Clk or negedge Rst_n)begin if(!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/900f0fc8316a267a6f0f930c59b7ef84/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-10T13:11:11+08:00" />
<meta property="article:modified_time" content="2023-09-10T13:11:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€FPGAé›¶åŸºç¡€å­¦ä¹ ä¹‹æ—…#12ã€‘ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨ï¼ˆ74HC595ï¼‰ä¸²è¡Œç§»ä½å¯„å­˜å™¨é©±åŠ¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><font size="5" face="å¾®è½¯é›…é»‘">ğŸ‰æ¬¢è¿æ¥åˆ°FPGAä¸“æ ~ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨</font></p> 
 <hr color="#000000" size='5"'> 
 <ul><li><font size="2" face="å¾®è½¯é›…é»‘"> â˜†* o(â‰§â–½â‰¦)o *â˜†<strong>å—¨</strong>~æˆ‘æ˜¯<strong>å°å¤ä¸é…’</strong>ğŸ¹</font></li><li><font size="2" face="å¾®è½¯é›…é»‘"> âœ¨<strong>åšå®¢ä¸»é¡µï¼š</strong><a href="https://blog.csdn.net/m0_56262476?type=blog">å°å¤ä¸é…’çš„åšå®¢</a></font></li><li><font size="2" face="å¾®è½¯é›…é»‘"> ğŸˆè¯¥ç³»åˆ—<strong>æ–‡ç« ä¸“æ ï¼š</strong><a href="https://blog.csdn.net/m0_56262476/category_12100936.html">FPGAå­¦ä¹ ä¹‹æ—…</a></font></li><li><font size="2" face="å¾®è½¯é›…é»‘"> æ–‡ç« ä½œè€…æŠ€æœ¯å’Œæ°´å¹³æœ‰é™ï¼Œå¦‚æœæ–‡ä¸­å‡ºç°é”™è¯¯ï¼Œå¸Œæœ›å¤§å®¶èƒ½æŒ‡æ­£ğŸ™</font></li><li><font size="2" face="å¾®è½¯é›…é»‘">ğŸ“œ <strong>æ¬¢è¿å¤§å®¶å…³æ³¨ï¼</strong> â¤ï¸</font><br> <img src="https://images2.imgbox.com/52/d9/MNCEsUak_o.jpg" alt="FPGQ2" width="90%"></li></ul> 
</blockquote> 
<p><img src="https://images2.imgbox.com/67/ca/5ahZ0UC8_o.gif" alt="CSDN"></p> 
<p></p> 
<div class="toc"> 
 <h4>ğŸ‰ ç›®å½•-ä¸‰çº¿åˆ¶æ•°ç ç®¡é©±åŠ¨</h4> 
 <ul><li><a href="#_18" rel="nofollow">ä¸€ã€æ•ˆæœæ¼”ç¤º</a></li><li><a href="#_33" rel="nofollow">äºŒã€ç”µè·¯ç»“æ„</a></li><li><a href="#_42" rel="nofollow">ä¸‰ã€ä»£ç è¯¦è§£</a></li><li><ul><li><a href="#31__43" rel="nofollow">3.1 æ€»ä½“ç»“æ„è®¾è®¡</a></li><li><a href="#32_74HC595_49" rel="nofollow">3.2 é©±åŠ¨74HC595èŠ¯ç‰‡</a></li><li><a href="#33_HEX8_184" rel="nofollow">3.3 HEX8æ¨¡å—</a></li><li><a href="#34__286" rel="nofollow">3.4 é¡¶å±‚æ¨¡å—</a></li></ul> 
  </li><li><a href="#_334" rel="nofollow">å››ã€æŒ‰é”®æ§åˆ¶æ”¹å˜æ•°æ®å€¼</a></li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/c8/12/IpsysULp_o.png" alt="é‡è§æœªæ¥"></p> 
<h2><a id="_18"></a>ä¸€ã€æ•ˆæœæ¼”ç¤º</h2> 
<p>ğŸ¥<strong>ISSPè°ƒè¯•æ¼”ç¤ºï¼š</strong><br> ç¨‹åºé…ç½®å®Œæˆï¼š<br> <img src="https://images2.imgbox.com/38/23/6tdprgZB_o.png" alt="ç¨‹åºé…ç½®"></p> 
<p>è°ƒè¯•ï¼š<br> <img src="https://images2.imgbox.com/a3/47/D0ajKxgm_o.png" alt="æµ‹è¯•ç»“æœ"></p> 
<p>ğŸ¥<strong>æŒ‰é”®æ§åˆ¶æ¼”ç¤ºï¼š</strong><br> <img src="https://images2.imgbox.com/8e/b3/sD5XrT1T_o.gif" alt="æŒ‰é”®æ§åˆ¶"></p> 
<h2><a id="_33"></a>äºŒã€ç”µè·¯ç»“æ„</h2> 
<p>åœ¨<strong>ä¸‰çº¿åˆ¶</strong>çš„æ•°ç ç®¡é©±åŠ¨ä¸­ï¼Œä½¿ç”¨<strong>74HC595</strong>èŠ¯ç‰‡æ¥<strong>å‡å°‘</strong>FPGAçš„ç®¡è„šæ•°é‡ä½¿ç”¨ã€‚</p> 
<p>å…³äº74HC595èŠ¯ç‰‡çš„ä»‹ç»å’Œ<strong>æ—¶åºå›¾</strong>ï¼Œå‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/qq_48764574/article/details/118463276?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=74HC595&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~sobaiduweb~default-0-118463276.268%5Ev1%5Ekoosearch&amp;spm=1018.2226.3001.4450">74HC595ä»‹ç»</a> å’Œ <a href="https://blog.csdn.net/zhuimeng_ruili/article/details/112537225?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169374495916800197020929%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=169374495916800197020929&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-16-112537225-null-null.268%5Ev1%5Ekoosearch&amp;utm_term=74HC595%E6%97%B6%E5%BA%8F%E5%9B%BE&amp;spm=1018.2226.3001.4450">74HC595 é©±åŠ¨</a>ã€‚</p> 
<p>åœ¨AC620å¼€å‘æ¿ä¸Šçš„æ•°ç ç®¡é©±åŠ¨ç”µè·¯ï¼š<br> <img src="https://images2.imgbox.com/95/6a/GyHhdGAc_o.png" alt="ç”µè·¯1"><br> AC620å¼€å‘æ¿ä½¿ç”¨çš„æ˜¯74HC595èŠ¯ç‰‡çš„<mark>çº§è”</mark>æ¥é©±åŠ¨æ˜¾ç¤ºï¼š<br> <img src="https://images2.imgbox.com/1a/95/zMkK2PdF_o.png" alt="ç”µè·¯2"></p> 
<h2><a id="_42"></a>ä¸‰ã€ä»£ç è¯¦è§£</h2> 
<h3><a id="31__43"></a>3.1 æ€»ä½“ç»“æ„è®¾è®¡</h3> 
<p>å…ˆä¸ŠRTLè§†å›¾ï¼š<br> <img src="https://images2.imgbox.com/74/45/jkXHmAS2_o.png" alt="RTL"><br> HEX8æ¨¡å—å°†<mark>seg</mark>å’Œ<mark>sel</mark>ä¿¡å·ä¼ ç»™m74HC595_Driveræ¨¡å—ï¼Œç„¶åå°†æ¥æ”¶åˆ°çš„ä¿¡å·è½¬æ¢ä¸º<mark>DSã€SH_CPå’ŒST_CP</mark>ä¿¡å·ï¼›ISSPæ¨¡å—ç”¨äºè°ƒè¯•ã€‚</p> 
<h3><a id="32_74HC595_49"></a>3.2 é©±åŠ¨74HC595èŠ¯ç‰‡</h3> 
<p>å…³äº74HC595èŠ¯ç‰‡çš„é©±åŠ¨ï¼Œä¸»è¦å‚è€ƒè¯¥æ—¶åºå›¾è¿›è¡Œä»£ç ç¼–å†™ï¼š<br> <img src="https://images2.imgbox.com/8a/05/0bB3Jz3B_o.png" alt="æ—¶åºå›¾"></p> 
<blockquote> 
 <p>74HC595æ˜¯<mark>8ä½</mark>ä¸²è¡Œç§»ä½å¯„å­˜å™¨ï¼Œå¸¦æœ‰å­˜å‚¨å¯„å­˜å™¨å’Œä¸‰æ€å¯„å­˜å™¨ï¼Œå…¶ä¸­ç§»ä½å¯„å­˜å™¨å’Œå­˜å‚¨å¯„å­˜å™¨åˆ†åˆ«é‡‡ç”¨ä¸åŒçš„æ—¶é’Ÿã€‚å…¶å¯ä»¥<mark>æŠŠä¸²è¡Œçš„ä¿¡å·è½¬ä¸ºå¹¶è¡Œçš„ä¿¡å·</mark>ï¼Œå› æ­¤å¸¸ç”¨åšå„ç§æ•°ç ç®¡ä»¥åŠç‚¹é˜µå±çš„é©±åŠ¨èŠ¯ç‰‡ã€‚</p> 
</blockquote> 
<p>è¯¥èŠ¯ç‰‡çš„ä¸»è¦IOï¼š</p> 
<table><thead><tr><th>IOåç§°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>DS / SER</td><td>ä¸²è¡Œæ•°æ®è¾“å…¥ç«¯</td></tr><tr><td>STCP / RCK</td><td>å­˜å‚¨å¯„å­˜å™¨çš„æ—¶é’Ÿè¾“å…¥ã€‚ä¸Šå‡æ²¿æ—¶ç§»ä½å¯„å­˜å™¨ä¸­çš„æ•°æ®è¿›å…¥å­˜å‚¨å¯„å­˜å™¨ï¼Œä¸‹é™æ²¿æ—¶å­˜å‚¨å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¿æŒä¸å˜ã€‚åº”ç”¨æ—¶é€šå¸¸å°† ST_CP ç½®ä¸ºä½ç‚¹å¹³ï¼Œç§»ä½ç»“æŸåå†åœ¨ ST_CP ç«¯äº§ç”Ÿä¸€ä¸ªæ­£è„‰å†²æ›´æ–°æ˜¾ç¤ºæ•°æ®ã€‚</td></tr><tr><td>SHCP / SCK</td><td>ç§»ä½å¯„å­˜å™¨çš„æ—¶é’Ÿè¾“å…¥ã€‚ä¸Šå‡æ²¿æ—¶ç§»ä½å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¾æ¬¡ç§»åŠ¨ä¸€ä½ï¼Œå³ Q0 ä¸­çš„æ•°æ®ç§»åˆ° Q1 ä¸­ï¼ŒQ1 ä¸­çš„æ•°æ®ç§»åˆ° Q2 ä¸­ï¼Œä¾æ¬¡ç±»æ¨ï¼›ä¸‹é™æ²¿æ—¶ç§»ä½å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¿æŒä¸å˜ã€‚</td></tr></tbody></table> 
<p>ç”±äºåœ¨AC620å¼€å‘æ¿ä¸­èŠ¯ç‰‡é‡‡ç”¨<mark>3.3V</mark>ä¾›ç”µï¼Œè¿™æ ·åœ¨è®¾è®¡74HC595å·¥ä½œé¢‘ç‡æ—¶ï¼Œ<strong>ç›´æ¥ä½¿ç”¨50Mæ™¶æŒ¯å››åˆ†é¢‘åçš„æ—¶é’Ÿä½œä¸ºå…¶å·¥ä½œæ—¶é’Ÿã€‚</strong></p> 
<p>74HC595çš„é©±åŠ¨ä»£ç ï¼Œç”±äºæ¨¡å—å‘½åä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œæ‰€ä»¥åŠ äº†ä¸ªmï¼š</p> 
<blockquote> 
 <p>m74HC595_Driver.vï¼š</p> 
</blockquote> 
<pre><code class="prism language-c">module <span class="token function">m74HC595_Driver</span><span class="token punctuation">(</span>
		Clk<span class="token punctuation">,</span>
		Rst_n<span class="token punctuation">,</span>
		Data<span class="token punctuation">,</span>
		S_EN<span class="token punctuation">,</span>
		SH_CP<span class="token punctuation">,</span>	<span class="token comment">//SCK</span>
		ST_CP<span class="token punctuation">,</span>	<span class="token comment">//RCK</span>
		DS		<span class="token comment">//Data</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	parameter DATA_WIDTH <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>

	input 		Clk<span class="token punctuation">;</span>
	input 		Rst_n<span class="token punctuation">;</span>
	input 		<span class="token punctuation">[</span>DATA_WIDTH<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">]</span> Data<span class="token punctuation">;</span>	<span class="token comment">//data to send</span>
	input 		S_EN<span class="token punctuation">;</span>						<span class="token comment">//send en</span>
	output reg 	SH_CP<span class="token punctuation">;</span>						<span class="token comment">//shift clock</span>
	output reg 	ST_CP<span class="token punctuation">;</span>						<span class="token comment">//latch data clock</span>
	output reg 	DS<span class="token punctuation">;</span>							<span class="token comment">//shift serial data</span>
	
	parameter CNT_MAX <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
		
	reg <span class="token punctuation">[</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> divider_cnt<span class="token punctuation">;</span><span class="token comment">//åˆ†é¢‘è®¡æ•°å™¨</span>
	wire sck_pluse<span class="token punctuation">;</span>
	
	reg <span class="token punctuation">[</span><span class="token number">4</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>SHCP_EDGE_CNT<span class="token punctuation">;</span><span class="token comment">//SH_CP EDGE counter</span>
	
	reg <span class="token punctuation">[</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>r_data<span class="token punctuation">;</span>
	
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			r_data <span class="token operator">&lt;=</span> <span class="token number">16</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>S_EN<span class="token punctuation">)</span>
			r_data <span class="token operator">&lt;=</span> Data<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			r_data <span class="token operator">&lt;=</span> r_data<span class="token punctuation">;</span>
	end
		
	<span class="token comment">//clock divide</span>
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			divider_cnt <span class="token operator">&lt;=</span> <span class="token number">16</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>divider_cnt <span class="token operator">==</span> CNT_MAX<span class="token punctuation">)</span>
			divider_cnt <span class="token operator">&lt;=</span> <span class="token number">16</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			divider_cnt <span class="token operator">&lt;=</span> divider_cnt <span class="token operator">+</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
	end
	
	assign sck_pluse <span class="token operator">=</span> <span class="token punctuation">(</span>divider_cnt <span class="token operator">==</span> CNT_MAX<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			SHCP_EDGE_CNT <span class="token operator">&lt;=</span> <span class="token number">5</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>sck_pluse<span class="token punctuation">)</span>begin
			<span class="token keyword">if</span><span class="token punctuation">(</span>SHCP_EDGE_CNT <span class="token operator">==</span>  <span class="token number">5</span>'d31<span class="token punctuation">)</span>
				SHCP_EDGE_CNT <span class="token operator">&lt;=</span> <span class="token number">5</span>'d0<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				SHCP_EDGE_CNT <span class="token operator">&lt;=</span> SHCP_EDGE_CNT <span class="token operator">+</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
		end
		<span class="token keyword">else</span>
			SHCP_EDGE_CNT <span class="token operator">&lt;=</span> SHCP_EDGE_CNT<span class="token punctuation">;</span>
	end	
		
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>begin
			SH_CP <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			ST_CP <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			DS <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>	
		end
		<span class="token keyword">else</span> begin
			<span class="token keyword">case</span><span class="token punctuation">(</span>SHCP_EDGE_CNT<span class="token punctuation">)</span>
				<span class="token number">5</span><span class="token char">'d0: begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> ST_CP <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d1: begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> ST_CP <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d2: begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d3: begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d4: begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d5: begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d6: begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d7: begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d8: begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d9: begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d10:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d11:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d12:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d13:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d14:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d15:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d16:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d17:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d18:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d19:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d20:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d21:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d22:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d23:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d24:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d25:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d26:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d27:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d28:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d29:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token number">5</span><span class="token char">'d30:begin SH_CP &lt;= 1'</span>b0<span class="token punctuation">;</span> DS <span class="token operator">&lt;=</span> r_data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>end
				<span class="token number">5</span><span class="token char">'d31:begin SH_CP &lt;= 1'</span>b1<span class="token punctuation">;</span> end
				<span class="token keyword">default</span><span class="token operator">:</span>begin SH_CP <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token char">'b0;ST_CP &lt;= 1'</span>b0<span class="token punctuation">;</span>DS <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>	end
			endcase	
		end
	end

endmodule

</code></pre> 
<blockquote> 
 <p>RTLè§†å›¾ï¼š</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/9f/06/wB9pkSHl_o.png" alt="RTL74"></p> 
<h3><a id="33_HEX8_184"></a>3.3 HEX8æ¨¡å—</h3> 
<p>è¯¥æ¨¡å—çš„è®¾è®¡æ˜¯åœ¨è¯¥æ–‡ç« çš„è®²è§£åŸºç¡€ä¹‹ä¸Šè¿›è¡Œä¿®æ”¹ï¼š<a href="https://blog.csdn.net/m0_56262476/article/details/132528587?spm=1001.2014.3001.5502">ã€FPGAé›¶åŸºç¡€å­¦ä¹ ä¹‹æ—…#11ã€‘æ•°ç ç®¡åŠ¨æ€æ‰«æ</a>ã€‚</p> 
<p>ä¸Šè¿°å‚è€ƒæ–‡ç« ä¸­çš„æ¨¡å—å¯ä»¥ç§°ä¸ºHEX6ï¼Œé©±åŠ¨äº†6ä¸ªæ•°ç ç®¡ï¼Œåœ¨æ­¤æˆ‘ä»¬<strong>éœ€è¦é©±åŠ¨8ä¸ªæ•°ç ç®¡</strong>ï¼Œæ•…å¯ä»¥å°†æ¨¡å—å‘½åä¸ºHEX8ã€‚</p> 
<p><mark>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è®¾è®¡æ•°ç ç®¡ä½é€‰çš„æ—¶å€™ï¼Œä¸€å®šè¦çœ‹æ¸…ä½¿ç”¨æ¿å­çš„ç”µè·¯ç»“æ„ï¼Œå¼„æ¸…æ¥šæ˜¯é«˜ç”µå¹³ä½é€‰è¿˜æ˜¯ä½ç”µå¹³ä½é€‰ï¼</mark></p> 
<blockquote> 
 <p>HEX8.vï¼š</p> 
</blockquote> 
<pre><code class="prism language-c">module <span class="token function">HEX8</span><span class="token punctuation">(</span>
		input 					Clk<span class="token punctuation">,</span>		<span class="token comment">//50M</span>
		input 					Rst_n<span class="token punctuation">,</span>		<span class="token comment">//å¤ä½</span>
		input 					En<span class="token punctuation">,</span>			<span class="token comment">//æ•°ç ç®¡æ˜¾ç¤ºä½¿èƒ½</span>
		input 		<span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>		disp_data<span class="token punctuation">,</span>	<span class="token comment">//8 Ã— 4 = 32ï¼ˆ8ä¸ªæ•°ç ç®¡ï¼Œæ•°æ®æ ¼å¼ä¸ºhexï¼Œæ€»å…±è¾“32ä½ï¼‰</span>
		output reg 	<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>		seg<span class="token punctuation">,</span> 		<span class="token comment">//æ•°ç ç®¡æ®µé€‰</span>
		output 		<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>		sel	 		<span class="token comment">//æ•°ç ç®¡ä½é€‰ï¼ˆæ•°ç ç®¡é€‰æ‹©ï¼‰</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
	reg <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>sel_r<span class="token punctuation">;</span>

<span class="token comment">//--------&lt;åˆ†é¢‘å™¨&gt;--------</span>
	reg <span class="token punctuation">[</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>divider_cnt<span class="token punctuation">;</span><span class="token comment">//25000-1</span>
	
	reg clk_1K<span class="token punctuation">;</span>
	
	reg <span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>data_tmp<span class="token punctuation">;</span><span class="token comment">//å¾…æ˜¾ç¤ºæ•°æ®ç¼“å­˜</span>
	
	<span class="token comment">//1KHzåˆ†é¢‘è®¡æ•°å™¨</span>
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			divider_cnt <span class="token operator">&lt;=</span> <span class="token number">15</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>En<span class="token punctuation">)</span>
			divider_cnt <span class="token operator">&lt;=</span> <span class="token number">15</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>divider_cnt <span class="token operator">==</span> <span class="token number">24999</span><span class="token punctuation">)</span>
			divider_cnt <span class="token operator">&lt;=</span> <span class="token number">15</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			divider_cnt <span class="token operator">&lt;=</span> divider_cnt <span class="token operator">+</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
	end
	
	<span class="token comment">//1KHzæ‰«ææ—¶é’Ÿ</span>
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			clk_1K <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>divider_cnt <span class="token operator">==</span> <span class="token number">24999</span><span class="token punctuation">)</span>
			clk_1K <span class="token operator">&lt;=</span> <span class="token operator">~</span>clk_1K<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			clk_1K <span class="token operator">&lt;=</span> clk_1K<span class="token punctuation">;</span>
	end
	
<span class="token comment">//--------&lt;6ä½å¾ªç¯ç§»ä½å¯„å­˜å™¨&gt;--------	</span>
	always@<span class="token punctuation">(</span>posedge clk_1K or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			sel_r <span class="token operator">&lt;=</span> <span class="token number">8</span>'b0000_0001<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>sel_r <span class="token operator">==</span> <span class="token number">8</span>'b1000_0000<span class="token punctuation">)</span>
			sel_r <span class="token operator">&lt;=</span> <span class="token number">8</span>'b0000_0001<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			sel_r <span class="token operator">&lt;=</span> sel_r <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
	end	

<span class="token comment">//--------&lt;6é€‰1å¤šè·¯å™¨&gt;--------		</span>
	always@<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>begin
		<span class="token keyword">case</span><span class="token punctuation">(</span>sel_r<span class="token punctuation">)</span>
			<span class="token number">8</span>'b0000_0001<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b0000_0010<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b0000_0100<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b0000_1000<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b0001_0000<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b0010_0000<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b0100_0000<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token number">8</span>'b1000_0000<span class="token operator">:</span>data_tmp <span class="token operator">=</span> disp_data<span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">default</span><span class="token operator">:</span>data_tmp <span class="token operator">=</span> <span class="token number">4</span>'b0000<span class="token punctuation">;</span>
		endcase
	end

<span class="token comment">//--------&lt;LUT&gt;--------		</span>
	always@<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>begin
		<span class="token keyword">case</span><span class="token punctuation">(</span>data_tmp<span class="token punctuation">)</span>
			<span class="token number">4</span><span class="token char">'h0:seg = 8'</span>hc0<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h1:seg = 8'</span>hf9<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h2:seg = 8'</span>ha4<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h3:seg = 8'</span>hb0<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h4:seg = 8'</span>h99<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h5:seg = 8'</span>h92<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h6:seg = 8'</span>h82<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h7:seg = 8'</span>hf8<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h8:seg = 8'</span>h80<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'h9:seg = 8'</span>h90<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'ha:seg = 8'</span>h88<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'hb:seg = 8'</span>h83<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'hc:seg = 8'</span>hc6<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'hd:seg = 8'</span>ha1<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'he:seg = 8'</span>h86<span class="token punctuation">;</span>
			<span class="token number">4</span><span class="token char">'hf:seg = 8'</span>h8e<span class="token punctuation">;</span>
		endcase
	end
		
<span class="token comment">//--------&lt;2é€‰1å¤šè·¯å™¨&gt;--------		</span>
	assign sel <span class="token operator">=</span> <span class="token punctuation">(</span>En<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>sel_r<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">8</span>'b1111_1111<span class="token punctuation">;</span>
		
endmodule

</code></pre> 
<h3><a id="34__286"></a>3.4 é¡¶å±‚æ¨¡å—</h3> 
<p>åœ¨é¡¶å±‚æ¨¡å—ä¸­éœ€è¦è°ƒç”¨ISSPè¿™æ ·çš„ä¸€ä¸ªIPæ ¸ï¼Œæ“ä½œè¿‡ç¨‹å’Œè°ƒè¯•æ–¹æ³•å‚è€ƒï¼š<a href="https://blog.csdn.net/m0_56262476/article/details/132528587?spm=1001.2014.3001.5502">ã€FPGAé›¶åŸºç¡€å­¦ä¹ ä¹‹æ—…#11ã€‘æ•°ç ç®¡åŠ¨æ€æ‰«æ</a>ã€‚</p> 
<blockquote> 
 <p>smg.vï¼š</p> 
</blockquote> 
<pre><code class="prism language-c">module <span class="token function">smg</span><span class="token punctuation">(</span>
	input 			Clk<span class="token punctuation">,</span>		<span class="token comment">//50M</span>
	input 			Rst_n<span class="token punctuation">,</span>
	<span class="token comment">//input [31:0] 	disp_data,</span>
	output 			SH_CP<span class="token punctuation">,</span>		<span class="token comment">//shift clock</span>
	output 			ST_CP<span class="token punctuation">,</span>		<span class="token comment">//latch data clock</span>
	output 			DS			<span class="token comment">//shift serial data</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	wire <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> sel<span class="token punctuation">;</span><span class="token comment">//æ•°ç ç®¡ä½é€‰ï¼ˆé€‰æ‹©å½“å‰è¦æ˜¾ç¤ºçš„æ•°ç ç®¡ï¼‰</span>
	wire <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> seg<span class="token punctuation">;</span><span class="token comment">//æ•°ç ç®¡æ®µé€‰ï¼ˆå½“å‰è¦æ˜¾ç¤ºçš„å†…å®¹ï¼‰	</span>

	wire  <span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> disp_data<span class="token punctuation">;</span>
	
	ISSP <span class="token function">UISSP</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">probe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>disp_data<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	HEX8 <span class="token function">UHEX8</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">En</span><span class="token punctuation">(</span><span class="token number">1</span>'b1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">disp_data</span><span class="token punctuation">(</span>disp_data<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">sel</span><span class="token punctuation">(</span>sel<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">seg</span><span class="token punctuation">(</span>seg<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	m74HC595_Driver <span class="token function">Um74HC595_Driver</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Data</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>seg<span class="token punctuation">,</span>sel<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">S_EN</span><span class="token punctuation">(</span><span class="token number">1</span>'b1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">SH_CP</span><span class="token punctuation">(</span>SH_CP<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">ST_CP</span><span class="token punctuation">(</span>ST_CP<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">DS</span><span class="token punctuation">(</span>DS<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
endmodule

</code></pre> 
<h2><a id="_334"></a>å››ã€æŒ‰é”®æ§åˆ¶æ”¹å˜æ•°æ®å€¼</h2> 
<p><strong>é¡¹ç›®è¦æ±‚ï¼š</strong> é€šè¿‡æ§åˆ¶æŒ‰é”®ï¼Œä½¿å¾—æ•°ç ç®¡æ˜¾ç¤ºä¸åŒçš„æ•°æ®å†…å®¹ã€‚</p> 
<p><strong>å®ç°æ•ˆæœï¼š</strong><br> <img src="https://images2.imgbox.com/2f/78/gOuQSOU2_o.gif" alt="å®ç°æ•ˆæœ"><br> å…ˆçœ‹<strong>RTLè§†å›¾</strong>æ¥ç†è§£æ•´ä½“æ¡†æ¶ï¼š<br> <img src="https://images2.imgbox.com/33/5f/yaSf8YRh_o.png" alt="RTL3"><br> æŒ‰ä¸‹æŒ‰é”®1ï¼Œæ•°ç ç®¡æ˜¾ç¤º12345678ï¼›æŒ‰ä¸‹æŒ‰é”®2ï¼Œæ•°ç ç®¡æ˜¾ç¤º89abcdefã€‚</p> 
<p>æŒ‰é”®æ¶ˆæŠ–æ¨¡å—çš„è®¾è®¡å‚è€ƒè¯¥æ–‡ç« ï¼š<a href="https://blog.csdn.net/m0_56262476/article/details/132248452?spm=1001.2014.3001.5502">ã€FPGAé›¶åŸºç¡€å­¦ä¹ ä¹‹æ—…#10ã€‘æŒ‰é”®æ¶ˆæŠ–æ¨¡å—è®¾è®¡ä¸éªŒè¯ï¼ˆä¸€æ®µå¼çŠ¶æ€æœºå®ç°ï¼‰</a>ã€‚</p> 
<p>åœ¨æ­¤è´´å‡ºæŒ‰é”®æ¶ˆæŠ–çš„ä»£ç ï¼š</p> 
<blockquote> 
 <p>KeyFilter.vï¼š</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token comment">//</span>
<span class="token comment">//æ¨¡å—ï¼šæŒ‰é”®æ¶ˆæŠ–æ¨¡å—</span>
<span class="token comment">//key_stateï¼šè¾“å‡ºæ¶ˆæŠ–ä¹‹åæŒ‰é”®çš„çŠ¶æ€</span>
<span class="token comment">//key_flagï¼šæŒ‰é”®æ¶ˆæŠ–ç»“æŸæ—¶äº§ç”Ÿä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸçš„é«˜ç”µå¹³è„‰å†²</span>
<span class="token comment">//</span>
module <span class="token function">KeyFilter</span><span class="token punctuation">(</span>
	input Clk<span class="token punctuation">,</span>
	input Rst_n<span class="token punctuation">,</span>
	input key_in<span class="token punctuation">,</span>
	output reg key_flag<span class="token punctuation">,</span>
	output reg key_state
<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//æŒ‰é”®çš„å››ä¸ªçŠ¶æ€</span>
	localparam
		IDLE 		<span class="token operator">=</span> <span class="token number">4</span>'b0001<span class="token punctuation">,</span>
		FILTER1 	<span class="token operator">=</span> <span class="token number">4</span>'b0010<span class="token punctuation">,</span>
		DOWN 		<span class="token operator">=</span> <span class="token number">4</span>'b0100<span class="token punctuation">,</span>
		FILTER2 	<span class="token operator">=</span> <span class="token number">4</span>'b1000<span class="token punctuation">;</span>

	<span class="token comment">//çŠ¶æ€å¯„å­˜å™¨</span>
	reg <span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> curr_st<span class="token punctuation">;</span>
	
	<span class="token comment">//è¾¹æ²¿æ£€æµ‹è¾“å‡ºä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿</span>
	wire pedge<span class="token punctuation">;</span>
	wire nedge<span class="token punctuation">;</span>
	
	<span class="token comment">//è®¡æ•°å¯„å­˜å™¨</span>
	reg <span class="token punctuation">[</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>cnt<span class="token punctuation">;</span>
	
	<span class="token comment">//ä½¿èƒ½è®¡æ•°å¯„å­˜å™¨</span>
	reg en_cnt<span class="token punctuation">;</span>
	
	<span class="token comment">//è®¡æ•°æ»¡æ ‡å¿—ä¿¡å·</span>
	reg cnt_full<span class="token punctuation">;</span><span class="token comment">//è®¡æ•°æ»¡å¯„å­˜å™¨</span>
	
<span class="token comment">//------&lt;è¾¹æ²¿æ£€æµ‹ç”µè·¯çš„å®ç°&gt;------</span>
	<span class="token comment">//è¾¹æ²¿æ£€æµ‹ç”µè·¯å¯„å­˜å™¨</span>
	reg key_tmp0<span class="token punctuation">;</span>
	reg key_tmp1<span class="token punctuation">;</span>
	
	<span class="token comment">//è¾¹æ²¿æ£€æµ‹</span>
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>begin
			key_tmp0 <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			key_tmp1 <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
		end
		<span class="token keyword">else</span> begin
			key_tmp0 <span class="token operator">&lt;=</span> key_in<span class="token punctuation">;</span>
			key_tmp1 <span class="token operator">&lt;=</span> key_tmp0<span class="token punctuation">;</span>
		end	
	end
		
	assign nedge <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">!</span>key_tmp0<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>key_tmp1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	assign pedge <span class="token operator">=</span> <span class="token punctuation">(</span>key_tmp0<span class="token punctuation">)</span>  <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>key_tmp1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//------&lt;çŠ¶æ€æœºä¸»ç¨‹åº&gt;------	</span>
	<span class="token comment">//çŠ¶æ€æœºä¸»ç¨‹åº</span>
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>begin
			curr_st <span class="token operator">&lt;=</span> IDLE<span class="token punctuation">;</span>
			en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			key_flag <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			key_state <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
		end
		<span class="token keyword">else</span> begin
			<span class="token keyword">case</span><span class="token punctuation">(</span>curr_st<span class="token punctuation">)</span>
				IDLE<span class="token operator">:</span>begin
					key_flag <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>nedge<span class="token punctuation">)</span>begin
						curr_st <span class="token operator">&lt;=</span> FILTER1<span class="token punctuation">;</span>
						en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
					end
					<span class="token keyword">else</span>
						curr_st <span class="token operator">&lt;=</span> IDLE<span class="token punctuation">;</span>
				end
				
				FILTER1<span class="token operator">:</span>begin
					<span class="token keyword">if</span><span class="token punctuation">(</span>cnt_full<span class="token punctuation">)</span>begin
						key_flag <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
						key_state <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
						curr_st <span class="token operator">&lt;=</span> DOWN<span class="token punctuation">;</span>
						en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					end	
					<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>pedge<span class="token punctuation">)</span>begin
						curr_st <span class="token operator">&lt;=</span> IDLE<span class="token punctuation">;</span>
						en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					end
					<span class="token keyword">else</span>
						curr_st <span class="token operator">&lt;=</span> FILTER1<span class="token punctuation">;</span>
				end
				
				DOWN<span class="token operator">:</span>begin
					key_flag <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>pedge<span class="token punctuation">)</span>begin
						curr_st <span class="token operator">&lt;=</span> FILTER2<span class="token punctuation">;</span>
						en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
					end
					<span class="token keyword">else</span>
						curr_st <span class="token operator">&lt;=</span> DOWN<span class="token punctuation">;</span>
				end
				
				FILTER2<span class="token operator">:</span>begin
					<span class="token keyword">if</span><span class="token punctuation">(</span>cnt_full<span class="token punctuation">)</span>begin
						key_flag <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
						key_state <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
						curr_st <span class="token operator">&lt;=</span> IDLE<span class="token punctuation">;</span>
						en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					end	
					<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nedge<span class="token punctuation">)</span>begin
						curr_st <span class="token operator">&lt;=</span> DOWN<span class="token punctuation">;</span>
						en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					end
					<span class="token keyword">else</span>
						curr_st <span class="token operator">&lt;=</span> FILTER2<span class="token punctuation">;</span>
				end
				
				<span class="token keyword">default</span><span class="token operator">:</span>begin
					curr_st <span class="token operator">&lt;=</span> IDLE<span class="token punctuation">;</span>
					en_cnt <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					key_flag <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
					key_state <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
				end
			endcase
		end
	end
	
<span class="token comment">//------&lt;20msè®¡æ•°å™¨&gt;------		</span>
	<span class="token comment">//20msè®¡æ•°å™¨</span>
	<span class="token comment">//Clk 50_000_000Hz</span>
	<span class="token comment">//ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸä¸º20ns</span>
	<span class="token comment">//éœ€è¦è®¡æ•°20_000_000 / 20 = 1_000_000æ¬¡</span>
	
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			cnt <span class="token operator">&lt;=</span> <span class="token number">20</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>en_cnt<span class="token punctuation">)</span>
			cnt <span class="token operator">&lt;=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			cnt <span class="token operator">&lt;=</span> <span class="token number">20</span>'d0<span class="token punctuation">;</span>
	end
	
	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			cnt_full <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cnt <span class="token operator">==</span> <span class="token number">999</span>_999<span class="token punctuation">)</span>
			cnt_full <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			cnt_full <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
	end
	
endmodule

</code></pre> 
<p>ç®€å•ç¼–å†™äº†ä¸€ä¸ªKeyDataæ¨¡å—<strong>ç”¨äºä¸åŒæ•°æ®çš„è¾“å…¥</strong>ï¼š</p> 
<blockquote> 
 <p>KeyData.vï¼š</p> 
</blockquote> 
<pre><code class="prism language-c">module <span class="token function">KeyData</span><span class="token punctuation">(</span>
	input Clk<span class="token punctuation">,</span>
	input Rst_n<span class="token punctuation">,</span>
	input Key_state1<span class="token punctuation">,</span>
	input Key_flag1<span class="token punctuation">,</span>
	input Key_state2<span class="token punctuation">,</span>
	input Key_flag2<span class="token punctuation">,</span>
	output reg <span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> dis_data
<span class="token punctuation">)</span><span class="token punctuation">;</span>

	always@<span class="token punctuation">(</span>posedge Clk or negedge Rst_n<span class="token punctuation">)</span>begin
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Rst_n<span class="token punctuation">)</span>
			dis_data <span class="token operator">&lt;=</span> <span class="token number">32</span>'h00000000<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>Key_flag1 <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>Key_state1<span class="token punctuation">)</span>
			dis_data <span class="token operator">&lt;=</span> <span class="token number">32</span>'h12345678<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>Key_flag2 <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>Key_state2<span class="token punctuation">)</span>
			dis_data <span class="token operator">&lt;=</span> <span class="token number">32</span>'h89abcdef<span class="token punctuation">;</span>
		<span class="token keyword">else</span> 
			dis_data <span class="token operator">&lt;=</span> dis_data<span class="token punctuation">;</span>
	end

endmodule

</code></pre> 
<blockquote> 
 <p>é¡¶å±‚æ¨¡å—KeyCtrlSmg.vï¼š</p> 
</blockquote> 
<pre><code class="prism language-c">module <span class="token function">KeyCtrlSmg</span><span class="token punctuation">(</span>
	input 	Clk<span class="token punctuation">,</span>
	input 	Rst_n<span class="token punctuation">,</span>
	input 	KeyIn1<span class="token punctuation">,</span>
	input 	KeyIn2<span class="token punctuation">,</span>
	output 	SH_CP<span class="token punctuation">,</span>		<span class="token comment">//shift clock</span>
	output 	ST_CP<span class="token punctuation">,</span>		<span class="token comment">//latch data clock</span>
	output 	DS			<span class="token comment">//shift serial data</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

	wire key_state1<span class="token punctuation">;</span>
	wire key_flag1<span class="token punctuation">;</span>
	wire key_state2<span class="token punctuation">;</span>
	wire key_flag2<span class="token punctuation">;</span>
	
	wire <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> sel<span class="token punctuation">;</span><span class="token comment">//æ•°ç ç®¡ä½é€‰ï¼ˆé€‰æ‹©å½“å‰è¦æ˜¾ç¤ºçš„æ•°ç ç®¡ï¼‰</span>
	wire <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> seg<span class="token punctuation">;</span><span class="token comment">//æ•°ç ç®¡æ®µé€‰ï¼ˆå½“å‰è¦æ˜¾ç¤ºçš„å†…å®¹ï¼‰	</span>

	wire  <span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> dis_data<span class="token punctuation">;</span>
	
	KeyFilter <span class="token function">KeyFilter1</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">key_in</span><span class="token punctuation">(</span>KeyIn1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">key_flag</span><span class="token punctuation">(</span>key_flag1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">key_state</span><span class="token punctuation">(</span>key_state1<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	KeyFilter <span class="token function">KeyFilter2</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">key_in</span><span class="token punctuation">(</span>KeyIn2<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">key_flag</span><span class="token punctuation">(</span>key_flag2<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">key_state</span><span class="token punctuation">(</span>key_state2<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	KeyData <span class="token function">UKeyData</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Key_state1</span><span class="token punctuation">(</span>key_state1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Key_flag1</span><span class="token punctuation">(</span>key_flag1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Key_state2</span><span class="token punctuation">(</span>key_state2<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Key_flag2</span><span class="token punctuation">(</span>key_flag2<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">dis_data</span><span class="token punctuation">(</span>dis_data<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	HEX8 <span class="token function">UHEX8</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">En</span><span class="token punctuation">(</span><span class="token number">1</span>'b1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">disp_data</span><span class="token punctuation">(</span>dis_data<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">sel</span><span class="token punctuation">(</span>sel<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">seg</span><span class="token punctuation">(</span>seg<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	m74HC595_Driver <span class="token function">Um74HC595_Driver</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Data</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>seg<span class="token punctuation">,</span>sel<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">S_EN</span><span class="token punctuation">(</span><span class="token number">1</span>'b1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">SH_CP</span><span class="token punctuation">(</span>SH_CP<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">ST_CP</span><span class="token punctuation">(</span>ST_CP<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">DS</span><span class="token punctuation">(</span>DS<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

endmodule

</code></pre> 
<blockquote> 
 <p>æµ‹è¯•æ¿€åŠ±æ–‡ä»¶ï¼š</p> 
</blockquote> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">1</span>ns
`define clock_period <span class="token number">20</span>

module KeyCtrlSmg_tb<span class="token punctuation">;</span>

	reg Clk<span class="token punctuation">;</span>
	reg Rst_n<span class="token punctuation">;</span>
	reg KeyIn1<span class="token punctuation">;</span>
	reg KeyIn2<span class="token punctuation">;</span>
	
	wire SH_CP<span class="token punctuation">;</span>
	wire ST_CP<span class="token punctuation">;</span>
	wire DS<span class="token punctuation">;</span>

	KeyCtrlSmg <span class="token function">UKeyCtrlSmg</span><span class="token punctuation">(</span>
		<span class="token punctuation">.</span><span class="token function">Clk</span><span class="token punctuation">(</span>Clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">Rst_n</span><span class="token punctuation">(</span>Rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">KeyIn1</span><span class="token punctuation">(</span>KeyIn1<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">KeyIn2</span><span class="token punctuation">(</span>KeyIn2<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token function">SH_CP</span><span class="token punctuation">(</span>SH_CP<span class="token punctuation">)</span><span class="token punctuation">,</span>		<span class="token comment">//shift clock</span>
		<span class="token punctuation">.</span><span class="token function">ST_CP</span><span class="token punctuation">(</span>ST_CP<span class="token punctuation">)</span><span class="token punctuation">,</span>		<span class="token comment">//latch data clock</span>
		<span class="token punctuation">.</span><span class="token function">DS</span><span class="token punctuation">(</span>DS<span class="token punctuation">)</span>				<span class="token comment">//shift serial data</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	initial Clk <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	always#<span class="token punctuation">(</span>`clock_period <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> Clk <span class="token operator">=</span> <span class="token operator">~</span>Clk<span class="token punctuation">;</span>
	
	initial begin 
		Rst_n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		KeyIn1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		KeyIn2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		#<span class="token number">200</span><span class="token punctuation">;</span>
		Rst_n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		#<span class="token number">200</span><span class="token punctuation">;</span>
		KeyIn1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		KeyIn2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		#<span class="token punctuation">(</span>`clock_period<span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">)</span>
		KeyIn1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		KeyIn2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		#<span class="token punctuation">(</span>`clock_period<span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">)</span>
		KeyIn1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		KeyIn2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		#<span class="token punctuation">(</span>`clock_period<span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">)</span>
		$stop<span class="token punctuation">;</span>
	end


endmodule

</code></pre> 
<blockquote> 
 <p>ä»¿çœŸç»“æœï¼š</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/7a/65/Ul35hcgn_o.png" alt="ä»¿çœŸç»“æœ"></p> 
<p><img src="https://images2.imgbox.com/a6/99/Ti8AFQPQ_o.gif" alt="csdn"></p> 
<blockquote> 
 <p><font size="5" face="å¾®è½¯é›…é»‘">ğŸ§¸ç»“å°¾</font></p> 
 <hr color="#000000" size='5"'> 
 <ul><li><font size="2" face="å¾®è½¯é›…é»‘">â¤ï¸ <strong>æ„Ÿè°¢æ‚¨çš„æ”¯æŒå’Œé¼“åŠ±ï¼</strong> ğŸ˜ŠğŸ™</font></li><li><font size="2" face="å¾®è½¯é›…é»‘"> ğŸ“œ<strong>æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„å†…å®¹ï¼š</strong></font></li><li><font size="2" face="å¾®è½¯é›…é»‘"><a href="https://blog.csdn.net/m0_56262476/article/details/131711615?spm=1001.2014.3001.5502">ã€FPGAã€‘ä¸²å£é€šä¿¡è®²è§£-çŠ¶æ€æœºåˆ¤æ–­æ•°æ®å€¼</a></font></li><li><font size="2" face="å¾®è½¯é›…é»‘"><a href="https://blog.csdn.net/m0_56262476/article/details/131711699?spm=1001.2014.3001.5502">ã€Pythonã€‘ä¸²å£é€šä¿¡-ä¸FPGAã€è“ç‰™æ¨¡å—å®ç°ä¸²å£é€šä¿¡ï¼ˆPython+FPGAï¼‰</a></font></li><li><font size="2" face="å¾®è½¯é›…é»‘"> <a href="https://blog.csdn.net/m0_56262476/article/details/128679309">ã€Arduino TinyGoã€‘ã€æœ€æ–°ã€‘ä½¿ç”¨Goè¯­è¨€ç¼–å†™Arduino-ç¯å¢ƒæ­å»ºå’Œç‚¹äº®LEDç¯</a></font></li><li><font size="2" face="å¾®è½¯é›…é»‘"><a href="https://blog.csdn.net/m0_56262476/article/details/130464276?spm=1001.2014.3001.5502">ã€å…¨ç½‘é¦–å‘å¼€æºæ•™ç¨‹ã€‘ã€Labviewæœºå™¨äººä»¿çœŸä¸æ§åˆ¶ã€‘Labviewä¸Solidworkså¤šè·¯æ”¯é…å…³ç³»-å››è¶³çˆ¬è¡Œæœºå™¨äººä»¿çœŸä¸æ§åˆ¶</a></font><br> <img src="https://images2.imgbox.com/1a/97/PdlYJtgn_o.png" alt="é‡è§æœªæ¥" width="90%"></li></ul> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0eb5c04a8368b9ffad2f2084e4e9f933/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">çŸ©é˜µè®ºâ€”çº¿æ€§å­ç©ºé—´ã€ç”Ÿæˆå­ç©ºé—´ã€æ ¸ç©ºé—´ã€é›¶åº¦ã€å­ç©ºé—´çš„äº¤ä¸å’Œã€ç›´å’Œ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5c29d09ca3c407c44a6f41aeaacd165/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">å®‰è£…Burp suitevè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯--illegal-access=permit</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>