<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>（四）最邻近插值、双线性插值 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="（四）最邻近插值、双线性插值" />
<meta property="og:description" content="最邻近插值、双线性插值、三线性插值 零、图像的放大和缩小的基本原理–映射 图像的放大和缩小的基本原理就是一种映射，即缩小后或者放大后的图像像素位置向原图的一个映射。简单理解就是，将放大或者缩小后的图像将其的坐标（长宽）拉伸或者压缩到和原图一样大时，其像素坐标点对应在原图上的位置就是其映射位置
坐标映射图
一、插值法放缩放图像算法第一步映射 1. 值法算法流程----映射：
(1)、插值法放大图像的第一步都是相同的，遍历新图。计算新图的坐标点像素值对应原图中哪个坐标点的像素值来填充，计算公式为：
对应成比例scrH/dstH = srcHeight/dstHeight &gt;&gt;&gt;
scrH = dstH * (srcHeight/dstHeight)
对应成比例scrW/dstW = srcWidth/dstWidth &gt;&gt;&gt;
scrW = dstW * (srcWidth/dstWidth)
其中，src表示旧图，dst表示新图。新图的坐标（dstH,dstW）对应于旧图的坐标（scrH,scrW）。
srcWidth/dstWidth 和 srcHeight/dstHeight 分别表示宽和高的放缩比。
2、总结
那么问题来了，通过这个映射公式算出来的 scrH,scrW（旧图坐标）有可能是小数，但是坐标点是不存在小数的，都是整数，得想办法把它转换成整数才行。
不同插值法的区别就体现在 scrH,scrW 是小数时，怎么变成整数----去取原图像中的像素值。
最近邻插值（Nearest-neighborInterpolation）： 看名字就很直白，四舍五入选取最接近的整数。这样的做法会导致像素变化不连续，在目标图像中产生锯齿边缘。
双线性插值（Bilinear Interpolation）： 双线性就是利用与坐标轴平行的两条直线去把小数坐标分解到相邻的四个整数坐标点。权重与距离成反比。
双三次插值（Bicubic Interpolation）： 与双线性插值类似，只不过用了相邻的16个点。但是需要注意的是，前面两种方法能保证两个方向的坐标权重和为1，但是双三次插值不能保证这点，所以可能出现像素值越界的情况，需要截断。
二、最邻近插值法： 最邻近插值法： 看名字就很直白，将scrH,scrW ，四舍五入选取最接近的整数，得到该点的像素值（该整数坐标在原图上的像素值）。这样的做法会导致像素的变化不连续，在新图中会产生锯齿。
四、python实现最邻近插值算法 import cv2 import numpy as np scr_img = cv2.imread(&#34;lenna.png&#34;, 1) print(scr_img.shape) cv2.imshow(&#34;scr_img&#34;, scr_img) cv2.waitKey(0) # print(scr_img[0][0]) def nearest_neighbor_interpolation(scr_img,dstHeight,dstWidth): if(len(scr_img.shape)&gt;2):# 图像不是灰度图像 srcHeight, srcWidth, channels = scr_img." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d10b13d8d522fca7f74cd5f4e8f4b88e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-24T21:28:48+08:00" />
<meta property="article:modified_time" content="2020-12-24T21:28:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">（四）最邻近插值、双线性插值</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>最邻近插值、双线性插值、三线性插值</h2> 
<h3><a id="_2"></a>零、图像的放大和缩小的基本原理–映射</h3> 
<blockquote> 
 <p>图像的放大和缩小的基本原理就是一种映射，即缩小后或者放大后的图像像素位置向原图的一个映射。简单理解就是，<strong>将放大或者缩小后的图像将其的坐标（长宽）拉伸或者压缩到和原图一样大时，其像素坐标点对应在原图上的位置就是其映射位置</strong><br> <img src="https://images2.imgbox.com/af/b9/kiVDmZZo_o.png" alt="在这里插入图片描述"><br> 坐标映射图<br> <img src="https://images2.imgbox.com/e0/36/tfB8EwPP_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h3><a id="_8"></a>一、插值法放缩放图像算法第一步映射</h3> 
<blockquote> 
 <p><strong>1. 值法算法流程----映射：</strong><br> (1)、插值法放大图像的第一步都是相同的，遍历新图。计算新图的坐标点像素值对应原图中哪个坐标点的像素值来填充，计算公式为：<br> 对应成比例scrH/dstH = srcHeight/dstHeight &gt;&gt;&gt;<br> scrH = dstH * (srcHeight/dstHeight)<br> 对应成比例scrW/dstW = srcWidth/dstWidth &gt;&gt;&gt;<br> scrW = dstW * (srcWidth/dstWidth)<br> 其中，src表示旧图，dst表示新图。新图的坐标（dstH,dstW）对应于旧图的坐标（scrH,scrW）。<br> srcWidth/dstWidth 和 srcHeight/dstHeight 分别表示宽和高的放缩比。<img src="https://images2.imgbox.com/1e/51/D2pJlUBa_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p><strong>2、总结</strong><br> 那么问题来了，通过这个映射公式算出来的 scrH,scrW（旧图坐标）有可能是小数，但是坐标点是不存在小数的，都是整数，得想办法把它转换成整数才行。<br> 不同插值法的区别就体现在 scrH,scrW 是小数时，怎么变成整数----去取原图像中的像素值。<br> <strong>最近邻插值（Nearest-neighborInterpolation）：</strong> 看名字就很直白，四舍五入选取最接近的整数。这样的做法会导致像素变化不连续，在目标图像中产生锯齿边缘。<br> <strong>双线性插值（Bilinear Interpolation）：</strong> 双线性就是利用与坐标轴平行的两条直线去把小数坐标分解到相邻的四个整数坐标点。权重与距离成反比。<br> <strong>双三次插值（Bicubic Interpolation）：</strong> 与双线性插值类似，只不过用了相邻的16个点。但是需要注意的是，前面两种方法能保证两个方向的坐标权重和为1，但是双三次插值不能保证这点，所以可能出现像素值越界的情况，需要截断。</p> 
</blockquote> 
<h3><a id="_29"></a>二、最邻近插值法：</h3> 
<blockquote> 
 <p><strong>最邻近插值法：</strong> 看名字就很直白，将scrH,scrW ，四舍五入选取最接近的整数，得到该点的像素值（该整数坐标在原图上的像素值）。这样的做法会导致像素的变化不连续，在新图中会产生锯齿。<br> <img src="https://images2.imgbox.com/1f/5d/cLTlr016_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7b/79/ypXadvqQ_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h3><a id="python_33"></a>四、python实现最邻近插值算法</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
scr_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"lenna.png"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>scr_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"scr_img"</span><span class="token punctuation">,</span> scr_img<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment"># print(scr_img[0][0])</span>
<span class="token keyword">def</span> <span class="token function">nearest_neighbor_interpolation</span><span class="token punctuation">(</span>scr_img<span class="token punctuation">,</span>dstHeight<span class="token punctuation">,</span>dstWidth<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>scr_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># 图像不是灰度图像</span>
        srcHeight<span class="token punctuation">,</span> srcWidth<span class="token punctuation">,</span> channels <span class="token operator">=</span> scr_img<span class="token punctuation">.</span>shape  <span class="token comment"># 获取原图的形状</span>
        <span class="token comment"># 创建新图</span>
        dst_img <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">,</span>dstWidth<span class="token punctuation">,</span>channels<span class="token punctuation">)</span><span class="token punctuation">,</span>dtype <span class="token operator">=</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
        <span class="token comment"># 遍历新图,计算新图像素坐标在原图上的映射坐标</span>
        <span class="token keyword">for</span> dstH <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> dstW <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstWidth<span class="token punctuation">)</span><span class="token punctuation">:</span>
                scrH <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dstH<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>srcHeight<span class="token operator">/</span>dstHeight<span class="token punctuation">)</span><span class="token punctuation">)</span>
                scrW <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dstW<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>srcWidth<span class="token operator">/</span>dstWidth<span class="token punctuation">)</span><span class="token punctuation">)</span>
                dst_img<span class="token punctuation">[</span>dstH<span class="token punctuation">]</span><span class="token punctuation">[</span>dstW<span class="token punctuation">]</span> <span class="token operator">=</span> scr_img<span class="token punctuation">[</span>scrH<span class="token punctuation">]</span><span class="token punctuation">[</span>scrW<span class="token punctuation">]</span>
        <span class="token keyword">return</span>  dst_img
    <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token comment">#图像是灰度图像</span>
        srcHeight<span class="token punctuation">,</span> srcWidth <span class="token operator">=</span> scr_img<span class="token punctuation">.</span>shape  <span class="token comment"># 获取原图的形状</span>
        dst_img <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">,</span> dstWidth<span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
        <span class="token comment"># 遍历新图,计算新图像素坐标在原图上的映射坐标</span>
        <span class="token keyword">for</span> dstH <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> dstW <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstWidth<span class="token punctuation">)</span><span class="token punctuation">:</span>
                scrH <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dstH<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>srcHeight <span class="token operator">/</span> dstHeight<span class="token punctuation">)</span><span class="token punctuation">)</span>
                scrW <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dstW<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>srcWidth <span class="token operator">/</span> dstWidth<span class="token punctuation">)</span><span class="token punctuation">)</span>
                dst_img<span class="token punctuation">[</span>dstH<span class="token punctuation">]</span><span class="token punctuation">[</span>dstW<span class="token punctuation">]</span> <span class="token operator">=</span> scr_img<span class="token punctuation">[</span>scrH<span class="token punctuation">]</span><span class="token punctuation">[</span>scrW<span class="token punctuation">]</span>
        <span class="token keyword">return</span> dst_img
dstHeight<span class="token punctuation">,</span>dstWidth <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">1000</span>
dst_img <span class="token operator">=</span> nearest_neighbor_interpolation<span class="token punctuation">(</span>scr_img<span class="token punctuation">,</span>dstHeight<span class="token punctuation">,</span>dstWidth<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"dst_img"</span><span class="token punctuation">,</span>dst_img<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p>原图<br> <img src="https://images2.imgbox.com/53/4c/tuAE0f0E_o.png" alt="在这里插入图片描述"></p> 
<p>放大图<br> <img src="https://images2.imgbox.com/3a/20/2Wgr1JkH_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_75"></a>五、双线性插值法：</h3> 
<h4><a id="1_76"></a>1、插值介绍</h4> 
<blockquote> 
 <p>在离散数据的基础上补插连续函数，使得这条连续曲线通过全部给定的离散数据点。<br> <strong>插值</strong> 是离散函数逼近的重要方法，利用它可通过<strong>函数在有限个点处的取值状况，估算出函数在其他点处的近似值。</strong><br> <strong>插值：</strong> 用来填充图像变换时像素之间的空隙。</p> 
</blockquote> 
<h4><a id="2_82"></a>2、线性插值</h4> 
<blockquote> 
 <p><strong>线性插值</strong> 是指插值函数为<strong>一次多项式的插值方式</strong>，其在插值节点上的插值误差为零。线性插值相比其他插值方式，如抛物线插值，具有简单、方便的特点。<strong>线性插值的几何意义即为概述图中利用过A点和B点的直线来近似表示原函数。线性插值可以用来近似代替原函数，也可以用来计算得到查表过程中表中没有的数值。</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/b4/cf/nNhTKoa2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_88"></a>3、双线性插值</h4> 
<blockquote> 
 <p>双线性插值就是在x和y方向个来一次单线性插值</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/e7/1a/NVSIcCaT_o.png" alt="在这里插入图片描述"><br> 在图像中 y2-y1=1;x2-x1=1（x1 x2 y1 y2 是原图坐标）<br> <img src="https://images2.imgbox.com/13/7c/RXNku9Ss_o.png" alt="在这里插入图片描述"></p> 
<p>所以上式变为<br> <img src="https://images2.imgbox.com/73/59/smgXKRjt_o.png" alt="在这里插入图片描述"></p> 
<p>在实际图像双线性插值时，即可算出双线性插值的值<br> <img src="https://images2.imgbox.com/38/a4/AR9gaBCW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="python_103"></a>六、python实现双线性插值法：</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> math
<span class="token keyword">def</span> <span class="token function">bilinear_interpolation</span><span class="token punctuation">(</span>scr_img<span class="token punctuation">,</span>dstHeight<span class="token punctuation">,</span>dstWidth<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>scr_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># 图像是RGB图像</span>
        srcHeight<span class="token punctuation">,</span> srcWidth<span class="token punctuation">,</span> channels <span class="token operator">=</span> scr_img<span class="token punctuation">.</span>shape  <span class="token comment"># 获取原图的形状</span>
        scr_img <span class="token operator">=</span> np<span class="token punctuation">.</span>pad<span class="token punctuation">(</span>scr_img<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'constant'</span><span class="token punctuation">)</span>
        <span class="token comment"># 创建新图</span>
        dst_img <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">,</span>dstWidth<span class="token punctuation">,</span>channels<span class="token punctuation">)</span><span class="token punctuation">,</span>dtype <span class="token operator">=</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
        <span class="token comment"># 遍历新图,计算新图像素坐标在原图上的映射坐标</span>
        <span class="token keyword">for</span> dstH <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> dstW <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstWidth<span class="token punctuation">)</span><span class="token punctuation">:</span>
                scrH <span class="token operator">=</span> <span class="token punctuation">(</span>dstH<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>srcHeight<span class="token operator">/</span>dstHeight<span class="token punctuation">)</span>
                scrW <span class="token operator">=</span> <span class="token punctuation">(</span>dstW<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>srcWidth<span class="token operator">/</span>dstWidth<span class="token punctuation">)</span>
                <span class="token comment"># i,j = int(scrH),int(scrW)  # 获得映射到原图的位置的左上角的像素位置</span>
                i<span class="token punctuation">,</span>j <span class="token operator">=</span> math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>scrH<span class="token punctuation">)</span><span class="token punctuation">,</span>math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>scrW<span class="token punctuation">)</span>  <span class="token comment"># 获得映射到原图的位置的左上角的像素位置</span>
                u<span class="token punctuation">,</span>v <span class="token operator">=</span> scrH<span class="token operator">-</span>i<span class="token punctuation">,</span>scrW<span class="token operator">-</span>j  <span class="token comment"># 获得映射到原图的位置的到左上角的像素位置的距离 x距离和y距离</span>
                dst_img<span class="token punctuation">[</span>dstH<span class="token punctuation">]</span><span class="token punctuation">[</span>dstW<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>u<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>v<span class="token punctuation">)</span><span class="token operator">*</span>scr_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>u<span class="token punctuation">)</span><span class="token operator">*</span>v<span class="token operator">*</span>scr_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> u<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>v<span class="token punctuation">)</span><span class="token operator">*</span>scr_img<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> u<span class="token operator">*</span>v<span class="token operator">*</span>scr_img<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span>  dst_img
    <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token comment">#图像是灰度图像</span>
        srcHeight<span class="token punctuation">,</span> srcWidth <span class="token operator">=</span> scr_img<span class="token punctuation">.</span>shape  <span class="token comment"># 获取原图的形状</span>
        dst_img <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>dstHeight<span class="token punctuation">,</span> dstWidth<span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
        <span class="token comment"># 遍历新图,计算新图像素坐标在原图上的映射坐标</span>
        <span class="token keyword">for</span> dstH <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstHeight <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> dstW <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>dstWidth <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                scrH <span class="token operator">=</span> <span class="token punctuation">(</span>dstH<span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>srcHeight <span class="token operator">/</span> dstHeight<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span>
                scrW <span class="token operator">=</span> <span class="token punctuation">(</span>dstW<span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>srcWidth <span class="token operator">/</span> dstWidth<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span>
                i<span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>scrH<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>scrW<span class="token punctuation">)</span>  <span class="token comment"># 获得映射到原图的位置的左上角的像素位置</span>
                u<span class="token punctuation">,</span> v <span class="token operator">=</span> scrH <span class="token operator">-</span> i<span class="token punctuation">,</span> scrW <span class="token operator">-</span> j  <span class="token comment"># 获得映射到原图的位置的到左上角的像素位置的距离 x距离和y距离</span>
                dst_img<span class="token punctuation">[</span>dstH<span class="token punctuation">]</span><span class="token punctuation">[</span>dstW<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> v<span class="token punctuation">)</span> <span class="token operator">*</span> scr_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> v <span class="token operator">*</span> scr_img<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> u <span class="token operator">*</span> <span class="token punctuation">(</span>
                            <span class="token number">1</span> <span class="token operator">-</span> v<span class="token punctuation">)</span> <span class="token operator">*</span> scr_img<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> u <span class="token operator">*</span> v <span class="token operator">*</span> scr_img<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> dst_img

dstHeight<span class="token punctuation">,</span>dstWidth <span class="token operator">=</span> <span class="token number">500</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token operator">*</span><span class="token number">2</span>
dst_img <span class="token operator">=</span> bilinear_interpolation<span class="token punctuation">(</span>scr_img<span class="token punctuation">,</span>dstHeight<span class="token punctuation">,</span>dstWidth<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"dst_img"</span><span class="token punctuation">,</span>dst_img<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p>原图<br> <img src="https://images2.imgbox.com/7a/48/ZnmUqiDH_o.png" alt="在这里插入图片描述">放大图<br> <img src="https://images2.imgbox.com/36/63/506JJksU_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_148"></a>注：</h3> 
<p><img src="https://images2.imgbox.com/d2/c3/2ZM4DdBP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_151"></a>插值不仅可以放大图像也可以缩小图像</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c3489f39cefb72f2eec51bc5fb7d986c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python中3and5为什么输出是5_为什么在Python 3.5中，round（4.5）== 4和round（5.5）== 6？...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8e008b616b45403123248d3f754318e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">删除字符</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>