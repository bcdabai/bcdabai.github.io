<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 测试相关 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python 测试相关" />
<meta property="og:description" content="软件开发固然重要，软件测试也必不可少。
一. Python 文档测试 【GitHub代码commits id：c5bdcc5】
1. pydoc生成文档 python 的 pydoc 模块可以非常方便地查看、生成 HTML 帮助文档。只要在函数、类、方法定义后面加
#!/usr/bin/env python # -*- encoding: utf-8 -*- &#34;&#34;&#34; @File : 01_create_pydoc.py @Time : 2019/8/16 11:36 @Author : Crisimple @Github : https://crisimple.github.io/ @Contact : Crisimple@foxmail.com @License : (C)Copyright 2017-2019, Micro-Circle @Desc : None &#34;&#34;&#34; NMAE = &#39;PyDOC&#39; class CreatePyDOC(object): name = &#39;pydoc&#39; &#34;&#34;&#34; 定义一个CreatePyDOC，该类包括两个变量：name、language &#34;&#34;&#34; def __int__(self, name, language): &#34;&#34;&#34; name --- 初始化文档的名称 language --- 初始化文档的编写语言 :param name: :param language: :return: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dbccee6d0992db3208dd4716083373ca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-29T17:46:24+08:00" />
<meta property="article:modified_time" content="2019-09-29T17:46:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 测试相关</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>软件开发固然重要，软件测试也必不可少。</p> 
<h2><a id="_Python__1"></a>一. Python 文档测试</h2> 
<p>【<strong><a href="https://github.com/Crisimple/UnitTest/commit/c5bdcc5cf824104f4052bcc08a5550c8012ec514">GitHub代码commits id：c5bdcc5</a></strong>】</p> 
<h3><a id="1_pydoc_3"></a>1. pydoc生成文档</h3> 
<p>python 的 pydoc 模块可以非常方便地查看、生成 HTML 帮助文档。只要在函数、类、方法定义后面加</p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- encoding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
@File    :   01_create_pydoc.py
@Time    :   2019/8/16 11:36
@Author  :   Crisimple
@Github :    https://crisimple.github.io/
@Contact :   Crisimple@foxmail.com
@License :   (C)Copyright 2017-2019, Micro-Circle
@Desc    :   None
"""</span>
 NMAE <span class="token operator">=</span> <span class="token string">'PyDOC'</span>

<span class="token keyword">class</span> <span class="token class-name">CreatePyDOC</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'pydoc'</span>
    <span class="token triple-quoted-string string">"""
    定义一个CreatePyDOC，该类包括两个变量：name、language
    """</span>
    <span class="token keyword">def</span> <span class="token function">__int__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        name --- 初始化文档的名称
        language --- 初始化文档的编写语言
        :param name:
        :param language:
        :return:
        """</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> language

    <span class="token keyword">def</span> <span class="token function">print_info</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        定义一个print_info方法
        language代表使用的语言
        :param language:
        :return:
        """</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s doc 是用 %s 编写的"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">create_doc</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> language<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    定义一个打印创建doc信息的函数
    name --- 档的称
    language --- 文档语言
    money --- 售价
    :param name:
    :param language:
    :param money:
    :return:
    """</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"doc的名字是 %s, 它的语言是 %s, 售价 %d"</span><span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> language<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="11_pydoc__60"></a>1.1 pydoc 在控制台中查看文档</h4> 
<pre><code>(1) 模块的文档说明：就是*.py 文件顶部的注释信息，这部分信息会被提取成模块的文档说明。
(2) CLASSES 部分：这部分会列出该模块所包含的全部类。
(3) FUNCTIONS 部分：这部分会列出该模块所包含的全部函数。
(4) DATA 部分：这部分会列出该模块所包含的全部成员变量。
(5) FILE 部分：这部分会显示该模块对应的源文件。
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment"># m 是 python 命令的一个选项，表示运行指定模块</span>
python -m pydoc 01_create_pydoc


<span class="token comment"># *********执行结果*************</span>
$ python -m pydoc 01_create_pydoc
Help on module 01_create_pydoc:

NAME
    01_create_pydoc

DESCRIPTION
    @File    <span class="token keyword">:</span>   01_create_pydoc.py
    @Time    <span class="token keyword">:</span>   2019/8/16 11:36
    @Author  <span class="token keyword">:</span>   Crisimple
    @Github <span class="token keyword">:</span>    https://crisimple.github.io/
    @Contact <span class="token keyword">:</span>   Crisimple@foxmail.com
    @License <span class="token keyword">:</span>   <span class="token punctuation">(</span>C<span class="token punctuation">)</span>Copyright 2017-2019, Micro-Circle
    @Desc    <span class="token keyword">:</span>   None

CLASSES
    builtins.object
        CreatePyDOC

    class CreatePyDOC<span class="token punctuation">(</span>builtins.object<span class="token punctuation">)</span>
     <span class="token operator">|</span>  Methods defined here:
     <span class="token operator">|</span>
     <span class="token operator">|</span>  __int__<span class="token punctuation">(</span>self, name, language<span class="token punctuation">)</span>
     <span class="token operator">|</span>      name --- 初始化文档的名称
     <span class="token operator">|</span>      language --- 初始化文档的编写语言
     <span class="token operator">|</span>      :param name:
     <span class="token operator">|</span>      :param language:
     <span class="token operator">|</span>      :return:
     <span class="token operator">|</span>
     <span class="token operator">|</span>  print_info<span class="token punctuation">(</span>self, language<span class="token punctuation">)</span>
     <span class="token operator">|</span>      定义一个print_info方法
     <span class="token operator">|</span>      language代表使用的语言
     <span class="token operator">|</span>      :param language:
     <span class="token operator">|</span>      :return:
     <span class="token operator">|</span>
     <span class="token operator">|</span>  ----------------------------------------------------------------------
     <span class="token operator">|</span>  Data descriptors defined here:
     <span class="token operator">|</span>
     <span class="token operator">|</span>  __dict__
     <span class="token operator">|</span>      dictionary <span class="token keyword">for</span> instance variables <span class="token punctuation">(</span>if defined<span class="token punctuation">)</span>
     <span class="token operator">|</span>
     <span class="token operator">|</span>  __weakref__
     <span class="token operator">|</span>      list of weak references to the object <span class="token punctuation">(</span>if defined<span class="token punctuation">)</span>
     <span class="token operator">|</span>
     <span class="token operator">|</span>  ----------------------------------------------------------------------
     <span class="token operator">|</span>  Data and other attributes defined here:
     <span class="token operator">|</span>
     <span class="token operator">|</span>  name <span class="token operator">=</span> <span class="token string">'pydoc'</span>

FUNCTIONS
    create_doc<span class="token punctuation">(</span>name, language, money<span class="token punctuation">)</span>
        定义一个打印创建doc信息的函数
        name --- 档的称
        language --- 文档语言
        money --- 售价
        :param name:
        :param language:
        :param money:
        :return:

DATA
    NAME <span class="token operator">=</span> <span class="token string">'PyDOC'</span>

FILE
    d:\myspace\python\unittest\doc\01_create_pydoc.py

</code></pre> 
<h4><a id="12_pydoc__HTML__143"></a>1.2 pydoc 生成 HTML 文档</h4> 
<pre><code class="prism language-bash"><span class="token comment"># -w 选项，该选项代表 write，表明输出 HTML 文档</span>
python -m pydoc -w 01_create_pydoc

</code></pre> 
<p><img src="https://images2.imgbox.com/68/6d/tiuqF67K_o.png" alt="pydoc 生成 HTML 文档"></p> 
<h4><a id="13__152"></a>1.3 启动本地服务查看文档</h4> 
<pre><code>第一部分显示 Python 内置的核心模块。
第二部分显示 当前目录下的所有模块。
第三部分显示 目录下的所有模块，此时在该目录下并未包含任何模块。第三部分用于显示 PYTHONPATH 环境变量所指定路径下的模块
</code></pre> 
<pre><code class="prism language-bash">python -m pydoc -p 1234

<span class="token comment"># 输出信息</span>
python -m pydoc -p 1234
Server ready at http://localhost:1234/
Server commands: <span class="token punctuation">[</span>b<span class="token punctuation">]</span>rowser, <span class="token punctuation">[</span>q<span class="token punctuation">]</span>uit
server<span class="token operator">&gt;</span> b    --- 启动浏览器，当然也可以自己在浏览器输入地址
server<span class="token operator">&gt;</span> q    --- 退出本地服务
Server stopped
</code></pre> 
<h4><a id="14_pydoc__168"></a>1.4 pydoc 查找模块</h4> 
<p>-k 后跟被搜索模块的部分内容，即可以进行模糊搜索</p> 
<pre><code class="prism language-bash">python -m pydoc -k create
</code></pre> 
<h3><a id="2_doctest__174"></a>2. doctest 文档测试</h3> 
<p>  文档测试，即通过 <strong>doctest</strong> 模块运行 Python 源文件的说明文档中的测试用例，从而生成测试报告。</p> 
<p>  文档测试工具可以提取文档说明中的测试用例，<strong>"&gt;&gt;&gt;"</strong> 后面就表示的是测试用例，紧接着的一行则代表测试用例的输出结果（即预期结果）。文档测试工具会判断测试用例与预期结果是否一致，不一致会输出错误信息。<br> 【<strong><a href="https://github.com/Crisimple/UnitTest/commit/cda157d7845e3820577d6bc948d3b65bfbbdf8f1">GitHub代码commits id：cda157d</a></strong>】</p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- encoding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
@File    :   02_doctest.py
@Time    :   2019/8/17 15:48
@Author  :   Crisimple
@Github :    https://crisimple.github.io/
@Contact :   Crisimple@foxmail.com
@License :   (C)Copyright 2017-2019, Micro-Circle
@Desc    :   None
"""</span>

<span class="token keyword">import</span> doctest


<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    定义一个代表用户的类，该类包含两个属性：
    name - 用户的名字
    age - 用户的年龄

    &gt;&gt;&gt; u = User('abc', 9)
    &gt;&gt;&gt; u.name
    'ABC'
    &gt;&gt;&gt; u.age
    9
    &gt;&gt;&gt; u.say()
    'abc 说，我今年 10 岁了。'
    """</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age

    <span class="token keyword">def</span> <span class="token function">say</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"%s 说，我今年 %s 岁了。"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>age<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># testmod() 函数会自动提取该模块的说明文档中的测试用例，并执行这些测试用例，最终生成测试报告。如果存在没有通过的测试用例，程序就会显示有多少个测试用例没有通过；如果所有测试用例都能通过测试，则不生成任何输出结果。</span>
    doctest<span class="token punctuation">.</span>testmod<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>执行以后输出的测试执行报告</p> 
<pre><code class="prism language-bash">Failure
<span class="token operator">&lt;</span>Click to see difference<span class="token operator">&gt;</span>

**********************************************************************
File <span class="token string">"C:/MySpace/Python/UnitTest/doc/02_doctest.py"</span>, line 23, <span class="token keyword">in</span> User
Failed example:
    u.name
Expected:
    <span class="token string">'ABC'</span>
Got:
    <span class="token string">'abc'</span>

Failure
<span class="token operator">&lt;</span>Click to see difference<span class="token operator">&gt;</span>

**********************************************************************
File <span class="token string">"C:/MySpace/Python/UnitTest/doc/02_doctest.py"</span>, line 27, <span class="token keyword">in</span> User
Failed example:
    u.say<span class="token punctuation">(</span><span class="token punctuation">)</span>
Expected:
    <span class="token string">'abc 说，我今年 10 岁了。'</span>
Got:
    <span class="token string">'abc 说，我今年 9 岁了。'</span>

Process finished with <span class="token keyword">exit</span> code 0
</code></pre> 
<pre><code>第一部分：显示在哪个源文件的哪一行。
第二部分：Failed example，显示是哪个测试用例出错了。
第三部分：Expected，显示程序期望的输出结果。也就是在“&gt;&gt;&gt;命令”的下一行给出的运行结果，它就是期望结果。
第四部分：Got，显示程序实际运行产生的输出结果。只有当实际运行产生的输出结果与期望结果一致时，才表明该测试用例通过。
</code></pre> 
<hr> 
<h2><a id="Python__259"></a>二、Python 单元测试</h2> 
<h3><a id="1_PyUnitunittest_261"></a>1. PyUnit(unittest)</h3> 
<p>  PyUnit（unittest）是Python自带的单元测试框架，用于编写和运行可重复的测试。PyUnit 是 xUnit 体系的成员之一，xUnit 是众多测试框架的总称。PyUnit主要用于白盒测试和回归测试。</p> 
<blockquote> 
 <p>PyUnit的特点：</p> 
</blockquote> 
<pre><code>（1）让测试具有持久性，测试与开发同步进行，测试代码与开发代码一并发布；
（2）可以是测试代码与产品代码分离；
（3）针对某一个类的测试代码只需少量改动就可以应用与另一个类的测试；
（4）使用断言方法判断期望值与实际值的差异，返回bool值；
（5）测试驱动设备可以使用共同的处理化变量或实例；
（6）测试包结构便于组织集成运行。
</code></pre> 
<blockquote> 
 <p>unittest 要求单元测试类必须继承 unittest.TestCase，该类中的测试方法需要满足如下要求：</p> 
</blockquote> 
<pre><code>测试方法应该没有返回值。
测试方法不应该有任何参数。
测试方法应以test 开头。
</code></pre> 
<blockquote> 
 <p>当测试是不想执行某一条测试用例，除了注释测试用例相关代码外，还可以进行如下操作跳过测试用例的执行：</p> 
</blockquote> 
<p>【<strong><a href="https://github.com/Crisimple/UnitTest/commit/56a251fdfae751ca56ed66213c0d1fbda87e344c">GitHub代码commits id：56a251f</a></strong>】</p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- encoding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
@File    :   03_pyunit.py
@Time    :   2019/8/17 17:21
@Author  :   Crisimple
@Github :    https://crisimple.github.io/
@Contact :   Crisimple@foxmail.com
@License :   (C)Copyright 2017-2019, Micro-Circle
@Desc    :   None
"""</span>

<span class="token keyword">import</span> unittest


<span class="token keyword">def</span> <span class="token function">one_equation</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    求解一元一次方程 a * x + b = 0 的解
    a --- 方程中变量的系数
    b --- 方程中的产量
    返回方程的解
    :param a:
    :param b:
    :return:
    """</span>
    <span class="token comment"># 方程无解</span>
    <span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"参数错误，分母不能为0"</span><span class="token punctuation">)</span>
    <span class="token comment"># 返回方程的解</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> b <span class="token operator">/</span> a


<span class="token keyword">def</span> <span class="token function">two_equation</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    求解一元二次方程 a * a * x + b * x + c = 0
    a --- 方程中变量二次幂的系数
    b --- 方程中变量一次幂的系统
    c --- 方程中的常量
    :param a:
    :param b:
    :param c:
    :return:
    """</span>
    <span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"参数错误"</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> b <span class="token operator">*</span> b <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> a <span class="token operator">*</span> c <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"方程在有理数范围内无解"</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> b <span class="token operator">*</span> b <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> a <span class="token operator">*</span> c <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token operator">-</span>b <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> a<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        r1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span>b <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token operator">*</span> b <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> a <span class="token operator">*</span> c<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">/</span> a
        r2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span>b <span class="token operator">-</span> <span class="token punctuation">(</span>b <span class="token operator">*</span> b <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> a <span class="token operator">*</span> c<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">/</span> a
        <span class="token keyword">return</span> r1<span class="token punctuation">,</span> r2


<span class="token keyword">class</span> <span class="token class-name">TestMath</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 测试一元一次方程的求解</span>
    <span class="token keyword">def</span> <span class="token function">test_one_equation</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>one_equation<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>one_equation<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">28</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">)</span>

        <span class="token keyword">with</span> self<span class="token punctuation">.</span>assertRaises<span class="token punctuation">(</span>ValueError<span class="token punctuation">)</span><span class="token punctuation">:</span>
            one_equation<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>

    <span class="token comment"># 测试一元二次方程的求解</span>
    <span class="token keyword">def</span> <span class="token function">test_two_equation</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        r1<span class="token punctuation">,</span> r2 <span class="token operator">=</span> two_equation<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertCountEqual<span class="token punctuation">(</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'求解出错'</span><span class="token punctuation">)</span>
        r1<span class="token punctuation">,</span> r2 <span class="token operator">=</span> two_equation<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertCountEqual<span class="token punctuation">(</span><span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'求解出错'</span><span class="token punctuation">)</span>
        <span class="token comment"># 断言只有一个解的情形</span>
        r <span class="token operator">=</span> two_equation<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token string">'求解出错'</span><span class="token punctuation">)</span>
        <span class="token comment"># 断言当a == 0时的情况，断言引发ValueError</span>
        <span class="token keyword">with</span> self<span class="token punctuation">.</span>assertRaises<span class="token punctuation">(</span>ValueError<span class="token punctuation">)</span><span class="token punctuation">:</span>
            two_equation<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token comment"># 断言引发ValueError</span>
        <span class="token keyword">with</span> self<span class="token punctuation">.</span>assertRaises<span class="token punctuation">(</span>ValueError<span class="token punctuation">)</span><span class="token punctuation">:</span>
            two_equation<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#  -v 选项来生成更详细的测试报告</span>
$ python -m unittest -v 03_pyunit.py
test_one_equation <span class="token punctuation">(</span>03_pyunit.TestMath<span class="token punctuation">)</span> <span class="token punctuation">..</span>. FAIL
test_two_equation <span class="token punctuation">(</span>03_pyunit.TestMath<span class="token punctuation">)</span> <span class="token punctuation">..</span>. skipped <span class="token string">'临时跳过该测试用例不执行'</span>

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
FAIL: test_one_equation <span class="token punctuation">(</span>03_pyunit.TestMath<span class="token punctuation">)</span>
----------------------------------------------------------------------
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"C:\MySpace\Python\UnitTest\doc\03_pyunit.py"</span>, line 60, <span class="token keyword">in</span> test_one_equation
    self.assertEqual<span class="token punctuation">(</span>one_equation<span class="token punctuation">(</span>2, 5<span class="token punctuation">)</span>, 1.5<span class="token punctuation">)</span>
AssertionError: 2.5 <span class="token operator">!=</span> 1.5

----------------------------------------------------------------------
Ran 2 tests <span class="token keyword">in</span> 0.003s

FAILED <span class="token punctuation">(</span>failures<span class="token operator">=</span>1, skipped<span class="token operator">=</span>1<span class="token punctuation">)</span>


</code></pre> 
<p>测试结果的输出结果含义：</p> 
<pre><code>．：代表测试通过。
F：代表测试失败，F 代表 failure。
E：代表测试出错，E 代表 error。
s：代表跳过该测试，s 代表 skip。
</code></pre> 
<h4><a id="11__400"></a>1.1 常用断言方法</h4> 
<p>unittest.TestCase 内置大量的 assertXXX 方法来执行断言，常用的断言方法有：</p> 
<table><thead><tr><th>断言方法</th><th>检查条件</th></tr></thead><tbody><tr><td>assertEqual(a, b)</td><td>a == b</td></tr><tr><td>assertNotEqual(a, b)</td><td>100</td></tr><tr><td>assertTrue(x)</td><td>bool(x) is True</td></tr><tr><td>assertFalse(x)</td><td>bool(x) is False</td></tr><tr><td>assertIs(a, b)</td><td>a is b</td></tr><tr><td>assertNot(a, b)</td><td>a is not b</td></tr><tr><td>assertNone(x)</td><td>x is None</td></tr><tr><td>assertNotNone(x)</td><td>x is not None</td></tr><tr><td>assertIn(a, b)</td><td>a in b</td></tr><tr><td>assertNotIn(a, b)</td><td>a not in b</td></tr><tr><td>assertIsInstance(a ,b)</td><td>isinstance(a, b)</td></tr><tr><td>assertNotIsInstance(a, b)</td><td>not isinstance(a, b)</td></tr></tbody></table> 
<h4><a id="12__417"></a>1.2 异常、日志类断言</h4> 
<p>  TestCase 包含的与异常、错误、警告和日志相关的断言方法：</p> 
<table><thead><tr><th>断言方法</th><th>检查条件</th></tr></thead><tbody><tr><td>assertRaises(exc, fun, *args, **kwds)</td><td>fun(*args, **kwds) 引发 exc 异常</td></tr><tr><td>assertRaisesRegex(exc, r, fun, *args, **kwds)</td><td>fun(*args, **kwds) 引发 exc 异常，且异常信息匹配 r 正则表达式</td></tr><tr><td>assertWarns(warn, fun, *args, **kwds)</td><td>fun(*args, **kwds) 引发 warn 警告</td></tr><tr><td>assertWamsRegex(warn, r, fun, *args, **kwds)</td><td>fun(*args, **kwds) 引发 warn 警告，且警告信息匹配 r 正则表达式</td></tr><tr><td>assertLogs(logger, level)</td><td>With 语句块使用日志器生成 level 级别的日志</td></tr></tbody></table> 
<h4><a id="13__427"></a>1.3 某种特定检查断言</h4> 
<p>  TestCase 包含的用于完成某种特定检查的断言方法</p> 
<table><thead><tr><th>断言方法</th><th>检查条件</th></tr></thead><tbody><tr><td>assertAlmostEqual(a, b)</td><td>round(a-b, 7) == 0</td></tr><tr><td>assertNotAlmostEqual(a, b)</td><td>round(a-b, 7) != 0</td></tr><tr><td>assertGreater(a, b)</td><td>a &gt; b</td></tr><tr><td>assertGreaterEqual(a, b)</td><td>a &gt;= b</td></tr><tr><td>assertLess(a, b)</td><td>a &lt; b</td></tr><tr><td>assertLessEqual(a, b)</td><td>a &lt;= b</td></tr><tr><td>assertRegex(s, r)</td><td>r.search(s)</td></tr><tr><td>assertNotRegex(s, r)</td><td>not r.search(s)</td></tr><tr><td>assertCountEqual(a, b)</td><td>a、b 两个序列包含的元素相同，不管元素出现的顺序如何</td></tr></tbody></table> 
<h4><a id="14__441"></a>1.4 针对特定类型断言</h4> 
<p>  如果被判断的类型是字符串、序列、列表、元组、集合、字典，则程序会自动改为使用下表 所示的断言方法进行判断。换而言之，下表所示的断言方法其实没有必要使用，unittest 模块会自动应用它们。</p> 
<table><thead><tr><th>断言方法</th><th>用于比较的类型</th></tr></thead><tbody><tr><td>assertMultiLineEqual(a, b)</td><td>字符串(string)</td></tr><tr><td>assertSequenceEqual(a, b)</td><td>序列(sequence)</td></tr><tr><td>assertListEqual(a, b)</td><td>列表(list)</td></tr><tr><td>assertTupleEqual(a, b)</td><td>元组(tuple)</td></tr><tr><td>assertSetEqual(a, b)</td><td>集合(set 或 frozenset)</td></tr><tr><td>assertDictEqual(a, b)</td><td>字典(dict)</td></tr></tbody></table> 
<h3><a id="2__453"></a>2. 测试整合</h3> 
<h4><a id="21_TestSuite_454"></a>2.1 测试包(TestSuite)</h4> 
<p>  测试包（TestSuite）可以组织多个测试用例，测试包还可以嵌套测试包。在使用测试包组织多个测试用例和测试包之后，程序可以使用测试运行器（TestRunner）来运行该测试用包包含的所有测试用例。</p> 
<blockquote> 
 <p>测试相关的补充：</p> 
</blockquote> 
<pre><code>测试用例类：测试用例类就是单个的测试单元，其负责检查特定输入和对应的输出是否匹配。unittest 提供了一个 TestCase 基类用于创建测试用例类。
测试包：用于组合多个测试用例，测试包也可以嵌套测试包。
测试运行器：负责组织、运行测试用例，并向用户呈现测试结果。
测试固件：代表执行一个或多个测试用例所需的准备工作，以及相关联的准备操作，准备工作可能包括创建临时数据库、创建目录、开启服务器进程等。
</code></pre> 
<h4><a id="22_TestFixture_464"></a>2.2 测试固件(TestFixture)</h4> 
<p>  unittest.TestCase 包含了 setUp() 和 tearDown() 两个方法，其中 setUp() 方法用于初始化测试固件；而 tearDown() 方法用于销毁测试固件。程序会在运行每个测试用例（以 test_ 开头的方法）之前自动执行 setUp() 方法来初始化测试固件，井在每个测试用例（以 test_ 开头的方法）运行完成之后自动执行 tearDown() 方法来销毁测试固件。<br> 【<strong><a href="https://github.com/Crisimple/UnitTest/commit/8b8e4462ff51750a9e4c93ac4018989a7694b296">GitHub代码commits id：8b8e446</a></strong>】</p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- encoding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
@File    :   04_testsuite.py
@Time    :   2019/8/18 17:43
@Author  :   Crisimple
@Github :    https://crisimple.github.io/
@Contact :   Crisimple@foxmail.com
@License :   (C)Copyright 2017-2019, Micro-Circle
@Desc    :   None
"""</span>
<span class="token keyword">import</span> unittest


<span class="token keyword">def</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">"Hello Python"</span>


<span class="token keyword">def</span> <span class="token function">func_add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b


<span class="token keyword">def</span> <span class="token function">func_error</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> a


<span class="token keyword">def</span> <span class="token function">func_skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">"skip这个方法"</span>


<span class="token keyword">class</span> <span class="token class-name">TestSay</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @<span class="token builtin">classmethod</span>
    <span class="token keyword">def</span> <span class="token function">setUpClass</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"TestSay开始测试固件..."</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_say</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>say<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Hello"</span><span class="token punctuation">)</span>

    @<span class="token builtin">classmethod</span>
    <span class="token keyword">def</span> <span class="token function">tearDownClass</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"TestSay结束测试固件..."</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">TestAdd</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @<span class="token builtin">classmethod</span>
    <span class="token keyword">def</span> <span class="token function">setUpClass</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"TestAdd开始测试固件..."</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_func_add</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>func_add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>func_add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>func_add<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3.5</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_error</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>func_error<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>

    @unittest<span class="token punctuation">.</span>skip<span class="token punctuation">(</span><span class="token string">'这条测试用例跳过不执行'</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">test_skip</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>func_skip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'skip这个方法'</span><span class="token punctuation">)</span>

    @<span class="token builtin">classmethod</span>
    <span class="token keyword">def</span> <span class="token function">tearDownClass</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"TestAdd结束测试固件..."</span><span class="token punctuation">)</span>


<span class="token comment"># 测试用例管理</span>
testCases <span class="token operator">=</span> <span class="token punctuation">(</span>TestSay<span class="token punctuation">,</span> TestAdd<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">whole_suite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建测试加载器</span>
    loader <span class="token operator">=</span> unittest<span class="token punctuation">.</span>TestLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 创建测试包</span>
    suite <span class="token operator">=</span> unittest<span class="token punctuation">.</span>TestSuite<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 遍历所有测试类</span>
    <span class="token keyword">for</span> testCase <span class="token keyword">in</span> testCases<span class="token punctuation">:</span>
        <span class="token comment"># 从测试类中加载测试用例</span>
        tests <span class="token operator">=</span> loader<span class="token punctuation">.</span>loadTestsFromTestCase<span class="token punctuation">(</span>testCase<span class="token punctuation">)</span>
        <span class="token comment"># 将测试用例加到测试包中</span>
        suite<span class="token punctuation">.</span>addTests<span class="token punctuation">(</span>tests<span class="token punctuation">)</span>

    <span class="token keyword">return</span> suite


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'04_testsuite_report.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token comment"># 创建测试运行器（TestRunner）</span>
        <span class="token comment"># verbosity=2 生成更详细的测试报告</span>
        runner <span class="token operator">=</span> unittest<span class="token punctuation">.</span>TextTestRunner<span class="token punctuation">(</span>verbosity<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> stream<span class="token operator">=</span>f<span class="token punctuation">)</span>
        runner<span class="token punctuation">.</span>run<span class="token punctuation">(</span>whole_suite<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<p>执行输出结果：</p> 
<pre><code class="prism language-bash">$ python -m unittest -v 04_testsuite.py
TestAdd开始测试固件<span class="token punctuation">..</span>.
test_error <span class="token punctuation">(</span>04_testsuite.TestAdd<span class="token punctuation">)</span> <span class="token punctuation">..</span>. FAIL
test_func_add <span class="token punctuation">(</span>04_testsuite.TestAdd<span class="token punctuation">)</span> <span class="token punctuation">..</span>. ok
test_skip <span class="token punctuation">(</span>04_testsuite.TestAdd<span class="token punctuation">)</span> <span class="token punctuation">..</span>. skipped <span class="token string">'这条测试用例跳过不执行'</span>
TestAdd结束测试固件<span class="token punctuation">..</span>.
TestSay开始测试固件<span class="token punctuation">..</span>.
test_say <span class="token punctuation">(</span>04_testsuite.TestSay<span class="token punctuation">)</span> <span class="token punctuation">..</span>. FAIL
TestSay结束测试固件<span class="token punctuation">..</span>.

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
FAIL: test_error <span class="token punctuation">(</span>04_testsuite.TestAdd<span class="token punctuation">)</span>
----------------------------------------------------------------------
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"C:\MySpace\Python\UnitTest\doc\04_testsuite.py"</span>, line 55, <span class="token keyword">in</span> test_error
    self.assertEqual<span class="token punctuation">(</span>func_error<span class="token punctuation">(</span>2<span class="token punctuation">)</span>, -2<span class="token punctuation">)</span>
AssertionError: 2 <span class="token operator">!=</span> -2

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
FAIL: test_say <span class="token punctuation">(</span>04_testsuite.TestSay<span class="token punctuation">)</span>
----------------------------------------------------------------------
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"C:\MySpace\Python\UnitTest\doc\04_testsuite.py"</span>, line 37, <span class="token keyword">in</span> test_say
    self.assertEqual<span class="token punctuation">(</span>say<span class="token punctuation">(</span><span class="token punctuation">)</span>, <span class="token string">"Hello"</span><span class="token punctuation">)</span>
AssertionError: <span class="token string">'Hello Python'</span> <span class="token operator">!=</span> <span class="token string">'Hello'</span>
- Hello Python
+ Hello


----------------------------------------------------------------------
Ran 4 tests <span class="token keyword">in</span> 0.004s

FAILED <span class="token punctuation">(</span>failures<span class="token operator">=</span>2, skipped<span class="token operator">=</span>1<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3_601"></a>3.批量执行用例</h3> 
<p>  在大型项目测试中，我们会面临大量的测试用例，这些测试用例肯定不能一个个执行了，所以我们怎样来批量执行大量的测试用例呢？</p> 
<p>  是的，用容器。我们可以将要执行的测试用例添加到容器中，执行容器达到执行多测试用例的目的。【<strong><a href="https://github.com/Crisimple/UnitTest/commit/1e3216eee5e0a98353eda07944a03d5b125f0f22">GitHub示例</a></strong>】</p> 
<p><img src="https://images2.imgbox.com/4b/6c/fcrX9q1W_o.png" alt=""></p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- encoding: utf-8 -*-</span>
<span class="token triple-quoted-string string">"""
@File    :   0203_execute_more_cases.py
@Time    :   2019/8/28 22:00
@Author  :   Crisimple
@Github :    https://crisimple.github.io/
@Contact :   Crisimple@foxmail.com
@License :   (C)Copyright 2017-2019, Micro-Circle
@Desc    :   这里批量的测试用例指的是 "../testcase/ " 目录下的测试用例们
"""</span>

<span class="token keyword">import</span> unittest
<span class="token keyword">import</span> os


<span class="token keyword">class</span> <span class="token class-name">ExecuteMoreCases</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">test_execute</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 当前目录</span>
        current_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>current_dir<span class="token punctuation">)</span>  <span class="token comment"># D:\MySpace\Python\WebTesting\util</span>
        cases_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">'../testcase/'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>cases_dir<span class="token punctuation">)</span>
        suite <span class="token operator">=</span> unittest<span class="token punctuation">.</span>defaultTestLoader<span class="token punctuation">.</span>discover<span class="token punctuation">(</span>cases_dir<span class="token punctuation">,</span> <span class="token string">'00203_case1.py'</span><span class="token punctuation">)</span>
        unittest<span class="token punctuation">.</span>TextTestRunner<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>run<span class="token punctuation">(</span>suite<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/28b79f4343356551fd4077653a9b11e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python 基础学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/269ec8427c688564beb8261e22c4b3d9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux 系统基础知识</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>