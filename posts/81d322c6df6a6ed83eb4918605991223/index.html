<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 提高篇学习笔记(一)：深拷贝和浅拷贝 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python 提高篇学习笔记(一)：深拷贝和浅拷贝" />
<meta property="og:description" content="文章目录 一、什么是对象的引用二、深拷贝和浅拷贝2.1 浅拷贝(Shallow Copy)2.2 深拷贝(Deep Copy)2.3 copy.copy和copy.deepcopy的区别 一、什么是对象的引用 在 Python 中，对象的引用是指变量指向内存中某个对象的地址或标识符。当你创建一个新的对象(比如一个整数、字符串、列表等)，Python 会分配一块内存来存储这个对象，并且给这个对象分配一个唯一的标识符(也就是对象的地址)。当你将这个对象赋值给一个变量时，实际上这个变量就存储了对该对象的引用，而不是对象本身。这意味着变量并不直接包含对象的值，而是指向存储这个值的内存地址。
举例：
In [19]: x = [1, 2, 3] # 创建一个列表对象，并将其引用赋给变量x In [20]: y = x # y和x现在指向同一个列表对象 In [21]: # 修改x所指向的列表对象 In [22]: x.append(4) In [23]: print(y) # 输出[1, 2, 3, 4]，因为y引用的是和x相同的列表对象 [1, 2, 3, 4] 在这个例子中，[1, 2, 3] 是一个列表对象，在内存中有自己的地址。x 这个变量包含了对这个列表对象的引用，而不是列表对象本身。如果你创建一个新的变量 y = x，那么 y 实际上也会指向同一个列表对象，即它们共享相同的引用。图示：
因此，对于可变对象(如列表、字典等)， 如果多个变量引用了同一个对象，当你通过一个变量修改这个对象时，其他引用了相同对象的变量也会反映出这个修改。这是因为它们引用的是同一个对象，而不是对象的副本。对于不可变对象(如整数、字符串等)， 由于对象本身是不可变的，任何修改都会导致新对象的创建，而不会影响原始对象，因为对不可变对象的修改实际上是创建了一个新对象并将变量重新指向新对象的地址。举例：
In [33]: x = 300 In [34]: y = x In [35]: y = 400 In [36]: print(x, y) 300 400 图示：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/81d322c6df6a6ed83eb4918605991223/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-22T22:13:42+08:00" />
<meta property="article:modified_time" content="2023-11-22T22:13:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 提高篇学习笔记(一)：深拷贝和浅拷贝</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、什么是对象的引用</a></li><li><a href="#_50" rel="nofollow">二、深拷贝和浅拷贝</a></li><li><ul><li><a href="#21_Shallow_Copy_52" rel="nofollow">2.1 浅拷贝(Shallow Copy)</a></li><li><a href="#22_Deep_Copy_129" rel="nofollow">2.2 深拷贝(Deep Copy)</a></li><li><a href="#23_copycopycopydeepcopy_154" rel="nofollow">2.3 copy.copy和copy.deepcopy的区别</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、什么是对象的引用</h2> 
<p>在 Python 中，对象的引用是指变量指向内存中某个对象的地址或标识符。当你创建一个新的对象(比如一个整数、字符串、列表等)，Python 会分配一块内存来存储这个对象，并且给这个对象分配一个唯一的标识符(也就是对象的地址)。当你将这个对象赋值给一个变量时，实际上这个变量就存储了对该对象的引用，而不是对象本身。<strong>这意味着变量并不直接包含对象的值，而是指向存储这个值的内存地址。</strong></p> 
<p>举例：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">:</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment"># 创建一个列表对象，并将其引用赋给变量x</span>
In <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">:</span> y <span class="token operator">=</span> x <span class="token comment"># y和x现在指向同一个列表对象</span>
In <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 修改x所指向的列表对象</span>
In <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">:</span> x<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token comment"># 输出[1, 2, 3, 4]，因为y引用的是和x相同的列表对象</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
</code></pre> 
<p>在这个例子中，<strong><code>[1, 2, 3]</code></strong> 是一个列表对象，在内存中有自己的地址。x 这个变量包含了对这个列表对象的引用，而不是列表对象本身。如果你创建一个新的变量 y = x，那么 y 实际上也会指向同一个列表对象，即它们共享相同的引用。图示：<br> <img src="https://images2.imgbox.com/3f/18/J6uRMmSO_o.png" alt="在这里插入图片描述"><br> 因此，<strong>对于可变对象(如列表、字典等)，</strong> 如果多个变量引用了同一个对象，当你通过一个变量修改这个对象时，其他引用了相同对象的变量也会反映出这个修改。这是因为它们引用的是同一个对象，而不是对象的副本。<strong>对于不可变对象(如整数、字符串等)，</strong> 由于对象本身是不可变的，任何修改都会导致新对象的创建，而不会影响原始对象，因为对不可变对象的修改实际上是创建了一个新对象并将变量重新指向新对象的地址。举例：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">:</span> x <span class="token operator">=</span> <span class="token number">300</span>
In <span class="token punctuation">[</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">:</span> y <span class="token operator">=</span> x
In <span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">:</span> y <span class="token operator">=</span> <span class="token number">400</span>
In <span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token number">300</span> <span class="token number">400</span>
</code></pre> 
<p>图示：<br> <img src="https://images2.imgbox.com/36/88/SLjDm9mM_o.png" alt="在这里插入图片描述"><br> <strong>补充：在 Python 中，== 和 is 是用于比较对象的运算符，但它们的作用不同：</strong></p> 
<p><strong>①</strong> == 操作符用于比较两个对象的值是否相等。<br> <strong>②</strong> is 操作符用于检查两个对象是否是同一个对象，也就是比较它们的身份标识(即内存地址/引用)是否相同。示例如下：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">39</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">41</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 比较值是否相等</span>
In <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token comment"># 输出True，因为列表a和列表b中的元素都相同</span>
<span class="token boolean">True</span>
In <span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 检查是否是同一个对象</span>
In <span class="token punctuation">[</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b<span class="token punctuation">)</span> <span class="token comment"># 输出False，因为a和b是不同的对象，即在内存地址/引用不一样</span>
<span class="token boolean">False</span>
</code></pre> 
<p><strong>注意：</strong> 在 Python 中，有一个特定的机制用于缓存一定范围内的小整数对象，这个范围通常是 <strong><code>-5~256</code> (这个范围可能会因 Python 版本和具体实现而略有不同)。</strong> 这意味着在这个范围内的整数对象在 Python 程序中的生命周期中会被缓存并重用，而不是每次都创建新的对象。这个缓存机制是为了提高性能和节省内存。因为这些小整数在许多情况下是常用的，Python 会在启动时预先创建这些对象并将其缓存起来，当你需要使用这些整数时，Python 会直接返回缓存中的对象而不是创建新的对象。这种缓存机制使得在相同范围内的整数对象比较时，使用 is 操作符可能返回 True，因为它们指向相同的对象：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">45</span><span class="token punctuation">]</span><span class="token punctuation">:</span> x <span class="token operator">=</span> <span class="token number">10</span>
In <span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span><span class="token punctuation">:</span> y <span class="token operator">=</span> <span class="token number">10</span>
In <span class="token punctuation">[</span><span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>x <span class="token keyword">is</span> y<span class="token punctuation">)</span> <span class="token comment"># 输出True，因为x和y是同一个对象，由于小整数的缓存机制(有些也称为常量池)</span>
<span class="token boolean">True</span>
In <span class="token punctuation">[</span><span class="token number">48</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token number">300</span>
In <span class="token punctuation">[</span><span class="token number">49</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token number">300</span>
In <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token keyword">is</span> b<span class="token punctuation">)</span> <span class="token comment"># 输出False，因为超出了小整数的缓存范围，a和b是不同的对象</span>
<span class="token boolean">False</span>
</code></pre> 
<h2><a id="_50"></a>二、深拷贝和浅拷贝</h2> 
<p>在 Python 中，深拷贝和浅拷贝是用于创建对象副本的概念。在理解这两者之间的区别之前，让我们先来看看它们的定义和用法。</p> 
<h3><a id="21_Shallow_Copy_52"></a>2.1 浅拷贝(Shallow Copy)</h3> 
<p>浅拷贝创建一个新对象，但是只复制了对象的引用。这意味着原始对象及其副本引用了相同的子对象。当你对原始对象或副本对象做出改变时，子对象的改变会反映在两者之间。</p> 
<p>在 Python 中，可以使用 copy 模块中的 copy() 方法来进行浅拷贝：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">import</span> copy
In <span class="token punctuation">[</span><span class="token number">66</span><span class="token punctuation">]</span><span class="token punctuation">:</span> original_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">:</span> new_list <span class="token operator">=</span> original_list  <span class="token comment"># 赋值是最简单的浅拷贝</span>
In <span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>original_list<span class="token punctuation">)</span> <span class="token comment"># 用来显示original_list指向的数据的内存地址</span>
Out<span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">1837971633856</span>
In <span class="token punctuation">[</span><span class="token number">69</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>new_list<span class="token punctuation">)</span> <span class="token comment"># 用来显示new_list指向的数据的内存地址</span>
Out<span class="token punctuation">[</span><span class="token number">69</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">1837971633856</span>

In <span class="token punctuation">[</span><span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">:</span> shallow_copied_list <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>original_list<span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">71</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 修改shallow_copied_list副本中的元素</span>
In <span class="token punctuation">[</span><span class="token number">72</span><span class="token punctuation">]</span><span class="token punctuation">:</span> shallow_copied_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
In <span class="token punctuation">[</span><span class="token number">73</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 修改子对象(原始对象和副本对象共享的对象)</span>
In <span class="token punctuation">[</span><span class="token number">74</span><span class="token punctuation">]</span><span class="token punctuation">:</span> shallow_copied_list<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>
In <span class="token punctuation">[</span><span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>original_list<span class="token punctuation">,</span> new_list<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">78</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>shallow_copied_list<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> 
<p>图示：<br> <img src="https://images2.imgbox.com/18/46/MNMtlZsr_o.png" alt="在这里插入图片描述"><br> 字典示例：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">131</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">import</span> copy
In <span class="token punctuation">[</span><span class="token number">132</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'AmoXiang'</span><span class="token punctuation">,</span>age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>hobby_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">133</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>d<span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">134</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d
Out<span class="token punctuation">[</span><span class="token number">134</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'AmoXiang'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">135</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co
Out<span class="token punctuation">[</span><span class="token number">135</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'AmoXiang'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">136</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>co<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">136</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1838005229056</span><span class="token punctuation">,</span> <span class="token number">1838001691136</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">137</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Amo'</span>
In <span class="token punctuation">[</span><span class="token number">138</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d
Out<span class="token punctuation">[</span><span class="token number">138</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amo'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">139</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co
Out<span class="token punctuation">[</span><span class="token number">139</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'AmoXiang'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">140</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co<span class="token punctuation">[</span><span class="token string">'hobby_list'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'swim'</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">141</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co
Out<span class="token punctuation">[</span><span class="token number">141</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'AmoXiang'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">,</span> <span class="token string">'swim'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">142</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d
Out<span class="token punctuation">[</span><span class="token number">142</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amo'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">,</span> <span class="token string">'swim'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">143</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>co<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">143</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1837976233200</span><span class="token punctuation">,</span> <span class="token number">1837949658800</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">144</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>co<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">144</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1837896002416</span><span class="token punctuation">,</span> <span class="token number">1837896002416</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">145</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'hobby_list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>co<span class="token punctuation">[</span><span class="token string">'hobby_list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">145</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1837979180480</span><span class="token punctuation">,</span> <span class="token number">1837979180480</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">146</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span>
In <span class="token punctuation">[</span><span class="token number">147</span><span class="token punctuation">]</span><span class="token punctuation">:</span> co
Out<span class="token punctuation">[</span><span class="token number">147</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'AmoXiang'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">,</span> <span class="token string">'swim'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
In <span class="token punctuation">[</span><span class="token number">148</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d
Out<span class="token punctuation">[</span><span class="token number">148</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Amo'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">'hobby_list'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dance'</span><span class="token punctuation">,</span> <span class="token string">'sing'</span><span class="token punctuation">,</span> <span class="token string">'swim'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> 
<p>浅拷贝对不可变类型和可变类型的 copy 不同：<br> <strong>①</strong> copy.copy 对于可变类型，会进行浅拷贝<br> <strong>②</strong> copy.copy 对于不可变类型，不会拷贝，仅仅是指向</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">159</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">import</span> copy
In <span class="token punctuation">[</span><span class="token number">160</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">161</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">162</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">162</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1838001649984</span><span class="token punctuation">,</span> <span class="token number">1837979060672</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">163</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">164</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a
Out<span class="token punctuation">[</span><span class="token number">164</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">165</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b
Out<span class="token punctuation">[</span><span class="token number">165</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">166</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">167</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">168</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">168</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1838005603584</span><span class="token punctuation">,</span> <span class="token number">1838005603584</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="22_Deep_Copy_129"></a>2.2 深拷贝(Deep Copy)</h3> 
<p>深拷贝创建一个全新的对象，同时递归地复制了所有子对象。这意味着原始对象及其副本不共享任何子对象。无论你对原始对象还是副本对象做出任何改变，都不会影响对方。同样使用 copy 模块中的 deepcopy() 方法进行深拷贝：</p> 
<pre><code class="prism language-python">In <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">import</span> copy
In <span class="token punctuation">[</span><span class="token number">91</span><span class="token punctuation">]</span><span class="token punctuation">:</span> original_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">92</span><span class="token punctuation">]</span><span class="token punctuation">:</span> deep_copied_list <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>original_list<span class="token punctuation">)</span>
In <span class="token punctuation">[</span><span class="token number">93</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>original_list<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">93</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">1838005694912</span>
In <span class="token punctuation">[</span><span class="token number">94</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">(</span>deep_copied_list<span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">94</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">1838005773312</span>
In <span class="token punctuation">[</span><span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 修改副本的元素</span>
In <span class="token punctuation">[</span><span class="token number">96</span><span class="token punctuation">]</span><span class="token punctuation">:</span> deep_copied_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
In <span class="token punctuation">[</span><span class="token number">97</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># 修改子对象(原始对象和副本对象共享的对象)</span>
In <span class="token punctuation">[</span><span class="token number">98</span><span class="token punctuation">]</span><span class="token punctuation">:</span> deep_copied_list<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>
In <span class="token punctuation">[</span><span class="token number">99</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>original_list<span class="token punctuation">)</span>  <span class="token comment"># 输出:[1, 2, [3, 4]]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>deep_copied_list<span class="token punctuation">)</span>  <span class="token comment"># 输出：[5, 2, [6, 4]]</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
In <span class="token punctuation">[</span><span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>original_list<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1838004780096</span>
In <span class="token punctuation">[</span><span class="token number">102</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>deep_copied_list<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1838001793984</span>
</code></pre> 
<p>图示：<br> <img src="https://images2.imgbox.com/d1/a0/yCHWNs1K_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23_copycopycopydeepcopy_154"></a>2.3 copy.copy和copy.deepcopy的区别</h3> 
<p><strong>copy.copy 图示：</strong><br> <img src="https://images2.imgbox.com/12/92/j9q1I63c_o.png" alt="在这里插入图片描述"><br> <strong>copy.deepcopy 有兴趣的可以自己画一下，这里我就不再进行赘述(图太难画了，偷下懒)。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/827135599afd459be36c29cff300cb6c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决：ERROR org.springframework.boot.SpringApplication - Application run failedorg.yaml.snakey</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d0acdf59c9236aa9e217b7c9f480d093/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">滚雪球学Java(09-8)：Java中的单目运算符，你真的掌握了吗？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>